!(function(){var VS=Object.defineProperty,HS=Object.defineProperties;var ZS=Object.getOwnPropertyDescriptors;var Ch=Object.getOwnPropertySymbols;var X0=Object.prototype.hasOwnProperty,j0=Object.prototype.propertyIsEnumerable;var Pv=Math.pow,Y0=(We,G,_)=>G in We?VS(We,G,{enumerable:!0,configurable:!0,writable:!0,value:_}):We[G]=_,Na=(We,G)=>{for(var _ in G||(G={}))X0.call(G,_)&&Y0(We,_,G[_]);if(Ch)for(var _ of Ch(G))j0.call(G,_)&&Y0(We,_,G[_]);return We},xo=(We,G)=>HS(We,ZS(G));var Th=(We,G)=>{var _={};for(var m in We)X0.call(We,m)&&G.indexOf(m)<0&&(_[m]=We[m]);if(We!=null&&Ch)for(var m of Ch(We))G.indexOf(m)<0&&j0.call(We,m)&&(_[m]=We[m]);return _};var V0=(We,G,_)=>new Promise((m,R)=>{var w=L=>{try{P(_.next(L))}catch(p){R(p)}},M=L=>{try{P(_.throw(L))}catch(p){R(p)}},P=L=>L.done?m(L.value):Promise.resolve(L.value).then(w,M);P((_=_.apply(We,G)).next())});(self.webpackChunkantd=self.webpackChunkantd||[]).push([[6343],{62238:function(We,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var _=function(w,M){var P=w.nodes,L=w.edges,p=[],b={};if(!P)throw new Error("invalid nodes data!");return P&&P.forEach(function(S,x){b[S.id]=x;var g=[];p.push(g)}),L&&L.forEach(function(S){var x=S.source,g=S.target,T=b[x],E=b[g];!T&&T!==0||!E&&E!==0||(p[T][E]=1,M||(p[E][T]=1))}),p},m=_;G.default=m},810369:function(We,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"GADDIAsync",{enumerable:!0,get:function(){return m.GADDIAsync}}),Object.defineProperty(G,"connectedComponentAsync",{enumerable:!0,get:function(){return m.connectedComponentAsync}}),G.default=void 0,Object.defineProperty(G,"detectAllCyclesAsync",{enumerable:!0,get:function(){return m.detectAllCyclesAsync}}),Object.defineProperty(G,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return m.detectAllDirectedCycleAsync}}),Object.defineProperty(G,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return m.detectAllUndirectedCycleAsync}}),Object.defineProperty(G,"detectCycleAsync",{enumerable:!0,get:function(){return m.detectCycleAsync}}),G.detectDirectedCycleAsync=void 0,Object.defineProperty(G,"dijkstraAsync",{enumerable:!0,get:function(){return m.dijkstraAsync}}),Object.defineProperty(G,"findAllPathAsync",{enumerable:!0,get:function(){return m.findAllPathAsync}}),Object.defineProperty(G,"findShortestPathAsync",{enumerable:!0,get:function(){return m.findShortestPathAsync}}),Object.defineProperty(G,"floydWarshallAsync",{enumerable:!0,get:function(){return m.floydWarshallAsync}}),Object.defineProperty(G,"getAdjMatrixAsync",{enumerable:!0,get:function(){return m.getAdjMatrixAsync}}),Object.defineProperty(G,"getDegreeAsync",{enumerable:!0,get:function(){return m.getDegreeAsync}}),Object.defineProperty(G,"getInDegreeAsync",{enumerable:!0,get:function(){return m.getInDegreeAsync}}),Object.defineProperty(G,"getNeighborsAsync",{enumerable:!0,get:function(){return m.getNeighborsAsync}}),Object.defineProperty(G,"getOutDegreeAsync",{enumerable:!0,get:function(){return m.getOutDegreeAsync}}),Object.defineProperty(G,"labelPropagationAsync",{enumerable:!0,get:function(){return m.labelPropagationAsync}}),Object.defineProperty(G,"louvainAsync",{enumerable:!0,get:function(){return m.louvainAsync}}),Object.defineProperty(G,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return m.minimumSpanningTreeAsync}}),Object.defineProperty(G,"pageRankAsync",{enumerable:!0,get:function(){return m.pageRankAsync}});var m=_(430485),R=m.detectCycleAsync;G.detectDirectedCycleAsync=R;var w={getAdjMatrixAsync:m.getAdjMatrixAsync,connectedComponentAsync:m.connectedComponentAsync,getDegreeAsync:m.getDegreeAsync,getInDegreeAsync:m.getInDegreeAsync,getOutDegreeAsync:m.getOutDegreeAsync,detectCycleAsync:m.detectCycleAsync,detectDirectedCycleAsync:R,detectAllCyclesAsync:m.detectAllCyclesAsync,detectAllDirectedCycleAsync:m.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:m.detectAllUndirectedCycleAsync,dijkstraAsync:m.dijkstraAsync,findAllPathAsync:m.findAllPathAsync,findShortestPathAsync:m.findShortestPathAsync,floydWarshallAsync:m.floydWarshallAsync,labelPropagationAsync:m.labelPropagationAsync,louvainAsync:m.louvainAsync,minimumSpanningTreeAsync:m.minimumSpanningTreeAsync,pageRankAsync:m.pageRankAsync,getNeighborsAsync:m.getNeighborsAsync,GADDIAsync:m.GADDIAsync};G.default=w},683764:function(We,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var m=w(_(893026)),R=_(770643);function w(p){return p&&p.__esModule?p:{default:p}}function M(p){p===void 0&&(p={});var b=p,S=function(){},x=function(){var g={};return function(T){var E=T.next,O=E;return g[O]?!1:(g[O]=!0,!0)}}();return b.allowTraversal=p.allowTraversal||x,b.enter=p.enter||S,b.leave=p.leave||S,b}var P=function(b,S,x,g){g===void 0&&(g=!0);var T=M(x),E=new m.default,O=b.edges,k=O===void 0?[]:O;E.enqueue(S);for(var y="",l=function(){var X=E.dequeue();T.enter({current:X,previous:y}),(0,R.getNeighbors)(X,k,g?"target":void 0).forEach(function(F){T.allowTraversal({previous:y,current:X,next:F})&&E.enqueue(F)}),T.leave({current:X,previous:y}),y=X};!E.isEmpty();)l()},L=P;G.default=L},759527:function(We,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=M,G.detectStrongConnectComponents=G.detectConnectedComponents=void 0;var m=_(770643),R=function(L){for(var p=L.nodes,b=p===void 0?[]:p,S=L.edges,x=S===void 0?[]:S,g=[],T={},E=[],O=function U(X){E.push(X),T[X.id]=!0;for(var F=(0,m.getNeighbors)(X.id,x),W=function(q){var $=F[q];if(!T[$]){var J=b.filter(function(ut){return ut.id===$});J.length>0&&U(J[0])}},j=0;j<F.length;++j)W(j)},k=0;k<b.length;k++){var y=b[k];if(!T[y.id]){O(y);for(var l=[];E.length>0;)l.push(E.pop());g.push(l)}}return g};G.detectConnectedComponents=R;var w=function(L){for(var p=L.nodes,b=p===void 0?[]:p,S=L.edges,x=S===void 0?[]:S,g=[],T={},E={},O={},k=[],y=0,l=function W(j){E[j.id]=y,O[j.id]=y,y+=1,g.push(j),T[j.id]=!0;for(var V=(0,m.getNeighbors)(j.id,x,"target").filter(function(nt){return b.map(function(yt){return yt.id}).indexOf(nt)>-1}),q=function(yt){var dt=V[yt];if(!E[dt]&&E[dt]!==0){var Ft=b.filter(function(wt){return wt.id===dt});Ft.length>0&&W(Ft[0]),O[j.id]=Math.min(O[j.id],O[dt])}else T[dt]&&(O[j.id]=Math.min(O[j.id],E[dt]))},$=0;$<V.length;$++)q($);if(O[j.id]===E[j.id]){for(var J=[];g.length>0;){var ut=g.pop();if(T[ut.id]=!1,J.push(ut),ut===j)break}J.length>0&&k.push(J)}},U=0,X=b;U<X.length;U++){var F=X[U];!E[F.id]&&E[F.id]!==0&&l(F)}return k};G.detectStrongConnectComponents=w;function M(P,L){return L?w(P):R(P)}},592935:function(We,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.secondReg=G.dateReg=void 0;var _=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/;G.secondReg=_;var m=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/;G.dateReg=m},182556:function(We,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.getOutDegree=G.getInDegree=G.default=void 0;var _=function(P){var L={},p=P.nodes,b=p===void 0?[]:p,S=P.edges,x=S===void 0?[]:S;return b.forEach(function(g){L[g.id]={degree:0,inDegree:0,outDegree:0}}),x.forEach(function(g){L[g.source].degree++,L[g.source].outDegree++,L[g.target].degree++,L[g.target].inDegree++}),L},m=_;G.default=m;var R=function(P,L){var p=_(P);return p[L]?_(P)[L].inDegree:0};G.getInDegree=R;var w=function(P,L){var p=_(P);return p[L]?_(P)[L].outDegree:0};G.getOutDegree=w},994282:function(We,G,_){"use strict";function m(E){"@babel/helpers - typeof";return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},m(E)}Object.defineProperty(G,"__esModule",{value:!0}),G.detectAllUndirectedCycle=G.detectAllDirectedCycle=G.detectAllCycles=G.default=void 0;var R=p(_(45891)),w=L(_(759527)),M=_(770643);function P(E){if(typeof WeakMap!="function")return null;var O=new WeakMap,k=new WeakMap;return(P=function(l){return l?k:O})(E)}function L(E,O){if(!O&&E&&E.__esModule)return E;if(E===null||m(E)!=="object"&&typeof E!="function")return{default:E};var k=P(O);if(k&&k.has(E))return k.get(E);var y={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var U in E)if(U!=="default"&&Object.prototype.hasOwnProperty.call(E,U)){var X=l?Object.getOwnPropertyDescriptor(E,U):null;X&&(X.get||X.set)?Object.defineProperty(y,U,X):y[U]=E[U]}return y.default=E,k&&k.set(E,y),y}function p(E){return E&&E.__esModule?E:{default:E}}var b=function(O){var k=null,y=O.nodes,l=y===void 0?[]:y,U={},X={},F={},W={};l.forEach(function(q){X[q.id]=q});for(var j={enter:function($){var J=$.current,ut=$.previous;if(F[J]){k={};for(var nt=J,yt=ut;yt!==J;)k[nt]=yt,nt=yt,yt=U[yt];k[nt]=yt}else F[J]=J,delete X[J],U[J]=ut},leave:function($){var J=$.current;W[J]=J,delete F[J]},allowTraversal:function($){var J=$.next;return k?!1:!W[J]}};Object.keys(X).length;){var V=Object.keys(X)[0];(0,R.default)(O,V,j)}return k},S=function(O,k,y){var l,U;y===void 0&&(y=!0);for(var X=[],F=(0,w.default)(O,!1),W=0,j=F;W<j.length;W++){var V=j[W];if(V.length)for(var q=V[0],$=q.id,J=[q],ut=(l={},l[$]=q,l),nt=(U={},U[$]=new Set,U);J.length>0;)for(var yt=J.pop(),dt=yt.id,Ft=(0,M.getNeighbors)(dt,O.edges),wt=function(it){var Tt,Nt=Ft[it],st=O.nodes.find(function(te){return te.id===Nt});if(Nt===dt)X.push((Tt={},Tt[Nt]=yt,Tt));else if(!(Nt in nt))ut[Nt]=yt,J.push(st),nt[Nt]=new Set([yt]);else if(!nt[dt].has(st)){for(var xt=!0,zt=[st,yt],Wt=ut[dt];nt[Nt].size&&!nt[Nt].has(Wt)&&(zt.push(Wt),Wt!==ut[Wt.id]);)Wt=ut[Wt.id];if(zt.push(Wt),k&&y?(xt=!1,zt.findIndex(function(te){return k.indexOf(te.id)>-1})>-1&&(xt=!0)):k&&!y&&zt.findIndex(function(te){return k.indexOf(te.id)>-1})>-1&&(xt=!1),xt){for(var _t={},Xt=1;Xt<zt.length;Xt+=1)_t[zt[Xt-1].id]=zt[Xt];zt.length&&(_t[zt[zt.length-1].id]=zt[0]),X.push(_t)}nt[Nt].add(yt)}},St=0;St<Ft.length;St+=1)wt(St)}return X};G.detectAllUndirectedCycle=S;var x=function(O,k,y){y===void 0&&(y=!0);for(var l=[],U=new Set,X=[],F=[],W={},j={},V=function(Wt){for(var _t=[Wt];_t.length>0;){var Xt=_t.pop();U.has(Xt)&&(U.delete(Xt),X[Xt.id].forEach(function(te){_t.push(te)}),X[Xt.id].clear())}},q=function zt(Wt,_t,Xt){var te=!1;if(k&&y===!1&&k.indexOf(Wt.id)>-1)return te;l.push(Wt),U.add(Wt);for(var ue=Xt[Wt.id],fe=0;fe<ue.length;fe+=1){var Gt=W[ue[fe]];if(Gt===_t){for(var ae={},Ne=1;Ne<l.length;Ne+=1)ae[l[Ne-1].id]=l[Ne];l.length&&(ae[l[l.length-1].id]=l[0]),F.push(ae),te=!0}else U.has(Gt)||zt(Gt,_t,Xt)&&(te=!0)}if(te)V(Wt);else for(var fe=0;fe<ue.length;fe+=1){var Gt=W[ue[fe]];X[Gt.id].has(Wt)||X[Gt.id].add(Wt)}return l.pop(),te},$=O.nodes,J=$===void 0?[]:$,ut=0;ut<J.length;ut+=1){var nt=J[ut],yt=nt.id;j[yt]=ut,W[ut]=nt}if(k&&y)for(var dt=function(Wt){var _t=k[Wt];j[J[Wt].id]=j[_t],j[_t]=0,W[0]=J.find(function(Xt){return Xt.id===_t}),W[j[J[Wt].id]]=J[Wt]},ut=0;ut<k.length;ut++)dt(ut);for(var Ft=function(Wt){for(var _t,Xt,te=1/0,ue=0;ue<Wt.length;ue+=1)for(var fe=Wt[ue],Gt=0;Gt<fe.length;Gt++){var ae=j[fe[Gt].id];ae<te&&(te=ae,Xt=ue)}for(var Ne=Wt[Xt],ee=[],ue=0;ue<Ne.length;ue+=1){var de=Ne[ue];ee[de.id]=[];for(var ze=0,be=(0,M.getNeighbors)(de.id,O.edges,"target").filter(function(vt){return Ne.map(function(ie){return ie.id}).indexOf(vt)>-1});ze<be.length;ze++){var ke=be[ze];ke===de.id&&!(y===!1&&k.indexOf(de.id)>-1)?F.push((_t={},_t[de.id]=de,_t)):ee[de.id].push(j[ke])}}return{component:Ne,adjList:ee,minIdx:te}},wt=0;wt<J.length;){var St=J.filter(function(zt){return j[zt.id]>=wt}),et=(0,w.detectStrongConnectComponents)({nodes:St,edges:O.edges}).filter(function(zt){return zt.length>1});if(et.length===0)break;var it=Ft(et),Tt=it.minIdx,Nt=it.adjList,st=it.component;if(st.length>1){st.forEach(function(zt){X[zt.id]=new Set});var xt=W[Tt];if(k&&y&&k.indexOf(xt.id)===-1)return F;q(xt,xt,Nt),wt=Tt+1}else break}return F};G.detectAllDirectedCycle=x;var g=function(O,k,y,l){return l===void 0&&(l=!0),k?x(O,y,l):S(O,y,l)};G.detectAllCycles=g;var T=b;G.default=T},45891:function(We,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=M;var m=_(770643);function R(P){P===void 0&&(P={});var L=P,p=function(){},b=function(){var S={};return function(x){var g=x.next;return S[g]?!1:(S[g]=!0,!0)}}();return L.allowTraversal=P.allowTraversal||b,L.enter=P.enter||p,L.leave=P.leave||p,L}function w(P,L,p,b){b.enter({current:L,previous:p});var S=P.edges,x=S===void 0?[]:S;(0,m.getNeighbors)(L,x,"target").forEach(function(g){b.allowTraversal({previous:p,current:L,next:g})&&w(P,g,L,b)}),b.leave({current:L,previous:p})}function M(P,L,p){w(P,L,"",R(p))}},878089:function(We,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var m=_(197582),R=_(413810),w=_(770643),M=function(S,x,g){for(var T=1/0,E,O=0;O<x.length;O++){var k=x[O].id;!g[k]&&S[k]<=T&&(T=S[k],E=x[O])}return E},P=function(S,x,g,T){var E=S.nodes,O=E===void 0?[]:E,k=S.edges,y=k===void 0?[]:k,l=[],U={},X={},F={};O.forEach(function(ut,nt){var yt=ut.id;l.push(yt),X[yt]=1/0,yt===x&&(X[yt]=0)});for(var W=O.length,j=function(nt){var yt=M(X,O,U),dt=yt.id;if(U[dt]=!0,X[dt]===1/0)return"continue";var Ft=[];g?Ft=(0,w.getOutEdgesNodeId)(dt,y):Ft=(0,w.getEdgesByNodeId)(dt,y),Ft.forEach(function(wt){var St=wt.target,et=wt.source,it=St===dt?et:St,Tt=T&&wt[T]?wt[T]:1;X[it]>X[yt.id]+Tt?(X[it]=X[yt.id]+Tt,F[it]=[yt.id]):X[it]===X[yt.id]+Tt&&F[it].push(yt.id)})},V=0;V<W;V++)j(V);F[x]=[x];var q={};for(var $ in X)X[$]!==1/0&&p(x,$,F,q);var J={};for(var $ in q)J[$]=q[$][0];return{length:X,path:J,allPath:q}},L=P;G.default=L;function p(b,S,x,g){if(b===S)return[b];if(g[S])return g[S];for(var T=[],E=0,O=x[S];E<O.length;E++){var k=O[E],y=p(b,k,x,g);if(!y)return;for(var l=0,U=y;l<U.length;l++){var X=U[l];(0,R.isArray)(X)?T.push((0,m.__spreadArray)((0,m.__spreadArray)([],X,!0),[S],!1)):T.push([X,S])}}return g[S]=T,g[S]}},241727:function(We,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.findShortestPath=G.findAllPath=void 0;var m=w(_(878089)),R=_(770643);function w(L){return L&&L.__esModule?L:{default:L}}var M=function(p,b,S,x,g){var T=(0,m.default)(p,b,x,g),E=T.length,O=T.path,k=T.allPath;return{length:E[S],path:O[S],allPath:k[S]}};G.findShortestPath=M;var P=function(p,b,S,x){var g;if(b===S)return[[b]];var T=p.edges,E=T===void 0?[]:T,O=[b],k=(g={},g[b]=!0,g),y=[],l=[],U=x?(0,R.getNeighbors)(b,E,"target"):(0,R.getNeighbors)(b,E);for(y.push(U);O.length>0&&y.length>0;){var X=y[y.length-1];if(X.length){var F=X.shift();F&&(O.push(F),k[F]=!0,U=x?(0,R.getNeighbors)(F,E,"target"):(0,R.getNeighbors)(F,E),y.push(U.filter(function(V){return!k[V]})))}else{var W=O.pop();k[W]=!1,y.pop();continue}if(O[O.length-1]===S){var j=O.map(function(q){return q});l.push(j);var W=O.pop();k[W]=!1,y.pop()}}return l};G.findAllPath=P},975033:function(We,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var m=R(_(62238));function R(P){return P&&P.__esModule?P:{default:P}}var w=function(L,p){for(var b=(0,m.default)(L,p),S=[],x=b.length,g=0;g<x;g+=1){S[g]=[];for(var T=0;T<x;T+=1)g===T?S[g][T]=0:b[g][T]===0||!b[g][T]?S[g][T]=1/0:S[g][T]=b[g][T]}for(var E=0;E<x;E+=1)for(var g=0;g<x;g+=1)for(var T=0;T<x;T+=1)S[g][T]>S[g][E]+S[E][T]&&(S[g][T]=S[g][E]+S[E][T]);return S},M=w;G.default=M},821146:function(We,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var m=_(413810),R=_(368575),w=function(){function T(E,O,k,y,l){this.fromNode=E,this.toNode=O,this.nodeEdgeNodeLabel={nodeLabel1:k||R.VACANT_NODE_LABEL,edgeLabel:y||R.VACANT_EDGE_LABEL,nodeLabel2:l||R.VACANT_NODE_LABEL}}return T.prototype.equalTo=function(E){return this.fromNode===E.formNode&&this.toNode===E.toNode&&this.nodeEdgeNodeLabel===E.nodeEdgeNodeLabel},T.prototype.notEqualTo=function(E){return!this.equalTo(E)},T}(),M=function(){function T(){this.rmpath=[],this.dfsEdgeList=[]}return T.prototype.equalTo=function(E){var O=this.dfsEdgeList.length,k=E.length;if(O!==k)return!1;for(var y=0;y<O;y++)if(this.dfsEdgeList[y]!==E[y])return!1;return!0},T.prototype.notEqualTo=function(E){return!this.equalTo(E)},T.prototype.pushBack=function(E,O,k,y,l){return this.dfsEdgeList.push(new w(E,O,k,y,l)),this.dfsEdgeList},T.prototype.toGraph=function(E,O){E===void 0&&(E=R.VACANT_GRAPH_ID),O===void 0&&(O=!1);var k=new R.Graph(E,!0,O);return this.dfsEdgeList.forEach(function(y){var l=y.fromNode,U=y.toNode,X=y.nodeEdgeNodeLabel,F=X.nodeLabel1,W=X.edgeLabel,j=X.nodeLabel2;F!==R.VACANT_NODE_LABEL&&k.addNode(l,F),j!==R.VACANT_NODE_LABEL&&k.addNode(U,j),F!==R.VACANT_NODE_LABEL&&j!==F&&k.addEdge(void 0,l,U,W)}),k},T.prototype.buildRmpath=function(){this.rmpath=[];for(var E=void 0,O=this.dfsEdgeList.length,k=O-1;k>=0;k--){var y=this.dfsEdgeList[k],l=y.fromNode,U=y.toNode;l<U&&(E===void 0||U===E)&&(this.rmpath.push(k),E=l)}return this.rmpath},T.prototype.getNodeNum=function(){var E={};return this.dfsEdgeList.forEach(function(O){E[O.fromNode]||(E[O.fromNode]=!0),E[O.toNode]||(E[O.toNode]=!0)}),Object.keys(E).length},T}(),P=function(){function T(E){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!E){for(;E;){var O=E.edge;this.edges.push(O),this.nodesUsed[O.from]=1,this.nodesUsed[O.to]=1,this.edgesUsed[O.id]=1,E=E.preNode}this.edges=this.edges.reverse()}}return T.prototype.hasNode=function(E){return this.nodesUsed[E.id]===1},T.prototype.hasEdge=function(E){return this.edgesUsed[E.id]===1},T}(),L=function(){function T(E){var O=E.graphs,k=E.minSupport,y=k===void 0?2:k,l=E.minNodeNum,U=l===void 0?1:l,X=E.maxNodeNum,F=X===void 0?4:X,W=E.top,j=W===void 0?10:W,V=E.directed,q=V===void 0?!1:V,$=E.verbose,J=$===void 0?!1:$;this.graphs=O,this.dfsCode=new M,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=y,this.top=j,this.directed=q,this.counter=0,this.maxNodeNum=F,this.minNodeNum=U,this.verbose=J,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return T.prototype.findForwardRootEdges=function(E,O){var k=this,y=[],l=E.nodeMap;return O.edges.forEach(function(U){(k.directed||O.label<=l[U.to].label)&&y.push(U)}),y},T.prototype.findBackwardEdge=function(E,O,k,y){if(!this.directed&&O===k)return null;for(var l=E.nodeMap,U=l[k.to],X=U.edges,F=X.length,W=0;W<F;W++){var j=X[W];if(!(y.hasEdge(j)||j.to!==O.from)){if(this.directed){if(l[O.from].label<l[k.to].label||l[O.from].label===l[k.to].label&&O.label<=j.label)return j}else if(O.label<j.label||O.label===j.label&&l[O.to].label<=l[k.to].label)return j}}return null},T.prototype.findForwardPureEdges=function(E,O,k,y){for(var l=[],U=O.to,X=E.nodeMap[U].edges,F=X.length,W=0;W<F;W++){var j=X[W],V=E.nodeMap[j.to];k<=V.label&&!y.hasNode(V)&&l.push(j)}return l},T.prototype.findForwardRmpathEdges=function(E,O,k,y){for(var l=[],U=E.nodeMap,X=U[O.to].label,F=U[O.from],W=F.edges,j=W.length,V=0;V<j;V++){var q=W[V],$=U[q.to].label;O.to===q.to||k>$||y.hasNode(U[q.to])||(O.label<q.label||O.label===q.label&&X<=$)&&l.push(q)}return l},T.prototype.getSupport=function(E){var O={};return E.forEach(function(k){O[k.graphId]||(O[k.graphId]=!0)}),Object.keys(O).length},T.prototype.findMinLabel=function(E){var O=void 0;return Object.keys(E).forEach(function(k){var y=E[k],l=y.nodeLabel1,U=y.edgeLabel,X=y.nodeLabel2;if(!O){O={nodeLabel1:l,edgeLabel:U,nodeLabel2:X};return}(l<O.nodeLabel1||l===O.nodeLabel1&&U<O.edgeLabel||l===O.nodeLabel1&&U===O.edgeLabel&&X<O.nodeLabel2)&&(O={nodeLabel1:l,edgeLabel:U,nodeLabel2:X})}),O},T.prototype.isMin=function(){var E=this,O=this.dfsCode;if(this.verbose&&console.log("isMin checking",O),O.dfsEdgeList.length===1)return!0;var k=this.directed,y=O.toGraph(R.VACANT_GRAPH_ID,k),l=y.nodeMap,U=new M,X={};y.nodes.forEach(function(V){var q=E.findForwardRootEdges(y,V);q.forEach(function($){var J=l[$.to],ut="".concat(V.label,"-").concat($.label,"-").concat(J.label);X[ut]||(X[ut]={projected:[],nodeLabel1:V.label,edgeLabel:$.label,nodeLabel2:J.label});var nt={graphId:y.id,edge:$,preNode:null};X[ut].projected.push(nt)})});var F=this.findMinLabel(X);if(F){U.dfsEdgeList.push(new w(0,1,F.nodeLabel1,F.edgeLabel,F.nodeLabel2));var W=function V(q){for(var $=U.buildRmpath(),J=U.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,ut=U.dfsEdgeList[$[0]].toNode,nt={},yt=!1,dt=0,Ft=k?-1:0,wt=function(ue){if(yt)return"break";q.forEach(function(fe){var Gt=new P(fe),ae=E.findBackwardEdge(y,Gt.edges[$[ue]],Gt.edges[$[0]],Gt);ae&&(nt[ae.label]||(nt[ae.label]={projected:[],edgeLabel:ae.label}),nt[ae.label].projected.push({graphId:y.id,edge:nt,preNode:fe}),dt=U.dfsEdgeList[$[ue]].fromNode,yt=!0)})},St=$.length-1;St>Ft;St--){var et=wt(St);if(et==="break")break}if(yt){var it=E.findMinLabel(nt);U.dfsEdgeList.push(new w(ut,dt,R.VACANT_NODE_LABEL,it.edgeLabel,R.VACANT_NODE_LABEL));var Tt=U.dfsEdgeList.length-1;return E.dfsCode.dfsEdgeList[Tt]!==U.dfsEdgeList[Tt]?!1:V(nt[it.edgeLabel].projected)}var Nt={};yt=!1;var st=0;q.forEach(function(te){var ue=new P(te),fe=E.findForwardPureEdges(y,ue.edges[$[0]],J,ue);fe.length>0&&(yt=!0,st=ut,fe.forEach(function(Gt){var ae="".concat(Gt.label,"-").concat(l[Gt.to].label);Nt[ae]||(Nt[ae]={projected:[],edgeLabel:Gt.label,nodeLabel2:l[Gt.to].label}),Nt[ae].projected.push({graphId:y.id,edge:Gt,preNode:te})}))});for(var xt=$.length,zt=function(ue){if(yt)return"break";var fe=$[ue];q.forEach(function(Gt){var ae=new P(Gt),Ne=E.findForwardRmpathEdges(y,ae.edges[fe],J,ae);Ne.length>0&&(yt=!0,st=U.dfsEdgeList[fe].fromNode,Ne.forEach(function(ee){var de="".concat(ee.label,"-").concat(l[ee.to].label);Nt[de]||(Nt[de]={projected:[],edgeLabel:ee.label,nodeLabel2:l[ee.to].label}),Nt[de].projected.push({graphId:y.id,edge:ee,preNode:Gt})}))})},St=0;St<xt;St++){var Wt=zt(St);if(Wt==="break")break}if(!yt)return!0;var _t=E.findMinLabel(Nt);U.dfsEdgeList.push(new w(st,ut+1,R.VACANT_NODE_LABEL,_t.edgeLabel,_t.nodeLabel2));var Xt=U.dfsEdgeList.length-1;return O.dfsEdgeList[Xt]!==U.dfsEdgeList[Xt]?!1:V(Nt["".concat(_t.edgeLabel,"-").concat(_t.nodeLabel2)].projected)},j="".concat(F.nodeLabel1,"-").concat(F.edgeLabel,"-").concat(F.nodeLabel2);return W(X[j].projected)}},T.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var E=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,m.clone)(E))}},T.prototype.subGraphMining=function(E){var O=this,k=this.getSupport(E);if(!(k<this.minSupport)&&this.isMin()){this.report();var y=this.dfsCode.getNodeNum(),l=this.dfsCode.buildRmpath(),U=this.dfsCode.dfsEdgeList[l[0]].toNode,X=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,F={},W={};E.forEach(function(j){for(var V=O.graphs[j.graphId],q=V.nodeMap,$=new P(j),J=l.length-1;J>=0;J--){var ut=O.findBackwardEdge(V,$.edges[l[J]],$.edges[l[0]],$);if(ut){var nt="".concat(O.dfsCode.dfsEdgeList[l[J]].fromNode,"-").concat(ut.label);W[nt]||(W[nt]={projected:[],toNodeId:O.dfsCode.dfsEdgeList[l[J]].fromNode,edgeLabel:ut.label}),W[nt].projected.push({graphId:j.graphId,edge:ut,preNode:j})}}if(!(y>=O.maxNodeNum)){var yt=O.findForwardPureEdges(V,$.edges[l[0]],X,$);yt.forEach(function(Ft){var wt="".concat(U,"-").concat(Ft.label,"-").concat(q[Ft.to].label);F[wt]||(F[wt]={projected:[],fromNodeId:U,edgeLabel:Ft.label,nodeLabel2:q[Ft.to].label}),F[wt].projected.push({graphId:j.graphId,edge:Ft,preNode:j})});for(var dt=function(wt){var St=O.findForwardRmpathEdges(V,$.edges[l[wt]],X,$);St.forEach(function(et){var it="".concat(O.dfsCode.dfsEdgeList[l[wt]].fromNode,"-").concat(et.label,"-").concat(q[et.to].label);F[it]||(F[it]={projected:[],fromNodeId:O.dfsCode.dfsEdgeList[l[wt]].fromNode,edgeLabel:et.label,nodeLabel2:q[et.to].label}),F[it].projected.push({graphId:j.graphId,edge:et,preNode:j})})},J=0;J<l.length;J++)dt(J)}}),Object.keys(W).forEach(function(j){var V=W[j],q=V.toNodeId,$=V.edgeLabel;O.dfsCode.dfsEdgeList.push(new w(U,q,"-1",$,"-1")),O.subGraphMining(W[j].projected),O.dfsCode.dfsEdgeList.pop()}),Object.keys(F).forEach(function(j){var V=F[j],q=V.fromNodeId,$=V.edgeLabel,J=V.nodeLabel2;O.dfsCode.dfsEdgeList.push(new w(q,U+1,R.VACANT_NODE_LABEL,$,J)),O.subGraphMining(F[j].projected),O.dfsCode.dfsEdgeList.pop()})}},T.prototype.generate1EdgeFrequentSubGraphs=function(){var E=this.graphs,O=this.directed,k=this.minSupport,y=this.frequentSize1Subgraphs,l={},U={},X={},F={};return Object.keys(E).forEach(function(W){var j=E[W],V=j.nodeMap;j.nodes.forEach(function(q,$){var J=q.label,ut="".concat(W,"-").concat(J);if(!X[ut]){var nt=l[J]||0;nt++,l[J]=nt}X[ut]={graphKey:W,label:J},q.edges.forEach(function(yt){var dt=J,Ft=V[yt.to].label;if(!O&&dt>Ft){var wt=Ft;Ft=dt,dt=wt}var St=yt.label,et="".concat(W,"-").concat(dt,"-").concat(St,"-").concat(Ft),it="".concat(dt,"-").concat(St,"-").concat(Ft);if(!U[it]){var Tt=U[it]||0;Tt++,U[it]=Tt}F[et]={graphId:W,nodeLabel1:dt,edgeLabel:St,nodeLabel2:Ft}})})}),Object.keys(l).forEach(function(W){var j=l[W];if(!(j<k)){var V={nodes:[],edges:[]};V.nodes.push({id:"0",label:W}),y.push(V)}}),y},T.prototype.run=function(){var E=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var O=this.graphs,k=this.directed,y={};Object.keys(O).forEach(function(l){var U=O[l],X=U.nodeMap;U.nodes.forEach(function(F){var W=E.findForwardRootEdges(U,F);W.forEach(function(j){var V=X[j.to],q="".concat(F.label,"-").concat(j.label,"-").concat(V.label);y[q]||(y[q]={projected:[],nodeLabel1:F.label,edgeLabel:j.label,nodeLabel2:V.label});var $={graphId:l,edge:j,preNode:null};y[q].projected.push($)})})}),Object.keys(y).forEach(function(l){var U=y[l],X=U.projected,F=U.nodeLabel1,W=U.edgeLabel,j=U.nodeLabel2;E.dfsCode.dfsEdgeList.push(new w(0,1,F,W,j)),E.subGraphMining(X),E.dfsCode.dfsEdgeList.pop()})}},T}(),p=function(E,O,k,y){var l={};return Object.keys(E).forEach(function(U,X){var F=E[U],W=new R.Graph(X,!0,O),j={};F.nodes.forEach(function(V,q){W.addNode(q,V[k]),j[V.id]=q}),F.edges.forEach(function(V,q){var $=j[V.source],J=j[V.target];W.addEdge(-1,$,J,V[y])}),W&&W.getNodeNum()&&(l[W.id]=W)}),l},b=function(E,O,k){var y=[];return E.forEach(function(l){var U={nodes:[],edges:[]};l.nodes.forEach(function(X){var F;U.nodes.push((F={id:"".concat(X.id)},F[O]=X.label,F))}),l.edges.forEach(function(X){var F;U.edges.push((F={source:"".concat(X.from),target:"".concat(X.to)},F[k]=X.label,F))}),y.push(U)}),y},S="cluster",x=function(E){var O=E.graphs,k=E.directed,y=k===void 0?!1:k,l=E.nodeLabelProp,U=l===void 0?S:l,X=E.edgeLabelProp,F=X===void 0?S:X,W=p(O,y,U,F),j=E.minSupport,V=E.maxNodeNum,q=E.minNodeNum,$=E.verbose,J=E.top,ut={graphs:W,minSupport:j,maxNodeNum:V,minNodeNum:q,top:J,verbose:$,directed:y},nt=new L(ut);nt.run();var yt=b(nt.frequentSubgraphs,U,F);return yt},g=x;G.default=g},368575:function(We,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.VACANT_NODE_LABEL=G.VACANT_NODE_ID=G.VACANT_GRAPH_ID=G.VACANT_EDGE_LABEL=G.VACANT_EDGE_ID=G.Node=G.Graph=G.Edge=G.AUTO_EDGE_ID=void 0;var _=-1;G.VACANT_EDGE_ID=_;var m=-1;G.VACANT_NODE_ID=m;var R="-1";G.VACANT_EDGE_LABEL=R;var w="-1";G.VACANT_NODE_LABEL=w;var M=-1;G.VACANT_GRAPH_ID=M;var P="-1";G.AUTO_EDGE_ID=P;var L=function(){function S(x,g,T,E){x===void 0&&(x=_),g===void 0&&(g=m),T===void 0&&(T=m),E===void 0&&(E=R),this.id=x,this.from=g,this.to=T,this.label=E}return S}();G.Edge=L;var p=function(){function S(x,g){x===void 0&&(x=m),g===void 0&&(g=w),this.id=x,this.label=g,this.edges=[],this.edgeMap={}}return S.prototype.addEdge=function(x){this.edges.push(x),this.edgeMap[x.id]=x},S}();G.Node=p;var b=function(){function S(x,g,T){x===void 0&&(x=m),g===void 0&&(g=!0),T===void 0&&(T=!1),this.id=x,this.edgeIdAutoIncrease=g,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=T}return S.prototype.getNodeNum=function(){return this.nodes.length},S.prototype.addNode=function(x,g){if(!this.nodeMap[x]){var T=new p(x,g);this.nodes.push(T),this.nodeMap[x]=T,this.nodeLabelMap[g]||(this.nodeLabelMap[g]=[]),this.nodeLabelMap[g].push(x)}},S.prototype.addEdge=function(x,g,T,E){if((this.edgeIdAutoIncrease||x===void 0)&&(x=this.counter++),!(this.nodeMap[g]&&this.nodeMap[T]&&this.nodeMap[T].edgeMap[x])){var O=new L(x,g,T,E);if(this.edges.push(O),this.edgeMap[x]=O,this.nodeMap[g].addEdge(O),this.edgeLabelMap[E]||(this.edgeLabelMap[E]=[]),this.edgeLabelMap[E].push(O),!this.directed){var k=new L(x,T,g,E);this.nodeMap[T].addEdge(k),this.edgeLabelMap[E].push(k)}}},S}();G.Graph=b},882812:function(We,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var m=_(197582),R=L(_(975033)),w=L(_(821146)),M=L(_(878089)),P=_(770643);function L(F){return F&&F.__esModule?F:{default:F}}var p=function(W,j,V,q){V===void 0&&(V="cluster"),q===void 0&&(q=2);var $=[],J=W.nodes;return j.forEach(function(ut,nt){$.push(b(J,ut,nt,V,q))}),$},b=function(W,j,V,q,$){var J=[V],ut=[],nt={};return j.forEach(function(yt,dt){if(yt<=$&&V!==dt){J.push(dt),ut.push(W[dt]);var Ft=W[dt][q];nt[Ft]?(nt[Ft].count++,nt[Ft].dists.push(yt)):nt[Ft]={count:1,dists:[yt]}}}),Object.keys(nt).forEach(function(yt){nt[yt].dists=nt[yt].dists.sort(function(dt,Ft){return dt-Ft})}),{nodeIdx:V,nodeId:W[V].id,nodeIdxs:J,neighbors:ut,neighborNum:J.length-1,nodeLabelCountMap:nt}},S=function(W,j,V,q,$){var J=Math.ceil(V/j),ut={},nt=0;return q.forEach(function(yt,dt){for(var Ft=0,wt=0,St=yt.nodeIdxs,et=yt.neighborNum-1;Ft<J;){for(var it=St[1+Math.floor(Math.random()*et)],Tt=0;(ut["".concat(dt,"-").concat(it)]||ut["".concat(it,"-").concat(dt)])&&(it=Math.floor(Math.random()*j),Tt++,!(Tt>2*j)););if(Tt<2*j&&(ut["".concat(dt,"-").concat(it)]={start:dt,end:it,distance:$[dt][it]},Ft++,nt++,nt>=V))return ut;if(wt++,wt>2*j)break}if(Ft<J){var Nt=J-Ft;J=(J+Nt)/(j-dt-1)}}),ut},x=function(W,j,V,q){var $=V.nodes;return q||(q={}),Object.keys(W).forEach(function(J){var ut,nt;if(!(q&&q[J])){q[J]={nodes:[],edges:[]};var yt=W[J],dt=(ut=j[yt.start])===null||ut===void 0?void 0:ut.nodeIdxs,Ft=(nt=j[yt.end])===null||nt===void 0?void 0:nt.nodeIdxs;if(!(!dt||!Ft)){var wt=new Set(Ft),St=dt.filter(function(st){return wt.has(st)});if(!(!St||!St.length)){for(var et={},it=St.length,Tt=0;Tt<it;Tt++){var Nt=$[St[Tt]];q[J].nodes.push(Nt),et[Nt.id]=!0}V.edges.forEach(function(st){et[st.source]&&et[st.target]&&q[J].edges.push(st)})}}}}),q},g=function(W,j,V,q){var $,J,ut={};W.nodes.forEach(function(yt){ut[yt.id]=yt});var nt=0;return!(!(($=j==null?void 0:j.edges)===null||$===void 0)&&$.length)||((J=j==null?void 0:j.nodes)===null||J===void 0?void 0:J.length)<2?0:(W.edges.forEach(function(yt){var dt=ut[yt.source][V],Ft=ut[yt.target][V],wt=j==null?void 0:j.nodes[0][V],St=j==null?void 0:j.nodes[1][V],et=j==null?void 0:j.edges[0][q];yt[q]===et&&(dt===wt&&Ft===St||dt===St&&Ft===wt)&&nt++}),nt)},T=function(W,j,V){for(var q=1/0,$=0,J=function(yt){var dt=W[yt],Ft=Object.keys(dt).sort(function(st,xt){return dt[st]-dt[xt]}),wt=10,St=[];Ft.forEach(function(st,xt){St[xt%wt]||(St[xt%wt]={graphs:[],totalCount:0,aveCount:0}),St[xt%wt].graphs.push(st),St[xt%wt].totalCount+=dt[st]});var et=0,it=[];St.forEach(function(st){var xt=st.totalCount/st.graphs.length;st.aveCount=xt,it.push(xt);var zt=0,Wt=st.length;st.graphs.forEach(function(_t,Xt){var te=dt[_t];st.graphs.forEach(function(ue,fe){Xt!==fe&&(zt+=Math.abs(te-dt[ue]))})}),zt/=Wt*(Wt-1)/2,et+=zt}),et/=St.length;var Tt=0;it.forEach(function(st,xt){it.forEach(function(zt,Wt){xt!==Wt&&(Tt+=Math.abs(st-zt))}),Tt/=it.length*(it.length-1)/2});var Nt=Tt-et;q<Nt&&(q=Nt,$=yt)},ut=0;ut<j;ut++)J(ut);return{structure:V[$],structureCountMap:W[$]}},E=function(W,j){var V={},q={};return W.forEach(function($,J){V[$.id]={idx:J,node:$,degree:0,inDegree:0,outDegree:0};var ut=$[j];q[ut]||(q[ut]=[]),q[ut].push($)}),{nodeMap:V,nodeLabelMap:q}},O=function(W,j,V){var q={},$={};return W.forEach(function(J,ut){q["".concat(P.uniqueId)]={idx:ut,edge:J};var nt=J[j];$[nt]||($[nt]=[]),$[nt].push(J);var yt=V[J.source];yt&&(yt.degree++,yt.outDegree++);var dt=V[J.target];dt&&(dt.degree++,dt.inDegree++)}),{edgeMap:q,edgeLabelMap:$}},k=function(W,j,V){var q=j.length,$={};return j.forEach(function(J,ut){for(var nt=V?0:ut+1,yt=W[ut].id,dt=nt;dt<q;dt++)if(ut!==dt){var Ft=W[dt].id,wt=J[dt];$["".concat(yt,"-").concat(Ft)]=wt,V||($["".concat(Ft,"-").concat(yt)]=wt)}}),$},y=function(W,j,V,q,$,J,ut,nt,yt,dt,Ft){var wt,St="".concat(j.id,"-").concat(V.id);if(dt&&dt[St])return dt[St];var et=Ft?Ft[St]:void 0;if(!et){var it=(wt={},wt[St]={start:q[j.id].idx,end:q[V.id].idx,distance:$},wt);Ft=x(it,J,W,Ft),et=Ft[St]}return g(et,ut,nt,yt)},l=function(W,j,V,q){var $,J,ut,nt=($=W[j])===null||$===void 0?void 0:$.degree,yt=(J=W[j])===null||J===void 0?void 0:J.inDegree,dt=(ut=W[j])===null||ut===void 0?void 0:ut.outDegree;return W[j]===void 0&&(nt=1/0,yt=1/0,dt=1/0,q[j].forEach(function(Ft){var wt=V[Ft.id].degree;nt>wt&&(nt=wt);var St=V[Ft.id].inDegree;yt>St&&(yt=St);var et=V[Ft.id].outDegree;dt>et&&(dt=et)}),W[j]={degree:nt,inDegree:yt,outDegree:dt}),{minPatternNodeLabelDegree:nt,minPatternNodeLabelInDegree:yt,minPatternNodeLabelOutDegree:dt}},U=function(W,j,V,q,$,J,ut){var nt;if(V===void 0&&(V=!1),J===void 0&&(J="cluster"),ut===void 0&&(ut="cluster"),!(!W||!W.nodes)){var yt=W.nodes.length;if(yt){var dt=(0,R.default)(W,V),Ft=(0,R.default)(j,V),wt=k(W.nodes,dt,V),St=k(j.nodes,Ft,V),et=E(W.nodes,J),it=et.nodeMap,Tt=et.nodeLabelMap,Nt=E(j.nodes,J),st=Nt.nodeMap,xt=Nt.nodeLabelMap;O(W.edges,ut,it);var zt=O(j.edges,ut,st).edgeLabelMap,Wt=[];Ft==null||Ft.forEach(function(Fr){Wt=Wt.concat(Fr)}),$||($=Math.max.apply(Math,(0,m.__spreadArray)((0,m.__spreadArray)([],Wt,!1),[2],!1))),q||(q=$);var _t=p(W,dt,J,q),Xt=p(j,Ft,J,q),te=Math.min(100,yt*(yt-1)/2),ue=S(q,yt,te,_t,dt),fe=x(ue,_t,W),Gt=10,ae=1,Ne=1,ee=4,de={graphs:fe,nodeLabelProp:J,edgeLabelProp:ut,minSupport:ae,minNodeNum:Ne,maxNodeNum:ee,directed:V},ze=(0,w.default)(de).slice(0,Gt),be=ze.length,ke=[];ze.forEach(function(Fr,Kr){ke[Kr]={},Object.keys(fe).forEach(function(an){var yn=fe[an],bn=g(yn,Fr,J,ut);ke[Kr][an]=bn})});var he=T(ke,be,ze),vt=he.structure,ie=he.structureCountMap,Pe=j.nodes[0],qe=[],Qe=(nt=j.nodes[0])===null||nt===void 0?void 0:nt[J],lr=-1/0;j.nodes.forEach(function(Fr){var Kr=Fr[J],an=Tt[Kr];(an==null?void 0:an.length)>lr&&(lr=an.length,qe=an,Qe=Kr,Pe=Fr)});var fr={},kr={},En={},fn={},Vr={},Je={};Object.keys(xt).forEach(function(Fr,Kr){Vr[Fr]=[],V&&(Je[Fr]=[]);var an=-1/0,yn=xt[Fr],bn={};yn.forEach(function(Et){var we=St["".concat(Pe.id,"-").concat(Et.id)];if(we&&Vr[Fr].push(we),an<we&&(an=we),bn["".concat(Pe.id,"-").concat(Et.id)]={start:0,end:st[Et.id].idx,distance:we},V){var Dt=St["".concat(Et.id,"-").concat(Pe.id)];Dt&&Je[Fr].push(Dt)}}),Vr[Fr]=Vr[Fr].sort(function(Et,we){return Et-we}),V&&(Je[Fr]=Je[Fr].sort(function(Et,we){return Et-we})),kr=x(bn,Xt,j,kr);var tt=[];if(Object.keys(bn).forEach(function(Et){if(En[Et]){tt.push(En[Et]);return}var we=kr[Et];En[Et]=g(we,vt,J,ut),tt.push(En[Et])}),tt=tt.sort(function(Et,we){return we-Et}),fn["".concat(Pe.id,"-").concat(Fr)]=tt,Fr!==Qe)for(var tr=(qe==null?void 0:qe.length)||0,Kt=function(we){var Dt=qe[we],Vt=_t[it[Dt.id].idx],ht=Vt.nodeLabelCountMap[Fr],kt=xt[Fr].length;if(!ht||ht.count<kt)return qe.splice(we,1),"continue";for(var Q=!1,at=0;at<kt;at++)if(ht.dists[at]>Vr[Fr][at]){Q=!0;break}if(Q)return qe.splice(we,1),"continue";var B={};Vt.neighbors.forEach(function(H){var mt=wt["".concat(Dt.id,"-").concat(H.id)];B["".concat(Dt.id,"-").concat(H.id)]={start:it[Dt.id].idx,end:it[H.id].idx,distance:mt}}),fe=x(B,_t,W,fe);var C=[];Object.keys(B).forEach(function(H){if(ie[H]){C.push(ie[H]);return}var mt=fe[H];ie[H]=g(mt,vt,J,ut),C.push(ie[H])}),C=C.sort(function(H,mt){return mt-H});for(var I=!1,at=0;at<kt;at++)if(C[at]<tt[at]){I=!0;break}if(I)return qe.splice(we,1),"continue"},$t=tr-1;$t>=0;$t--)Kt($t)});var dr=[];qe==null||qe.forEach(function(Fr){for(var Kr=it[Fr.id].idx,an=b(W.nodes,dt[Kr],Kr,J,$),yn=an.neighbors,bn=yn.length,tt=!1,tr=bn-1;tr>=0;tr--){if(yn.length+1<j.nodes.length){tt=!0;return}var Kt=yn[tr],$t=Kt[J];if(!xt[$t]||!xt[$t].length){yn.splice(tr,1);continue}if(!Vr[$t]||!Vr[$t].length){yn.splice(tr,1);continue}var Et="".concat(Fr.id,"-").concat(Kt.id),we=wt[Et],Dt=Vr[$t].length-1,Vt=Vr[$t][Dt];if(we>Vt){yn.splice(tr,1);continue}if(V){var ht="".concat(Kt.id,"-").concat(Fr.id),kt=wt[ht];Dt=Je[$t].length-1;var Q=Je[$t][Dt];if(kt>Q){yn.splice(tr,1);continue}}var at=ie[Et]?ie[Et]:y(W,Fr,Kt,it,we,_t,vt,J,ut,ie,fe),B="".concat(Pe.id,"-").concat($t),C=fn[B][fn[B].length-1];if(at<C){yn.splice(tr,1);continue}var I=l(fr,$t,st,xt),H=I.minPatternNodeLabelDegree,mt=I.minPatternNodeLabelInDegree,Pt=I.minPatternNodeLabelOutDegree;if(it[Kt.id].degree<H){yn.splice(tr,1);continue}}tt||dr.push({nodes:[Fr].concat(yn)})});var nr=(0,M.default)(j,Pe.id,!1).length,oe={};V?(Object.keys(nr).forEach(function(Fr){var Kr=st[Fr].node[J];oe[Kr]?oe[Kr].push(nr[Fr]):oe[Kr]=[nr[Fr]]}),Object.keys(oe).forEach(function(Fr){oe[Fr].sort(function(Kr,an){return Kr-an})})):oe=Vr;for(var Te=dr.length,Lr=function(Kr){var an=dr[Kr],yn=an.nodes[0],bn={},tt={};an.nodes.forEach(function(Gr,ce){tt[Gr.id]={idx:ce,node:Gr,degree:0,inDegree:0,outDegree:0};var Yt=Gr[J];bn[Yt]?bn[Yt]++:bn[Yt]=1});var tr=[],Kt={};W.edges.forEach(function(Gr){tt[Gr.source]&&tt[Gr.target]&&(tr.push(Gr),Kt[Gr[ut]]?Kt[Gr[ut]]++:Kt[Gr[ut]]=1,tt[Gr.source].degree++,tt[Gr.target].degree++,tt[Gr.source].outDegree++,tt[Gr.target].inDegree++)});for(var $t=Object.keys(zt).length,Et=!1,we=0;we<$t;we++){var Dt=Object.keys(zt)[we];if(!Kt[Dt]||Kt[Dt]<zt[Dt].length){Et=!0;break}}if(Et)return dr.splice(Kr,1),"continue";var Vt=tr.length;if(Vt<j.edges.length)return dr.splice(Kr,1),"break";for(var ht=!1,kt=function(ce){var Yt=tr[ce],ge=Yt[ut],Ie=zt[ge];if(!Ie||!Ie.length)return Kt[ge]--,Ie&&Kt[ge]<Ie.length?(ht=!0,"break"):(tr.splice(ce,1),tt[Yt.source].degree--,tt[Yt.target].degree--,tt[Yt.source].outDegree--,tt[Yt.target].inDegree--,"continue");var xe=tt[Yt.source].node[J],Ye=tt[Yt.target].node[J],gr=!1;if(Ie.forEach(function(Mr){var vn=st[Mr.source].node,Wn=st[Mr.target].node;vn[J]===xe&&Wn[J]===Ye&&(gr=!0),!V&&vn[J]===Ye&&Wn[J]===xe&&(gr=!0)}),!gr)return Kt[ge]--,Ie&&Kt[ge]<Ie.length?(ht=!0,"break"):(tr.splice(ce,1),tt[Yt.source].degree--,tt[Yt.target].degree--,tt[Yt.source].outDegree--,tt[Yt.target].inDegree--,"continue")},we=Vt-1;we>=0;we--){var Q=kt(we);if(Q==="break")break}if(ht)return dr.splice(Kr,1),"continue";an.edges=tr;var at=(0,M.default)(an,an.nodes[0].id,!1).length;if(Object.keys(at).reverse().forEach(function(Gr){if(!(Gr===an.nodes[0].id||ht)){if(at[Gr]===1/0){var ce=tt[Gr].node[J];if(bn[ce]--,bn[ce]<xt[ce].length){ht=!0;return}var Yt=an.nodes.indexOf(tt[Gr].node);an.nodes.splice(Yt,1),tt[Gr]=void 0;return}var ge=it[Gr].node[J];if(!oe[ge]||!oe[ge].length||at[Gr]>oe[ge][oe[ge].length-1]){var ce=tt[Gr].node[J];if(bn[ce]--,bn[ce]<xt[ce].length){ht=!0;return}var Yt=an.nodes.indexOf(tt[Gr].node);an.nodes.splice(Yt,1),tt[Gr]=void 0}}}),ht)return dr.splice(Kr,1),"continue";for(var B=!0,C=0;B&&!ht;){B=!1;var I=V?tt[yn.id].degree<st[Pe.id].degree||tt[yn.id].inDegree<st[Pe.id].inDegree||tt[yn.id].outDegree<st[Pe.id].outDegree:tt[yn.id].degree<st[Pe.id].degree;if(I){ht=!0;break}if(bn[yn[J]]<xt[yn[J]].length){ht=!0;break}for(var H=an.nodes.length,mt=H-1;mt>=0;mt--){var Pt=an.nodes[mt],Lt=tt[Pt.id].degree,Jt=tt[Pt.id].inDegree,Oe=tt[Pt.id].outDegree,ye=Pt[J],Ze=l(fr,ye,st,xt),wr=Ze.minPatternNodeLabelDegree,er=Ze.minPatternNodeLabelInDegree,Ur=Ze.minPatternNodeLabelOutDegree,xn=V?Lt<wr||Jt<er||Oe<Ur:Lt<wr;if(xn){if(bn[Pt[J]]--,bn[Pt[J]]<xt[Pt[J]].length){ht=!0;break}an.nodes.splice(mt,1),tt[Pt.id]=void 0,B=!0}}if(ht||!B&&C!==0)break;Vt=tr.length;for(var rr=Vt-1;rr>=0;rr--){var xr=tr[rr];if(!tt[xr.source]||!tt[xr.target]){tr.splice(rr,1);var Wr=xr[ut];if(Kt[Wr]--,tt[xr.source]&&(tt[xr.source].degree--,tt[xr.source].outDegree--),tt[xr.target]&&(tt[xr.target].degree--,tt[xr.target].inDegree--),zt[Wr]&&Kt[Wr]<zt[Wr].length){ht=!0;break}B=!0}}C++}if(ht||ht||an.nodes.length<j.nodes.length||tr.length<j.edges.length)return dr.splice(Kr,1),"continue"},Nr=Te-1;Nr>=0;Nr--){var ln=Lr(Nr);if(ln==="break")break}for(var en=dr.length,Dr=function(Kr){var an=dr[Kr],yn={};an.edges.forEach(function(tr){var Kt="".concat(tr.source,"-").concat(tr.target,"-").concat(tr.label);yn[Kt]?yn[Kt]++:yn[Kt]=1});for(var bn=function(Kt){var $t=dr[Kt],Et={};$t.edges.forEach(function(Dt){var Vt="".concat(Dt.source,"-").concat(Dt.target,"-").concat(Dt.label);Et[Vt]?Et[Vt]++:Et[Vt]=1});var we=!0;Object.keys(Et).length!==Object.keys(yn).length?we=!1:Object.keys(yn).forEach(function(Dt){Et[Dt]!==yn[Dt]&&(we=!1)}),we&&dr.splice(Kt,1)},tt=en-1;tt>Kr;tt--)bn(tt);en=dr.length},Nr=0;Nr<=en-1;Nr++)Dr(Nr);return dr}}},X=U;G.default=X},505170:function(We,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var m=w(_(62238)),R=_(770643);function w(L){return L&&L.__esModule?L:{default:L}}var M=function(p,b,S,x){b===void 0&&(b=!1),S===void 0&&(S="weight"),x===void 0&&(x=1e3);var g=p.nodes,T=g===void 0?[]:g,E=p.edges,O=E===void 0?[]:E,k={},y={};T.forEach(function(J,ut){var nt=(0,R.uniqueId)();J.clusterId=nt,k[nt]={id:nt,nodes:[J]},y[J.id]={node:J,idx:ut}});var l=(0,m.default)(p,b),U=[],X={};l.forEach(function(J,ut){var nt=0,yt=T[ut].id;X[yt]={},J.forEach(function(dt,Ft){if(dt){nt+=dt;var wt=T[Ft].id;X[yt][wt]=dt}}),U.push(nt)});for(var F=0,W=function(){var ut=!1;if(T.forEach(function(nt){var yt={};Object.keys(X[nt.id]).forEach(function(Nt){var st=X[nt.id][Nt],xt=y[Nt].node,zt=xt.clusterId;yt[zt]||(yt[zt]=0),yt[zt]+=st});var dt=-1/0,Ft=[];if(Object.keys(yt).forEach(function(Nt){dt<yt[Nt]?(dt=yt[Nt],Ft=[Nt]):dt===yt[Nt]&&Ft.push(Nt)}),!(Ft.length===1&&Ft[0]===nt.clusterId)){var wt=Ft.indexOf(nt.clusterId);if(wt>=0&&Ft.splice(wt,1),Ft&&Ft.length){ut=!0;var St=k[nt.clusterId],et=St.nodes.indexOf(nt);St.nodes.splice(et,1);var it=Math.floor(Math.random()*Ft.length),Tt=k[Ft[it]];Tt.nodes.push(nt),nt.clusterId=Tt.id}}}),!ut)return"break";F++};F<x;){var j=W();if(j==="break")break}Object.keys(k).forEach(function(J){var ut=k[J];(!ut.nodes||!ut.nodes.length)&&delete k[J]});var V=[],q={};O.forEach(function(J){var ut=J.source,nt=J.target,yt=J[S]||1,dt=y[ut].node.clusterId,Ft=y[nt].node.clusterId,wt="".concat(dt,"---").concat(Ft);if(q[wt])q[wt].weight+=yt,q[wt].count++;else{var St={source:dt,target:Ft,weight:yt,count:1};q[wt]=St,V.push(St)}});var $=[];return Object.keys(k).forEach(function(J){$.push(k[J])}),{clusters:$,clusterEdges:V}},P=M;G.default=P},135179:function(We,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var m=_(413810),R=L(_(62238)),w=L(_(29741)),M=_(103665),P=_(526838);function L(g){return g&&g.__esModule?g:{default:g}}var p=function(T,E,O,k){for(var y=E.length,l=2*k,U=0,X=0;X<y;X++)for(var F=T[X].clusterId,W=0;W<y;W++){var j=T[W].clusterId;if(F===j){var V=E[X][W]||0,q=O[X]||0,$=O[W]||0;U+=V-q*$/l}}return U*=1/l,U},b=function(T,E){T===void 0&&(T=[]);for(var O=T.length,k=new w.default([]),y=0;y<O;y++)k=k.add(new w.default(E[y]));var l=k.avg(O);l.normalize();for(var U=0,y=0;y<O;y++){var X=new w.default(E[y]),F=X.squareEuclideanDistance(l);U+=F}var W=[];T.forEach(function(){W.push([])});for(var y=0;y<O;y++){var X=new w.default(E[y]);T[y].clusterInertial=0;for(var j=0;j<O;j++){if(y===j){W[y][j]=0;continue}var V=new w.default(E[j]);W[y][j]=X.squareEuclideanDistance(V),T[y].clusterInertial+=W[y][j]}}for(var q=0,$=2*O*U,y=0;y<O;y++)for(var J=T[y].clusterId,j=0;j<O;j++){var ut=T[j].clusterId;if(!(y===j||J!==ut)){var nt=T[y].clusterInertial*T[j].clusterInertial/Math.pow($,2)-W[y][j]/$;q+=nt}}return Number(q.toFixed(4))},S=function(T,E,O,k,y,l,U,X,F){E===void 0&&(E=!1),O===void 0&&(O="weight"),k===void 0&&(k=1e-4),y===void 0&&(y=!1),l===void 0&&(l=void 0),U===void 0&&(U=[]),X===void 0&&(X=["id"]),F===void 0&&(F=1);var W=T.nodes,j=W===void 0?[]:W,V=T.edges,q=V===void 0?[]:V,$=[];if(y){j.forEach(function(fe,Gt){fe.properties=fe.properties||{},fe.originIndex=Gt});var J=[];j.every(function(fe){return fe.hasOwnProperty("nodeType")})&&(J=Array.from(new Set(j.map(function(fe){return fe.nodeType}))),j.forEach(function(fe){fe.properties.nodeType=J.findIndex(function(Gt){return Gt===fe.nodeType})}));var ut=(0,M.getAllProperties)(j,l);$=(0,P.oneHot)(ut,U,X)}var nt=1,yt={},dt={};j.forEach(function(fe,Gt){var ae=String(nt++);fe.clusterId=ae,yt[ae]={id:ae,nodes:[fe]},dt[fe.id]={node:fe,idx:Gt}});var Ft=(0,R.default)(T,E),wt=[],St={},et=0;Ft.forEach(function(fe,Gt){var ae=0,Ne=j[Gt].id;St[Ne]={},fe.forEach(function(ee,de){if(ee){ae+=ee;var ze=j[de].id;St[Ne][ze]=ee,et+=ee}}),wt.push(ae)}),et/=2;for(var it=1/0,Tt=1/0,Nt=0,st=[],xt={};;){y&&j.every(function(fe){return fe.hasOwnProperty("properties")})?it=p(j,Ft,wt,et)+b(j,$)*F:it=p(j,Ft,wt,et),Nt===0&&(Tt=it,st=j,xt=yt);var zt=it>0&&it>Tt&&it-Tt<k;if(it>Tt&&(st=j.map(function(fe){return{node:fe,clusterId:fe.clusterId}}),xt=(0,m.clone)(yt),Tt=it),zt||Nt>100)break;Nt++,Object.keys(yt).forEach(function(fe){var Gt=0;q.forEach(function(ae){var Ne=ae.source,ee=ae.target,de=dt[Ne].node.clusterId,ze=dt[ee].node.clusterId;(de===fe&&ze!==fe||ze===fe&&de!==fe)&&(Gt=Gt+(ae[O]||1))}),yt[fe].sumTot=Gt}),j.forEach(function(fe,Gt){var ae=yt[fe.clusterId],Ne=0,ee,de=wt[Gt]/(2*et),ze=0,be=ae.nodes;be.forEach(function(kr){var En=dt[kr.id].idx;ze+=Ft[Gt][En]||0});var ke=ze-ae.sumTot*de,he=be.filter(function(kr){return kr.id!==fe.id}),vt=[];he.forEach(function(kr,En){vt[En]=$[kr.originIndex]});var ie=b(he,$)*F,Pe=St[fe.id];if(Object.keys(Pe).forEach(function(kr){var En=dt[kr].node,fn=En.clusterId;if(fn!==fe.clusterId){var Vr=yt[fn],Je=Vr.nodes;if(!(!Je||!Je.length)){var dr=0;Je.forEach(function(ln){var en=dt[ln.id].idx;dr+=Ft[Gt][en]||0});var nr=dr-Vr.sumTot*de,oe=Je.concat([fe]),Te=[];oe.forEach(function(ln,en){Te[en]=$[ln.originIndex]});var Lr=b(oe,$)*F,Nr=nr-ke;y&&(Nr=nr+Lr-(ke+ie)),Nr>Ne&&(Ne=Nr,ee=Vr)}}}),Ne>0){ee.nodes.push(fe);var qe=fe.clusterId;fe.clusterId=ee.id;var Qe=ae.nodes.indexOf(fe);ae.nodes.splice(Qe,1);var lr=0,fr=0;q.forEach(function(kr){var En=kr.source,fn=kr.target,Vr=dt[En].node.clusterId,Je=dt[fn].node.clusterId;(Vr===ee.id&&Je!==ee.id||Je===ee.id&&Vr!==ee.id)&&(lr=lr+(kr[O]||1)),(Vr===qe&&Je!==qe||Je===qe&&Vr!==qe)&&(fr=fr+(kr[O]||1))}),ee.sumTot=lr,ae.sumTot=fr}})}var Wt={},_t=0;Object.keys(xt).forEach(function(fe){var Gt=xt[fe];if(!Gt.nodes||!Gt.nodes.length){delete xt[fe];return}var ae=String(_t+1);ae!==fe&&(Gt.id=ae,Gt.nodes=Gt.nodes.map(function(Ne){return{id:Ne.id,clusterId:ae}}),xt[ae]=Gt,Wt[fe]=ae,delete xt[fe],_t++)}),st.forEach(function(fe){var Gt=fe.node,ae=fe.clusterId;Gt&&(Gt.clusterId=ae,Gt.clusterId&&Wt[Gt.clusterId]&&(Gt.clusterId=Wt[Gt.clusterId]))});var Xt=[],te={};q.forEach(function(fe){var Gt=fe.source,ae=fe.target,Ne=fe[O]||1,ee=dt[Gt].node.clusterId,de=dt[ae].node.clusterId;if(!(!ee||!de)){var ze="".concat(ee,"---").concat(de);if(te[ze])te[ze].weight+=Ne,te[ze].count++;else{var be={source:ee,target:de,weight:Ne,count:1};te[ze]=be,Xt.push(be)}}});var ue=[];return Object.keys(xt).forEach(function(fe){ue.push(xt[fe])}),{clusters:ue,clusterEdges:Xt}},x=S;G.default=x},689454:function(We,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var m=M(_(838823)),R=M(_(257085)),w=_(770643);function M(S){return S&&S.__esModule?S:{default:S}}var P=function(x,g){var T=[],E=x.nodes,O=E===void 0?[]:E,k=x.edges,y=k===void 0?[]:k;if(O.length===0)return T;var l=O[0],U=new Set;U.add(l);var X=function($,J){return g?$.weight-J.weight:0},F=new R.default(X);for((0,w.getEdgesByNodeId)(l.id,y).forEach(function(q){F.insert(q)});!F.isEmpty();){var W=F.delMin(),j=W.source,V=W.target;U.has(j)&&U.has(V)||(T.push(W),U.has(j)||(U.add(j),(0,w.getEdgesByNodeId)(j,y).forEach(function(q){F.insert(q)})),U.has(V)||(U.add(V),(0,w.getEdgesByNodeId)(V,y).forEach(function(q){F.insert(q)})))}return T},L=function(x,g){var T=[],E=x.nodes,O=E===void 0?[]:E,k=x.edges,y=k===void 0?[]:k;if(O.length===0)return T;var l=y.map(function(j){return j});g&&l.sort(function(j,V){return j.weight-V.weight});for(var U=new m.default(O.map(function(j){return j.id}));l.length>0;){var X=l.shift(),F=X.source,W=X.target;U.connected(F,W)||(T.push(X),U.union(F,W))}return T},p=function(x,g,T){var E={prim:P,kruskal:L};return T?E[T](x,g):L(x,g)},b=p;G.default=b},274926:function(We,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var m=w(_(182556)),R=_(770643);function w(L){return L&&L.__esModule?L:{default:L}}var M=function(p,b,S){typeof b!="number"&&(b=1e-6),typeof S!="number"&&(S=.85);for(var x=1,g=0,T=1e3,E=p.nodes,O=E===void 0?[]:E,k=p.edges,y=k===void 0?[]:k,l=O.length,U,X={},F={},W=0;W<l;++W){var j=O[W],V=j.id;X[V]=1/l,F[V]=1/l}for(var q=(0,m.default)(p);T>0&&x>b;){g=0;for(var W=0;W<l;++W){var j=O[W],V=j.id;if(U=0,q[j.id].inDegree===0)X[V]=0;else{for(var $=(0,R.getNeighbors)(V,y,"source"),J=0;J<$.length;++J){var ut=$[J],nt=q[ut].outDegree;nt>0&&(U+=F[ut]/nt)}X[V]=S*U,g+=X[V]}}g=(1-g)/l,x=0;for(var W=0;W<l;++W){var j=O[W],V=j.id;U=X[V]+g,x+=Math.abs(U-F[V]),F[V]=U}T-=1}return F},P=M;G.default=P},257085:function(We,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var _=function(M,P){return M-P},m=function(){function w(M){M===void 0&&(M=_),this.compareFn=M,this.list=[]}return w.prototype.getLeft=function(M){return 2*M+1},w.prototype.getRight=function(M){return 2*M+2},w.prototype.getParent=function(M){return M===0?null:Math.floor((M-1)/2)},w.prototype.isEmpty=function(){return this.list.length<=0},w.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},w.prototype.delMin=function(){var M=this.top(),P=this.list.pop();return this.list.length>0&&(this.list[0]=P,this.moveDown(0)),M},w.prototype.insert=function(M){if(M!==null){this.list.push(M);var P=this.list.length-1;return this.moveUp(P),!0}return!1},w.prototype.moveUp=function(M){for(var P=this.getParent(M);M&&M>0&&this.compareFn(this.list[P],this.list[M])>0;){var L=this.list[P];this.list[P]=this.list[M],this.list[M]=L,M=P,P=this.getParent(M)}},w.prototype.moveDown=function(M){var P,L=M,p=this.getLeft(M),b=this.getRight(M),S=this.list.length;p!==null&&p<S&&this.compareFn(this.list[L],this.list[p])>0?L=p:b!==null&&b<S&&this.compareFn(this.list[L],this.list[b])>0&&(L=b),M!==L&&(P=[this.list[L],this.list[M]],this.list[M]=P[0],this.list[L]=P[1],this.moveDown(L))},w}(),R=m;G.default=R},488481:function(We,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=G.LinkedListNode=void 0;var _=function(P,L){return P===L},m=function(){function M(P,L){L===void 0&&(L=null),this.value=P,this.next=L}return M.prototype.toString=function(P){return P?P(this.value):"".concat(this.value)},M}();G.LinkedListNode=m;var R=function(){function M(P){P===void 0&&(P=_),this.head=null,this.tail=null,this.compare=P}return M.prototype.prepend=function(P){var L=new m(P,this.head);return this.head=L,this.tail||(this.tail=L),this},M.prototype.append=function(P){var L=new m(P);return this.head?(this.tail.next=L,this.tail=L,this):(this.head=L,this.tail=L,this)},M.prototype.delete=function(P){if(!this.head)return null;for(var L=null;this.head&&this.compare(this.head.value,P);)L=this.head,this.head=this.head.next;var p=this.head;if(p!==null)for(;p.next;)this.compare(p.next.value,P)?(L=p.next,p.next=p.next.next):p=p.next;return this.compare(this.tail.value,P)&&(this.tail=p),L},M.prototype.find=function(P){var L=P.value,p=L===void 0?void 0:L,b=P.callback,S=b===void 0?void 0:b;if(!this.head)return null;for(var x=this.head;x;){if(S&&S(x.value)||p!==void 0&&this.compare(x.value,p))return x;x=x.next}return null},M.prototype.deleteTail=function(){var P=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,P;for(var L=this.head;L.next;)L.next.next?L=L.next:L.next=null;return this.tail=L,P},M.prototype.deleteHead=function(){if(!this.head)return null;var P=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),P},M.prototype.fromArray=function(P){var L=this;return P.forEach(function(p){return L.append(p)}),this},M.prototype.toArray=function(){for(var P=[],L=this.head;L;)P.push(L),L=L.next;return P},M.prototype.reverse=function(){for(var P=this.head,L=null,p=null;P;)p=P.next,P.next=L,L=P,P=p;this.tail=this.head,this.head=L},M.prototype.toString=function(P){return P===void 0&&(P=void 0),this.toArray().map(function(L){return L.toString(P)}).toString()},M}(),w=R;G.default=w},893026:function(We,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var m=R(_(488481));function R(P){return P&&P.__esModule?P:{default:P}}var w=function(){function P(){this.linkedList=new m.default}return P.prototype.isEmpty=function(){return!this.linkedList.head},P.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},P.prototype.enqueue=function(L){this.linkedList.append(L)},P.prototype.dequeue=function(){var L=this.linkedList.deleteHead();return L?L.value:null},P.prototype.toString=function(L){return this.linkedList.toString(L)},P}(),M=w;G.default=M},838823:function(We,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var _=function(){function R(w){this.count=w.length,this.parent={};for(var M=0,P=w;M<P.length;M++){var L=P[M];this.parent[L]=L}}return R.prototype.find=function(w){for(;this.parent[w]!==w;)w=this.parent[w];return w},R.prototype.union=function(w,M){var P=this.find(w),L=this.find(M);P!==L&&(P<L?(this.parent[M]!==M&&this.union(this.parent[M],w),this.parent[M]=this.parent[w]):(this.parent[w]!==w&&this.union(this.parent[w],M),this.parent[w]=this.parent[M]))},R.prototype.connected=function(w,M){return this.find(w)===this.find(M)},R}(),m=_;G.default=m},317892:function(We,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.DistanceType=void 0;var _;G.DistanceType=_,function(m){m.EuclideanDistance="euclideanDistance"}(_||(G.DistanceType=_={}))},770643:function(We,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.uniqueId=G.getOutEdgesNodeId=G.getNeighbors=G.getEdgesByNodeId=void 0;var _=function(P,L,p){L===void 0&&(L=[]);var b=L.filter(function(T){return T.source===P||T.target===P});if(p==="target"){var S=function(E){return E.source===P};return b.filter(S).map(function(T){return T.target})}if(p==="source"){var x=function(E){return E.target===P};return b.filter(x).map(function(T){return T.source})}var g=function(E){return E.source===P?E.target:E.source};return b.map(g)};G.getNeighbors=_;var m=function(P,L){return L.filter(function(p){return p.source===P})};G.getOutEdgesNodeId=m;var R=function(P,L){return L.filter(function(p){return p.source===P||p.target===P})};G.getEdgesByNodeId=R;var w=function(P){P===void 0&&(P=0);var L="".concat(Math.random()).split(".")[1].substr(0,5),p="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(P,"-").concat(L).concat(p)};G.uniqueId=w},526838:function(We,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.oneHot=G.getDistance=G.getAllKeyValueMap=G.default=void 0;var m=_(413810),R=_(317892),w=M(_(29741));function M(S){return S&&S.__esModule?S:{default:S}}var P=function(x,g,T){var E=[];g!=null&&g.length?E=g:(x.forEach(function(k){E=E.concat(Object.keys(k))}),E=(0,m.uniq)(E));var O={};return E.forEach(function(k){var y=[];x.forEach(function(l){l[k]!==void 0&&l[k]!==""&&y.push(l[k])}),y.length&&!(T!=null&&T.includes(k))&&(O[k]=(0,m.uniq)(y))}),O};G.getAllKeyValueMap=P;var L=function(x,g,T){var E=P(x,g,T),O=[];if(!Object.keys(E).length)return O;var k=Object.values(E),y=k.every(function(l){return l.every(function(U){return typeof U=="number"})});return x.forEach(function(l,U){var X=[];Object.keys(E).forEach(function(F){var W=l[F],j=E[F],V=j.findIndex(function(J){return W===J}),q=[];if(y)q.push(W);else for(var $=0;$<j.length;$++)$===V?q.push(1):q.push(0);X=X.concat(q)}),O[U]=X}),O};G.oneHot=L;var p=function(x,g,T,E){T===void 0&&(T=R.DistanceType.EuclideanDistance);var O=0;switch(T){case R.DistanceType.EuclideanDistance:O=new w.default(x).euclideanDistance(new w.default(g));break;default:break}return O};G.getDistance=p;var b={getAllKeyValueMap:P,oneHot:L,getDistance:p};G.default=b},103665:function(We,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.getPropertyWeight=G.getAllSortProperties=G.getAllProperties=G.default=void 0;var m=_(592935),R=function(b,S){b===void 0&&(b=[]),S===void 0&&(S=100);var x={};b.forEach(function(T){T.properties&&Object.keys(T.properties).forEach(function(E){if(E==="id"||!"".concat(T.properties[E]).match(m.secondReg)&&!"".concat(T.properties[E]).match(m.dateReg)&&isNaN(Number(T.properties[E]))){x.hasOwnProperty(E)&&delete x[E];return}x.hasOwnProperty(E)?x[E]+=1:x[E]=1})});var g=Object.keys(x).sort(function(T,E){return x[E]-x[T]});return g.length<S?g:g.slice(0,S)};G.getAllSortProperties=R;var w=function(b,S){return S.map(function(x){return b.hasOwnProperty(x)?b[x]:0})},M=function(b){for(var S=R(b),x=[],g=0;g<b.length;g++)x[g]=w(b[g].properties,S);return x};G.getPropertyWeight=M;var P=function(b,S){S===void 0&&(S=void 0);var x=[];return b.forEach(function(g){S===void 0&&x.push(g),g[S]!==void 0&&x.push(g[S])}),x};G.getAllProperties=P;var L={getAllSortProperties:R,getPropertyWeight:M,getAllProperties:P};G.default=L},29741:function(We,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var m=_(413810),R=function(){function M(P){this.arr=P}return M.prototype.getArr=function(){return this.arr||[]},M.prototype.add=function(P){var L,p=P.arr;if(!(!((L=this.arr)===null||L===void 0)&&L.length))return new M(p);if(!(p!=null&&p.length))return new M(this.arr);if(this.arr.length===p.length){var b=[];for(var S in this.arr)b[S]=this.arr[S]+p[S];return new M(b)}},M.prototype.subtract=function(P){var L,p=P.arr;if(!(!((L=this.arr)===null||L===void 0)&&L.length))return new M(p);if(!(p!=null&&p.length))return new M(this.arr);if(this.arr.length===p.length){var b=[];for(var S in this.arr)b[S]=this.arr[S]-p[S];return new M(b)}},M.prototype.avg=function(P){var L=[];if(P!==0)for(var p in this.arr)L[p]=this.arr[p]/P;return new M(L)},M.prototype.negate=function(){var P=[];for(var L in this.arr)P[L]=-this.arr[L];return new M(P)},M.prototype.squareEuclideanDistance=function(P){var L,p=P.arr;if(!(!((L=this.arr)===null||L===void 0)&&L.length)||!(p!=null&&p.length))return 0;if(this.arr.length===p.length){var b=0;for(var S in this.arr)b+=Math.pow(this.arr[S]-P.arr[S],2);return b}},M.prototype.euclideanDistance=function(P){var L,p=P.arr;if(!(!((L=this.arr)===null||L===void 0)&&L.length)||!(p!=null&&p.length))return 0;if(this.arr.length===p.length){var b=0;for(var S in this.arr)b+=Math.pow(this.arr[S]-P.arr[S],2);return Math.sqrt(b)}else console.error("The two vectors are unequal in length.")},M.prototype.normalize=function(){var P=[],L=(0,m.clone)(this.arr);L.sort(function(x,g){return x-g});var p=L[L.length-1],b=L[0];for(var S in this.arr)P[S]=(this.arr[S]-b)/(p-b);return new M(P)},M.prototype.norm2=function(){var P;if(!(!((P=this.arr)===null||P===void 0)&&P.length))return 0;var L=0;for(var p in this.arr)L+=Math.pow(this.arr[p],2);return Math.sqrt(L)},M.prototype.dot=function(P){var L,p=P.arr;if(!(!((L=this.arr)===null||L===void 0)&&L.length)||!(p!=null&&p.length))return 0;if(this.arr.length===p.length){var b=0;for(var S in this.arr)b+=this.arr[S]*P.arr[S];return b}else console.error("The two vectors are unequal in length.")},M.prototype.equal=function(P){var L,p=P.arr;if(((L=this.arr)===null||L===void 0?void 0:L.length)!==(p==null?void 0:p.length))return!1;for(var b in this.arr)if(this.arr[b]!==p[b])return!1;return!0},M}(),w=R;G.default=w},831656:function(We,G,_){"use strict";function m(F){"@babel/helpers - typeof";return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},m(F)}Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"GADDI",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(G,"breadthFirstSearch",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(G,"connectedComponent",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(G,"depthFirstSearch",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(G,"detectCycle",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(G,"dijkstra",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(G,"findAllPath",{enumerable:!0,get:function(){return S.findAllPath}}),Object.defineProperty(G,"findShortestPath",{enumerable:!0,get:function(){return S.findShortestPath}}),Object.defineProperty(G,"floydWarshall",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(G,"getAdjMatrix",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(G,"getDegree",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(G,"getInDegree",{enumerable:!0,get:function(){return P.getInDegree}}),Object.defineProperty(G,"getNeighbors",{enumerable:!0,get:function(){return y.getNeighbors}}),Object.defineProperty(G,"getOutDegree",{enumerable:!0,get:function(){return P.getOutDegree}}),Object.defineProperty(G,"labelPropagation",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(G,"louvain",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(G,"minimumSpanningTree",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(G,"pageRank",{enumerable:!0,get:function(){return O.default}});var R=X(_(62238)),w=X(_(683764)),M=X(_(759527)),P=U(_(182556)),L=X(_(994282)),p=X(_(45891)),b=X(_(878089)),S=_(241727),x=X(_(975033)),g=X(_(505170)),T=X(_(135179)),E=X(_(689454)),O=X(_(274926)),k=X(_(882812)),y=_(770643);function l(F){if(typeof WeakMap!="function")return null;var W=new WeakMap,j=new WeakMap;return(l=function(q){return q?j:W})(F)}function U(F,W){if(!W&&F&&F.__esModule)return F;if(F===null||m(F)!=="object"&&typeof F!="function")return{default:F};var j=l(W);if(j&&j.has(F))return j.get(F);var V={},q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var $ in F)if($!=="default"&&Object.prototype.hasOwnProperty.call(F,$)){var J=q?Object.getOwnPropertyDescriptor(F,$):null;J&&(J.get||J.set)?Object.defineProperty(V,$,J):V[$]=F[$]}return V.default=F,j&&j.set(F,V),V}function X(F){return F&&F.__esModule?F:{default:F}}},66044:function(We,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.MESSAGE=G.ALGORITHM=void 0;var _={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"};G.ALGORITHM=_;var m={SUCCESS:"SUCCESS",FAILURE:"FAILURE"};G.MESSAGE=m},70585:function(We,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var m=_(66044),R=w(_(612067));function w(L){return L&&L.__esModule?L:{default:L}}var M=function(p){return function(){for(var b=[],S=0;S<arguments.length;S++)b[S]=arguments[S];return new Promise(function(x,g){var T=new R.default;T.postMessage({_algorithmType:p,data:b}),T.onmessage=function(E){var O=E.data,k=O.data,y=O._algorithmType;m.MESSAGE.SUCCESS===y?x(k):g(),T.terminate()}})}},P=M;G.default=P},430485:function(We,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.pageRankAsync=G.minimumSpanningTreeAsync=G.louvainAsync=G.labelPropagationAsync=G.getOutDegreeAsync=G.getNeighborsAsync=G.getInDegreeAsync=G.getDegreeAsync=G.getAdjMatrixAsync=G.floydWarshallAsync=G.findShortestPathAsync=G.findAllPathAsync=G.dijkstraAsync=G.detectCycleAsync=G.detectAllUndirectedCycleAsync=G.detectAllDirectedCycleAsync=G.detectAllCyclesAsync=G.connectedComponentAsync=G.GADDIAsync=void 0;var m=w(_(70585)),R=_(66044);function w(V){return V&&V.__esModule?V:{default:V}}var M=function(q,$){return(0,m.default)(R.ALGORITHM.getAdjMatrix).apply(void 0,[q,$])};G.getAdjMatrixAsync=M;var P=function(q,$){return(0,m.default)(R.ALGORITHM.connectedComponent).apply(void 0,[q,$])};G.connectedComponentAsync=P;var L=function(q){return(0,m.default)(R.ALGORITHM.getDegree)(q)};G.getDegreeAsync=L;var p=function(q,$){return(0,m.default)(R.ALGORITHM.getInDegree)(q,$)};G.getInDegreeAsync=p;var b=function(q,$){return(0,m.default)(R.ALGORITHM.getOutDegree)(q,$)};G.getOutDegreeAsync=b;var S=function(q){return(0,m.default)(R.ALGORITHM.detectCycle)(q)};G.detectCycleAsync=S;var x=function(q){return(0,m.default)(R.ALGORITHM.detectAllCycles)(q)};G.detectAllCyclesAsync=x;var g=function(q){return(0,m.default)(R.ALGORITHM.detectAllDirectedCycle)(q)};G.detectAllDirectedCycleAsync=g;var T=function(q){return(0,m.default)(R.ALGORITHM.detectAllUndirectedCycle)(q)};G.detectAllUndirectedCycleAsync=T;var E=function(q,$,J,ut){return(0,m.default)(R.ALGORITHM.dijkstra).apply(void 0,[q,$,J,ut])};G.dijkstraAsync=E;var O=function(q,$,J,ut){return(0,m.default)(R.ALGORITHM.findAllPath).apply(void 0,[q,$,J,ut])};G.findAllPathAsync=O;var k=function(q,$,J,ut,nt){return(0,m.default)(R.ALGORITHM.findShortestPath).apply(void 0,[q,$,J,ut,nt])};G.findShortestPathAsync=k;var y=function(q,$){return(0,m.default)(R.ALGORITHM.floydWarshall).apply(void 0,[q,$])};G.floydWarshallAsync=y;var l=function(q,$,J,ut){return ut===void 0&&(ut=1e3),(0,m.default)(R.ALGORITHM.labelPropagation)(q,$,J,ut)};G.labelPropagationAsync=l;var U=function(q,$,J,ut){return(0,m.default)(R.ALGORITHM.louvain)(q,$,J,ut)};G.louvainAsync=U;var X=function(q,$,J){return(0,m.default)(R.ALGORITHM.minimumSpanningTree).apply(void 0,[q,$,J])};G.minimumSpanningTreeAsync=X;var F=function(q,$,J){return(0,m.default)(R.ALGORITHM.pageRank).apply(void 0,[q,$,J])};G.pageRankAsync=F;var W=function(q,$,J){return(0,m.default)(R.ALGORITHM.getNeighbors).apply(void 0,[q,$,J])};G.getNeighborsAsync=W;var j=function(q,$,J,ut,nt,yt,dt){return J===void 0&&(J=!1),yt===void 0&&(yt="cluster"),dt===void 0&&(dt="cluster"),(0,m.default)(R.ALGORITHM.GADDI).apply(void 0,[q,$,J,ut,nt,yt,dt])};G.GADDIAsync=j},612067:function(We,G,_){"use strict";function m(b){"@babel/helpers - typeof";return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},m(b)}Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var R=P(_(831656)),w=_(66044);function M(b){if(typeof WeakMap!="function")return null;var S=new WeakMap,x=new WeakMap;return(M=function(T){return T?x:S})(b)}function P(b,S){if(!S&&b&&b.__esModule)return b;if(b===null||m(b)!=="object"&&typeof b!="function")return{default:b};var x=M(S);if(x&&x.has(b))return x.get(b);var g={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in b)if(E!=="default"&&Object.prototype.hasOwnProperty.call(b,E)){var O=T?Object.getOwnPropertyDescriptor(b,E):null;O&&(O.get||O.set)?Object.defineProperty(g,E,O):g[E]=b[E]}return g.default=b,x&&x.set(b,g),g}var L=typeof self!="undefined"?self:{};L.onmessage=function(b){var S=b.data,x=S._algorithmType,g=S.data;if(x){if(typeof R[x]=="function"){var T=R[x].apply(R,g);L.postMessage({_algorithmType:w.MESSAGE.SUCCESS,data:T});return}L.postMessage({_algorithmType:w.MESSAGE.FAILURE})}};var p=null;G.default=p},901029:function(We,G,_){"use strict";_.r(G),_.d(G,{Kernel:function(){return yt},World:function(){return bn}});var m=_(115861),R=_(204942),w=_(215671),M=_(143144),P=_(936719),L=_.n(P),p=_(281763),b=_.n(p),S=_(701469),x=_.n(S),g=_(364687),T=_.n(g),E=null,O=1;function k(){return O++}var y=null,l=null,U;(function(tt){tt[tt.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",tt[tt.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",tt[tt.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",tt[tt.POINTS=0]="POINTS",tt[tt.LINES=1]="LINES",tt[tt.LINE_LOOP=2]="LINE_LOOP",tt[tt.LINE_STRIP=3]="LINE_STRIP",tt[tt.TRIANGLES=4]="TRIANGLES",tt[tt.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",tt[tt.TRIANGLE_FAN=6]="TRIANGLE_FAN",tt[tt.ZERO=0]="ZERO",tt[tt.ONE=1]="ONE",tt[tt.SRC_COLOR=768]="SRC_COLOR",tt[tt.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",tt[tt.SRC_ALPHA=770]="SRC_ALPHA",tt[tt.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",tt[tt.DST_ALPHA=772]="DST_ALPHA",tt[tt.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",tt[tt.DST_COLOR=774]="DST_COLOR",tt[tt.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",tt[tt.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",tt[tt.FUNC_ADD=32774]="FUNC_ADD",tt[tt.BLEND_EQUATION=32777]="BLEND_EQUATION",tt[tt.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",tt[tt.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",tt[tt.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",tt[tt.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",tt[tt.MAX_EXT=32776]="MAX_EXT",tt[tt.MIN_EXT=32775]="MIN_EXT",tt[tt.BLEND_DST_RGB=32968]="BLEND_DST_RGB",tt[tt.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",tt[tt.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",tt[tt.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",tt[tt.CONSTANT_COLOR=32769]="CONSTANT_COLOR",tt[tt.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",tt[tt.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",tt[tt.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",tt[tt.BLEND_COLOR=32773]="BLEND_COLOR",tt[tt.ARRAY_BUFFER=34962]="ARRAY_BUFFER",tt[tt.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",tt[tt.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",tt[tt.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",tt[tt.STREAM_DRAW=35040]="STREAM_DRAW",tt[tt.STATIC_DRAW=35044]="STATIC_DRAW",tt[tt.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",tt[tt.BUFFER_SIZE=34660]="BUFFER_SIZE",tt[tt.BUFFER_USAGE=34661]="BUFFER_USAGE",tt[tt.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",tt[tt.FRONT=1028]="FRONT",tt[tt.BACK=1029]="BACK",tt[tt.FRONT_AND_BACK=1032]="FRONT_AND_BACK",tt[tt.CULL_FACE=2884]="CULL_FACE",tt[tt.BLEND=3042]="BLEND",tt[tt.DITHER=3024]="DITHER",tt[tt.STENCIL_TEST=2960]="STENCIL_TEST",tt[tt.DEPTH_TEST=2929]="DEPTH_TEST",tt[tt.SCISSOR_TEST=3089]="SCISSOR_TEST",tt[tt.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",tt[tt.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",tt[tt.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",tt[tt.NO_ERROR=0]="NO_ERROR",tt[tt.INVALID_ENUM=1280]="INVALID_ENUM",tt[tt.INVALID_VALUE=1281]="INVALID_VALUE",tt[tt.INVALID_OPERATION=1282]="INVALID_OPERATION",tt[tt.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",tt[tt.CW=2304]="CW",tt[tt.CCW=2305]="CCW",tt[tt.LINE_WIDTH=2849]="LINE_WIDTH",tt[tt.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",tt[tt.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",tt[tt.CULL_FACE_MODE=2885]="CULL_FACE_MODE",tt[tt.FRONT_FACE=2886]="FRONT_FACE",tt[tt.DEPTH_RANGE=2928]="DEPTH_RANGE",tt[tt.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",tt[tt.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",tt[tt.DEPTH_FUNC=2932]="DEPTH_FUNC",tt[tt.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",tt[tt.STENCIL_FUNC=2962]="STENCIL_FUNC",tt[tt.STENCIL_FAIL=2964]="STENCIL_FAIL",tt[tt.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",tt[tt.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",tt[tt.STENCIL_REF=2967]="STENCIL_REF",tt[tt.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",tt[tt.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",tt[tt.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",tt[tt.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",tt[tt.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",tt[tt.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",tt[tt.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",tt[tt.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",tt[tt.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",tt[tt.VIEWPORT=2978]="VIEWPORT",tt[tt.SCISSOR_BOX=3088]="SCISSOR_BOX",tt[tt.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",tt[tt.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",tt[tt.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",tt[tt.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",tt[tt.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",tt[tt.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",tt[tt.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",tt[tt.RED_BITS=3410]="RED_BITS",tt[tt.GREEN_BITS=3411]="GREEN_BITS",tt[tt.BLUE_BITS=3412]="BLUE_BITS",tt[tt.ALPHA_BITS=3413]="ALPHA_BITS",tt[tt.DEPTH_BITS=3414]="DEPTH_BITS",tt[tt.STENCIL_BITS=3415]="STENCIL_BITS",tt[tt.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",tt[tt.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",tt[tt.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",tt[tt.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",tt[tt.SAMPLES=32937]="SAMPLES",tt[tt.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",tt[tt.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",tt[tt.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",tt[tt.DONT_CARE=4352]="DONT_CARE",tt[tt.FASTEST=4353]="FASTEST",tt[tt.NICEST=4354]="NICEST",tt[tt.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",tt[tt.BYTE=5120]="BYTE",tt[tt.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",tt[tt.SHORT=5122]="SHORT",tt[tt.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",tt[tt.INT=5124]="INT",tt[tt.UNSIGNED_INT=5125]="UNSIGNED_INT",tt[tt.FLOAT=5126]="FLOAT",tt[tt.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",tt[tt.ALPHA=6406]="ALPHA",tt[tt.RGB=6407]="RGB",tt[tt.RGBA=6408]="RGBA",tt[tt.LUMINANCE=6409]="LUMINANCE",tt[tt.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",tt[tt.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",tt[tt.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",tt[tt.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",tt[tt.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",tt[tt.VERTEX_SHADER=35633]="VERTEX_SHADER",tt[tt.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",tt[tt.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",tt[tt.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",tt[tt.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",tt[tt.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",tt[tt.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",tt[tt.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",tt[tt.SHADER_TYPE=35663]="SHADER_TYPE",tt[tt.DELETE_STATUS=35712]="DELETE_STATUS",tt[tt.LINK_STATUS=35714]="LINK_STATUS",tt[tt.VALIDATE_STATUS=35715]="VALIDATE_STATUS",tt[tt.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",tt[tt.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",tt[tt.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",tt[tt.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",tt[tt.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",tt[tt.NEVER=512]="NEVER",tt[tt.LESS=513]="LESS",tt[tt.EQUAL=514]="EQUAL",tt[tt.LEQUAL=515]="LEQUAL",tt[tt.GREATER=516]="GREATER",tt[tt.NOTEQUAL=517]="NOTEQUAL",tt[tt.GEQUAL=518]="GEQUAL",tt[tt.ALWAYS=519]="ALWAYS",tt[tt.KEEP=7680]="KEEP",tt[tt.REPLACE=7681]="REPLACE",tt[tt.INCR=7682]="INCR",tt[tt.DECR=7683]="DECR",tt[tt.INVERT=5386]="INVERT",tt[tt.INCR_WRAP=34055]="INCR_WRAP",tt[tt.DECR_WRAP=34056]="DECR_WRAP",tt[tt.VENDOR=7936]="VENDOR",tt[tt.RENDERER=7937]="RENDERER",tt[tt.VERSION=7938]="VERSION",tt[tt.NEAREST=9728]="NEAREST",tt[tt.LINEAR=9729]="LINEAR",tt[tt.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",tt[tt.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",tt[tt.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",tt[tt.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",tt[tt.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",tt[tt.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",tt[tt.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",tt[tt.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",tt[tt.TEXTURE_2D=3553]="TEXTURE_2D",tt[tt.TEXTURE=5890]="TEXTURE",tt[tt.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",tt[tt.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",tt[tt.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",tt[tt.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",tt[tt.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",tt[tt.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",tt[tt.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",tt[tt.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",tt[tt.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",tt[tt.TEXTURE0=33984]="TEXTURE0",tt[tt.TEXTURE1=33985]="TEXTURE1",tt[tt.TEXTURE2=33986]="TEXTURE2",tt[tt.TEXTURE3=33987]="TEXTURE3",tt[tt.TEXTURE4=33988]="TEXTURE4",tt[tt.TEXTURE5=33989]="TEXTURE5",tt[tt.TEXTURE6=33990]="TEXTURE6",tt[tt.TEXTURE7=33991]="TEXTURE7",tt[tt.TEXTURE8=33992]="TEXTURE8",tt[tt.TEXTURE9=33993]="TEXTURE9",tt[tt.TEXTURE10=33994]="TEXTURE10",tt[tt.TEXTURE11=33995]="TEXTURE11",tt[tt.TEXTURE12=33996]="TEXTURE12",tt[tt.TEXTURE13=33997]="TEXTURE13",tt[tt.TEXTURE14=33998]="TEXTURE14",tt[tt.TEXTURE15=33999]="TEXTURE15",tt[tt.TEXTURE16=34e3]="TEXTURE16",tt[tt.TEXTURE17=34001]="TEXTURE17",tt[tt.TEXTURE18=34002]="TEXTURE18",tt[tt.TEXTURE19=34003]="TEXTURE19",tt[tt.TEXTURE20=34004]="TEXTURE20",tt[tt.TEXTURE21=34005]="TEXTURE21",tt[tt.TEXTURE22=34006]="TEXTURE22",tt[tt.TEXTURE23=34007]="TEXTURE23",tt[tt.TEXTURE24=34008]="TEXTURE24",tt[tt.TEXTURE25=34009]="TEXTURE25",tt[tt.TEXTURE26=34010]="TEXTURE26",tt[tt.TEXTURE27=34011]="TEXTURE27",tt[tt.TEXTURE28=34012]="TEXTURE28",tt[tt.TEXTURE29=34013]="TEXTURE29",tt[tt.TEXTURE30=34014]="TEXTURE30",tt[tt.TEXTURE31=34015]="TEXTURE31",tt[tt.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",tt[tt.REPEAT=10497]="REPEAT",tt[tt.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",tt[tt.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",tt[tt.FLOAT_VEC2=35664]="FLOAT_VEC2",tt[tt.FLOAT_VEC3=35665]="FLOAT_VEC3",tt[tt.FLOAT_VEC4=35666]="FLOAT_VEC4",tt[tt.INT_VEC2=35667]="INT_VEC2",tt[tt.INT_VEC3=35668]="INT_VEC3",tt[tt.INT_VEC4=35669]="INT_VEC4",tt[tt.BOOL=35670]="BOOL",tt[tt.BOOL_VEC2=35671]="BOOL_VEC2",tt[tt.BOOL_VEC3=35672]="BOOL_VEC3",tt[tt.BOOL_VEC4=35673]="BOOL_VEC4",tt[tt.FLOAT_MAT2=35674]="FLOAT_MAT2",tt[tt.FLOAT_MAT3=35675]="FLOAT_MAT3",tt[tt.FLOAT_MAT4=35676]="FLOAT_MAT4",tt[tt.SAMPLER_2D=35678]="SAMPLER_2D",tt[tt.SAMPLER_CUBE=35680]="SAMPLER_CUBE",tt[tt.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",tt[tt.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",tt[tt.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",tt[tt.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",tt[tt.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",tt[tt.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",tt[tt.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",tt[tt.COMPILE_STATUS=35713]="COMPILE_STATUS",tt[tt.LOW_FLOAT=36336]="LOW_FLOAT",tt[tt.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",tt[tt.HIGH_FLOAT=36338]="HIGH_FLOAT",tt[tt.LOW_INT=36339]="LOW_INT",tt[tt.MEDIUM_INT=36340]="MEDIUM_INT",tt[tt.HIGH_INT=36341]="HIGH_INT",tt[tt.FRAMEBUFFER=36160]="FRAMEBUFFER",tt[tt.RENDERBUFFER=36161]="RENDERBUFFER",tt[tt.RGBA4=32854]="RGBA4",tt[tt.RGB5_A1=32855]="RGB5_A1",tt[tt.RGB565=36194]="RGB565",tt[tt.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",tt[tt.STENCIL_INDEX=6401]="STENCIL_INDEX",tt[tt.STENCIL_INDEX8=36168]="STENCIL_INDEX8",tt[tt.DEPTH_STENCIL=34041]="DEPTH_STENCIL",tt[tt.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",tt[tt.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",tt[tt.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",tt[tt.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",tt[tt.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",tt[tt.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",tt[tt.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",tt[tt.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",tt[tt.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",tt[tt.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",tt[tt.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",tt[tt.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",tt[tt.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",tt[tt.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",tt[tt.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",tt[tt.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",tt[tt.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",tt[tt.NONE=0]="NONE",tt[tt.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",tt[tt.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",tt[tt.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",tt[tt.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",tt[tt.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",tt[tt.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",tt[tt.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",tt[tt.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",tt[tt.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",tt[tt.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",tt[tt.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",tt[tt.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",tt[tt.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",tt[tt.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",tt[tt.COPY_SRC=1]="COPY_SRC",tt[tt.COPY_DST=2]="COPY_DST",tt[tt.SAMPLED=4]="SAMPLED",tt[tt.STORAGE=8]="STORAGE",tt[tt.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(U||(U={}));var X=function(){function tt(){(0,w.Z)(this,tt),this.config=void 0}return(0,M.Z)(tt,[{key:"get",value:function(){return this.config}},{key:"set",value:function(Kt){this.config=Kt}}]),tt}(),F=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),W;(function(tt){tt.Void="Void",tt.Boolean="Boolean",tt.Float="Float",tt.Uint32="Uint32",tt.Int32="Int32",tt.Vector="Vector",tt.Vector2Float="vec2<f32>",tt.Vector3Float="vec3<f32>",tt.Vector4Float="vec4<f32>",tt.Vector2Boolean="vec2<bool>",tt.Vector3Boolean="vec3<bool>",tt.Vector4Boolean="vec4<bool>",tt.Vector2Uint="vec2<u32>",tt.Vector3Uint="vec3<u32>",tt.Vector4Uint="vec4<u32>",tt.Vector2Int="vec2<i32>",tt.Vector3Int="vec3<i32>",tt.Vector4Int="vec4<i32>",tt.Matrix="Matrix",tt.Matrix3x3Float="mat3x3<f32>",tt.Matrix4x4Float="mat4x4<i32>",tt.Struct="Struct",tt.FloatArray="Float[]",tt.Vector4FloatArray="vec4<f32>[]"})(W||(W={}));var j;(function(tt){tt.Program="Program",tt.Identifier="Identifier",tt.VariableDeclaration="VariableDeclaration",tt.BlockStatement="BlockStatement",tt.ReturnStatement="ReturnStatement",tt.FunctionDeclaration="FunctionDeclaration",tt.VariableDeclarator="VariableDeclarator",tt.AssignmentExpression="AssignmentExpression",tt.LogicalExpression="LogicalExpression",tt.BinaryExpression="BinaryExpression",tt.ArrayExpression="ArrayExpression",tt.UnaryExpression="UnaryExpression",tt.UpdateExpression="UpdateExpression",tt.FunctionExpression="FunctionExpression",tt.MemberExpression="MemberExpression",tt.ConditionalExpression="ConditionalExpression",tt.ExpressionStatement="ExpressionStatement",tt.CallExpression="CallExpression",tt.NumThreadStatement="NumThreadStatement",tt.StorageStatement="StorageStatement",tt.DoWhileStatement="DoWhileStatement",tt.WhileStatement="WhileStatement",tt.ForStatement="ForStatement",tt.BreakStatement="BreakStatement",tt.ContinueStatement="ContinueStatement",tt.IfStatement="IfStatement",tt.ImportedFunctionStatement="ImportedFunctionStatement"})(j||(j={}));var V;(function(tt){tt.Input="Input",tt.Output="Output",tt.Uniform="Uniform",tt.Workgroup="Workgroup",tt.UniformConstant="UniformConstant",tt.Image="Image",tt.StorageBuffer="StorageBuffer",tt.Private="Private",tt.Function="Function"})(V||(V={}));var q;(function(tt){tt.GLSL100="GLSL100",tt.GLSL450="GLSL450",tt.WGSL="WGSL"})(q||(q={}));var $="__DefineValuePlaceholder__";function J(){if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function ut(tt,tr){var Kt=Object.keys(tt);if(Object.getOwnPropertySymbols){var $t=Object.getOwnPropertySymbols(tt);tr&&($t=$t.filter(function(Et){return Object.getOwnPropertyDescriptor(tt,Et).enumerable})),Kt.push.apply(Kt,$t)}return Kt}function nt(tt){for(var tr=1;tr<arguments.length;tr++){var Kt=arguments[tr]!=null?arguments[tr]:{};tr%2?ut(Object(Kt),!0).forEach(function($t){(0,R.Z)(tt,$t,Kt[$t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tt,Object.getOwnPropertyDescriptors(Kt)):ut(Object(Kt)).forEach(function($t){Object.defineProperty(tt,$t,Object.getOwnPropertyDescriptor(Kt,$t))})}return tt}var yt=function(){function tt(tr,Kt){(0,w.Z)(this,tt),this.engine=tr,this.configService=Kt,this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return(0,M.Z)(tt,[{key:"init",value:function(){var Kt=this.configService.get(),$t=Kt.canvas,Et=Kt.engineOptions;this.initPromise=this.engine.init(nt({canvas:$t||J(),antialiasing:!1},Et))}},{key:"setBundle",value:function(Kt){this.compiledBundle=JSON.parse(JSON.stringify(Kt))}},{key:"setDispatch",value:function(Kt){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=Kt),this}},{key:"setMaxIteration",value:function(Kt){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=Kt),this}},{key:"setBinding",value:function(Kt,$t){var Et=this;if(typeof Kt=="string"){var we=b()($t)||L()($t)||x()($t);if(this.compiledBundle&&this.compiledBundle.context){var Dt=this.compiledBundle.context.defines.find(function(ht){return ht.name===Kt});if(Dt)return Dt.value=$t,this;var Vt=this.compiledBundle.context.uniforms.find(function(ht){return ht.name===Kt});Vt&&(we?(Vt.data=$t,Vt.isReferer=!1,Vt.storageClass===V.Uniform?this.model&&this.model.updateUniform(Kt,$t):this.model&&this.model.updateBuffer(Kt,$t)):(Vt.isReferer=!0,Vt.data=$t))}}else Object.keys(Kt).forEach(function(ht){Et.setBinding(ht,Kt[ht])});return this}},{key:"execute",value:function(){var tr=(0,m.Z)(T().mark(function $t(){var Et=this,we,Dt,Vt=arguments;return T().wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:if(we=Vt.length>0&&Vt[0]!==void 0?Vt[0]:1,!this.dirty){kt.next=6;break}return this.compiledBundle.context&&(we>1?this.compiledBundle.context.maxIteration=we:this.compiledBundle.context.maxIteration++),kt.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(Q){var at=Q.isReferer;return at}).forEach(function(Q){var at=Q.data,B=Q.name;Et.model.confirmInput(at.model,B)}),Dt=0;Dt<we;Dt++)this.model.run();return this.engine.endFrame(),kt.abrupt("return",this);case 12:case"end":return kt.stop()}},$t,this)}));function Kt(){return tr.apply(this,arguments)}return Kt}()},{key:"getOutput",value:function(){var tr=(0,m.Z)(T().mark(function $t(){return T().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return we.abrupt("return",this.model.readData());case 1:case"end":return we.stop()}},$t,this)}));function Kt(){return tr.apply(this,arguments)}return Kt}()},{key:"compile",value:function(){var tr=(0,m.Z)(T().mark(function $t(){var Et,we,Dt;return T().wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:return ht.next=2,this.initPromise;case 2:return Et=nt({},this.compiledBundle.context),we=this.engine.supportWebGPU?this.engine.useWGSL?q.WGSL:q.GLSL450:q.GLSL100,Dt=this.compiledBundle.shaders[we],Et.defines.filter(function(kt){return kt.runtime}).forEach(function(kt){var Q="".concat($).concat(kt.name);Dt=Dt.replace(Q,"".concat(kt.value))}),Et.shader=Dt,Et.uniforms.forEach(function(kt){if(!kt.data&&kt.storageClass===V.StorageBuffer){var Q=1;kt.type===W.FloatArray?Q=1:kt.type===W.Vector4FloatArray&&(Q=4),kt.data=new Float32Array(Et.output.length*Q).fill(0)}}),this.compiledBundle.context=Et,ht.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=ht.sent;case 12:case"end":return ht.stop()}},$t,this)}));function Kt(){return tr.apply(this,arguments)}return Kt}()}]),tt}(),dt=_(481550),Ft=_.n(dt),wt=function(){function tt(tr,Kt){(0,w.Z)(this,tt),this.attribute=void 0,this.buffer=void 0;var $t=Kt.buffer,Et=Kt.offset,we=Kt.stride,Dt=Kt.normalized,Vt=Kt.size,ht=Kt.divisor;this.buffer=$t,this.attribute={buffer:$t.get(),offset:Et||0,stride:we||0,normalized:Dt||!1,divisor:ht||0},Vt&&(this.attribute.size=Vt)}return(0,M.Z)(tt,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(Kt){this.buffer.subData(Kt)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),tt}(),St,et,it,Tt,Nt,st,xt,zt,Wt,_t,Xt,te,ue,fe,Gt=(St={},(0,R.Z)(St,U.POINTS,"points"),(0,R.Z)(St,U.LINES,"lines"),(0,R.Z)(St,U.LINE_LOOP,"line loop"),(0,R.Z)(St,U.LINE_STRIP,"line strip"),(0,R.Z)(St,U.TRIANGLES,"triangles"),(0,R.Z)(St,U.TRIANGLE_FAN,"triangle fan"),(0,R.Z)(St,U.TRIANGLE_STRIP,"triangle strip"),St),ae=(et={},(0,R.Z)(et,U.STATIC_DRAW,"static"),(0,R.Z)(et,U.DYNAMIC_DRAW,"dynamic"),(0,R.Z)(et,U.STREAM_DRAW,"stream"),et),Ne=(it={},(0,R.Z)(it,U.BYTE,"int8"),(0,R.Z)(it,U.UNSIGNED_INT,"int16"),(0,R.Z)(it,U.INT,"int32"),(0,R.Z)(it,U.UNSIGNED_BYTE,"uint8"),(0,R.Z)(it,U.UNSIGNED_SHORT,"uint16"),(0,R.Z)(it,U.UNSIGNED_INT,"uint32"),(0,R.Z)(it,U.FLOAT,"float"),it),ee=(Tt={},(0,R.Z)(Tt,U.ALPHA,"alpha"),(0,R.Z)(Tt,U.LUMINANCE,"luminance"),(0,R.Z)(Tt,U.LUMINANCE_ALPHA,"luminance alpha"),(0,R.Z)(Tt,U.RGB,"rgb"),(0,R.Z)(Tt,U.RGBA,"rgba"),(0,R.Z)(Tt,U.RGBA4,"rgba4"),(0,R.Z)(Tt,U.RGB5_A1,"rgb5 a1"),(0,R.Z)(Tt,U.RGB565,"rgb565"),(0,R.Z)(Tt,U.DEPTH_COMPONENT,"depth"),(0,R.Z)(Tt,U.DEPTH_STENCIL,"depth stencil"),Tt),de=(Nt={},(0,R.Z)(Nt,U.DONT_CARE,"dont care"),(0,R.Z)(Nt,U.NICEST,"nice"),(0,R.Z)(Nt,U.FASTEST,"fast"),Nt),ze=(st={},(0,R.Z)(st,U.NEAREST,"nearest"),(0,R.Z)(st,U.LINEAR,"linear"),(0,R.Z)(st,U.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,R.Z)(st,U.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,R.Z)(st,U.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,R.Z)(st,U.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),st),be=(xt={},(0,R.Z)(xt,U.REPEAT,"repeat"),(0,R.Z)(xt,U.CLAMP_TO_EDGE,"clamp"),(0,R.Z)(xt,U.MIRRORED_REPEAT,"mirror"),xt),ke=(zt={},(0,R.Z)(zt,U.NONE,"none"),(0,R.Z)(zt,U.BROWSER_DEFAULT_WEBGL,"browser"),zt),he=(Wt={},(0,R.Z)(Wt,U.NEVER,"never"),(0,R.Z)(Wt,U.ALWAYS,"always"),(0,R.Z)(Wt,U.LESS,"less"),(0,R.Z)(Wt,U.LEQUAL,"lequal"),(0,R.Z)(Wt,U.GREATER,"greater"),(0,R.Z)(Wt,U.GEQUAL,"gequal"),(0,R.Z)(Wt,U.EQUAL,"equal"),(0,R.Z)(Wt,U.NOTEQUAL,"notequal"),Wt),vt=(_t={},(0,R.Z)(_t,U.FUNC_ADD,"add"),(0,R.Z)(_t,U.MIN_EXT,"min"),(0,R.Z)(_t,U.MAX_EXT,"max"),(0,R.Z)(_t,U.FUNC_SUBTRACT,"subtract"),(0,R.Z)(_t,U.FUNC_REVERSE_SUBTRACT,"reverse subtract"),_t),ie=(Xt={},(0,R.Z)(Xt,U.ZERO,"zero"),(0,R.Z)(Xt,U.ONE,"one"),(0,R.Z)(Xt,U.SRC_COLOR,"src color"),(0,R.Z)(Xt,U.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,R.Z)(Xt,U.SRC_ALPHA,"src alpha"),(0,R.Z)(Xt,U.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,R.Z)(Xt,U.DST_COLOR,"dst color"),(0,R.Z)(Xt,U.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,R.Z)(Xt,U.DST_ALPHA,"dst alpha"),(0,R.Z)(Xt,U.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,R.Z)(Xt,U.CONSTANT_COLOR,"constant color"),(0,R.Z)(Xt,U.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,R.Z)(Xt,U.CONSTANT_ALPHA,"constant alpha"),(0,R.Z)(Xt,U.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,R.Z)(Xt,U.SRC_ALPHA_SATURATE,"src alpha saturate"),Xt),Pe=(te={},(0,R.Z)(te,U.NEVER,"never"),(0,R.Z)(te,U.ALWAYS,"always"),(0,R.Z)(te,U.LESS,"less"),(0,R.Z)(te,U.LEQUAL,"lequal"),(0,R.Z)(te,U.GREATER,"greater"),(0,R.Z)(te,U.GEQUAL,"gequal"),(0,R.Z)(te,U.EQUAL,"equal"),(0,R.Z)(te,U.NOTEQUAL,"notequal"),te),qe=(ue={},(0,R.Z)(ue,U.ZERO,"zero"),(0,R.Z)(ue,U.KEEP,"keep"),(0,R.Z)(ue,U.REPLACE,"replace"),(0,R.Z)(ue,U.INVERT,"invert"),(0,R.Z)(ue,U.INCR,"increment"),(0,R.Z)(ue,U.DECR,"decrement"),(0,R.Z)(ue,U.INCR_WRAP,"increment wrap"),(0,R.Z)(ue,U.DECR_WRAP,"decrement wrap"),ue),Qe=(fe={},(0,R.Z)(fe,U.FRONT,"front"),(0,R.Z)(fe,U.BACK,"back"),fe),lr=function(){function tt(tr,Kt){(0,w.Z)(this,tt),this.buffer=void 0;var $t=Kt.data,Et=Kt.usage,we=Kt.type;this.buffer=tr.buffer({data:$t,usage:ae[Et||U.STATIC_DRAW],type:Ne[we||U.UNSIGNED_BYTE]})}return(0,M.Z)(tt,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(Kt){var $t=Kt.data,Et=Kt.offset;this.buffer.subdata($t,Et)}}]),tt}(),fr=_(974902);function kr(tt,tr){var Kt=Object.keys(tt);if(Object.getOwnPropertySymbols){var $t=Object.getOwnPropertySymbols(tt);tr&&($t=$t.filter(function(Et){return Object.getOwnPropertyDescriptor(tt,Et).enumerable})),Kt.push.apply(Kt,$t)}return Kt}function En(tt){for(var tr=1;tr<arguments.length;tr++){var Kt=arguments[tr]!=null?arguments[tr]:{};tr%2?kr(Object(Kt),!0).forEach(function($t){(0,R.Z)(tt,$t,Kt[$t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tt,Object.getOwnPropertyDescriptors(Kt)):kr(Object(Kt)).forEach(function($t){Object.defineProperty(tt,$t,Object.getOwnPropertyDescriptor(Kt,$t))})}return tt}var fn=`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,Vr=0,Je=!1,dr=function(){function tt(tr,Kt){var $t=this;(0,w.Z)(this,tt),this.reGl=tr,this.context=Kt,this.entity=k(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var Et={};this.context.uniforms.forEach(function(kt){var Q=kt.name,at=kt.type,B=kt.data,C=kt.isReferer,I=kt.storageClass;if(I===V.StorageBuffer){if(C)$t.textureCache[Q]={data:void 0},Et["".concat(Q,"Size")]=function(){return B.compiledBundle.context.output.textureSize};else{$t.textureCache[Q]=$t.calcDataTexture(Q,at,B);var H=$t.textureCache[Q],mt=H.textureWidth,Pt=H.isOutput;Et["".concat(Q,"Size")]=[mt,mt],Pt&&($t.outputTextureName=Q,$t.context.needPingpong&&($t.outputTextureName="".concat(Q,"Output"),$t.textureCache[$t.outputTextureName]=$t.calcDataTexture(Q,at,B)))}Et[Q]=function(){return Je&&console.log("[".concat($t.entity,"]: ").concat(Q," ").concat($t.textureCache[Q].id)),$t.textureCache[Q].texture}}else if(I===V.Uniform){if(B&&(Array.isArray(B)||L()(B))&&B.length>16)throw new Error("invalid data type ".concat(at));Et[Q]=function(){return kt.data}}});var we=this.getOuputDataTexture(),Dt=we.textureWidth,Vt=we.texelCount;Et.u_OutputTextureSize=[Dt,Dt],Et.u_OutputTexelCount=Vt,this.context.output.textureSize=[Dt,Dt];var ht={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:Et,vert:fn,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(ht)}return(0,M.Z)(tt,[{key:"run",value:function(){var Kt=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){Kt.computeCommand()}),Je&&console.log("[".concat(this.entity,"]: output ").concat(this.getOuputDataTexture().id))}},{key:"readData",value:function(){var tr=(0,m.Z)(T().mark(function $t(){var Et=this,we,Dt,Vt,ht,kt,Q,at,B;return T().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){we=Et.reGl.read()}),!we){I.next=6;break}if(Dt=this.getOuputDataTexture(),Vt=Dt.originalDataLength,ht=Dt.elementsPerTexel,kt=Dt.typedArrayConstructor,Q=kt===void 0?Float32Array:kt,at=[],ht!==4)for(B=0;B<we.length;B+=4)ht===1?at.push(we[B]):ht===2?at.push(we[B],we[B+1]):at.push(we[B],we[B+1],we[B+2]);else at=we;return I.abrupt("return",new Q(at.slice(0,Vt)));case 6:return I.abrupt("return",new Float32Array);case 7:case"end":return I.stop()}},$t,this)}));function Kt(){return tr.apply(this,arguments)}return Kt}()},{key:"confirmInput",value:function(Kt,$t){var Et;this.entity===Kt.entity?(this.dynamicPingpong=!0,Et=this):Et=Kt,this.textureCache[$t].id=Et.getOuputDataTexture().id,this.textureCache[$t].texture=Et.getOuputDataTexture().texture,Je&&console.log("[".concat(this.entity,"]: confirm input ").concat($t," from model ").concat(Et.entity,", ").concat(Et.getOuputDataTexture().id))}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(Kt,$t){var Et=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,we=this.context.uniforms.find(function(kt){var Q=kt.name;return Q===Kt});if(we){var Dt=this.calcDataTexture(Kt,we.type,$t),Vt=Dt.texture,ht=Dt.data;this.textureCache[Kt].data=ht,this.textureCache[Kt].texture=Vt}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var Kt=this.context.output.name;this.textureCache[Kt].id=this.getOuputDataTexture().id,this.textureCache[Kt].texture=this.getOuputDataTexture().texture}var $t=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=$t,Je&&console.log("[".concat(this.entity,"]: after swap, output ").concat(this.getOuputDataTexture().id))}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var Kt=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=Kt}},{key:"cloneDataTexture",value:function(Kt){var $t=Kt.data,Et=Kt.textureWidth;return En(En({},Kt),{},{id:Vr++,texture:this.reGl.texture({width:Et,height:Et,data:$t,type:"float"})})}},{key:"calcDataTexture",value:function(Kt,$t,Et){var we=1;$t===W.Vector4FloatArray&&(we=4);for(var Dt=[],Vt=0;Vt<Et.length;Vt+=we)we===1?Dt.push(Et[Vt],0,0,0):we===2?Dt.push(Et[Vt],Et[Vt+1],0,0):we===3?Dt.push(Et[Vt],Et[Vt+1],Et[Vt+2],0):we===4&&Dt.push(Et[Vt],Et[Vt+1],Et[Vt+2],Et[Vt+3]);var ht=Et.length,kt=Math.ceil(ht/we),Q=Math.ceil(Math.sqrt(kt)),at=Q*Q;kt<at&&Dt.push.apply(Dt,(0,fr.Z)(new Array((at-kt)*4).fill(0)));var B=this.reGl.texture({width:Q,height:Q,data:Dt,type:"float"});return{id:Vr++,data:Dt,originalDataLength:ht,typedArrayConstructor:L()(Et)?Et.constructor:void 0,textureWidth:Q,texture:B,texelCount:kt,elementsPerTexel:we,isOutput:Kt===this.context.output.name}}}]),tt}(),nr=function(){function tt(tr,Kt){(0,w.Z)(this,tt),this.elements=void 0;var $t=Kt.data,Et=Kt.usage,we=Kt.type,Dt=Kt.count;this.elements=tr.elements({data:$t,usage:ae[Et||U.STATIC_DRAW],type:Ne[we||U.UNSIGNED_BYTE],count:Dt})}return(0,M.Z)(tt,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(Kt){var $t=Kt.data;this.elements.subdata($t)}},{key:"destroy",value:function(){this.elements.destroy()}}]),tt}(),oe=function(){function tt(tr,Kt){(0,w.Z)(this,tt),this.framebuffer=void 0;var $t=Kt.width,Et=Kt.height,we=Kt.color,Dt=Kt.colors,Vt=Kt.depth,ht=Kt.stencil,kt={width:$t,height:Et};Array.isArray(Dt)&&(kt.colors=Dt.map(function(Q){return Q.get()})),we&&typeof we!="boolean"&&(kt.color=we.get()),this.framebuffer=tr.framebuffer(kt)}return(0,M.Z)(tt,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(Kt){var $t=Kt.width,Et=Kt.height;this.framebuffer.resize($t,Et)}}]),tt}(),Te=_(671002),Lr=_(968630),Nr=_.n(Lr);function ln(tt){var tr={};return Object.keys(tt).forEach(function(Kt){en(Kt,tt[Kt],tr,"")}),tr}function en(tt,tr,Kt,$t){if(tr===null||typeof tr=="number"||typeof tr=="boolean"||Array.isArray(tr)&&typeof tr[0]=="number"||L()(tr)||tr===""||tr.resize!==void 0){Kt["".concat($t&&$t+".").concat(tt)]=tr;return}Nr()(tr)&&Object.keys(tr).forEach(function(Et){en(Et,tr[Et],Kt,"".concat($t&&$t+".").concat(tt))}),Array.isArray(tr)&&tr.forEach(function(Et,we){Object.keys(Et).forEach(function(Dt){en(Dt,Et[Dt],Kt,"".concat($t&&$t+".").concat(tt,"[").concat(we,"]"))})})}function Dr(tt,tr){var Kt=Object.keys(tt);if(Object.getOwnPropertySymbols){var $t=Object.getOwnPropertySymbols(tt);tr&&($t=$t.filter(function(Et){return Object.getOwnPropertyDescriptor(tt,Et).enumerable})),Kt.push.apply(Kt,$t)}return Kt}function Fr(tt){for(var tr=1;tr<arguments.length;tr++){var Kt=arguments[tr]!=null?arguments[tr]:{};tr%2?Dr(Object(Kt),!0).forEach(function($t){(0,R.Z)(tt,$t,Kt[$t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tt,Object.getOwnPropertyDescriptors(Kt)):Dr(Object(Kt)).forEach(function($t){Object.defineProperty(tt,$t,Object.getOwnPropertyDescriptor(Kt,$t))})}return tt}var Kr=function(){function tt(tr,Kt){(0,w.Z)(this,tt),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=tr;var $t=Kt.vs,Et=Kt.fs,we=Kt.defines,Dt=Kt.attributes,Vt=Kt.uniforms,ht=Kt.primitive,kt=Kt.count,Q=Kt.elements,at=Kt.depth,B=Kt.blend,C=Kt.stencil,I=Kt.cull,H=Kt.instances,mt=Kt.scissor,Pt=Kt.viewport,Lt={};Vt&&(this.uniforms=ln(Vt),Object.keys(Vt).forEach(function(Ze){Lt[Ze]=tr.prop(Ze)}));var Jt={};Object.keys(Dt).forEach(function(Ze){Jt[Ze]=Dt[Ze].get()});var Oe=we&&this.generateDefines(we)||"",ye={attributes:Jt,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(Oe,`
`).concat(Et),uniforms:Lt,vert:`
`.concat(Oe,`
`).concat($t),primitive:Gt[ht===void 0?U.TRIANGLES:ht]};H&&(ye.instances=H),kt&&(ye.count=kt),Q&&(ye.elements=Q.get()),mt&&(ye.scissor=mt),Pt&&(ye.viewport=Pt),this.initDepthDrawParams({depth:at},ye),this.initBlendDrawParams({blend:B},ye),this.initStencilDrawParams({stencil:C},ye),this.initCullDrawParams({cull:I},ye),this.drawCommand=tr(ye)}return(0,M.Z)(tt,[{key:"addUniforms",value:function(Kt){this.uniforms=Fr(Fr({},this.uniforms),ln(Kt))}},{key:"draw",value:function(Kt){var $t=Fr(Fr({},this.uniforms),ln(Kt.uniforms||{})),Et={};Object.keys($t).forEach(function(we){var Dt=(0,Te.Z)($t[we]);Dt==="boolean"||Dt==="number"||Array.isArray($t[we])||$t[we].BYTES_PER_ELEMENT?Et[we]=$t[we]:Dt==="string"||(Et[we]=$t[we].get())}),this.drawCommand(Et)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(Kt,$t){var Et=Kt.depth;Et&&($t.depth={enable:Et.enable===void 0?!0:!!Et.enable,mask:Et.mask===void 0?!0:!!Et.mask,func:he[Et.func||U.LESS],range:Et.range||[0,1]})}},{key:"initBlendDrawParams",value:function(Kt,$t){var Et=Kt.blend;if(Et){var we=Et.enable,Dt=Et.func,Vt=Et.equation,ht=Et.color,kt=ht===void 0?[0,0,0,0]:ht;$t.blend={enable:!!we,func:{srcRGB:ie[Dt&&Dt.srcRGB||U.SRC_ALPHA],srcAlpha:ie[Dt&&Dt.srcAlpha||U.SRC_ALPHA],dstRGB:ie[Dt&&Dt.dstRGB||U.ONE_MINUS_SRC_ALPHA],dstAlpha:ie[Dt&&Dt.dstAlpha||U.ONE_MINUS_SRC_ALPHA]},equation:{rgb:vt[Vt&&Vt.rgb||U.FUNC_ADD],alpha:vt[Vt&&Vt.alpha||U.FUNC_ADD]},color:kt}}}},{key:"initStencilDrawParams",value:function(Kt,$t){var Et=Kt.stencil;if(Et){var we=Et.enable,Dt=Et.mask,Vt=Dt===void 0?-1:Dt,ht=Et.func,kt=ht===void 0?{cmp:U.ALWAYS,ref:0,mask:-1}:ht,Q=Et.opFront,at=Q===void 0?{fail:U.KEEP,zfail:U.KEEP,zpass:U.KEEP}:Q,B=Et.opBack,C=B===void 0?{fail:U.KEEP,zfail:U.KEEP,zpass:U.KEEP}:B;$t.stencil={enable:!!we,mask:Vt,func:Fr(Fr({},kt),{},{cmp:Pe[kt.cmp]}),opFront:{fail:qe[at.fail],zfail:qe[at.zfail],zpass:qe[at.zpass]},opBack:{fail:qe[C.fail],zfail:qe[C.zfail],zpass:qe[C.zpass]}}}}},{key:"initCullDrawParams",value:function(Kt,$t){var Et=Kt.cull;if(Et){var we=Et.enable,Dt=Et.face,Vt=Dt===void 0?U.BACK:Dt;$t.cull={enable:!!we,face:Qe[Vt]}}}},{key:"generateDefines",value:function(Kt){return Object.keys(Kt).map(function($t){return"#define ".concat($t," ").concat(Number(Kt[$t]))}).join(`
`)}}]),tt}(),an=function(){function tt(tr,Kt){(0,w.Z)(this,tt),this.texture=void 0,this.width=void 0,this.height=void 0;var $t=Kt.data,Et=Kt.type,we=Et===void 0?U.UNSIGNED_BYTE:Et,Dt=Kt.width,Vt=Kt.height,ht=Kt.flipY,kt=ht===void 0?!1:ht,Q=Kt.format,at=Q===void 0?U.RGBA:Q,B=Kt.mipmap,C=B===void 0?!1:B,I=Kt.wrapS,H=I===void 0?U.CLAMP_TO_EDGE:I,mt=Kt.wrapT,Pt=mt===void 0?U.CLAMP_TO_EDGE:mt,Lt=Kt.aniso,Jt=Lt===void 0?0:Lt,Oe=Kt.alignment,ye=Oe===void 0?1:Oe,Ze=Kt.premultiplyAlpha,wr=Ze===void 0?!1:Ze,er=Kt.mag,Ur=er===void 0?U.NEAREST:er,xn=Kt.min,rr=xn===void 0?U.NEAREST:xn,xr=Kt.colorSpace,Wr=xr===void 0?U.BROWSER_DEFAULT_WEBGL:xr;this.width=Dt,this.height=Vt;var Gr={width:Dt,height:Vt,type:Ne[we],format:ee[at],wrapS:be[H],wrapT:be[Pt],mag:ze[Ur],min:ze[rr],alignment:ye,flipY:kt,colorSpace:ke[Wr],premultiplyAlpha:wr,aniso:Jt};$t&&(Gr.data=$t),typeof C=="number"?Gr.mipmap=de[C]:typeof C=="boolean"&&(Gr.mipmap=C),this.texture=tr.texture(Gr)}return(0,M.Z)(tt,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(Kt){var $t=Kt.width,Et=Kt.height;this.texture.resize($t,Et),this.width=$t,this.height=Et}},{key:"destroy",value:function(){this.texture.destroy()}}]),tt}(),yn=function(){function tt(){var tr=this;(0,w.Z)(this,tt),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var Kt=(0,m.Z)(T().mark(function $t(Et){return T().wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:if(!Et.uniforms){Dt.next=3;break}return Dt.next=3,Promise.all(Object.keys(Et.uniforms).map(function(){var Vt=(0,m.Z)(T().mark(function ht(kt){var Q;return T().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(!(Et.uniforms[kt]&&Et.uniforms[kt].load!==void 0)){B.next=5;break}return B.next=3,Et.uniforms[kt].load();case 3:Q=B.sent,Et.uniforms[kt]=Q;case 5:case"end":return B.stop()}},ht)}));return function(ht){return Vt.apply(this,arguments)}}()));case 3:return Dt.abrupt("return",new Kr(tr.gl,Et));case 4:case"end":return Dt.stop()}},$t)}));return function($t){return Kt.apply(this,arguments)}}(),this.createAttribute=function(Kt){return new wt(tr.gl,Kt)},this.createBuffer=function(Kt){return new lr(tr.gl,Kt)},this.createElements=function(Kt){return new nr(tr.gl,Kt)},this.createTexture2D=function(Kt){return new an(tr.gl,Kt)},this.createFramebuffer=function(Kt){return new oe(tr.gl,Kt)},this.useFramebuffer=function(Kt,$t){tr.gl({framebuffer:Kt?Kt.get():null})($t)},this.createComputeModel=function(){var Kt=(0,m.Z)(T().mark(function $t(Et){return T().wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return Dt.abrupt("return",new dr(tr.gl,Et));case 1:case"end":return Dt.stop()}},$t)}));return function($t){return Kt.apply(this,arguments)}}(),this.clear=function(Kt){var $t=Kt.color,Et=Kt.depth,we=Kt.stencil,Dt=Kt.framebuffer,Vt=Dt===void 0?null:Dt,ht={color:$t,depth:Et,stencil:we};ht.framebuffer=Vt===null?Vt:Vt.get(),tr.gl.clear(ht)},this.setScissor=function(Kt){tr.gl&&tr.gl._gl&&(Kt.enable&&Kt.box?(tr.gl._gl.enable(U.SCISSOR_TEST),tr.gl._gl.scissor(Kt.box.x,Kt.box.y,Kt.box.width,Kt.box.height)):tr.gl._gl.disable(U.SCISSOR_TEST),tr.gl._refresh())},this.viewport=function(Kt){var $t=Kt.x,Et=Kt.y,we=Kt.width,Dt=Kt.height;tr.gl&&tr.gl._gl&&(tr.gl._gl.viewport($t,Et,we,Dt),tr.gl._refresh())},this.readPixels=function(Kt){var $t=Kt.framebuffer,Et=Kt.x,we=Kt.y,Dt=Kt.width,Vt=Kt.height,ht={x:Et,y:we,width:Dt,height:Vt};return $t&&(ht.framebuffer=$t.get()),tr.gl.read(ht)},this.getCanvas=function(){return tr.$canvas},this.getGLContext=function(){return tr.gl._gl},this.destroy=function(){tr.gl&&(tr.gl.destroy(),tr.inited=!1)}}return(0,M.Z)(tt,[{key:"init",value:function(){var tr=(0,m.Z)(T().mark(function $t(Et){return T().wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:if(!this.inited){Dt.next=2;break}return Dt.abrupt("return");case 2:return this.$canvas=Et.canvas,Dt.next=5,new Promise(function(Vt,ht){Ft()({canvas:Et.canvas,attributes:{alpha:!0,antialias:Et.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(Q,at){(Q||!at)&&ht(Q),Vt(at)}})});case 5:this.gl=Dt.sent,this.inited=!0;case 7:case"end":return Dt.stop()}},$t,this)}));function Kt($t){return tr.apply(this,arguments)}return Kt}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),tt}(),bn=function(){function tt(){(0,w.Z)(this,tt),this.engine=void 0,this.configService=new X}return(0,M.Z)(tt,[{key:"setConfig",value:function(Kt){this.configService.set(Kt)}},{key:"setEngine",value:function(Kt){this.engine=Kt}},{key:"createEntity",value:function(){return k()}},{key:"createKernel",value:function(Kt){var $t=new yt(this.engine,this.configService);return typeof Kt=="string"?$t.setBundle(JSON.parse(Kt)):$t.setBundle(Kt),$t.init(),$t}},{key:"destroy",value:function(){this.engine.destroy()}}],[{key:"create",value:function(){var Kt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},$t=new tt;return $t.setConfig(Kt),$t.setEngine(new yn),$t}}]),tt}()},797140:function(We,G,_){"use strict";_.d(G,{ZP:function(){return zS}});var m={};_.r(m),_.d(m,{GADDI:function(){return ro},Stack:function(){return Ao},breadthFirstSearch:function(){return ae},connectedComponent:function(){return de},cosineSimilarity:function(){return Lt},default:function(){return Ai},depthFirstSearch:function(){return Pe},detectAllCycles:function(){return fr},detectAllDirectedCycle:function(){return lr},detectAllUndirectedCycle:function(){return Qe},detectCycle:function(){return kr},detectDirectedCycle:function(){return Go},dijkstra:function(){return Vr},findAllPath:function(){return nr},findShortestPath:function(){return dr},floydWarshall:function(){return Te},getAdjMatrix:function(){return it},getDegree:function(){return be},getInDegree:function(){return ke},getNeighbors:function(){return _t},getOutDegree:function(){return he},iLouvain:function(){return at},kCore:function(){return C},kMeans:function(){return mt},labelPropagation:function(){return Nr},louvain:function(){return kt},minimumSpanningTree:function(){return Wr},nodesCosineSimilarity:function(){return Oe},pageRank:function(){return ce}});var R={};_.r(R),_.d(R,{Line:function(){return Da},applyMatrix:function(){return cn},compare:function(){return ve},distance:function(){return sa},floydWarshall:function(){return ga},fractionToLine:function(){return uo},getAdjMatrix:function(){return ya},getBBoxBoundLine:function(){return Ri},getCircleCenterByPoints:function(){return Bn},getCircleIntersectByPoint:function(){return Yr},getDegree:function(){return ei},getEllipseIntersectByPoint:function(){return Pr},getLineIntersect:function(){return pr},getPointsCenter:function(){return qi},getRectIntersectByPoint:function(){return Xr},intersectBBox:function(){return yi},invertMatrix:function(){return Mn},isPointInPolygon:function(){return Ii},isPointsOverlap:function(){return rs},isPolygonsIntersect:function(){return Va},itemIntersectByLine:function(){return ki},lerp:function(){return zi},lerpArray:function(){return fo},move:function(){return Sa},pointLineDistance:function(){return ni},pointLineSquareDist:function(){return es},pointRectSquareDist:function(){return no},rotate:function(){return fi},scale:function(){return ua},scaleMatrix:function(){return qn},squareDist:function(){return po},translate:function(){return vi}});var w={};_.r(w),_.d(w,{cloneBesidesImg:function(){return ds},getAnimateCfgWithCallback:function(){return Ds},getBBox:function(){return qa},getComboBBox:function(){return Vs},getLabelPosition:function(){return Oo},getLetterWidth:function(){return cs},getLoopCfgs:function(){return Bi},getTextSize:function(){return ks},plainCombosToTrees:function(){return js},reconstructTree:function(){return Ks},shouldRefreshEdge:function(){return hu},traverseTree:function(){return Qi},traverseTreeUp:function(){return Io},truncateLabelByLength:function(){return ls}});var M={};_.r(M),_.d(M,{catmullRomToBezier:function(){return Y},fillPath:function(){return wo},fillPathByDiff:function(){return ci},formatPath:function(){return Fs},intersection:function(){return Ra},parsePathArray:function(){return $e},parsePathString:function(){return h},pathToAbsolute:function(){return Bt},pathToCurve:function(){return De},rectPath:function(){return Un}});var P={};_.r(P),_.d(P,{easeBack:function(){return Kl},easeBackIn:function(){return Zl},easeBackInOut:function(){return Kl},easeBackOut:function(){return Bc},easeBounce:function(){return Mf},easeBounceIn:function(){return Sf},easeBounceInOut:function(){return ic},easeBounceOut:function(){return Mf},easeCircle:function(){return ec},easeCircleIn:function(){return Lc},easeCircleInOut:function(){return ec},easeCircleOut:function(){return vl},easeCubic:function(){return cl},easeCubicIn:function(){return Yl},easeCubicInOut:function(){return cl},easeCubicOut:function(){return hd},easeElastic:function(){return ml},easeElasticIn:function(){return $l},easeElasticInOut:function(){return ql},easeElasticOut:function(){return ml},easeExp:function(){return tc},easeExpIn:function(){return Jf},easeExpInOut:function(){return tc},easeExpOut:function(){return Pc},easeLinear:function(){return ul},easePoly:function(){return ll},easePolyIn:function(){return vd},easePolyInOut:function(){return ll},easePolyOut:function(){return Xl},easeQuad:function(){return fl},easeQuadIn:function(){return Wl},easeQuadInOut:function(){return fl},easeQuadOut:function(){return ef},easeSin:function(){return hl},easeSinIn:function(){return Vl},easeSinInOut:function(){return hl},easeSinOut:function(){return Hl}});var L={};_.r(L),_.d(L,{calculationItemsBBox:function(){return Fv},cloneEvent:function(){return em},formatPadding:function(){return Dh},isNaN:function(){return Cf},isViewportChanged:function(){return rm},processParallelEdges:function(){return nm},uniqueId:function(){return Ih}});var p={};_.r(p),_.d(p,{getClosedSpline:function(){return Gh},getControlPoint:function(){return Zd},getSpline:function(){return ep},getStarPath:function(){return Sm},paddedHull:function(){return ip},pathToPoints:function(){return zh},pointsToPolygon:function(){return wm},roundedHull:function(){return Uh}});var b={};_.r(b),_.d(b,{defaultSubjectColors:function(){return Xm}});var S={};_.r(S),_.d(S,{isForce:function(){return gp}});var x={};_.r(x),_.d(x,{Base:function(){return nf},Circle:function(){return py},Ellipse:function(){return my},Image:function(){return by},Line:function(){return Ey},Marker:function(){return My},Path:function(){return tv},Polygon:function(){return Ly},Polyline:function(){return Ry},Rect:function(){return zy},Text:function(){return Uy}});var g={};_.r(g),_.d(g,{Base:function(){return zu},Circle:function(){return Ky},Dom:function(){return qy},Ellipse:function(){return Jy},Image:function(){return e1},Line:function(){return n1},Marker:function(){return i1},Path:function(){return s1},Polygon:function(){return f1},Polyline:function(){return l1},Rect:function(){return g1},Text:function(){return E1}});var T={};_.r(T),_.d(T,{getColorSetsBySubjectColors:function(){return K1},getColorsWithSubjectColor:function(){return av},mixColor:function(){return As}});var E={};_.r(E),_.d(E,{arrayToTextureData:function(){return ub},attributesToTextureData:function(){return sb},buildTextureData:function(){return ab},buildTextureDataWithOneEdgeAttr:function(){return ib},buildTextureDataWithTwoEdgeAttr:function(){return ob},proccessToFunc:function(){return nb},radialLayout:function(){return fb}});var O={};_.r(O),_.d(O,{gpuDetector:function(){return ig}});var k={};_.r(k),_.d(k,{assign:function(){return jc},default:function(){return Ug},defaultI18n:function(){return pv},format:function(){return zg},parse:function(){return Gg},setGlobalDateI18n:function(){return Dg},setGlobalDateMasks:function(){return Fg}});var y=_(197582),l=_(413810),U={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(e){return Object.assign(this,e),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(e){var t=this,r=this.events;this.graph=e,(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!0),(0,l.each)(r,function(n,a){e.on(a,n)}),document.addEventListener("visibilitychange",function(){t.keydown=!1})},unbind:function(e){var t=this.events,r=e.get("canvas").get("draggable");(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!1),(0,l.each)(t,function(n,a){e.off(a,n)}),e.get("canvas").set("draggable",r)},get:function(e){return this[e]},set:function(e,t){return this[e]=t,this}},X=function(){function i(){}return i.registerBehavior=function(e,t){if(!t)throw new Error("please specify handler for this behavior: ".concat(e));var r=(0,l.clone)(U);Object.assign(r,t);var n=function(o){var s=this;Object.assign(this,this.getDefaultCfg(),o);var u=this.getEvents();this.events=null;var f={};u&&((0,l.each)(u,function(c,d){f[d]=(0,l.wrapBehavior)(s,c)}),this.events=f)};n.prototype=r,i.types[e]=n},i.hasBehavior=function(e){return!!i.types[e]},i.getBehavior=function(e){return i.types[e]},i.types={},i}(),F=X,W=F,j="*",V=function(){function i(){this._events={}}return i.prototype.on=function(e,t,r){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!r}),this},i.prototype.once=function(e,t){return this.on(e,t,!0)},i.prototype.emit=function(e){for(var t=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=this._events[e]||[],o=this._events[j]||[],s=function(u){for(var f=u.length,c=0;c<f;c++)if(u[c]){var d=u[c],A=d.callback,D=d.once;D&&(u.splice(c,1),u.length===0&&delete t._events[e],f--,c--),A.apply(t,r)}};s(a),s(o)},i.prototype.off=function(e,t){if(!e)this._events={};else if(!t)delete this._events[e];else{for(var r=this._events[e]||[],n=r.length,a=0;a<n;a++)r[a].callback===t&&(r.splice(a,1),n--,a--);r.length===0&&delete this._events[e]}return this},i.prototype.getEvents=function(){return this._events},i}(),q=V,$=_(935600);function J(i,e,t){var r=[0,0,0,0,0,0,0,0,0];return $.fromTranslation(r,t),$.multiply(i,r,e)}function ut(i,e,t){var r=[0,0,0,0,0,0,0,0,0];return $.fromRotation(r,t),$.multiply(i,r,e)}function nt(i,e,t){var r=[0,0,0,0,0,0,0,0,0];return $.fromScaling(r,t),$.multiply(i,r,e)}function yt(i,e,t){return $.multiply(i,t,e)}function dt(i,e){for(var t=i?[].concat(i):[1,0,0,0,1,0,0,0,1],r=0,n=e.length;r<n;r++){var a=e[r];switch(a[0]){case"t":J(t,t,[a[1],a[2]]);break;case"s":nt(t,t,[a[1],a[2]]);break;case"r":ut(t,t,a[1]);break;case"m":yt(t,t,a[1]);break;default:break}}return t}function Ft(i,e){return i[0]*e[1]-e[0]*i[1]}function wt(i,e,t){var r=vec2.angle(i,e),n=Ft(i,e)>=0;return t?n?Math.PI*2-r:r:n?r:Math.PI*2-r}function St(i,e,t){return t?(i[0]=e[1],i[1]=-1*e[0]):(i[0]=-1*e[1],i[1]=e[0]),i}var et=function(e,t){var r=e.nodes,n=e.edges,a=[],o={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach(function(s,u){o[s.id]=u;var f=[];a.push(f)}),n&&n.forEach(function(s){var u=s.source,f=s.target,c=o[u],d=o[f];!c&&c!==0||!d&&d!==0||(a[c][d]=1,t||(a[d][c]=1))}),a},it=et,Tt=function(e,t){return e===t},Nt=function(){function i(e,t){t===void 0&&(t=null),this.value=e,this.next=t}return i.prototype.toString=function(e){return e?e(this.value):"".concat(this.value)},i}(),st=function(){function i(e){e===void 0&&(e=Tt),this.head=null,this.tail=null,this.compare=e}return i.prototype.prepend=function(e){var t=new Nt(e,this.head);return this.head=t,this.tail||(this.tail=t),this},i.prototype.append=function(e){var t=new Nt(e);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},i.prototype.delete=function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare(this.head.value,e);)t=this.head,this.head=this.head.next;var r=this.head;if(r!==null)for(;r.next;)this.compare(r.next.value,e)?(t=r.next,r.next=r.next.next):r=r.next;return this.compare(this.tail.value,e)&&(this.tail=r),t},i.prototype.find=function(e){var t=e.value,r=t===void 0?void 0:t,n=e.callback,a=n===void 0?void 0:n;if(!this.head)return null;for(var o=this.head;o;){if(a&&a(o.value)||r!==void 0&&this.compare(o.value,r))return o;o=o.next}return null},i.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,e},i.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},i.prototype.fromArray=function(e){var t=this;return e.forEach(function(r){return t.append(r)}),this},i.prototype.toArray=function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e},i.prototype.reverse=function(){for(var e=this.head,t=null,r=null;e;)r=e.next,e.next=t,t=e,e=r;this.tail=this.head,this.head=t},i.prototype.toString=function(e){return e===void 0&&(e=void 0),this.toArray().map(function(t){return t.toString(e)}).toString()},i}(),xt=st,zt=function(){function i(){this.linkedList=new xt}return i.prototype.isEmpty=function(){return!this.linkedList.head},i.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},i.prototype.enqueue=function(e){this.linkedList.append(e)},i.prototype.dequeue=function(){var e=this.linkedList.deleteHead();return e?e.value:null},i.prototype.toString=function(e){return this.linkedList.toString(e)},i}(),Wt=zt,_t=function(e,t,r){t===void 0&&(t=[]);var n=t.filter(function(u){return u.source===e||u.target===e});if(r==="target"){var a=function(f){return f.source===e};return n.filter(a).map(function(u){return u.target})}if(r==="source"){var o=function(f){return f.target===e};return n.filter(o).map(function(u){return u.source})}var s=function(f){return f.source===e?f.target:f.source};return n.map(s)},Xt=function(e,t){return t.filter(function(r){return r.source===e})},te=function(e,t){return t.filter(function(r){return r.source===e||r.target===e})},ue=function(e){e===void 0&&(e=0);var t="".concat(Math.random()).split(".")[1].substr(0,5),r="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(e,"-").concat(t).concat(r)};function fe(i){i===void 0&&(i={});var e=i,t=function(){},r=function(){var n={};return function(a){var o=a.next,s=o;return n[s]?!1:(n[s]=!0,!0)}}();return e.allowTraversal=i.allowTraversal||r,e.enter=i.enter||t,e.leave=i.leave||t,e}var Gt=function(e,t,r,n){n===void 0&&(n=!0);var a=fe(r),o=new Wt,s=e.edges,u=s===void 0?[]:s;o.enqueue(t);for(var f="",c=function(){var A=o.dequeue();a.enter({current:A,previous:f}),_t(A,u,n?"target":void 0).forEach(function(D){a.allowTraversal({previous:f,current:A,next:D})&&o.enqueue(D)}),a.leave({current:A,previous:f}),f=A};!o.isEmpty();)c()},ae=Gt,Ne=function(e){for(var t=e.nodes,r=t===void 0?[]:t,n=e.edges,a=n===void 0?[]:n,o=[],s={},u=[],f=function D(z){u.push(z),s[z.id]=!0;for(var Z=_t(z.id,a),rt=function(gt){var Ct=Z[gt];if(!s[Ct]){var Ht=r.filter(function(ne){return ne.id===Ct});Ht.length>0&&D(Ht[0])}},ft=0;ft<Z.length;++ft)rt(ft)},c=0;c<r.length;c++){var d=r[c];if(!s[d.id]){f(d);for(var A=[];u.length>0;)A.push(u.pop());o.push(A)}}return o},ee=function(e){for(var t=e.nodes,r=t===void 0?[]:t,n=e.edges,a=n===void 0?[]:n,o=[],s={},u={},f={},c=[],d=0,A=function rt(ft){u[ft.id]=d,f[ft.id]=d,d+=1,o.push(ft),s[ft.id]=!0;for(var ct=_t(ft.id,a,"target").filter(function(re){return r.map(function(Me){return Me.id}).indexOf(re)>-1}),gt=function(Me){var je=ct[Me];if(!u[je]&&u[je]!==0){var Re=r.filter(function(ir){return ir.id===je});Re.length>0&&rt(Re[0]),f[ft.id]=Math.min(f[ft.id],f[je])}else s[je]&&(f[ft.id]=Math.min(f[ft.id],u[je]))},Ct=0;Ct<ct.length;Ct++)gt(Ct);if(f[ft.id]===u[ft.id]){for(var Ht=[];o.length>0;){var ne=o.pop();if(s[ne.id]=!1,Ht.push(ne),ne===ft)break}Ht.length>0&&c.push(Ht)}},D=0,z=r;D<z.length;D++){var Z=z[D];!u[Z.id]&&u[Z.id]!==0&&A(Z)}return c};function de(i,e){return e?ee(i):Ne(i)}var ze=function(e){var t={},r=e.nodes,n=r===void 0?[]:r,a=e.edges,o=a===void 0?[]:a;return n.forEach(function(s){t[s.id]={degree:0,inDegree:0,outDegree:0}}),o.forEach(function(s){t[s.source].degree++,t[s.source].outDegree++,t[s.target].degree++,t[s.target].inDegree++}),t},be=ze,ke=function(e,t){var r=ze(e);return r[t]?ze(e)[t].inDegree:0},he=function(e,t){var r=ze(e);return r[t]?ze(e)[t].outDegree:0};function vt(i){i===void 0&&(i={});var e=i,t=function(){},r=function(){var n={};return function(a){var o=a.next;return n[o]?!1:(n[o]=!0,!0)}}();return e.allowTraversal=i.allowTraversal||r,e.enter=i.enter||t,e.leave=i.leave||t,e}function ie(i,e,t,r){r.enter({current:e,previous:t});var n=i.edges,a=n===void 0?[]:n;_t(e,a,"target").forEach(function(o){r.allowTraversal({previous:t,current:e,next:o})&&ie(i,o,e,r)}),r.leave({current:e,previous:t})}function Pe(i,e,t){ie(i,e,"",vt(t))}var qe=function(e){var t=null,r=e.nodes,n=r===void 0?[]:r,a={},o={},s={},u={};n.forEach(function(d){o[d.id]=d});for(var f={enter:function(A){var D=A.current,z=A.previous;if(s[D]){t={};for(var Z=D,rt=z;rt!==D;)t[Z]=rt,Z=rt,rt=a[rt];t[Z]=rt}else s[D]=D,delete o[D],a[D]=z},leave:function(A){var D=A.current;u[D]=D,delete s[D]},allowTraversal:function(A){var D=A.next;return t?!1:!u[D]}};Object.keys(o).length;){var c=Object.keys(o)[0];Pe(e,c,f)}return t},Qe=function(e,t,r){var n,a;r===void 0&&(r=!0);for(var o=[],s=de(e,!1),u=0,f=s;u<f.length;u++){var c=f[u];if(c.length)for(var d=c[0],A=d.id,D=[d],z=(n={},n[A]=d,n),Z=(a={},a[A]=new Set,a);D.length>0;)for(var rt=D.pop(),ft=rt.id,ct=_t(ft,e.edges),gt=function(ne){var re,Me=ct[ne],je=e.nodes.find(function(Pn){return Pn.id===Me});if(Me===ft)o.push((re={},re[Me]=rt,re));else if(!(Me in Z))z[Me]=rt,D.push(je),Z[Me]=new Set([rt]);else if(!Z[ft].has(je)){for(var Re=!0,ir=[je,rt],Sr=z[ft];Z[Me].size&&!Z[Me].has(Sr)&&(ir.push(Sr),Sr!==z[Sr.id]);)Sr=z[Sr.id];if(ir.push(Sr),t&&r?(Re=!1,ir.findIndex(function(Pn){return t.indexOf(Pn.id)>-1})>-1&&(Re=!0)):t&&!r&&ir.findIndex(function(Pn){return t.indexOf(Pn.id)>-1})>-1&&(Re=!1),Re){for(var pn={},Gn=1;Gn<ir.length;Gn+=1)pn[ir[Gn-1].id]=ir[Gn];ir.length&&(pn[ir[ir.length-1].id]=ir[0]),o.push(pn)}Z[Me].add(rt)}},Ct=0;Ct<ct.length;Ct+=1)gt(Ct)}return o},lr=function(e,t,r){r===void 0&&(r=!0);for(var n=[],a=new Set,o=[],s=[],u={},f={},c=function(Sr){for(var pn=[Sr];pn.length>0;){var Gn=pn.pop();a.has(Gn)&&(a.delete(Gn),o[Gn.id].forEach(function(Pn){pn.push(Pn)}),o[Gn.id].clear())}},d=function ir(Sr,pn,Gn){var Pn=!1;if(t&&r===!1&&t.indexOf(Sr.id)>-1)return Pn;n.push(Sr),a.add(Sr);for(var sn=Gn[Sr.id],Jn=0;Jn<sn.length;Jn+=1){var Kn=u[sn[Jn]];if(Kn===pn){for(var un={},Dn=1;Dn<n.length;Dn+=1)un[n[Dn-1].id]=n[Dn];n.length&&(un[n[n.length-1].id]=n[0]),s.push(un),Pn=!0}else a.has(Kn)||ir(Kn,pn,Gn)&&(Pn=!0)}if(Pn)c(Sr);else for(var Jn=0;Jn<sn.length;Jn+=1){var Kn=u[sn[Jn]];o[Kn.id].has(Sr)||o[Kn.id].add(Sr)}return n.pop(),Pn},A=e.nodes,D=A===void 0?[]:A,z=0;z<D.length;z+=1){var Z=D[z],rt=Z.id;f[rt]=z,u[z]=Z}if(t&&r)for(var ft=function(Sr){var pn=t[Sr];f[D[Sr].id]=f[pn],f[pn]=0,u[0]=D.find(function(Gn){return Gn.id===pn}),u[f[D[Sr].id]]=D[Sr]},z=0;z<t.length;z++)ft(z);for(var ct=function(Sr){for(var pn,Gn,Pn=1/0,sn=0;sn<Sr.length;sn+=1)for(var Jn=Sr[sn],Kn=0;Kn<Jn.length;Kn++){var un=f[Jn[Kn].id];un<Pn&&(Pn=un,Gn=sn)}for(var Dn=Sr[Gn],Yn=[],sn=0;sn<Dn.length;sn+=1){var Xn=Dn[sn];Yn[Xn.id]=[];for(var ia=0,ha=_t(Xn.id,e.edges,"target").filter(function(to){return Dn.map(function(Ni){return Ni.id}).indexOf(to)>-1});ia<ha.length;ia++){var ja=ha[ia];ja===Xn.id&&!(r===!1&&t.indexOf(Xn.id)>-1)?s.push((pn={},pn[Xn.id]=Xn,pn)):Yn[Xn.id].push(f[ja])}}return{component:Dn,adjList:Yn,minIdx:Pn}},gt=0;gt<D.length;){var Ct=D.filter(function(ir){return f[ir.id]>=gt}),Ht=ee({nodes:Ct,edges:e.edges}).filter(function(ir){return ir.length>1});if(Ht.length===0)break;var ne=ct(Ht),re=ne.minIdx,Me=ne.adjList,je=ne.component;if(je.length>1){je.forEach(function(ir){o[ir.id]=new Set});var Re=u[re];if(t&&r&&t.indexOf(Re.id)===-1)return s;d(Re,Re,Me),gt=re+1}else break}return s},fr=function(e,t,r,n){return n===void 0&&(n=!0),t?lr(e,r,n):Qe(e,r,n)},kr=qe,En=function(e,t,r){for(var n=1/0,a,o=0;o<t.length;o++){var s=t[o].id;!r[s]&&e[s]<=n&&(n=e[s],a=t[o])}return a},fn=function(e,t,r,n){var a=e.nodes,o=a===void 0?[]:a,s=e.edges,u=s===void 0?[]:s,f=[],c={},d={},A={};o.forEach(function(gt,Ct){var Ht=gt.id;f.push(Ht),d[Ht]=1/0,Ht===t&&(d[Ht]=0)});for(var D=o.length,z=function(Ct){var Ht=En(d,o,c),ne=Ht.id;if(c[ne]=!0,d[ne]===1/0)return"continue";var re=[];r?re=Xt(ne,u):re=te(ne,u),re.forEach(function(Me){var je=Me.target,Re=Me.source,ir=je===ne?Re:je,Sr=n&&Me[n]?Me[n]:1;d[ir]>d[Ht.id]+Sr?(d[ir]=d[Ht.id]+Sr,A[ir]=[Ht.id]):d[ir]===d[Ht.id]+Sr&&A[ir].push(Ht.id)})},Z=0;Z<D;Z++)z(Z);A[t]=[t];var rt={};for(var ft in d)d[ft]!==1/0&&Je(t,ft,A,rt);var ct={};for(var ft in rt)ct[ft]=rt[ft][0];return{length:d,path:ct,allPath:rt}},Vr=fn;function Je(i,e,t,r){if(i===e)return[i];if(r[e])return r[e];for(var n=[],a=0,o=t[e];a<o.length;a++){var s=o[a],u=Je(i,s,t,r);if(!u)return;for(var f=0,c=u;f<c.length;f++){var d=c[f];(0,l.isArray)(d)?n.push((0,y.__spreadArray)((0,y.__spreadArray)([],d,!0),[e],!1)):n.push([d,e])}}return r[e]=n,r[e]}var dr=function(e,t,r,n,a){var o=Vr(e,t,n,a),s=o.length,u=o.path,f=o.allPath;return{length:s[r],path:u[r],allPath:f[r]}},nr=function(e,t,r,n){var a;if(t===r)return[[t]];var o=e.edges,s=o===void 0?[]:o,u=[t],f=(a={},a[t]=!0,a),c=[],d=[],A=n?_t(t,s,"target"):_t(t,s);for(c.push(A);u.length>0&&c.length>0;){var D=c[c.length-1];if(D.length){var z=D.shift();z&&(u.push(z),f[z]=!0,A=n?_t(z,s,"target"):_t(z,s),c.push(A.filter(function(ft){return!f[ft]})))}else{var Z=u.pop();f[Z]=!1,c.pop();continue}if(u[u.length-1]===r){var rt=u.map(function(ct){return ct});d.push(rt);var Z=u.pop();f[Z]=!1,c.pop()}}return d},oe=function(e,t){for(var r=it(e,t),n=[],a=r.length,o=0;o<a;o+=1){n[o]=[];for(var s=0;s<a;s+=1)o===s?n[o][s]=0:r[o][s]===0||!r[o][s]?n[o][s]=1/0:n[o][s]=r[o][s]}for(var u=0;u<a;u+=1)for(var o=0;o<a;o+=1)for(var s=0;s<a;s+=1)n[o][s]>n[o][u]+n[u][s]&&(n[o][s]=n[o][u]+n[u][s]);return n},Te=oe,Lr=function(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e3);var a=e.nodes,o=a===void 0?[]:a,s=e.edges,u=s===void 0?[]:s,f={},c={};o.forEach(function(Ct,Ht){var ne=ue();Ct.clusterId=ne,f[ne]={id:ne,nodes:[Ct]},c[Ct.id]={node:Ct,idx:Ht}});var d=it(e,t),A=[],D={};d.forEach(function(Ct,Ht){var ne=0,re=o[Ht].id;D[re]={},Ct.forEach(function(Me,je){if(Me){ne+=Me;var Re=o[je].id;D[re][Re]=Me}}),A.push(ne)});for(var z=0,Z=function(){var Ht=!1;if(o.forEach(function(ne){var re={};Object.keys(D[ne.id]).forEach(function(Pn){var sn=D[ne.id][Pn],Jn=c[Pn].node,Kn=Jn.clusterId;re[Kn]||(re[Kn]=0),re[Kn]+=sn});var Me=-1/0,je=[];if(Object.keys(re).forEach(function(Pn){Me<re[Pn]?(Me=re[Pn],je=[Pn]):Me===re[Pn]&&je.push(Pn)}),!(je.length===1&&je[0]===ne.clusterId)){var Re=je.indexOf(ne.clusterId);if(Re>=0&&je.splice(Re,1),je&&je.length){Ht=!0;var ir=f[ne.clusterId],Sr=ir.nodes.indexOf(ne);ir.nodes.splice(Sr,1);var pn=Math.floor(Math.random()*je.length),Gn=f[je[pn]];Gn.nodes.push(ne),ne.clusterId=Gn.id}}}),!Ht)return"break";z++};z<n;){var rt=Z();if(rt==="break")break}Object.keys(f).forEach(function(Ct){var Ht=f[Ct];(!Ht.nodes||!Ht.nodes.length)&&delete f[Ct]});var ft=[],ct={};u.forEach(function(Ct){var Ht=Ct.source,ne=Ct.target,re=Ct[r]||1,Me=c[Ht].node.clusterId,je=c[ne].node.clusterId,Re="".concat(Me,"---").concat(je);if(ct[Re])ct[Re].weight+=re,ct[Re].count++;else{var ir={source:Me,target:je,weight:re,count:1};ct[Re]=ir,ft.push(ir)}});var gt=[];return Object.keys(f).forEach(function(Ct){gt.push(f[Ct])}),{clusters:gt,clusterEdges:ft}},Nr=Lr,ln=function(){function i(e){this.arr=e}return i.prototype.getArr=function(){return this.arr||[]},i.prototype.add=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new i(r);if(!(r!=null&&r.length))return new i(this.arr);if(this.arr.length===r.length){var n=[];for(var a in this.arr)n[a]=this.arr[a]+r[a];return new i(n)}},i.prototype.subtract=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new i(r);if(!(r!=null&&r.length))return new i(this.arr);if(this.arr.length===r.length){var n=[];for(var a in this.arr)n[a]=this.arr[a]-r[a];return new i(n)}},i.prototype.avg=function(e){var t=[];if(e!==0)for(var r in this.arr)t[r]=this.arr[r]/e;return new i(t)},i.prototype.negate=function(){var e=[];for(var t in this.arr)e[t]=-this.arr[t];return new i(e)},i.prototype.squareEuclideanDistance=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=Math.pow(this.arr[a]-e.arr[a],2);return n}},i.prototype.euclideanDistance=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=Math.pow(this.arr[a]-e.arr[a],2);return Math.sqrt(n)}else console.error("The two vectors are unequal in length.")},i.prototype.normalize=function(){var e=[],t=(0,l.clone)(this.arr);t.sort(function(o,s){return o-s});var r=t[t.length-1],n=t[0];for(var a in this.arr)e[a]=(this.arr[a]-n)/(r-n);return new i(e)},i.prototype.norm2=function(){var e;if(!(!((e=this.arr)===null||e===void 0)&&e.length))return 0;var t=0;for(var r in this.arr)t+=Math.pow(this.arr[r],2);return Math.sqrt(t)},i.prototype.dot=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=this.arr[a]*e.arr[a];return n}else console.error("The two vectors are unequal in length.")},i.prototype.equal=function(e){var t,r=e.arr;if(((t=this.arr)===null||t===void 0?void 0:t.length)!==(r==null?void 0:r.length))return!1;for(var n in this.arr)if(this.arr[n]!==r[n])return!1;return!0},i}(),en=ln,Dr=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/,Fr=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/,Kr=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=100);var r={};e.forEach(function(a){a.properties&&Object.keys(a.properties).forEach(function(o){if(o==="id"||!"".concat(a.properties[o]).match(Dr)&&!"".concat(a.properties[o]).match(Fr)&&isNaN(Number(a.properties[o]))){r.hasOwnProperty(o)&&delete r[o];return}r.hasOwnProperty(o)?r[o]+=1:r[o]=1})});var n=Object.keys(r).sort(function(a,o){return r[o]-r[a]});return n.length<t?n:n.slice(0,t)},an=function(e,t){return t.map(function(r){return e.hasOwnProperty(r)?e[r]:0})},yn=function(e){for(var t=Kr(e),r=[],n=0;n<e.length;n++)r[n]=an(e[n].properties,t);return r},bn=function(e,t){t===void 0&&(t=void 0);var r=[];return e.forEach(function(n){t===void 0&&r.push(n),n[t]!==void 0&&r.push(n[t])}),r},tt={getAllSortProperties:Kr,getPropertyWeight:yn,getAllProperties:bn},tr;(function(i){i.EuclideanDistance="euclideanDistance"})(tr||(tr={}));var Kt=function(e,t,r){var n=[];t!=null&&t.length?n=t:(e.forEach(function(o){n=n.concat(Object.keys(o))}),n=(0,l.uniq)(n));var a={};return n.forEach(function(o){var s=[];e.forEach(function(u){u[o]!==void 0&&u[o]!==""&&s.push(u[o])}),s.length&&!(r!=null&&r.includes(o))&&(a[o]=(0,l.uniq)(s))}),a},$t=function(e,t,r){var n=Kt(e,t,r),a=[];if(!Object.keys(n).length)return a;var o=Object.values(n),s=o.every(function(u){return u.every(function(f){return typeof f=="number"})});return e.forEach(function(u,f){var c=[];Object.keys(n).forEach(function(d){var A=u[d],D=n[d],z=D.findIndex(function(ft){return A===ft}),Z=[];if(s)Z.push(A);else for(var rt=0;rt<D.length;rt++)rt===z?Z.push(1):Z.push(0);c=c.concat(Z)}),a[f]=c}),a},Et=function(e,t,r,n){r===void 0&&(r=tr.EuclideanDistance);var a=0;switch(r){case tr.EuclideanDistance:a=new en(e).euclideanDistance(new en(t));break;default:break}return a},we={getAllKeyValueMap:Kt,oneHot:$t,getDistance:Et},Dt=function(e,t,r,n){for(var a=t.length,o=2*n,s=0,u=0;u<a;u++)for(var f=e[u].clusterId,c=0;c<a;c++){var d=e[c].clusterId;if(f===d){var A=t[u][c]||0,D=r[u]||0,z=r[c]||0;s+=A-D*z/o}}return s*=1/o,s},Vt=function(e,t){e===void 0&&(e=[]);for(var r=e.length,n=new en([]),a=0;a<r;a++)n=n.add(new en(t[a]));var o=n.avg(r);o.normalize();for(var s=0,a=0;a<r;a++){var u=new en(t[a]),f=u.squareEuclideanDistance(o);s+=f}var c=[];e.forEach(function(){c.push([])});for(var a=0;a<r;a++){var u=new en(t[a]);e[a].clusterInertial=0;for(var d=0;d<r;d++){if(a===d){c[a][d]=0;continue}var A=new en(t[d]);c[a][d]=u.squareEuclideanDistance(A),e[a].clusterInertial+=c[a][d]}}for(var D=0,z=2*r*s,a=0;a<r;a++)for(var Z=e[a].clusterId,d=0;d<r;d++){var rt=e[d].clusterId;if(!(a===d||Z!==rt)){var ft=e[a].clusterInertial*e[d].clusterInertial/Math.pow(z,2)-c[a][d]/z;D+=ft}}return Number(D.toFixed(4))},ht=function(e,t,r,n,a,o,s,u,f){t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e-4),a===void 0&&(a=!1),o===void 0&&(o=void 0),s===void 0&&(s=[]),u===void 0&&(u=["id"]),f===void 0&&(f=1);var c=e.nodes,d=c===void 0?[]:c,A=e.edges,D=A===void 0?[]:A,z=[];if(a){d.forEach(function(un,Dn){un.properties=un.properties||{},un.originIndex=Dn});var Z=[];d.every(function(un){return un.hasOwnProperty("nodeType")})&&(Z=Array.from(new Set(d.map(function(un){return un.nodeType}))),d.forEach(function(un){un.properties.nodeType=Z.findIndex(function(Dn){return Dn===un.nodeType})}));var rt=bn(d,o);z=$t(rt,s,u)}var ft=1,ct={},gt={};d.forEach(function(un,Dn){var Yn=String(ft++);un.clusterId=Yn,ct[Yn]={id:Yn,nodes:[un]},gt[un.id]={node:un,idx:Dn}});var Ct=it(e,t),Ht=[],ne={},re=0;Ct.forEach(function(un,Dn){var Yn=0,Xn=d[Dn].id;ne[Xn]={},un.forEach(function(ia,ha){if(ia){Yn+=ia;var ja=d[ha].id;ne[Xn][ja]=ia,re+=ia}}),Ht.push(Yn)}),re/=2;for(var Me=1/0,je=1/0,Re=0,ir=[],Sr={};;){a&&d.every(function(un){return un.hasOwnProperty("properties")})?Me=Dt(d,Ct,Ht,re)+Vt(d,z)*f:Me=Dt(d,Ct,Ht,re),Re===0&&(je=Me,ir=d,Sr=ct);var pn=Me>0&&Me>je&&Me-je<n;if(Me>je&&(ir=d.map(function(un){return{node:un,clusterId:un.clusterId}}),Sr=(0,l.clone)(ct),je=Me),pn||Re>100)break;Re++,Object.keys(ct).forEach(function(un){var Dn=0;D.forEach(function(Yn){var Xn=Yn.source,ia=Yn.target,ha=gt[Xn].node.clusterId,ja=gt[ia].node.clusterId;(ha===un&&ja!==un||ja===un&&ha!==un)&&(Dn=Dn+(Yn[r]||1))}),ct[un].sumTot=Dn}),d.forEach(function(un,Dn){var Yn=ct[un.clusterId],Xn=0,ia,ha=Ht[Dn]/(2*re),ja=0,oi=Yn.nodes;oi.forEach(function(Es){var ws=gt[Es.id].idx;ja+=Ct[Dn][ws]||0});var to=ja-Yn.sumTot*ha,Ni=oi.filter(function(Es){return Es.id!==un.id}),eo=[];Ni.forEach(function(Es,ws){eo[ws]=z[Es.originIndex]});var ho=Vt(Ni,z)*f,Xo=ne[un.id];if(Object.keys(Xo).forEach(function(Es){var ws=gt[Es].node,yu=ws.clusterId;if(yu!==un.clusterId){var Xs=ct[yu],tu=Xs.nodes;if(!(!tu||!tu.length)){var mi=0;tu.forEach(function(Si){var Ti=gt[Si.id].idx;mi+=Ct[Dn][Ti]||0});var Zi=mi-Xs.sumTot*ha,pi=tu.concat([un]),Ki=[];pi.forEach(function(Si,Ti){Ki[Ti]=z[Si.originIndex]});var _o=Vt(pi,z)*f,Ia=Zi-to;a&&(Ia=Zi+_o-(to+ho)),Ia>Xn&&(Xn=Ia,ia=Xs)}}}),Xn>0){ia.nodes.push(un);var Lo=un.clusterId;un.clusterId=ia.id;var Wu=Yn.nodes.indexOf(un);Yn.nodes.splice(Wu,1);var xs=0,Yu=0;D.forEach(function(Es){var ws=Es.source,yu=Es.target,Xs=gt[ws].node.clusterId,tu=gt[yu].node.clusterId;(Xs===ia.id&&tu!==ia.id||tu===ia.id&&Xs!==ia.id)&&(xs=xs+(Es[r]||1)),(Xs===Lo&&tu!==Lo||tu===Lo&&Xs!==Lo)&&(Yu=Yu+(Es[r]||1))}),ia.sumTot=xs,Yn.sumTot=Yu}})}var Gn={},Pn=0;Object.keys(Sr).forEach(function(un){var Dn=Sr[un];if(!Dn.nodes||!Dn.nodes.length){delete Sr[un];return}var Yn=String(Pn+1);Yn!==un&&(Dn.id=Yn,Dn.nodes=Dn.nodes.map(function(Xn){return{id:Xn.id,clusterId:Yn}}),Sr[Yn]=Dn,Gn[un]=Yn,delete Sr[un],Pn++)}),ir.forEach(function(un){var Dn=un.node,Yn=un.clusterId;Dn&&(Dn.clusterId=Yn,Dn.clusterId&&Gn[Dn.clusterId]&&(Dn.clusterId=Gn[Dn.clusterId]))});var sn=[],Jn={};D.forEach(function(un){var Dn=un.source,Yn=un.target,Xn=un[r]||1,ia=gt[Dn].node.clusterId,ha=gt[Yn].node.clusterId;if(!(!ia||!ha)){var ja="".concat(ia,"---").concat(ha);if(Jn[ja])Jn[ja].weight+=Xn,Jn[ja].count++;else{var oi={source:ia,target:ha,weight:Xn,count:1};Jn[ja]=oi,sn.push(oi)}}});var Kn=[];return Object.keys(Sr).forEach(function(un){Kn.push(Sr[un])}),{clusters:Kn,clusterEdges:sn}},kt=ht,Q=function(e,t,r,n,a,o,s,u){return t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e-4),a===void 0&&(a=void 0),o===void 0&&(o=[]),s===void 0&&(s=["id"]),u===void 0&&(u=1),kt(e,t,r,n,!0,a,o,s,u)},at=Q,B=function(e,t){var r;t===void 0&&(t=1);for(var n=(0,l.clone)(e),a=n.nodes,o=a===void 0?[]:a,s=n.edges,u=s===void 0?[]:s,f=function(){var A=be({nodes:o,edges:u}),D=Object.keys(A);D.sort(function(rt,ft){var ct,gt;return((ct=A[rt])===null||ct===void 0?void 0:ct.degree)-((gt=A[ft])===null||gt===void 0?void 0:gt.degree)});var z=D[0];if(!o.length||((r=A[z])===null||r===void 0?void 0:r.degree)>=t)return"break";var Z=o.findIndex(function(rt){return rt.id===z});o.splice(Z,1),u=u.filter(function(rt){return!(rt.source===z||rt.target===z)})};;){var c=f();if(c==="break")break}return{nodes:o,edges:u}},C=B,I=function(e,t,r){var n=[];switch(e){case tr.EuclideanDistance:n=t[r];break;default:n=[];break}return n},H=function(e,t,r,n,a,o){t===void 0&&(t=3),r===void 0&&(r=void 0),n===void 0&&(n=[]),a===void 0&&(a=["id"]),o===void 0&&(o=tr.EuclideanDistance);var s=e.nodes,u=s===void 0?[]:s,f=e.edges,c=f===void 0?[]:f,d={clusters:[{id:"0",nodes:u}],clusterEdges:[]};if(o===tr.EuclideanDistance&&!u.every(function(Yn){return Yn.hasOwnProperty(r)}))return d;var A=[],D=[];if(o===tr.EuclideanDistance&&(A=bn(u,r),D=$t(A,n,a)),!D.length)return d;for(var z=(0,l.uniq)(D.map(function(Yn){return Yn.join("")})),Z=Math.min(t,u.length,z.length),rt=0;rt<u.length;rt++)u[rt].originIndex=rt;for(var ft=[],ct=[],gt=[],rt=0;rt<Z;rt++)if(rt===0){var Ct=Math.floor(Math.random()*u.length);switch(o){case tr.EuclideanDistance:ft[rt]=D[Ct];break;default:ft[rt]=[];break}ct.push(Ct),gt[rt]=[u[Ct]],u[Ct].clusterId=String(rt)}else{for(var Ht=-1/0,ne=0,re=function(ia){if(!ct.includes(ia)){for(var ha=0,ja=0;ja<ft.length;ja++){var oi=0;switch(o){case tr.EuclideanDistance:oi=Et(D[u[ia].originIndex],ft[ja],o);break;default:break}ha+=oi}var to=ha/ft.length;to>Ht&&!ft.find(function(Ni){return(0,l.isEqual)(Ni,I(o,D,u[ia].originIndex))})&&(Ht=to,ne=ia)}},Me=0;Me<u.length;Me++)re(Me);ft[rt]=I(o,D,ne),ct.push(ne),gt[rt]=[u[ne]],u[ne].clusterId=String(rt)}for(var je=0;;){for(var rt=0;rt<u.length;rt++){var Re=0,ir=1/0;if(!(je===0&&ct.includes(rt))){for(var Sr=0;Sr<ft.length;Sr++){var pn=0;switch(o){case tr.EuclideanDistance:pn=Et(D[rt],ft[Sr],o);break;default:break}pn<ir&&(ir=pn,Re=Sr)}if(u[rt].clusterId!==void 0)for(var Gn=gt[Number(u[rt].clusterId)].length-1;Gn>=0;Gn--)gt[Number(u[rt].clusterId)][Gn].id===u[rt].id&&gt[Number(u[rt].clusterId)].splice(Gn,1);u[rt].clusterId=String(Re),gt[Re].push(u[rt])}}for(var Pn=!1,rt=0;rt<gt.length;rt++){for(var sn=gt[rt],Jn=new en([]),Sr=0;Sr<sn.length;Sr++)Jn=Jn.add(new en(D[sn[Sr].originIndex]));var Kn=Jn.avg(sn.length);Kn.equal(new en(ft[rt]))||(Pn=!0,ft[rt]=Kn.getArr())}if(je++,u.every(function(Yn){return Yn.clusterId!==void 0})&&Pn||je>=1e3)break}var un=[],Dn={};return c.forEach(function(Yn){var Xn,ia,ha=Yn.source,ja=Yn.target,oi=(Xn=u.find(function(ho){return ho.id===ha}))===null||Xn===void 0?void 0:Xn.clusterId,to=(ia=u.find(function(ho){return ho.id===ja}))===null||ia===void 0?void 0:ia.clusterId,Ni="".concat(oi,"---").concat(to);if(Dn[Ni])Dn[Ni].count++;else{var eo={source:oi,target:to,count:1};Dn[Ni]=eo,un.push(eo)}}),{clusters:gt,clusterEdges:un}},mt=H,Pt=function(e,t){var r=new en(t),n=r.norm2(),a=new en(e),o=a.norm2(),s=r.dot(a),u=n*o,f=u?s/u:0;return f},Lt=Pt,Jt=function(e,t,r,n,a){e===void 0&&(e=[]),r===void 0&&(r=void 0),n===void 0&&(n=[]),a===void 0&&(a=[]);var o=(0,l.clone)(e.filter(function(A){return A.id!==t.id})),s=e.findIndex(function(A){return A.id===t.id}),u=bn(e,r),f=$t(u,n,a),c=f[s],d=[];return o.forEach(function(A,D){if(A.id!==t.id){var z=f[D],Z=Lt(z,c);d.push(Z),A.cosineSimilarity=Z}}),o.sort(function(A,D){return D.cosineSimilarity-A.cosineSimilarity}),{allCosineSimilarity:d,similarNodes:o}},Oe=Jt,ye=function(){function i(e){this.count=e.length,this.parent={};for(var t=0,r=e;t<r.length;t++){var n=r[t];this.parent[n]=n}}return i.prototype.find=function(e){for(;this.parent[e]!==e;)e=this.parent[e];return e},i.prototype.union=function(e,t){var r=this.find(e),n=this.find(t);r!==n&&(r<n?(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]):(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]))},i.prototype.connected=function(e,t){return this.find(e)===this.find(t)},i}(),Ze=ye,wr=function(e,t){return e-t},er=function(){function i(e){e===void 0&&(e=wr),this.compareFn=e,this.list=[]}return i.prototype.getLeft=function(e){return 2*e+1},i.prototype.getRight=function(e){return 2*e+2},i.prototype.getParent=function(e){return e===0?null:Math.floor((e-1)/2)},i.prototype.isEmpty=function(){return this.list.length<=0},i.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},i.prototype.delMin=function(){var e=this.top(),t=this.list.pop();return this.list.length>0&&(this.list[0]=t,this.moveDown(0)),e},i.prototype.insert=function(e){if(e!==null){this.list.push(e);var t=this.list.length-1;return this.moveUp(t),!0}return!1},i.prototype.moveUp=function(e){for(var t=this.getParent(e);e&&e>0&&this.compareFn(this.list[t],this.list[e])>0;){var r=this.list[t];this.list[t]=this.list[e],this.list[e]=r,e=t,t=this.getParent(e)}},i.prototype.moveDown=function(e){var t,r=e,n=this.getLeft(e),a=this.getRight(e),o=this.list.length;n!==null&&n<o&&this.compareFn(this.list[r],this.list[n])>0?r=n:a!==null&&a<o&&this.compareFn(this.list[r],this.list[a])>0&&(r=a),e!==r&&(t=[this.list[r],this.list[e]],this.list[e]=t[0],this.list[r]=t[1],this.moveDown(r))},i}(),Ur=er,xn=function(e,t){var r=[],n=e.nodes,a=n===void 0?[]:n,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return r;var u=a[0],f=new Set;f.add(u);var c=function(rt,ft){return t?rt.weight-ft.weight:0},d=new Ur(c);for(te(u.id,s).forEach(function(Z){d.insert(Z)});!d.isEmpty();){var A=d.delMin(),D=A.source,z=A.target;f.has(D)&&f.has(z)||(r.push(A),f.has(D)||(f.add(D),te(D,s).forEach(function(Z){d.insert(Z)})),f.has(z)||(f.add(z),te(z,s).forEach(function(Z){d.insert(Z)})))}return r},rr=function(e,t){var r=[],n=e.nodes,a=n===void 0?[]:n,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return r;var u=s.map(function(D){return D});t&&u.sort(function(D,z){return D.weight-z.weight});for(var f=new Ze(a.map(function(D){return D.id}));u.length>0;){var c=u.shift(),d=c.source,A=c.target;f.connected(d,A)||(r.push(c),f.union(d,A))}return r},xr=function(e,t,r){var n={prim:xn,kruskal:rr};return r?n[r](e,t):rr(e,t)},Wr=xr,Gr=function(e,t,r){typeof t!="number"&&(t=1e-6),typeof r!="number"&&(r=.85);for(var n=1,a=0,o=1e3,s=e.nodes,u=s===void 0?[]:s,f=e.edges,c=f===void 0?[]:f,d=u.length,A,D={},z={},Z=0;Z<d;++Z){var rt=u[Z],ft=rt.id;D[ft]=1/d,z[ft]=1/d}for(var ct=be(e);o>0&&n>t;){a=0;for(var Z=0;Z<d;++Z){var rt=u[Z],ft=rt.id;if(A=0,ct[rt.id].inDegree===0)D[ft]=0;else{for(var gt=_t(ft,c,"source"),Ct=0;Ct<gt.length;++Ct){var Ht=gt[Ct],ne=ct[Ht].outDegree;ne>0&&(A+=z[Ht]/ne)}D[ft]=r*A,a+=D[ft]}}a=(1-a)/d,n=0;for(var Z=0;Z<d;++Z){var rt=u[Z],ft=rt.id;A=D[ft]+a,n+=Math.abs(A-z[ft]),z[ft]=A}o-=1}return z},ce=Gr,Yt=-1,ge=-1,Ie="-1",xe="-1",Ye=-1,gr="-1",Mr=function(){function i(e,t,r,n){e===void 0&&(e=Yt),t===void 0&&(t=ge),r===void 0&&(r=ge),n===void 0&&(n=Ie),this.id=e,this.from=t,this.to=r,this.label=n}return i}(),vn=function(){function i(e,t){e===void 0&&(e=ge),t===void 0&&(t=xe),this.id=e,this.label=t,this.edges=[],this.edgeMap={}}return i.prototype.addEdge=function(e){this.edges.push(e),this.edgeMap[e.id]=e},i}(),Wn=function(){function i(e,t,r){e===void 0&&(e=ge),t===void 0&&(t=!0),r===void 0&&(r=!1),this.id=e,this.edgeIdAutoIncrease=t,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=r}return i.prototype.getNodeNum=function(){return this.nodes.length},i.prototype.addNode=function(e,t){if(!this.nodeMap[e]){var r=new vn(e,t);this.nodes.push(r),this.nodeMap[e]=r,this.nodeLabelMap[t]||(this.nodeLabelMap[t]=[]),this.nodeLabelMap[t].push(e)}},i.prototype.addEdge=function(e,t,r,n){if((this.edgeIdAutoIncrease||e===void 0)&&(e=this.counter++),!(this.nodeMap[t]&&this.nodeMap[r]&&this.nodeMap[r].edgeMap[e])){var a=new Mr(e,t,r,n);if(this.edges.push(a),this.edgeMap[e]=a,this.nodeMap[t].addEdge(a),this.edgeLabelMap[n]||(this.edgeLabelMap[n]=[]),this.edgeLabelMap[n].push(a),!this.directed){var o=new Mr(e,r,t,n);this.nodeMap[r].addEdge(o),this.edgeLabelMap[n].push(o)}}},i}(),Sn=function(){function i(e,t,r,n,a){this.fromNode=e,this.toNode=t,this.nodeEdgeNodeLabel={nodeLabel1:r||xe,edgeLabel:n||Ie,nodeLabel2:a||xe}}return i.prototype.equalTo=function(e){return this.fromNode===e.formNode&&this.toNode===e.toNode&&this.nodeEdgeNodeLabel===e.nodeEdgeNodeLabel},i.prototype.notEqualTo=function(e){return!this.equalTo(e)},i}(),ea=function(){function i(){this.rmpath=[],this.dfsEdgeList=[]}return i.prototype.equalTo=function(e){var t=this.dfsEdgeList.length,r=e.length;if(t!==r)return!1;for(var n=0;n<t;n++)if(this.dfsEdgeList[n]!==e[n])return!1;return!0},i.prototype.notEqualTo=function(e){return!this.equalTo(e)},i.prototype.pushBack=function(e,t,r,n,a){return this.dfsEdgeList.push(new Sn(e,t,r,n,a)),this.dfsEdgeList},i.prototype.toGraph=function(e,t){e===void 0&&(e=Ye),t===void 0&&(t=!1);var r=new Wn(e,!0,t);return this.dfsEdgeList.forEach(function(n){var a=n.fromNode,o=n.toNode,s=n.nodeEdgeNodeLabel,u=s.nodeLabel1,f=s.edgeLabel,c=s.nodeLabel2;u!==xe&&r.addNode(a,u),c!==xe&&r.addNode(o,c),u!==xe&&c!==u&&r.addEdge(void 0,a,o,f)}),r},i.prototype.buildRmpath=function(){this.rmpath=[];for(var e=void 0,t=this.dfsEdgeList.length,r=t-1;r>=0;r--){var n=this.dfsEdgeList[r],a=n.fromNode,o=n.toNode;a<o&&(e===void 0||o===e)&&(this.rmpath.push(r),e=a)}return this.rmpath},i.prototype.getNodeNum=function(){var e={};return this.dfsEdgeList.forEach(function(t){e[t.fromNode]||(e[t.fromNode]=!0),e[t.toNode]||(e[t.toNode]=!0)}),Object.keys(e).length},i}(),wn=function(){function i(e){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!e){for(;e;){var t=e.edge;this.edges.push(t),this.nodesUsed[t.from]=1,this.nodesUsed[t.to]=1,this.edgesUsed[t.id]=1,e=e.preNode}this.edges=this.edges.reverse()}}return i.prototype.hasNode=function(e){return this.nodesUsed[e.id]===1},i.prototype.hasEdge=function(e){return this.edgesUsed[e.id]===1},i}(),Hn=function(){function i(e){var t=e.graphs,r=e.minSupport,n=r===void 0?2:r,a=e.minNodeNum,o=a===void 0?1:a,s=e.maxNodeNum,u=s===void 0?4:s,f=e.top,c=f===void 0?10:f,d=e.directed,A=d===void 0?!1:d,D=e.verbose,z=D===void 0?!1:D;this.graphs=t,this.dfsCode=new ea,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=n,this.top=c,this.directed=A,this.counter=0,this.maxNodeNum=u,this.minNodeNum=o,this.verbose=z,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return i.prototype.findForwardRootEdges=function(e,t){var r=this,n=[],a=e.nodeMap;return t.edges.forEach(function(o){(r.directed||t.label<=a[o.to].label)&&n.push(o)}),n},i.prototype.findBackwardEdge=function(e,t,r,n){if(!this.directed&&t===r)return null;for(var a=e.nodeMap,o=a[r.to],s=o.edges,u=s.length,f=0;f<u;f++){var c=s[f];if(!(n.hasEdge(c)||c.to!==t.from)){if(this.directed){if(a[t.from].label<a[r.to].label||a[t.from].label===a[r.to].label&&t.label<=c.label)return c}else if(t.label<c.label||t.label===c.label&&a[t.to].label<=a[r.to].label)return c}}return null},i.prototype.findForwardPureEdges=function(e,t,r,n){for(var a=[],o=t.to,s=e.nodeMap[o].edges,u=s.length,f=0;f<u;f++){var c=s[f],d=e.nodeMap[c.to];r<=d.label&&!n.hasNode(d)&&a.push(c)}return a},i.prototype.findForwardRmpathEdges=function(e,t,r,n){for(var a=[],o=e.nodeMap,s=o[t.to].label,u=o[t.from],f=u.edges,c=f.length,d=0;d<c;d++){var A=f[d],D=o[A.to].label;t.to===A.to||r>D||n.hasNode(o[A.to])||(t.label<A.label||t.label===A.label&&s<=D)&&a.push(A)}return a},i.prototype.getSupport=function(e){var t={};return e.forEach(function(r){t[r.graphId]||(t[r.graphId]=!0)}),Object.keys(t).length},i.prototype.findMinLabel=function(e){var t=void 0;return Object.keys(e).forEach(function(r){var n=e[r],a=n.nodeLabel1,o=n.edgeLabel,s=n.nodeLabel2;if(!t){t={nodeLabel1:a,edgeLabel:o,nodeLabel2:s};return}(a<t.nodeLabel1||a===t.nodeLabel1&&o<t.edgeLabel||a===t.nodeLabel1&&o===t.edgeLabel&&s<t.nodeLabel2)&&(t={nodeLabel1:a,edgeLabel:o,nodeLabel2:s})}),t},i.prototype.isMin=function(){var e=this,t=this.dfsCode;if(this.verbose&&console.log("isMin checking",t),t.dfsEdgeList.length===1)return!0;var r=this.directed,n=t.toGraph(Ye,r),a=n.nodeMap,o=new ea,s={};n.nodes.forEach(function(d){var A=e.findForwardRootEdges(n,d);A.forEach(function(D){var z=a[D.to],Z="".concat(d.label,"-").concat(D.label,"-").concat(z.label);s[Z]||(s[Z]={projected:[],nodeLabel1:d.label,edgeLabel:D.label,nodeLabel2:z.label});var rt={graphId:n.id,edge:D,preNode:null};s[Z].projected.push(rt)})});var u=this.findMinLabel(s);if(u){o.dfsEdgeList.push(new Sn(0,1,u.nodeLabel1,u.edgeLabel,u.nodeLabel2));var f=function d(A){for(var D=o.buildRmpath(),z=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,Z=o.dfsEdgeList[D[0]].toNode,rt={},ft=!1,ct=0,gt=r?-1:0,Ct=function(Jn){if(ft)return"break";A.forEach(function(Kn){var un=new wn(Kn),Dn=e.findBackwardEdge(n,un.edges[D[Jn]],un.edges[D[0]],un);Dn&&(rt[Dn.label]||(rt[Dn.label]={projected:[],edgeLabel:Dn.label}),rt[Dn.label].projected.push({graphId:n.id,edge:rt,preNode:Kn}),ct=o.dfsEdgeList[D[Jn]].fromNode,ft=!0)})},Ht=D.length-1;Ht>gt;Ht--){var ne=Ct(Ht);if(ne==="break")break}if(ft){var re=e.findMinLabel(rt);o.dfsEdgeList.push(new Sn(Z,ct,xe,re.edgeLabel,xe));var Me=o.dfsEdgeList.length-1;return e.dfsCode.dfsEdgeList[Me]!==o.dfsEdgeList[Me]?!1:d(rt[re.edgeLabel].projected)}var je={};ft=!1;var Re=0;A.forEach(function(sn){var Jn=new wn(sn),Kn=e.findForwardPureEdges(n,Jn.edges[D[0]],z,Jn);Kn.length>0&&(ft=!0,Re=Z,Kn.forEach(function(un){var Dn="".concat(un.label,"-").concat(a[un.to].label);je[Dn]||(je[Dn]={projected:[],edgeLabel:un.label,nodeLabel2:a[un.to].label}),je[Dn].projected.push({graphId:n.id,edge:un,preNode:sn})}))});for(var ir=D.length,Sr=function(Jn){if(ft)return"break";var Kn=D[Jn];A.forEach(function(un){var Dn=new wn(un),Yn=e.findForwardRmpathEdges(n,Dn.edges[Kn],z,Dn);Yn.length>0&&(ft=!0,Re=o.dfsEdgeList[Kn].fromNode,Yn.forEach(function(Xn){var ia="".concat(Xn.label,"-").concat(a[Xn.to].label);je[ia]||(je[ia]={projected:[],edgeLabel:Xn.label,nodeLabel2:a[Xn.to].label}),je[ia].projected.push({graphId:n.id,edge:Xn,preNode:un})}))})},Ht=0;Ht<ir;Ht++){var pn=Sr(Ht);if(pn==="break")break}if(!ft)return!0;var Gn=e.findMinLabel(je);o.dfsEdgeList.push(new Sn(Re,Z+1,xe,Gn.edgeLabel,Gn.nodeLabel2));var Pn=o.dfsEdgeList.length-1;return t.dfsEdgeList[Pn]!==o.dfsEdgeList[Pn]?!1:d(je["".concat(Gn.edgeLabel,"-").concat(Gn.nodeLabel2)].projected)},c="".concat(u.nodeLabel1,"-").concat(u.edgeLabel,"-").concat(u.nodeLabel2);return f(s[c].projected)}},i.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var e=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,l.clone)(e))}},i.prototype.subGraphMining=function(e){var t=this,r=this.getSupport(e);if(!(r<this.minSupport)&&this.isMin()){this.report();var n=this.dfsCode.getNodeNum(),a=this.dfsCode.buildRmpath(),o=this.dfsCode.dfsEdgeList[a[0]].toNode,s=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,u={},f={};e.forEach(function(c){for(var d=t.graphs[c.graphId],A=d.nodeMap,D=new wn(c),z=a.length-1;z>=0;z--){var Z=t.findBackwardEdge(d,D.edges[a[z]],D.edges[a[0]],D);if(Z){var rt="".concat(t.dfsCode.dfsEdgeList[a[z]].fromNode,"-").concat(Z.label);f[rt]||(f[rt]={projected:[],toNodeId:t.dfsCode.dfsEdgeList[a[z]].fromNode,edgeLabel:Z.label}),f[rt].projected.push({graphId:c.graphId,edge:Z,preNode:c})}}if(!(n>=t.maxNodeNum)){var ft=t.findForwardPureEdges(d,D.edges[a[0]],s,D);ft.forEach(function(gt){var Ct="".concat(o,"-").concat(gt.label,"-").concat(A[gt.to].label);u[Ct]||(u[Ct]={projected:[],fromNodeId:o,edgeLabel:gt.label,nodeLabel2:A[gt.to].label}),u[Ct].projected.push({graphId:c.graphId,edge:gt,preNode:c})});for(var ct=function(Ct){var Ht=t.findForwardRmpathEdges(d,D.edges[a[Ct]],s,D);Ht.forEach(function(ne){var re="".concat(t.dfsCode.dfsEdgeList[a[Ct]].fromNode,"-").concat(ne.label,"-").concat(A[ne.to].label);u[re]||(u[re]={projected:[],fromNodeId:t.dfsCode.dfsEdgeList[a[Ct]].fromNode,edgeLabel:ne.label,nodeLabel2:A[ne.to].label}),u[re].projected.push({graphId:c.graphId,edge:ne,preNode:c})})},z=0;z<a.length;z++)ct(z)}}),Object.keys(f).forEach(function(c){var d=f[c],A=d.toNodeId,D=d.edgeLabel;t.dfsCode.dfsEdgeList.push(new Sn(o,A,"-1",D,"-1")),t.subGraphMining(f[c].projected),t.dfsCode.dfsEdgeList.pop()}),Object.keys(u).forEach(function(c){var d=u[c],A=d.fromNodeId,D=d.edgeLabel,z=d.nodeLabel2;t.dfsCode.dfsEdgeList.push(new Sn(A,o+1,xe,D,z)),t.subGraphMining(u[c].projected),t.dfsCode.dfsEdgeList.pop()})}},i.prototype.generate1EdgeFrequentSubGraphs=function(){var e=this.graphs,t=this.directed,r=this.minSupport,n=this.frequentSize1Subgraphs,a={},o={},s={},u={};return Object.keys(e).forEach(function(f){var c=e[f],d=c.nodeMap;c.nodes.forEach(function(A,D){var z=A.label,Z="".concat(f,"-").concat(z);if(!s[Z]){var rt=a[z]||0;rt++,a[z]=rt}s[Z]={graphKey:f,label:z},A.edges.forEach(function(ft){var ct=z,gt=d[ft.to].label;if(!t&&ct>gt){var Ct=gt;gt=ct,ct=Ct}var Ht=ft.label,ne="".concat(f,"-").concat(ct,"-").concat(Ht,"-").concat(gt),re="".concat(ct,"-").concat(Ht,"-").concat(gt);if(!o[re]){var Me=o[re]||0;Me++,o[re]=Me}u[ne]={graphId:f,nodeLabel1:ct,edgeLabel:Ht,nodeLabel2:gt}})})}),Object.keys(a).forEach(function(f){var c=a[f];if(!(c<r)){var d={nodes:[],edges:[]};d.nodes.push({id:"0",label:f}),n.push(d)}}),n},i.prototype.run=function(){var e=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var t=this.graphs,r=this.directed,n={};Object.keys(t).forEach(function(a){var o=t[a],s=o.nodeMap;o.nodes.forEach(function(u){var f=e.findForwardRootEdges(o,u);f.forEach(function(c){var d=s[c.to],A="".concat(u.label,"-").concat(c.label,"-").concat(d.label);n[A]||(n[A]={projected:[],nodeLabel1:u.label,edgeLabel:c.label,nodeLabel2:d.label});var D={graphId:a,edge:c,preNode:null};n[A].projected.push(D)})})}),Object.keys(n).forEach(function(a){var o=n[a],s=o.projected,u=o.nodeLabel1,f=o.edgeLabel,c=o.nodeLabel2;e.dfsCode.dfsEdgeList.push(new Sn(0,1,u,f,c)),e.subGraphMining(s),e.dfsCode.dfsEdgeList.pop()})}},i}(),la=function(e,t,r,n){var a={};return Object.keys(e).forEach(function(o,s){var u=e[o],f=new Wn(s,!0,t),c={};u.nodes.forEach(function(d,A){f.addNode(A,d[r]),c[d.id]=A}),u.edges.forEach(function(d,A){var D=c[d.source],z=c[d.target];f.addEdge(-1,D,z,d[n])}),f&&f.getNodeNum()&&(a[f.id]=f)}),a},ba=function(e,t,r){var n=[];return e.forEach(function(a){var o={nodes:[],edges:[]};a.nodes.forEach(function(s){var u;o.nodes.push((u={id:"".concat(s.id)},u[t]=s.label,u))}),a.edges.forEach(function(s){var u;o.edges.push((u={source:"".concat(s.from),target:"".concat(s.to)},u[r]=s.label,u))}),n.push(o)}),n},xa="cluster",Yi=function(e){var t=e.graphs,r=e.directed,n=r===void 0?!1:r,a=e.nodeLabelProp,o=a===void 0?xa:a,s=e.edgeLabelProp,u=s===void 0?xa:s,f=la(t,n,o,u),c=e.minSupport,d=e.maxNodeNum,A=e.minNodeNum,D=e.verbose,z=e.top,Z={graphs:f,minSupport:c,maxNodeNum:d,minNodeNum:A,top:z,verbose:D,directed:n},rt=new Hn(Z);rt.run();var ft=ba(rt.frequentSubgraphs,o,u);return ft},ri=Yi,ti=function(e,t,r,n){r===void 0&&(r="cluster"),n===void 0&&(n=2);var a=[],o=e.nodes;return t.forEach(function(s,u){a.push(Mi(o,s,u,r,n))}),a},Mi=function(e,t,r,n,a){var o=[r],s=[],u={};return t.forEach(function(f,c){if(f<=a&&r!==c){o.push(c),s.push(e[c]);var d=e[c][n];u[d]?(u[d].count++,u[d].dists.push(f)):u[d]={count:1,dists:[f]}}}),Object.keys(u).forEach(function(f){u[f].dists=u[f].dists.sort(function(c,d){return c-d})}),{nodeIdx:r,nodeId:e[r].id,nodeIdxs:o,neighbors:s,neighborNum:o.length-1,nodeLabelCountMap:u}},Vi=function(e,t,r,n,a){var o=Math.ceil(r/t),s={},u=0;return n.forEach(function(f,c){for(var d=0,A=0,D=f.nodeIdxs,z=f.neighborNum-1;d<o;){for(var Z=D[1+Math.floor(Math.random()*z)],rt=0;(s["".concat(c,"-").concat(Z)]||s["".concat(Z,"-").concat(c)])&&(Z=Math.floor(Math.random()*t),rt++,!(rt>2*t)););if(rt<2*t&&(s["".concat(c,"-").concat(Z)]={start:c,end:Z,distance:a[c][Z]},d++,u++,u>=r))return s;if(A++,A>2*t)break}if(d<o){var ft=o-d;o=(o+ft)/(t-c-1)}}),s},ao=function(e,t,r,n){var a=r.nodes;return n||(n={}),Object.keys(e).forEach(function(o){var s,u;if(!(n&&n[o])){n[o]={nodes:[],edges:[]};var f=e[o],c=(s=t[f.start])===null||s===void 0?void 0:s.nodeIdxs,d=(u=t[f.end])===null||u===void 0?void 0:u.nodeIdxs;if(!(!c||!d)){var A=new Set(d),D=c.filter(function(ct){return A.has(ct)});if(!(!D||!D.length)){for(var z={},Z=D.length,rt=0;rt<Z;rt++){var ft=a[D[rt]];n[o].nodes.push(ft),z[ft.id]=!0}r.edges.forEach(function(ct){z[ct.source]&&z[ct.target]&&n[o].edges.push(ct)})}}}}),n},io=function(e,t,r,n){var a,o,s={};e.nodes.forEach(function(f){s[f.id]=f});var u=0;return!(!((a=t==null?void 0:t.edges)===null||a===void 0)&&a.length)||((o=t==null?void 0:t.nodes)===null||o===void 0?void 0:o.length)<2?0:(e.edges.forEach(function(f){var c=s[f.source][r],d=s[f.target][r],A=t==null?void 0:t.nodes[0][r],D=t==null?void 0:t.nodes[1][r],z=t==null?void 0:t.edges[0][n];f[n]===z&&(c===A&&d===D||c===D&&d===A)&&u++}),u)},wa=function(e,t,r){for(var n=1/0,a=0,o=function(f){var c=e[f],d=Object.keys(c).sort(function(ct,gt){return c[ct]-c[gt]}),A=10,D=[];d.forEach(function(ct,gt){D[gt%A]||(D[gt%A]={graphs:[],totalCount:0,aveCount:0}),D[gt%A].graphs.push(ct),D[gt%A].totalCount+=c[ct]});var z=0,Z=[];D.forEach(function(ct){var gt=ct.totalCount/ct.graphs.length;ct.aveCount=gt,Z.push(gt);var Ct=0,Ht=ct.length;ct.graphs.forEach(function(ne,re){var Me=c[ne];ct.graphs.forEach(function(je,Re){re!==Re&&(Ct+=Math.abs(Me-c[je]))})}),Ct/=Ht*(Ht-1)/2,z+=Ct}),z/=D.length;var rt=0;Z.forEach(function(ct,gt){Z.forEach(function(Ct,Ht){gt!==Ht&&(rt+=Math.abs(ct-Ct))}),rt/=Z.length*(Z.length-1)/2});var ft=rt-z;n<ft&&(n=ft,a=f)},s=0;s<t;s++)o(s);return{structure:r[a],structureCountMap:e[a]}},oo=function(e,t){var r={},n={};return e.forEach(function(a,o){r[a.id]={idx:o,node:a,degree:0,inDegree:0,outDegree:0};var s=a[t];n[s]||(n[s]=[]),n[s].push(a)}),{nodeMap:r,nodeLabelMap:n}},To=function(e,t,r){var n={},a={};return e.forEach(function(o,s){n["".concat(ue)]={idx:s,edge:o};var u=o[t];a[u]||(a[u]=[]),a[u].push(o);var f=r[o.source];f&&(f.degree++,f.outDegree++);var c=r[o.target];c&&(c.degree++,c.inDegree++)}),{edgeMap:n,edgeLabelMap:a}},ii=function(e,t,r){var n=t.length,a={};return t.forEach(function(o,s){for(var u=r?0:s+1,f=e[s].id,c=u;c<n;c++)if(s!==c){var d=e[c].id,A=o[c];a["".concat(f,"-").concat(d)]=A,r||(a["".concat(d,"-").concat(f)]=A)}}),a},Xi=function(e,t,r,n,a,o,s,u,f,c,d){var A,D="".concat(t.id,"-").concat(r.id);if(c&&c[D])return c[D];var z=d?d[D]:void 0;if(!z){var Z=(A={},A[D]={start:n[t.id].idx,end:n[r.id].idx,distance:a},A);d=ao(Z,o,e,d),z=d[D]}return io(z,s,u,f)},so=function(e,t,r,n){var a,o,s,u=(a=e[t])===null||a===void 0?void 0:a.degree,f=(o=e[t])===null||o===void 0?void 0:o.inDegree,c=(s=e[t])===null||s===void 0?void 0:s.outDegree;return e[t]===void 0&&(u=1/0,f=1/0,c=1/0,n[t].forEach(function(d){var A=r[d.id].degree;u>A&&(u=A);var D=r[d.id].inDegree;f>D&&(f=D);var z=r[d.id].outDegree;c>z&&(c=z)}),e[t]={degree:u,inDegree:f,outDegree:c}),{minPatternNodeLabelDegree:u,minPatternNodeLabelInDegree:f,minPatternNodeLabelOutDegree:c}},zo=function(e,t,r,n,a,o,s){var u;if(r===void 0&&(r=!1),o===void 0&&(o="cluster"),s===void 0&&(s="cluster"),!(!e||!e.nodes)){var f=e.nodes.length;if(f){var c=Te(e,r),d=Te(t,r),A=ii(e.nodes,c,r),D=ii(t.nodes,d,r),z=oo(e.nodes,o),Z=z.nodeMap,rt=z.nodeLabelMap,ft=oo(t.nodes,o),ct=ft.nodeMap,gt=ft.nodeLabelMap;To(e.edges,s,Z);var Ct=To(t.edges,s,ct).edgeLabelMap,Ht=[];d==null||d.forEach(function(mi){Ht=Ht.concat(mi)}),a||(a=Math.max.apply(Math,(0,y.__spreadArray)((0,y.__spreadArray)([],Ht,!1),[2],!1))),n||(n=a);var ne=ti(e,c,o,n),re=ti(t,d,o,n),Me=Math.min(100,f*(f-1)/2),je=Vi(n,f,Me,ne,c),Re=ao(je,ne,e),ir=10,Sr=1,pn=1,Gn=4,Pn={graphs:Re,nodeLabelProp:o,edgeLabelProp:s,minSupport:Sr,minNodeNum:pn,maxNodeNum:Gn,directed:r},sn=ri(Pn).slice(0,ir),Jn=sn.length,Kn=[];sn.forEach(function(mi,Zi){Kn[Zi]={},Object.keys(Re).forEach(function(pi){var Ki=Re[pi],_o=io(Ki,mi,o,s);Kn[Zi][pi]=_o})});var un=wa(Kn,Jn,sn),Dn=un.structure,Yn=un.structureCountMap,Xn=t.nodes[0],ia=[],ha=(u=t.nodes[0])===null||u===void 0?void 0:u[o],ja=-1/0;t.nodes.forEach(function(mi){var Zi=mi[o],pi=rt[Zi];(pi==null?void 0:pi.length)>ja&&(ja=pi.length,ia=pi,ha=Zi,Xn=mi)});var oi={},to={},Ni={},eo={},ho={},Xo={};Object.keys(gt).forEach(function(mi,Zi){ho[mi]=[],r&&(Xo[mi]=[]);var pi=-1/0,Ki=gt[mi],_o={};Ki.forEach(function(Oi){var Wi=D["".concat(Xn.id,"-").concat(Oi.id)];if(Wi&&ho[mi].push(Wi),pi<Wi&&(pi=Wi),_o["".concat(Xn.id,"-").concat(Oi.id)]={start:0,end:ct[Oi.id].idx,distance:Wi},r){var ts=D["".concat(Oi.id,"-").concat(Xn.id)];ts&&Xo[mi].push(ts)}}),ho[mi]=ho[mi].sort(function(Oi,Wi){return Oi-Wi}),r&&(Xo[mi]=Xo[mi].sort(function(Oi,Wi){return Oi-Wi})),to=ao(_o,re,t,to);var Ia=[];if(Object.keys(_o).forEach(function(Oi){if(Ni[Oi]){Ia.push(Ni[Oi]);return}var Wi=to[Oi];Ni[Oi]=io(Wi,Dn,o,s),Ia.push(Ni[Oi])}),Ia=Ia.sort(function(Oi,Wi){return Wi-Oi}),eo["".concat(Xn.id,"-").concat(mi)]=Ia,mi!==ha)for(var Si=(ia==null?void 0:ia.length)||0,Ti=function(Wi){var ts=ia[Wi],bu=ne[Z[ts.id].idx],gs=bu.nodeLabelCountMap[mi],Nl=gt[mi].length;if(!gs||gs.count<Nl)return ia.splice(Wi,1),"continue";for(var dd=!1,eu=0;eu<Nl;eu++)if(gs.dists[eu]>ho[mi][eu]){dd=!0;break}if(dd)return ia.splice(Wi,1),"continue";var Xu={};bu.neighbors.forEach(function(ru){var of=A["".concat(ts.id,"-").concat(ru.id)];Xu["".concat(ts.id,"-").concat(ru.id)]={start:Z[ts.id].idx,end:Z[ru.id].idx,distance:of}}),Re=ao(Xu,ne,e,Re);var Lf=[];Object.keys(Xu).forEach(function(ru){if(Yn[ru]){Lf.push(Yn[ru]);return}var of=Re[ru];Yn[ru]=io(of,Dn,o,s),Lf.push(Yn[ru])}),Lf=Lf.sort(function(ru,of){return of-ru});for(var Hc=!1,eu=0;eu<Nl;eu++)if(Lf[eu]<Ia[eu]){Hc=!0;break}if(Hc)return ia.splice(Wi,1),"continue"},Co=Si-1;Co>=0;Co--)Ti(Co)});var Lo=[];ia==null||ia.forEach(function(mi){for(var Zi=Z[mi.id].idx,pi=Mi(e.nodes,c[Zi],Zi,o,a),Ki=pi.neighbors,_o=Ki.length,Ia=!1,Si=_o-1;Si>=0;Si--){if(Ki.length+1<t.nodes.length){Ia=!0;return}var Ti=Ki[Si],Co=Ti[o];if(!gt[Co]||!gt[Co].length){Ki.splice(Si,1);continue}if(!ho[Co]||!ho[Co].length){Ki.splice(Si,1);continue}var Oi="".concat(mi.id,"-").concat(Ti.id),Wi=A[Oi],ts=ho[Co].length-1,bu=ho[Co][ts];if(Wi>bu){Ki.splice(Si,1);continue}if(r){var gs="".concat(Ti.id,"-").concat(mi.id),Nl=A[gs];ts=Xo[Co].length-1;var dd=Xo[Co][ts];if(Nl>dd){Ki.splice(Si,1);continue}}var eu=Yn[Oi]?Yn[Oi]:Xi(e,mi,Ti,Z,Wi,ne,Dn,o,s,Yn,Re),Xu="".concat(Xn.id,"-").concat(Co),Lf=eo[Xu][eo[Xu].length-1];if(eu<Lf){Ki.splice(Si,1);continue}var Hc=so(oi,Co,ct,gt),ru=Hc.minPatternNodeLabelDegree,of=Hc.minPatternNodeLabelInDegree,mc=Hc.minPatternNodeLabelOutDegree;if(Z[Ti.id].degree<ru){Ki.splice(Si,1);continue}}Ia||Lo.push({nodes:[mi].concat(Ki)})});var Wu=Vr(t,Xn.id,!1).length,xs={};r?(Object.keys(Wu).forEach(function(mi){var Zi=ct[mi].node[o];xs[Zi]?xs[Zi].push(Wu[mi]):xs[Zi]=[Wu[mi]]}),Object.keys(xs).forEach(function(mi){xs[mi].sort(function(Zi,pi){return Zi-pi})})):xs=ho;for(var Yu=Lo.length,Es=function(Zi){var pi=Lo[Zi],Ki=pi.nodes[0],_o={},Ia={};pi.nodes.forEach(function(Qo,xu){Ia[Qo.id]={idx:xu,node:Qo,degree:0,inDegree:0,outDegree:0};var Os=Qo[o];_o[Os]?_o[Os]++:_o[Os]=1});var Si=[],Ti={};e.edges.forEach(function(Qo){Ia[Qo.source]&&Ia[Qo.target]&&(Si.push(Qo),Ti[Qo[s]]?Ti[Qo[s]]++:Ti[Qo[s]]=1,Ia[Qo.source].degree++,Ia[Qo.target].degree++,Ia[Qo.source].outDegree++,Ia[Qo.target].inDegree++)});for(var Co=Object.keys(Ct).length,Oi=!1,Wi=0;Wi<Co;Wi++){var ts=Object.keys(Ct)[Wi];if(!Ti[ts]||Ti[ts]<Ct[ts].length){Oi=!0;break}}if(Oi)return Lo.splice(Zi,1),"continue";var bu=Si.length;if(bu<t.edges.length)return Lo.splice(Zi,1),"break";for(var gs=!1,Nl=function(xu){var Os=Si[xu],Nf=Os[s],Rl=Ct[Nf];if(!Rl||!Rl.length)return Ti[Nf]--,Rl&&Ti[Nf]<Rl.length?(gs=!0,"break"):(Si.splice(xu,1),Ia[Os.source].degree--,Ia[Os.target].degree--,Ia[Os.source].outDegree--,Ia[Os.target].inDegree--,"continue");var F0=Ia[Os.source].node[o],z0=Ia[Os.target].node[o],Dv=!1;if(Rl.forEach(function(G0){var U0=ct[G0.source].node,W0=ct[G0.target].node;U0[o]===F0&&W0[o]===z0&&(Dv=!0),!r&&U0[o]===z0&&W0[o]===F0&&(Dv=!0)}),!Dv)return Ti[Nf]--,Rl&&Ti[Nf]<Rl.length?(gs=!0,"break"):(Si.splice(xu,1),Ia[Os.source].degree--,Ia[Os.target].degree--,Ia[Os.source].outDegree--,Ia[Os.target].inDegree--,"continue")},Wi=bu-1;Wi>=0;Wi--){var dd=Nl(Wi);if(dd==="break")break}if(gs)return Lo.splice(Zi,1),"continue";pi.edges=Si;var eu=Vr(pi,pi.nodes[0].id,!1).length;if(Object.keys(eu).reverse().forEach(function(Qo){if(!(Qo===pi.nodes[0].id||gs)){if(eu[Qo]===1/0){var xu=Ia[Qo].node[o];if(_o[xu]--,_o[xu]<gt[xu].length){gs=!0;return}var Os=pi.nodes.indexOf(Ia[Qo].node);pi.nodes.splice(Os,1),Ia[Qo]=void 0;return}var Nf=Z[Qo].node[o];if(!xs[Nf]||!xs[Nf].length||eu[Qo]>xs[Nf][xs[Nf].length-1]){var xu=Ia[Qo].node[o];if(_o[xu]--,_o[xu]<gt[xu].length){gs=!0;return}var Os=pi.nodes.indexOf(Ia[Qo].node);pi.nodes.splice(Os,1),Ia[Qo]=void 0}}}),gs)return Lo.splice(Zi,1),"continue";for(var Xu=!0,Lf=0;Xu&&!gs;){Xu=!1;var Hc=r?Ia[Ki.id].degree<ct[Xn.id].degree||Ia[Ki.id].inDegree<ct[Xn.id].inDegree||Ia[Ki.id].outDegree<ct[Xn.id].outDegree:Ia[Ki.id].degree<ct[Xn.id].degree;if(Hc){gs=!0;break}if(_o[Ki[o]]<gt[Ki[o]].length){gs=!0;break}for(var ru=pi.nodes.length,of=ru-1;of>=0;of--){var mc=pi.nodes[of],k0=Ia[mc.id].degree,GS=Ia[mc.id].inDegree,US=Ia[mc.id].outDegree,WS=mc[o],Iv=so(oi,WS,ct,gt),B0=Iv.minPatternNodeLabelDegree,YS=Iv.minPatternNodeLabelInDegree,XS=Iv.minPatternNodeLabelOutDegree,jS=r?k0<B0||GS<YS||US<XS:k0<B0;if(jS){if(_o[mc[o]]--,_o[mc[o]]<gt[mc[o]].length){gs=!0;break}pi.nodes.splice(of,1),Ia[mc.id]=void 0,Xu=!0}}if(gs||!Xu&&Lf!==0)break;bu=Si.length;for(var Mh=bu-1;Mh>=0;Mh--){var yc=Si[Mh];if(!Ia[yc.source]||!Ia[yc.target]){Si.splice(Mh,1);var _h=yc[s];if(Ti[_h]--,Ia[yc.source]&&(Ia[yc.source].degree--,Ia[yc.source].outDegree--),Ia[yc.target]&&(Ia[yc.target].degree--,Ia[yc.target].inDegree--),Ct[_h]&&Ti[_h]<Ct[_h].length){gs=!0;break}Xu=!0}}Lf++}if(gs||gs||pi.nodes.length<t.nodes.length||Si.length<t.edges.length)return Lo.splice(Zi,1),"continue"},ws=Yu-1;ws>=0;ws--){var yu=Es(ws);if(yu==="break")break}for(var Xs=Lo.length,tu=function(Zi){var pi=Lo[Zi],Ki={};pi.edges.forEach(function(Si){var Ti="".concat(Si.source,"-").concat(Si.target,"-").concat(Si.label);Ki[Ti]?Ki[Ti]++:Ki[Ti]=1});for(var _o=function(Ti){var Co=Lo[Ti],Oi={};Co.edges.forEach(function(ts){var bu="".concat(ts.source,"-").concat(ts.target,"-").concat(ts.label);Oi[bu]?Oi[bu]++:Oi[bu]=1});var Wi=!0;Object.keys(Oi).length!==Object.keys(Ki).length?Wi=!1:Object.keys(Ki).forEach(function(ts){Oi[ts]!==Ki[ts]&&(Wi=!1)}),Wi&&Lo.splice(Ti,1)},Ia=Xs-1;Ia>Zi;Ia--)_o(Ia);Xs=Lo.length},ws=0;ws<=Xs-1;ws++)tu(ws);return Lo}}},ro=zo,vo=function(){function i(e){e===void 0&&(e=10),this.linkedList=new xt,this.maxStep=e}return Object.defineProperty(i.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),i.prototype.isEmpty=function(){return!this.linkedList.head},i.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},i.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},i.prototype.push=function(e){this.linkedList.prepend(e),this.length>this.maxStep&&this.linkedList.deleteTail()},i.prototype.pop=function(){var e=this.linkedList.deleteHead();return e?e.value:null},i.prototype.toArray=function(){return this.linkedList.toArray().map(function(e){return e.value})},i.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},i}(),Ao=vo,Go=kr,Ai={getAdjMatrix:it,breadthFirstSearch:ae,connectedComponent:de,getDegree:be,getInDegree:ke,getOutDegree:he,detectCycle:kr,detectDirectedCycle:Go,detectAllCycles:fr,detectAllDirectedCycle:lr,detectAllUndirectedCycle:Qe,depthFirstSearch:Pe,dijkstra:Vr,findAllPath:nr,findShortestPath:dr,floydWarshall:Te,labelPropagation:Nr,louvain:kt,iLouvain:at,kCore:C,kMeans:mt,cosineSimilarity:Lt,nodesCosineSimilarity:Oe,minimumSpanningTree:Wr,pageRank:ce,getNeighbors:_t,Stack:Ao,GADDI:ro},$i=_(277160),oa=_(631437),Qt=dt,ve=function(e){return function(t,r){return t[e]-r[e]}},Ge=function(e,t,r){return e>=t&&e<=r},pr=function(e,t,r,n){var a=1e-4,o={x:r.x-e.x,y:r.y-e.y},s={x:t.x-e.x,y:t.y-e.y},u={x:n.x-r.x,y:n.y-r.y},f=s.x*u.y-s.y*u.x,c=f*f,d=1/f,A=s.x*s.x+s.y*s.y,D=u.x*u.x+u.y*u.y;if(c>a*A*D){var z=(o.x*u.y-o.y*u.x)*d,Z=(o.x*s.y-o.y*s.x)*d;return!Ge(z,0,1)||!Ge(Z,0,1)?null:{x:e.x+z*s.x,y:e.y+z*s.y}}return null},Xr=function(e,t){var r=e.x,n=e.y,a=e.width,o=e.height,s=r+a/2,u=n+o/2,f=[],c={x:s,y:u};f.push({x:r,y:n}),f.push({x:r+a,y:n}),f.push({x:r+a,y:n+o}),f.push({x:r,y:n+o}),f.push({x:r,y:n});for(var d=null,A=1;A<f.length&&(d=pr(f[A-1],f[A],c,t),!d);A++);return d},Yr=function(e,t){var r=e.x,n=e.y,a=e.r,o=t.x,s=t.y,u=o-r,f=s-n;if(u*u+f*f<a*a)return null;var c=Math.atan(f/u);return{x:r+Math.abs(a*Math.cos(c))*Math.sign(u),y:n+Math.abs(a*Math.sin(c))*Math.sign(f)}},Pr=function(e,t){var r=e.rx,n=e.ry,a=e.x,o=e.y,s=t.x-a,u=t.y-o,f=Math.atan2(u/n,s/r);return f<0&&(f+=2*Math.PI),{x:a+r*Math.cos(f),y:o+n*Math.sin(f)}},cn=function(e,t,r){r===void 0&&(r=1);var n=[e.x,e.y,r];return(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]),$i.transformMat3(n,n,t),{x:n[0],y:n[1]}},Mn=function(e,t,r){r===void 0&&(r=1),(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]);var n=$.invert([1,0,0,0,1,0,0,0,1],t);n||(n=[1,0,0,0,1,0,0,0,1]);var a=[e.x,e.y,r];return $i.transformMat3(a,a,n),{x:a[0],y:a[1]}},Bn=function(e,t,r){var n=e.x-t.x,a=e.y-t.y,o=e.x-r.x,s=e.y-r.y,u=(e.x*e.x-t.x*t.x-t.y*t.y+e.y*e.y)/2,f=(e.x*e.x-r.x*r.x-r.y*r.y+e.y*e.y)/2,c=a*o-n*s;return{x:-(s*u-a*f)/c,y:-(n*f-o*u)/c}},sa=function(e,t){var r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)},qn=function(e,t){var r=[];return e.forEach(function(n){var a=[];n.forEach(function(o){a.push(o*t)}),r.push(a)}),r},ga=function(e){for(var t=[],r=e.length,n=0;n<r;n+=1){t[n]=[];for(var a=0;a<r;a+=1)n===a?t[n][a]=0:e[n][a]===0||!e[n][a]?t[n][a]=1/0:t[n][a]=e[n][a]}for(var o=0;o<r;o+=1)for(var n=0;n<r;n+=1)for(var a=0;a<r;a+=1)t[n][a]>t[n][o]+t[o][a]&&(t[n][a]=t[n][o]+t[o][a]);return t},ya=function(e,t){var r=e.nodes,n=e.edges,a=[],o={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach(function(s,u){o[s.id]=u;var f=[];a.push(f)}),n&&n.forEach(function(s){var u=s.source,f=s.target,c=o[u],d=o[f];a[c][d]=1,t||(a[d][c]=1)}),a},vi=function(e,t){e.translate(t.x,t.y)},Sa=function(e,t,r,n){n===void 0&&(n={duration:500});var a=e.getMatrix();a||(a=[1,0,0,0,1,0,0,0,1]);var o=e.getCanvasBBox(),s=t.x-o.minX,u=t.y-o.minY;if(r){var f=s*a[0],c=u*a[4],d=0,A=0,D=0,z=0;e.animate(function(rt){return D=f*rt,z=c*rt,a=Qt(a,[["t",D-d,z-A]]),d=D,A=z,{matrix:a}},n)}else{var Z=Qt(a,[["t",s,u]]);e.setMatrix(Z)}},ua=function(e,t){var r=e.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var n=t;(0,l.isArray)(t)||(n=[t,t]),(0,l.isArray)(t)&&t.length===1&&(n=[t[0],t[0]]),r=Qt(r,[["s",n[0],n[1]]]),e.setMatrix(r)},fi=function(e,t){var r=e.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]),r=Qt(r,[["r",t]]),e.setMatrix(r)},ei=function(e,t,r){for(var n=[],a=0;a<e;a++)n[a]=0;return r.forEach(function(o){o.source&&(n[t[o.source]]+=1),o.target&&(n[t[o.target]]+=1)}),n};function Ga(i,e,t){return(t[0]-i[0])*(e[1]-i[1])===(e[0]-i[0])*(t[1]-i[1])&&Math.min(i[0],e[0])<=t[0]&&t[0]<=Math.max(i[0],e[0])&&Math.min(i[1],e[1])<=t[1]&&t[1]<=Math.max(i[1],e[1])}var Ii=function(e,t,r){var n=!1,a=e.length,o=1e-6;function s(d){return Math.abs(d)<o?0:d<0?-1:1}if(a<=2)return!1;for(var u=0;u<a;u++){var f=e[u],c=e[(u+1)%a];if(Ga(f,c,[t,r]))return!0;s(f[1]-r)>0!=s(c[1]-r)>0&&s(t-(r-f[1])*(f[0]-c[0])/(f[1]-c[1])-f[0])<0&&(n=!n)}return n},yi=function(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)},za=function(e,t){var r=!1;return(0,l.each)(e,function(n){if(pr(n.from,n.to,t.from,t.to))return r=!0,!1}),r},Va=function(e,t){var r=function(A){var D=A.map(function(Z){return Z[0]}),z=A.map(function(Z){return Z[1]});return{minX:Math.min.apply(null,D),maxX:Math.max.apply(null,D),minY:Math.min.apply(null,z),maxY:Math.max.apply(null,z)}},n=function(A){for(var D=[],z=A.length,Z=0;Z<z-1;Z++){var rt=A[Z],ft=A[Z+1];D.push({from:{x:rt[0],y:rt[1]},to:{x:ft[0],y:ft[1]}})}if(D.length>1){var ct=A[0],gt=A[z-1];D.push({from:{x:gt[0],y:gt[1]},to:{x:ct[0],y:ct[1]}})}return D};if(e.length<2||t.length<2)return!1;var a=r(e),o=r(t);if(!yi(a,o))return!1;var s=!1;if((0,l.each)(t,function(d){if(Ii(e,d[0],d[1]))return s=!0,!1}),s||((0,l.each)(e,function(d){if(Ii(t,d[0],d[1]))return s=!0,!1}),s))return!0;var u=n(e),f=n(t),c=!1;return(0,l.each)(f,function(d){if(za(u,d))return c=!0,!1}),c},Da=function(){function i(e,t,r,n){this.x1=e,this.y1=t,this.x2=r,this.y2=n}return i.prototype.getBBox=function(){var e=Math.min(this.x1,this.x2),t=Math.min(this.y1,this.y2),r=Math.max(this.x1,this.x2),n=Math.max(this.y1,this.y2),a={x:e,y:t,minX:e,minY:t,maxX:r,maxY:n,width:r-e,height:n-t};return a},i}(),Ri=function(e,t){var r={top:[e.minX,e.minY,e.maxX,e.minY],left:[e.minX,e.minY,e.minX,e.maxY],bottom:[e.minX,e.maxY,e.maxX,e.maxY],right:[e.maxX,e.minY,e.maxX,e.maxY]};return r[t]},_i=function(e,t){var r=(t.x2-t.x1)*(e.y1-t.y1)-(t.y2-t.y1)*(e.x1-t.x1),n=(e.x2-e.x1)*(e.y1-t.y1)-(e.y2-e.y1)*(e.x1-t.x1),a=(t.y2-t.y1)*(e.x2-e.x1)-(t.x2-t.x1)*(e.y2-e.y1);if(a){var o=r/a,s=n/a;if(o>=0&&o<=1&&s>=0&&s<=1)return o}return Number.POSITIVE_INFINITY},ki=function(e,t){for(var r=["top","left","bottom","right"],n=e.getBBox(),a=0,o=[],s=0;s<4;s++){var u=Ri(n,r[s]),f=u[0],c=u[1],d=u[2],A=u[3];o[s]=pr({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},{x:f,y:c},{x:d,y:A}),o[s]&&(a+=1)}return[o,a]},uo=function(e,t){for(var r=["top","left","bottom","right"],n=e.getBBox(),a=Number.POSITIVE_INFINITY,o=0,s=0;s<4;s++){var u=Ri(n,r[s]),f=u[0],c=u[1],d=u[2],A=u[3],D=_i(t,new Da(f,c,d,A));D=Math.abs(D-.5),D>=0&&D<=1&&(o+=1,a=D<a?D:a)}return o===0?-1:a},qi=function(e){var t=0,r=0;if(e.length>0){for(var n=0,a=e;n<a.length;n++){var o=a[n];t+=o.x,r+=o.y}t/=e.length,r/=e.length}return{x:t,y:r}},po=function(e,t){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)},es=function(e,t){var r=t.x1,n=t.y1,a=t.x2-r,o=t.y2-n,s=e.x-r,u=e.y-n,f=s*a+u*o,c;f<=0?c=0:(s=a-s,u=o-u,f=s*a+u*o,f<=0?c=0:c=f*f/(a*a+o*o));var d=s*s+u*u-c;return d<0&&(d=0),d},rs=function(e,t,r){return r===void 0&&(r=.001),Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<Math.pow(r,2)},no=function(e,t){var r=e.x<t.x,n=e.x>t.x+t.width,a=e.y>t.y+t.height,o=e.y<t.y,s=r||n||a||o;if(!s)return 0;if(a&&!r&&!n)return Math.pow(t.y+t.height-e.y,2);if(o&&!r&&!n)return Math.pow(e.y-t.y,2);if(r&&!a&&!o)return Math.pow(t.x-e.x,2);if(n&&!a&&!o)return Math.pow(t.x+t.width-e.x,2);var u=Math.min(Math.abs(t.x-e.x),Math.abs(t.x+t.width-e.x)),f=Math.min(Math.abs(t.y-e.y),Math.abs(t.y+t.height-e.y));return u*u+f*f},ni=function(e,t){var r=e[0],n=e[1],a=e[2],o=e[3],s=t.x,u=t.y,f=[a-r,o-n];if(oa.exactEquals(f,[0,0]))return NaN;var c=[-f[1],f[0]];oa.normalize(c,c);var d=[s-r,u-n];return Math.abs(oa.dot(d,c))},zi=function(e,t,r){return e+(t-e)*r},fo=function(e,t,r){for(var n=Math.min(e.length,t.length),a=new Array(n),o=0;o<n;o++)a[o]=zi(e[o],t[o],r);return a},Xa="rgb(95, 149, 255)",go="rgb(255, 255, 255)",No="rgb(0, 0, 0)",Hi="rgb(247, 250, 255)",as="rgb(239, 244, 255)",Gi="rgb(253, 253, 253)",Ro="rgb(250, 250, 250)",ss="rgb(224, 224, 224)",Ss="rgb(234, 234, 234)",mo="rgb(245, 245, 245)",us="rgb(191, 213, 255)",fs="#4572d9",Is="rgb(223, 234, 255)",Aa={mainStroke:Xa,mainFill:as,activeStroke:Xa,activeFill:Hi,inactiveStroke:us,inactiveFill:Hi,selectedStroke:Xa,selectedFill:go,highlightStroke:fs,highlightFill:Is,disableStroke:ss,disableFill:Ro,edgeMainStroke:ss,edgeActiveStroke:Xa,edgeInactiveStroke:Ss,edgeSelectedStroke:Xa,edgeHighlightStroke:Xa,edgeDisableStroke:mo,comboMainStroke:ss,comboMainFill:Gi,comboActiveStroke:Xa,comboActiveFill:Hi,comboInactiveStroke:ss,comboInactiveFill:Gi,comboSelectedStroke:Xa,comboSelectedFill:Gi,comboHighlightStroke:fs,comboHighlightFill:Gi,comboDisableStroke:Ss,comboDisableFill:Ro},Ut={version:"0.8.15",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:Aa.mainStroke,fill:as},size:20,color:Aa.mainStroke,linkPoints:{size:8,lineWidth:1,fill:Aa.activeFill,stroke:Aa.activeStroke}},nodeStateStyles:{active:{fill:Aa.activeFill,stroke:Aa.activeStroke,lineWidth:2,shadowColor:Aa.mainStroke,shadowBlur:10},selected:{fill:Aa.selectedFill,stroke:Aa.selectedStroke,lineWidth:4,shadowColor:Aa.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:Aa.highlightFill,stroke:Aa.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:Aa.inactiveFill,stroke:Aa.inactiveStroke,lineWidth:1},disable:{fill:Aa.disableFill,stroke:Aa.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:No,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:Aa.edgeMainStroke,lineAppendWidth:2},color:Aa.edgeMainStroke},edgeStateStyles:{active:{stroke:Aa.edgeActiveStroke,lineWidth:1},selected:{stroke:Aa.edgeSelectedStroke,lineWidth:2,shadowColor:Aa.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Aa.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:Aa.edgeInactiveStroke,lineWidth:1},disable:{stroke:Aa.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:No,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:Aa.comboMainFill,lineWidth:1,stroke:Aa.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:Aa.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:Aa.comboActiveStroke,lineWidth:1,fill:Aa.comboActiveFill},selected:{stroke:Aa.comboSelectedStroke,lineWidth:2,fill:Aa.comboSelectedFill,shadowColor:Aa.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Aa.comboHighlightStroke,lineWidth:2,fill:Aa.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:Aa.comboInactiveStroke,fill:Aa.comboInactiveFill,lineWidth:1},disable:{stroke:Aa.comboDisableStroke,fill:Aa.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},windowFontFamily:typeof window!="undefined"&&window.getComputedStyle&&document.body&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},Xe={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},cr=Math.PI,_r=Math.sin,on=Math.cos,_n=_r(cr/8),$n=on(cr/8),qa=function(e,t){var r=e.getBBox(),n={x:r.minX,y:r.minY},a={x:r.maxX,y:r.maxY};if(t){var o=t.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]),n=cn(n,o),a=cn(a,o)}var s=n.x,u=n.y,f=a.x,c=a.y;return{x:s,y:u,minX:s,minY:u,maxX:f,maxY:c,width:f-s,height:c-u}},Bi=function(e){var t=e.sourceNode||e.targetNode,r=t.get("group"),n=r.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var a=t.getKeyShape(),o=a.getBBox(),s=e.loopCfg||{},u=s.dist||Math.max(o.width,o.height)*2,f=s.position||Ut.defaultLoopPosition,c=[(o.minX+o.maxX)/2+n[6],(o.minY+o.maxY)/2+n[7]],d=[e.startPoint.x,e.startPoint.y],A=[e.endPoint.x,e.endPoint.y],D=o.height/2,z=o.width/2,Z=D,rt=D,ft=Z*_n,ct=Z*$n,gt=rt*_n,Ct=rt*$n,Ht=a.get("type"),ne=Math.min(D/2,z/2),re=Math.min(D,z),Me=s!=null&&s.pointPadding?Math.min(re,s==null?void 0:s.pointPadding):ne;if(d[0]===A[0]&&d[1]===A[1]){switch(f){case"top":Ht==="circle"?(d=[c[0]-ft,c[1]-ct],A=[c[0]+gt,c[1]-Ct]):(d=[c[0]-Me,c[1]-D],A=[c[0]+Me,c[1]-D]);break;case"top-right":Z=D,rt=z,Ht==="circle"?(ft=Z*_n,ct=Z*$n,gt=rt*_n,Ct=rt*$n,d=[c[0]+ft,c[1]-ct],A=[c[0]+Ct,c[1]-gt]):(d=[c[0]+z-Me,c[1]-D],A=[c[0]+z,c[1]-D+Me]);break;case"right":Z=z,rt=z,Ht==="circle"?(ft=Z*_n,ct=Z*$n,gt=rt*_n,Ct=rt*$n,d=[c[0]+ct,c[1]-ft],A=[c[0]+Ct,c[1]+gt]):(d=[c[0]+z,c[1]-Me],A=[c[0]+z,c[1]+Me]);break;case"bottom-right":Z=z,rt=D,Ht==="circle"?(ft=Z*_n,ct=Z*$n,gt=rt*_n,Ct=rt*$n,d=[c[0]+ct,c[1]+ft],A=[c[0]+gt,c[1]+Ct]):(d=[c[0]+z,c[1]+D-Me],A=[c[0]+z-Me,c[1]+D]);break;case"bottom":Z=D,rt=D,Ht==="circle"?(ft=Z*_n,ct=Z*$n,gt=rt*_n,Ct=rt*$n,d=[c[0]+ft,c[1]+ct],A=[c[0]-gt,c[1]+Ct]):(d=[c[0]-Me,c[1]+D],A=[c[0]+Me,c[1]+D]);break;case"bottom-left":Z=D,rt=z,Ht==="circle"?(ft=Z*_n,ct=Z*$n,gt=rt*_n,Ct=rt*$n,d=[c[0]-ft,c[1]+ct],A=[c[0]-Ct,c[1]+gt]):(d=[c[0]-z,c[1]+D-Me],A=[c[0]-z+Me,c[1]+D]);break;case"left":Z=z,rt=z,Ht==="circle"?(ft=Z*_n,ct=Z*$n,gt=rt*_n,Ct=rt*$n,d=[c[0]-ct,c[1]+ft],A=[c[0]-Ct,c[1]-gt]):(d=[c[0]-z,c[1]-Me],A=[c[0]-z,c[1]+Me]);break;case"top-left":Z=z,rt=D,Ht==="circle"?(ft=Z*_n,ct=Z*$n,gt=rt*_n,Ct=rt*$n,d=[c[0]-ct,c[1]-ft],A=[c[0]-gt,c[1]-Ct]):(d=[c[0]-z+Me,c[1]-D],A=[c[0]-z,c[1]-D+Me]);break;default:Z=z,rt=z,ft=Z*_n,ct=Z*$n,gt=rt*_n,Ct=rt*$n,d=[c[0]-ft,c[1]-ct],A=[c[0]+gt,c[1]-Ct]}if(s.clockwise===!1){var je=[d[0],d[1]];d=[A[0],A[1]],A=[je[0],je[1]]}}var Re=[d[0]-c[0],d[1]-c[1]],ir=(Z+u)/Z,Sr=(rt+u)/rt;s.clockwise===!1&&(ir=(rt+u)/rt,Sr=(Z+u)/Z);var pn=oa.scale([0,0],Re,ir),Gn=[c[0]+pn[0],c[1]+pn[1]],Pn=[A[0]-c[0],A[1]-c[1]],sn=oa.scale([0,0],Pn,Sr),Jn=[c[0]+sn[0],c[1]+sn[1]];return e.startPoint={x:d[0],y:d[1]},e.endPoint={x:A[0],y:A[1]},e.controlPoints=[{x:Gn[0],y:Gn[1]},{x:Jn[0],y:Jn[1]}],e},Oo=function(e,t,r,n,a){var o=1e-4,s=[],u=e==null?void 0:e.getPoint(t);if(!u)return{x:0,y:0,angle:0};if(t<o)s=e.getStartTangent().reverse();else if(t>1-o)s=e.getEndTangent();else{var f=e==null?void 0:e.getPoint(t+o);s.push([u.x,u.y]),s.push([f.x,f.y])}var c=Math.atan2(s[1][1]-s[0][1],s[1][0]-s[0][0]);if(c<0&&(c+=cr*2),r&&(u.x+=on(c)*r,u.y+=_r(c)*r),n){var d=c-cr/2;c>1/2*cr&&c<3*1/2*cr&&(d-=cr),u.x+=on(d)*n,u.y+=_r(d)*n}var A={x:u.x,y:u.y,angle:c};return a?(c>.5*cr&&c<1.5*cr&&(c-=cr),(0,y.__assign)({rotate:c},A)):A},jo=function i(e,t,r,n){if(n(e,t,r)===!1)return!1;if(e&&e.children){for(var a=e.children.length-1;a>=0;a--)if(!i(e.children[a],e,a,n))return!1}return!0},Rs=function i(e,t,r,n){if(e&&e.children){for(var a=e.children.length-1;a>=0;a--)if(!i(e.children[a],e,a,n))return}return n(e,t,r)!==!1},Qi=function(e,t){typeof t=="function"&&jo(e,null,-1,t)},Io=function(e,t){typeof t=="function"&&Rs(e,null,-1,t)},cs=function(e,t){return t*(Xe[e]||1)},ks=function(e,t){var r=0,n=new RegExp("[\u4E00-\u9FA5]+");return e.split("").forEach(function(a){n.test(a)?r+=t:r+=cs(a,t)}),[r,t]},ls=function(e,t){return typeof t!="number"||t<=0||t>=e.length?e:e.substring(0,t)+"..."},js=function(e,t){var r=[],n={},a={};e.forEach(function(u){a[u.id]=u}),e.forEach(function(u,f){var c=(0,l.clone)(u);c.itemType="combo",c.children=void 0,c.parentId===c.id?(console.warn("The parentId for combo ".concat(c.id," can not be the same as the combo's id")),delete c.parentId):c.parentId&&!a[c.parentId]&&(console.warn("The parent combo for combo ".concat(c.id," does not exist!")),delete c.parentId);var d=n[c.id];if(d){if(c.children=d.children,n[c.id]=c,d=c,!d.parentId){r.push(d);return}var A=n[d.parentId];if(A)A.children?A.children.push(c):A.children=[c];else{var D={id:d.parentId,children:[d]};n[d.parentId]=D,n[c.id]=c}return}if((0,l.isString)(u.parentId)){var z=n[u.parentId];if(z)z.children?z.children.push(c):z.children=[c],n[c.id]=c;else{var Z={id:u.parentId,children:[c]};n[Z.id]=Z,n[c.id]=c}}else r.push(c),n[c.id]=c});var o={};(t||[]).forEach(function(u){o[u.id]=u;var f=n[u.comboId];if(f){var c={id:u.id,comboId:u.comboId};f.children?f.children.push(c):f.children=[c],c.itemType="node",n[u.id]=c}});var s=0;return r.forEach(function(u){u.depth=s+10,Qi(u,function(f){var c,d=n[f.id].itemType;d==="node"?c=n[f.comboId]:c=n[f.parentId],c&&d==="node"?f.depth=s+1:f.depth=s+10,s<f.depth&&(s=f.depth);var A=o[f.id];return A&&(A.depth=f.depth),!0})}),r},Ks=function(e,t,r){var n,a=e,o,s={root:{children:e}},u=!1,f="root";(e||[]).forEach(function(z){if(!u){if(z.id===t){o=z,z.itemType==="combo"?o.parentId=r:o.comboId=r,u=!0;return}Qi(z,function(Z){var rt;return s[Z.id]={children:(Z==null?void 0:Z.children)||[]},a=(rt=s[Z.parentId||Z.comboId||"root"])===null||rt===void 0?void 0:rt.children,Z&&(Z.removed||t===Z.id)&&a?(f=Z.parentId||Z.comboId||"root",o=Z,Z.itemType==="combo"?o.parentId=r:o.comboId=r,u=!0,!1):!0})}}),a=(n=s[f])===null||n===void 0?void 0:n.children;var c=a?a.indexOf(o):-1;if(c>-1&&a.splice(c,1),u||(o={id:t,itemType:"node",comboId:r},s[t]={children:void 0}),t){var d=!1;if(r){var A=0;(e||[]).forEach(function(z){d||Qi(z,function(Z){return r===Z.id?(d=!0,Z.children?Z.children.push(o):Z.children=[o],A=Z.depth,o.itemType==="node"?o.depth=A+2:o.depth=A+1,!1):!0})})}else(!r||!d)&&o.itemType!=="node"&&e.push(o);var D=o.depth;Qi(o,function(z){return z.itemType==="node"?D+=2:D+=1,z.depth=D,!0})}return e},Vs=function(e,t,r){var n={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};if(!e||e.length===0){var a=r==null?void 0:r.getModel(),o=a||{},s=o.x,u=o.y,f=o.fixSize,c=o.collapsed,d=o.fixCollapseSize,A=c?d:f,D=(0,l.isArray)(A)?A:[A,A],z=D[0],Z=D[1],rt=[z/2,Z/2];return{minX:s-rt[0],minY:u-rt[1],maxX:s+rt[0],maxY:u+rt[1],x:s,y:u,width:z,height:Z}}return e.forEach(function(ft){var ct=t.findById(ft.id);if(!(!ct||!ct.isVisible())){ct.set("bboxCanvasCache",void 0);var gt=ct.getCanvasBBox();gt.x&&n.minX>gt.minX&&(n.minX=gt.minX),gt.y&&n.minY>gt.minY&&(n.minY=gt.minY),gt.x&&n.maxX<gt.maxX&&(n.maxX=gt.maxX),gt.y&&n.maxY<gt.maxY&&(n.maxY=gt.maxY)}}),n.x=(n.minX+n.maxX)/2,n.y=(n.minY+n.maxY)/2,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,(r==null?void 0:r.getKeyShape().get("type"))==="circle"&&(n.width=Math.hypot(n.height,n.width),n.height=n.width),Object.keys(n).forEach(function(ft){(n[ft]===1/0||n[ft]===-1/0)&&(n[ft]=void 0)}),n},hu=function(e){var t=(0,l.isNumber)(e.x)||(0,l.isNumber)(e.y)||e.type||e.anchorPoints||e.size;return e.style&&(t=t||(0,l.isNumber)(e.style.r)||(0,l.isNumber)(e.style.width)||(0,l.isNumber)(e.style.height)||(0,l.isNumber)(e.style.rx)||(0,l.isNumber)(e.style.ry)),t},ds=function(e){var t={};return Object.keys(e).forEach(function(r){var n=e[r];if((0,l.isObject)(n)&&!(0,l.isArray)(n)){var a={};Object.keys(n).forEach(function(o){var s=n[o];o==="img"&&!(0,l.isString)(s)||(a[o]=(0,l.clone)(s))}),t[r]=a}else t[r]=(0,l.clone)(n)}),t},Ds=function(e){var t=e.animateCfg,r=e.callback,n;if(!t)n={duration:500,callback:r};else if(n=(0,l.clone)(t),t.callback){var a=t.callback;n.callback=function(){r(),a()}}else n.callback=r;return n},Bs=function(e){if(!e)return console.error("G6 Error Tips: the data must be defined"),!1;var t=e.nodes,r=e.edges,n=e.combos,a=n===void 0?[]:n;if(!t&&!r){var o=!0;return Qi(e,function(A){return(0,l.isString)(A.id)?!0:(o=!1,!1)}),o}var s=(t||[]).find(function(A){return!(0,l.isString)(A.id)});if(s)return console.warn("G6 Warning Tips: missing 'id' property, or %c".concat(s.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1;var u=(t||[]).map(function(A){return A.id}),f=a==null?void 0:a.map(function(A){return A.id}),c=(0,y.__spreadArray)((0,y.__spreadArray)([],u,!0),f,!0),d=(r||[]).find(function(A){return!c.includes(A.source)||!c.includes(A.target)});return d?(console.warn("G6 Warning Tips: The source %c".concat(d.source,"%c or the target %c").concat(d.target,"%c of the edge do not exist in the nodes or combos."),"font-size: 20px; color: red;","","font-size: 20px; color: red;",""),!1):!0},is=function(e,t){if(e==="node"||e==="combo"){if(t.id&&!(0,l.isString)(t.id))return console.warn("G6 Warning Tips: missing 'id' property, or the 'id' %c".concat(t.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1}else if(e==="edge"&&(!t.source||!t.target))return console.warn("G6 Warning Tips: missing 'source' or 'target' for the edge."),!1;return!0},Eu=function(){function i(e){this.graph=e,this.destroyed=!1,this.modes=e.get("modes")||{default:[]},this.formatModes(),this.mode=e.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return i.prototype.formatModes=function(){var e=this.modes;(0,l.each)(e,function(t){(0,l.each)(t,function(r,n){(0,l.isString)(r)&&(t[n]={type:r})})})},i.prototype.setBehaviors=function(e){var t=this.graph,r=this.modes[e],n=[],a;(0,l.each)(r||[],function(o){var s=F.getBehavior(o.type||o);s&&(a=new s(o),a&&(a.bind(t),n.push(a)))}),this.currentBehaves=n},i.mergeBehaviors=function(e,t){return(0,l.each)(t,function(r){e.indexOf(r)<0&&((0,l.isString)(r)&&(r={type:r}),e.push(r))}),e},i.filterBehaviors=function(e,t){var r=[];return e.forEach(function(n){var a="";(0,l.isString)(n)?a=n:a=n.type,t.indexOf(a)<0&&r.push(n)}),r},i.prototype.setMode=function(e){var t=this,r=t.modes,n=t.graph,a=e,o=r[a];o&&(n.emit("beforemodechange",{mode:e}),(0,l.each)(this.currentBehaves,function(s){s.delegate&&s.delegate.remove(),s.unbind(n)}),this.setBehaviors(a),n.emit("aftermodechange",{mode:e}),this.mode=e)},i.prototype.getMode=function(){return this.mode},i.prototype.manipulateBehaviors=function(e,t,r){var n=this,a;if((0,l.isArray)(e)?a=e:a=[e],(0,l.isArray)(t))return(0,l.each)(t,function(s){n.modes[s]?r?n.modes[s]=i.mergeBehaviors(n.modes[s]||[],a):n.modes[s]=i.filterBehaviors(n.modes[s]||[],a):r&&(n.modes[s]=a)}),this;var o=t;return t||(o=this.mode),this.modes[o]||r&&(this.modes[o]=a),r?this.modes[o]=i.mergeBehaviors(this.modes[o]||[],a):this.modes[o]=i.filterBehaviors(this.modes[o]||[],a),this.formatModes(),this.setMode(this.mode),this},i.prototype.updateBehavior=function(e,t,r){(0,l.isString)(e)&&(e={type:e});var n=[];if(!r||r===this.mode||r==="default"){if(n=this.currentBehaves,!n||!n.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var a=n.length,o=0;o<a;o++){var s=n[o];if(s.type===e.type)return s.updateCfg(t),this;o===a-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(n=this.modes[r],!n||!n.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var u=n.length,o=0;o<u;o++){var s=n[o];if(s.type===e.type||s===e.type)return s===e.type&&(s={type:s}),Object.assign(s,t),n[o]=s,this;o===u-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},i.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},i}(),wu=Eu,yo=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,Vo=new RegExp("([a-z])["+yo+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+yo+"]*,?["+yo+"]*)+)","ig"),os=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+yo+"]*,?["+yo+"]*","ig"),h=function(i){if(!i)return null;if((0,l.isArray)(i))return i;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(i).replace(Vo,function(r,n,a){var o=[],s=n.toLowerCase();if(a.replace(os,function(u,f){f&&o.push(+f)}),s==="m"&&o.length>2&&(t.push([n].concat(o.splice(0,2))),s="l",n=n==="m"?"l":"L"),s==="o"&&o.length===1&&t.push([n,o[0]]),s==="r")t.push([n].concat(o));else for(;o.length>=e[s]&&(t.push([n].concat(o.splice(0,e[s]))),!!e[s]););return i}),t},Y=function(i,e){for(var t=[],r=0,n=i.length;n-2*!e>r;r+=2){var a=[{x:+i[r-2],y:+i[r-1]},{x:+i[r],y:+i[r+1]},{x:+i[r+2],y:+i[r+3]},{x:+i[r+4],y:+i[r+5]}];e?r?n-4===r?a[3]={x:+i[0],y:+i[1]}:n-2===r&&(a[2]={x:+i[0],y:+i[1]},a[3]={x:+i[2],y:+i[3]}):a[0]={x:+i[n-2],y:+i[n-1]}:n-4===r?a[3]=a[2]:r||(a[0]={x:+i[r],y:+i[r+1]}),t.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return t},Mt=function(i,e,t,r,n){var a=[];if(n===null&&r===null&&(r=t),i=+i,e=+e,t=+t,r=+r,n!==null){var o=Math.PI/180,s=i+t*Math.cos(-r*o),u=i+t*Math.cos(-n*o),f=e+t*Math.sin(-r*o),c=e+t*Math.sin(-n*o);a=[["M",s,f],["A",t,t,0,+(n-r>180),0,u,c]]}else a=[["M",i,e],["m",0,-r],["a",t,r,0,1,1,0,2*r],["a",t,r,0,1,1,0,-2*r],["z"]];return a},Bt=function(i){if(i=h(i),!i||!i.length)return[["M",0,0]];var e=[],t=0,r=0,n=0,a=0,o=0,s,u;i[0][0]==="M"&&(t=+i[0][1],r=+i[0][2],n=t,a=r,o++,e[0]=["M",t,r]);for(var f=i.length===3&&i[0][0]==="M"&&i[1][0].toUpperCase()==="R"&&i[2][0].toUpperCase()==="Z",c=void 0,d=void 0,A=o,D=i.length;A<D;A++){if(e.push(c=[]),d=i[A],s=d[0],s!==s.toUpperCase())switch(c[0]=s.toUpperCase(),c[0]){case"A":c[1]=d[1],c[2]=d[2],c[3]=d[3],c[4]=d[4],c[5]=d[5],c[6]=+d[6]+t,c[7]=+d[7]+r;break;case"V":c[1]=+d[1]+r;break;case"H":c[1]=+d[1]+t;break;case"R":u=[t,r].concat(d.slice(1));for(var z=2,Z=u.length;z<Z;z++)u[z]=+u[z]+t,u[++z]=+u[z]+r;e.pop(),e=e.concat(Y(u,f));break;case"O":e.pop(),u=Mt(t,r,d[1],d[2]),u.push(u[0]),e=e.concat(u);break;case"U":e.pop(),e=e.concat(Mt(t,r,d[1],d[2],d[3])),c=["U"].concat(e[e.length-1].slice(-2));break;case"M":n=+d[1]+t,a=+d[2]+r;break;default:for(var z=1,Z=d.length;z<Z;z++)c[z]=+d[z]+(z%2?t:r)}else if(s==="R")u=[t,r].concat(d.slice(1)),e.pop(),e=e.concat(Y(u,f)),c=["R"].concat(d.slice(-2));else if(s==="O")e.pop(),u=Mt(t,r,d[1],d[2]),u.push(u[0]),e=e.concat(u);else if(s==="U")e.pop(),e=e.concat(Mt(t,r,d[1],d[2],d[3])),c=["U"].concat(e[e.length-1].slice(-2));else for(var rt=0,ft=d.length;rt<ft;rt++)c[rt]=d[rt];if(s=s.toUpperCase(),s!=="O")switch(c[0]){case"Z":t=+n,r=+a;break;case"H":t=c[1];break;case"V":r=c[1];break;case"M":n=c[c.length-2],a=c[c.length-1];break;default:t=c[c.length-2],r=c[c.length-1]}}return e},qt=function(i,e,t,r){return[i,e,t,r,t,r]},pe=function(i,e,t,r,n,a){var o=.3333333333333333,s=2/3;return[o*i+s*t,o*e+s*r,o*n+s*t,o*a+s*r,n,a]},me=function(i,e,t,r,n,a,o,s,u,f){t===r&&(t+=1);var c=Math.PI*120/180,d=Math.PI/180*(+n||0),A=[],D,z,Z,rt,ft,ct=function(to,Ni,eo){var ho=to*Math.cos(eo)-Ni*Math.sin(eo),Xo=to*Math.sin(eo)+Ni*Math.cos(eo);return{x:ho,y:Xo}};if(f)z=f[0],Z=f[1],rt=f[2],ft=f[3];else{D=ct(i,e,-d),i=D.x,e=D.y,D=ct(s,u,-d),s=D.x,u=D.y,i===s&&e===u&&(s+=1,u+=1);var gt=(i-s)/2,Ct=(e-u)/2,Ht=gt*gt/(t*t)+Ct*Ct/(r*r);Ht>1&&(Ht=Math.sqrt(Ht),t=Ht*t,r=Ht*r);var ne=t*t,re=r*r,Me=(a===o?-1:1)*Math.sqrt(Math.abs((ne*re-ne*Ct*Ct-re*gt*gt)/(ne*Ct*Ct+re*gt*gt)));rt=Me*t*Ct/r+(i+s)/2,ft=Me*-r*gt/t+(e+u)/2,z=Math.asin(((e-ft)/r).toFixed(9)),Z=Math.asin(((u-ft)/r).toFixed(9)),z=i<rt?Math.PI-z:z,Z=s<rt?Math.PI-Z:Z,z<0&&(z=Math.PI*2+z),Z<0&&(Z=Math.PI*2+Z),o&&z>Z&&(z=z-Math.PI*2),!o&&Z>z&&(Z=Z-Math.PI*2)}var je=Z-z;if(Math.abs(je)>c){var Re=Z,ir=s,Sr=u;Z=z+c*(o&&Z>z?1:-1),s=rt+t*Math.cos(Z),u=ft+r*Math.sin(Z),A=me(s,u,t,r,n,0,o,ir,Sr,[Z,Re,rt,ft])}je=Z-z;var pn=Math.cos(z),Gn=Math.sin(z),Pn=Math.cos(Z),sn=Math.sin(Z),Jn=Math.tan(je/4),Kn=4/3*t*Jn,un=4/3*r*Jn,Dn=[i,e],Yn=[i+Kn*Gn,e-un*pn],Xn=[s+Kn*sn,u-un*Pn],ia=[s,u];if(Yn[0]=2*Dn[0]-Yn[0],Yn[1]=2*Dn[1]-Yn[1],f)return[Yn,Xn,ia].concat(A);A=[Yn,Xn,ia].concat(A).join().split(",");for(var ha=[],ja=0,oi=A.length;ja<oi;ja++)ha[ja]=ja%2?ct(A[ja-1],A[ja],d).y:ct(A[ja],A[ja+1],d).x;return ha},De=function(i,e){var t=Bt(i),r=e&&Bt(e),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=[],s=[],u="",f="",c,d=function(gt,Ct,Ht){var ne,re;if(!gt)return["C",Ct.x,Ct.y,Ct.x,Ct.y,Ct.x,Ct.y];switch(!(gt[0]in{T:1,Q:1})&&(Ct.qx=Ct.qy=null),gt[0]){case"M":Ct.X=gt[1],Ct.Y=gt[2];break;case"A":gt=["C"].concat(me.apply(0,[Ct.x,Ct.y].concat(gt.slice(1))));break;case"S":Ht==="C"||Ht==="S"?(ne=Ct.x*2-Ct.bx,re=Ct.y*2-Ct.by):(ne=Ct.x,re=Ct.y),gt=["C",ne,re].concat(gt.slice(1));break;case"T":Ht==="Q"||Ht==="T"?(Ct.qx=Ct.x*2-Ct.qx,Ct.qy=Ct.y*2-Ct.qy):(Ct.qx=Ct.x,Ct.qy=Ct.y),gt=["C"].concat(pe(Ct.x,Ct.y,Ct.qx,Ct.qy,gt[1],gt[2]));break;case"Q":Ct.qx=gt[1],Ct.qy=gt[2],gt=["C"].concat(pe(Ct.x,Ct.y,gt[1],gt[2],gt[3],gt[4]));break;case"L":gt=["C"].concat(qt(Ct.x,Ct.y,gt[1],gt[2]));break;case"H":gt=["C"].concat(qt(Ct.x,Ct.y,gt[1],Ct.y));break;case"V":gt=["C"].concat(qt(Ct.x,Ct.y,Ct.x,gt[1]));break;case"Z":gt=["C"].concat(qt(Ct.x,Ct.y,Ct.X,Ct.Y));break;default:break}return gt},A=function(gt,Ct){if(gt[Ct].length>7){gt[Ct].shift();for(var Ht=gt[Ct];Ht.length;)o[Ct]="A",r&&(s[Ct]="A"),gt.splice(Ct++,0,["C"].concat(Ht.splice(0,6)));gt.splice(Ct,1),c=Math.max(t.length,r&&r.length||0)}},D=function(gt,Ct,Ht,ne,re){gt&&Ct&&gt[re][0]==="M"&&Ct[re][0]!=="M"&&(Ct.splice(re,0,["M",ne.x,ne.y]),Ht.bx=0,Ht.by=0,Ht.x=gt[re][1],Ht.y=gt[re][2],c=Math.max(t.length,r&&r.length||0))};c=Math.max(t.length,r&&r.length||0);for(var z=0;z<c;z++){t[z]&&(u=t[z][0]),u!=="C"&&(o[z]=u,z&&(f=o[z-1])),t[z]=d(t[z],n,f),o[z]!=="A"&&u==="C"&&(o[z]="C"),A(t,z),r&&(r[z]&&(u=r[z][0]),u!=="C"&&(s[z]=u,z&&(f=s[z-1])),r[z]=d(r[z],a,f),s[z]!=="A"&&u==="C"&&(s[z]="C"),A(r,z)),D(t,r,n,a,z),D(r,t,a,n,z);var Z=t[z],rt=r&&r[z],ft=Z.length,ct=r&&rt.length;n.x=Z[ft-2],n.y=Z[ft-1],n.bx=parseFloat(Z[ft-4])||n.x,n.by=parseFloat(Z[ft-3])||n.y,a.bx=r&&(parseFloat(rt[ct-4])||a.x),a.by=r&&(parseFloat(rt[ct-3])||a.y),a.x=r&&rt[ct-2],a.y=r&&rt[ct-1]}return r?[t,r]:t},Ue=/,?([a-z]),?/gi,$e=function(i){return i.join(",").replace(Ue,"$1")},mr=function(i,e,t,r,n){var a=-3*e+9*t-9*r+3*n,o=i*a+6*e-12*t+6*r;return i*o-3*e+3*t},qr=function(i,e,t,r,n,a,o,s,u){u===null&&(u=1),u=u>1?1:u<0?0:u;for(var f=u/2,c=12,d=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],A=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],D=0,z=0;z<c;z++){var Z=f*d[z]+f,rt=mr(Z,i,t,n,o),ft=mr(Z,e,r,a,s),ct=rt*rt+ft*ft;D+=A[z]*Math.sqrt(ct)}return f*D},tn=function(i,e,t,r,n,a,o,s){for(var u=[],f=[[],[]],c,d,A,D,z=0;z<2;++z){if(z===0?(d=6*i-12*t+6*n,c=-3*i+9*t-9*n+3*o,A=3*t-3*i):(d=6*e-12*r+6*a,c=-3*e+9*r-9*a+3*s,A=3*r-3*e),Math.abs(c)<1e-12){if(Math.abs(d)<1e-12)continue;D=-A/d,D>0&&D<1&&u.push(D);continue}var Z=d*d-4*A*c,rt=Math.sqrt(Z);if(!(Z<0)){var ft=(-d+rt)/(2*c);ft>0&&ft<1&&u.push(ft);var ct=(-d-rt)/(2*c);ct>0&&ct<1&&u.push(ct)}}for(var gt=u.length,Ct=gt,Ht;gt--;)D=u[gt],Ht=1-D,f[0][gt]=Ht*Ht*Ht*i+3*Ht*Ht*D*t+3*Ht*D*D*n+D*D*D*o,f[1][gt]=Ht*Ht*Ht*e+3*Ht*Ht*D*r+3*Ht*D*D*a+D*D*D*s;return f[0][Ct]=i,f[1][Ct]=e,f[0][Ct+1]=o,f[1][Ct+1]=s,f[0].length=f[1].length=Ct+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}},Qr=function(i,e,t,r,n,a,o,s){if(!(Math.max(i,t)<Math.min(n,o)||Math.min(i,t)>Math.max(n,o)||Math.max(e,r)<Math.min(a,s)||Math.min(e,r)>Math.max(a,s))){var u=(i*r-e*t)*(n-o)-(i-t)*(n*s-a*o),f=(i*r-e*t)*(a-s)-(e-r)*(n*s-a*o),c=(i-t)*(a-s)-(e-r)*(n-o);if(c){var d=u/c,A=f/c,D=+d.toFixed(2),z=+A.toFixed(2);if(!(D<+Math.min(i,t).toFixed(2)||D>+Math.max(i,t).toFixed(2)||D<+Math.min(n,o).toFixed(2)||D>+Math.max(n,o).toFixed(2)||z<+Math.min(e,r).toFixed(2)||z>+Math.max(e,r).toFixed(2)||z<+Math.min(a,s).toFixed(2)||z>+Math.max(a,s).toFixed(2)))return{x:d,y:A}}}},Tn=function(i,e,t){return e>=i.x&&e<=i.x+i.width&&t>=i.y&&t<=i.y+i.height},Un=function(i,e,t,r,n){if(n)return[["M",+i+ +n,e],["l",t-n*2,0],["a",n,n,0,0,1,n,n],["l",0,r-n*2],["a",n,n,0,0,1,-n,n],["l",n*2-t,0],["a",n,n,0,0,1,-n,-n],["l",0,n*2-r],["a",n,n,0,0,1,n,-n],["z"]];var a=[["M",i,e],["l",t,0],["l",0,r],["l",-t,0],["z"]];return a.parsePathArray=$e,a},dn=function(i,e,t,r){return i===null&&(i=e=t=r=0),e===null&&(e=i.y,t=i.width,r=i.height,i=i.x),{x:i,y:e,width:t,w:t,height:r,h:r,x2:i+t,y2:e+r,cx:i+t/2,cy:e+r/2,r1:Math.min(t,r)/2,r2:Math.max(t,r)/2,r0:Math.sqrt(t*t+r*r)/2,path:Un(i,e,t,r),vb:[i,e,t,r].join(" ")}},ra=function(i,e){return i=dn(i),e=dn(e),Tn(e,i.x,i.y)||Tn(e,i.x2,i.y)||Tn(e,i.x,i.y2)||Tn(e,i.x2,i.y2)||Tn(i,e.x,e.y)||Tn(i,e.x2,e.y)||Tn(i,e.x,e.y2)||Tn(i,e.x2,e.y2)||(i.x<e.x2&&i.x>e.x||e.x<i.x2&&e.x>i.x)&&(i.y<e.y2&&i.y>e.y||e.y<i.y2&&e.y>i.y)},Ha=function(i,e,t,r,n,a,o,s){(0,l.isArray)(i)||(i=[i,e,t,r,n,a,o,s]);var u=tn.apply(null,i);return dn(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},Za=function(i,e,t,r,n,a,o,s,u){var f=1-u,c=Math.pow(f,3),d=Math.pow(f,2),A=u*u,D=A*u,z=c*i+d*3*u*t+f*3*u*u*n+D*o,Z=c*e+d*3*u*r+f*3*u*u*a+D*s,rt=i+2*u*(t-i)+A*(n-2*t+i),ft=e+2*u*(r-e)+A*(a-2*r+e),ct=t+2*u*(n-t)+A*(o-2*n+t),gt=r+2*u*(a-r)+A*(s-2*a+r),Ct=f*i+u*t,Ht=f*e+u*r,ne=f*n+u*o,re=f*a+u*s,Me=90-Math.atan2(rt-ct,ft-gt)*180/Math.PI;return{x:z,y:Z,m:{x:rt,y:ft},n:{x:ct,y:gt},start:{x:Ct,y:Ht},end:{x:ne,y:re},alpha:Me}},Ua=function(i,e,t){var r=Ha(i),n=Ha(e);if(!ra(r,n))return t?0:[];for(var a=qr.apply(0,i),o=qr.apply(0,e),s=~~(a/8),u=~~(o/8),f=[],c=[],d={},A=t?0:[],D=0;D<s+1;D++){var z=Za.apply(0,i.concat(D/s));f.push({x:z.x,y:z.y,t:D/s})}for(var D=0;D<u+1;D++){var z=Za.apply(0,e.concat(D/u));c.push({x:z.x,y:z.y,t:D/u})}for(var D=0;D<s;D++)for(var Z=0;Z<u;Z++){var rt=f[D],ft=f[D+1],ct=c[Z],gt=c[Z+1],Ct=Math.abs(ft.x-rt.x)<.001?"y":"x",Ht=Math.abs(gt.x-ct.x)<.001?"y":"x",ne=Qr(rt.x,rt.y,ft.x,ft.y,ct.x,ct.y,gt.x,gt.y);if(ne){if(d[ne.x.toFixed(4)]===ne.y.toFixed(4))continue;d[ne.x.toFixed(4)]=ne.y.toFixed(4);var re=rt.t+Math.abs((ne[Ct]-rt[Ct])/(ft[Ct]-rt[Ct]))*(ft.t-rt.t),Me=ct.t+Math.abs((ne[Ht]-ct[Ht])/(gt[Ht]-ct[Ht]))*(gt.t-ct.t);re>=0&&re<=1&&Me>=0&&Me<=1&&(t?A+=1:A.push({x:ne.x,y:ne.y,t1:re,t2:Me}))}}return A},Ma=function(i,e,t){i=De(i),e=De(e);for(var r,n,a,o,s,u,f,c,d,A,D=t?0:[],z=0,Z=i.length;z<Z;z++){var rt=i[z];if(rt[0]==="M")r=s=rt[1],n=u=rt[2];else{rt[0]==="C"?(d=[r,n].concat(rt.slice(1)),r=d[6],n=d[7]):(d=[r,n,r,n,s,u,s,u],r=s,n=u);for(var ft=0,ct=e.length;ft<ct;ft++){var gt=e[ft];if(gt[0]==="M")a=f=gt[1],o=c=gt[2];else{gt[0]==="C"?(A=[a,o].concat(gt.slice(1)),a=A[6],o=A[7]):(A=[a,o,a,o,f,c,f,c],a=f,o=c);var Ct=Ua(d,A,t);if(t)D+=Ct;else{for(var Ht=0,ne=Ct.length;Ht<ne;Ht++)Ct[Ht].segment1=z,Ct[Ht].segment2=ft,Ct[Ht].bez1=d,Ct[Ht].bez2=A;D=D.concat(Ct)}}}}}return D},Ra=function(i,e){return Ma(i,e)};function Do(i,e){var t=[],r=[];function n(a,o){if(a.length===1)t.push(a[0]),r.push(a[0]);else{for(var s=[],u=0;u<a.length-1;u++)u===0&&t.push(a[0]),u===a.length-2&&r.push(a[u+1]),s[u]=[(1-o)*a[u][0]+o*a[u+1][0],(1-o)*a[u][1]+o*a[u+1][1]];n(s,o)}}return i.length&&n(i,e),{left:t,right:r.reverse()}}function Eo(i,e,t){var r=[[i[1],i[2]]];t=t||2;var n=[];e[0]==="A"?(r.push(e[6]),r.push(e[7])):e[0]==="C"?(r.push([e[1],e[2]]),r.push([e[3],e[4]]),r.push([e[5],e[6]])):e[0]==="S"||e[0]==="Q"?(r.push([e[1],e[2]]),r.push([e[3],e[4]])):r.push([e[1],e[2]]);for(var a=r,o=1/t,s=0;s<t-1;s++){var u=o/(1-o*s),f=Do(a,u);n.push(f.left),a=f.right}n.push(a);var c=n.map(function(d){var A=[];return d.length===4&&(A.push("C"),A=A.concat(d[2])),d.length>=3&&(d.length===3&&A.push("Q"),A=A.concat(d[1])),d.length===2&&A.push("L"),A=A.concat(d[d.length-1]),A});return c}var bo=function(i,e,t){if(t===1)return[[].concat(i)];var r=[];if(e[0]==="L"||e[0]==="C"||e[0]==="Q")r=r.concat(Eo(i,e,t));else{var n=[].concat(i);n[0]==="M"&&(n[0]="L");for(var a=0;a<=t-1;a++)r.push(n)}return r},wo=function(i,e){if(i.length===1)return i;var t=i.length-1,r=e.length-1,n=t/r,a=[];if(i.length===1&&i[0][0]==="M"){for(var o=0;o<r-t;o++)i.push(i[0]);return i}for(var o=0;o<r;o++){var s=Math.floor(n*o);a[s]=(a[s]||0)+1}var u=a.reduce(function(f,c,d){return d===t?f.concat(i[t]):f.concat(bo(i[d],i[d+1],c))},[]);return u.unshift(i[0]),(e[r]==="Z"||e[r]==="z")&&u.push("Z"),u},So=function(i,e){if(i.length!==e.length)return!1;var t=!0;return(0,l.each)(i,function(r,n){if(r!==e[n])return t=!1,!1}),t};function ko(i,e,t){var r=null,n=t;return e<n&&(n=e,r="add"),i<n&&(n=i,r="del"),{type:r,min:n}}var Bo=function(i,e){var t=i.length,r=e.length,n,a,o=0;if(t===0||r===0)return null;for(var s=[],u=0;u<=t;u++)s[u]=[],s[u][0]={min:u};for(var f=0;f<=r;f++)s[0][f]={min:f};for(var u=1;u<=t;u++){n=i[u-1];for(var f=1;f<=r;f++){a=e[f-1],So(n,a)?o=0:o=1;var c=s[u-1][f].min+1,d=s[u][f-1].min+1,A=s[u-1][f-1].min+o;s[u][f]=ko(c,d,A)}}return s},ci=function(i,e){var t=Bo(i,e),r=i.length,n=e.length,a=[],o=1,s=1;if(t[r][n].min!==r){for(var u=1;u<=r;u++){var f=t[u][u].min;s=u;for(var c=o;c<=n;c++)t[u][c].min<f&&(f=t[u][c].min,s=c);o=s,t[u][o].type&&a.push({index:u-1,type:t[u][o].type})}for(var u=a.length-1;u>=0;u--)o=a[u].index,a[u].type==="add"?i.splice(o,0,[].concat(i[o])):i.splice(o,1)}r=i.length;var d=n-r;if(r<n)for(var u=0;u<d;u++)i[r-1][0]==="z"||i[r-1][0]==="Z"?i.splice(r-2,0,i[r-2]):i.push(i[r-1]),r+=1;return i};function Fi(i,e,t){for(var r=[].concat(i),n,a=1/(t+1),o=$s(e)[0],s=1;s<=t;s++)a*=s,n=Math.floor(i.length*a),n===0?r.unshift([o[0]*a+i[n][0]*(1-a),o[1]*a+i[n][1]*(1-a)]):r.splice(n,0,[o[0]*a+i[n][0]*(1-a),o[1]*a+i[n][1]*(1-a)]);return r}function $s(i){var e=[];switch(i[0]){case"M":e.push([i[1],i[2]]);break;case"L":e.push([i[1],i[2]]);break;case"A":e.push([i[6],i[7]]);break;case"Q":e.push([i[3],i[4]]),e.push([i[1],i[2]]);break;case"T":e.push([i[1],i[2]]);break;case"C":e.push([i[5],i[6]]),e.push([i[1],i[2]]),e.push([i[3],i[4]]);break;case"S":e.push([i[3],i[4]]),e.push([i[1],i[2]]);break;case"H":e.push([i[1],i[1]]);break;case"V":e.push([i[1],i[1]]);break;default:}return e}var Fs=function(i,e){if(i.length<=1)return i;for(var t,r=0;r<e.length;r++)if(i[r][0]!==e[r][0])switch(t=$s(i[r]),e[r][0]){case"M":i[r]=["M"].concat(t[0]);break;case"L":i[r]=["L"].concat(t[0]);break;case"A":i[r]=[].concat(e[r]),i[r][6]=t[0][0],i[r][7]=t[0][1];break;case"Q":if(t.length<2)if(r>0)t=Fi(t,i[r-1],1);else{i[r]=e[r];break}i[r]=["Q"].concat(t.reduce(function(n,a){return n.concat(a)},[]));break;case"T":i[r]=["T"].concat(t[0]);break;case"C":if(t.length<3)if(r>0)t=Fi(t,i[r-1],2);else{i[r]=e[r];break}i[r]=["C"].concat(t.reduce(function(n,a){return n.concat(a)},[]));break;case"S":if(t.length<2)if(r>0)t=Fi(t,i[r-1],1);else{i[r]=e[r];break}i[r]=["S"].concat(t.reduce(function(n,a){return n.concat(a)},[]));break;default:i[r]=e[r]}return i},Ms=function(){function i(e,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=e,this.name=e,this.originalEvent=t,this.timeStamp=t.timeStamp}return i.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},i.prototype.stopPropagation=function(){this.propagationStopped=!0},i.prototype.toString=function(){var e=this.type;return"[Event (type="+e+")]"},i.prototype.save=function(){},i.prototype.restore=function(){},i}(),vu=Ms;function Rf(i,e){var t=i.indexOf(e);t!==-1&&i.splice(t,1)}var bc=typeof window!="undefined"&&typeof window.document!="undefined";function xc(i,e){if(i.isCanvas())return!0;for(var t=e.getParent(),r=!1;t;){if(t===i){r=!0;break}t=t.getParent()}return r}function kf(i){return i.cfg.visible&&i.cfg.capture}var Zc=function(i){(0,y.__extends)(e,i);function e(t){var r=i.call(this)||this;r.destroyed=!1;var n=r.getDefaultCfg();return r.cfg=(0,l.mix)(n,t),r}return e.prototype.getDefaultCfg=function(){return{}},e.prototype.get=function(t){return this.cfg[t]},e.prototype.set=function(t,r){this.cfg[t]=r},e.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},e}(q),Bf=Zc,ju=_(734155),Vu=function(i,e,t){if(t||arguments.length===2)for(var r=0,n=e.length,a;r<n;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return i.concat(a||Array.prototype.slice.call(e))},Ff=function(){function i(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"}return i}(),Ec=function(){function i(e){this.version=e,this.type="node",this.name="node",this.os=ju.platform}return i}(),Kc=function(){function i(e,t,r,n){this.name=e,this.version=t,this.os=r,this.bot=n,this.type="bot-device"}return i}(),pu=function(){function i(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return i}(),wc=function(){function i(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return i}(),ta=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Su=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,si=3,zf=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",ta]],Mu=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function nu(i){return i?uf(i):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new wc:typeof navigator!="undefined"?uf(navigator.userAgent):Sc()}function Gf(i){return i!==""&&zf.reduce(function(e,t){var r=t[0],n=t[1];if(e)return e;var a=n.exec(i);return!!a&&[r,a]},!1)}function sf(i){var e=Gf(i);return e?e[0]:null}function uf(i){var e=Gf(i);if(!e)return null;var t=e[0],r=e[1];if(t==="searchbot")return new pu;var n=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);n?n.length<si&&(n=Vu(Vu([],n,!0),zs(si-n.length),!0)):n=[];var a=n.join("."),o=Uf(i),s=Su.exec(i);return s&&s[1]?new Kc(t,a,o,s[1]):new Ff(t,a,o)}function Uf(i){for(var e=0,t=Mu.length;e<t;e++){var r=Mu[e],n=r[0],a=r[1],o=a.exec(i);if(o)return n}return null}function Sc(){var i=typeof ju!="undefined"&&ju.version;return i?new Ec(ju.version.slice(1)):null}function zs(i){for(var e=[],t=0;t<i;t++)e.push("0");return e}function lt(i,e){var t=[],r=i[0],n=i[1],a=i[2],o=i[3],s=i[4],u=i[5],f=i[6],c=i[7],d=i[8],A=e[0],D=e[1],z=e[2],Z=e[3],rt=e[4],ft=e[5],ct=e[6],gt=e[7],Ct=e[8];return t[0]=A*r+D*o+z*f,t[1]=A*n+D*s+z*c,t[2]=A*a+D*u+z*d,t[3]=Z*r+rt*o+ft*f,t[4]=Z*n+rt*s+ft*c,t[5]=Z*a+rt*u+ft*d,t[6]=ct*r+gt*o+Ct*f,t[7]=ct*n+gt*s+Ct*c,t[8]=ct*a+gt*u+Ct*d,t}function It(i,e){var t=[],r=e[0],n=e[1];return t[0]=i[0]*r+i[3]*n+i[6],t[1]=i[1]*r+i[4]*n+i[7],t}function jt(i){var e=[],t=i[0],r=i[1],n=i[2],a=i[3],o=i[4],s=i[5],u=i[6],f=i[7],c=i[8],d=c*o-s*f,A=-c*a+s*u,D=f*a-o*u,z=t*d+r*A+n*D;return z?(z=1/z,e[0]=d*z,e[1]=(-c*r+n*f)*z,e[2]=(s*r-n*o)*z,e[3]=A*z,e[4]=(c*t-n*u)*z,e[5]=(-s*t+n*a)*z,e[6]=D*z,e[7]=(-f*t+r*u)*z,e[8]=(o*t-r*a)*z,e):null}var le=dt,Ae="matrix",vr=["zIndex","capture","visible","type"],yr=["repeat"],Zr=":",Cn="*";function An(i){for(var e=[],t=0;t<i.length;t++)(0,l.isArray)(i[t])?e.push([].concat(i[t])):e.push(i[t]);return e}function Vn(i,e){var t={},r=e.attrs;for(var n in i)t[n]=r[n];return t}function aa(i,e){var t={},r=e.attr();return(0,l.each)(i,function(n,a){yr.indexOf(a)===-1&&!(0,l.isEqual)(r[a],n)&&(t[a]=n)}),t}function Zn(i,e){if(e.onFrame)return i;var t=e.startTime,r=e.delay,n=e.duration,a=Object.prototype.hasOwnProperty;return(0,l.each)(i,function(o){t+r<o.startTime+o.delay+o.duration&&n>o.delay&&(0,l.each)(e.toAttrs,function(s,u){a.call(o.toAttrs,u)&&(delete o.toAttrs[u],delete o.fromAttrs[u])})}),i}var La=function(i){(0,y.__extends)(e,i);function e(t){var r=i.call(this,t)||this;r.attrs={};var n=r.getDefaultAttrs();return(0,l.mix)(n,t.attrs),r.attrs=n,r.initAttrs(n),r.initAnimate(),r}return e.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},e.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},e.prototype.onCanvasChange=function(t){},e.prototype.initAttrs=function(t){},e.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},e.prototype.isGroup=function(){return!1},e.prototype.getParent=function(){return this.get("parent")},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.attr=function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=r[0],o=r[1];if(!a)return this.attrs;if((0,l.isObject)(a)){for(var s in a)this.setAttr(s,a[s]);return this.afterAttrsChange(a),this}return r.length===2?(this.setAttr(a,o),this.afterAttrsChange((t={},t[a]=o,t)),this):this.attrs[a]},e.prototype.isClipped=function(t,r){var n=this.getClip();return n&&!n.isHit(t,r)},e.prototype.setAttr=function(t,r){var n=this.attrs[t];n!==r&&(this.attrs[t]=r,this.onAttrChange(t,r,n))},e.prototype.onAttrChange=function(t,r,n){t==="matrix"&&this.set("totalMatrix",null)},e.prototype.afterAttrsChange=function(t){if(this.cfg.isClipShape){var r=this.cfg.applyTo;r&&r.onCanvasChange("clip")}else this.onCanvasChange("attr")},e.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},e.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},e.prototype.setZIndex=function(t){this.set("zIndex",t);var r=this.getParent();return r&&r.sort(),this},e.prototype.toFront=function(){var t=this.getParent();if(t){var r=t.getChildren(),n=this.get("el"),a=r.indexOf(this);r.splice(a,1),r.push(this),this.onCanvasChange("zIndex")}},e.prototype.toBack=function(){var t=this.getParent();if(t){var r=t.getChildren(),n=this.get("el"),a=r.indexOf(this);r.splice(a,1),r.unshift(this),this.onCanvasChange("zIndex")}},e.prototype.remove=function(t){t===void 0&&(t=!0);var r=this.getParent();r?(Rf(r.getChildren(),this),r.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),t&&this.destroy()},e.prototype.resetMatrix=function(){this.attr(Ae,this.getDefaultMatrix()),this.onCanvasChange("matrix")},e.prototype.getMatrix=function(){return this.attr(Ae)},e.prototype.setMatrix=function(t){this.attr(Ae,t),this.onCanvasChange("matrix")},e.prototype.getTotalMatrix=function(){var t=this.cfg.totalMatrix;if(!t){var r=this.attr("matrix"),n=this.cfg.parentMatrix;n&&r?t=lt(n,r):t=r||n,this.set("totalMatrix",t)}return t},e.prototype.applyMatrix=function(t){var r=this.attr("matrix"),n=null;t&&r?n=lt(t,r):n=r||t,this.set("totalMatrix",n),this.set("parentMatrix",t)},e.prototype.getDefaultMatrix=function(){return null},e.prototype.applyToMatrix=function(t){var r=this.attr("matrix");return r?It(r,t):t},e.prototype.invertFromMatrix=function(t){var r=this.attr("matrix");if(r){var n=jt(r);if(n)return It(n,t)}return t},e.prototype.setClip=function(t){var r=this.getCanvas(),n=null;if(t){var a=this.getShapeBase(),o=(0,l.upperFirst)(t.type),s=a[o];s&&(n=new s({type:t.type,isClipShape:!0,applyTo:this,attrs:t.attrs,canvas:r}))}return this.set("clipShape",n),this.onCanvasChange("clip"),n},e.prototype.getClip=function(){var t=this.cfg.clipShape;return t||null},e.prototype.clone=function(){var t=this,r=this.attrs,n={};(0,l.each)(r,function(s,u){(0,l.isArray)(r[u])?n[u]=An(r[u]):n[u]=r[u]});var a=this.constructor,o=new a({attrs:n});return(0,l.each)(vr,function(s){o.set(s,t.get(s))}),o},e.prototype.destroy=function(){var t=this.destroyed;t||(this.attrs={},i.prototype.destroy.call(this))},e.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},e.prototype.animate=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var n=this.get("timeline");n||(n=this.get("canvas").get("timeline"),this.set("timeline",n));var a=this.get("animations")||[];n.timer||n.initTimer();var o=t[0],s=t[1],u=t[2],f=u===void 0?"easeLinear":u,c=t[3],d=c===void 0?l.noop:c,A=t[4],D=A===void 0?0:A,z,Z,rt,ft,ct;(0,l.isFunction)(o)?(z=o,o={}):(0,l.isObject)(o)&&o.onFrame&&(z=o.onFrame,Z=o.repeat),(0,l.isObject)(s)?(ct=s,s=ct.duration,f=ct.easing||"easeLinear",D=ct.delay||0,Z=ct.repeat||Z||!1,d=ct.callback||l.noop,rt=ct.pauseCallback||l.noop,ft=ct.resumeCallback||l.noop):((0,l.isNumber)(d)&&(D=d,d=null),(0,l.isFunction)(f)?(d=f,f="easeLinear"):f=f||"easeLinear");var gt=aa(o,this),Ct={fromAttrs:Vn(gt,this),toAttrs:gt,duration:s,easing:f,repeat:Z,callback:d,pauseCallback:rt,resumeCallback:ft,delay:D,startTime:n.getTime(),id:(0,l.uniqueId)(),onFrame:z,pathFormatted:!1};a.length>0?a=Zn(a,Ct):n.addAnimator(this),a.push(Ct),this.set("animations",a),this.set("_pause",{isPaused:!1})}},e.prototype.stopAnimate=function(t){var r=this;t===void 0&&(t=!0);var n=this.get("animations");(0,l.each)(n,function(a){t&&(a.onFrame?r.attr(a.onFrame(1)):r.attr(a.toAttrs)),a.callback&&a.callback()}),this.set("animating",!1),this.set("animations",[])},e.prototype.pauseAnimate=function(){var t=this.get("timeline"),r=this.get("animations"),n=t.getTime();return(0,l.each)(r,function(a){a._paused=!0,a._pauseTime=n,a.pauseCallback&&a.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:n}),this},e.prototype.resumeAnimate=function(){var t=this.get("timeline"),r=t.getTime(),n=this.get("animations"),a=this.get("_pause").pauseTime;return(0,l.each)(n,function(o){o.startTime=o.startTime+(r-a),o._paused=!1,o._pauseTime=null,o.resumeCallback&&o.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",n),this},e.prototype.emitDelegation=function(t,r){var n=this,a=r.propagationPath,o=this.getEvents(),s;t==="mouseenter"?s=r.fromShape:t==="mouseleave"&&(s=r.toShape);for(var u=function(A){var D=a[A],z=D.get("name");if(z){if((D.isGroup()||D.isCanvas&&D.isCanvas())&&s&&xc(D,s))return"break";(0,l.isArray)(z)?(0,l.each)(z,function(Z){n.emitDelegateEvent(D,Z,r)}):f.emitDelegateEvent(D,z,r)}},f=this,c=0;c<a.length;c++){var d=u(c);if(d==="break")break}},e.prototype.emitDelegateEvent=function(t,r,n){var a=this.getEvents(),o=r+Zr+n.type;(a[o]||a[Cn])&&(n.name=o,n.currentTarget=t,n.delegateTarget=this,n.delegateObject=t.get("delegateObject"),this.emit(o,n))},e.prototype.translate=function(t,r){t===void 0&&(t=0),r===void 0&&(r=0);var n=this.getMatrix(),a=le(n,[["t",t,r]]);return this.setMatrix(a),this},e.prototype.move=function(t,r){var n=this.attr("x")||0,a=this.attr("y")||0;return this.translate(t-n,r-a),this},e.prototype.moveTo=function(t,r){return this.move(t,r)},e.prototype.scale=function(t,r){var n=this.getMatrix(),a=le(n,[["s",t,r||t]]);return this.setMatrix(a),this},e.prototype.rotate=function(t){var r=this.getMatrix(),n=le(r,[["r",t]]);return this.setMatrix(n),this},e.prototype.rotateAtStart=function(t){var r=this.attr(),n=r.x,a=r.y,o=this.getMatrix(),s=le(o,[["t",-n,-a],["r",t],["t",n,a]]);return this.setMatrix(s),this},e.prototype.rotateAtPoint=function(t,r,n){var a=this.getMatrix(),o=le(a,[["t",-t,-r],["r",n],["t",t,r]]);return this.setMatrix(o),this},e}(Bf),Qa=La,ka={},Ca="_INDEX";function Wa(i,e){if(i.set("canvas",e),i.isGroup()){var t=i.get("children");t.length&&t.forEach(function(r){Wa(r,e)})}}function va(i,e){if(i.set("timeline",e),i.isGroup()){var t=i.get("children");t.length&&t.forEach(function(r){va(r,e)})}}function Ka(i,e){var t=i.getChildren();return t.indexOf(e)>=0}function Ya(i,e,t){t===void 0&&(t=!0),t?e.destroy():(e.set("parent",null),e.set("canvas",null)),Rf(i.getChildren(),e)}function ma(i){return function(e,t){var r=i(e,t);return r===0?e[Ca]-t[Ca]:r}}var ai=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isCanvas=function(){return!1},e.prototype.getBBox=function(){var t=1/0,r=-1/0,n=1/0,a=-1/0,o=this.getChildren().filter(function(u){return u.get("visible")&&(!u.isGroup()||u.isGroup()&&u.getChildren().length>0)});o.length>0?(0,l.each)(o,function(u){var f=u.getBBox(),c=f.minX,d=f.maxX,A=f.minY,D=f.maxY;c<t&&(t=c),d>r&&(r=d),A<n&&(n=A),D>a&&(a=D)}):(t=0,r=0,n=0,a=0);var s={x:t,y:n,minX:t,minY:n,maxX:r,maxY:a,width:r-t,height:a-n};return s},e.prototype.getCanvasBBox=function(){var t=1/0,r=-1/0,n=1/0,a=-1/0,o=this.getChildren().filter(function(u){return u.get("visible")&&(!u.isGroup()||u.isGroup()&&u.getChildren().length>0)});o.length>0?(0,l.each)(o,function(u){var f=u.getCanvasBBox(),c=f.minX,d=f.maxX,A=f.minY,D=f.maxY;c<t&&(t=c),d>r&&(r=d),A<n&&(n=A),D>a&&(a=D)}):(t=0,r=0,n=0,a=0);var s={x:t,y:n,minX:t,minY:n,maxX:r,maxY:a,width:r-t,height:a-n};return s},e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.children=[],t},e.prototype.onAttrChange=function(t,r,n){if(i.prototype.onAttrChange.call(this,t,r,n),t==="matrix"){var a=this.getTotalMatrix();this._applyChildrenMarix(a)}},e.prototype.applyMatrix=function(t){var r=this.getTotalMatrix();i.prototype.applyMatrix.call(this,t);var n=this.getTotalMatrix();n!==r&&this._applyChildrenMarix(n)},e.prototype._applyChildrenMarix=function(t){var r=this.getChildren();(0,l.each)(r,function(n){n.applyMatrix(t)})},e.prototype.addShape=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=t[1];(0,l.isObject)(n)?a=n:a.type=n;var o=ka[a.type];o||(o=(0,l.upperFirst)(a.type),ka[a.type]=o);var s=this.getShapeBase(),u=new s[o](a);return this.add(u),u},e.prototype.addGroup=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=t[1],o;if((0,l.isFunction)(n))a?o=new n(a):o=new n({parent:this});else{var s=n||{},u=this.getGroupBase();o=new u(s)}return this.add(o),o},e.prototype.getCanvas=function(){var t;return this.isCanvas()?t=this:t=this.get("canvas"),t},e.prototype.getShape=function(t,r,n){if(!kf(this))return null;var a=this.getChildren(),o;if(this.isCanvas())o=this._findShape(a,t,r,n);else{var s=[t,r,1];s=this.invertFromMatrix(s),this.isClipped(s[0],s[1])||(o=this._findShape(a,s[0],s[1],n))}return o},e.prototype._findShape=function(t,r,n,a){for(var o=null,s=t.length-1;s>=0;s--){var u=t[s];if(kf(u)&&(u.isGroup()?o=u.getShape(r,n,a):u.isHit(r,n)&&(o=u)),o)break}return o},e.prototype.add=function(t){var r=this.getCanvas(),n=this.getChildren(),a=this.get("timeline"),o=t.getParent();o&&Ya(o,t,!1),t.set("parent",this),r&&Wa(t,r),a&&va(t,a),n.push(t),t.onCanvasChange("add"),this._applyElementMatrix(t)},e.prototype._applyElementMatrix=function(t){var r=this.getTotalMatrix();r&&t.applyMatrix(r)},e.prototype.getChildren=function(){return this.get("children")},e.prototype.sort=function(){var t=this.getChildren();(0,l.each)(t,function(r,n){return r[Ca]=n,r}),t.sort(ma(function(r,n){return r.get("zIndex")-n.get("zIndex")})),this.onCanvasChange("sort")},e.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var t=this.getChildren(),r=t.length-1;r>=0;r--)t[r].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},e.prototype.destroy=function(){this.get("destroyed")||(this.clear(),i.prototype.destroy.call(this))},e.prototype.getFirst=function(){return this.getChildByIndex(0)},e.prototype.getLast=function(){var t=this.getChildren();return this.getChildByIndex(t.length-1)},e.prototype.getChildByIndex=function(t){var r=this.getChildren();return r[t]},e.prototype.getCount=function(){var t=this.getChildren();return t.length},e.prototype.contain=function(t){var r=this.getChildren();return r.indexOf(t)>-1},e.prototype.removeChild=function(t,r){r===void 0&&(r=!0),this.contain(t)&&t.remove(r)},e.prototype.findAll=function(t){var r=[],n=this.getChildren();return(0,l.each)(n,function(a){t(a)&&r.push(a),a.isGroup()&&(r=r.concat(a.findAll(t)))}),r},e.prototype.find=function(t){var r=null,n=this.getChildren();return(0,l.each)(n,function(a){if(t(a)?r=a:a.isGroup()&&(r=a.find(t)),r)return!1}),r},e.prototype.findById=function(t){return this.find(function(r){return r.get("id")===t})},e.prototype.findByClassName=function(t){return this.find(function(r){return r.get("className")===t})},e.prototype.findAllByName=function(t){return this.findAll(function(r){return r.get("name")===t})},e}(Qa),bi=ai,Di=0,xi=0,li=0,co=1e3,Mo,lo,Gs=0,qs=0,Us=0,au=typeof performance=="object"&&performance.now?performance:Date,_u=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(i){setTimeout(i,17)};function Hs(){return qs||(_u(Wf),qs=au.now()+Us)}function Wf(){qs=0}function Yf(){this._call=this._time=this._next=null}Yf.prototype=Cu.prototype={constructor:Yf,restart:function(i,e,t){if(typeof i!="function")throw new TypeError("callback is not a function");t=(t==null?Hs():+t)+(e==null?0:+e),!this._next&&lo!==this&&(lo?lo._next=this:Mo=this,lo=this),this._call=i,this._time=t,cf()},stop:function(){this._call&&(this._call=null,this._time=1/0,cf())}};function Cu(i,e,t){var r=new Yf;return r.restart(i,e,t),r}function ff(){Hs(),++Di;for(var i=Mo,e;i;)(e=qs-i._time)>=0&&i._call.call(null,e),i=i._next;--Di}function Xf(){qs=(Gs=au.now())+Us,Di=xi=0;try{ff()}finally{Di=0,Tu(),qs=0}}function Hu(){var i=au.now(),e=i-Gs;e>co&&(Us-=e,Gs=i)}function Tu(){for(var i,e=Mo,t,r=1/0;e;)e._call?(r>e._time&&(r=e._time),i=e,e=e._next):(t=e._next,e._next=null,e=i?i._next=t:Mo=t);lo=i,cf(r)}function cf(i){if(!Di){xi&&(xi=clearTimeout(xi));var e=i-qs;e>24?(i<1/0&&(xi=setTimeout(Xf,i-au.now()-Us)),li&&(li=clearInterval(li))):(li||(Gs=au.now(),li=setInterval(Hu,co)),Di=1,_u(Xf))}}var Zu=_(952677);function lf(i,e,t){i.prototype=e.prototype=t,t.constructor=i}function Qs(i,e){var t=Object.create(i.prototype);for(var r in e)t[r]=e[r];return t}function Js(){}var Ku=.7,$u=1/Ku,df="\\s*([+-]?\\d+)\\s*",iu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_s="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",kl=/^#([0-9a-f]{3,8})$/,hf=new RegExp("^rgb\\(".concat(df,",").concat(df,",").concat(df,"\\)$")),Bl=new RegExp("^rgb\\(".concat(_s,",").concat(_s,",").concat(_s,"\\)$")),vf=new RegExp("^rgba\\(".concat(df,",").concat(df,",").concat(df,",").concat(iu,"\\)$")),$c=new RegExp("^rgba\\(".concat(_s,",").concat(_s,",").concat(_s,",").concat(iu,"\\)$")),qc=new RegExp("^hsl\\(".concat(iu,",").concat(_s,",").concat(_s,"\\)$")),Qc=new RegExp("^hsla\\(".concat(iu,",").concat(_s,",").concat(_s,",").concat(iu,"\\)$")),Mc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};lf(Js,pf,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:_c,formatHex:_c,formatHex8:Cc,formatHsl:Fl,formatRgb:Jc,toString:Jc});function _c(){return this.rgb().formatHex()}function Cc(){return this.rgb().formatHex8()}function Fl(){return Vf(this).formatHsl()}function Jc(){return this.rgb().formatRgb()}function pf(i){var e,t;return i=(i+"").trim().toLowerCase(),(e=kl.exec(i))?(t=e[1].length,e=parseInt(e[1],16),t===6?tl(e):t===3?new Cs(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?jf(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?jf(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=hf.exec(i))?new Cs(e[1],e[2],e[3],1):(e=Bl.exec(i))?new Cs(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=vf.exec(i))?jf(e[1],e[2],e[3],e[4]):(e=$c.exec(i))?jf(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=qc.exec(i))?qu(e[1],e[2]/100,e[3]/100,1):(e=Qc.exec(i))?qu(e[1],e[2]/100,e[3]/100,e[4]):Mc.hasOwnProperty(i)?tl(Mc[i]):i==="transparent"?new Cs(NaN,NaN,NaN,0):null}function tl(i){return new Cs(i>>16&255,i>>8&255,i&255,1)}function jf(i,e,t,r){return r<=0&&(i=e=t=NaN),new Cs(i,e,t,r)}function el(i){return i instanceof Js||(i=pf(i)),i?(i=i.rgb(),new Cs(i.r,i.g,i.b,i.opacity)):new Cs}function gf(i,e,t,r){return arguments.length===1?el(i):new Cs(i,e,t,r==null?1:r)}function Cs(i,e,t,r){this.r=+i,this.g=+e,this.b=+t,this.opacity=+r}lf(Cs,gf,Qs(Js,{brighter:function(e){return e=e==null?$u:Math.pow($u,e),new Cs(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?Ku:Math.pow(Ku,e),new Cs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},clamp:function(){return new Cs(ar(this.r),ar(this.g),ar(this.b),yf(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rl,formatHex:rl,formatHex8:zl,formatRgb:mf,toString:mf}));function rl(){return"#".concat(Au(this.r)).concat(Au(this.g)).concat(Au(this.b))}function zl(){return"#".concat(Au(this.r)).concat(Au(this.g)).concat(Au(this.b)).concat(Au((isNaN(this.opacity)?1:this.opacity)*255))}function mf(){var i=yf(this.opacity);return"".concat(i===1?"rgb(":"rgba(").concat(ar(this.r),", ").concat(ar(this.g),", ").concat(ar(this.b)).concat(i===1?")":", ".concat(i,")"))}function yf(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function ar(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function Au(i){return i=ar(i),(i<16?"0":"")+i.toString(16)}function qu(i,e,t,r){return r<=0?i=e=t=NaN:t<=0||t>=1?i=e=NaN:e<=0&&(i=NaN),new Ws(i,e,t,r)}function Vf(i){if(i instanceof Ws)return new Ws(i.h,i.s,i.l,i.opacity);if(i instanceof Js||(i=pf(i)),!i)return new Ws;if(i instanceof Ws)return i;i=i.rgb();var e=i.r/255,t=i.g/255,r=i.b/255,n=Math.min(e,t,r),a=Math.max(e,t,r),o=NaN,s=a-n,u=(a+n)/2;return s?(e===a?o=(t-r)/s+(t<r)*6:t===a?o=(r-e)/s+2:o=(e-t)/s+4,s/=u<.5?a+n:2-a-n,o*=60):s=u>0&&u<1?0:o,new Ws(o,s,u,i.opacity)}function Gl(i,e,t,r){return arguments.length===1?Vf(i):new Ws(i,e,t,r==null?1:r)}function Ws(i,e,t,r){this.h=+i,this.s=+e,this.l=+t,this.opacity=+r}lf(Ws,Gl,Qs(Js,{brighter:function(e){return e=e==null?$u:Math.pow($u,e),new Ws(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Ku:Math.pow(Ku,e),new Ws(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Cs(Qu(e>=240?e-240:e+120,a,n),Qu(e,a,n),Qu(e<120?e+240:e-120,a,n),this.opacity)},clamp:function(){return new Ws(nl(this.h),Hf(this.s),Hf(this.l),yf(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=yf(this.opacity);return"".concat(e===1?"hsl(":"hsla(").concat(nl(this.h),", ").concat(Hf(this.s)*100,"%, ").concat(Hf(this.l)*100,"%").concat(e===1?")":", ".concat(e,")"))}}));function nl(i){return i=(i||0)%360,i<0?i+360:i}function Hf(i){return Math.max(0,Math.min(1,i||0))}function Qu(i,e,t){return(i<60?e+(t-e)*i/60:i<180?t:i<240?e+(t-e)*(240-i)/60:e)*255}function Zf(i,e,t,r,n){var a=i*i,o=a*i;return((1-3*i+3*a-o)*e+(4-6*a+3*o)*t+(1+3*i+3*a-3*o)*r+o*n)/6}function al(i){var e=i.length-1;return function(t){var r=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),n=i[r],a=i[r+1],o=r>0?i[r-1]:2*n-a,s=r<e-1?i[r+2]:2*a-n;return Zf((t-r/e)*e,o,n,a,s)}}function Tc(i){var e=i.length;return function(t){var r=Math.floor(((t%=1)<0?++t:t)*e),n=i[(r+e-1)%e],a=i[r%e],o=i[(r+1)%e],s=i[(r+2)%e];return Zf((t-r/e)*e,n,a,o,s)}}var Ho=function(i){return function(){return i}};function Ju(i,e){return function(t){return i+t*e}}function il(i,e,t){return i=Math.pow(i,t),e=Math.pow(e,t)-i,t=1/t,function(r){return Math.pow(i+r*e,t)}}function Ac(i,e){var t=e-i;return t?Ju(i,t>180||t<-180?t-360*Math.round(t/360):t):constant(isNaN(i)?e:i)}function ou(i){return(i=+i)==1?tf:function(e,t){return t-e?il(e,t,i):Ho(isNaN(e)?t:e)}}function tf(i,e){var t=e-i;return t?Ju(i,t):Ho(isNaN(i)?e:i)}var Ou=function i(e){var t=ou(e);function r(n,a){var o=t((n=gf(n)).r,(a=gf(a)).r),s=t(n.g,a.g),u=t(n.b,a.b),f=tf(n.opacity,a.opacity);return function(c){return n.r=o(c),n.g=s(c),n.b=u(c),n.opacity=f(c),n+""}}return r.gamma=i,r}(1);function gu(i){return function(e){var t=e.length,r=new Array(t),n=new Array(t),a=new Array(t),o,s;for(o=0;o<t;++o)s=gf(e[o]),r[o]=s.r||0,n[o]=s.g||0,a[o]=s.b||0;return r=i(r),n=i(n),a=i(a),s.opacity=1,function(u){return s.r=r(u),s.g=n(u),s.b=a(u),s+""}}}var Kf=gu(al),bf=gu(Tc);function Iu(i,e){e||(e=[]);var t=i?Math.min(e.length,i.length):0,r=e.slice(),n;return function(a){for(n=0;n<t;++n)r[n]=i[n]*(1-a)+e[n]*a;return r}}function Du(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function Oc(i,e){return(Du(e)?Iu:$f)(i,e)}function $f(i,e){var t=e?e.length:0,r=i?Math.min(t,i.length):0,n=new Array(r),a=new Array(t),o;for(o=0;o<r;++o)n[o]=xf(i[o],e[o]);for(;o<t;++o)a[o]=e[o];return function(s){for(o=0;o<r;++o)a[o]=n[o](s);return a}}function qf(i,e){var t=new Date;return i=+i,e=+e,function(r){return t.setTime(i*(1-r)+e*r),t}}function Qf(i,e){return i=+i,e=+e,function(t){return i*(1-t)+e*t}}function ol(i,e){var t={},r={},n;(i===null||Zu(i)!=="object")&&(i={}),(e===null||Zu(e)!=="object")&&(e={});for(n in e)n in i?t[n]=xf(i[n],e[n]):r[n]=e[n];return function(a){for(n in t)r[n]=t[n](a);return r}}var Pu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ps=new RegExp(Pu.source,"g");function sl(i){return function(){return i}}function Ul(i){return function(e){return i(e)+""}}function Ic(i,e){var t=Pu.lastIndex=Ps.lastIndex=0,r,n,a,o=-1,s=[],u=[];for(i=i+"",e=e+"";(r=Pu.exec(i))&&(n=Ps.exec(e));)(a=n.index)>t&&(a=e.slice(t,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(n=n[0])?s[o]?s[o]+=n:s[++o]=n:(s[++o]=null,u.push({i:o,x:Qf(r,n)})),t=Ps.lastIndex;return t<e.length&&(a=e.slice(t),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?Ul(u[0].x):sl(e):(e=u.length,function(f){for(var c=0,d;c<e;++c)s[(d=u[c]).i]=d.x(f);return s.join("")})}function xf(i,e){var t=Zu(e),r;return e==null||t==="boolean"?Ho(e):(t==="number"?Qf:t==="string"?(r=pf(e))?(e=r,Ou):Ic:e instanceof pf?Ou:e instanceof Date?qf:Du(e)?Iu:Array.isArray(e)?$f:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?ol:Qf)(i,e)}function ul(i){return+i}function Wl(i){return i*i}function ef(i){return i*(2-i)}function fl(i){return((i*=2)<=1?i*i:--i*(2-i)+1)/2}function Yl(i){return i*i*i}function hd(i){return--i*i*i+1}function cl(i){return((i*=2)<=1?i*i*i:(i-=2)*i*i+2)/2}var Dc=3,vd=function i(e){e=+e;function t(r){return Math.pow(r,e)}return t.exponent=i,t}(Dc),Xl=function i(e){e=+e;function t(r){return 1-Math.pow(1-r,e)}return t.exponent=i,t}(Dc),ll=function i(e){e=+e;function t(r){return((r*=2)<=1?Math.pow(r,e):2-Math.pow(2-r,e))/2}return t.exponent=i,t}(Dc),jl=Math.PI,dl=jl/2;function Vl(i){return+i==1?1:1-Math.cos(i*dl)}function Hl(i){return Math.sin(i*dl)}function hl(i){return(1-Math.cos(jl*i))/2}function su(i){return(Math.pow(2,-10*i)-.0009765625)*1.0009775171065494}function Jf(i){return su(1-+i)}function Pc(i){return 1-su(i)}function tc(i){return((i*=2)<=1?su(1-i):2-su(i-1))/2}function Lc(i){return 1-Math.sqrt(1-i*i)}function vl(i){return Math.sqrt(1- --i*i)}function ec(i){return((i*=2)<=1?1-Math.sqrt(1-i*i):Math.sqrt(1-(i-=2)*i)+1)/2}var Ef=4/11,rc=6/11,pl=8/11,Nc=3/4,Rc=9/11,kc=10/11,nc=15/16,ac=21/22,wf=63/64,Lu=1/Ef/Ef;function Sf(i){return 1-Mf(1-i)}function Mf(i){return(i=+i)<Ef?Lu*i*i:i<pl?Lu*(i-=rc)*i+Nc:i<kc?Lu*(i-=Rc)*i+nc:Lu*(i-=ac)*i+wf}function ic(i){return((i*=2)<=1?1-Mf(1-i):Mf(i-1)+1)/2}var mu=1.70158,Zl=function i(e){e=+e;function t(r){return(r=+r)*r*(e*(r-1)+r)}return t.overshoot=i,t}(mu),Bc=function i(e){e=+e;function t(r){return--r*r*((r+1)*e+r)+1}return t.overshoot=i,t}(mu),Kl=function i(e){e=+e;function t(r){return((r*=2)<1?r*r*((e+1)*r-e):(r-=2)*r*((e+1)*r+e)+2)/2}return t.overshoot=i,t}(mu),_f=2*Math.PI,gl=1,uu=.3,$l=function i(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=_f);function n(a){return e*su(- --a)*Math.sin((r-a)/t)}return n.amplitude=function(a){return i(a,t*_f)},n.period=function(a){return i(e,a)},n}(gl,uu),ml=function i(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=_f);function n(a){return 1-e*su(a=+a)*Math.sin((a+r)/t)}return n.amplitude=function(a){return i(a,t*_f)},n.period=function(a){return i(e,a)},n}(gl,uu),ql=function i(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=_f);function n(a){return((a=a*2-1)<0?e*su(-a)*Math.sin((r-a)/t):2-e*su(a)*Math.sin((r+a)/t))/2}return n.amplitude=function(a){return i(a,t*_f)},n.period=function(a){return i(e,a)},n}(gl,uu),Ql={};function Jl(i){return Ql[i.toLowerCase()]||P[i]}function Ud(i,e){Ql[i.toLowerCase()]=e}var hs=function(i){return["fill","stroke","fillStyle","strokeStyle"].includes(i)},td=function(i){return/^[r,R,L,l]{1}[\s]*\(/.test(i)},rf=[1,0,0,0,1,0,0,0,1];function Nu(i,e,t){var r={},n=e.fromAttrs,a=e.toAttrs;if(!i.destroyed){var o;for(var s in a)if(!(0,l.isEqual)(n[s],a[s]))if(s==="path"){var u=a[s],f=n[s];u.length>f.length?(u=h(a[s]),f=h(n[s]),f=ci(f,u),f=Fs(f,u),e.fromAttrs.path=f,e.toAttrs.path=u):e.pathFormatted||(u=h(a[s]),f=h(n[s]),f=Fs(f,u),e.fromAttrs.path=f,e.toAttrs.path=u,e.pathFormatted=!0),r[s]=[];for(var c=0;c<u.length;c++){for(var d=u[c],A=f[c],D=[],z=0;z<d.length;z++)(0,l.isNumber)(d[z])&&A&&(0,l.isNumber)(A[z])?(o=xf(A[z],d[z]),D.push(o(t))):D.push(d[z]);r[s].push(D)}}else if(s==="matrix"){var Z=Oc(n[s]||rf,a[s]||rf),rt=Z(t);r[s]=rt}else hs(s)&&td(a[s])?r[s]=a[s]:(0,l.isFunction)(a[s])||(o=xf(n[s],a[s]),r[s]=o(t));i.attr(r)}}function ed(i,e,t){var r=e.startTime,n=e.delay;if(t<r+n||e._paused)return!1;var a,o=e.duration,s=e.easing,u=Jl(s);if(t=t-r-e.delay,e.repeat)a=t%o/o,a=u(a);else if(a=t/o,a<1)a=u(a);else return e.onFrame?i.attr(e.onFrame(1)):i.attr(e.toAttrs),!0;if(e.onFrame){var f=e.onFrame(a);i.attr(f)}else Nu(i,e,a);return!1}var yl=function(){function i(e){this.animators=[],this.current=0,this.timer=null,this.canvas=e}return i.prototype.initTimer=function(){var e=this,t=!1,r,n,a;this.timer=Cu(function(o){if(e.current=o,e.animators.length>0){for(var s=e.animators.length-1;s>=0;s--){if(r=e.animators[s],r.destroyed){e.removeAnimator(s);continue}if(!r.isAnimatePaused()){n=r.get("animations");for(var u=n.length-1;u>=0;u--)a=n[u],t=ed(r,a,o),t&&(n.splice(u,1),t=!1,a.callback&&a.callback())}n.length===0&&e.removeAnimator(s)}var f=e.canvas.get("autoDraw");f||e.canvas.draw()}})},i.prototype.addAnimator=function(e){this.animators.push(e)},i.prototype.removeAnimator=function(e){this.animators.splice(e,1)},i.prototype.isAnimating=function(){return!!this.animators.length},i.prototype.stop=function(){this.timer&&this.timer.stop()},i.prototype.stopAllAnimations=function(e){e===void 0&&(e=!0),this.animators.forEach(function(t){t.stopAnimate(e)}),this.animators=[],this.canvas.draw()},i.prototype.getTime=function(){return this.current},i}(),Fc=yl,rd=40,ms=0,Ru=":",Uo=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function Ts(i,e){for(var t in i)if(i.hasOwnProperty(t)&&t.indexOf(Ru+e)>=0)return!0;return!1}function oc(i,e,t){t.name=e,t.target=i,t.currentTarget=i,t.delegateTarget=i,i.emit(e,t)}function pd(i,e,t){if(t.bubbles){var r=void 0,n=!1;if(e==="mouseenter"?(r=t.fromShape,n=!0):e==="mouseleave"&&(n=!0,r=t.toShape),i.isCanvas()&&n)return;if(r&&xc(i,r)){t.bubbles=!1;return}t.name=e,t.currentTarget=i,t.delegateTarget=i,i.emit(e,t)}}var nd=function(){function i(e){var t=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(r){var n=r.type;t._triggerEvent(n,r)},this._onDocumentMove=function(r){var n=t.canvas,a=n.get("el");if(a!==r.target&&(t.dragging||t.currentShape)){var o=t._getPointInfo(r);t.dragging&&t._emitEvent("drag",r,o,t.draggingShape)}},this._onDocumentMouseUp=function(r){var n=t.canvas,a=n.get("el");if(a!==r.target&&t.dragging){var o=t._getPointInfo(r);t.draggingShape&&t._emitEvent("drop",r,o,null),t._emitEvent("dragend",r,o,t.draggingShape),t._afterDrag(t.draggingShape,o,r)}},this.canvas=e.canvas}return i.prototype.init=function(){this._bindEvents()},i.prototype._bindEvents=function(){var e=this,t=this.canvas.get("el");(0,l.each)(Uo,function(r){t.addEventListener(r,e._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},i.prototype._clearEvents=function(){var e=this,t=this.canvas.get("el");(0,l.each)(Uo,function(r){t.removeEventListener(r,e._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},i.prototype._getEventObj=function(e,t,r,n,a,o){var s=new vu(e,t);return s.fromShape=a,s.toShape=o,s.x=r.x,s.y=r.y,s.clientX=r.clientX,s.clientY=r.clientY,s.propagationPath.push(n),s},i.prototype._getShape=function(e,t){return this.canvas.getShape(e.x,e.y,t)},i.prototype._getPointInfo=function(e){var t=this.canvas,r=t.getClientByEvent(e),n=t.getPointByEvent(e);return{x:n.x,y:n.y,clientX:r.x,clientY:r.y}},i.prototype._triggerEvent=function(e,t){var r=this._getPointInfo(t),n=this._getShape(r,t),a=this["_on"+e],o=!1;if(a)a.call(this,r,n,t);else{var s=this.currentShape;e==="mouseenter"||e==="dragenter"||e==="mouseover"?(this._emitEvent(e,t,r,null,null,n),n&&this._emitEvent(e,t,r,n,null,n),e==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",t,r,null)):e==="mouseleave"||e==="dragleave"||e==="mouseout"?(o=!0,s&&this._emitEvent(e,t,r,s,s,null),this._emitEvent(e,t,r,null,s,null),e==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",t,r,null)):this._emitEvent(e,t,r,n,null,null)}if(o||(this.currentShape=n),n&&!n.get("destroyed")){var u=this.canvas,f=u.get("el");f.style.cursor=n.attr("cursor")||u.get("cursor")}},i.prototype._onmousedown=function(e,t,r){r.button===ms&&(this.mousedownShape=t,this.mousedownPoint=e,this.mousedownTimeStamp=r.timeStamp),this._emitEvent("mousedown",r,e,t,null,null)},i.prototype._emitMouseoverEvents=function(e,t,r,n){var a=this.canvas.get("el");r!==n&&(r&&(this._emitEvent("mouseout",e,t,r,r,n),this._emitEvent("mouseleave",e,t,r,r,n),(!n||n.get("destroyed"))&&(a.style.cursor=this.canvas.get("cursor"))),n&&(this._emitEvent("mouseover",e,t,n,r,n),this._emitEvent("mouseenter",e,t,n,r,n)))},i.prototype._emitDragoverEvents=function(e,t,r,n,a){n?(n!==r&&(r&&this._emitEvent("dragleave",e,t,r,r,n),this._emitEvent("dragenter",e,t,n,r,n)),a||this._emitEvent("dragover",e,t,n)):r&&this._emitEvent("dragleave",e,t,r,r,n),a&&this._emitEvent("dragover",e,t,n)},i.prototype._afterDrag=function(e,t,r){e&&(e.set("capture",!0),this.draggingShape=null),this.dragging=!1;var n=this._getShape(t,r);n!==e&&this._emitMouseoverEvents(r,t,e,n),this.currentShape=n},i.prototype._onmouseup=function(e,t,r){if(r.button===ms){var n=this.draggingShape;this.dragging?(n&&this._emitEvent("drop",r,e,t),this._emitEvent("dragend",r,e,n),this._afterDrag(n,e,r)):(this._emitEvent("mouseup",r,e,t),t===this.mousedownShape&&this._emitEvent("click",r,e,t),this.mousedownShape=null,this.mousedownPoint=null)}},i.prototype._ondragover=function(e,t,r){r.preventDefault();var n=this.currentShape;this._emitDragoverEvents(r,e,n,t,!0)},i.prototype._onmousemove=function(e,t,r){var n=this.canvas,a=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(r,e,a,t,!1),this._emitEvent("drag",r,e,o);else{var s=this.mousedownPoint;if(s){var u=this.mousedownShape,f=r.timeStamp,c=f-this.mousedownTimeStamp,d=s.clientX-e.clientX,A=s.clientY-e.clientY,D=d*d+A*A;c>120||D>rd?u&&u.get("draggable")?(o=this.mousedownShape,o.set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",r,e,o),this.mousedownShape=null,this.mousedownPoint=null):!u&&n.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",r,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t)):(this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t))}else this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t)}},i.prototype._emitEvent=function(e,t,r,n,a,o){var s=this._getEventObj(e,t,r,n,a,o);if(n){s.shape=n,oc(n,e,s);for(var u=n.getParent();u;)u.emitDelegation(e,s),s.propagationStopped||pd(u,e,s),s.propagationPath.push(u),u=u.getParent()}else{var f=this.canvas;oc(f,e,s)}},i.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},i}(),gd=nd,ad="px",bl=nu(),md=bl&&bl.name==="firefox",yd=function(i){(0,y.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.initContainer(),r.initDom(),r.initEvents(),r.initTimeline(),r}return e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.cursor="default",t.supportCSSTransform=!1,t},e.prototype.initContainer=function(){var t=this.get("container");(0,l.isString)(t)&&(t=document.getElementById(t),this.set("container",t))},e.prototype.initDom=function(){var t=this.createDom();this.set("el",t);var r=this.get("container");r.appendChild(t),this.setDOMSize(this.get("width"),this.get("height"))},e.prototype.initEvents=function(){var t=new gd({canvas:this});t.init(),this.set("eventController",t)},e.prototype.initTimeline=function(){var t=new Fc(this);this.set("timeline",t)},e.prototype.setDOMSize=function(t,r){var n=this.get("el");bc&&(n.style.width=t+ad,n.style.height=r+ad)},e.prototype.changeSize=function(t,r){this.setDOMSize(t,r),this.set("width",t),this.set("height",r),this.onCanvasChange("changeSize")},e.prototype.getRenderer=function(){return this.get("renderer")},e.prototype.getCursor=function(){return this.get("cursor")},e.prototype.setCursor=function(t){this.set("cursor",t);var r=this.get("el");bc&&r&&(r.style.cursor=t)},e.prototype.getPointByEvent=function(t){var r=this.get("supportCSSTransform");if(r){if(md&&!(0,l.isNil)(t.layerX)&&t.layerX!==t.offsetX)return{x:t.layerX,y:t.layerY};if(!(0,l.isNil)(t.offsetX))return{x:t.offsetX,y:t.offsetY}}var n=this.getClientByEvent(t),a=n.x,o=n.y;return this.getPointByClient(a,o)},e.prototype.getClientByEvent=function(t){var r=t;return t.touches&&(t.type==="touchend"?r=t.changedTouches[0]:r=t.touches[0]),{x:r.clientX,y:r.clientY}},e.prototype.getPointByClient=function(t,r){var n=this.get("el"),a=n.getBoundingClientRect();return{x:t-a.left,y:r-a.top}},e.prototype.getClientByPoint=function(t,r){var n=this.get("el"),a=n.getBoundingClientRect();return{x:t+a.left,y:r+a.top}},e.prototype.draw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.parentNode.removeChild(t)},e.prototype.clearEvents=function(){var t=this.get("eventController");t.destroy()},e.prototype.isCanvas=function(){return!0},e.prototype.getParent=function(){return null},e.prototype.destroy=function(){var t=this.get("timeline");this.get("destroyed")||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),i.prototype.destroy.call(this))},e}(bi),id=yd,bd=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isGroup=function(){return!0},e.prototype.isEntityGroup=function(){return!1},e.prototype.clone=function(){for(var t=i.prototype.clone.call(this),r=this.getChildren(),n=0;n<r.length;n++){var a=r[n];t.add(a.clone())}return t},e}(bi),xl=bd,El=function(i){(0,y.__extends)(e,i);function e(t){return i.call(this,t)||this}return e.prototype._isInBBox=function(t,r){var n=this.getBBox();return n.minX<=t&&n.maxX>=t&&n.minY<=r&&n.maxY>=r},e.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},e.prototype.getBBox=function(){var t=this.cfg.bbox;return t||(t=this.calculateBBox(),this.set("bbox",t)),t},e.prototype.getCanvasBBox=function(){var t=this.cfg.canvasBBox;return t||(t=this.calculateCanvasBBox(),this.set("canvasBBox",t)),t},e.prototype.applyMatrix=function(t){i.prototype.applyMatrix.call(this,t),this.set("canvasBBox",null)},e.prototype.calculateCanvasBBox=function(){var t=this.getBBox(),r=this.getTotalMatrix(),n=t.minX,a=t.minY,o=t.maxX,s=t.maxY;if(r){var u=It(r,[t.minX,t.minY]),f=It(r,[t.maxX,t.minY]),c=It(r,[t.minX,t.maxY]),d=It(r,[t.maxX,t.maxY]);n=Math.min(u[0],f[0],c[0],d[0]),o=Math.max(u[0],f[0],c[0],d[0]),a=Math.min(u[1],f[1],c[1],d[1]),s=Math.max(u[1],f[1],c[1],d[1])}var A=this.attrs;if(A.shadowColor){var D=A.shadowBlur,z=D===void 0?0:D,Z=A.shadowOffsetX,rt=Z===void 0?0:Z,ft=A.shadowOffsetY,ct=ft===void 0?0:ft,gt=n-z+rt,Ct=o+z+rt,Ht=a-z+ct,ne=s+z+ct;n=Math.min(n,gt),o=Math.max(o,Ct),a=Math.min(a,Ht),s=Math.max(s,ne)}return{x:n,y:a,minX:n,minY:a,maxX:o,maxY:s,width:o-n,height:s-a}},e.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},e.prototype.isClipShape=function(){return this.get("isClipShape")},e.prototype.isInShape=function(t,r){return!1},e.prototype.isOnlyHitBox=function(){return!1},e.prototype.isHit=function(t,r){var n=this.get("startArrowShape"),a=this.get("endArrowShape"),o=[t,r,1];o=this.invertFromMatrix(o);var s=o[0],u=o[1],f=this._isInBBox(s,u);return this.isOnlyHitBox()?f:!!(f&&!this.isClipped(s,u)&&(this.isInShape(s,u)||n&&n.isHit(s,u)||a&&a.isHit(s,u)))},e}(Qa),sc=El,wl=new Map;function fu(i,e){wl.set(i,e)}function Sl(i){return wl.get(i)}function Ml(i){var e=i.attr(),t=e.x,r=e.y,n=e.width,a=e.height;return{x:t,y:r,width:n,height:a}}function uc(i){var e=i.attr(),t=e.x,r=e.y,n=e.r;return{x:t-n,y:r-n,width:n*2,height:n*2}}function Ot(i,e,t,r){var n=i-t,a=e-r;return Math.sqrt(n*n+a*a)}function Ce(i,e){return Math.abs(i-e)<.001}function Ke(i,e){var t=(0,l.min)(i),r=(0,l.min)(e),n=(0,l.max)(i),a=(0,l.max)(e);return{x:t,y:r,width:n-t,height:a-r}}function Hr(i,e,t,r){return{minX:(0,l.min)([i,t]),maxX:(0,l.max)([i,t]),minY:(0,l.min)([e,r]),maxY:(0,l.max)([e,r])}}function hn(i){return(i+Math.PI*2)%(Math.PI*2)}var Br={box:function(i,e,t,r){return Ke([i,t],[e,r])},length:function(i,e,t,r){return Ot(i,e,t,r)},pointAt:function(i,e,t,r,n){return{x:(1-n)*i+n*t,y:(1-n)*e+n*r}},pointDistance:function(i,e,t,r,n,a){var o=(t-i)*(n-i)+(r-e)*(a-e);if(o<0)return Ot(i,e,n,a);var s=(t-i)*(t-i)+(r-e)*(r-e);return o>s?Ot(t,r,n,a):this.pointToLine(i,e,t,r,n,a)},pointToLine:function(i,e,t,r,n,a){var o=[t-i,r-e];if(oa.exactEquals(o,[0,0]))return Math.sqrt((n-i)*(n-i)+(a-e)*(a-e));var s=[-o[1],o[0]];oa.normalize(s,s);var u=[n-i,a-e];return Math.abs(oa.dot(u,s))},tangentAngle:function(i,e,t,r){return Math.atan2(r-e,t-i)}},Jr=1e-4;function On(i,e,t,r,n,a){var o,s=1/0,u=[t,r],f=20;a&&a>200&&(f=a/10);for(var c=1/f,d=c/10,A=0;A<=f;A++){var D=A*c,z=[n.apply(null,i.concat([D])),n.apply(null,e.concat([D]))],Z=Ot(u[0],u[1],z[0],z[1]);Z<s&&(o=D,s=Z)}if(o===0)return{x:i[0],y:e[0]};if(o===1){var rt=i.length;return{x:i[rt-1],y:e[rt-1]}}s=1/0;for(var A=0;A<32&&!(d<Jr);A++){var ft=o-d,ct=o+d,z=[n.apply(null,i.concat([ft])),n.apply(null,e.concat([ft]))],Z=Ot(u[0],u[1],z[0],z[1]);if(ft>=0&&Z<s)o=ft,s=Z;else{var gt=[n.apply(null,i.concat([ct])),n.apply(null,e.concat([ct]))],Ct=Ot(u[0],u[1],gt[0],gt[1]);ct<=1&&Ct<s?(o=ct,s=Ct):d*=.5}}return{x:n.apply(null,i.concat([o])),y:n.apply(null,e.concat([o]))}}function Rn(i,e){for(var t=0,r=i.length,n=0;n<r;n++){var a=i[n],o=e[n],s=i[(n+1)%r],u=e[(n+1)%r];t+=Ot(a,o,s,u)}return t/2}function In(i,e,t,r){var n=1-r;return n*n*i+2*r*n*e+r*r*t}function Ln(i,e,t){var r=i+t-2*e;if(Ce(r,0))return[.5];var n=(i-e)/r;return n<=1&&n>=0?[n]:[]}function Fn(i,e,t,r){return 2*(1-r)*(e-i)+2*r*(t-e)}function v(i,e,t,r,n,a,o){var s=In(i,t,n,o),u=In(e,r,a,o),f=Br.pointAt(i,e,t,r,o),c=Br.pointAt(t,r,n,a,o);return[[i,e,f.x,f.y,s,u],[s,u,c.x,c.y,n,a]]}function N(i,e,t,r,n,a,o){if(o===0)return(Ot(i,e,t,r)+Ot(t,r,n,a)+Ot(i,e,n,a))/2;var s=v(i,e,t,r,n,a,.5),u=s[0],f=s[1];return u.push(o-1),f.push(o-1),N.apply(null,u)+N.apply(null,f)}var K={box:function(i,e,t,r,n,a){var o=Ln(i,t,n)[0],s=Ln(e,r,a)[0],u=[i,n],f=[e,a];return o!==void 0&&u.push(In(i,t,n,o)),s!==void 0&&f.push(In(e,r,a,s)),Ke(u,f)},length:function(i,e,t,r,n,a){return N(i,e,t,r,n,a,3)},nearestPoint:function(i,e,t,r,n,a,o,s){return On([i,t,n],[e,r,a],o,s,In)},pointDistance:function(i,e,t,r,n,a,o,s){var u=this.nearestPoint(i,e,t,r,n,a,o,s);return Ot(u.x,u.y,o,s)},interpolationAt:In,pointAt:function(i,e,t,r,n,a,o){return{x:In(i,t,n,o),y:In(e,r,a,o)}},divide:function(i,e,t,r,n,a,o){return v(i,e,t,r,n,a,o)},tangentAngle:function(i,e,t,r,n,a,o){var s=Fn(i,t,n,o),u=Fn(e,r,a,o),f=Math.atan2(u,s);return hn(f)}};function ot(i,e,t,r,n){var a=1-n;return a*a*a*i+3*e*n*a*a+3*t*n*n*a+r*n*n*n}function pt(i,e,t,r,n){var a=1-n;return 3*(a*a*(e-i)+2*a*n*(t-e)+n*n*(r-t))}function bt(i,e,t,r){var n=-3*i+9*e-9*t+3*r,a=6*i-12*e+6*t,o=3*e-3*i,s=[],u,f,c;if(Ce(n,0))Ce(a,0)||(u=-o/a,u>=0&&u<=1&&s.push(u));else{var d=a*a-4*n*o;Ce(d,0)?s.push(-a/(2*n)):d>0&&(c=Math.sqrt(d),u=(-a+c)/(2*n),f=(-a-c)/(2*n),u>=0&&u<=1&&s.push(u),f>=0&&f<=1&&s.push(f))}return s}function At(i,e,t,r,n,a,o,s,u){var f=ot(i,t,n,o,u),c=ot(e,r,a,s,u),d=Br.pointAt(i,e,t,r,u),A=Br.pointAt(t,r,n,a,u),D=Br.pointAt(n,a,o,s,u),z=Br.pointAt(d.x,d.y,A.x,A.y,u),Z=Br.pointAt(A.x,A.y,D.x,D.y,u);return[[i,e,d.x,d.y,z.x,z.y,f,c],[f,c,Z.x,Z.y,D.x,D.y,o,s]]}function Rt(i,e,t,r,n,a,o,s,u){if(u===0)return Rn([i,t,n,o],[e,r,a,s]);var f=At(i,e,t,r,n,a,o,s,.5),c=f[0],d=f[1];return c.push(u-1),d.push(u-1),Rt.apply(null,c)+Rt.apply(null,d)}var Zt={extrema:bt,box:function(i,e,t,r,n,a,o,s){for(var u=[i,o],f=[e,s],c=bt(i,t,n,o),d=bt(e,r,a,s),A=0;A<c.length;A++)u.push(ot(i,t,n,o,c[A]));for(var A=0;A<d.length;A++)f.push(ot(e,r,a,s,d[A]));return Ke(u,f)},length:function(i,e,t,r,n,a,o,s){return Rt(i,e,t,r,n,a,o,s,3)},nearestPoint:function(i,e,t,r,n,a,o,s,u,f,c){return On([i,t,n,o],[e,r,a,s],u,f,ot,c)},pointDistance:function(i,e,t,r,n,a,o,s,u,f,c){var d=this.nearestPoint(i,e,t,r,n,a,o,s,u,f,c);return Ot(d.x,d.y,u,f)},interpolationAt:ot,pointAt:function(i,e,t,r,n,a,o,s,u){return{x:ot(i,t,n,o,u),y:ot(e,r,a,s,u)}},divide:function(i,e,t,r,n,a,o,s,u){return At(i,e,t,r,n,a,o,s,u)},tangentAngle:function(i,e,t,r,n,a,o,s,u){var f=pt(i,t,n,o,u),c=pt(e,r,a,s,u);return hn(Math.atan2(c,f))}};function se(i,e){var t=Math.abs(i);return e>0?t:t*-1}var _e={box:function(i,e,t,r){return{x:i-t,y:e-r,width:t*2,height:r*2}},length:function(i,e,t,r){return Math.PI*(3*(t+r)-Math.sqrt((3*t+r)*(t+3*r)))},nearestPoint:function(i,e,t,r,n,a){var o=t,s=r;if(o===0||s===0)return{x:i,y:e};for(var u=n-i,f=a-e,c=Math.abs(u),d=Math.abs(f),A=o*o,D=s*s,z=Math.PI/4,Z,rt,ft=0;ft<4;ft++){Z=o*Math.cos(z),rt=s*Math.sin(z);var ct=(A-D)*Math.pow(Math.cos(z),3)/o,gt=(D-A)*Math.pow(Math.sin(z),3)/s,Ct=Z-ct,Ht=rt-gt,ne=c-ct,re=d-gt,Me=Math.hypot(Ht,Ct),je=Math.hypot(re,ne),Re=Me*Math.asin((Ct*re-Ht*ne)/(Me*je)),ir=Re/Math.sqrt(A+D-Z*Z-rt*rt);z+=ir,z=Math.min(Math.PI/2,Math.max(0,z))}return{x:i+se(Z,u),y:e+se(rt,f)}},pointDistance:function(i,e,t,r,n,a){var o=this.nearestPoint(i,e,t,r,n,a);return Ot(o.x,o.y,n,a)},pointAt:function(i,e,t,r,n){var a=2*Math.PI*n;return{x:i+t*Math.cos(a),y:e+r*Math.sin(a)}},tangentAngle:function(i,e,t,r,n){var a=2*Math.PI*n,o=Math.atan2(r*Math.cos(a),-t*Math.sin(a));return hn(o)}};function Ee(i,e,t,r,n,a,o,s){return-1*t*Math.cos(n)*Math.sin(s)-r*Math.sin(n)*Math.cos(s)}function He(i,e,t,r,n,a,o,s){return-1*t*Math.sin(n)*Math.sin(s)+r*Math.cos(n)*Math.cos(s)}function br(i,e,t){return Math.atan(-e/i*Math.tan(t))}function rn(i,e,t){return Math.atan(e/(i*Math.tan(t)))}function Cr(i,e,t,r,n,a){return t*Math.cos(n)*Math.cos(a)-r*Math.sin(n)*Math.sin(a)+i}function Ar(i,e,t,r,n,a){return t*Math.sin(n)*Math.cos(a)+r*Math.cos(n)*Math.sin(a)+e}function Or(i,e,t,r){var n=Math.atan2(r*i,t*e);return(n+Math.PI*2)%(Math.PI*2)}function Nn(i,e,t){return{x:i*Math.cos(t),y:e*Math.sin(t)}}function jn(i,e,t){var r=Math.cos(t),n=Math.sin(t);return[i*r-e*n,i*n+e*r]}var zn={box:function(i,e,t,r,n,a,o){for(var s=br(t,r,n),u=1/0,f=-1/0,c=[a,o],d=-Math.PI*2;d<=Math.PI*2;d+=Math.PI){var A=s+d;a<o?a<A&&A<o&&c.push(A):o<A&&A<a&&c.push(A)}for(var d=0;d<c.length;d++){var D=Cr(i,e,t,r,n,c[d]);D<u&&(u=D),D>f&&(f=D)}for(var z=rn(t,r,n),Z=1/0,rt=-1/0,ft=[a,o],d=-Math.PI*2;d<=Math.PI*2;d+=Math.PI){var ct=z+d;a<o?a<ct&&ct<o&&ft.push(ct):o<ct&&ct<a&&ft.push(ct)}for(var d=0;d<ft.length;d++){var gt=Ar(i,e,t,r,n,ft[d]);gt<Z&&(Z=gt),gt>rt&&(rt=gt)}return{x:u,y:Z,width:f-u,height:rt-Z}},length:function(i,e,t,r,n,a,o){},nearestPoint:function(i,e,t,r,n,a,o,s,u){var f=jn(s-i,u-e,-n),c=f[0],d=f[1],A=_e.nearestPoint(0,0,t,r,c,d),D=Or(t,r,A.x,A.y);D<a?A=Nn(t,r,a):D>o&&(A=Nn(t,r,o));var z=jn(A.x,A.y,n);return{x:z[0]+i,y:z[1]+e}},pointDistance:function(i,e,t,r,n,a,o,s,u){var f=this.nearestPoint(i,e,t,r,s,u);return Ot(f.x,f.y,s,u)},pointAt:function(i,e,t,r,n,a,o,s){var u=(o-a)*s+a;return{x:Cr(i,e,t,r,n,u),y:Ar(i,e,t,r,n,u)}},tangentAngle:function(i,e,t,r,n,a,o,s){var u=(o-a)*s+a,f=Ee(i,e,t,r,n,a,o,u),c=He(i,e,t,r,n,a,o,u);return hn(Math.atan2(c,f))}};function da(i){for(var e=0,t=[],r=0;r<i.length-1;r++){var n=i[r],a=i[r+1],o=Ot(n[0],n[1],a[0],a[1]),s={from:n,to:a,length:o};t.push(s),e+=o}return{segments:t,totalLength:e}}function fa(i){if(i.length<2)return 0;for(var e=0,t=0;t<i.length-1;t++){var r=i[t],n=i[t+1];e+=Ot(r[0],r[1],n[0],n[1])}return e}function Ea(i,e){if(e>1||e<0||i.length<2)return null;var t=da(i),r=t.segments,n=t.totalLength;if(n===0)return{x:i[0][0],y:i[0][1]};for(var a=0,o=null,s=0;s<r.length;s++){var u=r[s],f=u.from,c=u.to,d=u.length/n;if(e>=a&&e<=a+d){var A=(e-a)/d;o=Br.pointAt(f[0],f[1],c[0],c[1],A);break}a+=d}return o}function Ba(i,e){if(e>1||e<0||i.length<2)return 0;for(var t=da(i),r=t.segments,n=t.totalLength,a=0,o=0,s=0;s<r.length;s++){var u=r[s],f=u.from,c=u.to,d=u.length/n;if(e>=a&&e<=a+d){o=Math.atan2(c[1]-f[1],c[0]-f[0]);break}a+=d}return o}function Oa(i,e,t){for(var r=1/0,n=0;n<i.length-1;n++){var a=i[n],o=i[n+1],s=Br.pointDistance(a[0],a[1],o[0],o[1],e,t);s<r&&(r=s)}return r}var Ji={box:function(i){for(var e=[],t=[],r=0;r<i.length;r++){var n=i[r];e.push(n[0]),t.push(n[1])}return Ke(e,t)},length:function(i){return fa(i)},pointAt:function(i,e){return Ea(i,e)},pointDistance:function(i,e,t){return Oa(i,e,t)},tangentAngle:function(i,e){return Ba(i,e)}};function Fa(i){var e=i.slice(0);return i.length&&e.push(i[0]),e}var Wo={box:function(i){return Ji.box(i)},length:function(i){return fa(Fa(i))},pointAt:function(i,e){return Ea(Fa(i),e)},pointDistance:function(i,e,t){return Oa(Fa(i),e,t)},tangentAngle:function(i,e){return Ba(Fa(i),e)}};function ji(i,e){return!i||!e?i||e:{minX:Math.min(i.minX,e.minX),minY:Math.min(i.minY,e.minY),maxX:Math.max(i.maxX,e.maxX),maxY:Math.max(i.maxY,e.maxY)}}function ui(i,e){var t=i.get("startArrowShape"),r=i.get("endArrowShape"),n=null,a=null;return t&&(n=t.getCanvasBBox(),e=ji(e,n)),r&&(a=r.getCanvasBBox(),e=ji(e,a)),e}function Po(i){for(var e=i.attr(),t=e.points,r=[],n=[],a=0;a<t.length;a++){var o=t[a];r.push(o[0]),n.push(o[1])}var s=Ke(r,n),u=s.x,f=s.y,c=s.width,d=s.height,A={minX:u,minY:f,maxX:u+c,maxY:f+d};return A=ui(i,A),{x:A.minX,y:A.minY,width:A.maxX-A.minX,height:A.maxY-A.minY}}function Fo(i){for(var e=i.attr(),t=e.points,r=[],n=[],a=0;a<t.length;a++){var o=t[a];r.push(o[0]),n.push(o[1])}return Ke(r,n)}var Zo=null;function vs(){if(!Zo){var i=document.createElement("canvas");i.width=1,i.height=1,Zo=i.getContext("2d")}return Zo}function Ko(i,e,t){var r=1;if((0,l.isString)(i)&&(r=i.split(`
`).length),r>1){var n=Ja(e,t);return e*r+n*(r-1)}return e}function Ja(i,e){return e?e-i:i*.14}function ys(i,e){var t=vs(),r=0;if((0,l.isNil)(i)||i==="")return r;if(t.save(),t.font=e,(0,l.isString)(i)&&i.includes(`
`)){var n=i.split(`
`);(0,l.each)(n,function(a){var o=t.measureText(a).width;r<o&&(r=o)})}else r=t.measureText(i).width;return t.restore(),r}function Pi(i){var e=i.fontSize,t=i.fontFamily,r=i.fontWeight,n=i.fontStyle,a=i.fontVariant;return[n,a,r,e+"px",t].join(" ").trim()}function _a(i){var e=i.attr(),t=e.x,r=e.y,n=e.text,a=e.fontSize,o=e.lineHeight,s=e.font;s||(s=Pi(e));var u=ys(n,s),f;if(!u)f={x:t,y:r,width:0,height:0};else{var c=e.textAlign,d=e.textBaseline,A=Ko(n,a,o),D={x:t,y:r-A};c&&(c==="end"||c==="right"?D.x-=u:c==="center"&&(D.x-=u/2)),d&&(d==="top"?D.y+=A:d==="middle"&&(D.y+=A/2)),f={x:D.x,y:D.y,width:u,height:A}}return f}var di=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,Ei=/[^\s\,]+/ig;function Jo(i){var e=i||[];if((0,l.isArray)(e))return e;if((0,l.isString)(e))return e=e.match(di),(0,l.each)(e,function(t,r){if(t=t.match(Ei),t[0].length>1){var n=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=n}(0,l.each)(t,function(a,o){isNaN(a)||(t[o]=+a)}),e[r]=t}),e}var ku=Jo;function fc(i,e,t,r){var n=[],a=!!r,o,s,u,f,c,d,A;if(a){u=r[0],f=r[1];for(var D=0,z=i.length;D<z;D+=1){var Z=i[D];u=oa.min([0,0],u,Z),f=oa.max([0,0],f,Z)}}for(var D=0,rt=i.length;D<rt;D+=1){var Z=i[D];if(D===0&&!t)A=Z;else if(D===rt-1&&!t)d=Z,n.push(A),n.push(d);else{var ft=[D?D-1:rt-1,D-1][t?0:1];o=i[ft],s=i[t?(D+1)%rt:D+1];var ct=[0,0];ct=oa.sub(ct,s,o),ct=oa.scale(ct,ct,e);var gt=oa.distance(Z,o),Ct=oa.distance(Z,s),Ht=gt+Ct;Ht!==0&&(gt/=Ht,Ct/=Ht);var ne=oa.scale([0,0],ct,-gt),re=oa.scale([0,0],ct,Ct);d=oa.add([0,0],Z,ne),c=oa.add([0,0],Z,re),c=oa.min([0,0],c,oa.max([0,0],s,Z)),c=oa.max([0,0],c,oa.min([0,0],s,Z)),ne=oa.sub([0,0],c,Z),ne=oa.scale([0,0],ne,-gt/Ct),d=oa.add([0,0],Z,ne),d=oa.min([0,0],d,oa.max([0,0],o,Z)),d=oa.max([0,0],d,oa.min([0,0],o,Z)),re=oa.sub([0,0],Z,d),re=oa.scale([0,0],re,Ct/gt),c=oa.add([0,0],Z,re),a&&(d=oa.max([0,0],d,u),d=oa.min([0,0],d,f),c=oa.max([0,0],c,u),c=oa.min([0,0],c,f)),n.push(A),n.push(d),A=c}}return t&&n.push(n.shift()),n}function Ve(i,e,t){e===void 0&&(e=!1),t===void 0&&(t=[[0,0],[1,1]]);for(var r=!!e,n=[],a=0,o=i.length;a<o;a+=2)n.push([i[a],i[a+1]]);for(var s=fc(n,.4,r,t),u=n.length,f=[],c,d,A,a=0;a<u-1;a+=1)c=s[a*2],d=s[a*2+1],A=n[a+1],f.push(["C",c[0],c[1],d[0],d[1],A[0],A[1]]);return r&&(c=s[u],d=s[u+1],A=n[0],f.push(["C",c[0],c[1],d[0],d[1],A[0],A[1]])),f}var $r=Ve;function jr(i,e,t){var r=null,n=t;return e<n&&(n=e,r="add"),i<n&&(n=i,r="del"),{type:r,min:n}}var na=function(i,e){var t=i.length,r=e.length,n,a,o=0;if(t===0||r===0)return null;for(var s=[],u=0;u<=t;u++)s[u]=[],s[u][0]={min:u};for(var f=0;f<=r;f++)s[0][f]={min:f};for(var u=1;u<=t;u++){n=i[u-1];for(var f=1;f<=r;f++){a=e[f-1],isEqual(n,a)?o=0:o=1;var c=s[u-1][f].min+1,d=s[u][f-1].min+1,A=s[u-1][f-1].min+o;s[u][f]=jr(c,d,A)}}return s};function hi(i,e){var t=na(i,e),r=i.length,n=e.length,a=[],o=1,s=1;if(t[r][n]!==r){for(var u=1;u<=r;u++){var f=t[u][u].min;s=u;for(var c=o;c<=n;c++)t[u][c].min<f&&(f=t[u][c].min,s=c);o=s,t[u][o].type&&a.push({index:u-1,type:t[u][o].type})}for(var u=a.length-1;u>=0;u--)o=a[u].index,a[u].type==="add"?i.splice(o,0,[].concat(i[o])):i.splice(o,1)}if(r=i.length,r<n)for(var u=0;u<n-r;u++)i[r-1][0]==="z"||i[r-1][0]==="Z"?i.splice(r-2,0,i[r-2]):i.push(i[r-1]);return i}var Be=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,Se=new RegExp("([a-z])["+Be+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Be+"]*,?["+Be+"]*)+)","ig"),sr=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Be+"]*,?["+Be+"]*","ig");function Ir(i){if(!i)return null;if((0,l.isArray)(i))return i;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(i).replace(Se,function(r,n,a){var o=[],s=n.toLowerCase();if(a.replace(sr,function(u,f){f&&o.push(+f)}),s==="m"&&o.length>2&&(t.push([n].concat(o.splice(0,2))),s="l",n=n==="m"?"l":"L"),s==="o"&&o.length===1&&t.push([n,o[0]]),s==="r")t.push([n].concat(o));else for(;o.length>=e[s]&&(t.push([n].concat(o.splice(0,e[s]))),!!e[s]););return""}),t}var Rr=/[a-z]/;function hr(i,e){return[e[0]+(e[0]-i[0]),e[1]+(e[1]-i[1])]}function ur(i){var e=Ir(i);if(!e||!e.length)return[["M",0,0]];for(var t=!1,r=0;r<e.length;r++){var n=e[r][0];if(Rr.test(n)||["V","H","T","S"].indexOf(n)>=0){t=!0;break}}if(!t)return e;var a=[],o=0,s=0,u=0,f=0,c=0,d,A,D=e[0];(D[0]==="M"||D[0]==="m")&&(o=+D[1],s=+D[2],u=o,f=s,c++,a[0]=["M",o,s]);for(var r=c,z=e.length;r<z;r++){var Z=e[r],rt=a[r-1],ft=[],n=Z[0],ct=n.toUpperCase();if(n!==ct)switch(ft[0]=ct,ct){case"A":ft[1]=Z[1],ft[2]=Z[2],ft[3]=Z[3],ft[4]=Z[4],ft[5]=Z[5],ft[6]=+Z[6]+o,ft[7]=+Z[7]+s;break;case"V":ft[1]=+Z[1]+s;break;case"H":ft[1]=+Z[1]+o;break;case"M":u=+Z[1]+o,f=+Z[2]+s,ft[1]=u,ft[2]=f;break;default:for(var gt=1,Ct=Z.length;gt<Ct;gt++)ft[gt]=+Z[gt]+(gt%2?o:s)}else ft=e[r];switch(ct){case"Z":o=+u,s=+f;break;case"H":o=ft[1],ft=["L",o,s];break;case"V":s=ft[1],ft=["L",o,s];break;case"T":o=ft[1],s=ft[2];var Ht=hr([rt[1],rt[2]],[rt[3],rt[4]]);ft=["Q",Ht[0],Ht[1],o,s];break;case"S":o=ft[ft.length-2],s=ft[ft.length-1];var ne=rt.length,re=hr([rt[ne-4],rt[ne-3]],[rt[ne-2],rt[ne-1]]);ft=["C",re[0],re[1],ft[1],ft[2],o,s];break;case"M":u=ft[ft.length-2],f=ft[ft.length-1];break;default:o=ft[ft.length-2],s=ft[ft.length-1]}a.push(ft)}return a}var Er=Math.PI*2,Fe=function(i,e,t,r,n,a,o){var s=i.x,u=i.y;s*=e,u*=t;var f=r*s-n*u,c=n*s+r*u;return{x:f+a,y:c+o}},or=function(i,e){var t=e===1.5707963267948966?.551915024494:e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),r=Math.cos(i),n=Math.sin(i),a=Math.cos(i+e),o=Math.sin(i+e);return[{x:r-n*t,y:n+r*t},{x:a+o*t,y:o-a*t},{x:a,y:o}]},Le=function(i,e,t,r){var n=i*r-e*t<0?-1:1,a=i*t+e*r;return a>1&&(a=1),a<-1&&(a=-1),n*Math.acos(a)},Tr=function(i,e,t,r,n,a,o,s,u,f,c,d){var A=Math.pow(n,2),D=Math.pow(a,2),z=Math.pow(c,2),Z=Math.pow(d,2),rt=A*D-A*Z-D*z;rt<0&&(rt=0),rt/=A*Z+D*z,rt=Math.sqrt(rt)*(o===s?-1:1);var ft=rt*n/a*d,ct=rt*-a/n*c,gt=f*ft-u*ct+(i+t)/2,Ct=u*ft+f*ct+(e+r)/2,Ht=(c-ft)/n,ne=(d-ct)/a,re=(-c-ft)/n,Me=(-d-ct)/a,je=Le(1,0,Ht,ne),Re=Le(Ht,ne,re,Me);return s===0&&Re>0&&(Re-=Er),s===1&&Re<0&&(Re+=Er),[gt,Ct,je,Re]},zr=function(i){var e=i.px,t=i.py,r=i.cx,n=i.cy,a=i.rx,o=i.ry,s=i.xAxisRotation,u=s===void 0?0:s,f=i.largeArcFlag,c=f===void 0?0:f,d=i.sweepFlag,A=d===void 0?0:d,D=[];if(a===0||o===0)return[{x1:0,y1:0,x2:0,y2:0,x:r,y:n}];var z=Math.sin(u*Er/360),Z=Math.cos(u*Er/360),rt=Z*(e-r)/2+z*(t-n)/2,ft=-z*(e-r)/2+Z*(t-n)/2;if(rt===0&&ft===0)return[{x1:0,y1:0,x2:0,y2:0,x:r,y:n}];a=Math.abs(a),o=Math.abs(o);var ct=Math.pow(rt,2)/Math.pow(a,2)+Math.pow(ft,2)/Math.pow(o,2);ct>1&&(a*=Math.sqrt(ct),o*=Math.sqrt(ct));var gt=Tr(e,t,r,n,a,o,c,A,z,Z,rt,ft),Ct=gt[0],Ht=gt[1],ne=gt[2],re=gt[3],Me=Math.abs(re)/(Er/4);Math.abs(1-Me)<1e-7&&(Me=1);var je=Math.max(Math.ceil(Me),1);re/=je;for(var Re=0;Re<je;Re++)D.push(or(ne,re)),ne+=re;return D.map(function(ir){var Sr=Fe(ir[0],a,o,Z,z,Ct,Ht),pn=Sr.x,Gn=Sr.y,Pn=Fe(ir[1],a,o,Z,z,Ct,Ht),sn=Pn.x,Jn=Pn.y,Kn=Fe(ir[2],a,o,Z,z,Ct,Ht),un=Kn.x,Dn=Kn.y;return{x1:pn,y1:Gn,x2:sn,y2:Jn,x:un,y:Dn}})};function gn(i,e,t,r,n,a,o,s,u){var f=zr({px:i,py:e,cx:s,cy:u,rx:t,ry:r,xAxisRotation:n,largeArcFlag:a,sweepFlag:o});return f.reduce(function(c,d){var A=d.x1,D=d.y1,z=d.x2,Z=d.y2,rt=d.x,ft=d.y;return c.push(A,D,z,Z,rt,ft),c},[])}function mn(i,e){"TQ".indexOf(i[0])<0&&(e.qx=null,e.qy=null);var t=i.slice(1),r=t[0],n=t[1];switch(i[0]){case"M":return e.x=r,e.y=n,i;case"A":return["C"].concat(arcToCubic.apply(0,[e.x1,e.y1].concat(i.slice(1))));case"Q":return e.qx=r,e.qy=n,["C"].concat(quadToCubic.apply(0,[e.x1,e.y1].concat(i.slice(1))));case"L":return["C"].concat(lineToCubic(e.x1,e.y1,i[1],i[2]));case"H":return["C"].concat(lineToCubic(e.x1,e.y1,i[1],e.y1));case"V":return["C"].concat(lineToCubic(e.x1,e.y1,e.x1,i[1]));case"Z":return["C"].concat(lineToCubic(e.x1,e.y1,e.x,e.y));default:}return i}function nn(i,e){e===void 0&&(e=!1);for(var t=path2Absolute(i),r={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},n=[],a="",o=t.length,s,u,f=[],c=0;c<o;c+=1)t[c]&&(a=t[c][0]),n[c]=a,t[c]=segmentToCubic(t[c],r),kn(t,n,c),o=t.length,a==="Z"&&f.push(c),s=t[c],u=s.length,r.x1=+s[u-2],r.y1=+s[u-1],r.x2=+s[u-4]||r.x1,r.y2=+s[u-3]||r.y1;return e?[t,f]:t}function kn(i,e,t){if(i[t].length>7){i[t].shift();for(var r=i[t],n=t;r.length;)e[t]="A",i.splice(n+=1,0,["C"].concat(r.splice(0,6)));i.splice(t,1)}}var pa=function(i,e,t,r,n){var a=-3*e+9*t-9*r+3*n,o=i*a+6*e-12*t+6*r;return i*o-3*e+3*t},$a=function(i,e,t,r,n,a,o,s,u){u===null&&(u=1),u=u>1?1:u<0?0:u;for(var f=u/2,c=12,d=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],A=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],D=0,z=0;z<c;z++){var Z=f*d[z]+f,rt=pa(Z,i,t,n,o),ft=pa(Z,e,r,a,s),ct=rt*rt+ft*ft;D+=A[z]*Math.sqrt(ct)}return f*D},ca=function(i,e,t,r,n,a,o,s){for(var u=[],f=[[],[]],c,d,A,D,z=0;z<2;++z){if(z===0?(d=6*i-12*t+6*n,c=-3*i+9*t-9*n+3*o,A=3*t-3*i):(d=6*e-12*r+6*a,c=-3*e+9*r-9*a+3*s,A=3*r-3*e),Math.abs(c)<1e-12){if(Math.abs(d)<1e-12)continue;D=-A/d,D>0&&D<1&&u.push(D);continue}var Z=d*d-4*A*c,rt=Math.sqrt(Z);if(!(Z<0)){var ft=(-d+rt)/(2*c);ft>0&&ft<1&&u.push(ft);var ct=(-d-rt)/(2*c);ct>0&&ct<1&&u.push(ct)}}for(var gt=u.length,Ct=gt,Ht;gt--;)D=u[gt],Ht=1-D,f[0][gt]=Ht*Ht*Ht*i+3*Ht*Ht*D*t+3*Ht*D*D*n+D*D*D*o,f[1][gt]=Ht*Ht*Ht*e+3*Ht*Ht*D*r+3*Ht*D*D*a+D*D*D*s;return f[0][Ct]=i,f[1][Ct]=e,f[0][Ct+1]=o,f[1][Ct+1]=s,f[0].length=f[1].length=Ct+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}},Ta=function(i,e,t,r,n,a,o,s){if(!(Math.max(i,t)<Math.min(n,o)||Math.min(i,t)>Math.max(n,o)||Math.max(e,r)<Math.min(a,s)||Math.min(e,r)>Math.max(a,s))){var u=(i*r-e*t)*(n-o)-(i-t)*(n*s-a*o),f=(i*r-e*t)*(a-s)-(e-r)*(n*s-a*o),c=(i-t)*(a-s)-(e-r)*(n-o);if(c){var d=u/c,A=f/c,D=+d.toFixed(2),z=+A.toFixed(2);if(!(D<+Math.min(i,t).toFixed(2)||D>+Math.max(i,t).toFixed(2)||D<+Math.min(n,o).toFixed(2)||D>+Math.max(n,o).toFixed(2)||z<+Math.min(e,r).toFixed(2)||z>+Math.max(e,r).toFixed(2)||z<+Math.min(a,s).toFixed(2)||z>+Math.max(a,s).toFixed(2)))return{x:d,y:A}}}},Pa=function(i,e,t){return e>=i.x&&e<=i.x+i.width&&t>=i.y&&t<=i.y+i.height},wi=function(i,e,t,r){return i===null&&(i=e=t=r=0),e===null&&(e=i.y,t=i.width,r=i.height,i=i.x),{x:i,y:e,width:t,w:t,height:r,h:r,x2:i+t,y2:e+r,cx:i+t/2,cy:e+r/2,r1:Math.min(t,r)/2,r2:Math.max(t,r)/2,r0:Math.sqrt(t*t+r*r)/2,path:rectPath(i,e,t,r),vb:[i,e,t,r].join(" ")}},$o=function(i,e){return i=wi(i),e=wi(e),Pa(e,i.x,i.y)||Pa(e,i.x2,i.y)||Pa(e,i.x,i.y2)||Pa(e,i.x2,i.y2)||Pa(i,e.x,e.y)||Pa(i,e.x2,e.y)||Pa(i,e.x,e.y2)||Pa(i,e.x2,e.y2)||(i.x<e.x2&&i.x>e.x||e.x<i.x2&&e.x>i.x)&&(i.y<e.y2&&i.y>e.y||e.y<i.y2&&e.y>i.y)},Ls=function(i,e,t,r,n,a,o,s){isArray(i)||(i=[i,e,t,r,n,a,o,s]);var u=ca.apply(null,i);return wi(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},od=function(i,e,t,r,n,a,o,s,u){var f=1-u,c=Math.pow(f,3),d=Math.pow(f,2),A=u*u,D=A*u,z=c*i+d*3*u*t+f*3*u*u*n+D*o,Z=c*e+d*3*u*r+f*3*u*u*a+D*s,rt=i+2*u*(t-i)+A*(n-2*t+i),ft=e+2*u*(r-e)+A*(a-2*r+e),ct=t+2*u*(n-t)+A*(o-2*n+t),gt=r+2*u*(a-r)+A*(s-2*a+r),Ct=f*i+u*t,Ht=f*e+u*r,ne=f*n+u*o,re=f*a+u*s,Me=90-Math.atan2(rt-ct,ft-gt)*180/Math.PI;return{x:z,y:Z,m:{x:rt,y:ft},n:{x:ct,y:gt},start:{x:Ct,y:Ht},end:{x:ne,y:re},alpha:Me}},cu=function(i,e,t){var r=Ls(i),n=Ls(e);if(!$o(r,n))return t?0:[];for(var a=$a.apply(0,i),o=$a.apply(0,e),s=~~(a/8),u=~~(o/8),f=[],c=[],d={},A=t?0:[],D=0;D<s+1;D++){var z=od.apply(0,i.concat(D/s));f.push({x:z.x,y:z.y,t:D/s})}for(var D=0;D<u+1;D++){var z=od.apply(0,e.concat(D/u));c.push({x:z.x,y:z.y,t:D/u})}for(var D=0;D<s;D++)for(var Z=0;Z<u;Z++){var rt=f[D],ft=f[D+1],ct=c[Z],gt=c[Z+1],Ct=Math.abs(ft.x-rt.x)<.001?"y":"x",Ht=Math.abs(gt.x-ct.x)<.001?"y":"x",ne=Ta(rt.x,rt.y,ft.x,ft.y,ct.x,ct.y,gt.x,gt.y);if(ne){if(d[ne.x.toFixed(4)]===ne.y.toFixed(4))continue;d[ne.x.toFixed(4)]=ne.y.toFixed(4);var re=rt.t+Math.abs((ne[Ct]-rt[Ct])/(ft[Ct]-rt[Ct]))*(ft.t-rt.t),Me=ct.t+Math.abs((ne[Ht]-ct[Ht])/(gt[Ht]-ct[Ht]))*(gt.t-ct.t);re>=0&&re<=1&&Me>=0&&Me<=1&&(t?A++:A.push({x:ne.x,y:ne.y,t1:re,t2:Me}))}}return A},Wd=function(i,e,t){i=path2Curve(i),e=path2Curve(e);for(var r,n,a,o,s,u,f,c,d,A,D=t?0:[],z=0,Z=i.length;z<Z;z++){var rt=i[z];if(rt[0]==="M")r=s=rt[1],n=u=rt[2];else{rt[0]==="C"?(d=[r,n].concat(rt.slice(1)),r=d[6],n=d[7]):(d=[r,n,r,n,s,u,s,u],r=s,n=u);for(var ft=0,ct=e.length;ft<ct;ft++){var gt=e[ft];if(gt[0]==="M")a=f=gt[1],o=c=gt[2];else{gt[0]==="C"?(A=[a,o].concat(gt.slice(1)),a=A[6],o=A[7]):(A=[a,o,a,o,f,c,f,c],a=f,o=c);var Ct=cu(d,A,t);if(t)D+=Ct;else{for(var Ht=0,ne=Ct.length;Ht<ne;Ht++)Ct[Ht].segment1=z,Ct[Ht].segment2=ft,Ct[Ht].bez1=d,Ct[Ht].bez2=A;D=D.concat(Ct)}}}}}return D};function Bu(i,e){return Wd(i,e)}function _l(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function Ah(i,e){return _l(i)*_l(e)?(i[0]*e[0]+i[1]*e[1])/(_l(i)*_l(e)):1}function Lv(i,e){return(i[0]*e[1]<i[1]*e[0]?-1:1)*Math.acos(Ah(i,e))}function Oh(i,e){return i[0]===e[0]&&i[1]===e[1]}function H0(i,e){var t=e[1],r=e[2],n=(0,l.mod)((0,l.toRadian)(e[3]),Math.PI*2),a=e[4],o=e[5],s=i[0],u=i[1],f=e[6],c=e[7],d=Math.cos(n)*(s-f)/2+Math.sin(n)*(u-c)/2,A=-1*Math.sin(n)*(s-f)/2+Math.cos(n)*(u-c)/2,D=d*d/(t*t)+A*A/(r*r);D>1&&(t*=Math.sqrt(D),r*=Math.sqrt(D));var z=t*t*(A*A)+r*r*(d*d),Z=z?Math.sqrt((t*t*(r*r)-z)/z):1;a===o&&(Z*=-1),isNaN(Z)&&(Z=0);var rt=r?Z*t*A/r:0,ft=t?Z*-r*d/t:0,ct=(s+f)/2+Math.cos(n)*rt-Math.sin(n)*ft,gt=(u+c)/2+Math.sin(n)*rt+Math.cos(n)*ft,Ct=[(d-rt)/t,(A-ft)/r],Ht=[(-1*d-rt)/t,(-1*A-ft)/r],ne=Lv([1,0],Ct),re=Lv(Ct,Ht);return Ah(Ct,Ht)<=-1&&(re=Math.PI),Ah(Ct,Ht)>=1&&(re=0),o===0&&re>0&&(re=re-2*Math.PI),o===1&&re<0&&(re=re+2*Math.PI),{cx:ct,cy:gt,rx:Oh(i,[f,c])?0:t,ry:Oh(i,[f,c])?0:r,startAngle:ne,endAngle:ne+re,xRotation:n,arcFlag:a,sweepFlag:o}}function Nv(i,e){return[e[0]+(e[0]-i[0]),e[1]+(e[1]-i[1])]}function Rv(i){i=ku(i);for(var e=[],t=null,r=null,n=null,a=0,o=i.length,s=0;s<o;s++){var u=i[s];r=i[s+1];var f=u[0],c={command:f,prePoint:t,params:u,startTangent:null,endTangent:null};switch(f){case"M":n=[u[1],u[2]],a=s;break;case"A":var d=H0(t,u);c.arcParams=d;break;default:break}if(f==="Z")t=n,r=i[a+1];else{var A=u.length;t=[u[A-2],u[A-1]]}r&&r[0]==="Z"&&(r=i[a],e[a]&&(e[a].prePoint=t)),c.currentPoint=t,e[a]&&Oh(t,e[a].currentPoint)&&(e[a].prePoint=c.prePoint);var D=r?[r[r.length-2],r[r.length-1]]:null;c.nextPoint=D;var z=c.prePoint;if(["L","H","V"].includes(f))c.startTangent=[z[0]-t[0],z[1]-t[1]],c.endTangent=[t[0]-z[0],t[1]-z[1]];else if(f==="Q"){var Z=[u[1],u[2]];c.startTangent=[z[0]-Z[0],z[1]-Z[1]],c.endTangent=[t[0]-Z[0],t[1]-Z[1]]}else if(f==="T"){var rt=e[s-1],Z=Nv(rt.currentPoint,z);rt.command==="Q"?(c.command="Q",c.startTangent=[z[0]-Z[0],z[1]-Z[1]],c.endTangent=[t[0]-Z[0],t[1]-Z[1]]):(c.command="TL",c.startTangent=[z[0]-t[0],z[1]-t[1]],c.endTangent=[t[0]-z[0],t[1]-z[1]])}else if(f==="C"){var ft=[u[1],u[2]],ct=[u[3],u[4]];c.startTangent=[z[0]-ft[0],z[1]-ft[1]],c.endTangent=[t[0]-ct[0],t[1]-ct[1]],c.startTangent[0]===0&&c.startTangent[1]===0&&(c.startTangent=[ft[0]-ct[0],ft[1]-ct[1]]),c.endTangent[0]===0&&c.endTangent[1]===0&&(c.endTangent=[ct[0]-ft[0],ct[1]-ft[1]])}else if(f==="S"){var rt=e[s-1],ft=Nv(rt.currentPoint,z),ct=[u[1],u[2]];rt.command==="C"?(c.command="C",c.startTangent=[z[0]-ft[0],z[1]-ft[1]],c.endTangent=[t[0]-ct[0],t[1]-ct[1]]):(c.command="SQ",c.startTangent=[z[0]-ct[0],z[1]-ct[1]],c.endTangent=[t[0]-ct[0],t[1]-ct[1]])}else if(f==="A"){var gt=.001,Ct=c.arcParams||{},Ht=Ct.cx,ne=Ht===void 0?0:Ht,re=Ct.cy,Me=re===void 0?0:re,je=Ct.rx,Re=je===void 0?0:je,ir=Ct.ry,Sr=ir===void 0?0:ir,pn=Ct.sweepFlag,Gn=pn===void 0?0:pn,Pn=Ct.startAngle,sn=Pn===void 0?0:Pn,Jn=Ct.endAngle,Kn=Jn===void 0?0:Jn;Gn===0&&(gt*=-1);var un=Re*Math.cos(sn-gt)+ne,Dn=Sr*Math.sin(sn-gt)+Me;c.startTangent=[un-n[0],Dn-n[1]];var Yn=Re*Math.cos(sn+Kn+gt)+ne,Xn=Sr*Math.sin(sn+Kn-gt)+Me;c.endTangent=[z[0]-Yn,z[1]-Xn]}e.push(c)}return e}function kv(i){for(var e=[],t=i.length,r=0;r<t-1;r++){var n=i[r],a=i[r+1];e.push({from:{x:n[0],y:n[1]},to:{x:a[0],y:a[1]}})}if(e.length>1){var o=i[0],s=i[t-1];e.push({from:{x:s[0],y:s[1]},to:{x:o[0],y:o[1]}})}return e}function Z0(i,e){var t=!1;return each(i,function(r){if(getLineIntersect(r.from,r.to,e.from,e.to))return t=!0,!1}),t}function Bv(i){var e=i.map(function(r){return r[0]}),t=i.map(function(r){return r[1]});return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,t),maxY:Math.max.apply(null,t)}}function K0(i,e){return!(e.minX>i.maxX||e.maxX<i.minX||e.minY>i.maxY||e.maxY<i.minY)}function KS(i,e){if(i.length<2||e.length<2)return!1;var t=Bv(i),r=Bv(e);if(!K0(t,r))return!1;var n=!1;if(each(e,function(u){if(isPointInPolygon(i,u[0],u[1]))return n=!0,!1}),n||(each(i,function(u){if(isPointInPolygon(e,u[0],u[1]))return n=!0,!1}),n))return!0;var a=kv(i),o=kv(e),s=!1;return each(o,function(u){if(Z0(a,u))return s=!0,!1}),s}function $0(i,e){for(var t=[],r=[],n=[],a=0;a<i.length;a++){var o=i[a],s=o.currentPoint,u=o.params,f=o.prePoint,c=void 0;switch(o.command){case"Q":c=K.box(f[0],f[1],u[1],u[2],u[3],u[4]);break;case"C":c=Zt.box(f[0],f[1],u[1],u[2],u[3],u[4],u[5],u[6]);break;case"A":var d=o.arcParams;c=zn.box(d.cx,d.cy,d.rx,d.ry,d.xRotation,d.startAngle,d.endAngle);break;default:t.push(s[0]),r.push(s[1]);break}c&&(o.box=c,t.push(c.x,c.x+c.width),r.push(c.y,c.y+c.height)),e&&(o.command==="L"||o.command==="M")&&o.prePoint&&o.nextPoint&&n.push(o)}t=t.filter(function(ft){return!Number.isNaN(ft)&&ft!==1/0&&ft!==-1/0}),r=r.filter(function(ft){return!Number.isNaN(ft)&&ft!==1/0&&ft!==-1/0});var A=(0,l.min)(t),D=(0,l.min)(r),z=(0,l.max)(t),Z=(0,l.max)(r);if(n.length===0)return{x:A,y:D,width:z-A,height:Z-D};for(var a=0;a<n.length;a++){var o=n[a],s=o.currentPoint,rt=void 0;s[0]===A?(rt=Yd(o,e),A=A-rt.xExtra):s[0]===z&&(rt=Yd(o,e),z=z+rt.xExtra),s[1]===D?(rt=Yd(o,e),D=D-rt.yExtra):s[1]===Z&&(rt=Yd(o,e),Z=Z+rt.yExtra)}return{x:A,y:D,width:z-A,height:Z-D}}function Yd(i,e){var t=i.prePoint,r=i.currentPoint,n=i.nextPoint,a=Math.pow(r[0]-t[0],2)+Math.pow(r[1]-t[1],2),o=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),s=Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2),u=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!u||Math.sin(u)===0||(0,l.isNumberEqual)(u,0))return{xExtra:0,yExtra:0};var f=Math.abs(Math.atan2(n[1]-r[1],n[0]-r[0])),c=Math.abs(Math.atan2(n[0]-r[0],n[1]-r[1]));f=f>Math.PI/2?Math.PI-f:f,c=c>Math.PI/2?Math.PI-c:c;var d={xExtra:Math.cos(u/2-f)*(e/2*(1/Math.sin(u/2)))-e/2||0,yExtra:Math.cos(c-u/2)*(e/2*(1/Math.sin(u/2)))-e/2||0};return d}function q0(i){var e=i.attr(),t=e.path,r=e.stroke,n=r?e.lineWidth:0,a=i.get("segments")||Rv(t),o=$0(a,n),s=o.x,u=o.y,f=o.width,c=o.height,d={minX:s,minY:u,maxX:s+f,maxY:u+c};return d=ui(i,d),{x:d.minX,y:d.minY,width:d.maxX-d.minX,height:d.maxY-d.minY}}function Q0(i){var e=i.attr(),t=e.x1,r=e.y1,n=e.x2,a=e.y2,o=Math.min(t,n),s=Math.max(t,n),u=Math.min(r,a),f=Math.max(r,a),c={minX:o,maxX:s,minY:u,maxY:f};return c=ui(i,c),{x:c.minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}}function J0(i){var e=i.attr(),t=e.x,r=e.y,n=e.rx,a=e.ry;return{x:t-n,y:r-a,width:n*2,height:a*2}}fu("rect",Ml),fu("image",Ml),fu("circle",uc),fu("marker",uc),fu("polyline",Po),fu("polygon",Fo),fu("text",_a),fu("path",q0),fu("line",Q0),fu("ellipse",J0);var $S="0.5.11",tm=function(i){(0,y.__extends)(e,i);function e(t,r){var n=i.call(this,t,r)||this;return n.item=r.item,n.canvasX=r.canvasX,n.canvasY=r.canvasY,n.wheelDelta=r.wheelDelta,n.detail=r.detail,n}return e}(vu),Ih=function(e){return"".concat(e,"-").concat(Math.random()).concat(Date.now())},Dh=function(e){if((0,l.isArray)(e))switch(e.length){case 4:return e;case 3:return e.push(e[1]),e;case 2:return e.concat(e);case 1:return[e[0],e[0],e[0],e[0]];default:return[0,0,0,0]}if((0,l.isNumber)(e))return[e,e,e,e];if((0,l.isString)(e)){var t=parseInt(e,10);return[t,t,t,t]}return[0,0,0,0]},em=function(e){var t=new tm(e.type,e);return t.clientX=e.clientX,t.clientY=e.clientY,t.x=e.x,t.y=e.y,t.target=e.target,t.currentTarget=e.currentTarget,t.bubbles=!0,t.item=e.item,t},rm=function(e){if(!e)return!1;for(var t=9,r=[1,0,0,0,1,0,0,0,1],n=0;n<t;n++)if(e[n]!==r[n])return!0;return!1},Cf=function(e){return Number.isNaN(Number(e))},Fv=function(e){for(var t=1/0,r=-1/0,n=1/0,a=-1/0,o=0;o<e.length;o++){var s=e[o],u=s.getBBox(),f=u.minX,c=u.minY,d=u.maxX,A=u.maxY;f<t&&(t=f),c<n&&(n=c),d>r&&(r=d),A>a&&(a=A)}var D=Math.floor(t),z=Math.floor(n),Z=Math.ceil(r)-Math.floor(t),rt=Math.ceil(a)-Math.floor(n);return{x:D,y:z,width:Z,height:rt,minX:t,minY:n,maxX:r,maxY:a}},nm=function(e,t,r,n,a){t===void 0&&(t=15),r===void 0&&(r="quadratic"),n===void 0&&(n=void 0),a===void 0&&(a=void 0);for(var o=e.length,s=t*2,u=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],f={},c=[],d={},A=0;A<o;A++){var D=e[A],z=D.source,Z=D.target,rt="".concat(z,"-").concat(Z);if(!c[A]){f[rt]||(f[rt]=[]),c[A]=!0,f[rt].push(D);for(var ft=0;ft<o;ft++)if(A!==ft){var ct=e[ft],gt=ct.source,Ct=ct.target;c[ft]||(z===Ct&&Z===gt?(f[rt].push(ct),c[ft]=!0,d["".concat(gt,"|").concat(Ct,"|").concat(f[rt].length-1)]=!0):z===gt&&Z===Ct&&(f[rt].push(ct),c[ft]=!0))}}}for(var Ht in f)for(var ne=f[Ht],re=ne.length,Me=0;Me<re;Me++){var je=ne[Me];if(je.source===je.target){a&&(je.type=a),je.loopCfg={position:u[Me%8],dist:Math.floor(Me/8)*20+50};continue}if(re===1&&n&&je.source!==je.target){je.type=n;continue}je.type=r;var Re=(Me%2===0?1:-1)*(d["".concat(je.source,"|").concat(je.target,"|").concat(Me)]?-1:1);re%2===1?je.curveOffset=Re*Math.ceil(Me/2)*s:je.curveOffset=Re*(Math.floor(Me/2)*s+t)}return e},zv=_(731278),am=function(){function i(e){this.destroyed=!1,this.graph=e,this.destroyed=!1}return i.prototype.getViewCenter=function(){var e=this.getFormatPadding(),t=this.graph,r=this.graph.get("width"),n=t.get("height");return{x:(r-e[1]-e[3])/2+e[3],y:(n-e[0]-e[2])/2+e[0]}},i.prototype.fitCenter=function(e,t){var r=this.graph,n=r.get("group"),a,o=r.getNodes();if(o.length>r.get("optimizeThreshold")){var s=1/0,u=1/0,f=-1/0,c=-1/0;o.forEach(function(Ct){var Ht=Ct.getModel(),ne=Ht.x,re=Ht.y;s>ne&&(s=ne),u>re&&(u=re),f<ne&&(f=ne),c<re&&(c=re)});var d=n.getMatrix()||[1,0,0,0,1,0,0,0,1],A=cn({x:s,y:u},d),D=A.x,z=A.y,Z=cn({x:f,y:c},d),rt=Z.x,ft=Z.y;a={minX:D,maxX:rt,minY:z,maxY:ft,width:rt-D,height:ft-z,x:D,y:z}}else a=n.getCanvasBBox();if(!(a.width===0||a.height===0)){var ct=this.getViewCenter(),gt={x:a.x+a.width/2,y:a.y+a.height/2};r.translate(ct.x-gt.x,ct.y-gt.y,e,t)}},i.prototype.animatedFitView=function(e,t,r,n,a,o,s,u){var f=this.graph;r=r||{duration:500,easing:"easeCubic"};var c=[1,0,0,0,1,0,0,0,1],d=n.x+a.x-o.x-n.minX,A=n.y+a.y-o.y-n.minY;if(!(Cf(d)||Cf(A))){var D=(0,zv.vs)(c,[["t",d,A]]);if(!u){var z=Ds({animateCfg:r,callback:function(){f.emit("viewportchange",{action:"translate",matrix:D})}});e.animate(function(Ct){return{matrix:fo(t,D,Ct)}},z);return}var Z=f.get("minZoom"),rt=f.get("maxZoom"),ft=s;Z&&s<Z?(ft=Z,console.warn("fitview failed, ratio out of range, ratio: %f",s,"graph minzoom has been used instead")):rt&&s>rt&&(ft=rt,console.warn("fitview failed, ratio out of range, ratio: %f",s,"graph maxzoom has been used instead"));var ct=(0,zv.vs)(D,[["t",-a.x,-a.y],["s",ft,ft],["t",a.x,a.y]]),gt=Ds({animateCfg:r,callback:function(){e.setMatrix(ct),f.emit("viewportchange",{action:"translate",matrix:D}),f.emit("viewportchange",{action:"zoom",matrix:ct})}});e.stopAnimate(),e.setMatrix(t),e.animate(function(Ct){return{matrix:fo(t,ct,Ct)}},gt)}},i.prototype.fitView=function(e,t){var r=this.graph,n=this.getFormatPadding(),a=r.get("width"),o=r.get("height"),s=r.get("group"),u=s.getMatrix()||[1,0,0,0,1,0,0,0,1];s.resetMatrix();var f,c=r.getNodes();if(c.length>r.get("optimizeThreshold")){var d=1/0,A=1/0,D=-1/0,z=-1/0;c.forEach(function(ne){var re=ne.getModel(),Me=re.x,je=re.y;d>Me&&(d=Me),A>je&&(A=je),D<Me&&(D=Me),z<je&&(z=je)}),f={minX:d,maxX:D,minY:A,maxY:z,width:D-d,height:z-A,x:d,y:A}}else f=s.getCanvasBBox();if(!(f.width===0||f.height===0)){var Z=this.getViewCenter(),rt={x:f.x+f.width/2,y:f.y+f.height/2},ft=(a-n[1]-n[3])/f.width,ct=(o-n[0]-n[2])/f.height,gt=ft;if(ft>ct&&(gt=ct),e)this.animatedFitView(s,u,t,f,Z,rt,gt,!0);else{var Ct=Z.x-rt.x,Ht=Z.y-rt.y;if(Cf(Ct)||Cf(Ht))return;r.translate(Ct,Ht),r.zoom(gt,Z)||console.warn("zoom failed, ratio out of range, ratio: %f",gt)}}},i.prototype.fitViewByRules=function(e,t,r){var n=e.onlyOutOfViewPort,a=n===void 0?!1:n,o=e.direction,s=o===void 0?"both":o,u=e.ratioRule,f=u===void 0?"min":u,c=this.graph,d=this.getFormatPadding(),A=c.get("width"),D=c.get("height"),z=c.get("group"),Z=z.getMatrix()||[1,0,0,0,1,0,0,0,1];z.resetMatrix();var rt,ft=c.getNodes();if(ft.length>c.get("optimizeThreshold")){var ct=1/0,gt=1/0,Ct=-1/0,Ht=-1/0;ft.forEach(function(Gn){var Pn=Gn.getModel(),sn=Pn.x,Jn=Pn.y;ct>sn&&(ct=sn),gt>Jn&&(gt=Jn),Ct<sn&&(Ct=sn),Ht<Jn&&(Ht=Jn)}),rt={minX:ct,maxX:Ct,minY:gt,maxY:Ht,width:Ct-ct,height:Ht-gt,x:ct,y:gt}}else rt=z.getCanvasBBox();if(!(rt.width===0||rt.height===0)){var ne=this.getViewCenter(),re={x:rt.x+rt.width/2,y:rt.y+rt.height/2},Me=(A-d[1]-d[3])/rt.width,je=(D-d[0]-d[2])/rt.height,Re;if(s==="x"?Re=Me:s==="y"?Re=je:Re=f==="max"?Math.max(Me,je):Math.min(Me,je),a&&(Re=Re<1?Re:1),t)this.animatedFitView(z,Z,r,rt,ne,re,Re,!0);else{var ir=c.getZoom(),Sr=ir*Re,pn=c.get("minZoom");Sr<pn&&(Sr=pn,console.warn("fitview failed, ratio out of range, ratio: %f",Re,"graph minzoom has been used instead")),c.translate(ne.x-re.x,ne.y-re.y),c.zoomTo(Sr,ne)}}},i.prototype.getFormatPadding=function(){var e=this.graph.get("fitViewPadding");return Dh(e)},i.prototype.focusPoint=function(e,t,r){var n=this,a=this.getViewCenter(),o=this.getPointByCanvas(a.x,a.y),s=this.graph.get("group").getMatrix();if(s||(s=[1,0,0,0,1,0,0,0,1]),t){var u=(o.x-e.x)*s[0],f=(o.y-e.y)*s[4],c=0,d=0,A=0,D=0;this.graph.get("canvas").animate(function(z){A=u*z,D=f*z,n.graph.translate(A-c,D-d),c=A,d=D},(0,y.__assign)({},r))}else this.graph.translate((o.x-e.x)*s[0],(o.y-e.y)*s[4])},i.prototype.getPointByCanvas=function(e,t){var r=this.graph.get("group").getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var n=Mn({x:e,y:t},r);return n},i.prototype.getPointByClient=function(e,t){var r=this.graph.get("canvas"),n=r.getPointByClient(e,t);return this.getPointByCanvas(n.x,n.y)},i.prototype.getClientByPoint=function(e,t){var r=this.graph.get("canvas"),n=this.getCanvasByPoint(e,t),a=r.getClientByPoint(n.x,n.y);return{x:a.x,y:a.y}},i.prototype.getCanvasByPoint=function(e,t){var r=this.graph.get("group").getMatrix();return r||(r=[1,0,0,0,1,0,0,0,1]),cn({x:e,y:t},r)},i.prototype.focus=function(e,t,r){if((0,l.isString)(e)&&(e=this.graph.findById(e)),e){var n=0,a=0;if(e.getType&&e.getType()==="edge"){var o=e.getSource().get("group").getMatrix(),s=e.getTarget().get("group").getMatrix();o&&s?(n=(o[6]+s[6])/2,a=(o[7]+s[7])/2):(o||s)&&(n=o?o[6]:s[6],a=o?o[7]:s[7])}else{var u=e.get("group"),f=u.getMatrix();f||(f=[1,0,0,0,1,0,0,0,1]),n=f[6],a=f[7]}this.focusPoint({x:n,y:a},t,r)}},i.prototype.focusItems=function(e,t,r,n){if(e.length){var a=this.graph,o=this.getFormatPadding(),s=a.get("width"),u=a.get("height"),f=a.get("group"),c=f.getMatrix()||[1,0,0,0,1,0,0,0,1];f.resetMatrix();for(var d={x:0,y:0,minX:Number.MAX_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxX:Number.MIN_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER,width:0,height:0},A=0,D=e;A<D.length;A++){var z=D[A],Z=z.getBBox();Z.minX<d.minX&&(d.minX=Z.minX),Z.minY<d.minY&&(d.minY=Z.minY),Z.maxX>d.maxX&&(d.maxX=Z.maxX),Z.maxY>d.maxY&&(d.maxY=Z.maxY)}if(d.x=d.minX,d.y=d.minY,d.width=d.maxX-d.minX,d.height=d.maxY-d.minY,!(d.width===0||d.height===0)){var rt=this.getViewCenter(),ft={x:d.x+d.width/2,y:d.y+d.height/2},ct=(s-o[1]-o[3])/d.width,gt=(u-o[0]-o[2])/d.height,Ct=ct;ct>gt&&(Ct=gt),r?this.animatedFitView(f,c,n,d,rt,ft,Ct,t):(a.translate(rt.x-ft.x,rt.y-ft.y),t&&!a.zoom(Ct,rt)&&console.warn("zoom failed, ratio out of range, ratio: %f",Ct))}}},i.prototype.changeSize=function(e,t){var r=this.graph;if(!(0,l.isNumber)(e)||!(0,l.isNumber)(t))throw Error("invalid canvas width & height, please make sure width & height type is number");r.set({width:e,height:t});var n=r.get("canvas");n.changeSize(e,t);var a=r.get("plugins");a.forEach(function(o){o.get("gridContainer")&&o.positionInit()})},i.prototype.destroy=function(){this.graph=null,this.destroyed=!1},i}(),im=am;function Ph(i){"@babel/helpers - typeof";return Ph=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ph(i)}function Gv(i){if(typeof i!="string")return i;var e=function(re){if(typeof re!="string")return re;try{return JSON.parse(re.trim())}catch(Me){return re.trim()}},t=e(i);if(typeof t!="string")return t;for(var r=function(re){return re[re.length-1]},n=i.trim(),a=[],o=[],s=function(){for(var re=[],Me=0;Me<arguments.length;Me++)re[Me]=arguments[Me];return re.some(function(je){return r(o)===je})},u=function(){return r(a)},f=null,c=0,d="";c<n.length;){var A=n[c],D=s('"',"'");if(!D&&!A.trim()){c+=1;continue}var z=n[c-1]==="\\",Z=s("}"),rt=s("]"),ft=s(","),ct=u();if(D)if(r(o)===A&&!z){o.pop();var gt=e(d);ct.push(gt),f=gt,d=""}else d+=A;else if(rt&&A===",")d&&(ct.push(e(d)),d="");else if(Z&&A===":")o.push(","),d&&(ct.push(d),d="");else if(ft&&A===",")d&&(ct.push(e(d)),d=""),o.pop();else if(A==="}"&&(Z||ft)){d&&(ct.push(e(d)),d=""),ft&&o.pop();for(var Ct={},Ht=1;Ht<ct.length;Ht+=2)Ct[ct[Ht-1]]=ct[Ht];a.pop(),a.length&&r(a).push(Ct),o.pop(),f=Ct}else A==="]"&&rt?(d&&(ct.push(e(d)),d=""),a.pop(),a.length&&r(a).push(ct),o.pop(),f=ct):A==="{"?(a.push([]),o.push("}")):A==="["?(a.push([]),o.push("]")):A==='"'?o.push('"'):A==="'"?o.push("'"):d+=A;c+=1}return f||d}var om=function(e){return e.split("-").reduce(function(t,r){return t+r.charAt(0).toUpperCase()+r.slice(1)})},sm=function(e){return function(t){for(var r=e.length,n=[],a=0,o="";a<r;)if(e[a]==="{"&&e[a+1]==="{")n.push(o),o="",a+=2;else if(e[a]==="}"&&e[a+1]==="}"){if(n.length){var s=n.pop();o=(0,l.get)(t,o,s.endsWith("=")?'"{'.concat(o,'}"'):o),n.push(s+o)}a+=2,o=""}else o+=e[a],a+=1;return n.push(o),n.map(function(u,f){return n[f-1]&&n[f-1].endsWith("=")?'"{'.concat(u,'}"'):u}).join("")}};function Uv(i,e){var t={},r=i.getAttributeNames&&i.getAttributeNames()||[],n=i.children&&Array.from(i.children).map(function(s){return Uv(s,e)}),a={},o=i.tagName?i.tagName.toLowerCase():"group";return o==="text"&&(t.text=i.innerText),a.type=o,o==="img"&&(a.type="image"),Array.from(r).forEach(function(s){var u=om(s),f=i.getAttribute(s);try{if(u==="style"||u==="attrs"){var c=Gv(f);t=(0,y.__assign)((0,y.__assign)({},t),c)}else a[u]=Gv(f)}catch(d){if(u==="style")throw d;a[u]=f}}),a.attrs=t,e&&e.style&&a.name&&Ph(e.style[a.name])==="object"&&(a.attrs=(0,y.__assign)((0,y.__assign)({},a.attrs),e.style[a.name])),e&&e.style&&a.keyshape&&(a.attrs=(0,y.__assign)((0,y.__assign)({},a.attrs),e.style)),n.length&&(a.children=n),a}function um(i,e,t){var r=i.attrs,n=r===void 0?{}:r,a={x:e.x||0,y:e.y||0,width:t.width||0,height:t.height||0},o,s;switch(i.type){case"maker":case"circle":n.r&&(s=2*n.r,o=2*n.r);break;case"text":n.text&&(s=ks(n.text,n.fontSize||12)[0],o=16,a.y+=o,a.height=o,a.width=s,i.attrs=(0,y.__assign)({fontSize:12,fill:"#000"},n));break;default:n.width&&(s=n.width),n.height&&(o=n.height)}return o>=0&&(a.height=o),s>=0&&(a.width=s),n.marginTop&&(a.y+=n.marginTop),n.marginLeft&&(a.x+=n.marginLeft),a}function Wv(i,e){var t;e===void 0&&(e={x:0,y:0});var r=(0,y.__assign)({x:0,y:0,width:0,height:0},e);if(!((t=i.children)===null||t===void 0)&&t.length){var n=i.attrs,a=n===void 0?{}:n,o=a.marginTop,s=(0,y.__assign)({},e);o&&(s.y+=o);for(var u=0;u<i.children.length;u++){i.children[u].attrs.key="".concat(a.key||"root"," -").concat(u," ");var f=Wv(i.children[u],s);if(f.bbox){var c=f.bbox;f.attrs.next==="inline"?s.x+=f.bbox.width:s.y+=f.bbox.height,c.width+c.x>r.width&&(r.width=c.width+c.x),c.height+c.y>r.height&&(r.height=c.height+c.y)}}}return i.bbox=um(i,e,r),i.attrs=(0,y.__assign)((0,y.__assign)({},i.attrs),i.bbox),i}function Yv(i,e){var t,r,n,a,o=(i||{}).type,s=((e==null?void 0:e.attrs)||{}).key;if(s&&i&&(i.attrs.key=s),!i&&e)return{action:"delete",val:e,type:o,key:s};if(i&&!e)return{action:"add",val:i,type:o};if(!i&&!e)return{action:"same",type:o};var u=[];if(((t=i.children)===null||t===void 0?void 0:t.length)>0||((r=e.children)===null||r===void 0?void 0:r.length)>0)for(var f=Math.max((n=i.children)===null||n===void 0?void 0:n.length,(a=e.children)===null||a===void 0?void 0:a.length),c=e.children||[],d=i.children||[],A=0;A<f;A+=1)u.push(Yv(d[A],c[A]));var D=Object.keys(e.attrs),z=Object.keys(i.attrs);return e.type!==i.type?{action:"restructure",nowTarget:i,formerTarget:e,key:s,children:u}:D.filter(function(Z){return Z!=="children"}).some(function(Z){return i.attrs[Z]!==e.attrs[Z]||!z.includes(Z)})?{action:"change",val:i,children:u,type:o,key:s}:{action:"same",children:u,type:o,key:s}}function Xv(i){var e={},t=function(n){var a=typeof i=="function"?i(n):i,o=sm(a)(n),s=document.createElement("div");s.innerHTML=o;var u=s.children[0],f=Wv(Uv(u,n));return s.remove(),f};return{draw:function(n,a){var o=t(n),s=a,u=function f(c){var d=c.attrs,A=d===void 0?{}:d,D=c.bbox,z=c.type,Z=c.children,rt=(0,y.__rest)(c,["attrs","bbox","type","children"]);if(c.type!=="group"){var ft=a.addShape(c.type,(0,y.__assign)({attrs:A,origin:{bbox:D,type:z,children:Z}},rt));c.keyshape&&(s=ft)}c.children&&c.children.forEach(function(ct){return f(ct)})};return u(o),e[n.id]=[o],s},update:function(n,a){e[n.id]||(e[n.id]=[]);var o=a.getContainer(),s=o.get("children"),u=t(n),f=e[n.id].pop(),c=Yv(u,f),d=function z(Z){var rt;Z.type!=="group"&&o.addShape(Z.type,{attrs:Z.attrs}),!((rt=Z.children)===null||rt===void 0)&&rt.length&&Z.children.map(function(ft){return z(ft)})},A=function z(Z){var rt,ft=s.find(function(ct){return ct.attrs.key===Z.attrs.key});ft&&o.removeChild(ft),!((rt=Z.children)===null||rt===void 0)&&rt.length&&Z.children.map(function(ct){return z(ct)})},D=function z(Z){var rt=Z.key;if(Z.type!=="group"){var ft=s.find(function(gt){return gt.attrs.key===rt});switch(Z.action){case"change":if(ft){var ct=Z.val.keyshape?a.getOriginStyle():{};ft.attr((0,y.__assign)((0,y.__assign)({},ct),Z.val.attrs))}break;case"add":d(Z.val);break;case"delete":A(Z.val);break;case"restructure":A(Z.formerTarget),d(Z.nowTarget);break;default:break}}Z.children&&Z.children.forEach(function(gt){return z(gt)})};D(c),e[n.id].push(u)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var Lh={};function jv(i){return Lh[i]||(Lh[i]=(0,l.upperFirst)(i)),Lh[i]}var fm={defaultShapeType:"defaultType",className:null,getShape:function(e){var t=this,r=t[e]||t[t.defaultShapeType]||t["simple-circle"];return r},draw:function(e,t,r){var n=this.getShape(e);r.shapeMap={};var a=n.draw(t,r);return n.afterDraw&&n.afterDraw(t,r,a),a},baseUpdate:function(e,t,r,n){var a,o,s=this.getShape(e);s.update&&(s.mergeStyle=(a=s.getOptions)===null||a===void 0?void 0:a.call(s,t,n),(o=s.update)===null||o===void 0||o.call(s,t,r,n)),s.afterUpdate&&s.afterUpdate(t,r)},setState:function(e,t,r,n){var a=this.getShape(e);a.setState(t,r,n)},shouldUpdate:function(e){var t=this.getShape(e);return!!t.update},getControlPoints:function(e,t){var r=this.getShape(e);return r.getControlPoints(t)},getAnchorPoints:function(e,t){var r=this.getShape(e);return r.getAnchorPoints(t)}},Nh={options:{},draw:function(e,t){return this.drawShape(e,t)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t=this.options.anchorPoints,r=e.anchorPoints||t;return r}},Xd=function(){function i(){}return i.registerFactory=function(e,t){var r=jv(e),n=fm,a=(0,y.__assign)((0,y.__assign)({},n),t);return i[r]=a,a.className=r,a},i.getFactory=function(e){var t=jv(e);return i[t]},i.registerNode=function(e,t,r){var n=i.Node,a;if(typeof t=="string"||typeof t=="function"){var o=Xv(t);a=(0,y.__assign)((0,y.__assign)({},n.getShape("single-node")),o)}else if(t.jsx){var s=t.jsx,o=Xv(s);a=(0,y.__assign)((0,y.__assign)((0,y.__assign)({},n.getShape("single-node")),o),t)}else{n.getShape(r);var u=r?n.getShape(r):Nh;a=(0,y.__assign)((0,y.__assign)({},u),t)}return a.type=e,a.itemType="node",n[e]=a,a},i.registerEdge=function(e,t,r){var n=i.Edge,a=r?n.getShape(r):Nh,o=(0,y.__assign)((0,y.__assign)({},a),t);return o.type=e,o.itemType="edge",n[e]=o,o},i.registerCombo=function(e,t,r){var n=i.Combo,a=r?n.getShape(r):Nh,o=(0,y.__assign)((0,y.__assign)({},a),t);return o.type=e,o.itemType="combo",n[e]=o,o},i}(),Ns=Xd;Xd.registerFactory("node",{defaultShapeType:"circle"}),Xd.registerFactory("edge",{defaultShapeType:"line"}),Xd.registerFactory("combo",{defaultShapeType:"circle"});var Rh="bboxCache",kh="bboxCanvasCache",qS=null,cm=function(){function i(e){this._cfg={},this.destroyed=!1,this.optimize=!1;var t={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(t,this.getDefaultCfg(),e);var r=this.get("model"),n=r.id,a=this.get("type");typeof n=="undefined"?n=Ih(a):typeof n!="string"&&(n=String(n)),this.get("model").id=n,this.set("id",n);var o=e.group;o&&(o.set("item",this),o.set("id",n)),this.init(),this.draw();var s=r.shape||r.type||(a==="edge"?"line":"circle"),u=this.get("shapeFactory");if(u&&u[s]){var f=u[s].options;if(f&&f.stateStyles){var c=this.get("styles")||r.stateStyles;c=(0,l.deepMix)({},f.stateStyles,c),this.set("styles",c)}}}return i.prototype.calculateBBox=function(){var e=this.get("keyShape"),t=this.get("group"),r=qa(e,t);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},i.prototype.calculateCanvasBBox=function(){var e=this.get("keyShape"),t=this.get("group"),r=qa(e,t);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},i.prototype.drawInner=function(){var e=this,t=e.get("shapeFactory"),r=e.get("group"),n=e.get("model");r.clear();var a=n.visible;if(a!==void 0&&!a&&e.changeVisibility(a),!!t){e.updatePosition(n);var o=e.getShapeCfg(n),s=o.type,u=t.draw(s,o,r);u&&(e.set("keyShape",u),u.set("isKeyShape",!0),u.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",s),this.restoreStates(t,s)}},i.prototype.setOriginStyle=function(){var e=this.get("group"),t=e.get("children"),r=this.getKeyShape(),n=this,a=r.get("name");if(this.get("originStyle")){var D=this.get("originStyle");a&&!D[a]&&(D[a]={});for(var z=this.getCurrentStatesStyle(),Z=function(ft){var ct=t[ft],gt=ct.get("name"),Ct=ct.attr();if(gt&&gt!==a){var Ht=z[gt];D[gt]||(D[gt]={}),Ht?Object.keys(Ct).forEach(function(Me){var je=Ct[Me];je!==Ht[Me]&&(D[gt][Me]=je)}):D[gt]=ct.get("type")!=="image"?(0,l.clone)(Ct):n.getShapeStyleByName(gt)}else{var ne=ct.attr(),re={};Object.keys(z).forEach(function(Me){var je=z[Me];(Me===a||!(0,l.isPlainObject)(je))&&(re[Me]=je)}),Object.keys(ne).forEach(function(Me){var je=ne[Me];re[Me]!==je&&(a?D[a][Me]=je:D[Me]=je)})}},s=0;s<t.length;s++)Z(s);delete D.path,delete D.matrix,delete D.x,delete D.y,D[a]&&(delete D[a].x,delete D[a].y,delete D[a].matrix,delete D[a].path),n.set("originStyle",D)}else{for(var o={},s=0;s<t.length;s++){var u=t[s],f=u.get("type"),c=u.get("name");if(c&&c!==a)o[c]=f!=="image"?(0,l.clone)(u.attr()):n.getShapeStyleByName(c),f==="text"&&o[c]&&(delete o[c].x,delete o[c].y,delete o[c].matrix);else{var d=n.getShapeStyleByName();if(delete d.path,delete d.matrix,!a)Object.assign(o,d);else if(c)o[a]=d;else{var A=Ih("shape");u.set("name",A),e.shapeMap[A]=u,o[A]=f!=="image"?(0,l.clone)(u.attr()):n.getShapeStyleByName(c)}}}n.set("originStyle",o)}},i.prototype.restoreStates=function(e,t){var r=this,n=r.get("states");(0,l.each)(n,function(a){e.setState(t,a,!0,r)})},i.prototype.init=function(){var e=Ns.getFactory(this.get("type"));this.set("shapeFactory",e)},i.prototype.get=function(e){return this._cfg[e]},i.prototype.set=function(e,t){(0,l.isPlainObject)(e)?this._cfg=(0,y.__assign)((0,y.__assign)({},this._cfg),e):this._cfg[e]=t},i.prototype.getDefaultCfg=function(){return{}},i.prototype.clearCache=function(){this.set(Rh,null),this.set(kh,null)},i.prototype.beforeDraw=function(){},i.prototype.afterDraw=function(){},i.prototype.afterUpdate=function(){},i.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},i.prototype.getShapeStyleByName=function(e){var t=this.get("group"),r;if(e?r=t.shapeMap[e]:r=this.getKeyShape(),r){var n={};return(0,l.each)(r.attr(),function(a,o){(o!=="img"||(0,l.isString)(a))&&(n[o]=a)}),n}return{}},i.prototype.getShapeCfg=function(e,t){var r=this.get("styles");if(r){var n=e;return n.style=(0,y.__assign)((0,y.__assign)({},r),e.style),n}return e},i.prototype.getStateStyle=function(e){var t=this.get("styles"),r=t&&t[e];return r},i.prototype.getOriginStyle=function(){return this.get("originStyle")},i.prototype.getCurrentStatesStyle=function(){var e=this,t={},r=e.getStates();return!r||!r.length?this.get("originStyle"):((0,l.each)(e.getStates(),function(n){t=Object.assign(t,e.getStateStyle(n))}),t)},i.prototype.setState=function(e,t){var r=this.get("states"),n=this.get("shapeFactory"),a=e,o=e;(0,l.isString)(t)&&(a="".concat(e,":").concat(t),o="".concat(e,":"));var s=r;if((0,l.isBoolean)(t)){var u=r.indexOf(o);if(t){if(u>-1)return;r.push(a)}else u>-1&&r.splice(u,1)}else if((0,l.isString)(t)){var f=r.filter(function(A){return A.includes(o)});f.length>0&&this.clearStates(f),s=s.filter(function(A){return!A.includes(o)}),s.push(a),this.set("states",s)}if(n){var c=this.get("model"),d=c.type;n.setState(d,e,t,this)}},i.prototype.clearStates=function(e){var t=this,r=t.getStates(),n=t.get("shapeFactory"),a=t.get("model"),o=a.type;e||(e=r),(0,l.isString)(e)&&(e=[e]);var s=r.filter(function(u){return e.indexOf(u)===-1});t.set("states",s),e.forEach(function(u){n.setState(o,u,!1,t)})},i.prototype.setOptimize=function(e){this.optimize=e},i.prototype.getContainer=function(){return this.get("group")},i.prototype.getKeyShape=function(){return this.get("keyShape")},i.prototype.getModel=function(){return this.get("model")},i.prototype.getType=function(){return this.get("type")},i.prototype.getID=function(){return this.get("id")},i.prototype.isItem=function(){return!0},i.prototype.getStates=function(){return this.get("states")},i.prototype.hasState=function(e){var t=this.getStates();return t.indexOf(e)>=0},i.prototype.refresh=function(e){var t=this.get("model");this.updatePosition(t),this.updateShape(e),this.afterUpdate(),this.clearCache()},i.prototype.getUpdateType=function(e){},i.prototype.update=function(e,t){t===void 0&&(t=void 0);var r=this.get("model");if(t==="move")this.updatePosition(e);else{var n=r.visible,a=e.visible;n!==a&&a!==void 0&&this.changeVisibility(a);var o={x:r.x,y:r.y};e.x=isNaN(+e.x)?r.x:+e.x,e.y=isNaN(+e.y)?r.y:+e.y;var s=this.get("styles");if(e.stateStyles){var u=e.stateStyles;(0,l.mix)(s,u),delete e.stateStyles}Object.assign(r,e),(o.x!==e.x||o.y!==e.y)&&this.updatePosition(e),this.updateShape(t)}this.afterUpdate(),this.clearCache()},i.prototype.updateShape=function(e){var t=this.get("shapeFactory"),r=this.get("model"),n=r.type;if(t.shouldUpdate(n)&&n===this.get("currentShape")){var a=this.getShapeCfg(r,e);t.baseUpdate(n,a,this,e),e!=="move"&&this.setOriginStyle()}else this.draw();this.restoreStates(t,n)},i.prototype.updatePosition=function(e){var t=this.get("model"),r=isNaN(+e.x)?+t.x:+e.x,n=isNaN(+e.y)?+t.y:+e.y,a=this.get("group");if(isNaN(r)||isNaN(n))return!1;t.x=r,t.y=n;var o=a.getMatrix();return o&&o[6]===r&&o[7]===n?!1:(a.resetMatrix(),vi(a,{x:r,y:n}),this.clearCache(),!0)},i.prototype.getBBox=function(){var e=this.get(Rh);return e||(e=this.calculateBBox(),this.set(Rh,e)),e},i.prototype.getCanvasBBox=function(){var e=this.get(kh);return e||(e=this.calculateCanvasBBox(),this.set(kh,e)),e},i.prototype.toFront=function(){var e=this.get("group");e.toFront()},i.prototype.toBack=function(){var e=this.get("group");e.toBack()},i.prototype.show=function(){this.changeVisibility(!0)},i.prototype.hide=function(){this.changeVisibility(!1)},i.prototype.changeVisibility=function(e){var t=this.get("group");e?t.show():t.hide(),this.set("visible",e)},i.prototype.isVisible=function(){return this.get("visible")},i.prototype.enableCapture=function(e){var t=this.get("group");t&&t.set("capture",e)},i.prototype.destroy=function(){if(!this.destroyed){var e=this.get("animate"),t=this.get("group");e&&t.stopAnimate(),t.shapeMap={},this.clearCache(),t.remove(),this._cfg=null,this.destroyed=!0}},i}(),Vv=cm,jd={source:"start",target:"end"},Tf="Node",sd="Point",lm="Anchor",dm=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},e.prototype.setEnd=function(t,r){var n=jd[t]+sd,a=t+Tf,o=this.get(a);o&&!o.destroyed&&o.removeEdge(this),(0,l.isPlainObject)(r)?(this.set(n,r),this.set(a,null)):r&&(r.addEdge(this),this.set(a,r),this.set(n,null))},e.prototype.getLinkPoint=function(t,r,n){var a=jd[t]+sd,o=t+Tf,s=this.get(a);if(!s){var u=this.get(o),f=t+lm,c=this.getPrePoint(t,n),d=r[f];(0,l.isNil)(d)||(s=u.getLinkPointByAnchor(d)),s=s||u.getLinkPoint(c),(0,l.isNil)(s.index)||this.set("".concat(t,"AnchorIndex"),s.index)}return s},e.prototype.getPrePoint=function(t,r){if(r&&r.length){var n=t==="source"?0:r.length-1;return r[n]}var a=t==="source"?"target":"source";return this.getEndPoint(a)},e.prototype.getEndPoint=function(t){var r=t+Tf,n=jd[t]+sd,a=this.get(r);return a&&!a.destroyed?a.get("model"):this.get(n)},e.prototype.getControlPointsByCenter=function(t){var r=this.getEndPoint("source"),n=this.getEndPoint("target"),a=this.get("shapeFactory"),o=t.type;return a.getControlPoints(o,{startPoint:r,endPoint:n})},e.prototype.getEndCenter=function(t){var r=t+Tf,n=jd[t]+sd,a=this.get(r);if(a){var o=a.getBBox();return{x:o.centerX,y:o.centerY}}return this.get(n)},e.prototype.init=function(){i.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},e.prototype.getShapeCfg=function(t,r){var n=this,a=n.get("linkCenter"),o=r!=null&&r.includes("move")?t:i.prototype.getShapeCfg.call(this,t);if(a)o.startPoint=n.getEndCenter("source"),o.endPoint=n.getEndCenter("target");else{var s=o.controlPoints||n.getControlPointsByCenter(o);o.startPoint=n.getLinkPoint("source",t,s),o.endPoint=n.getLinkPoint("target",t,s)}return o.sourceNode=n.get("sourceNode"),o.targetNode=n.get("targetNode"),o},e.prototype.getModel=function(){var t=this.get("model"),r=this.get("source".concat(Tf)),n=this.get("target".concat(Tf));return r?delete t["source".concat(Tf)]:t.source=this.get("start".concat(sd)),n?delete t["target".concat(Tf)]:t.target=this.get("end".concat(sd)),!(0,l.isString)(t.source)&&!(0,l.isPlainObject)(t.source)&&(t.source=t.source.getID()),!(0,l.isString)(t.target)&&!(0,l.isPlainObject)(t.target)&&(t.target=t.target.getID()),t},e.prototype.setSource=function(t){this.setEnd("source",t),this.set("source",t)},e.prototype.setTarget=function(t){this.setEnd("target",t),this.set("target",t)},e.prototype.getSource=function(){return this.get("source")},e.prototype.getTarget=function(){return this.get("target")},e.prototype.updatePosition=function(){return!1},e.prototype.update=function(t,r){r===void 0&&(r=void 0);var n=this.get("model"),a=n.visible,o=t.visible;a!==o&&o!==void 0&&this.changeVisibility(o);var s=this.get("source"),u=this.get("target");if(!(!s||s.destroyed||!u||u.destroyed)){var f=this.get("styles");if(t.stateStyles){var c=t.stateStyles;(0,l.mix)(f,c),delete t.stateStyles}Object.assign(n,t),this.updateShape(r),this.afterUpdate(),this.clearCache()}},e.prototype.destroy=function(){var t=this.get("source".concat(Tf)),r=this.get("target".concat(Tf));t&&!t.destroyed&&t.removeEdge(this),r&&!r.destroyed&&r.removeEdge(this),i.prototype.destroy.call(this)},e}(Vv),Hv=dm,Bh="anchorPointsCache",hm="bboxCache",vm=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getNearestPoint=function(t,r){for(var n=0,a=t[0],o=sa(t[0],r),s=0;s<t.length;s++){var u=t[s],f=sa(u,r);f<o&&(a=u,o=f,n=s)}return a.anchorIndex=n,a},e.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getInEdges=function(){var t=this;return this.get("edges").filter(function(r){return r.get("target")===t})},e.prototype.getOutEdges=function(){var t=this;return this.get("edges").filter(function(r){return r.get("source")===t})},e.prototype.getNeighbors=function(t){var r=this,n=this.get("edges");if(t==="target"){var a=function(f){return f.getSource()===r};return n.filter(a).map(function(u){return u.getTarget()})}if(t==="source"){var o=function(f){return f.getTarget()===r};return n.filter(o).map(function(u){return u.getSource()})}var s=function(f){return f.getSource()===r?f.getTarget():f.getSource()};return n.map(s)},e.prototype.getLinkPointByAnchor=function(t){var r=this.getAnchorPoints();return r[t]},e.prototype.getLinkPoint=function(t){var r=this.get("keyShape"),n=r.get("type"),a=this.get("type"),o,s,u=this.getBBox();a==="combo"?(o=u.centerX||(u.maxX+u.minX)/2,s=u.centerY||(u.maxY+u.minY)/2):(o=u.centerX,s=u.centerY);var f=this.getAnchorPoints(),c;switch(n){case"circle":c=Yr({x:o,y:s,r:u.width/2},t);break;case"ellipse":c=Pr({x:o,y:s,rx:u.width/2,ry:u.height/2},t);break;default:c=Xr(u,t)}var d=c;return f.length&&(d||(d=t),d=this.getNearestPoint(f,d)),d||(d={x:o,y:s}),d},e.prototype.getAnchorPoints=function(){var t=this.get(Bh);if(!t){t=[];var r=this.get("shapeFactory"),n=this.getBBox(),a=this.get("model"),o=this.getShapeCfg(a),s=a.type,u=r.getAnchorPoints(s,o)||[];(0,l.each)(u,function(f,c){var d={x:n.minX+f[0]*n.width,y:n.minY+f[1]*n.height,anchorIndex:c};t.push(d)}),this.set(Bh,t)}return t},e.prototype.addEdge=function(t){this.get("edges").push(t)},e.prototype.lock=function(){this.set("locked",!0)},e.prototype.unlock=function(){this.set("locked",!1)},e.prototype.hasLocked=function(){return this.get("locked")},e.prototype.removeEdge=function(t){var r=this.getEdges(),n=r.indexOf(t);n>-1&&r.splice(n,1)},e.prototype.clearCache=function(){this.set(hm,null),this.set(Bh,null)},e.prototype.getUpdateType=function(t){var r,n,a,o,s;if(t){var u=!(0,l.isNil)(t.x),f=!(0,l.isNil)(t.y),c=Object.keys(t);if(c.length===1&&(u||f)||c.length===2&&u&&f)return"move";if((0,l.isNumber)(t.x)||(0,l.isNumber)(t.y)||t.type||t.anchorPoints||t.size||t!=null&&t.style&&(!((r=t==null?void 0:t.style)===null||r===void 0)&&r.r||!((n=t==null?void 0:t.style)===null||n===void 0)&&n.width||!((a=t==null?void 0:t.style)===null||a===void 0)&&a.height||!((o=t==null?void 0:t.style)===null||o===void 0)&&o.rx||!((s=t==null?void 0:t.style)===null||s===void 0)&&s.ry))return"bbox|label";var d=c.includes("label")||c.includes("labelCfg");return d?"style|label":"style"}},e.prototype.setState=function(t,r){var n=this;if(this.optimize){i.prototype.setState.call(this,t,r);return}this.runWithBBoxAffected(function(){return i.prototype.setState.call(n,t,r)})},e.prototype.clearStates=function(t){var r=this;if(this.optimize){i.prototype.clearStates.call(this,t);return}this.runWithBBoxAffected(function(){return i.prototype.clearStates.call(r,t)})},e.prototype.runWithBBoxAffected=function(t){var r=["r","width","height","rx","ry","lineWidth"],n=this.getKeyShape().attr(),a={};Object.keys(this.getKeyShape().attr()).forEach(function(f){r.includes(f)&&(a[f]=n[f])}),t();for(var o=this.getKeyShape().attr(),s=0;s<r.length;s++){var u=r[s];if(o[u]!==a[u]){this.clearCache(),this.getEdges().forEach(function(f){return f.refresh()});break}}},e}(Vv),Fh=vm,Zv="bboxCache",Kv="bboxCanvasCache",$v="sizeCache",qv="anchorPointsCache",pm=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},e.prototype.getShapeCfg=function(t){var r=this.get("styles"),n=this.get("bbox");if(r&&n){var a=t,o=(0,l.isNumber)(t.size)?[t.size,t.size]:t.size,s=(0,l.isNumber)(t.fixSize)?[t.fixSize,t.fixSize]:t.fixSize,u=o||s||Ut.defaultCombo.size,f={r:(Math.max(n.width,n.height)||Math.max(u[0],u[1]))/2,width:n.width||u[0],height:n.height||u[1]};a.style=(0,y.__assign)((0,y.__assign)((0,y.__assign)({},r),t.style),f);var c=t.padding||Ut.defaultCombo.padding;return(0,l.isNumber)(c)?(f.r+=c,f.width+=c*2,f.height+=c*2):(f.r=f.r+Math.max.apply(Math,c),f.width+=c[1]+c[3]||c[1]*2,f.height+=c[0]+c[2]||c[0]*2),this.set($v,f),a}return t},e.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var t=this.get("keyShape"),r=this.get("group"),n=qa(t,r);n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2;var a=this.get(Zv)||{},o=a.x,s=a.x;return n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n.x=n.minX,n.y=n.minY,(n.x!==o||n.y!==s)&&this.set(qv,null),n}},e.prototype.getChildren=function(){var t=this;return{nodes:t.getNodes(),combos:t.getCombos()}},e.prototype.getNodes=function(){var t=this;return t.get("nodes")},e.prototype.getCombos=function(){var t=this;return t.get("combos")},e.prototype.addChild=function(t){var r=this,n=t.getType();switch(n){case"node":r.addNode(t);break;case"combo":r.addCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.addCombo=function(t){var r=this;return r.get("combos").push(t),!0},e.prototype.addNode=function(t){var r=this;return r.get("nodes").push(t),!0},e.prototype.removeChild=function(t){var r=this,n=t.getType();switch(n){case"node":r.removeNode(t);break;case"combo":r.removeCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.removeCombo=function(t){if(t){var r=this.getCombos(),n=r.indexOf(t);return n>-1?(r.splice(n,1),!0):!1}},e.prototype.removeNode=function(t){if(t){var r=this.getNodes(),n=r.indexOf(t);return n>-1?(r.splice(n,1),!0):!1}},e.prototype.getUpdateType=function(t){},e.prototype.getBBox=function(){this.set(Kv,null);var t=this.calculateCanvasBBox();return t},e.prototype.clearCache=function(){this.set(Zv,null),this.set(Kv,null),this.set(qv,null)},e.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),r=this.get("group");t&&r.stopAnimate(),r.shapeMap={},this.clearCache(),this.set($v,null),this.set("bbox",null),r.remove(),this._cfg=null,this.destroyed=!0}},e}(Fh),Qv=pm,Vd="node",Hd="edge",Jv="vedge",xd="combo",gm="default",tp="Mapper",cc="stateStyles",mm=function(){function i(e){var t=this;this.edgeToBeUpdateMap={},this.throttleRefresh=(0,l.throttle)(function(r){var n=t.graph;if(!(!n||n.get("destroyed"))){var a=t.edgeToBeUpdateMap;if(a){var o=Object.values(a);o.length&&(o.forEach(function(s){var u=s.edge;if(!(!u||u.destroyed)){var f=u.getSource(),c=u.getTarget();!f||f.destroyed||!c||c.destroyed||u.refresh(s.updateType)}}),t.edgeToBeUpdateMap={})}}},16,{trailing:!0,leading:!0}),this.graph=e,this.destroyed=!1}return i.prototype.addItem=function(e,t){var r=this.graph,n=e===Jv?Hd:e,a=r.get("".concat(n,"Group"))||r.get("group"),o=(0,l.upperFirst)(n),s=null,u=r.get(n+(0,l.upperFirst)(cc))||{},f=r.get(gm+o);t[cc]&&(u=t[cc]),f&&(0,l.each)(f,function(ne,re){(0,l.isObject)(ne)&&!(0,l.isArray)(ne)?t[re]=(0,l.deepMix)({},ne,t[re]):(0,l.isArray)(ne)?t[re]=t[re]||(0,l.clone)(f[re]):t[re]=t[re]||f[re]});var c=r.get(n+tp);if(c){var d=c(t);d[cc]&&(u=d[cc],delete d[cc]),(0,l.each)(d,function(ne,re){(0,l.isObject)(ne)&&!(0,l.isArray)(ne)?t[re]=(0,l.deepMix)({},t[re],ne):t[re]=d[re]||t[re]})}if(r.emit("beforeadditem",{type:e,model:t}),e===Hd||e===Jv){var A=void 0,D=void 0;if(A=t.source,D=t.target,A&&(0,l.isString)(A)&&(A=r.findById(A)),D&&(0,l.isString)(D)&&(D=r.findById(D)),!A||!D){console.warn("The source or target node of edge ".concat(t.id," does not exist!"));return}A.getType&&A.getType()==="combo"&&(t.isComboEdge=!0),D.getType&&D.getType()==="combo"&&(t.isComboEdge=!0),s=new Hv({model:t,source:A,target:D,styles:u,linkCenter:r.get("linkCenter"),group:a.addGroup()})}else if(e===Vd)s=new Fh({model:t,styles:u,group:a.addGroup()});else if(e===xd){var z=t.children,Z=Vs(z,r),rt=void 0,ft=void 0;if(isNaN(Z.x)?isNaN(t.x)&&(rt=Math.random()*100):rt=Z.x,isNaN(Z.y)?isNaN(t.y)&&(ft=Math.random()*100):ft=Z.y,isNaN(t.x)||isNaN(t.y))t.x=rt,t.y=ft;else{var ct=t.x-rt,gt=t.y-ft;this.updateComboSucceeds(t.id,ct,gt,z)}var Ct=a.addGroup();Ct.setZIndex(t.depth),s=new Qv({model:t,styles:u,animate:r.get("animate"),bbox:t.collapsed?Vs([],r):Z,group:Ct}),!t.collapsed&&s.getKeyShape().get("type")==="circle"&&(Z.width=Math.hypot(Z.height,Z.width),Z.height=Z.width,s.set("bbox",Z),s.refresh());var Ht=s.getModel();(z||[]).forEach(function(ne){var re=r.findById(ne.id);s.addChild(re),ne.depth=Ht.depth+2})}if(s)return s.setOptimize(r.getNodes().length>r.get("optimizeThreshold")),r.get("".concat(e,"s")).push(s),r.get("itemMap")[s.get("id")]=s,r.emit("afteradditem",{item:s,model:t}),s},i.prototype.updateItem=function(e,t){var r=this,n,a,o=this.graph;if((0,l.isString)(e)&&(e=o.findById(e)),!(!e||e.destroyed)){var s="";e.getType&&(s=e.getType());var u=o.get(s+tp),f=e.getModel(),c=f.x,d=f.y,A=e.getUpdateType(t);if(u){var D=(0,l.deepMix)({},f,t),z=u(D),Z=(0,l.deepMix)({},f,z,t);z[cc]&&(e.set("styles",Z[cc]),delete Z[cc]),(0,l.each)(Z,function(Re,ir){t[ir]=Re})}else(0,l.each)(t,function(Re,ir){f[ir]&&(0,l.isObject)(Re)&&!(0,l.isArray)(Re)&&(t[ir]=(0,y.__assign)((0,y.__assign)({},f[ir]),t[ir]))});if(o.emit("beforeupdateitem",{item:e,cfg:t}),s===Hd){if(t.source){var rt=t.source;(0,l.isString)(rt)&&(rt=o.findById(rt)),e.setSource(rt)}if(t.target){var ft=t.target;(0,l.isString)(ft)&&(ft=o.findById(ft)),e.setTarget(ft)}e.update(t)}else if(s===Vd){e.update(t,A);var ct=e.getEdges();A==="move"?(0,l.each)(ct,function(Re){r.edgeToBeUpdateMap[Re.getID()]={edge:Re,updateType:A},r.throttleRefresh()}):A!=null&&A.includes("bbox")&&(0,l.each)(ct,function(Re){Re.refresh(A)})}else if(s===xd){if(e.update(t,A),!isNaN(t.x)||!isNaN(t.y)){var gt=t.x-c||0,Ct=t.y-d||0;this.updateComboSucceeds(f.id,gt,Ct)}var Ht=e.getEdges(),ne=(A==null?void 0:A.includes("bbox"))||A==="move";if(ne&&s===xd){var re=e.get("shapeFactory"),Me=f.type||"circle",je=f.animate===void 0||t.animate===void 0?(a=(n=re[Me])===null||n===void 0?void 0:n.options)===null||a===void 0?void 0:a.animate:f.animate||t.animate;je?setTimeout(function(){if(!(!e||e.destroyed)){var Re=e.getKeyShape();!Re||Re.destroyed||(0,l.each)(Ht,function(ir){ir&&!ir.destroyed&&ir.refresh()})}},201):(0,l.each)(Ht,function(Re){Re.refresh()})}}e.setOptimize(o.getNodes().length>o.get("optimizeThreshold")),o.emit("afterupdateitem",{item:e,cfg:t})}},i.prototype.updateCombo=function(e,t,r){var n=this,a,o,s=this.graph;if((0,l.isString)(e)&&(e=s.findById(e)),!(!e||e.destroyed)){var u=e.getModel(),f=Vs(t,s,e),c=f.x,d=f.y;e.set("bbox",f);var A=c,D=d;r?(A=isNaN(u.x)?c:u.x,D=isNaN(u.y)?d:u.y):(A=isNaN(c)?u.x:c,D=isNaN(d)?u.y:d),e.update({x:A,y:D});var z=e.get("shapeFactory"),Z=u.type||"circle",rt=u.animate===void 0?(o=(a=z[Z])===null||a===void 0?void 0:a.options)===null||o===void 0?void 0:o.animate:u.animate;rt?setTimeout(function(){if(!(!e||e.destroyed)){var ft=e.getKeyShape();!ft||ft.destroyed||(e.getShapeCfg(u),n.updateComboEdges(e))}},201):this.updateComboEdges(e)}},i.prototype.updateComboEdges=function(e){for(var t,r,n=e.getEdges()||[],a=0;a<n.length;a++){var o=n[a];!(o!=null&&o.destroyed)&&!(!((t=o==null?void 0:o.getSource())===null||t===void 0)&&t.destroyed)&&!(!((r=o==null?void 0:o.getTarget())===null||r===void 0)&&r.destroyed)&&o.refresh()}},i.prototype.collapseCombo=function(e,t){t===void 0&&(t=!0);var r=this.graph;(0,l.isString)(e)&&(e=r.findById(e));var n=e.getChildren();n.nodes.forEach(function(a){r.hideItem(a,t)}),n.combos.forEach(function(a){r.hideItem(a,t)})},i.prototype.updateComboSucceeds=function(e,t,r,n){var a=this;n===void 0&&(n=[]);var o=this.graph;if(!(!t&&!r)){var s=n;if(!(s!=null&&s.length)){var u=o.get("comboTrees");u==null||u.forEach(function(f){Qi(f,function(c){return c.id===e?(s=c.children,!1):!0})})}s==null||s.forEach(function(f){var c=o.findById(f.id);if(c){var d=c.getModel();a.updateItem(f.id,{x:(d.x||0)+t,y:(d.y||0)+r})}})}},i.prototype.expandCombo=function(e,t){t===void 0&&(t=!0);var r=this.graph;(0,l.isString)(e)&&(e=r.findById(e));var n=e.getChildren(),a=new Set;n.nodes.forEach(function(o){r.showItem(o,t),o.getEdges().forEach(function(s){return a.add(s)})}),n.combos.forEach(function(o){o.getModel().collapsed?o.show():r.showItem(o,t),o.getEdges().forEach(function(s){return a.add(s)})}),a.forEach(function(o){return o.refresh()})},i.prototype.removeItem=function(e){var t=this,r=this.graph;if((0,l.isString)(e)&&(e=r.findById(e)),!(!e||e.destroyed)){var n=(0,l.clone)(e.getModel()),a="";e.getType&&(a=e.getType()),r.emit("beforeremoveitem",{item:n,type:a});var o=r.get("".concat(a,"s")),s=o.indexOf(e);if(s>-1&&o.splice(s,1),a===Hd){var u=r.get("v".concat(a,"s")),f=u.indexOf(e);f>-1&&u.splice(f,1)}var c=e.get("id"),d=r.get("itemMap");delete d[c];var A=r.get("comboTrees"),D=e.get("id");if(a===Vd){var z=e.getModel().comboId;if(A&&z){var Z=A,rt=!1;A.forEach(function(ne){rt||Qi(ne,function(re){if(re.id===D&&Z){var Me=Z.indexOf(re);return Z.splice(Me,1),rt=!0,!1}return Z=re.children,!0})})}for(var ft=e.getEdges(),ct=ft.length-1;ct>=0;ct--)r.removeItem(ft[ct],!1);z&&r.updateCombo(z)}else if(a===xd){var gt=e.getModel().parentId,Ct,Ht=!1;(A||[]).forEach(function(re){Ht||Qi(re,function(Me){return Me.id===D?(Ct=Me,Ht=!0,!1):!0})}),Ct.removed=!0,Ct&&Ct.children&&Ct.children.forEach(function(re){t.removeItem(re.id)});for(var ft=e.getEdges(),ct=ft.length;ct>=0;ct--)r.removeItem(ft[ct],!1);gt&&r.updateCombo(gt)}e.destroy(),r.emit("afterremoveitem",{item:n,type:a})}},i.prototype.setItemState=function(e,t,r){var n=this.graph,a=t;(0,l.isString)(r)&&(a="".concat(t,":").concat(r)),!(e.hasState(a)===r&&r||(0,l.isString)(r)&&e.hasState(a))&&(n.emit("beforeitemstatechange",{item:e,state:a,enabled:r}),e.setState(t,r),n.autoPaint(),n.emit("afteritemstatechange",{item:e,state:a,enabled:r}))},i.prototype.priorityState=function(e,t){var r=this.graph,n=e;(0,l.isString)(e)&&(n=r.findById(e)),this.setItemState(n,t,!1),this.setItemState(n,t,!0)},i.prototype.clearItemStates=function(e,t){var r=this.graph;(0,l.isString)(e)&&(e=r.findById(e)),r.emit("beforeitemstatesclear",{item:e,states:t}),e.clearStates(t),r.emit("afteritemstatesclear",{item:e,states:t})},i.prototype.refreshItem=function(e){var t=this.graph;(0,l.isString)(e)&&(e=t.findById(e)),t.emit("beforeitemrefresh",{item:e}),e.refresh(),t.emit("afteritemrefresh",{item:e})},i.prototype.addCombos=function(e,t){var r=this,n=this.graph;(e||[]).forEach(function(o){Io(o,function(s){var u;return t.forEach(function(f){f.id===s.id&&(f.children=s.children,f.depth=s.depth,u=f)}),u&&r.addItem("combo",u),!0})});var a=n.get("comboGroup");a&&a.sort()},i.prototype.changeItemVisibility=function(e,t){var r=this,n=this.graph;if((0,l.isString)(e)&&(e=n.findById(e)),!e){console.warn("The item to be shown or hidden does not exist!");return}if(n.emit("beforeitemvisibilitychange",{item:e,visible:t}),e.changeVisibility(t),e.getType&&e.getType()===Vd){var a=e.getEdges();(0,l.each)(a,function(c){t&&!(c.get("source").isVisible()&&c.get("target").isVisible())||r.changeItemVisibility(c,t)})}else if(e.getType&&e.getType()===xd){var o=n.get("comboTrees"),s=e.get("id"),u=[],f=!1;(o||[]).forEach(function(d){f||!d.children||d.children.length===0||Qi(d,function(A){return A.id===s?(u=A.children,f=!0,!1):!0})}),u&&(!t||t&&!e.getModel().collapsed)&&u.forEach(function(d){var A=n.findById(d.id);r.changeItemVisibility(A,t)});var a=e.getEdges();(0,l.each)(a,function(d){t&&!(d.get("source").isVisible()&&d.get("target").isVisible())||r.changeItemVisibility(d,t)})}return n.emit("afteritemvisibilitychange",{item:e,visible:t}),e},i.prototype.destroy=function(){this.graph=null,this.destroyed=!0},i}(),ym=mm,bm=function(){function i(e){this.graph=e,this.destroyed=!1}return i.prototype.updateState=function(e,t,r){var n=this.graph.get("states"),a=t;(0,l.isString)(r)&&(a="".concat(t,":").concat(r)),n[a]||(n[a]=[]),r?n[a].push(e):n[a]=n[a].filter(function(o){return o!==e}),this.graph.set("states",n),this.graph.emit("graphstatechange",{states:n})},i.prototype.updateStates=function(e,t,r){var n=this.graph.get("states"),a=(0,l.isString)(t)?[t]:t;a.forEach(function(o){var s=o;n[s]||(n[s]=[]),(0,l.isString)(r)&&(s="".concat(o,":").concat(r)),r?n[s].push(e):n[s]=n[s].filter(function(u){return u!==e})}),this.graph.set("states",n),this.graph.emit("graphstatechange",{states:t})},i.prototype.destroy=function(){this.graph=null,this.destroyed=!0},i}(),xm=bm,Em=function(e,t){return!e||!t?e:e.replace(/\\?\{([^{}]+)\}/g,function(r,n){if(r.charAt(0)==="\\")return r.slice(1);var a=t[n];return a===0&&(a="0"),a||""})},ep=function(e){var t=[];if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));for(var r=0,n=e;r<n.length;r++){var a=n[r],o=a.x,s=a.y;t.push(o),t.push(s)}var u=$r(t);return u.unshift(["M",e[0].x,e[0].y]),u},Zd=function(e,t,r,n){r===void 0&&(r=0),n===void 0&&(n=0);var a={x:(1-r)*e.x+r*t.x,y:(1-r)*e.y+r*t.y},o=[0,0];oa.normalize(o,[t.x-e.x,t.y-e.y]),(!o||!o[0]&&!o[1])&&(o=[0,0]);var s=[-o[1]*n,o[0]*n];return a.x+=s[0],a.y+=s[1],a},wm=function(e,t){var r=e.length;if(!r)return"";for(var n="",a="",o=0;o<r;o++){var s=e[o];o===0?a="M{x} {y}":a="L{x} {y}",n+=Em(a,s)}return t&&(n+="Z"),n},zh=function(e){var t=[];return e.forEach(function(r){var n=r[0];if(n!=="A")for(var a=1;a<r.length;a=a+2)t.push([r[a],r[a+1]]);else{var o=r.length;t.push([r[o-2],r[o-1]])}}),t},Gh=function(e){if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));var t=e[0],r=e[1],n=e[e.length-1],a=e[e.length-2];e.unshift(n),e.unshift(a),e.push(t),e.push(r);for(var o=[],s=1;s<e.length-2;s+=1){var u=e[s-1].x,f=e[s-1].y,c=e[s].x,d=e[s].y,A=e[s+1].x,D=e[s+1].y,z=s!==e.length-2?e[s+2].x:A,Z=s!==e.length-2?e[s+2].y:D,rt=c+(A-u)/6,ft=d+(D-f)/6,ct=A-(z-c)/6,gt=D-(Z-d)/6;o.push(["C",rt,ft,ct,gt,A,D])}return o.unshift(["M",n.x,n.y]),o},rp=function(e,t){return oa.scale([0,0],oa.normalize([0,0],e),t)},np=function(e,t){var r=[e[1]-t[1],t[0]-e[0]],n=Math.sqrt(r[0]*r[0]+r[1]*r[1]);if(n===0)throw new Error("p0 should not be equal to p1");return[r[0]/n,r[1]/n]},ap=function(e,t){return[t[0]-e[0],t[1]-e[1]]};function Uh(i,e){var t=function(d){var A=[d[0][0],d[0][1]-e],D=[d[0][0],d[0][1]+e];return"M ".concat(A," A ").concat(e,",").concat(e,",0,0,0,").concat(D," A ").concat(e,",").concat(e,",0,0,0,").concat(A)},r=function(d){var A=oa.scale([0,0],np(d[0],d[1]),e),D=oa.scale([0,0],A,-1),z=oa.add([0,0],d[0],A),Z=oa.add([0,0],d[1],A),rt=oa.add([0,0],d[1],D),ft=oa.add([0,0],d[0],D);return"M ".concat(z," L ").concat(Z," A ").concat([e,e,"0,0,0",rt].join(",")," L ").concat(ft," A ").concat([e,e,"0,0,0",z].join(","))};if(!i||i.length<1)return"";if(i.length===1)return t(i);if(i.length===2)return r(i);for(var n=new Array(i.length),a=0;a<n.length;++a){var o=a===0?i[i.length-1]:i[a-1],s=i[a],u=oa.scale([0,0],np(o,s),e);n[a]=[oa.add([0,0],o,u),oa.add([0,0],s,u)]}var f="A ".concat([e,e,"0,0,0,"].join(","));return n=n.map(function(c,d){var A="";return d===0&&(A="M ".concat(n[n.length-1][1]," ")),A+="".concat(f+c[0]," L ").concat(c[1]),A}),n.join(" ")}function ip(i,e){var t=i.length,r=function(c){var d=[c[0][0],c[0][1]-e],A=[c[0][0],c[0][1]+e];return"M ".concat(d," A ").concat([e,e,"0,0,0",A].join(",")," A ").concat([e,e,"0,0,0",d].join(","))},n=function(c){var d=ap(c[0],c[1]),A=rp(d,e),D=oa.add([0,0],c[0],oa.scale([0,0],A,-1)),z=oa.add([0,0],c[1],A),Z=1.2*e,rt=rp(oa.normalize([0,0],d),Z),ft=oa.scale([0,0],rt,-1),ct=oa.add([0,0],D,ft),gt=oa.add([0,0],z,ft),Ct=oa.add([0,0],D,rt);return"M ".concat(D," C ").concat([ct,gt,z].join(",")," S ").concat([Ct,D].join(",")," Z")};if(!i||t<1)return"";if(t===1)return r(i);if(t===2)return n(i);for(var a=i.map(function(f,c){var d=i[(c+1)%t];return{p:f,v:oa.normalize([0,0],ap(f,d))}}),o=0;o<a.length;++o){var s=o>0?o-1:t-1,u=oa.normalize([0,0],oa.add([0,0],a[s].v,oa.scale([0,0],a[o].v,-1)));a[o].p=oa.add([0,0],a[o].p,oa.scale([0,0],u,e))}return a.map(function(f){var c=f.p;return{x:c[0],y:c[1]}})}var Sm=function(e,t){for(var r=[],n=0;n<5;n++){var a=Math.cos((18+72*n)/180*Math.PI)*e,o=Math.sin((18+72*n)/180*Math.PI)*e,s=Math.cos((54+72*n)/180*Math.PI)*t,u=Math.sin((54+72*n)/180*Math.PI)*t;n===0?r.push(["M",a,-o]):r.push(["L",a,-o]),r.push(["L",s,-u])}return r.push(["Z"]),r},op=function(e,t,r){return(e.y-r.y)*(t.x-r.x)-(e.x-r.x)*(t.y-r.y)},sp=function(e){var t=e.map(function(d){return{x:d.getModel().x,y:d.getModel().y}});t.sort(function(d,A){return d.x===A.x?d.y-A.y:d.x-A.x});for(var r={},n=t.length-1;n>=0;n--){var a=t[n],o=a.x,s=a.y;r["".concat(o,"-").concat(s)]&&t.splice(n,1),r["".concat(o,"-").concat(s)]=!0}if(t.length===1)return t;for(var u=[],n=0;n<t.length;n++){for(;u.length>=2&&op(u[u.length-2],u[u.length-1],t[n])<=0;)u.pop();u.push(t[n])}for(var f=[],n=t.length-1;n>=0;n--){for(;f.length>=2&&op(f[f.length-2],f[f.length-1],t[n])<=0;)f.pop();f.push(t[n])}f.pop(),u.pop();var c=u.concat(f);return c},Mm={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function _m(i,e,t){var r=!1,n=function(u,f){return e.cells[u+f*e.width]},a=function(u,f){var c=0;return n(u-1,f-1)>=t&&(c+=1),n(u,f-1)>t&&(c+=2),n(u-1,f)>t&&(c+=4),n(u,f)>t&&(c+=8),c},o=function(u,f){for(var c=u,d=f,A,D,z=0;z<e.width*e.height;z++){if(A=c,D=d,i.findIndex(function(rt){return rt.x===c&&rt.y===d})>-1){if(!(i[0].x!==c||i[0].y!==d))return!0}else i.push({x:c,y:d});var Z=a(c,d);switch(Z){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:c++;break;case 12:case 14:case 4:c--;break;case 6:A===0&&(D===-1?c-=1:c+=1);break;case 1:case 13:case 5:d--;break;case 9:A===1&&(D===0?d-=1:d+=1);break;case 10:case 8:case 11:d++;break;default:return console.warn("Marching squares invalid state: ".concat(Z)),!0}}};this.march=function(){for(var s=0;s<e.width&&!r;s+=1)for(var u=0;u<e.height&&!r;u+=1)n(s,u)>t&&a(s,u)!==15&&(r=o(s,u));return r}}var Cm=function(e,t,r){var n=Math.ceil(e/r),a=Math.ceil(t/r),o=new Float32Array(Math.max(0,n*a)).fill(0);return{cells:o,width:n,height:a}},Tm=function(e,t,r){var n=null,a=Number.POSITIVE_INFINITY;return t.forEach(function(o){var s={x:e.getModel().x,y:e.getModel().y},u={x:o.getModel().x,y:o.getModel().y},f=po(s,u),c=new Da(s.x,s.y,u.x,u.y),d=r.reduce(function(A,D){return uo(D,c)>0?A+1:A},0);f*Math.pow(d+1,2)<a&&(n=o,a=f*Math.pow(d+1,2))}),n},up=function(e,t){var r=Number.POSITIVE_INFINITY,n=null;return e.forEach(function(a){var o=uo(a,t);o>=0&&o<r&&(n=a,r=o)}),n},Am=function(e,t,r,n){var a=[],o=[];o.push(e);for(var s=!0,u=0,f=function(D,z){var Z=!1;return z.forEach(function(rt){Z||(rs(D,{x:rt.x1,y:rt.y1})||rs(D,{x:rt.x2,y:rt.y2}))&&(Z=!0)}),Z},c=function(D,z){for(var Z=0,rt=z;Z<rt.length;Z++){var ft=rt[Z],ct=ft.getBBox(),gt=[[ct.x,ct.y],[ct.x+ct.width,ct.y],[ct.x,ct.y+ct.height],[ct.x+ct.width,ct.y+ct.height]];if(Ii(gt,D.x,D.y))return!0}return!1};s&&u<r;){s=!1;for(var d=function(){var D=o.pop(),z=up(t,D);if(z){var Z=ki(z,D),rt=Z[0],ft=Z[1];if(ft===2){var ct=function(Ct){for(var Ht=n,ne=fp(z,Ht,rt,Ct),re=f(ne,o)||f(ne,a),Me=c(ne,t);!re&&Me&&Ht>=1;)Ht/=1.5,ne=fp(z,Ht,rt,Ct),re=f(ne,o)||f(ne,a),Me=c(ne,t);ne&&!re&&(!Ct||!Me)&&(o.push(new Da(D.x1,D.y1,ne.x,ne.y)),o.push(new Da(ne.x,ne.y,D.x2,D.y2)),s=!0)};ct(!0),s||ct(!1)}}s||a.push(D),u+=1};!s&&o.length;)d()}for(;o.length;)a.push(o.pop());return a};function Om(i,e,t,r,n){var a=Tm(i,t,e);if(a===null)return[];var o=function(d){for(var A=[];d.length>0;){var D=d.pop();if(d.length===0){A.push(D);break}var z=d.pop(),Z=new Da(D.x1,D.y1,z.x2,z.y2),rt=up(e,Z);rt?(A.push(D),d.push(z)):d.push(Z)}return A},s=new Da(i.getModel().x,i.getModel().y,a.getModel().x,a.getModel().y),u=Am(s,e,r,n),f=o(u);return f}var Im=function(e,t,r){var n=Object.assign(Mm,r),a=qi(e.map(function(ct){return{x:ct.getModel().x,y:ct.getModel().y}}));e=e.sort(function(ct,gt){return po({x:ct.getModel().x,y:ct.getModel().y},a)-po({x:gt.getModel().x,y:gt.getModel().y},a)});var o=[],s=[];e.forEach(function(ct){var gt=Om(ct,t,o,n.maxRoutingIterations,n.morphBuffer);gt.forEach(function(Ct){s.push(Ct)}),o.push(ct)});for(var u=Dm(e,s,n.nodeR0),f=Cm(u.width,u.height,n.pixelGroupSize),c=[],d=[],A=0;A<n.maxMarchingIterations;A++)if(Pm(e,t,s,u,f,n),c=[],d=[],!!new _m(c,f,n.threshold).march()){var D=c.map(function(ct){return{x:Math.round(ct.x*n.pixelGroupSize+u.minX),y:Math.round(ct.y*n.pixelGroupSize+u.minY)}});if(D){var z=D.length;if(n.skip>1)for(z=Math.floor(D.length/n.skip);z<3&&n.skip>1;)n.skip-=1,z=Math.floor(D.length/n.skip);for(var Z=0,rt=0;rt<z;rt+=1,Z+=n.skip)d.push({x:D[Z].x,y:D[Z].y})}var ft=function(){for(var gt=0,Ct=e;gt<Ct.length;gt++){var Ht=Ct[gt],ne=d.map(function(re){return[re.x,re.y]});if(!Ii(ne,Ht.getBBox().centerX,Ht.getBBox().centerY))return!1}return!0};if(d&&ft())return d;if(n.threshold*=.9,A<=n.maxMarchingIterations*.5)n.memberInfluenceFactor*=1.2,n.edgeInfluenceFactor*=1.2;else if(n.nonMemberInfluenceFactor!==0&&t.length>0)n.nonMemberInfluenceFactor*=.8;else break}return d};function Dm(i,e,t){var r={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},n=[];i.forEach(function(u){n.push(u.getBBox())}),e.forEach(function(u){n.push(u.getBBox())});for(var a=0,o=n;a<o.length;a++){var s=o[a];r.minX=(s.minX<r.minX?s.minX:r.minX)-t,r.minY=(s.minY<r.minY?s.minY:r.minY)-t,r.maxX=(s.maxX>r.maxX?s.maxX:r.maxX)+t,r.maxY=(s.maxY>r.maxY?s.maxY:r.maxY)+t}return r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.x=r.minX,r.y=r.minY,r}function Pm(i,e,t,r,n,a){function o(D,z){var Z=Math.floor((D-z)/a.pixelGroupSize);return Z<0?0:Z}function s(D,z){return D*a.pixelGroupSize+z}var u=(a.nodeR0-a.nodeR1)*(a.nodeR0-a.nodeR1),f=(a.edgeR0-a.edgeR1)*(a.edgeR0-a.edgeR1),c=function(z,Z){var rt=Math.min(o(z.minX,Z+r.minX),n.width),ft=Math.min(o(z.minY,Z+r.minY),n.height),ct=Math.min(o(z.maxX,-Z+r.minX),n.width),gt=Math.min(o(z.maxY,-Z+r.minY),n.height);return[rt,ft,ct,gt]},d=function(z,Z){for(var rt=z.getBBox(),ft=c(rt,a.nodeR1),ct=ft[0],gt=ft[1],Ct=ft[2],Ht=ft[3],ne=gt;ne<Ht;ne+=1)for(var re=ct;re<Ct;re+=1)if(!(Z<0&&n[re+ne*n.width]<=0)){var Me=s(re,r.minX),je=s(ne,r.minY),Re=no({x:Me,y:je},{x:rt.minX,y:rt.minY,width:rt.width,height:rt.height});if(Re<Math.pow(a.nodeR1,2)){var ir=Math.sqrt(Re)-a.nodeR1;n.cells[re+ne*n.width]+=Z*ir*ir}}},A=function(z,Z){for(var rt=z.getBBox(),ft=c(rt,a.edgeR1),ct=ft[0],gt=ft[1],Ct=ft[2],Ht=ft[3],ne=gt;ne<Ht;ne+=1)for(var re=ct;re<Ct;re+=1)if(!(Z<0&&n.cells[re+ne*n.width]<=0)){var Me=s(re,r.minX),je=s(ne,r.minY),Re=es({x:Me,y:je},z);if(Re<Math.pow(a.edgeR1,2)){var ir=Math.sqrt(Re)-a.edgeR1;n.cells[re+ne*n.width]+=Z*ir*ir}}};a.nodeInfluenceFactor&&i.forEach(function(D){d(D,a.nodeInfluenceFactor/u)}),a.edgeInfluenceFactor&&t.forEach(function(D){A(D,a.edgeInfluenceFactor/f)}),a.negativeNodeInfluenceFactor&&e.forEach(function(D){d(D,a.negativeNodeInfluenceFactor/u)})}function fp(i,e,t,r){var n=i.getBBox(),a=t[0],o=t[1],s=t[2],u=t[3],f={topLeft:{x:n.minX-e,y:n.minY-e},topRight:{x:n.maxX+e,y:n.minY-e},bottomLeft:{x:n.minX-e,y:n.maxY+e},bottomRight:{x:n.maxX+e,y:n.maxY+e}},c=n.height*n.width;function d(z,Z){return n.width*((z.y-n.minY+(Z.y-n.minY))*.5)}if(o){if(a)return r?f.topLeft:f.bottomRight;if(s)return r?f.bottomLeft:f.topRight;var A=d(o,u);return A<c*.5?o.y>u.y?r?f.topLeft:f.bottomRight:r?f.topRight:f.bottomLeft:o.y<u.y?r?f.bottomLeft:f.topRight:r?f.bottomRight:f.topLeft}if(u){if(a)return r?f.topRight:f.bottomLeft;if(s)return r?f.bottomRight:f.topLeft}var D=d(a,s);return D<c*.5?a.x>s.x?r?f.topLeft:f.bottomRight:r?f.bottomLeft:f.topRight:a.x<s.x?r?f.topRight:f.bottomLeft:r?f.bottomRight:f.topLeft}var Lm=function(){function i(e,t){this.cfg=(0,l.deepMix)(this.getDefaultCfg(),t),this.graph=e,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(r){return(0,l.isString)(r)?e.findById(r):r}),this.nonMembers=this.cfg.nonMembers.map(function(r){return(0,l.isString)(r)?e.findById(r):r}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return i.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},i.prototype.setPadding=function(){var e=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+e:10+e,this.cfg.bubbleCfg={nodeR0:this.padding-e,nodeR1:this.padding-e,morphBuffer:this.padding-e}},i.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},i.prototype.calcPath=function(e,t){var r,n,a;switch(this.type){case"round-convex":r=sp(e),a=Uh(r.map(function(o){return[o.x,o.y]}),this.padding),n=Ir(a);break;case"smooth-convex":r=sp(e),r.length===2?(a=Uh(r.map(function(o){return[o.x,o.y]}),this.padding),n=Ir(a)):r.length>2&&(a=ip(r.map(function(o){return[o.x,o.y]}),this.padding),n=Gh(a));break;case"bubble":r=Im(e,t,this.cfg.bubbleCfg),n=r.length>=2&&Gh(r);break;default:}return n},i.prototype.render=function(){this.group.addShape("path",{attrs:(0,y.__assign)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id,capture:!1}),this.group.toBack()},i.prototype.addMember=function(e){if(e){(0,l.isString)(e)&&(e=this.graph.findById(e)),this.members.push(e);var t=this.nonMembers.indexOf(e);return t>-1&&this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},i.prototype.addNonMember=function(e){if(e){(0,l.isString)(e)&&(e=this.graph.findById(e)),this.nonMembers.push(e);var t=this.members.indexOf(e);return t>-1&&this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},i.prototype.removeMember=function(e){if(e){(0,l.isString)(e)&&(e=this.graph.findById(e));var t=this.members.indexOf(e);return t>-1?(this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},i.prototype.removeNonMember=function(e){if(e){(0,l.isString)(e)&&(e=this.graph.findById(e));var t=this.nonMembers.indexOf(e);return t>-1?(this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},i.prototype.updateData=function(e,t){var r=this;this.group.findById(this.id).remove(),e&&(this.members=e.map(function(n){return(0,l.isString)(n)?r.graph.findById(n):n})),t&&(this.nonMembers=t.map(function(n){return(0,l.isString)(n)?r.graph.findById(n):n})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},i.prototype.updateStyle=function(e){var t=this.group.findById(this.id);t.attr((0,y.__assign)({},e))},i.prototype.updateCfg=function(e){var t=this;this.cfg=(0,l.deepMix)(this.cfg,e),this.id=this.cfg.id,this.group=this.cfg.group,e.members&&(this.members=this.cfg.members.map(function(r){return(0,l.isString)(r)?t.graph.findById(r):r})),e.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(r){return(0,l.isString)(r)?t.graph.findById(r):r})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},i.prototype.contain=function(e){var t=this,r;(0,l.isString)(e)?r=this.graph.findById(e):r=e;var n,a=r.getKeyShape();if(r.get("type")==="path")n=zh(a.attr("path"));else{var o=a.getCanvasBBox();n=[[o.minX,o.minY],[o.maxX,o.minY],[o.maxX,o.maxY],[o.minX,o.maxY]]}return n=n.map(function(s){var u=t.graph.getPointByCanvas(s[0],s[1]);return[u.x,u.y]}),Va(n,zh(this.path))},i.prototype.destroy=function(){this.group.remove(),this.cfg=null},i}(),cp=Lm,Ed=dt,Nm="node",Rm=function(i){(0,y.__extends)(e,i);function e(t){var r=i.call(this)||this;return r.sortCombos=(0,l.debounce)(function(){var n=r.get("comboSorted");if(!(!r||r.destroyed||n)){r.set("comboSorted",!0);var a=[],o={},s=r.get("comboTrees");(s||[]).forEach(function(f){Qi(f,function(c){return a[c.depth]?a[c.depth].push(c.id):a[c.depth]=[c.id],o[c.id]=c.depth,!0})});var u=r.getEdges().concat(r.get("vedges"));(u||[]).forEach(function(f){var c=f.getModel(),d=o[c.source]||0,A=o[c.target]||0,D=Math.max(d,A);a[D]?a[D].push(c.id):a[D]=[c.id]}),a.forEach(function(f){if(!(!f||!f.length))for(var c=f.length-1;c>=0;c--){var d=r.findById(f[c]);d&&d.toFront()}})}},500,!1),r.cfg=(0,l.deepMix)(r.getDefaultCfg(),t),r.init(),r.animating=!1,r.destroyed=!1,r.cfg.enabledStack&&(r.undoStack=new Ao(r.cfg.maxStep),r.redoStack=new Ao(r.cfg.maxStep)),r}return e.prototype.init=function(){this.initCanvas();var t=new im(this),r=new wu(this),n=new ym(this),a=new xm(this);this.set({viewController:t,modeController:r,itemController:n,stateController:a}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},e.prototype.initGroups=function(){var t=this.get("canvas");if(t){var r=t.get("el"),n=(r||{}).id,a=n===void 0?"g6":n,o=t.addGroup({id:"".concat(a,"-root"),className:Ut.rootContainerClassName});if(this.get("groupByTypes")){var s=o.addGroup({id:"".concat(a,"-edge"),className:Ut.edgeContainerClassName}),u=o.addGroup({id:"".concat(a,"-node"),className:Ut.nodeContainerClassName}),f=o.addGroup({id:"".concat(a,"-combo"),className:Ut.comboContainerClassName});f.toBack(),this.set({nodeGroup:u,edgeGroup:s,comboGroup:f})}var c=o.addGroup({id:"".concat(a,"-delegate"),className:Ut.delegateContainerClassName});this.set({delegateGroup:c}),this.set("group",o)}},e.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.02,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[],optimizeThreshold:1e3}},e.prototype.set=function(t,r){return(0,l.isPlainObject)(t)?this.cfg=(0,y.__assign)((0,y.__assign)({},this.cfg),t):this.cfg[t]=r,t==="enabledStack"&&r&&!this.undoStack&&!this.redoStack&&(this.undoStack=new Ao(this.cfg.maxStep),this.redoStack=new Ao(this.cfg.maxStep)),this},e.prototype.get=function(t){var r;return(r=this.cfg)===null||r===void 0?void 0:r[t]},e.prototype.getGroup=function(){return this.get("group")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.getMinZoom=function(){return this.get("minZoom")},e.prototype.setMinZoom=function(t){return this.set("minZoom",t)},e.prototype.getMaxZoom=function(){return this.get("maxZoom")},e.prototype.setMaxZoom=function(t){return this.set("maxZoom",t)},e.prototype.getWidth=function(){return this.get("width")},e.prototype.getHeight=function(){return this.get("height")},e.prototype.clearItemStates=function(t,r){(0,l.isString)(t)&&(t=this.findById(t));var n=this.get("itemController");r||(r=t.get("states")),n.clearItemStates(t,r);var a=this.get("stateController");a.updateStates(t,r,!1)},e.prototype.node=function(t){typeof t=="function"&&this.set("nodeMapper",t)},e.prototype.edge=function(t){typeof t=="function"&&this.set("edgeMapper",t)},e.prototype.combo=function(t){typeof t=="function"&&this.set("comboMapper",t)},e.prototype.findById=function(t){return this.get("itemMap")[t]},e.prototype.find=function(t,r){var n,a=this.get("".concat(t,"s"));return(0,l.each)(a,function(o,s){if(r(o,s))return n=o,n}),n},e.prototype.findAll=function(t,r){var n=[];return(0,l.each)(this.get("".concat(t,"s")),function(a,o){r(a,o)&&n.push(a)}),n},e.prototype.findAllByState=function(t,r,n){return n?this.findAll(t,function(a){return a.hasState(r)&&n(a)}):this.findAll(t,function(a){return a.hasState(r)})},e.prototype.translate=function(t,r,n,a){var o=this,s=this.get("group"),u=(0,l.clone)(s.getMatrix());if(u||(u=[1,0,0,0,1,0,0,0,1]),n){var f=Ds({animateCfg:a,callback:function(){return o.emit("viewportchange",{action:"translate",matrix:s.getMatrix()})}});Sa(s,{x:s.getCanvasBBox().x+t,y:s.getCanvasBBox().y+r},n,f||{duration:500,easing:"easeCubic"})}else u=Ed(u,[["t",t,r]]),s.setMatrix(u),this.emit("viewportchange",{action:"translate",matrix:u}),this.autoPaint()},e.prototype.moveTo=function(t,r,n,a){var o=this.get("group");Sa(o,{x:t,y:r},n,a||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:o.getMatrix()})},e.prototype.fitView=function(t,r,n,a){t&&this.set("fitViewPadding",t);var o=this.get("viewController");r?o.fitViewByRules(r,n,a):o.fitView(n,a),this.autoPaint()},e.prototype.fitCenter=function(t,r){var n=this.get("viewController");n.fitCenter(t,r),this.autoPaint()},e.prototype.addBehaviors=function(t,r){var n=this.get("modeController");return n.manipulateBehaviors(t,r,!0),this},e.prototype.removeBehaviors=function(t,r){var n=this.get("modeController");return n.manipulateBehaviors(t,r,!1),this},e.prototype.updateBehavior=function(t,r,n){var a=this.get("modeController");return a.updateBehavior(t,r,n),this},e.prototype.zoom=function(t,r,n,a){var o=this,s=this.get("group"),u=(0,l.clone)(s.getMatrix())||[1,0,0,0,1,0,0,0,1],f=this.get("minZoom"),c=this.get("maxZoom"),d=this.getZoom()||1,A=d*t,D=t,z=!1;if(f&&A<f?(D=f/d,z=!0):c&&A>c&&(D=c/d,z=!0),r?u=Ed(u,[["t",-r.x,-r.y],["s",D,D],["t",r.x,r.y]]):u=Ed(u,[["s",D,D]]),n){var Z=(0,l.clone)(s.getMatrix());Z||(Z=[1,0,0,0,1,0,0,0,1]);var rt=Z[0],ft=rt*D,ct=Ds({animateCfg:a,callback:function(){return o.emit("viewportchange",{action:"zoom",matrix:s.getMatrix()})}});s.animate(function(gt){if(gt===1)Z=u;else{var Ct=zi(rt,ft,gt)/Z[0];r?Z=Ed(Z,[["t",-r.x,-r.y],["s",Ct,Ct],["t",r.x,r.y]]):Z=Ed(Z,[["s",Ct,Ct]])}return{matrix:Z}},ct)}else s.setMatrix(u),this.emit("viewportchange",{action:"zoom",matrix:u}),this.autoPaint();return!z},e.prototype.zoomTo=function(t,r,n,a){var o=t/this.getZoom();return this.zoom(o,r,n,a)},e.prototype.focusItem=function(t,r,n){var a=this.get("viewController"),o=!1;r?o=!0:r===void 0&&(o=this.get("animate"));var s={};n?s=n:n===void 0&&(s=this.get("animateCfg")),a.focus(t,o,s),this.autoPaint()},e.prototype.focusItems=function(t,r,n,a){var o=this.get("viewController");o.focusItems(t,r,n,a)},e.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},e.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},e.prototype.getPointByClient=function(t,r){var n=this.get("viewController");return n.getPointByClient(t,r)},e.prototype.getClientByPoint=function(t,r){var n=this.get("viewController");return n.getClientByPoint(t,r)},e.prototype.getPointByCanvas=function(t,r){var n=this.get("viewController");return n.getPointByCanvas(t,r)},e.prototype.getCanvasByPoint=function(t,r){var n=this.get("viewController");return n.getCanvasByPoint(t,r)},e.prototype.getGraphCenterPoint=function(){var t=this.get("group").getCanvasBBox();return{x:(t.minX+t.maxX)/2,y:(t.minY+t.maxY)/2}},e.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},e.prototype.showItem=function(t,r){r===void 0&&(r=!0);var n=this.get("itemController"),a=n.changeItemVisibility(t,!0);if(r&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),u={},f={};switch(s){case"node":u.nodes=[{id:o,visible:!1}],f.nodes=[{id:o,visible:!0}];break;case"edge":u.nodes=[{id:o,visible:!1}],f.edges=[{id:o,visible:!0}];break;case"combo":u.nodes=[{id:o,visible:!1}],f.combos=[{id:o,visible:!0}];break;default:break}this.pushStack("visible",{before:u,after:f})}},e.prototype.hideItem=function(t,r){r===void 0&&(r=!0);var n=this.get("itemController"),a=n.changeItemVisibility(t,!1);if(r&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),u={},f={};switch(s){case"node":u.nodes=[{id:o,visible:!0}],f.nodes=[{id:o,visible:!1}];break;case"edge":u.nodes=[{id:o,visible:!0}],f.edges=[{id:o,visible:!1}];break;case"combo":u.nodes=[{id:o,visible:!0}],f.combos=[{id:o,visible:!1}];break;default:break}this.pushStack("visible",{before:u,after:f})}},e.prototype.refreshItem=function(t){var r=this.get("itemController");r.refreshItem(t)},e.prototype.setAutoPaint=function(t){var r=this;r.set("autoPaint",t);var n=r.get("canvas");n.set("autoDraw",t)},e.prototype.remove=function(t,r){r===void 0&&(r=!0),this.removeItem(t,r)},e.prototype.removeItem=function(t,r){r===void 0&&(r=!0);var n=t;if((0,l.isString)(t)&&(n=this.findById(t)),!n&&(0,l.isString)(t))console.warn("The item ".concat(t," to be removed does not exist!"));else if(n){var a="";if(n.getType&&(a=n.getType()),r&&this.get("enabledStack")){var o=(0,y.__assign)((0,y.__assign)({},n.getModel()),{itemType:a}),s={};switch(a){case"node":{s.nodes=[o],s.edges=[];for(var u=n.getEdges(),f=u.length-1;f>=0;f--)s.edges.push((0,y.__assign)((0,y.__assign)({},u[f].getModel()),{itemType:"edge"}));break}case"edge":s.edges=[o];break;case"combo":s.combos=[o];break;default:break}this.pushStack("delete",{before:s,after:{}})}if(a==="node"){var c=n.getModel();c.comboId&&this.updateComboTree(n,void 0,!1)}var d=this.get("itemController");if(d.removeItem(n),a==="combo"){var A=Ks(this.get("comboTrees"));this.set("comboTrees",A)}}},e.prototype.innerAddItem=function(t,r,n){if(!is(t,r))return!1;if(r.id&&this.findById(r.id)){console.warn("This item exists already. Be sure the id %c".concat(r.id,"%c is unique."),"font-size: 20px; color: red;","");return}var a,o=this.get("comboTrees")||[];if(t==="combo"){var s=this.get("itemMap"),u=!1;if(o.forEach(function(z){u||Io(z,function(Z){if(r.parentId===Z.id){u=!0;var rt=(0,y.__assign)({id:r.id,depth:Z.depth+2},r);Z.children?Z.children.push(rt):Z.children=[rt],r.depth=rt.depth,a=n.addItem(t,r)}var ft=s[Z.id];return u&&ft&&ft.getType&&ft.getType()==="combo"&&n.updateCombo(ft,Z.children),!0})}),!u){var f=(0,y.__assign)({id:r.id,depth:0},r);r.depth=f.depth,o.push(f),a=n.addItem(t,r)}this.set("comboTrees",o),r.collapsed&&(this.collapseCombo(a,!1),this.updateCombo(a))}else if(t==="node"&&(0,l.isString)(r.comboId)&&o){var c=this.findById(r.comboId);c&&c.getType&&c.getType()!=="combo"&&console.warn("'".concat(r.comboId,"' is not a id of a combo in the graph, the node will be added without combo.")),a=n.addItem(t,r);var d=this.get("itemMap"),A=!1,D=!1;o.forEach(function(z){D||A||Io(z,function(Z){if(Z.id===r.id)return D=!0,!1;if(r.comboId===Z.id&&!D){A=!0;var rt=(0,l.clone)(r);rt.itemType="node",Z.children?Z.children.push(rt):Z.children=[rt],rt.depth=Z.depth+1}return A&&d[Z.id].getType&&d[Z.id].getType()==="combo"&&n.updateCombo(d[Z.id],Z.children),!0})})}else a=n.addItem(t,r);if(t==="node"&&r.comboId||t==="combo"&&r.parentId){var c=this.findById(r.comboId||r.parentId);c&&c.getType&&c.getType()==="combo"&&c.addChild(a)}return a},e.prototype.addItem=function(t,r,n,a){n===void 0&&(n=!0),a===void 0&&(a=!0);var o=this.get("comboSorted");this.set("comboSorted",o&&!a);var s=this.get("itemController"),u=this.innerAddItem(t,r,s);if(u===!1||u===!0)return u;var f=this.get("combos");if(f&&f.length>0&&this.sortCombos(),this.autoPaint(),n&&this.get("enabledStack")){var c=(0,y.__assign)((0,y.__assign)({},u.getModel()),{itemType:t}),d={};switch(t){case"node":d.nodes=[c];break;case"edge":d.edges=[c];break;case"combo":d.combos=[c];break;default:break}this.pushStack("add",{before:{},after:d})}return u},e.prototype.addItems=function(t,r,n){t===void 0&&(t=[]),r===void 0&&(r=!0),n===void 0&&(n=!0);var a=this.get("comboSorted");this.set("comboSorted",a&&!n);for(var o=this.get("itemController"),s=[],u=0;u<t.length;u++){var f=t[u];f.type!=="edge"&&f.type!=="vedge"?s.push(this.innerAddItem(f.type,f.model,o)):s.push(void 0)}for(var u=0;u<t.length;u++){var f=t[u];(f.type==="edge"||f.type==="vedge")&&(s[u]=this.innerAddItem(f.type,f.model,o))}if(n){var c=this.get("combos");c&&c.length>0&&this.sortCombos()}if(this.autoPaint(),r&&this.get("enabledStack")){for(var d={nodes:[],edges:[],combos:[]},u=0;u<t.length;u++){var A=t[u].type,D=s[u];if(D&&D!==!0){var z=(0,y.__assign)((0,y.__assign)({},D.getModel()),{itemType:A});switch(A){case"node":d.nodes.push(z);break;case"edge":d.edges.push(z);break;case"combo":d.combos.push(z);break;default:break}}}this.pushStack("addItems",{before:{},after:d})}return s},e.prototype.add=function(t,r,n,a){return n===void 0&&(n=!0),a===void 0&&(a=!0),this.addItem(t,r,n,a)},e.prototype.updateItem=function(t,r,n){var a=this;n===void 0&&(n=!0);var o=this.get("itemController"),s;(0,l.isString)(t)?s=this.findById(t):s=t;var u=n&&this.get("enabledStack"),f;u&&(f=(0,l.clone)(s.getModel()));var c="";s.getType&&(c=s.getType());var d=(0,y.__spreadArray)([],s.getStates(),!0);if(c==="combo"&&(0,l.each)(d,function(Z){return a.setItemState(s,Z,!1)}),o.updateItem(s,r),c==="combo"&&(0,l.each)(d,function(Z){return a.setItemState(s,Z,!0)}),u){var A={nodes:[],edges:[],combos:[]},D={nodes:[],edges:[],combos:[]},z=(0,y.__assign)({id:f.id},r);switch(c){case"node":A.nodes.push(f),D.nodes.push(z);break;case"edge":A.edges.push(f),D.edges.push(z);break;case"combo":A.combos.push(f),D.combos.push(z);break;default:break}this.pushStack("update",{before:A,after:D})}},e.prototype.update=function(t,r,n){n===void 0&&(n=!0),this.updateItem(t,r,n)},e.prototype.setItemState=function(t,r,n){(0,l.isString)(t)&&(t=this.findById(t));var a=this.get("itemController");a.setItemState(t,r,n);var o=this.get("stateController");o.updateState(t,r,n)},e.prototype.priorityState=function(t,r){var n=this.get("itemController");n.priorityState(t,r)},e.prototype.data=function(t){Bs(t),this.set("data",t)},e.prototype.render=function(){var t=this;this.set("comboSorted",!1);var r=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!r)throw new Error("data must be defined first");var n=r.nodes,a=n===void 0?[]:n,o=r.edges,s=o===void 0?[]:o,u=r.combos,f=u===void 0?[]:u;if(this.clear(!0),this.emit("beforerender"),t.addItems(a.map(function(rt){return{type:"node",model:rt}}),!1,!1),(f==null?void 0:f.length)!==0){var c=js(f,a);this.set("comboTrees",c),t.addCombos(f)}t.addItems(s.map(function(rt){return{type:"edge",model:rt}}),!1,!1);var d=t.get("animate");(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",!1);var A=t.get("layoutController");if(A){if(A.layout(D),this.destroyed)return}else D();function D(){(t.get("comboTrees")||[]).forEach(function(rt){Io(rt,function(ft){var ct=t.findById(ft.id);return ct.getType()==="combo"&&ft.collapsed&&(t.collapseCombo(ft.id,!1),t.updateCombo(ct)),!0})}),t.get("fitView")?t.fitView():t.get("fitCenter")&&t.fitCenter(),t.autoPaint(),t.emit("afterrender"),(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",d),setTimeout(function(){var rt;(rt=t.getCombos())===null||rt===void 0||rt.forEach(function(ft){ft.set("animate",!0)})},0)}if(!this.get("groupByTypes"))if(f&&f.length!==0)this.sortCombos();else if(r.nodes&&r.edges&&r.nodes.length<r.edges.length){var z=this.getNodes();z.forEach(function(rt){rt.toFront()})}else{var Z=this.getEdges();Z.forEach(function(rt){rt.toBack()})}},e.prototype.read=function(t){this.data(t),this.render()},e.prototype.diffItems=function(t,r,n){var a=this,o,s=this.get("itemMap");(0,l.each)(n,function(u){if(o=s[u.id],o){if(a.get("animate")&&t===Nm){var f=o.getContainer().getMatrix();f||(f=[1,0,0,0,1,0,0,0,1]),o.set("originAttrs",{x:f[6],y:f[7]})}a.updateItem(o,u,!1)}else o=a.addItem(t,u,!1);o&&r["".concat(t,"s")].push(o)})},e.prototype.changeData=function(t,r){var n=this,a;r===void 0&&(r=!0);var o=this,s=t||o.get("data");if(!Bs(s))return this;this.emit("beforechangedata"),r&&this.get("enabledStack")&&this.pushStack("changedata",{before:o.save(),after:s}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(ct){return o.clearItemStates(ct)}),this.getEdges().map(function(ct){return o.clearItemStates(ct)});var u=this.get("canvas"),f=u.get("localRefresh");u.set("localRefresh",!1),o.get("data")||(o.data(s),o.render());var c=this.get("itemMap"),d={nodes:[],edges:[]},A=s.combos;if(A){var D=js(A,s.nodes);this.set("comboTrees",D)}else this.set("comboTrees",[]);this.diffItems("node",d,s.nodes),(0,l.each)(c,function(ct,gt){c[gt].getModel().depth=0,!(ct.getType&&ct.getType()==="edge")&&(ct.getType&&ct.getType()==="combo"?(delete c[gt],ct.destroy()):d.nodes.indexOf(ct)<0&&(delete c[gt],o.remove(ct,!1)))});for(var z=this.getCombos(),Z=z.length,rt=Z-1;rt>=0;rt--)z[rt].destroyed&&z.splice(rt,1);A&&(o.addCombos(A),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",d,s.edges),(0,l.each)(c,function(ct,gt){ct.getType&&(ct.getType()==="node"||ct.getType()==="combo")||d.edges.indexOf(ct)<0&&(delete c[gt],o.remove(ct,!1))}),(this.get("comboTrees")||[]).forEach(function(ct){Io(ct,function(gt){var Ct=n.findById(gt.id);return Ct.getType()==="combo"&&gt.collapsed&&n.collapseCombo(gt.id,!1),!0})}),this.set({nodes:d.nodes,edges:d.edges});var ft=this.get("layoutController");return ft&&(ft.changeData(function(){setTimeout(function(){var ct;(ct=o.getCombos())===null||ct===void 0||ct.forEach(function(gt){gt.set("animate",!0)})},0)}),o.get("animate")&&!ft.getLayoutType()?(o.positionsAnimate(),(a=o.getCombos())===null||a===void 0||a.forEach(function(ct){return ct.set("animate",!0)})):o.autoPaint()),setTimeout(function(){u.set("localRefresh",f)},16),this.set("data",s),this.emit("afterchangedata"),this},e.prototype.addCombos=function(t){var r=this,n=r.get("comboTrees"),a=this.get("itemController");a.addCombos(n,t)},e.prototype.createCombo=function(t,r,n){var a=this;n===void 0&&(n=!0);var o=this.get("itemController");this.set("comboSorted",!1);var s="",u;if(t){if((0,l.isString)(t))s=t,u={id:t};else{if(s=t.id,!s){console.warn("Create combo failed. Please assign a unique string id for the adding combo.");return}u=t}var f=n&&this.get("enabledStack"),c={nodes:[],combos:[]};f&&r.forEach(function(ft){var ct=a.findById(ft),gt=ct.getType();if(!(gt!=="node"&&gt!=="combo")){var Ct=ct.getModel();c["".concat(gt,"s")].push({id:ft,parentId:gt==="node"?Ct.comboId:Ct.parentId})}});var d=this.get("comboTrees"),A=new Set(r),D=new Map;d&&(d.forEach(function(ft){Io(ft,function(ct,gt,Ct){if(A.has(ct.id)){if(gt){var Ht=a.findById(gt.id),ne=a.findById(ct.id);gt.children.splice(Ct,1),Ht.removeChild(ne),o.updateCombo(Ht,gt.children)}ct.itemType==="combo"&&D.set(ct.id,ct)}return!0})}),d=d.filter(function(ft){return!A.has(ft.id)}),this.set("comboTrees",d));var z={nodes:[],combos:[]},Z=r.map(function(ft){var ct=a.findById(ft),gt=ct.getModel(),Ct="";ct.getType&&(Ct=ct.getType());var Ht=D.get(ft)||{id:ct.getID(),itemType:Ct};return Ct==="combo"?(Ht.parentId=s,gt.parentId=s):Ct==="node"&&(Ht.comboId=s,gt.comboId=s),f&&z["".concat(Ct,"s")].push({id:gt.id,parentId:s}),Ht});u.children=Z,this.addItem("combo",u,!1),this.set("comboSorted",!1),d&&(d.forEach(function(ft){Qi(ft,function(ct){return ct.id===s?(ct.itemType="combo",ct.children=Z,!1):!0})}),this.sortCombos()),f&&(z.combos.push(u),this.pushStack("createCombo",{before:c,after:z}));var rt=this.findById(s);!rt.getModel().parentId&&rt.getChildren().combos.length&&this.updateComboTree(rt,void 0,!1),setTimeout(function(){rt.set("animate",!0)},0)}},e.prototype.uncombo=function(t,r){var n=this,a,o;r===void 0&&(r=!0);var s=this,u=t;if((0,l.isString)(t)&&(u=this.findById(t)),!u||u.getType&&u.getType()!=="combo"){console.warn("The item is not a combo!");return}var f=u.getModel(),c=u.getModel().parentId,d=s.get("comboTrees");d||(d=[]);var A=this.get("itemMap"),D=u.get("id"),z,Z=[],rt=this.get("combos"),ft=this.findById(c),ct=r&&this.get("enabledStack"),gt={};if(ct&&(gt=(0,l.clone)(f),gt.children=[]),d.forEach(function(re){z||Io(re,function(Me){var je;if(Me.id===D){z=Me;var Re=u.getEdges().map(function(pn){return pn.getID()});Re.forEach(function(pn){n.removeItem(pn,!1)});var ir=rt.indexOf(u);rt.splice(ir,1),delete A[D];var Sr=(0,l.clone)(u.getModel());u.destroy(),n.emit("afterremoveitem",{item:Sr,type:"combo"})}if(c&&z&&Me.id===c){ft.removeCombo(u),Z=Me.children;var ir=Z.indexOf(z);return ir!==-1&&Z.splice(ir,1),(je=z.children)===null||je===void 0||je.forEach(function(Gn){var Pn=n.findById(Gn.id),sn=Pn.getModel();Pn.getType&&Pn.getType()==="combo"?(Gn.parentId=c,delete Gn.comboId,sn.parentId=c,delete sn.comboId):Pn.getType&&Pn.getType()==="node"&&(Gn.comboId=c,sn.comboId=c),ft.addChild(Pn),Z.push(Gn)}),n.updateCombo(ft),!1}return!0})}),!c&&z){var Ct=d.indexOf(z);d.splice(Ct,1),(a=z.children)===null||a===void 0||a.forEach(function(re){re.parentId=void 0;var Me=n.findById(re.id).getModel();delete Me.parentId,delete Me.comboId,re.itemType!=="node"&&d.push(re)})}if(ct){var Ht={nodes:[],combos:[]},ne={nodes:[],combos:[]};(o=z.children)===null||o===void 0||o.forEach(function(re){var Me=n.findById(re.id),je=Me.getType();je!=="node"&&je!=="combo"||(Ht["".concat(je,"s")].push({id:re.id,parentId:D}),ne["".concat(je,"s")].push({id:re.id,parentId:c}))}),Ht.combos.push(gt),this.pushStack("uncombo",{before:Ht,after:ne})}},e.prototype.updateCombos=function(t){var r=this;t===void 0&&(t=!1);var n=this,a=this.get("comboTrees"),o=n.get("itemController"),s=n.get("itemMap");(a||[]).forEach(function(u){Io(u,function(f){var c;if(!f)return!0;var d=s[f.id];if(((c=d==null?void 0:d.getType)===null||c===void 0?void 0:c.call(d))==="combo"){var A=(0,y.__spreadArray)([],d.getStates(),!0);(0,l.each)(A,function(D){return r.setItemState(d,D,!1)}),o.updateCombo(d,f.children,t),(0,l.each)(A,function(D){return r.setItemState(d,D,!0)})}return!0})}),n.sortCombos()},e.prototype.updateCombo=function(t){var r=this,n=this,a=t,o;if((0,l.isString)(t)&&(a=this.findById(t)),!a||a.getType&&a.getType()!=="combo"){console.warn("The item to be updated is not a combo!");return}o=a.get("id");var s=this.get("comboTrees"),u=n.get("itemController"),f=n.get("itemMap");(s||[]).forEach(function(c){Io(c,function(d){if(!d)return!0;var A=f[d.id];if(o===d.id&&A&&A.getType&&A.getType()==="combo"){var D=(0,y.__spreadArray)([],A.getStates(),!0);(0,l.each)(D,function(z){A.getStateStyle(z)&&r.setItemState(A,z,!1)}),u.updateCombo(A,d.children),(0,l.each)(D,function(z){A.getStateStyle(z)&&r.setItemState(A,z,!0)}),o&&(o=d.parentId)}return!0})})},e.prototype.updateComboTree=function(t,r,n){n===void 0&&(n=!0);var a=this;this.set("comboSorted",!1);var o;(0,l.isString)(t)?o=a.findById(t):o=t;var s=o.getModel(),u=s.comboId||s.parentId,f="";if(o.getType&&(f=o.getType()),r&&f==="combo"){var c=this.get("comboTrees"),d=!0,A;if((c||[]).forEach(function(ct){A||Qi(ct,function(gt){if(!A)return gt.id===o.getID()&&(A=gt),!0})}),Qi(A,function(ct){return ct.id===r?(d=!1,!1):!0}),!d){console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!");return}}if(n&&this.get("enabledStack")){var D={},z={};f==="combo"?(D.combos=[{id:s.id,parentId:s.parentId}],z.combos=[{id:s.id,parentId:r}]):f==="node"&&(D.nodes=[{id:s.id,parentId:s.comboId}],z.nodes=[{id:s.id,parentId:r}]),this.pushStack("updateComboTree",{before:D,after:z})}if(s.parentId||s.comboId){var Z=this.findById(s.parentId||s.comboId);Z&&Z.removeChild(o)}if(f==="combo"?s.parentId=r:f==="node"&&(s.comboId=r),r){var rt=this.findById(r);rt&&rt.addChild(o)}if(u){var rt=this.findById(u);rt&&rt.removeChild(o)}var ft=Ks(this.get("comboTrees"),s.id,r);this.set("comboTrees",ft),this.updateCombos()},e.prototype.save=function(){var t=[],r=[],n=[];return(0,l.each)(this.get("nodes"),function(a){t.push(a.getModel())}),(0,l.each)(this.get("edges"),function(a){r.push(a.getModel())}),(0,l.each)(this.get("combos"),function(a){n.push(a.getModel())}),{nodes:t,edges:r,combos:n}},e.prototype.changeSize=function(t,r){var n=this.get("viewController");return n.changeSize(t,r),this},e.prototype.refresh=function(){var t=this;if(t.emit("beforegraphrefresh"),t.get("animate"))t.positionsAnimate();else{var r=t.get("nodes"),n=t.get("edges"),a=t.get("edges");(0,l.each)(r,function(o){o.refresh()}),(0,l.each)(n,function(o){o.refresh()}),(0,l.each)(a,function(o){o.refresh()})}t.emit("aftergraphrefresh"),t.autoPaint()},e.prototype.getNodes=function(){return this.get("nodes")},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getCombos=function(){return this.get("combos")},e.prototype.getComboChildren=function(t){if((0,l.isString)(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo does not exist!");return}return t.getChildren()},e.prototype.positionsAnimate=function(t){var r=this;r.emit("beforeanimate");var n=r.get("animateCfg"),a=n.onFrame,o=t?r.getNodes().concat(r.getCombos()):r.getNodes(),s=o.map(function(f){var c=f.getModel();return{id:c.id,x:c.x,y:c.y}});r.stopAnimate();var u=r.get("canvas");r.animating=!0,setTimeout(function(){u.animate(function(f){(0,l.each)(s,function(c){var d=r.findById(c.id);if(!(!d||d.destroyed)){var A=d.get("originAttrs"),D=d.get("model"),z=d.getContainer().getMatrix();if(A==null&&(z&&(A={x:z[6],y:z[7]}),d.set("originAttrs",A||0)),a){var Z=a(d,f,c,A||{x:0,y:0});d.set("model",Object.assign(D,Z))}else A?(D.x=A.x+(c.x-A.x)*f,D.y=A.y+(c.y-A.y)*f):(D.x=c.x,D.y=c.y)}}),r.refreshPositions(t)},{duration:n.duration,easing:n.easing,callback:function(){(0,l.each)(o,function(c){c.set("originAttrs",null)}),n.callback&&n.callback(),r.emit("afteranimate"),r.animating=!1}})},0)},e.prototype.refreshPositions=function(t){var r=this;r.emit("beforegraphrefreshposition");var n=r.get("nodes"),a=r.get("edges"),o=r.get("vedges"),s=r.get("combos"),u,f={},c=function(A){(0,l.each)(A,function(D){u=D.getModel();var z=D.get("originAttrs");if(!(z&&u.x===z.x&&u.y===z.y)){var Z=D.updatePosition({x:u.x,y:u.y});f[u.id]=Z,u.comboId&&(f[u.comboId]=f[u.comboId]||Z),u.parentId&&(f[u.parentId]=f[u.parentId]||Z)}})};c(s),c(n),s&&s.length!==0&&(t&&c(s),r.updateCombos()),(0,l.each)(a,function(d){var A=d.getSource().getModel(),D=d.getTarget();if(!(0,l.isPlainObject)(D)){var z=D.getModel();(f[A.id]||f[z.id]||d.getModel().isComboEdge)&&d.refresh()}}),(0,l.each)(o,function(d){d.refresh()}),r.emit("aftergraphrefreshposition"),r.autoPaint()},e.prototype.stopAnimate=function(){var t=this.get("canvas"),r=t.cfg.timeline;r&&r.stopAllAnimations()},e.prototype.isAnimating=function(){return this.animating},e.prototype.getZoom=function(){var t=this.get("group").getMatrix();return t?t[0]:1},e.prototype.getCurrentMode=function(){var t=this.get("modeController");return t.getMode()},e.prototype.setMode=function(t){var r=this.get("modeController");return r.setMode(t),this},e.prototype.clear=function(t){var r;return t===void 0&&(t=!1),(r=this.get("canvas"))===null||r===void 0||r.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],vedges:[],groups:[],combos:[],comboTrees:[]}),t||this.emit("afterrender"),this},e.prototype.updateLayout=function(t,r,n,a){var o=this;t===void 0&&(t={}),a===void 0&&(a=!0);var s=this.get("layoutController");if((0,l.isString)(t)&&(t={type:t}),r){var u=n;u||(r==="begin"?u={x:0,y:0}:u={x:this.getWidth()/2,y:this.getHeight()/2}),u=this.getPointByCanvas(u.x,u.y);var f=["force","gForce","fruchterman","force2"];f.includes(t.type)||!t.type&&f.includes(s==null?void 0:s.layoutType)?t.center=[u.x,u.y]:this.once("afterlayout",function(A){var D=o.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];u.x=u.x*D[0]+D[6],u.y=u.y*D[0]+D[7];var z=o.getGroup().getCanvasBBox(),Z=z.minX,rt=z.maxX,ft=z.minY,ct=z.maxY,gt={x:(Z+rt)/2,y:(ft+ct)/2};r==="begin"&&(gt.x=Z,gt.y=ft),o.translate(u.x-gt.x,u.y-gt.y)})}var c=(0,y.__assign)({},this.get("layout")),d={};Object.assign(d,c,t),t.pipes&&!t.type?delete d.type:!t.pipes&&d.type&&delete d.pipes,this.set("layout",d),s&&(s.isLayoutTypeSame(d)&&d.gpuEnabled===c.gpuEnabled?s.updateLayoutCfg(d):s.changeLayout(d),a&&this.get("enabledStack")&&this.pushStack("layout",{before:c,after:d}))},e.prototype.destroyLayout=function(){var t=this.get("layoutController");t==null||t.destroyLayout()},e.prototype.layout=function(){var t,r=this.get("layoutController"),n=this.get("layout");if(!(!n||!r)){if(n.workerEnabled){r.layout();return}!((t=r.layoutMethods)===null||t===void 0)&&t.length?r.relayout(!0):r.layout()}},e.prototype.collapseCombo=function(t,r){var n=this;if(r===void 0&&(r=!0),!this.destroyed){if((0,l.isString)(t)&&(t=this.findById(t)),!t){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var a=t.getModel(),o=this.get("itemController");o.collapseCombo(t,r),a.collapsed=!0;var s=this.getEdges().concat(this.get("vedges")),u=[],f=this.get("comboTrees"),c=!1;(f||[]).forEach(function(A){c||Qi(A,function(D){if(c&&D.depth<=a.depth)return!1;if(a.id===D.id&&(c=!0),c){var z=n.findById(D.id);z&&z.getType&&z.getType()==="combo"&&(u=u.concat(z.getNodes()),u=u.concat(z.getCombos()))}return!0})});var d={};s.forEach(function(A){var D=A.getModel(),z=D.isVEdge,Z=D.size,rt=Z===void 0?1:Z;if(!(A.isVisible()&&!z)){var ft=A.getSource(),ct=A.getTarget(),gt=null,Ct;if(ft.getModel().id===a.id||u.includes(ft)&&!u.includes(ct)?(gt=ct,Ct=!1):(ct.getModel().id===a.id||!u.includes(ft)&&u.includes(ct))&&(gt=ft,Ct=!0),gt){if(z){n.removeItem(A,!1);return}for(var Ht=gt.getModel();!gt.isVisible();){var ne=Ht.parentId,re=Ht.comboId,Me=ne||re;if(gt=n.findById(Me),!gt||!Me)return;Ht=gt.getModel()}var je=Ht.id,Re=Ct?{source:je,target:a.id,size:rt,isVEdge:!0}:{source:a.id,target:je,size:rt,isVEdge:!0},ir="".concat(Re.source,"-").concat(Re.target);if(d[ir]){d[ir].size+=rt;return}d[ir]=Re}}}),this.addItems(Object.values(d).map(function(A){return{type:"vedge",model:A}}),!1),this.emit("aftercollapseexpandcombo",{action:"collapse",item:t})}},e.prototype.expandCombo=function(t,r){var n=this;if(r===void 0&&(r=!0),(0,l.isString)(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var a=t.getModel(),o=this.get("itemController");o.expandCombo(t,r),a.collapsed=!1;var s=this.getEdges().concat(this.get("vedges")),u=[],f=this.get("comboTrees"),c=!1;(f||[]).forEach(function(A){c||Qi(A,function(D){if(c&&D.depth<=a.depth)return!1;if(a.id===D.id&&(c=!0),c){var z=n.findById(D.id);z&&z.getType&&z.getType()==="combo"&&(u=u.concat(z.getNodes()),u=u.concat(z.getCombos()))}return!0})});var d={};s.forEach(function(A){if(!(A.isVisible()&&!A.getModel().isVEdge)){var D=A.getSource(),z=A.getTarget(),Z=D.get("id"),rt=z.get("id"),ft=null,ct;if(Z===a.id||u.includes(D)&&!u.includes(z)?(ft=z,ct=!1):rt===a.id||!u.includes(D)&&u.includes(z)?(ft=D,ct=!0):u.includes(D)&&u.includes(z)&&D.isVisible()&&z.isVisible()&&A.show(),ft){var gt=A.getModel(),Ct=gt.isVEdge,Ht=gt.size,ne=Ht===void 0?1:Ht;if(Ct){n.removeItem(A,!1);return}for(var re=ft.getModel();!ft.isVisible();){var Me=re.parentId,je=re.comboId,Re=Me||je;if(ft=n.findById(Re),!ft||!Re)return;re=ft.getModel()}for(var ir=re.id,Sr=ct?z:D,pn=Sr.getModel();!Sr.isVisible();){var Gn=pn.parentId,Pn=pn.comboId,sn=Gn||Pn;if(Sr=n.findById(sn),!Sr||!sn)return;if(pn.comboId===a.id||pn.parentId===a.id)break;pn=Sr.getModel()}var Jn=pn.id;if(ir){var Kn=ct?{source:ir,target:Jn,isVEdge:!0,size:ne}:{source:Jn,target:ir,isVEdge:!0,size:ne},un="".concat(Kn.source,"-").concat(Kn.target);if(d[un]){d[un].size+=ne;return}d[un]=Kn}}}}),this.addItems(Object.values(d).map(function(A){return{type:"vedge",model:A}}),!1),this.emit("aftercollapseexpandcombo",{action:"expand",item:t})},e.prototype.collapseExpandCombo=function(t,r){if(r===void 0&&(r=!0),(0,l.isString)(t)&&(t=this.findById(t)),!(!t||t.getType&&t.getType()!=="combo")){for(var n=t.getModel(),a=this.findById(n.parentId);a;){var o=a.getModel();if(o.collapsed){console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),a=void 0;return}a=this.findById(o.parentId)}var s=n.collapsed;s?this.expandCombo(t,r):this.collapseCombo(t,r),this.updateCombo(t)}},e.prototype.getNeighbors=function(t,r){var n=t;return(0,l.isString)(t)&&(n=this.findById(t)),n.getNeighbors(r)},e.prototype.getNodeDegree=function(t,r,n){r===void 0&&(r=void 0),n===void 0&&(n=!1);var a=t;(0,l.isString)(t)&&(a=this.findById(t));var o=this.get("degrees");(!o||n)&&(o=be(this.save()),this.set("degrees",o));var s=o[a.getID()],u=0;if(!s)return 0;switch(r){case"in":u=s.inDegree;break;case"out":u=s.outDegree;break;case"all":u=s;break;default:u=s.degree;break}return u},e.prototype.getUndoStack=function(){return this.undoStack},e.prototype.getRedoStack=function(){return this.redoStack},e.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},e.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear(),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack}))},e.prototype.pushStack=function(t,r,n){if(t===void 0&&(t="update"),n===void 0&&(n="undo"),!this.get("enabledStack")){console.warn("\u8BF7\u5148\u542F\u7528 undo & redo \u529F\u80FD\uFF0C\u5728\u5B9E\u4F8B\u5316 Graph \u65F6\u5019\u914D\u7F6E enabledStack: true !");return}var a=r?(0,l.clone)(r):{before:{},after:(0,l.clone)(this.save())};n==="redo"?this.redoStack.push({action:t,data:a}):this.undoStack.push({action:t,data:a}),this.emit("stackchange",{action:t,stackType:n,undoStack:this.undoStack,redoStack:this.redoStack})},e.prototype.getAdjMatrix=function(t,r){t===void 0&&(t=!0),r===void 0&&(r=this.get("directed"));var n=this.get("adjMatrix");return(!n||!t)&&(n=it(this.save(),r),this.set("adjMatrix",n)),n},e.prototype.getShortestPathMatrix=function(t,r){t===void 0&&(t=!0),r===void 0&&(r=this.get("directed"));var n=this.get("adjMatrix"),a=this.get("shortestPathMatrix");return(!n||!t)&&(n=it(this.save(),r),this.set("adjMatrix",n)),(!a||!t)&&(a=Te(this.save(),r),this.set("shortestPathMatrix",a)),a},e.prototype.on=function(t,r,n){return i.prototype.on.call(this,t,r,n)},e.prototype.destroy=function(){var t,r,n,a,o;this.clear(),this.clearStack(),(t=this.get("itemController"))===null||t===void 0||t.destroy(),(r=this.get("modeController"))===null||r===void 0||r.destroy(),(n=this.get("viewController"))===null||n===void 0||n.destroy(),(a=this.get("stateController"))===null||a===void 0||a.destroy(),(o=this.get("canvas"))===null||o===void 0||o.destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null},e.prototype.createHull=function(t){if(!t.members||t.members.length<1){console.warn("Create hull failed! The members is empty.");return}var r=this.get("hullGroup"),n=this.get("hullMap");if(n||(n={},this.set("hullMap",n)),(!r||r.get("destroyed"))&&(r=this.get("group").addGroup({id:"hullGroup"}),r.toBack(),this.set("hullGroup",r)),n[t.id])return console.warn("Existed hull id."),n[t.id];var a=r.addGroup({id:"".concat(t.id,"-container")}),o=new cp(this,(0,y.__assign)((0,y.__assign)({},t),{group:a})),s=o.id;return n[s]=o,o},e.prototype.getHulls=function(){return this.get("hullMap")},e.prototype.getHullById=function(t){return this.get("hullMap")[t]},e.prototype.removeHull=function(t){var r,n;(0,l.isString)(t)?n=this.getHullById(t):n=t,(r=this.get("hullMap"))===null||r===void 0||delete r[n.id],n.destroy()},e.prototype.removeHulls=function(){var t=this.getHulls();!t||!Object.keys(t).length||(Object.keys(t).forEach(function(r){var n=t[r];n.destroy()}),this.set("hullMap",{}))},e}(q),lp=Rm;function Wh(i){"@babel/helpers - typeof";return Wh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wh(i)}var ud=dt,dp="-shape",Yh="-label",Kd=["startArrow","endArrow"],hp={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},km={lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},$d={edge:km,node:hp,combo:hp},Xh="-label-bg",jh={options:{labelCfg:{style:{fontFamily:Ut.windowFontFamily}},descriptionCfg:{style:{fontFamily:Ut.windowFontFamily}}},itemType:"",type:"",getCustomConfig:function(e){return{}},getOptions:function(e,t){return t==="move"||t!=null&&t.includes("bbox")?e:(0,l.deepMix)({},this.options,this.getCustomConfig(e)||{},e)},draw:function(e,t){t.shapeMap={},this.mergeStyle=this.getOptions(e);var r=this.drawShape(e,t);if(r.set("className",this.itemType+dp),t.shapeMap[this.itemType+dp]=r,e.label){var n=this.drawLabel(e,t);n.set("className",this.itemType+Yh),t.shapeMap[this.itemType+Yh]=n}return r},afterDraw:function(e,t,r){},drawShape:function(e,t){return null},drawLabel:function(e,t){var r=(this.mergeStyle||this.getOptions(e)||{}).labelCfg,n=r||{},a=this.getLabelStyle(e,n,t),o=a.rotate;delete a.rotate;var s=t.addShape("text",{attrs:a,draggable:!0,className:"text-shape",name:"text-shape",labelRelated:!0});if(t.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""){var u=s.getBBox(),f=[1,0,0,0,1,0,0,0,1];if(a.rotateCenter)switch(a.rotateCenter){case"center":f=ud(f,[["t",-u.width/2,-u.height/2],["r",o],["t",u.width/2,u.height/2]]);break;case"lefttop":f=ud(f,[["t",-a.x,-a.y],["r",o],["t",a.x,a.y]]);break;case"leftcenter":f=ud(f,[["t",-a.x,-a.y-u.height/2],["r",o],["t",a.x,a.y+u.height/2]]);break;default:f=ud(f,[["t",-u.width/2,-u.height/2],["r",o],["t",u.width/2,u.height/2]]);break}else f=ud(f,[["t",-a.x,-a.y-u.height/2],["r",o],["t",a.x,a.y+u.height/2]]);s.setMatrix(f)}if(a.background){var c=this.drawLabelBg(e,t,s),d=this.itemType+Xh;c.set("classname",d),t.shapeMap[d]=c,s.toFront()}return s},drawLabelBg:function(e,t,r){var n=this.options.labelCfg,a=(0,l.mix)({},n,e.labelCfg),o=this.getLabelBgStyleByPosition(r,a),s=t.addShape("rect",{name:"text-bg-shape",attrs:o,labelRelated:!0});return t.shapeMap["text-bg-shape"]=s,s},getLabelStyleByPosition:function(e,t,r){return{text:e.label}},getLabelBgStyleByPosition:function(e,t){return{}},getLabelStyle:function(e,t,r){var n=this.getLabelStyleByPosition(e,t,r),a="".concat(this.itemType,"Label"),o=Ut[a]?Ut[a].style:null;return(0,y.__assign)((0,y.__assign)((0,y.__assign)({},o),n),t.style)},getShapeStyle:function(e){return e.style},update:function(e,t,r){this.updateShapeStyle(e,t,r),this.updateLabel(e,t,r)},updateShapeStyle:function(e,t,r){var n,a=t.getContainer(),o=t.getKeyShape(),s=(0,l.mix)({},o.attr(),e.style),u=function(d){var A,D=s[d];if((0,l.isPlainObject)(D)){var z=((n=a.shapeMap)===null||n===void 0?void 0:n[d])||a.find(function(Z){return Z.get("name")===d});z==null||z.attr(D)}else o.attr((A={},A[d]=D,A))};for(var f in s)u(f)},updateLabel:function(e,t,r){var n,a,o=t.getContainer(),s=(this.mergeStyle||this.getOptions({},r)||{}).labelCfg,u=s===void 0?{}:s,f=this.itemType+Yh,c=o.shapeMap[f]||o.find(function(Ct){return Ct.get("className")===f}),d=this.itemType+Xh,A=o.shapeMap[d]||o.find(function(Ct){return Ct.get("className")===d});if(c&&e.label===void 0&&(o.removeChild(c),delete o.shapeMap[f],A&&(o.removeChild(A),delete o.shapeMap[d])),e.label||e.label==="")if(c){(!r||r==="bbox|label"||this.itemType==="edge"&&r!=="style")&&(u=(0,l.deepMix)(u,e.labelCfg));var z=this.getLabelStyleByPosition(e,u,o),Z=(n=e.labelCfg)===null||n===void 0?void 0:n.style,rt=(0,y.__assign)((0,y.__assign)({},z),Z),ft=rt.rotate;if(delete rt.rotate,!isNaN(ft)&&ft!==""){var ct=[1,0,0,0,1,0,0,0,1];ct=ud(ct,[["t",-rt.x,-rt.y],["r",ft],["t",rt.x,rt.y]]),rt.matrix=ct,c.attr(rt)}else((a=c.getMatrix())===null||a===void 0?void 0:a[4])!==1&&c.resetMatrix(),c.attr(rt);if(!A)rt.background&&(A=this.drawLabelBg(e,o,c),A.set("classname",d),o.shapeMap[d]=A,c.toFront());else if(rt.background){var gt=this.getLabelBgStyleByPosition(c,u);A.attr(gt)}else o.removeChild(A)}else{var D=this.drawLabel(e,o);D.set("className",f),o.shapeMap[f]=D}},afterUpdate:function(e,t){},setState:function(e,t,r){var n,a,o,s=r.get("keyShape");if(!(!s||s.destroyed)){var u=r.getType(),f=(0,l.isBoolean)(t)?e:"".concat(e,":").concat(t),c=this.getStateStyle(f,r),d=r.getStateStyle(f);if(!(!d&&!c)){var A=(0,l.mix)({},d||c),D=r.getContainer(),z={x:1,y:1,cx:1,cy:1,matrix:1};if(u==="combo"&&(z.r=1,z.width=1,z.height=1),t){var Z=function(sn){var Jn,Kn=A[sn];if((0,l.isPlainObject)(Kn)&&!Kd.includes(sn)){var un=((o=D.shapeMap)===null||o===void 0?void 0:o[sn])||D.find(function(Dn){return Dn.get("name")===sn});un==null||un.attr(Kn)}else s.attr((Jn={},Jn[sn]=Kn,Jn))};for(var rt in A)Z(rt)}else{var ft=ds(r.getCurrentStatesStyle()),ct=r.getModel(),gt=(0,l.mix)({},ct.style,ds(r.getOriginStyle())),Ct=s.get("name"),Ht=s.attr(),ne={};Object.keys(Ht).forEach(function(Pn){if(Pn!=="img"){var sn=Ht[Pn];sn&&Wh(sn)==="object"?ne[Pn]=(0,l.clone)(sn):ne[Pn]=sn}});var re={},Me=function(sn){var Jn=A[sn];if((0,l.isPlainObject)(Jn)&&!Kd.includes(sn)){var Kn=D.shapeMap[sn]||D.find(function(Yn){return Yn.get("name")===sn});if(Kn){var un=ds(Kn.attr());(0,l.each)(Jn,function(Yn,Xn){if(sn===Ct&&ne[Xn]&&!z[Xn]){delete ne[Xn];var ia=gt[sn][Xn]||$d[u][Xn];s.attr(Xn,ia)}else if(un[Xn]||un[Xn]===0){delete un[Xn];var ha=gt[sn][Xn]||$d[u][Xn];Kn.attr(Xn,ha)}}),re[sn]=un}}else if(ne[sn]&&!z[sn]){delete ne[sn];var Dn=gt[sn]||(gt[Ct]?gt[Ct][sn]:void 0)||$d[u][sn];s.attr(sn,Dn)}};for(var je in A)Me(je);Ct?re[Ct]=ne:(0,l.mix)(re,ne);for(var rt in ft)if(!z[rt]){var Re=ft[rt];(!(0,l.isPlainObject)(Re)||Kd.includes(rt))&&(Ct?((0,l.mix)(gt[Ct],(a={},a[rt]=Re,a)),delete gt[rt]):(0,l.mix)(gt,(n={},n[rt]=Re,n)),delete ft[rt])}var ir={};(0,l.deepMix)(ir,gt,re,ft);var Sr=!1,pn=function(sn){var Jn,Kn,un=ir[sn];if((0,l.isPlainObject)(un)&&!Kd.includes(sn)){var Dn=D.shapeMap[sn]||D.find(function(Xn){return Xn.get("name")===sn});Dn&&((Dn.get("type")==="text"||Dn.get("labelRelated"))&&(delete un.x,delete un.y,delete un.matrix),sn===Ct&&(u==="combo"&&(delete un.r,delete un.width,delete un.height),Sr=!0),Dn.attr(un))}else if(!Sr){var Yn=un||$d[u][sn];u==="combo"?Ct||s.attr((Jn={},Jn[sn]=Yn,Jn)):s.attr((Kn={},Kn[sn]=Yn,Kn))}};for(var Gn in ir)pn(Gn)}}}},getStateStyle:function(e,t){var r=t.getModel(),n=t.getType(),a=this.getOptions(r),o=a.stateStyles,s=a.style,u=s===void 0?{}:s,f=r.stateStyles?r.stateStyles[e]:o&&o[e];return n==="combo"?(0,l.clone)(f):(0,l.mix)({},u,f)},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t,r,n=(e==null?void 0:e.anchorPoints)||((t=this.getCustomConfig(e))===null||t===void 0?void 0:t.anchorPoints)||((r=this.options)===null||r===void 0?void 0:r.anchorPoints);return n}},Bm={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:Ut.nodeLabel.offset,getSize:function(e){var t,r=((t=this.mergeStyle)===null||t===void 0?void 0:t.size)||e.size||this.getOptions({}).size||Ut.defaultNode.size;return(0,l.isArray)(r)&&r.length===1&&(r=[r[0],r[0]]),(0,l.isArray)(r)||(r=[r,r]),r},getLabelStyleByPosition:function(e,t){var r=t.maxLength,n=e.label;r&&(n=ls(n,r));var a=t.position||this.labelPosition;if(a==="center")return{x:0,y:0,text:n,textBaseline:"middle",textAlign:"center"};var o=t.offset;(0,l.isNil)(o)&&(o=this.offset);var s=this.getSize(e),u;switch(a){case"top":u={x:0,y:-s[1]/2-o,textBaseline:"bottom",textAlign:"center"};break;case"bottom":u={x:0,y:s[1]/2+o,textBaseline:"top",textAlign:"center"};break;case"left":u={x:-s[0]/2-o,y:0,textBaseline:"middle",textAlign:"right"};break;default:u={x:s[0]/2+o,y:0,textBaseline:"middle",textAlign:"left"};break}return u.text=n,u},getLabelBgStyleByPosition:function(e,t){var r;if(!e)return{};var n=(r=t.style)===null||r===void 0?void 0:r.background;if(!n)return{};var a=e.getBBox(),o=Dh(n.padding),s=a.width+o[1]+o[3],u=a.height+o[0]+o[2];return(0,y.__assign)((0,y.__assign)({x:a.minX-o[3],y:a.minY-o[0]},n),{width:s,height:u})},drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e),a=t.addShape(r,{attrs:n,draggable:!0,name:"node-shape"});return t.shapeMap["node-shape"]=a,a},updateLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=t.shapeMap["link-point-left"]||t.find(function(ir){return ir.get("className")==="link-point-left"}),a=t.shapeMap["link-point-right"]||t.find(function(ir){return ir.get("className")==="link-point-right"}),o=t.shapeMap["link-point-top"]||t.find(function(ir){return ir.get("className")==="link-point-top"}),s=t.shapeMap["link-point-bottom"]||t.find(function(ir){return ir.get("className")==="link-point-bottom"}),u;n&&(u=n.attr()),a&&!u&&(u=a.attr()),o&&!u&&(u=o.attr()),s&&!u&&(u=s.attr()),u||(u=r);var f=(0,l.mix)({},u,e.linkPoints),c=f.fill,d=f.stroke,A=f.lineWidth,D=f.size/2;D||(D=f.r);var z=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},Z=z.left,rt=z.right,ft=z.top,ct=z.bottom,gt=this.getSize(e),Ct=gt[0],Ht=gt[1],ne={r:D,fill:c,stroke:d,lineWidth:A};if(n)!Z&&Z!==void 0?(n.remove(),delete t.shapeMap["link-point-left"]):n.attr((0,y.__assign)((0,y.__assign)({},ne),{x:-Ct/2,y:0}));else if(Z){var re="link-point-left";t.shapeMap[re]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},ne),{x:-Ct/2,y:0}),className:re,name:re,isAnchorPoint:!0})}if(a)!rt&&rt!==void 0&&(a.remove(),delete t.shapeMap["link-point-right"]),a.attr((0,y.__assign)((0,y.__assign)({},ne),{x:Ct/2,y:0}));else if(rt){var Me="link-point-right";t.shapeMap[Me]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},ne),{x:Ct/2,y:0}),className:Me,name:Me,isAnchorPoint:!0})}if(o)!ft&&ft!==void 0&&(o.remove(),delete t.shapeMap["link-point-top"]),o.attr((0,y.__assign)((0,y.__assign)({},ne),{x:0,y:-Ht/2}));else if(ft){var je="link-point-top";t.shapeMap[je]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},ne),{x:0,y:-Ht/2}),className:je,name:je,isAnchorPoint:!0})}if(s)!ct&&ct!==void 0?(s.remove(),delete t.shapeMap["link-point-bottom"]):s.attr((0,y.__assign)((0,y.__assign)({},ne),{x:0,y:Ht/2}));else if(ct){var Re="link-point-bottom";t.shapeMap[Re]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},ne),{x:0,y:Ht/2}),className:Re,name:Re,isAnchorPoint:!0})}},updateShape:function(e,t,r,n,a){var o=t.get("keyShape");o.attr((0,y.__assign)({},r)),this.updateLabel(e,t,a),n&&this.updateIcon(e,t)},updateIcon:function(e,t){var r=this,n=t.getContainer(),a=(this.mergeStyle||this.getOptions(e)).icon,o=e.icon?e.icon:{show:void 0,text:void 0},s=o.show,u=o.text,f=n.shapeMap["".concat(this.type,"-icon")]||n.find(function(ft){return ft.get("name")==="".concat(r.type,"-icon")});if(f)if(s||s===void 0){var c=(0,l.mix)({},f.attr(),a),d=c.width,A=d===void 0?20:d,D=c.height,z=D===void 0?20:D;(c.fontFamily==="iconfont"||c.hasOwnProperty("text"))&&(A=0,z=0),f.attr((0,y.__assign)((0,y.__assign)({},c),{x:-A/2,y:-z/2}))}else f.remove(),delete n.shapeMap["".concat(this.type,"-icon")];else if(s){var Z="".concat(this.type,"-icon");if(u)n.shapeMap[Z]=n.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:Z,name:Z});else{var A=a.width,z=a.height;n.shapeMap[Z]=n.addShape("image",{attrs:(0,y.__assign)((0,y.__assign)({},a),{x:-A/2,y:-z/2}),className:Z,name:Z})}var rt=n.shapeMap["node-label"]||n.find(function(ft){return ft.get("name")==="node-label"});rt&&rt.toFront()}}},Fm=(0,y.__assign)((0,y.__assign)({},jh),Bm);Ns.registerNode("single-node",Fm);var qd="edge-shape";function zm(i){var e=i;return i==="start"?e="end":i==="end"&&(e="start"),e}var Gm={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:Ut.defaultEdge.size,style:{x:0,y:0,stroke:Ut.defaultEdge.style.stroke,lineAppendWidth:Ut.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:Ut.edgeLabel.style.fill,fontSize:Ut.edgeLabel.style.fontSize,fontFamily:Ut.windowFontFamily}},stateStyles:(0,y.__assign)({},Ut.edgeStateStyles)},getPath:function(e){var t=[];return(0,l.each)(e,function(r,n){n===0?t.push(["M",r.x,r.y]):t.push(["L",r.x,r.y])}),t},getShapeStyle:function(e){var t=this.options.style,r={stroke:e.color},n=(0,l.mix)({},t,r,e.style),a=e.size||Ut.defaultEdge.size;e=this.getPathPoints(e);var o=e.startPoint,s=e.endPoint,u=this.getControlPoints(e),f=[o];u&&(f=f.concat(u)),f.push(s);var c=this.getPath(f),d=(0,l.mix)({},Ut.defaultEdge.style,{stroke:Ut.defaultEdge.color,lineWidth:a,path:c},n);return d},updateShapeStyle:function(e,t,r){var n,a=t.getContainer(),o=((n=t.getKeyShape)===null||n===void 0?void 0:n.call(t))||a.shapeMap["edge-shape"],s=e.size;e=this.getPathPoints(e);var u=e.startPoint,f=e.endPoint,c=this.getControlPoints(e),d=[u];c&&(d=d.concat(c)),d.push(f);var A=o.attr(),D=e.style||{};D.stroke===void 0&&(D.stroke=e.color);var z=e.sourceNode,Z=e.targetNode,rt={radius:D.radius};c||(rt={source:z,target:Z,offset:D.offset,radius:D.radius});var ft=this.getPath(d,rt),ct={};r==="move"?ct={path:ft}:(A.endArrow&&D.endArrow===!1&&(e.style.endArrow={path:""}),A.startArrow&&D.startArrow===!1&&(e.style.startArrow={path:""}),ct=(0,y.__assign)({},e.style),ct.lineWidth===void 0&&(ct.lineWdith=((0,l.isNumber)(s)?s:s==null?void 0:s[0])||A.lineWidth),ct.path===void 0&&(ct.path=ft),ct.stroke===void 0&&(ct.stroke=A.stroke||e.color)),o&&o.attr(ct)},getLabelStyleByPosition:function(e,t,r){var n=t.position||this.labelPosition,a={},o=r==null?void 0:r.shapeMap[qd],s;n==="start"?s=0:n==="end"?s=1:s=.5;var u=t.refX||this.refX,f=t.refY||this.refY;if(e.startPoint.x===e.endPoint.x&&e.startPoint.y===e.endPoint.y)return a.x=e.startPoint.x+u,a.y=e.startPoint.y+f,a.text=e.label,a;var c;(0,l.isNil)(t.autoRotate)?c=this.labelAutoRotate:c=t.autoRotate;var d=Oo(o,s,u,f,c);return a.x=d.x,a.y=d.y,a.rotate=d.rotate,a.textAlign=this._getTextAlign(n,d.angle),a.text=e.label,a},getLabelBgStyleByPosition:function(e,t){if(!e)return{};var r=e.getBBox(),n=t.style&&t.style.background;if(!n)return{};var a=n.padding,o=r.width+a[1]+a[3],s=r.height+a[0]+a[2],u=(0,y.__assign)((0,y.__assign)({},n),{width:o,height:s,x:r.minX-a[3],y:r.minY-a[0],matrix:[1,0,0,0,1,0,0,0,1]}),f;return(0,l.isNil)(t.autoRotate)?f=this.labelAutoRotate:f=t.autoRotate,f&&(u.matrix=e.attr("matrix")||[1,0,0,0,1,0,0,0,1]),u},_getTextAlign:function(e,t){var r="center";return t?(t=t%(Math.PI*2),e!=="center"&&(t>=0&&t<=Math.PI/2||t>=3/2*Math.PI&&t<2*Math.PI?r=e:r=zm(e)),r):e},getControlPoints:function(e){return e.controlPoints},getPathPoints:function(e){return e},drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("path",{className:qd,name:qd,attrs:r});return t.shapeMap[qd]=n,n},drawLabel:function(e,t){var r=this.options.labelCfg,n=(0,l.deepMix)({},r,e.labelCfg),a=this.getLabelStyle(e,n,t),o=a.rotate;delete a.rotate;var s=t.addShape("text",{attrs:a,name:"text-shape",labelRelated:!0});if(t.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""&&s.rotateAtStart(o),a.background){var u=this.drawLabelBg(e,t,s,a,o),f=this.itemType+Xh;u.set("classname",f),t.shapeMap[f]=u,s.toFront()}return s},drawLabelBg:function(e,t,r,n,a){var o=this.options.labelCfg,s=(0,l.deepMix)({},o,e.labelCfg),u=this.getLabelBgStyleByPosition(r,s),f=t.addShape("rect",{name:"text-bg-shape",attrs:u,labelRelated:!0});return t.shapeMap["text-bg-shape"]=f,f}},Um=(0,y.__assign)((0,y.__assign)({},jh),Gm);Ns.registerEdge("single-edge",Um),Ns.registerEdge("line",{getControlPoints:function(){}},"single-edge"),Ns.registerEdge("spline",{getPath:function(e){var t=ep(e);return t}},"single-edge"),Ns.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint,n={x:(t.x+r.x)/2,y:(t.y+r.y)/2},a,o;if(e.controlPoints!==void 0){if(o=e.controlPoints[0],a=Bn(t,o,r),t.x<=r.x&&t.y>r.y?this.clockwise=a.x>o.x?0:1:t.x<=r.x&&t.y<r.y?this.clockwise=a.x>o.x?1:0:t.x>r.x&&t.y<=r.y?this.clockwise=a.y<o.y?0:1:this.clockwise=a.y<o.y?1:0,(o.x-t.x)/(o.y-t.y)===(r.x-t.x)/(r.y-t.y))return[]}else{e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),(0,l.isArray)(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),e.curveOffset<0?this.clockwise=0:this.clockwise=1;var s={x:r.x-t.x,y:r.y-t.y},u=Math.atan2(s.y,s.x);o={x:e.curveOffset*Math.cos(-Math.PI/2+u)+n.x,y:e.curveOffset*Math.sin(-Math.PI/2+u)+n.y},a=Bn(t,o,r)}var f=sa(t,a),c=[{x:f,y:f}];return c},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),e.length===2?t.push(["L",e[1].x,e[1].y]):t.push(["A",e[1].x,e[1].y,0,0,this.clockwise,e[2].x,e[2].y]),t}},"single-edge"),Ns.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(e){var t=e.controlPoints;if(!t||!t.length){var r=e.startPoint,n=e.endPoint;e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),(0,l.isArray)(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),(0,l.isArray)(e.curvePosition)&&(e.curvePosition=e.curveOffset[0]);var a=Zd(r,n,e.curvePosition,e.curveOffset);t=[a]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["Q",e[1].x,e[1].y,e[2].x,e[2].y]),t}},"single-edge"),Ns.registerEdge("cubic",{curvePosition:[1/2,1/2],curveOffset:[-20,20],getControlPoints:function(e){var t=e.controlPoints;if(e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),(0,l.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,l.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]),!t||!t.length||t.length<2){var r=e.startPoint,n=e.endPoint,a=Zd(r,n,e.curvePosition[0],e.curveOffset[0]),o=Zd(r,n,e.curvePosition[1],e.curveOffset[1]);t=[a,o]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["C",e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y]),t}},"single-edge"),Ns.registerEdge("cubic-vertical",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),(0,l.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,l.isNumber)(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),(0,l.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var n=r.y-t.y,a=[0,0];e.curveOffset?a=e.curveOffset:Math.abs(n)<Math.abs(e.minCurveOffset[0])&&(a=e.minCurveOffset);var o={x:t.x,y:t.y+n*this.curvePosition[0]+a[0]},s={x:r.x,y:r.y-n*this.curvePosition[1]+a[1]};return[o,s]}},"cubic"),Ns.registerEdge("cubic-horizontal",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),(0,l.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,l.isNumber)(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),(0,l.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var n=r.x-t.x,a=[0,0];e.curveOffset?a=e.curveOffset:Math.abs(n)<Math.abs(e.minCurveOffset[0])&&(a=e.minCurveOffset);var o={x:t.x+n*this.curvePosition[0]+a[0],y:t.y},s={x:r.x-n*this.curvePosition[1]+a[1],y:r.y},u=[o,s];return u}},"cubic"),Ns.registerEdge("loop",{getPathPoints:function(e){return Bi(e)},getControlPoints:function(e){return e.controlPoints},afterDraw:function(e){e.controlPoints=void 0},afterUpdate:function(e){e.controlPoints=void 0}},"cubic");var Wm={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:Ut.comboLabel.refX,refY:Ut.comboLabel.refY,options:{style:{stroke:Ut.defaultCombo.style.stroke,fill:Ut.defaultCombo.style.fill,lineWidth:Ut.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Ut.comboLabel.style.fill,fontSize:Ut.comboLabel.style.fontSize,fontFamily:Ut.windowFontFamily}},stateStyles:(0,y.__assign)({},Ut.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},getSize:function(e){var t=(0,l.clone)(e.size||this.options.size||Ut.defaultCombo.size);return(0,l.isArray)(t)&&t.length===1&&(t=[t[0],t[0]]),(0,l.isArray)(t)||(t=[t,t]),t},getLabelStyleByPosition:function(e,t){var r=t.position||this.labelPosition,n=e.style,a=e.padding||this.options.padding;(0,l.isArray)(a)&&(a=Math.max.apply(Math,a));var o=t.refX,s=t.refY;(0,l.isNil)(o)&&(o=this.refX),(0,l.isNil)(s)&&(s=this.refY);var u=this.getSize(e),f=Math.max(n.r,u[0]/2)||u[0]/2,c=f+a,d;switch(r){case"top":d={x:0,y:-c-s,textBaseline:"bottom",textAlign:"center"};break;case"bottom":d={x:0,y:c+s,textBaseline:"bottom",textAlign:"center"};break;case"left":d={x:-c+o,y:0,textAlign:"left"};break;case"center":d={x:0,y:0,text:e.label,textAlign:"center"};break;default:d={x:c+o,y:0,textAlign:"right"};break}return d.text=e.label,d},drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e),a=t.addShape(r,{attrs:n,draggable:!0,name:"combo-shape"});return a},updateCollapsedIcon:function(e,t,r){var n=e.collapsed,a=e.collapsedSubstituteIcon,o=a===void 0?{}:a,s=Object.assign({},this.options.collapsedSubstituteIcon,o),u=s.show,f=s.img,c=s.width,d=s.height,A=t.getContainer(),D=A.find(function(ft){return ft.get("name")==="combo-collapsed-substitute-icon"}),z=D&&!D.destroyed,Z=t.get("keyShape");if(n&&u){if(z)D.show();else{var rt={width:c||r.r*2||r.width,height:d||r.r*2||r.height};D=A.addShape("image",{attrs:(0,y.__assign)({img:f,x:-rt.width/2,y:-rt.height/2},rt),name:"combo-collapsed-substitute-icon",draggable:!0})}Z.hide()}else z&&(D.hide(),Z.show())},updateShape:function(e,t,r){var n=this,a=t.get("keyShape"),o=t.get("animate"),s=o&&(e.animate===void 0?this.options.animate:e.animate);s&&a.animate?(e.collapsed||this.updateCollapsedIcon(e,t,r),a.animate(r,{duration:200,easing:"easeLinear",callback:function(){e.collapsed&&n.updateCollapsedIcon(e,t,r)}})):(a.attr((0,y.__assign)({},r)),this.updateCollapsedIcon(e,t,r)),this.updateLabel(e,t)}},Ym=(0,y.__assign)((0,y.__assign)({},jh),Wm);Ns.registerCombo("single-combo",Ym),Ns.registerCombo("circle",{options:{size:[Ut.defaultCombo.size[0],Ut.defaultCombo.size[0]],padding:Math.max.apply(Math,Ut.defaultCombo.padding),animate:!0,style:{stroke:Ut.defaultCombo.style.stroke,fill:Ut.defaultCombo.style.fill,lineWidth:Ut.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Ut.comboLabel.style.fill,fontSize:Ut.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:(0,y.__assign)({},Ut.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"circle",labelPosition:"top",drawShape:function(e,t){var r=this.getShapeStyle(e);delete r.height,delete r.width;var n=t.addShape("circle",{attrs:r,className:"circle-combo",name:"circle-combo",draggable:!0});return n},getShapeStyle:function(e){var t=this.options.style,r=e.padding||this.options.padding;(0,l.isArray)(r)&&(r=Math.max.apply(Math,r));var n={stroke:e.color},a=(0,l.mix)({},t,n,e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,s;if(o)s=(0,l.isNumber)(o)?o/2:o[0]/2;else{var u=this.getSize(e);!(0,l.isNumber)(a.r)||isNaN(a.r)?s=u[0]/2||Ut.defaultCombo.style.r:s=Math.max(a.r,u[0]/2)||u[0]/2}a.r=s+r;var f=(0,y.__assign)({x:0,y:0},a);return e.style?e.style.r=s:e.style={r:s},f},update:function(e,t){var r=this.getSize(e),n=e.padding||this.options.padding;(0,l.isArray)(n)&&(n=Math.max.apply(Math,n));var a=(0,l.clone)(e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,s;o?s=(0,l.isNumber)(o)?o/2:o[0]/2:s=Math.max(a.r,r[0]/2)||r[0]/2,a.r=s+n;var u=t.get("sizeCache");u&&(u.r=a.r);var f={stroke:e.color},c=t.get("keyShape"),d=(0,l.mix)({},c.attr(),f,a);e.style?e.style.r=s:e.style={r:s},this.updateShape(e,t,d,!0)}},"single-combo"),Ns.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:Ut.defaultCombo.style.stroke,fill:Ut.defaultCombo.style.fill,lineWidth:Ut.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Ut.comboLabel.style.fill,fontSize:Ut.comboLabel.style.fontSize,fontFamily:Ut.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,y.__assign)({},Ut.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"rect",labelPosition:"top",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"rect-combo",name:"rect-combo",draggable:!0});return n},getLabelStyleByPosition:function(e,t){var r=t.position||this.labelPosition,n=e.style,a=e.padding||this.options.padding;(0,l.isNumber)(a)&&(a=[a,a,a,a]);var o=t.refX,s=t.refY;(0,l.isNil)(o)&&(o=this.refX),(0,l.isNil)(s)&&(s=this.refY);var u=-n.width/2-a[3],f=n.width/2+a[1],c=-n.height/2-a[0],d=n.height/2+a[2],A;switch(r){case"top":A={x:u+o,y:c+s,textBaseline:"top",textAlign:"left"};break;case"bottom":A={x:0,y:d+s,textBaseline:"top",textAlign:"center"};break;case"left":A={x:u+s,y:0,textAlign:"left"};break;case"center":A={x:0,y:0,text:e.label,textAlign:"center"};break;case"top-center":A={x:0,y:c+s,textBaseline:"top",textAlign:"center"};break;default:A={x:f+o,y:0,textAlign:"right"};break}return A.text=e.label,A},getShapeStyle:function(e){var t=this.options.style,r=e.padding||this.options.padding;(0,l.isNumber)(r)&&(r=[r,r,r,r]);var n={stroke:e.color},a=(0,l.mix)({},t,n,e.style),o=this.getSize(e),s,u,f=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;f?(0,l.isNumber)(f)?(s=f,u=f):(s=f[0],u=f[1]):(!(0,l.isNumber)(a.width)||isNaN(a.width)?s=o[0]||Ut.defaultCombo.style.width:s=Math.max(a.width,o[0])||o[0],!(0,l.isNumber)(a.height)||isNaN(a.height)?u=o[1]||Ut.defaultCombo.style.height:u=Math.max(a.height,o[1])||o[1]);var c=-s/2-r[3],d=-u/2-r[0];a.width=s+r[1]+r[3],a.height=u+r[0]+r[2];var A=(0,y.__assign)({x:c,y:d},a);return e.style?(e.style.width=s,e.style.height=u):e.style={width:s,height:u},A},update:function(e,t){var r=this.getSize(e),n=e.padding||this.options.padding;(0,l.isNumber)(n)&&(n=[n,n,n,n]);var a=(0,l.clone)(e.style),o,s,u=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;u?(0,l.isNumber)(u)?(o=u,s=u):(o=u[0],s=u[1]):(o=Math.max(a.width,r[0])||r[0],s=Math.max(a.height,r[1])||r[1]),a.width=o+n[1]+n[3],a.height=s+n[0]+n[2];var f=t.get("sizeCache");f&&(f.width=a.width,f.height=a.height),a.x=-o/2-n[3],a.y=-s/2-n[0];var c={stroke:e.color},d=t.get("keyShape"),A=(0,l.mix)({},d.attr(),c,a);e.style?(e.style.width=o,e.style.height=s):e.style={width:o,height:s},this.updateShape(e,t,A,!1)}},"single-combo"),Ns.registerNode("simple-circle",{options:{size:Ut.defaultNode.size,style:{x:0,y:0,stroke:Ut.defaultNode.style.stroke,fill:Ut.defaultNode.style.fill,lineWidth:Ut.defaultNode.style.lineWidth},labelCfg:{style:{fill:Ut.nodeLabel.style.fill,fontSize:Ut.nodeLabel.style.fontSize,fontFamily:Ut.windowFontFamily}},stateStyles:(0,y.__assign)({},Ut.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",shapeMap:{},drawShape:function(e,t){var r=this.getShapeStyle(e),n="".concat(this.type,"-keyShape"),a=t.addShape("circle",{attrs:r,className:"".concat(this.type,"-keyShape"),name:n,draggable:!0});return t.shapeMap[n]=a,a},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,l.deepMix)({},t,r),a=this.getSize(e),o=a[0]/2,s=(0,y.__assign)({x:0,y:0,r:o},n);return s},update:function(e,t,r){var n=this.getSize(e),a={stroke:e.color,r:n[0]/2},o=t.get("keyShape"),s=(0,l.deepMix)({},o.attr(),a,e.style);this.updateShape(e,t,s,!0,r)}},"single-node"),Ns.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:Ut.defaultNode.style.stroke,fill:Ut.defaultNode.style.fill,lineWidth:Ut.defaultNode.style.lineWidth},labelCfg:{style:{fill:Ut.nodeLabel.style.fill,fontSize:Ut.nodeLabel.style.fontSize,fontFamily:Ut.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,y.__assign)({},Ut.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return n},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,l.mix)({},t,r),a=this.getSize(e),o=n.width||a[0],s=n.height||a[1],u=(0,y.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t,r){var n=t.getContainer(),a=(this.mergeStyle||this.getOptions(e)).style,o=this.getSize(e),s=t.get("keyShape");e.size||(o[0]=s.attr("width")||a.width,o[1]=s.attr("height")||a.height);var u={stroke:e.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},f=(0,l.mix)({},a,s.attr(),u);f=(0,l.mix)(f,e.style),this.updateShape(e,t,f,!1,r)}},"single-node"),Ns.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,labelCfg:{style:{fontFamily:Ut.windowFontFamily}},clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e);delete n.fill;var a=t.addShape(r,{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return this.drawClip(e,a),a},drawClip:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).clipCfg;if(r.show){var n=r.type,a=r.x,o=r.y,s=r.style;if(n==="circle"){var u=r.r;t.setClip({type:"circle",attrs:(0,y.__assign)({r:u,x:a,y:o},s)})}else if(n==="rect"){var f=r.width,c=r.height,d=a-f/2,A=o-c/2;t.setClip({type:"rect",attrs:(0,y.__assign)({x:d,y:A,width:f,height:c},s)})}else if(n==="ellipse"){var D=r.rx,z=r.ry;t.setClip({type:"ellipse",attrs:(0,y.__assign)({x:a,y:o,rx:D,ry:z},s)})}else if(n==="polygon"){var Z=r.points;t.setClip({type:"polygon",attrs:(0,y.__assign)({points:Z},s)})}else if(n==="path"){var rt=r.path;t.setClip({type:"path",attrs:(0,y.__assign)({path:rt},s)})}}},getShapeStyle:function(e){var t=this.mergeStyle||this.getOptions(e),r=t.style,n=t.img,a=this.getSize(e),o=a[0],s=a[1];r&&(o=r.width||a[0],s=r.height||a[1]);var u=(0,y.__assign)({x:-o/2,y:-s/2,width:o,height:s,img:n},r);return u},updateShapeStyle:function(e,t){var r=t.getContainer(),n="".concat(this.itemType,"-shape"),a=r.shapeMap[n]||r.find(function(s){return s.get("className")===n})||t.getKeyShape(),o=this.getShapeStyle(e);a&&!a.destroyed&&a.attr(o)}},"single-node");var vp={triangle:function(e,t,r){e===void 0&&(e=10),t===void 0&&(t=15),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",0 L ").concat(n+t,",-").concat(e/2," L ").concat(n+t,",").concat(e/2," Z");return a},vee:function(e,t,r){e===void 0&&(e=15),t===void 0&&(t=20),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",0 L ").concat(n+t,",-").concat(e/2,`
        L `).concat(n+2*t/3,",0 L ").concat(n+t,",").concat(e/2," Z");return a},circle:function(e,t){e===void 0&&(e=5),t===void 0&&(t=0);var r=t*2,n="M ".concat(r,`, 0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(e*2,`,0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(-e*2,",0");return n},rect:function(e,t,r){e===void 0&&(e=10),t===void 0&&(t=10),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",").concat(-e/2,` 
        L `).concat(n+t,",").concat(-e/2,` 
        L `).concat(n+t,",").concat(e/2,` 
        L `).concat(n,",").concat(e/2," Z");return a},diamond:function(e,t,r){e===void 0&&(e=15),t===void 0&&(t=15),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,`,0 
        L `).concat(n+t/2,",").concat(-e/2,` 
        L `).concat(n+t,`,0 
        L `).concat(n+t/2,",").concat(e/2," Z");return a},triangleRect:function(e,t,r,n,a,o){e===void 0&&(e=15),t===void 0&&(t=15),r===void 0&&(r=15),n===void 0&&(n=3),a===void 0&&(a=5),o===void 0&&(o=0);var s=o*2,u=s+t+a,f="M ".concat(s,",0 L ").concat(s+t,",-").concat(e/2," L ").concat(s+t,",").concat(e/2,` Z
            M `).concat(u,", -").concat(r/2,`
            L `).concat(u+n," -").concat(r/2,`
            L `).concat(u+n," ").concat(r/2,`
            L `).concat(u," ").concat(r/2,`
            Z`);return f}},pp={collapse:function(e,t,r){return[["M",e-r,t],["a",r,r,0,1,0,r*2,0],["a",r,r,0,1,0,-r*2,0],["M",e-r+4,t],["L",e+r-4,t]]},expand:function(e,t,r){return[["M",e-r,t],["a",r,r,0,1,0,r*2,0],["a",r,r,0,1,0,-r*2,0],["M",e-r+4,t],["L",e-r+2*r-4,t],["M",e-r+r,t-r+4],["L",e,t+r-4]]},upTriangle:function(e,t,r){var n=r*Math.cos(Math.PI/6),a=r*Math.sin(Math.PI/6);return[["M",e-n,t+a],["L",e+n,t+a],["L",e,t-r],["Z"]]},downTriangle:function(e,t,r){var n=r*Math.cos(Math.PI/6),a=r*Math.sin(Math.PI/6);return[["M",e-n,t-a],["L",e+n,t-a],["L",e,t+r],["Z"]]}},zc=Ns,Xm=["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"],gp=function(e){return e==="force"||e==="g6force"||e==="gForce"||e==="force2"},jm=dt,Vm=(0,y.__assign)((0,y.__assign)((0,y.__assign)((0,y.__assign)((0,y.__assign)((0,y.__assign)((0,y.__assign)({},L),w),p),R),b),S),{transform:jm,mat3:$}),Ys=Vm,Hm=function(){function i(e){this.graph=e,this.layoutCfg=e.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}return i.prototype.initLayout=function(){},i.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},i.prototype.getLayoutCfgType=function(e){var t=e.type;if(t)return t;var r=e.pipes;return Array.isArray(r)?r.map(function(n){return(n==null?void 0:n.type)||""}):null},i.prototype.isLayoutTypeSame=function(e){var t=this.getLayoutCfgType(e),r=Array.isArray(this.layoutType),n=Array.isArray(t);return r&&n?this.layoutType.every(function(a,o){return a===t[o]}):Array.isArray(t)||Array.isArray(this.layoutType)?!1:(e==null?void 0:e.type)===this.layoutType},i.prototype.refreshLayout=function(){var e=this,t=e.graph,r=e.layoutType,n=e.layoutCfg,a=n===void 0?{}:n;if(t){var o=a.animate,s=o===void 0&&(r==="force"||r==="force2"),u=gp(r)&&(o||s);t.get("animate")&&!u?t.positionsAnimate(r==="comboCombined"):t.refreshPositions(r==="comboCombined")}},i.prototype.changeLayout=function(e){var t=e.disableTriggerLayout,r=(0,y.__rest)(e,["disableTriggerLayout"]);this.layoutCfg=r,this.layoutType=r.type||this.layoutType,!t&&this.layout()},i.prototype.changeData=function(e){this.layout(e)},i.prototype.destoryLayoutMethods=function(){var e=this.layoutMethods,t=[];return e==null||e.forEach(function(r){var n,a=(n=r.getType)===null||n===void 0?void 0:n.call(r);a&&t.push(a),r.destroy()}),this.layoutMethods=[],t},i.prototype.destroyLayout=function(){this.destoryLayoutMethods();var e=this.graph;e&&!e.get("destroyed")&&e.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},i.prototype.setDataFromGraph=function(){for(var e,t=[],r=[],n=[],a=[],o=[],s=[],u=[],f=this.graph.getNodes(),c=this.graph.getEdges(),d=this.graph.getCombos(),A=f.length,D=0;D<A;D++){var z=f[D];if(!(!z||z.destroyed)){var Z=z.getModel();if(!z.isVisible()){r.push(Z);continue}t.push(Z)}}for(var rt=c.length,D=0;D<rt;D++){var ft=c[D];if(!(!ft||ft.destroyed)){var Z=ft.getModel();if(!ft.isVisible()){a.push(Z);continue}Z.isComboEdge?o.push(Z):n.push(Z)}}for(var ct=d.length,D=0;D<ct;D++){var gt=d[D];if(!gt.destroyed){var Z=gt.getModel();if(!gt.isVisible()){u.push(Z);continue}s.push(Z)}}return{nodes:t,hiddenNodes:r,edges:n,hiddenEdges:a,combos:s,hiddenCombos:u,comboEdges:o,vedges:(e=this.graph.get("vedges"))===null||e===void 0?void 0:e.map(function(Ct){return Ct.getModel()})}},i.prototype.relayout=function(e){var t=this,r=this,n=r.graph,a=r.layoutMethods,o=r.layoutCfg;if(!(!n||n.get("destroyed"))){var s=Promise.resolve();if(e){this.data=this.setDataFromGraph();var u=this.data.nodes;if(!u)return!1;s=this.initPositions(o.center,u)}n.emit("beforelayout"),a==null||a.forEach(function(f,c){var d=o[c]||o;s=s.then(function(){var A,D=t.execLayoutMethod(d,c);return c===a.length-1&&((A=o.onAllLayoutEnd)===null||A===void 0||A.call(o)),D})})}},i.prototype.filterLayoutData=function(e,t){var r=e.nodes,n=e.edges,a=(0,y.__rest)(e,["nodes","edges"]);if(!r)return e;var o,s;(0,l.isFunction)(t==null?void 0:t.nodesFilter)?o=t.nodesFilter:o=function(){return!0};var u=r.filter(o);if((0,l.isFunction)(t==null?void 0:t.edgesFilter))s=t.edgesFilter;else{var f=u.reduce(function(c,d){return c[d.id]=!0,c},{});s=function(d){return f[d.source]&&f[d.target]}}return(0,y.__assign)({nodes:u,edges:n.filter(s)},a)},i.prototype.getLayoutBBox=function(e){var t=this.graph,r=(0,l.groupBy)(t.getNodes(),function(o){return o.getModel().layoutOrder}),n=Object.values(r).map(function(o){var s=Fv(o);return s.size=[s.width,s.height],s}),a=Object.values((0,l.groupBy)(e,"layoutOrder"));return{groupNodes:a,layoutNodes:n}},i.prototype.layoutAnimate=function(){},i.prototype.moveToZero=function(){var e=this.graph,t=e.get("data"),r=t.nodes;if(!(r[0].x===void 0||r[0].x===null||Cf(r[0].x))){for(var n=[0,0],a=r.length,o=0;o<a;o++){var s=r[o];n[0]+=s.x,n[1]+=s.y}n[0]/=r.length,n[1]/=r.length;for(var o=0;o<a;o++){var s=r[o];s.x-=n[0],s.y-=n[1]}}},i.prototype.initPositions=function(e,t){var r;return(0,y.__awaiter)(this,void 0,void 0,function(){var n,a,o;return(0,y.__generator)(this,function(s){return n=this.graph,t!=null&&t.length?(a=t.filter(function(u){return Cf(u.x)||Cf(u.y)}),o=a?a.length:0,o?[2,(r=this.initWithPreset)===null||r===void 0?void 0:r.call(this,function(){},function(){var u=n.get("width")*.85,f=n.get("height")*.85,c=Math.ceil(Math.sqrt(o)*(u/f)),d=Math.ceil(o/c),A=u/(c-1),D=f/(d-1);(!isFinite(A)||!A)&&(A=0),(!isFinite(D)||!A)&&(D=0);for(var z=e[0]-u/2,Z=e[1]-f/2,rt=!0,ft=0;ft<o;ft++){var ct=a[ft];Cf(+ct.x)&&(rt=!1,ct.x=ft%c*A+z),Cf(+ct.y)&&(rt=!1,ct.y=Math.floor(ft/c)*D+Z)}})]:[2]):[2,Promise.resolve()]})})},i.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},i}(),mp=Hm,Zm=function(){function i(e){this.graph=e,this.destroyed=!1,this.initEvents()}return i}(),yp=Zm,lc=zc.registerNode,bp=zc.registerEdge,Km=zc.registerCombo,xp=W.registerBehavior,Qn=Ut,QS={version:Ut.version,AbstractGraph:lp,BaseGlobal:Qn,Util:Ys,Shape:zc,Node:Fh,Edge:Hv,Combo:Qv,Hull:cp,registerNode:zc.registerNode,registerEdge:zc.registerEdge,registerCombo:zc.registerCombo,registerBehavior:W.registerBehavior,Arrow:vp,Marker:pp,AbstractLayout:mp,AbstractEvent:yp},$m=_(810369);function qm(){return window?window.devicePixelRatio:1}function Ep(i,e,t,r){var n=i-t,a=e-r;return Math.sqrt(n*n+a*a)}function Cl(i,e,t,r,n,a){return n>=i&&n<=i+t&&a>=e&&a<=e+r}function wd(i,e){return!(e.minX>i.maxX||e.maxX<i.minX||e.minY>i.maxY||e.maxY<i.minY)}function Qm(i,e){return!i||!e?i||e:{minX:Math.min(i.minX,e.minX),minY:Math.min(i.minY,e.minY),maxX:Math.max(i.maxX,e.maxX),maxY:Math.max(i.maxY,e.maxY)}}function wp(i,e){return i[0]===e[0]&&i[1]===e[1]}var Jm=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,ty=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,ey=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,Sp=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function Mp(i,e){var t=i.match(Sp);(0,l.each)(t,function(r){var n=r.split(":");e.addColorStop(n[0],n[1])})}function ry(i,e,t){var r=Jm.exec(t),n=parseFloat(r[1])%360*(Math.PI/180),a=r[2],o=e.getBBox(),s,u;n>=0&&n<1/2*Math.PI?(s={x:o.minX,y:o.minY},u={x:o.maxX,y:o.maxY}):1/2*Math.PI<=n&&n<Math.PI?(s={x:o.maxX,y:o.minY},u={x:o.minX,y:o.maxY}):Math.PI<=n&&n<3/2*Math.PI?(s={x:o.maxX,y:o.maxY},u={x:o.minX,y:o.minY}):(s={x:o.minX,y:o.maxY},u={x:o.maxX,y:o.minY});var f=Math.tan(n),c=f*f,d=(u.x-s.x+f*(u.y-s.y))/(c+1)+s.x,A=f*(u.x-s.x+f*(u.y-s.y))/(c+1)+s.y,D=i.createLinearGradient(s.x,s.y,d,A);return Mp(a,D),D}function ny(i,e,t){var r=ty.exec(t),n=parseFloat(r[1]),a=parseFloat(r[2]),o=parseFloat(r[3]),s=r[4];if(o===0){var u=s.match(Sp);return u[u.length-1].split(":")[1]}var f=e.getBBox(),c=f.maxX-f.minX,d=f.maxY-f.minY,A=Math.sqrt(c*c+d*d)/2,D=i.createRadialGradient(f.minX+c*n,f.minY+d*a,0,f.minX+c/2,f.minY+d/2,o*A);return Mp(s,D),D}function ay(i,e,t){if(e.get("patternSource")&&e.get("patternSource")===t)return e.get("pattern");var r,n,a=ey.exec(t),o=a[1],s=a[2];function u(){r=i.createPattern(n,o),e.set("pattern",r),e.set("patternSource",t)}switch(o){case"a":o="repeat";break;case"x":o="repeat-x";break;case"y":o="repeat-y";break;case"n":o="no-repeat";break;default:o="no-repeat"}return n=new Image,s.match(/^data:/i)||(n.crossOrigin="Anonymous"),n.src=s,n.complete?u():(n.onload=u,n.src=n.src),r}function iy(i,e,t){var r=e.getBBox();if(isNaN(r.x)||isNaN(r.y)||isNaN(r.width)||isNaN(r.height))return t;if((0,l.isString)(t)){if(t[1]==="("||t[2]==="("){if(t[0]==="l")return ry(i,e,t);if(t[0]==="r")return ny(i,e,t);if(t[0]==="p")return ay(i,e,t)}return t}if(t instanceof CanvasPattern)return t}function oy(i){var e=0,t=0,r=0,n=0;return(0,l.isArray)(i)?i.length===1?e=t=r=n=i[0]:i.length===2?(e=r=i[0],t=n=i[1]):i.length===3?(e=i[0],t=n=i[1],r=i[2]):(e=i[0],t=i[1],r=i[2],n=i[3]):e=t=r=n=i,[e,t,r,n]}function Qd(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function Vh(i,e){return Qd(i)*Qd(e)?(i[0]*e[0]+i[1]*e[1])/(Qd(i)*Qd(e)):1}function _p(i,e){return(i[0]*e[1]<i[1]*e[0]?-1:1)*Math.acos(Vh(i,e))}function Cp(i,e){var t=e[1],r=e[2],n=(0,l.mod)((0,l.toRadian)(e[3]),Math.PI*2),a=e[4],o=e[5],s=i[0],u=i[1],f=e[6],c=e[7],d=Math.cos(n)*(s-f)/2+Math.sin(n)*(u-c)/2,A=-1*Math.sin(n)*(s-f)/2+Math.cos(n)*(u-c)/2,D=d*d/(t*t)+A*A/(r*r);D>1&&(t*=Math.sqrt(D),r*=Math.sqrt(D));var z=t*t*(A*A)+r*r*(d*d),Z=z?Math.sqrt((t*t*(r*r)-z)/z):1;a===o&&(Z*=-1),isNaN(Z)&&(Z=0);var rt=r?Z*t*A/r:0,ft=t?Z*-r*d/t:0,ct=(s+f)/2+Math.cos(n)*rt-Math.sin(n)*ft,gt=(u+c)/2+Math.sin(n)*rt+Math.cos(n)*ft,Ct=[(d-rt)/t,(A-ft)/r],Ht=[(-1*d-rt)/t,(-1*A-ft)/r],ne=_p([1,0],Ct),re=_p(Ct,Ht);return Vh(Ct,Ht)<=-1&&(re=Math.PI),Vh(Ct,Ht)>=1&&(re=0),o===0&&re>0&&(re=re-2*Math.PI),o===1&&re<0&&(re=re+2*Math.PI),{cx:ct,cy:gt,rx:wp(i,[f,c])?0:t,ry:wp(i,[f,c])?0:r,startAngle:ne,endAngle:ne+re,xRotation:n,arcFlag:a,sweepFlag:o}}var Jd=Math.sin,th=Math.cos,Hh=Math.atan2,eh=Math.PI;function Tp(i,e,t,r,n,a,o){var s=e.stroke,u=e.lineWidth,f=t-n,c=r-a,d=Hh(c,f),A=new tv({type:"path",canvas:i.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*th(eh/6)+","+10*Jd(eh/6)+" L0,0 L"+10*th(eh/6)+",-"+10*Jd(eh/6),stroke:s,lineWidth:u}});A.translate(n,a),A.rotateAtPoint(n,a,d),i.set(o?"startArrowShape":"endArrowShape",A)}function Ap(i,e,t,r,n,a,o){var s=e.startArrow,u=e.endArrow,f=e.stroke,c=e.lineWidth,d=o?s:u,A=d.d,D=d.fill,z=d.stroke,Z=d.lineWidth,rt=(0,y.__rest)(d,["d","fill","stroke","lineWidth"]),ft=t-n,ct=r-a,gt=Hh(ct,ft);A&&(n=n-th(gt)*A,a=a-Jd(gt)*A);var Ct=new tv({type:"path",canvas:i.get("canvas"),isArrowShape:!0,attrs:(0,y.__assign)((0,y.__assign)({},rt),{stroke:z||f,lineWidth:Z||c,fill:D})});Ct.translate(n,a),Ct.rotateAtPoint(n,a,gt),i.set(o?"startArrowShape":"endArrowShape",Ct)}function Tl(i,e,t,r,n){var a=Hh(r-e,t-i);return{dx:th(a)*n,dy:Jd(a)*n}}function Zh(i,e,t,r,n,a){typeof e.startArrow=="object"?Ap(i,e,t,r,n,a,!0):e.startArrow?Tp(i,e,t,r,n,a,!0):i.set("startArrowShape",null)}function Kh(i,e,t,r,n,a){typeof e.endArrow=="object"?Ap(i,e,t,r,n,a,!1):e.endArrow?Tp(i,e,t,r,n,a,!1):i.set("startArrowShape",null)}var Op={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function fd(i,e){var t=e.attr();for(var r in t){var n=t[r],a=Op[r]?Op[r]:r;a==="matrix"&&n?i.transform(n[0],n[1],n[3],n[4],n[6],n[7]):a==="lineDash"&&i.setLineDash?(0,l.isArray)(n)&&i.setLineDash(n):(a==="strokeStyle"||a==="fillStyle"?n=iy(i,e,n):a==="globalAlpha"&&(n=n*i.globalAlpha),i[a]=n)}}function $h(i,e,t){for(var r=0;r<e.length;r++){var n=e[r];n.cfg.visible?n.draw(i,t):n.skipDraw()}}function sy(i,e,t){var r=i.get("refreshElements");(0,l.each)(r,function(n){if(n!==i)for(var a=n.cfg.parent;a&&a!==i&&!a.cfg.refresh;)a.cfg.refresh=!0,a=a.cfg.parent}),r[0]===i?Qh(e,t):qh(e,t)}function qh(i,e){for(var t=0;t<i.length;t++){var r=i[t];if(r.cfg.visible)if(r.cfg.hasChanged)r.cfg.refresh=!0,r.isGroup()&&Qh(r.cfg.children,e);else if(r.cfg.refresh)r.isGroup()&&qh(r.cfg.children,e);else{var n=uy(r,e);r.cfg.refresh=n,n&&r.isGroup()&&qh(r.cfg.children,e)}}}function Ip(i){for(var e=0;e<i.length;e++){var t=i[e];t.cfg.hasChanged=!1,t.isGroup()&&!t.destroyed&&Ip(t.cfg.children)}}function Qh(i,e){for(var t=0;t<i.length;t++){var r=i[t];r.cfg.visible&&(r.cfg.refresh=!0,r.isGroup()&&Qh(r.get("children"),e))}}function uy(i,e){var t=i.cfg.cacheCanvasBBox,r=i.cfg.isInView&&t&&wd(t,e);return r}function Dp(i,e,t,r){var n=t.path,a=t.startArrow,o=t.endArrow;if(n){var s=[0,0],u=[0,0],f={dx:0,dy:0};e.beginPath();for(var c=0;c<n.length;c++){var d=n[c],A=d[0];if(c===0&&a&&a.d){var D=i.getStartTangent();f=Tl(D[0][0],D[0][1],D[1][0],D[1][1],a.d)}else if(c===n.length-2&&n[c+1][0]==="Z"&&o&&o.d){var z=n[c+1];if(z[0]==="Z"){var D=i.getEndTangent();f=Tl(D[0][0],D[0][1],D[1][0],D[1][1],o.d)}}else if(c===n.length-1&&o&&o.d&&n[0]!=="Z"){var D=i.getEndTangent();f=Tl(D[0][0],D[0][1],D[1][0],D[1][1],o.d)}var Z=f.dx,rt=f.dy;switch(A){case"M":e.moveTo(d[1]-Z,d[2]-rt),u=[d[1],d[2]];break;case"L":e.lineTo(d[1]-Z,d[2]-rt);break;case"Q":e.quadraticCurveTo(d[1],d[2],d[3]-Z,d[4]-rt);break;case"C":e.bezierCurveTo(d[1],d[2],d[3],d[4],d[5]-Z,d[6]-rt);break;case"A":{var ft=void 0;r?(ft=r[c],ft||(ft=Cp(s,d),r[c]=ft)):ft=Cp(s,d);var ct=ft.cx,gt=ft.cy,Ct=ft.rx,Ht=ft.ry,ne=ft.startAngle,re=ft.endAngle,Me=ft.xRotation,je=ft.sweepFlag;if(e.ellipse)e.ellipse(ct,gt,Ct,Ht,Me,ne,re,1-je);else{var Re=Ct>Ht?Ct:Ht,ir=Ct>Ht?1:Ct/Ht,Sr=Ct>Ht?Ht/Ct:1;e.translate(ct,gt),e.rotate(Me),e.scale(ir,Sr),e.arc(0,0,Re,ne,re,1-je),e.scale(1/ir,1/Sr),e.rotate(-Me),e.translate(-ct,-gt)}break}case"Z":e.closePath();break;default:break}if(A==="Z")s=u;else{var pn=d.length;s=[d[pn-2],d[pn-1]]}}}}function Pp(i,e){var t=i.get("canvas");t&&(e==="remove"&&(i._cacheCanvasBBox=i.get("cacheCanvasBBox")),i.get("hasChanged")||(i.set("hasChanged",!0),i.cfg.parent&&i.cfg.parent.get("hasChanged")||(t.refreshElement(i,e,t),t.get("autoDraw")&&t.draw())))}function fy(i){var e;if(i.destroyed)e=i._cacheCanvasBBox;else{var t=i.get("cacheCanvasBBox"),r=t&&!!(t.width&&t.height),n=i.getCanvasBBox(),a=n&&!!(n.width&&n.height);r&&a?e=Qm(t,n):r?e=t:a&&(e=n)}return e}function cy(i){if(!i.length)return null;var e=[],t=[],r=[],n=[];return(0,l.each)(i,function(a){var o=fy(a);o&&(e.push(o.minX),t.push(o.minY),r.push(o.maxX),n.push(o.maxY))}),{minX:(0,l.min)(e),minY:(0,l.min)(t),maxX:(0,l.max)(r),maxY:(0,l.max)(n)}}function ly(i,e){return!i||!e||!wd(i,e)?null:{minX:Math.max(i.minX,e.minX),minY:Math.max(i.minY,e.minY),maxX:Math.min(i.maxX,e.maxX),maxY:Math.min(i.maxY,e.maxY)}}var dy=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.onCanvasChange=function(t){Pp(this,t)},e.prototype.getShapeBase=function(){return x},e.prototype.getGroupBase=function(){return e},e.prototype._applyClip=function(t,r){r&&(t.save(),fd(t,r),r.createPath(t),t.restore(),t.clip(),r._afterDraw())},e.prototype.cacheCanvasBBox=function(){var t=this.cfg.children,r=[],n=[];(0,l.each)(t,function(A){var D=A.cfg.cacheCanvasBBox;D&&A.cfg.isInView&&(r.push(D.minX,D.maxX),n.push(D.minY,D.maxY))});var a=null;if(r.length){var o=(0,l.min)(r),s=(0,l.max)(r),u=(0,l.min)(n),f=(0,l.max)(n);a={minX:o,minY:u,x:o,y:u,maxX:s,maxY:f,width:s-o,height:f-u};var c=this.cfg.canvas;if(c){var d=c.getViewRange();this.set("isInView",wd(a,d))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",a)},e.prototype.draw=function(t,r){var n=this.cfg.children,a=r?this.cfg.refresh:!0;n.length&&a&&(t.save(),fd(t,this),this._applyClip(t,this.getClip()),$h(t,n,r),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},e}(xl),Lp=dy,hy=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.getShapeBase=function(){return x},e.prototype.getGroupBase=function(){return Lp},e.prototype.onCanvasChange=function(t){Pp(this,t)},e.prototype.calculateBBox=function(){var t=this.get("type"),r=this.getHitLineWidth(),n=Sl(t),a=n(this),o=r/2,s=a.x-o,u=a.y-o,f=a.x+a.width+o,c=a.y+a.height+o;return{x:s,minX:s,y:u,minY:u,width:a.width+r,height:a.height+r,maxX:f,maxY:c}},e.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},e.prototype.isStroke=function(){return!!this.attrs.stroke},e.prototype._applyClip=function(t,r){r&&(t.save(),fd(t,r),r.createPath(t),t.restore(),t.clip(),r._afterDraw())},e.prototype.draw=function(t,r){var n=this.cfg.clipShape;if(r){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var a=this.getCanvasBBox();if(!wd(r,a)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}t.save(),fd(t,this),this._applyClip(t,n),this.drawPath(t),t.restore(),this._afterDraw()},e.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},e.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var r=this.getCanvasBBox(),n=wd(r,t);this.set("isInView",n),n?this.set("cacheCanvasBBox",r):this.set("cacheCanvasBBox",null)}},e.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},e.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},e.prototype.fill=function(t){t.fill()},e.prototype.stroke=function(t){t.stroke()},e.prototype.strokeAndFill=function(t){var r=this.attrs,n=r.lineWidth,a=r.opacity,o=r.strokeOpacity,s=r.fillOpacity;this.isFill()&&(!(0,l.isNil)(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=a):this.fill(t)),this.isStroke()&&n>0&&(!(0,l.isNil)(o)&&o!==1&&(t.globalAlpha=o),this.stroke(t)),this.afterDrawPath(t)},e.prototype.createPath=function(t){},e.prototype.afterDrawPath=function(t){},e.prototype.isInShape=function(t,r){var n=this.isStroke(),a=this.isFill(),o=this.getHitLineWidth();return this.isInStrokeOrPath(t,r,n,a,o)},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){return!1},e.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},e}(sc),nf=hy,vy=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x:0,y:0,r:0})},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr(),u=s.x,f=s.y,c=s.r,d=o/2,A=Ep(u,f,t,r);return a&&n?A<=c+d:a?A<=c:n?A>=c-d&&A<=c+d:!1},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,a=r.y,o=r.r;t.beginPath(),t.arc(n,a,o,0,Math.PI*2,!1),t.closePath()},e}(nf),py=vy;function rh(i,e,t,r){return i/(t*t)+e/(r*r)}var gy=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr(),u=o/2,f=s.x,c=s.y,d=s.rx,A=s.ry,D=(t-f)*(t-f),z=(r-c)*(r-c);return a&&n?rh(D,z,d+u,A+u)<=1:a?rh(D,z,d,A)<=1:n?rh(D,z,d-u,A-u)>=1&&rh(D,z,d+u,A+u)<=1:!1},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,a=r.y,o=r.rx,s=r.ry;if(t.beginPath(),t.ellipse)t.ellipse(n,a,o,s,0,0,Math.PI*2,!1);else{var u=o>s?o:s,f=o>s?1:o/s,c=o>s?s/o:1;t.save(),t.translate(n,a),t.scale(f,c),t.arc(0,0,u,0,Math.PI*2),t.restore(),t.closePath()}},e}(nf),my=gy;function Np(i){return i instanceof HTMLElement&&(0,l.isString)(i.nodeName)&&i.nodeName.toUpperCase()==="CANVAS"}var yy=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x:0,y:0,width:0,height:0})},e.prototype.initAttrs=function(t){this._setImage(t.img)},e.prototype.isStroke=function(){return!1},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},e.prototype._setImage=function(t){var r=this,n=this.attrs;if((0,l.isString)(t)){var a=new Image;a.onload=function(){if(r.destroyed)return!1;r.attr("img",a),r.set("loading",!1),r._afterLoading();var o=r.get("callback");o&&o.call(r)},a.crossOrigin="Anonymous",a.src=t,this.set("loading",!0)}else t instanceof Image?(n.width||(n.width=t.width),n.height||(n.height=t.height)):Np(t)&&(n.width||(n.width=Number(t.getAttribute("width"))),n.height||(n.height,Number(t.getAttribute("height"))))},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),t==="img"&&this._setImage(r)},e.prototype.createPath=function(t){if(this.get("loading")){this.set("toDraw",!0),this.set("context",t);return}var r=this.attr(),n=r.x,a=r.y,o=r.width,s=r.height,u=r.sx,f=r.sy,c=r.swidth,d=r.sheight,A=r.img;(A instanceof Image||Np(A))&&(!(0,l.isNil)(u)&&!(0,l.isNil)(f)&&!(0,l.isNil)(c)&&!(0,l.isNil)(d)?t.drawImage(A,u,f,c,d,n,a,o,s):t.drawImage(A,n,a,o,s))},e}(nf),by=yy;function Gc(i,e,t,r,n,a,o){var s=Math.min(i,t),u=Math.max(i,t),f=Math.min(e,r),c=Math.max(e,r),d=n/2;return a>=s-d&&a<=u+d&&o>=f-d&&o<=c+d?Br.pointToLine(i,e,t,r,a,o)<=n/2:!1}var xy=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),this.setArrow()},e.prototype.setArrow=function(){var t=this.attr(),r=t.x1,n=t.y1,a=t.x2,o=t.y2,s=t.startArrow,u=t.endArrow;s&&Zh(this,t,a,o,r,n),u&&Kh(this,t,r,n,a,o)},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){if(!n||!o)return!1;var s=this.attr(),u=s.x1,f=s.y1,c=s.x2,d=s.y2;return Gc(u,f,c,d,o,t,r)},e.prototype.createPath=function(t){var r=this.attr(),n=r.x1,a=r.y1,o=r.x2,s=r.y2,u=r.startArrow,f=r.endArrow,c={dx:0,dy:0},d={dx:0,dy:0};u&&u.d&&(c=Tl(n,a,o,s,r.startArrow.d)),f&&f.d&&(d=Tl(n,a,o,s,r.endArrow.d)),t.beginPath(),t.moveTo(n+c.dx,a+c.dy),t.lineTo(o-d.dx,s-d.dy)},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr(),r=t.x1,n=t.y1,a=t.x2,o=t.y2;return Br.length(r,n,a,o)},e.prototype.getPoint=function(t){var r=this.attr(),n=r.x1,a=r.y1,o=r.x2,s=r.y2;return Br.pointAt(n,a,o,s,t)},e}(nf),Ey=xy,wy={circle:function(i,e,t){return[["M",i-t,e],["A",t,t,0,1,0,i+t,e],["A",t,t,0,1,0,i-t,e]]},square:function(i,e,t){return[["M",i-t,e-t],["L",i+t,e-t],["L",i+t,e+t],["L",i-t,e+t],["Z"]]},diamond:function(i,e,t){return[["M",i-t,e],["L",i,e-t],["L",i+t,e],["L",i,e+t],["Z"]]},triangle:function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e+r],["L",i,e-r],["L",i+t,e+r],["Z"]]},"triangle-down":function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e-r],["L",i+t,e-r],["L",i,e+r],["Z"]]}},Sy=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.initAttrs=function(t){this._resetParamsCache()},e.prototype._resetParamsCache=function(){this.set("paramsCache",{})},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),["symbol","x","y","r","radius"].indexOf(t)!==-1&&this._resetParamsCache()},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._getR=function(t){return(0,l.isNil)(t.r)?t.radius:t.r},e.prototype._getPath=function(){var t=this.attr(),r=t.x,n=t.y,a=t.symbol||"circle",o=this._getR(t),s,u;if((0,l.isFunction)(a))s=a,u=s(r,n,o),u=ur(u);else{if(s=e.Symbols[a],!s)return console.warn(a+" marker is not supported."),null;u=s(r,n,o)}return u},e.prototype.createPath=function(t){var r=this._getPath(),n=this.get("paramsCache");Dp(this,t,{path:r},n)},e.Symbols=wy,e}(nf),My=Sy;function Rp(i,e,t){var r=vs();return i.createPath(r),r.isPointInPath(e,t)}var _y=1e-6;function Jh(i){return Math.abs(i)<_y?0:i<0?-1:1}function Cy(i,e,t){return(t[0]-i[0])*(e[1]-i[1])===(e[0]-i[0])*(t[1]-i[1])&&Math.min(i[0],e[0])<=t[0]&&t[0]<=Math.max(i[0],e[0])&&Math.min(i[1],e[1])<=t[1]&&t[1]<=Math.max(i[1],e[1])}function kp(i,e,t){var r=!1,n=i.length;if(n<=2)return!1;for(var a=0;a<n;a++){var o=i[a],s=i[(a+1)%n];if(Cy(o,s,[e,t]))return!0;Jh(o[1]-t)>0!=Jh(s[1]-t)>0&&Jh(e-(t-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(r=!r)}return r}function Sd(i,e,t,r,n,a,o,s){var u=(Math.atan2(s-e,o-i)+Math.PI*2)%(Math.PI*2);if(u<r||u>n)return!1;var f={x:i+t*Math.cos(u),y:e+t*Math.sin(u)};return Ep(f.x,f.y,o,s)<=a/2}var Ty=dt;function Ay(i){for(var e=!1,t=i.length,r=0;r<t;r++){var n=i[r],a=n[0];if(a==="C"||a==="A"||a==="Q"){e=!0;break}}return e}function Oy(i,e,t,r,n){for(var a=!1,o=e/2,s=0;s<i.length;s++){var u=i[s],f=u.currentPoint,c=u.params,d=u.prePoint,A=u.box;if(!(A&&!Cl(A.x-o,A.y-o,A.width+e,A.height+e,t,r))){switch(u.command){case"L":case"Z":a=Gc(d[0],d[1],f[0],f[1],e,t,r);break;case"Q":var D=K.pointDistance(d[0],d[1],c[1],c[2],c[3],c[4],t,r);a=D<=e/2;break;case"C":var z=Zt.pointDistance(d[0],d[1],c[1],c[2],c[3],c[4],c[5],c[6],t,r,n);a=z<=e/2;break;case"A":var Z=u.arcParams,rt=Z.cx,ft=Z.cy,ct=Z.rx,gt=Z.ry,Ct=Z.startAngle,Ht=Z.endAngle,ne=Z.xRotation,re=[t,r,1],Me=ct>gt?ct:gt,je=ct>gt?1:ct/gt,Re=ct>gt?gt/ct:1,ir=Ty(null,[["t",-rt,-ft],["r",-ne],["s",1/je,1/Re]]);$i.transformMat3(re,re,ir),a=Sd(0,0,Me,Ct,Ht,e,re[0],re[1]);break;default:break}if(a)break}}return a}function Iy(i){for(var e=i.length,t=[],r=[],n=[],a=0;a<e;a++){var o=i[a],s=o[0];s==="M"?(n.length&&(r.push(n),n=[]),n.push([o[1],o[2]])):s==="Z"?n.length&&(t.push(n),n=[]):n.push([o[1],o[2]])}return n.length>0&&r.push(n),{polygons:t,polylines:r}}var nh=(0,y.__assign)({hasArc:Ay,extractPolygons:Iy,isPointInStroke:Oy},M);function Bp(i,e,t){for(var r=!1,n=0;n<i.length;n++){var a=i[n];if(r=kp(a,e,t),r)break}return r}var Dy=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),t==="path"&&this._setPathArr(r),this.setArrow()},e.prototype._setPathArr=function(t){this.attrs.path=ur(t);var r=nh.hasArc(t);this.set("hasArc",r),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},e.prototype.getSegments=function(){var t=this.get("segements");return t||(t=Rv(this.attr("path")),this.set("segments",t)),t},e.prototype.setArrow=function(){var t=this.attr(),r=t.startArrow,n=t.endArrow;if(r){var a=this.getStartTangent();Zh(this,t,a[0][0],a[0][1],a[1][0],a[1][1])}if(n){var a=this.getEndTangent();Kh(this,t,a[0][0],a[0][1],a[1][0],a[1][1])}},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.getSegments(),u=this.get("hasArc"),f=!1;if(n){var c=this.getTotalLength();f=nh.isPointInStroke(s,o,t,r,c)}if(!f&&a)if(u)f=Rp(this,t,r);else{var d=this.attr("path"),A=nh.extractPolygons(d);f=Bp(A.polygons,t,r)||Bp(A.polylines,t,r)}return f},e.prototype.createPath=function(t){var r=this.attr(),n=this.get("paramsCache");Dp(this,t,r,n)},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.get("totalLength");return(0,l.isNil)(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},e.prototype.getPoint=function(t){var r=this.get("tCache");r||(this._calculateCurve(),this._setTcache(),r=this.get("tCache"));var n,a,o=this.get("curve");if(!r||r.length===0)return o?{x:o[0][1],y:o[0][2]}:null;(0,l.each)(r,function(c,d){t>=c[0]&&t<=c[1]&&(n=(t-c[0])/(c[1]-c[0]),a=d)});var s=o[a];if((0,l.isNil)(s)||(0,l.isNil)(a))return null;var u=s.length,f=o[a+1];return Zt.pointAt(s[u-2],s[u-1],f[1],f[2],f[3],f[4],f[5],f[6],n)},e.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",nh.pathToCurve(t))},e.prototype._setTcache=function(){var t=0,r=0,n=[],a,o,s,u,f=this.get("curve");if(f){if((0,l.each)(f,function(c,d){s=f[d+1],u=c.length,s&&(t+=Zt.length(c[u-2],c[u-1],s[1],s[2],s[3],s[4],s[5],s[6])||0)}),this.set("totalLength",t),t===0){this.set("tCache",[]);return}(0,l.each)(f,function(c,d){s=f[d+1],u=c.length,s&&(a=[],a[0]=r/t,o=Zt.length(c[u-2],c[u-1],s[1],s[2],s[3],s[4],s[5],s[6]),r+=o||0,a[1]=r/t,n.push(a))}),this.set("tCache",n)}},e.prototype.getStartTangent=function(){var t=this.getSegments(),r;if(t.length>1){var n=t[0].currentPoint,a=t[1].currentPoint,o=t[1].startTangent;r=[],o?(r.push([n[0]-o[0],n[1]-o[1]]),r.push([n[0],n[1]])):(r.push([a[0],a[1]]),r.push([n[0],n[1]]))}return r},e.prototype.getEndTangent=function(){var t=this.getSegments(),r=t.length,n;if(r>1){var a=t[r-2].currentPoint,o=t[r-1].currentPoint,s=t[r-1].endTangent;n=[],s?(n.push([o[0]-s[0],o[1]-s[1]]),n.push([o[0],o[1]])):(n.push([a[0],a[1]]),n.push([o[0],o[1]]))}return n},e}(nf),tv=Dy;function Fp(i,e,t,r,n){var a=i.length;if(a<2)return!1;for(var o=0;o<a-1;o++){var s=i[o][0],u=i[o][1],f=i[o+1][0],c=i[o+1][1];if(Gc(s,u,f,c,e,t,r))return!0}if(n){var d=i[0],A=i[a-1];if(Gc(d[0],d[1],A[0],A[1],e,t,r))return!0}return!1}var Py=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr().points,u=!1;return n&&(u=Fp(s,o,t,r,!0)),!u&&a&&(u=kp(s,t,r)),u},e.prototype.createPath=function(t){var r=this.attr(),n=r.points;if(!(n.length<2)){t.beginPath();for(var a=0;a<n.length;a++){var o=n[a];a===0?t.moveTo(o[0],o[1]):t.lineTo(o[0],o[1])}t.closePath()}},e}(nf),Ly=Py,Ny=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),this.setArrow(),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.setArrow=function(){var t=this.attr(),r=this.attrs,n=r.points,a=r.startArrow,o=r.endArrow,s=n.length,u=n[0][0],f=n[0][1],c=n[s-1][0],d=n[s-1][1];a&&Zh(this,t,n[1][0],n[1][1],u,f),o&&Kh(this,t,n[s-2][0],n[s-2][1],c,d)},e.prototype.isFill=function(){return!1},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){if(!n||!o)return!1;var s=this.attr().points;return Fp(s,o,t,r,!1)},e.prototype.isStroke=function(){return!0},e.prototype.createPath=function(t){var r=this.attr(),n=r.points,a=r.startArrow,o=r.endArrow,s=n.length;if(!(n.length<2)){var u=n[0][0],f=n[0][1],c=n[s-1][0],d=n[s-1][1];if(a&&a.d){var A=Tl(u,f,n[1][0],n[1][1],a.d);u+=A.dx,f+=A.dy}if(o&&o.d){var A=Tl(n[s-2][0],n[s-2][1],c,d,o.d);c-=A.dx,d-=A.dy}t.beginPath(),t.moveTo(u,f);for(var D=0;D<s-1;D++){var z=n[D];t.lineTo(z[0],z[1])}t.lineTo(c,d)}},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr().points,r=this.get("totalLength");return(0,l.isNil)(r)?(this.set("totalLength",Ji.length(t)),this.get("totalLength")):r},e.prototype.getPoint=function(t){var r=this.attr().points,n=this.get("tCache");n||(this._setTcache(),n=this.get("tCache"));var a,o;return(0,l.each)(n,function(s,u){t>=s[0]&&t<=s[1]&&(a=(t-s[0])/(s[1]-s[0]),o=u)}),Br.pointAt(r[o][0],r[o][1],r[o+1][0],r[o+1][1],a)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var r=this.getTotalLength();if(!(r<=0)){var n=0,a=[],o,s;(0,l.each)(t,function(u,f){t[f+1]&&(o=[],o[0]=n/r,s=Br.length(u[0],u[1],t[f+1][0],t[f+1][1]),n+=s,o[1]=n/r,a.push(o))}),this.set("tCache",a)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,r=[];return r.push([t[1][0],t[1][1]]),r.push([t[0][0],t[0][1]]),r},e.prototype.getEndTangent=function(){var t=this.attr().points,r=t.length-1,n=[];return n.push([t[r-1][0],t[r-1][1]]),n.push([t[r][0],t[r][1]]),n},e}(nf),Ry=Ny;function ky(i,e,t,r,n,a,o){var s=n/2;return Cl(i-s,e-s,t,n,a,o)||Cl(i+t-s,e-s,n,r,a,o)||Cl(i+s,e+r-s,t,n,a,o)||Cl(i-s,e+s,n,r,a,o)}function By(i,e,t,r,n,a,o,s){var u=a/2;return Gc(i+n,e,i+t-n,e,a,o,s)||Gc(i+t,e+n,i+t,e+r-n,a,o,s)||Gc(i+t-n,e+r,i+n,e+r,a,o,s)||Gc(i,e+r-n,i,e+n,a,o,s)||Sd(i+t-n,e+n,n,1.5*Math.PI,2*Math.PI,a,o,s)||Sd(i+t-n,e+r-n,n,0,.5*Math.PI,a,o,s)||Sd(i+n,e+r-n,n,.5*Math.PI,Math.PI,a,o,s)||Sd(i+n,e+n,n,Math.PI,1.5*Math.PI,a,o,s)}var Fy=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr(),u=s.x,f=s.y,c=s.width,d=s.height,A=s.radius;if(A){var z=!1;return n&&(z=By(u,f,c,d,A,o,t,r)),!z&&a&&(z=Rp(this,t,r)),z}else{var D=o/2;if(a&&n)return Cl(u-D,f-D,c+D,d+D,t,r);if(a)return Cl(u,f,c,d,t,r);if(n)return ky(u,f,c,d,o,t,r)}},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,a=r.y,o=r.width,s=r.height,u=r.radius;if(t.beginPath(),u===0)t.rect(n,a,o,s);else{var f=oy(u),c=f[0],d=f[1],A=f[2],D=f[3];t.moveTo(n+c,a),t.lineTo(n+o-d,a),d!==0&&t.arc(n+o-d,a+d,d,-Math.PI/2,0),t.lineTo(n+o,a+s-A),A!==0&&t.arc(n+o-A,a+s-A,A,0,Math.PI/2),t.lineTo(n+D,a+s),D!==0&&t.arc(n+D,a+s-D,D,Math.PI/2,Math.PI),t.lineTo(n,a+c),c!==0&&t.arc(n+c,a+c,c,Math.PI,Math.PI*1.5),t.closePath()}},e}(nf),zy=Fy,Gy=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.isOnlyHitBox=function(){return!0},e.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},e.prototype._assembleFont=function(){var t=this.attrs;t.font=Pi(t)},e.prototype._setText=function(t){var r=null;(0,l.isString)(t)&&t.indexOf(`
`)!==-1&&(r=t.split(`
`)),this.set("textArr",r)},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),t.startsWith("font")&&this._assembleFont(),t==="text"&&this._setText(r)},e.prototype._getSpaceingY=function(){var t=this.attrs,r=t.lineHeight,n=t.fontSize*1;return r?r-n:n*.14},e.prototype._drawTextArr=function(t,r,n){var a=this.attrs,o=a.textBaseline,s=a.x,u=a.y,f=a.fontSize*1,c=this._getSpaceingY(),d=Ko(a.text,a.fontSize,a.lineHeight),A;(0,l.each)(r,function(D,z){A=u+z*(c+f)-d+f,o==="middle"&&(A+=d-f-(d-f)/2),o==="top"&&(A+=d-f),(0,l.isNil)(D)||(n?t.fillText(D,s,A):t.strokeText(D,s,A))})},e.prototype._drawText=function(t,r){var n=this.attr(),a=n.x,o=n.y,s=this.get("textArr");if(s)this._drawTextArr(t,s,r);else{var u=n.text;(0,l.isNil)(u)||(r?t.fillText(u,a,o):t.strokeText(u,a,o))}},e.prototype.strokeAndFill=function(t){var r=this.attrs,n=r.lineWidth,a=r.opacity,o=r.strokeOpacity,s=r.fillOpacity;this.isStroke()&&n>0&&(!(0,l.isNil)(o)&&o!==1&&(t.globalAlpha=a),this.stroke(t)),this.isFill()&&(!(0,l.isNil)(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=a):this.fill(t)),this.afterDrawPath(t)},e.prototype.fill=function(t){this._drawText(t,!0)},e.prototype.stroke=function(t){this._drawText(t,!1)},e}(nf),Uy=Gy;function Wy(i,e){if(e){var t=jt(e);return It(t,i)}return i}function zp(i,e,t){var r=i.getTotalMatrix();if(r){var n=Wy([e,t,1],r),a=n[0],o=n[1];return[a,o]}return[e,t]}function Gp(i,e,t){if(i.isCanvas&&i.isCanvas())return!0;if(!kf(i)||i.cfg.isInView===!1)return!1;if(i.cfg.clipShape){var r=zp(i,e,t),n=r[0],a=r[1];if(i.isClipped(n,a))return!1}var o=i.cfg.cacheCanvasBBox||i.getCanvasBBox();return e>=o.minX&&e<=o.maxX&&t>=o.minY&&t<=o.maxY}function Up(i,e,t){if(!Gp(i,e,t))return null;for(var r=null,n=i.getChildren(),a=n.length,o=a-1;o>=0;o--){var s=n[o];if(s.isGroup())r=Up(s,e,t);else if(Gp(s,e,t)){var u=s,f=zp(s,e,t),c=f[0],d=f[1];u.isInShape(c,d)&&(r=s)}if(r)break}return r}var Yy=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},e.prototype.onCanvasChange=function(t){(t==="attr"||t==="sort"||t==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},e.prototype.getShapeBase=function(){return x},e.prototype.getGroupBase=function(){return Lp},e.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||qm();return t>=1?Math.ceil(t):1},e.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},e.prototype.createDom=function(){var t=document.createElement("canvas"),r=t.getContext("2d");return this.set("context",r),t},e.prototype.setDOMSize=function(t,r){i.prototype.setDOMSize.call(this,t,r);var n=this.get("context"),a=this.get("el"),o=this.getPixelRatio();a.width=o*t,a.height=o*r,o>1&&n.scale(o,o)},e.prototype.clear=function(){i.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),r=this.get("el");t.clearRect(0,0,r.width,r.height)},e.prototype.getShape=function(t,r){var n;return this.get("quickHit")?n=Up(this,t,r):n=i.prototype.getShape.call(this,t,r,null),n},e.prototype._getRefreshRegion=function(){var t=this.get("refreshElements"),r=this.getViewRange(),n;if(t.length&&t[0]===this)n=r;else if(n=cy(t),n){n.minX=Math.floor(n.minX),n.minY=Math.floor(n.minY),n.maxX=Math.ceil(n.maxX),n.maxY=Math.ceil(n.maxY),n.maxY+=1;var a=this.get("clipView");a&&(n=ly(n,r))}return n},e.prototype.refreshElement=function(t){var r=this.get("refreshElements");r.push(t)},e.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&((0,l.clearAnimationFrame)(t),this.set("drawFrame",null),this.set("refreshElements",[]))},e.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},e.prototype._drawAll=function(){var t=this.get("context"),r=this.get("el"),n=this.getChildren();t.clearRect(0,0,r.width,r.height),fd(t,this),$h(t,n),this.set("refreshElements",[])},e.prototype._drawRegion=function(){var t=this.get("context"),r=this.get("refreshElements"),n=this.getChildren(),a=this._getRefreshRegion();a?(t.clearRect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),t.save(),t.beginPath(),t.rect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),t.clip(),fd(t,this),sy(this,n,a),$h(t,n,a),t.restore()):r.length&&Ip(r),(0,l.each)(r,function(o){o.get("hasChanged")&&o.set("hasChanged",!1)}),this.set("refreshElements",[])},e.prototype._startDraw=function(){var t=this,r=this.get("drawFrame");r||(r=(0,l.requestAnimationFrame)(function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)}),this.set("drawFrame",r))},e.prototype.skipDraw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)},e}(id),dc=Yy,JS="0.5.12",ev={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},Ui={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},tM=null;function Fu(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function Wp(i){var e=ev[i.type],t=i.getParent();if(!e)throw new Error("the type "+i.type+" is not supported by svg");var r=Fu(e);if(i.get("id")&&(r.id=i.get("id")),i.set("el",r),i.set("attrs",{}),t){var n=t.get("el");n||(n=t.createDom(),t.set("el",n)),n.appendChild(r)}return r}function Yp(i,e){var t=i.get("el"),r=(0,l.toArray)(t.children).sort(e),n=document.createDocumentFragment();r.forEach(function(a){n.appendChild(a)}),t.appendChild(n)}function Xy(i,e){var t=i.parentNode,r=Array.from(t.childNodes).filter(function(s){return s.nodeType===1&&s.nodeName.toLowerCase()!=="defs"}),n=r[e],a=r.indexOf(i);if(n){if(a>e)t.insertBefore(i,n);else if(a<e){var o=r[e+1];o?t.insertBefore(i,o):t.appendChild(i)}}else t.appendChild(i)}function jy(i,e){var t=i.cfg.el,r=i.attr(),n={dx:r.shadowOffsetX,dy:r.shadowOffsetY,blur:r.shadowBlur,color:r.shadowColor};if(!n.dx&&!n.dy&&!n.blur&&!n.color)t.removeAttribute("filter");else{var a=e.find("filter",n);a||(a=e.addShadow(n)),t.setAttribute("filter","url(#"+a+")")}}function Md(i){var e=i.attr().matrix;if(e){for(var t=i.cfg.el,r=[],n=0;n<9;n+=3)r.push(e[n]+","+e[n+1]);r=r.join(","),r.indexOf("NaN")===-1?t.setAttribute("transform","matrix("+r+")"):console.warn("invalid matrix:",e)}}function _d(i,e){var t=i.getClip(),r=i.get("el");if(!t)r.removeAttribute("clip-path");else if(t&&!r.hasAttribute("clip-path")){Wp(t),t.createPath(e);var n=e.addClip(t);r.setAttribute("clip-path","url(#"+n+")")}}function Xp(i,e){e.forEach(function(t){t.draw(i)})}function jp(i,e){var t=i.get("canvas");if(t&&t.get("autoDraw")){var r=t.get("context"),n=i.getParent(),a=n?n.getChildren():[t],o=i.get("el");if(e==="remove"){var s=i.get("isClipShape");if(s){var u=o&&o.parentNode,f=u&&u.parentNode;u&&f&&f.removeChild(u)}else o&&o.parentNode&&o.parentNode.removeChild(o)}else if(e==="show")o.setAttribute("visibility","visible");else if(e==="hide")o.setAttribute("visibility","hidden");else if(e==="zIndex")Xy(o,a.indexOf(i));else if(e==="sort"){var c=i.get("children");c&&c.length&&Yp(i,function(d,A){return c.indexOf(d)-c.indexOf(A)?1:0})}else e==="clear"?o&&(o.innerHTML=""):e==="matrix"?Md(i):e==="clip"?_d(i,r):e==="attr"||e==="add"&&i.draw(r)}}var Vy=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isEntityGroup=function(){return!0},e.prototype.createDom=function(){var t=Fu("g");this.set("el",t);var r=this.getParent();if(r){var n=r.get("el");n||(n=r.createDom(),r.set("el",n)),n.appendChild(t)}return t},e.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t);var r=this.get("canvas");if(r&&r.get("autoDraw")){var n=r.get("context");this.createPath(n,t)}},e.prototype.onCanvasChange=function(t){jp(this,t)},e.prototype.getShapeBase=function(){return g},e.prototype.getGroupBase=function(){return e},e.prototype.draw=function(t){var r=this.getChildren(),n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||this.createDom(),_d(this,t),this.createPath(t),r.length&&Xp(t,r))},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,l.each)(r||n,function(o,s){Ui[s]&&a.setAttribute(Ui[s],o)}),Md(this)},e}(xl),Vp=Vy,Hy=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="svg",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t);var r=this.get("canvas");if(r&&r.get("autoDraw")){var n=r.get("context");this.draw(n,t)}},e.prototype.getShapeBase=function(){return g},e.prototype.getGroupBase=function(){return Vp},e.prototype.onCanvasChange=function(t){jp(this,t)},e.prototype.calculateBBox=function(){var t=this.get("el"),r=null;if(t)r=t.getBBox();else{var n=Sl(this.get("type"));n&&(r=n(this))}if(r){var a=r.x,o=r.y,s=r.width,u=r.height,f=this.getHitLineWidth(),c=f/2,d=a-c,A=o-c,D=a+s+c,z=o+u+c;return{x:d,y:A,minX:d,minY:A,maxX:D,maxY:z,width:s+f,height:u+f}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},e.prototype.isFill=function(){var t=this.attr(),r=t.fill,n=t.fillStyle;return(r||n||this.isClipShape())&&this.canFill},e.prototype.isStroke=function(){var t=this.attr(),r=t.stroke,n=t.strokeStyle;return(r||n)&&this.canStroke},e.prototype.draw=function(t,r){var n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||Wp(this),_d(this,t),this.createPath(t,r),this.shadow(t,r),this.strokeAndFill(t,r),this.transform(r))},e.prototype.createPath=function(t,r){},e.prototype.strokeAndFill=function(t,r){var n=r||this.attr(),a=n.fill,o=n.fillStyle,s=n.stroke,u=n.strokeStyle,f=n.fillOpacity,c=n.strokeOpacity,d=n.lineWidth,A=this.get("el");this.canFill&&(r?"fill"in n?this._setColor(t,"fill",a):"fillStyle"in n&&this._setColor(t,"fill",o):this._setColor(t,"fill",a||o),f&&A.setAttribute(Ui.fillOpacity,f)),this.canStroke&&d>0&&(r?"stroke"in n?this._setColor(t,"stroke",s):"strokeStyle"in n&&this._setColor(t,"stroke",u):this._setColor(t,"stroke",s||u),c&&A.setAttribute(Ui.strokeOpacity,c),d&&A.setAttribute(Ui.lineWidth,d))},e.prototype._setColor=function(t,r,n){var a=this.get("el");if(!n){a.setAttribute(Ui[r],"none");return}if(n=n.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(n)){var o=t.find("gradient",n);o||(o=t.addGradient(n)),a.setAttribute(Ui[r],"url(#"+o+")")}else if(/^[p,P]{1}[\s]*\(/.test(n)){var o=t.find("pattern",n);o||(o=t.addPattern(n)),a.setAttribute(Ui[r],"url(#"+o+")")}else a.setAttribute(Ui[r],n)},e.prototype.shadow=function(t,r){var n=this.attr(),a=r||n,o=a.shadowOffsetX,s=a.shadowOffsetY,u=a.shadowBlur,f=a.shadowColor;(o||s||u||f)&&jy(this,t)},e.prototype.transform=function(t){var r=this.attr(),n=(t||r).matrix;n&&Md(this)},e.prototype.isInShape=function(t,r){return this.isPointInPath(t,r)},e.prototype.isPointInPath=function(t,r){var n=this.get("el"),a=this.get("canvas"),o=a.get("el").getBoundingClientRect(),s=t+o.left,u=r+o.top,f=document.elementFromPoint(s,u);return!!(f&&f.isEqualNode(n))},e.prototype.getHitLineWidth=function(){var t=this.attrs,r=t.lineWidth,n=t.lineAppendWidth;return this.isStroke()?r+n:0},e}(sc),zu=Hy,Zy=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="circle",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x:0,y:0,r:0})},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,l.each)(r||n,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):Ui[s]&&a.setAttribute(Ui[s],o)})},e}(zu),Ky=Zy,$y=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="dom",t.canFill=!1,t.canStroke=!1,t}return e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");if((0,l.each)(r||n,function(f,c){Ui[c]&&a.setAttribute(Ui[c],f)}),typeof n.html=="function"){var o=n.html.call(this,n);if(o instanceof Element||o instanceof HTMLDocument){for(var s=a.childNodes,u=s.length-1;u>=0;u--)a.removeChild(s[u]);a.appendChild(o)}else a.innerHTML=o}else a.innerHTML=n.html},e}(zu),qy=$y,Qy=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="ellipse",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,l.each)(r||n,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):Ui[s]&&a.setAttribute(Ui[s],o)})},e}(zu),Jy=Qy,t1=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="image",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x:0,y:0,width:0,height:0})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el");(0,l.each)(r||a,function(s,u){u==="img"?n._setImage(a.img):Ui[u]&&o.setAttribute(Ui[u],s)})},e.prototype.setAttr=function(t,r){this.attrs[t]=r,t==="img"&&this._setImage(r)},e.prototype._setImage=function(t){var r=this.attr(),n=this.get("el");if((0,l.isString)(t))n.setAttribute("href",t);else if(t instanceof window.Image)r.width||(n.setAttribute("width",t.width),this.attr("width",t.width)),r.height||(n.setAttribute("height",t.height),this.attr("height",t.height)),n.setAttribute("href",t.src);else if(t instanceof HTMLElement&&(0,l.isString)(t.nodeName)&&t.nodeName.toUpperCase()==="CANVAS")n.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var a=document.createElement("canvas");a.setAttribute("width",""+t.width),a.setAttribute("height",""+t.height),a.getContext("2d").putImageData(t,0,0),r.width||(n.setAttribute("width",""+t.width),this.attr("width",t.width)),r.height||(n.setAttribute("height",""+t.height),this.attr("height",t.height)),n.setAttribute("href",a.toDataURL())}},e}(zu),e1=t1,r1=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="line",t.canFill=!1,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,l.each)(r||n,function(o,s){if(s==="startArrow"||s==="endArrow")if(o){var u=(0,l.isObject)(o)?t.addArrow(n,Ui[s]):t.getDefaultArrow(n,Ui[s]);a.setAttribute(Ui[s],"url(#"+u+")")}else a.removeAttribute(Ui[s]);else Ui[s]&&a.setAttribute(Ui[s],o)})},e.prototype.getTotalLength=function(){var t=this.attr(),r=t.x1,n=t.y1,a=t.x2,o=t.y2;return Br.length(r,n,a,o)},e.prototype.getPoint=function(t){var r=this.attr(),n=r.x1,a=r.y1,o=r.x2,s=r.y2;return Br.pointAt(n,a,o,s,t)},e}(zu),n1=r1,ah={circle:function(i,e,t){return[["M",i,e],["m",-t,0],["a",t,t,0,1,0,t*2,0],["a",t,t,0,1,0,-t*2,0]]},square:function(i,e,t){return[["M",i-t,e-t],["L",i+t,e-t],["L",i+t,e+t],["L",i-t,e+t],["Z"]]},diamond:function(i,e,t){return[["M",i-t,e],["L",i,e-t],["L",i+t,e],["L",i,e+t],["Z"]]},triangle:function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e+r],["L",i,e-r],["L",i+t,e+r],["z"]]},triangleDown:function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e-r],["L",i+t,e-r],["L",i,e+r],["Z"]]}},Hp={get:function(i){return ah[i]},register:function(i,e){ah[i]=e},remove:function(i){delete ah[i]},getAll:function(){return ah}},a1=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="marker",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t){var r=this.get("el");r.setAttribute("d",this._assembleMarker())},e.prototype._assembleMarker=function(){var t=this._getPath();return(0,l.isArray)(t)?t.map(function(r){return r.join(" ")}).join(""):t},e.prototype._getPath=function(){var t=this.attr(),r=t.x,n=t.y,a=t.r||t.radius,o=t.symbol||"circle",s;return(0,l.isFunction)(o)?s=o:s=Hp.get(o),s?s(r,n,a):(console.warn(s+" symbol is not exist."),null)},e.symbolsFactory=Hp,e}(zu),i1=a1,o1=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="path",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el");(0,l.each)(r||a,function(s,u){if(u==="path"&&(0,l.isArray)(s))o.setAttribute("d",n._formatPath(s));else if(u==="startArrow"||u==="endArrow")if(s){var f=(0,l.isObject)(s)?t.addArrow(a,Ui[u]):t.getDefaultArrow(a,Ui[u]);o.setAttribute(Ui[u],"url(#"+f+")")}else o.removeAttribute(Ui[u]);else Ui[u]&&o.setAttribute(Ui[u],s)})},e.prototype._formatPath=function(t){var r=t.map(function(n){return n.join(" ")}).join("");return~r.indexOf("NaN")?"":r},e.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},e.prototype.getPoint=function(t){var r=this.get("el"),n=this.getTotalLength();if(n===0)return null;var a=r?r.getPointAtLength(t*n):null;return a?{x:a.x,y:a.y}:null},e}(zu),s1=o1,u1=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="polygon",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,l.each)(r||n,function(o,s){s==="points"&&(0,l.isArray)(o)&&o.length>=2?a.setAttribute("points",o.map(function(u){return u[0]+","+u[1]}).join(" ")):Ui[s]&&a.setAttribute(Ui[s],o)})},e}(zu),f1=u1,c1=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="polyline",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,l.each)(r||n,function(o,s){s==="points"&&(0,l.isArray)(o)&&o.length>=2?a.setAttribute("points",o.map(function(u){return u[0]+","+u[1]}).join(" ")):Ui[s]&&a.setAttribute(Ui[s],o)})},e.prototype.getTotalLength=function(){var t=this.attr().points,r=this.get("totalLength");return(0,l.isNil)(r)?(this.set("totalLength",Ji.length(t)),this.get("totalLength")):r},e.prototype.getPoint=function(t){var r=this.attr().points,n=this.get("tCache");n||(this._setTcache(),n=this.get("tCache"));var a,o;return(0,l.each)(n,function(s,u){t>=s[0]&&t<=s[1]&&(a=(t-s[0])/(s[1]-s[0]),o=u)}),Br.pointAt(r[o][0],r[o][1],r[o+1][0],r[o+1][1],a)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var r=this.getTotalLength();if(!(r<=0)){var n=0,a=[],o,s;(0,l.each)(t,function(u,f){t[f+1]&&(o=[],o[0]=n/r,s=Br.length(u[0],u[1],t[f+1][0],t[f+1][1]),n+=s,o[1]=n/r,a.push(o))}),this.set("tCache",a)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,r=[];return r.push([t[1][0],t[1][1]]),r.push([t[0][0],t[0][1]]),r},e.prototype.getEndTangent=function(){var t=this.attr().points,r=t.length-1,n=[];return n.push([t[r-1][0],t[r-1][1]]),n.push([t[r][0],t[r][1]]),n},e}(zu),l1=c1,d1=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,h1=/[^\s,]+/gi;function v1(i){var e=0,t=0,r=0,n=0;return(0,l.isArray)(i)?i.length===1?e=t=r=n=i[0]:i.length===2?(e=r=i[0],t=n=i[1]):i.length===3?(e=i[0],t=n=i[1],r=i[2]):(e=i[0],t=i[1],r=i[2],n=i[3]):e=t=r=n=i,{r1:e,r2:t,r3:r,r4:n}}function eM(i){if(i=i||[],isArray(i))return i;if(isString(i))return i=i.match(d1),each(i,function(e,t){if(e=e.match(h1),e[0].length>1){var r=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=r}each(e,function(n,a){isNaN(n)||(e[a]=+n)}),i[t]=e}),i}var p1=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="rect",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el"),s=!1,u=["x","y","width","height","radius"];(0,l.each)(r||a,function(f,c){u.indexOf(c)!==-1&&!s?(o.setAttribute("d",n._assembleRect(a)),s=!0):u.indexOf(c)===-1&&Ui[c]&&o.setAttribute(Ui[c],f)})},e.prototype._assembleRect=function(t){var r=t.x,n=t.y,a=t.width,o=t.height,s=t.radius;if(!s)return"M "+r+","+n+" l "+a+",0 l 0,"+o+" l"+-a+" 0 z";var u=v1(s);(0,l.isArray)(s)?s.length===1?u.r1=u.r2=u.r3=u.r4=s[0]:s.length===2?(u.r1=u.r3=s[0],u.r2=u.r4=s[1]):s.length===3?(u.r1=s[0],u.r2=u.r4=s[1],u.r3=s[2]):(u.r1=s[0],u.r2=s[1],u.r3=s[2],u.r4=s[3]):u.r1=u.r2=u.r3=u.r4=s;var f=[["M "+(r+u.r1)+","+n],["l "+(a-u.r1-u.r2)+",0"],["a "+u.r2+","+u.r2+",0,0,1,"+u.r2+","+u.r2],["l 0,"+(o-u.r2-u.r3)],["a "+u.r3+","+u.r3+",0,0,1,"+-u.r3+","+u.r3],["l "+(u.r3+u.r4-a)+",0"],["a "+u.r4+","+u.r4+",0,0,1,"+-u.r4+","+-u.r4],["l 0,"+(u.r4+u.r1-o)],["a "+u.r1+","+u.r1+",0,0,1,"+u.r1+","+-u.r1],["z"]];return f.join(" ")},e}(zu),g1=p1,Zp=.3,m1={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},y1={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},b1={left:"left",start:"left",center:"middle",right:"end",end:"end"},x1=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="text",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el");this._setFont(),(0,l.each)(r||a,function(s,u){u==="text"?n._setText(""+s):u==="matrix"&&s?Md(n):Ui[u]&&o.setAttribute(Ui[u],s)}),o.setAttribute("paint-order","stroke"),o.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},e.prototype._setFont=function(){var t=this.get("el"),r=this.attr(),n=r.textBaseline,a=r.textAlign,o=nu();o&&o.name==="firefox"?t.setAttribute("dominant-baseline",y1[n]||"alphabetic"):t.setAttribute("alignment-baseline",m1[n]||"baseline"),t.setAttribute("text-anchor",b1[a]||"left")},e.prototype._setText=function(t){var r=this.get("el"),n=this.attr(),a=n.x,o=n.textBaseline,s=o===void 0?"bottom":o;if(!t)r.innerHTML="";else if(~t.indexOf(`
`)){var u=t.split(`
`),f=u.length-1,c="";(0,l.each)(u,function(d,A){A===0?s==="alphabetic"?c+='<tspan x="'+a+'" dy="'+-f+'em">'+d+"</tspan>":s==="top"?c+='<tspan x="'+a+'" dy="0.9em">'+d+"</tspan>":s==="middle"?c+='<tspan x="'+a+'" dy="'+-(f-1)/2+'em">'+d+"</tspan>":s==="bottom"?c+='<tspan x="'+a+'" dy="-'+(f+Zp)+'em">'+d+"</tspan>":s==="hanging"&&(c+='<tspan x="'+a+'" dy="'+(-(f-1)-Zp)+'em">'+d+"</tspan>"):c+='<tspan x="'+a+'" dy="1em">'+d+"</tspan>"}),r.innerHTML=c}else r.innerHTML=t},e}(zu),E1=x1,w1=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,S1=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,M1=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function Kp(i){var e=i.match(M1);if(!e)return"";var t="";return e.sort(function(r,n){return r=r.split(":"),n=n.split(":"),Number(r[0])-Number(n[0])}),(0,l.each)(e,function(r){r=r.split(":"),t+='<stop offset="'+r[0]+'" stop-color="'+r[1]+'"></stop>'}),t}function _1(i,e){var t=w1.exec(i),r=(0,l.mod)((0,l.toRadian)(parseFloat(t[1])),Math.PI*2),n=t[2],a,o;r>=0&&r<.5*Math.PI?(a={x:0,y:0},o={x:1,y:1}):.5*Math.PI<=r&&r<Math.PI?(a={x:1,y:0},o={x:0,y:1}):Math.PI<=r&&r<1.5*Math.PI?(a={x:1,y:1},o={x:0,y:0}):(a={x:0,y:1},o={x:1,y:0});var s=Math.tan(r),u=s*s,f=(o.x-a.x+s*(o.y-a.y))/(u+1)+a.x,c=s*(o.x-a.x+s*(o.y-a.y))/(u+1)+a.y;e.setAttribute("x1",a.x),e.setAttribute("y1",a.y),e.setAttribute("x2",f),e.setAttribute("y2",c),e.innerHTML=Kp(n)}function C1(i,e){var t=S1.exec(i),r=parseFloat(t[1]),n=parseFloat(t[2]),a=parseFloat(t[3]),o=t[4];e.setAttribute("cx",r),e.setAttribute("cy",n),e.setAttribute("r",a),e.innerHTML=Kp(o)}var T1=function(){function i(e){this.cfg={};var t=null,r=(0,l.uniqueId)("gradient_");return e.toLowerCase()[0]==="l"?(t=Fu("linearGradient"),_1(e,t)):(t=Fu("radialGradient"),C1(e,t)),t.setAttribute("id",r),this.el=t,this.id=r,this.cfg=e,this}return i.prototype.match=function(e,t){return this.cfg===t},i}(),A1=T1,O1={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},I1={x:"-40%",y:"-40%",width:"200%",height:"200%"},D1=function(){function i(e){this.type="filter",this.cfg={},this.type="filter";var t=Fu("filter");return(0,l.each)(I1,function(r,n){t.setAttribute(n,r)}),this.el=t,this.id=(0,l.uniqueId)("filter_"),this.el.id=this.id,this.cfg=e,this._parseShadow(e,t),this}return i.prototype.match=function(e,t){if(this.type!==e)return!1;var r=!0,n=this.cfg;return(0,l.each)(Object.keys(n),function(a){if(n[a]!==t[a])return r=!1,!1}),r},i.prototype.update=function(e,t){var r=this.cfg;return r[O1[e]]=t,this._parseShadow(r,this.el),this},i.prototype._parseShadow=function(e,t){var r=`<feDropShadow
      dx="`+(e.dx||0)+`"
      dy="`+(e.dy||0)+`"
      stdDeviation="`+(e.blur?e.blur/10:0)+`"
      flood-color="`+(e.color?e.color:"#000")+`"
      flood-opacity="`+(e.opacity?e.opacity:1)+`"
      />`;t.innerHTML=r},i}(),P1=D1,L1=function(){function i(e,t){this.cfg={};var r=Fu("marker"),n=(0,l.uniqueId)("marker_");r.setAttribute("id",n);var a=Fu("path");a.setAttribute("stroke",e.stroke||"none"),a.setAttribute("fill",e.fill||"none"),r.appendChild(a),r.setAttribute("overflow","visible"),r.setAttribute("orient","auto-start-reverse"),this.el=r,this.child=a,this.id=n;var o=e[t==="marker-start"?"startArrow":"endArrow"];return this.stroke=e.stroke||"#000",o===!0?this._setDefaultPath(t,a):(this.cfg=o,this._setMarker(e.lineWidth,a)),this}return i.prototype.match=function(){return!1},i.prototype._setDefaultPath=function(e,t){var r=this.el;t.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),r.setAttribute("refX",""+10*Math.cos(Math.PI/6)),r.setAttribute("refY","5")},i.prototype._setMarker=function(e,t){var r=this.el,n=this.cfg.path,a=this.cfg.d;(0,l.isArray)(n)&&(n=n.map(function(o){return o.join(" ")}).join("")),t.setAttribute("d",n),r.appendChild(t),a&&r.setAttribute("refX",""+a/e)},i.prototype.update=function(e){var t=this.child;t.attr?t.attr("fill",e):t.setAttribute("fill",e)},i}(),$p=L1,N1=function(){function i(e){this.type="clip",this.cfg={};var t=Fu("clipPath");this.el=t,this.id=(0,l.uniqueId)("clip_"),t.id=this.id;var r=e.cfg.el;return t.appendChild(r),this.cfg=e,this}return i.prototype.match=function(){return!1},i.prototype.remove=function(){var e=this.el;e.parentNode.removeChild(e)},i}(),R1=N1,k1=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,B1=function(){function i(e){this.cfg={};var t=Fu("pattern");t.setAttribute("patternUnits","userSpaceOnUse");var r=Fu("image");t.appendChild(r);var n=(0,l.uniqueId)("pattern_");t.id=n,this.el=t,this.id=n,this.cfg=e;var a=k1.exec(e),o=a[2];r.setAttribute("href",o);var s=new Image;o.match(/^data:/i)||(s.crossOrigin="Anonymous"),s.src=o;function u(){t.setAttribute("width",""+s.width),t.setAttribute("height",""+s.height)}return s.complete?u():(s.onload=u,s.src=s.src),this}return i.prototype.match=function(e,t){return this.cfg===t},i}(),F1=B1,z1=function(){function i(e){var t=Fu("defs"),r=(0,l.uniqueId)("defs_");t.id=r,e.appendChild(t),this.children=[],this.defaultArrow={},this.el=t,this.canvas=e}return i.prototype.find=function(e,t){for(var r=this.children,n=null,a=0;a<r.length;a++)if(r[a].match(e,t)){n=r[a].id;break}return n},i.prototype.findById=function(e){for(var t=this.children,r=null,n=0;n<t.length;n++)if(t[n].id===e){r=t[n];break}return r},i.prototype.add=function(e){this.children.push(e),e.canvas=this.canvas,e.parent=this},i.prototype.getDefaultArrow=function(e,t){var r=e.stroke||e.strokeStyle;if(this.defaultArrow[r])return this.defaultArrow[r].id;var n=new $p(e,t);return this.defaultArrow[r]=n,this.el.appendChild(n.el),this.add(n),n.id},i.prototype.addGradient=function(e){var t=new A1(e);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addArrow=function(e,t){var r=new $p(e,t);return this.el.appendChild(r.el),this.add(r),r.id},i.prototype.addShadow=function(e){var t=new P1(e);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addPattern=function(e){var t=new F1(e);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addClip=function(e){var t=new R1(e);return this.el.appendChild(t.el),this.add(t),t.id},i}(),G1=z1,U1=function(i){(0,y.__extends)(e,i);function e(t){return i.call(this,(0,y.__assign)((0,y.__assign)({},t),{autoDraw:!0,renderer:"svg"}))||this}return e.prototype.getShapeBase=function(){return g},e.prototype.getGroupBase=function(){return Vp},e.prototype.getShape=function(t,r,n){var a=n.target||n.srcElement;if(!ev[a.tagName]){for(var o=a.parentNode;o&&!ev[o.tagName];)o=o.parentNode;a=o}return this.find(function(s){return s.get("el")===a})},e.prototype.createDom=function(){var t=Fu("svg"),r=new G1(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",r),t},e.prototype.onCanvasChange=function(t){var r=this.get("context"),n=this.get("el");if(t==="sort"){var a=this.get("children");a&&a.length&&Yp(this,function(s,u){return a.indexOf(s)-a.indexOf(u)?1:0})}else if(t==="clear"){if(n){n.innerHTML="";var o=r.el;o.innerHTML="",n.appendChild(o)}}else t==="matrix"?Md(this):t==="clip"?_d(this,r):t==="changeSize"&&(n.setAttribute("width",""+this.get("width")),n.setAttribute("height",""+this.get("height")))},e.prototype.draw=function(){var t=this.get("context"),r=this.getChildren();_d(this,t),r.length&&Xp(t,r)},e}(id),Cd=U1,rM="0.5.6",W1=_(6767),Td=_.n(W1),ih=_(697234),oh=2,qp=.16,Y1=.05,X1=.05,j1=.15,Qp=5,Jp=4,V1=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function tg(i,e,t){var r;return Math.round(i.h)>=60&&Math.round(i.h)<=240?r=t?Math.round(i.h)-oh*e:Math.round(i.h)+oh*e:r=t?Math.round(i.h)+oh*e:Math.round(i.h)-oh*e,r<0?r+=360:r>=360&&(r-=360),r}function eg(i,e,t){if(i.h===0&&i.s===0)return i.s;var r;return t?r=i.s-qp*e:e===Jp?r=i.s+qp:r=i.s+Y1*e,r>1&&(r=1),t&&e===Qp&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2))}function rg(i,e,t){var r;return t?r=i.v+X1*e:r=i.v-j1*e,r>1&&(r=1),Number(r.toFixed(2))}function sh(i){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=[],r=(0,ih.Z)(i),n=Qp;n>0;n-=1){var a=r.toHsv(),o=(0,ih.Z)({h:tg(a,n,!0),s:eg(a,n,!0),v:rg(a,n,!0)}).toHexString();t.push(o)}t.push(r.toHexString());for(var s=1;s<=Jp;s+=1){var u=r.toHsv(),f=(0,ih.Z)({h:tg(u,s),s:eg(u,s),v:rg(u,s)}).toHexString();t.push(f)}return e.theme==="dark"?V1.map(function(c){var d=c.index,A=c.opacity,D=ih.Z.mix(e.backgroundColor||"#141414",t[d],A*100).toHexString();return D}):t}var rv={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},Zs={},nv={};Object.keys(rv).forEach(function(i){Zs[i]=sh(rv[i]),Zs[i].primary=Zs[i][5],nv[i]=sh(rv[i],{theme:"dark",backgroundColor:"#141414"}),nv[i].primary=nv[i][5]});var nM=Zs.red,aM=Zs.volcano,iM=Zs.gold,oM=Zs.orange,sM=Zs.yellow,uM=Zs.lime,fM=Zs.green,cM=Zs.cyan,lM=Zs.blue,dM=Zs.geekblue,hM=Zs.purple,vM=Zs.magenta,pM=Zs.grey,As=function(e,t,r){var n=Td()(e),a=Td()(t);return Td()([(1-r)*n.red()+r*a.red(),(1-r)*n.green()+r*a.green(),(1-r)*n.blue()+r*a.blue()]).rgb()},H1=function(e,t,r){t===void 0&&(t="#fff"),r===void 0&&(r="rgb(150, 150, 150)");var n=As(t,e,.05).rgb().toString(),a=As(t,e,.1).rgb().toString(),o=As(t,e,.2).rgb().toString(),s=As(t,e,.4).rgb().toString(),u=As(t,r,.02).rgb().toString(),f=As(t,r,.05).rgb().toString(),c=As(t,r,.1).rgb().toString(),d=As(t,r,.2).rgb().toString(),A=As(t,r,.3).rgb().toString(),D=sh(e,{theme:"default",backgroundColor:t}),z=Td()(e).hex().toLowerCase(),Z=D.indexOf(z),rt=e;return Z!==-1&&(rt=D[Z+1]),{mainStroke:e,mainFill:a,activeStroke:e,activeFill:n,inactiveStroke:s,inactiveFill:n,selectedStroke:e,selectedFill:t,highlightStroke:rt,highlightFill:o,disableStroke:A,disableFill:f,edgeMainStroke:A,edgeActiveStroke:e,edgeInactiveStroke:d,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:c,comboMainStroke:A,comboMainFill:u,comboActiveStroke:e,comboActiveFill:n,comboInactiveStroke:A,comboInactiveFill:u,comboSelectedStroke:e,comboSelectedFill:u,comboHighlightStroke:rt,comboHighlightFill:u,comboDisableStroke:d,comboDisableFill:f}},Z1=function(e,t,r){t===void 0&&(t="#fff"),r===void 0&&(r="#777");var n=As(t,e,.2).rgb().toString(),a=As(t,e,.3).rgb().toString(),o=As(t,e,.6).rgb().toString(),s=As(t,e,.8).rgb().toString(),u=As(t,r,.2).rgb().toString(),f=As(t,r,.25).rgb().toString(),c=As(t,r,.3).rgb().toString(),d=As(t,r,.4).rgb().toString(),A=As(t,r,.5).rgb().toString(),D=sh(e,{theme:"dark",backgroundColor:t}),z=Td()(e).hex().toLowerCase(),Z=D.indexOf(z),rt=e;return Z!==-1&&(rt=D[Z+1]),{mainStroke:s,mainFill:n,activeStroke:e,activeFill:a,inactiveStroke:s,inactiveFill:n,selectedStroke:e,selectedFill:n,highlightStroke:e,highlightFill:o,disableStroke:A,disableFill:f,edgeMainStroke:r,edgeActiveStroke:e,edgeInactiveStroke:r,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:c,comboMainStroke:d,comboMainFill:f,comboActiveStroke:e,comboActiveFill:u,comboInactiveStroke:d,comboInactiveFill:f,comboSelectedStroke:e,comboSelectedFill:u,comboHighlightStroke:rt,comboHighlightFill:f,comboDisableStroke:d,comboDisableFill:u}},av=function(e,t,r,n){return t===void 0&&(t="#fff"),r===void 0&&(r="default"),n===void 0&&(n="rgb(150, 150, 150)"),r==="default"?H1(e,t,"rgb(150, 150, 150)"):Z1(e,t,"#777")},K1=function(e,t,r,n){t===void 0&&(t="#fff"),r===void 0&&(r="default"),n===void 0&&(n="rgb(150, 150, 150)");var a=[];return e.forEach(function(o){a.push(av(o,t,r,n))}),a},$1="rgb(95, 149, 255)",q1="rgb(255, 255, 255)",ng="rgb(0, 0, 0)",Li=av($1,q1),Al={version:"0.8.15",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:Li.mainStroke,fill:Li.mainFill},size:20,color:Li.mainStroke,linkPoints:{size:8,lineWidth:1,fill:Li.activeFill,stroke:Li.activeStroke}},nodeStateStyles:{active:{fill:Li.activeFill,stroke:Li.activeStroke,lineWidth:2,shadowColor:Li.mainStroke,shadowBlur:10},selected:{fill:Li.selectedFill,stroke:Li.selectedStroke,lineWidth:4,shadowColor:Li.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:Li.highlightFill,stroke:Li.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:Li.inactiveFill,stroke:Li.inactiveStroke,lineWidth:1},disable:{fill:Li.disableFill,stroke:Li.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:ng,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:Li.edgeMainStroke,lineAppendWidth:2},color:Li.edgeMainStroke},edgeStateStyles:{active:{stroke:Li.edgeActiveStroke,lineWidth:1},selected:{stroke:Li.edgeSelectedStroke,lineWidth:2,shadowColor:Li.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Li.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:Li.edgeInactiveStroke,lineWidth:1},disable:{stroke:Li.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:ng,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:Li.comboMainFill,lineWidth:1,stroke:Li.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:Li.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:Li.comboActiveStroke,lineWidth:1,fill:Li.comboActiveFill},selected:{stroke:Li.comboSelectedStroke,lineWidth:2,fill:Li.comboSelectedFill,shadowColor:Li.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Li.comboHighlightStroke,lineWidth:2,fill:Li.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:Li.comboInactiveStroke,fill:Li.comboInactiveFill,lineWidth:1},disable:{stroke:Li.comboDisableStroke,fill:Li.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"};function uh(i,e,t){if(i){if(typeof i.addEventListener=="function")return i.addEventListener(e,t,!1),{remove:function(){i.removeEventListener(e,t,!1)}};if(typeof i.attachEvent=="function")return i.attachEvent("on"+e,t),{remove:function(){i.detachEvent("on"+e,t)}}}}var Q1=Ys.cloneEvent,J1=Ys.isViewportChanged,tb=function(i){(0,y.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.extendEvents=[],r.dragging=!1,r.mousedown=!1,r.preItem=null,r.destroy(),r.graph=t,r.destroyed=!1,r.initEvents(),r}return e.prototype.initEvents=function(){var t=this,r=t.graph,n=t.extendEvents,a=n===void 0?[]:n,o=r.get("canvas"),s=o.get("el"),u=(0,l.wrapBehavior)(this,"onCanvasEvents"),f=(0,l.wrapBehavior)(this,"onExtendEvents"),c=(0,l.wrapBehavior)(this,"onWheelEvent");o.off("*").on("*",u),this.canvasHandler=u,a.push(uh(s,"wheel",c)),typeof window!="undefined"&&(a.push(uh(window,"keydown",f)),a.push(uh(window,"keyup",f)),a.push(uh(window,"focus",f))),this.resetHandler&&r.off("afterchangedata",this.resetHandler),this.resetHandler=(0,l.wrapBehavior)(this,"resetStatus"),r.on("afterchangedata",this.resetHandler)},e.getItemRoot=function(t){for(;t&&!t.get("item");)t=t.get("parent");return t},e.prototype.onCanvasEvents=function(t){var r=this,n=this.graph,a=n.get("canvas"),o=t.target,s=t.type;switch(s){case"drag":this.onCanvasEvents(Object.assign({},t,{type:"mousemove"}));break;case"dragend":this.onCanvasEvents(Object.assign({},t,{type:"mouseup"}));break;case"mousedown":this.mousedown=!0;break;case"dragend":case"mouseup":setTimeout(function(){return r.mousedown=!1});break;case"click":if(!this.mousedown)return;break;default:break}t.canvasX=t.x,t.canvasY=t.y;var u={x:t.canvasX,y:t.canvasY},f=n.get("group"),c=f.getMatrix();if(c||(c=[1,0,0,0,1,0,0,0,1]),J1(c)&&(u=n.getPointByClient(t.clientX,t.clientY)),t.x=u.x,t.y=u.y,t.currentTarget=n,o===a){(s==="mousemove"||s==="mouseleave")&&this.handleMouseMove(t,"canvas"),t.target=a,t.item=null,n.emit(s,t),n.emit("canvas:".concat(s),t);return}var d=e.getItemRoot(o);if(!d){n.emit(s,t);return}var A=d.get("item");if(!A.destroyed){var D=A.getType();if(t.target=o,t.item=A,t.canvasX===t.x&&t.canvasY===t.y){var z=n.getCanvasByPoint(t.x,t.y);t.canvasX=z.x,t.canvasY=z.y}t.name&&!t.name.includes(":")?(n.emit("".concat(D,":").concat(s),t),n.emit(s,t)):t.name&&n.emit(t.name,t),s==="dragstart"&&(this.dragging=!0),s==="dragend"&&(this.dragging=!1),s==="mousemove"&&this.handleMouseMove(t,D)}},e.prototype.onExtendEvents=function(t){this.graph.emit(t.type,t)},e.prototype.onWheelEvent=function(t){(0,l.isNil)(t.wheelDelta)&&(t.wheelDelta=-t.detail),this.graph.emit("wheel",t)},e.prototype.handleMouseMove=function(t,r){var n=this,a=n.graph,o=n.preItem,s=a.get("canvas"),u=t.target===s?null:t.item;t=Q1(t),o&&o!==u&&!o.destroyed&&(t.item=o,this.emitCustomEvent(o.getType(),"mouseleave",t),this.dragging&&this.emitCustomEvent(o.getType(),"dragleave",t)),u&&o!==u&&(t.item=u,this.emitCustomEvent(r,"mouseenter",t),this.dragging&&this.emitCustomEvent(r,"dragenter",t)),this.preItem=u},e.prototype.emitCustomEvent=function(t,r,n){n.type=r,this.graph.emit("".concat(t,":").concat(r),n)},e.prototype.resetStatus=function(){this.mousedown=!1,this.dragging=!1,this.preItem=null},e.prototype.destroy=function(){var t=this,r=t.graph,n=t.canvasHandler,a=t.extendEvents,o=r.get("canvas");o.off("*",n),(0,l.each)(a,function(s){s.remove()}),this.resetStatus(),this.extendEvents.length=0,this.canvasHandler=null,this.resetHandler=null,this.destroyed=!0},e}(yp),eb=tb,Ci=_(483360),rb=_(981746),fh=_.n(rb),ag=Ys.traverseTree,nb=function(e,t){var r;return e?(0,l.isNumber)(e)?r=function(a){return e}:r=e:r=function(a){return t||1},r},ab=function(e,t){var r=[],n=[],a={},o=0;for(o=0;o<e.length;o++){var s=e[o];a[s.id]=o,r.push(s.x),r.push(s.y),r.push(0),r.push(0),n.push([])}for(o=0;o<t.length;o++){var u=t[o];n[a[u.source]].push(a[u.target]),n[a[u.target]].push(a[u.source])}var f=0;for(o=0;o<e.length;o++){var c=r.length,d=n[o],A=d.length;r[o*4+2]=c,r[o*4+3]=d.length,f=Math.max(f,d.length);for(var D=0;D<A;++D){var z=d[D];r.push(+z)}}for(;r.length%4!==0;)r.push(0);return{array:new Float32Array(r),maxEdgePerVetex:f}},ib=function(e,t,r){var n=[],a=[],o={},s=0;for(s=0;s<e.length;s++){var u=e[s];o[u.id]=s,n.push(u.x),n.push(u.y),n.push(0),n.push(0),a.push([])}for(s=0;s<t.length;s++){var f=t[s];a[o[f.source]].push(o[f.target]),a[o[f.source]].push(r(f)),a[o[f.target]].push(o[f.source]),a[o[f.target]].push(r(f))}var c=0;for(s=0;s<e.length;s++){var d=n.length,A=a[s],D=A.length;n[s*4+2]=d,n[s*4+3]=D/2,c=Math.max(c,D/2);for(var z=0;z<D;++z){var Z=A[z];n.push(+Z)}}for(;n.length%4!==0;)n.push(0);return{array:new Float32Array(n),maxEdgePerVetex:c}},ob=function(e,t,r,n){var a=[],o=[],s={},u=0;for(u=0;u<e.length;u++){var f=e[u];s[f.id]=u,a.push(f.x),a.push(f.y),a.push(0),a.push(0),o.push([])}for(u=0;u<t.length;u++){var c=t[u];o[s[c.source]].push(s[c.target]),o[s[c.source]].push(r(c)),o[s[c.source]].push(n(c)),o[s[c.source]].push(0),o[s[c.target]].push(s[c.source]),o[s[c.target]].push(r(c)),o[s[c.target]].push(n(c)),o[s[c.target]].push(0)}var d=0;for(u=0;u<e.length;u++){var A=a.length,D=o[u],z=D.length;a[u*4+2]=A+1048576*z/4,a[u*4+3]=0,d=Math.max(d,z/4);for(var Z=0;Z<z;++Z){var rt=D[Z];a.push(+rt)}}for(;a.length%4!==0;)a.push(0);return{array:new Float32Array(a),maxEdgePerVetex:d}},sb=function(e,t){var r=[],n=e.length,a={};return t.forEach(function(o){e.forEach(function(s,u){if(a[o[s]]===void 0&&(a[o[s]]=Object.keys(a).length),r.push(a[o[s]]),u===n-1)for(;r.length%4!==0;)r.push(0)})}),{array:new Float32Array(r),count:Object.keys(a).length}},ub=function(e){for(var t=[],r=e.length,n=e[0].length,a=function(u){e.forEach(function(f,c){if(t.push(f[u]),c===r-1)for(;t.length%4!==0;)t.push(0)})},o=0;o<n;o++)a(o);return new Float32Array(t)},fb=function(e,t){var r=["V","TB","BT"],n={x:1/0,y:1/0},a={x:-1/0,y:-1/0},o="x",s="y";t&&r.indexOf(t)>=0&&(s="x",o="y");var u=0;ag(e,function(d){return u++,d.x>a.x&&(a.x=d.x),d.x<n.x&&(n.x=d.x),d.y>a.y&&(a.y=d.y),d.y<n.y&&(n.y=d.y),!0});var f=Math.PI*2/u,c=a[s]-n[s];return c===0||ag(e,function(d){var A=(d[s]-n[s])/c*(Math.PI*2-f)+f,D=Math.abs(o==="x"?d.x-e.x:d.y-e.y);return d.x=D*Math.cos(A),d.y=D*Math.sin(A),!0}),e},ig=function i(){return typeof window=="undefined"||typeof document=="undefined"?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!!(window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl")))}catch(t){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var t=document.createElement("div");return t.id="webgl-error-message",t.style.fontFamily="monospace",t.style.fontSize="13px",t.style.fontWeight="normal",t.style.textAlign="center",t.style.background="#fff",t.style.color="#000",t.style.padding="1.5em",t.style.width="400px",t.style.margin="5em auto 0",this.webgl||(t.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`)),t},addGetWebGLMessage:function(t){t=t||{};var r=t.parent!==void 0?t.parent:document.body,n=t.id!==void 0?t.id:"oldie",a=i().getWebGLErrorMessage();a.id=n,r.appendChild(a)}}},cb=(0,y.__assign)((0,y.__assign)((0,y.__assign)((0,y.__assign)({},Ys),T),E),O),hc=cb,lb=hc.radialLayout,db=function(){function i(e){this.type=e.type,this.radial=e.radial,this.config=e}return i.prototype.init=function(e){var t=this;if(this.data=e,this.radial){this.layoutMethod=function(r){var n=fh()[t.type](r,t.config);return lb(n),n};return}this.layoutMethod=function(r){return fh()[t.type](r,t.config)}},i.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},i.prototype.layout=function(e){return this.init(e),this.execute()},i}(),hb=db;(0,Ci.registerLayout)("grid",Ci.GridLayout),(0,Ci.registerLayout)("random",Ci.RandomLayout),(0,Ci.registerLayout)("force",Ci.ForceLayout),(0,Ci.registerLayout)("circular",Ci.CircularLayout),(0,Ci.registerLayout)("dagre",Ci.DagreLayout),(0,Ci.registerLayout)("dagreCompound",Ci.DagreCompoundLayout),(0,Ci.registerLayout)("radial",Ci.RadialLayout),(0,Ci.registerLayout)("concentric",Ci.ConcentricLayout),(0,Ci.registerLayout)("mds",Ci.MDSLayout),(0,Ci.registerLayout)("fruchterman",Ci.FruchtermanLayout),(0,Ci.registerLayout)("fruchterman-gpu",Ci.FruchtermanGPULayout),(0,Ci.registerLayout)("gForce",Ci.GForceLayout),(0,Ci.registerLayout)("force2",Ci.Force2Layout),(0,Ci.registerLayout)("gForce-gpu",Ci.GForceGPULayout),(0,Ci.registerLayout)("comboForce",Ci.ComboForceLayout),(0,Ci.registerLayout)("comboCombined",Ci.ComboCombinedLayout),(0,Ci.registerLayout)("forceAtlas2",Ci.ForceAtlas2Layout);var vb=function(e,t){t.isCustomLayout=!0,Ci.Layouts[e]=(0,Ci.registerLayout)(e,t)},pb=function(){function i(e,t){var r=e.toString(),n=new Blob(["importScripts('".concat(t,"');(").concat(r,")()")],{type:"text/javascript"});return new Worker(URL.createObjectURL(n))}return i}(),gb=pb,mb=function(e){e===void 0&&(e="https://unpkg.com/@antv/layout@0.3.22/dist/layout.min.js");function t(){var n={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("force2",layout.Force2Layout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("dagreCompound",layout.DagreCompoundLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("comboCombined",layout.ComboCombinedLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout);function a(s){var u=s.data.type;return u===n.RUN||u===n.GPURUN}function o(s){var u=this,f=s.data.type;switch(f){case n.RUN:{var c=s.data,d=c.nodes,A=c.edges,D=c.layoutCfg,z=D===void 0?{}:D,Z=z.type,rt=layout.getLayoutByName(Z);if(!rt){this.postMessage({type:n.ERROR,message:"layout ".concat(Z," not found")});break}var ft;z.onLayoutEnd=function(){u.postMessage({type:n.END,nodes:d}),ft==null||ft.destroy()},ft=new rt(z),ft.init({nodes:d,edges:A}),ft.execute();break}case n.GPURUN:{var ct=s.data,gt=ct.nodes,A=ct.edges,Ct=ct.layoutCfg,z=Ct===void 0?{}:Ct,Ht=ct.canvas,Z=z.type,rt=layout.getLayoutByName(Z);if(!rt){this.postMessage({type:n.ERROR,message:"layout ".concat(Z," not found")});break}if(Z.split("-")[1]!=="gpu"){this.postMessage({type:n.ERROR,message:"layout ".concat(Z," does not support GPU")});break}var ne=new rt(z);ne.init({nodes:gt,edges:A}),ne.executeWithWorker(Ht,this);break}default:break}}onmessage=function(u){a(u)&&o(u)}}var r=new gb(t,e);return r},cd={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};function iv(i){"@babel/helpers - typeof";return iv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iv(i)}var og=function(e){return setTimeout(e,16)},sg=function(e){return clearTimeout(e)},ch={requestAnimationFrame:function(e){var t=typeof window!="undefined"&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||og;return t(e)},cancelAnimationFrame:function(e){var t=typeof window!="undefined"&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||sg;return t(e)}},yb=["fruchterman","gForce"],bb=["force","grid","circular"],xb=function(i){(0,y.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.graph=t,r.layoutCfg=t.get("layout")||{},r.layoutType=r.getLayoutType(),r.worker=null,r.workerData={},r.initLayout(),r}return e.prototype.initLayout=function(){},e.prototype.getWorker=function(){return this.worker?this.worker:(typeof Worker=="undefined"?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=mb(this.layoutCfg.workerScriptURL),this.worker)},e.prototype.stopWorker=function(){var t=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,t.requestId&&(ch.cancelAnimationFrame(t.requestId),t.requestId=null),t.requestId2&&(ch.cancelAnimationFrame(t.requestId2),t.requestId2=null))},e.prototype.execLayoutMethod=function(t,r){var n=this;return new Promise(function(a,o){return(0,y.__awaiter)(n,void 0,void 0,function(){var s,u,f,c,d,Z,A,D,z,Z,rt;return(0,y.__generator)(this,function(ft){switch(ft.label){case 0:if(s=this.graph,!s||s.get("destroyed"))return[2];u=t.type,t.onLayoutEnd=function(){s.emit("aftersublayout",{type:u}),a()},u&&this.isGPU&&(ug(u)?u="".concat(u,"-gpu"):console.warn("The '".concat(u,"' layout does not support GPU calculation for now, it will run in CPU."))),Ys.isForce(u)?(f=t.onTick,c=t.animate,d=c===void 0&&(u==="force"||u==="force2"),Z=function(){f&&f(),(c||d)&&s.refreshPositions()},t.tick=Z):(u==="comboForce"||u==="comboCombined")&&(t.comboTrees=s.get("comboTrees")),A=!1;try{D=new Ci.Layouts[u](t),this.layoutMethods[r]&&this.layoutMethods[r].destroy(),this.layoutMethods[r]=D}catch(ct){console.warn("The layout method: '".concat(u,"' does not exist! Please specify it first.")),o()}return A=D.enableTick,A&&(z=t.onTick,Z=function(){z&&z(),s.refreshPositions()},D.tick=Z),rt=this.filterLayoutData(this.data,t),Mb(rt,r),D.init(rt),s.emit("beforesublayout",{type:u}),[4,D.execute()];case 1:return ft.sent(),D.isCustomLayout&&t.onLayoutEnd&&t.onLayoutEnd(),[2]}})})})},e.prototype.updateLayoutMethod=function(t,r){var n=this;return new Promise(function(a,o){return(0,y.__awaiter)(n,void 0,void 0,function(){var s,u,f,c,d,A,D;return(0,y.__generator)(this,function(z){switch(z.label){case 0:return s=this.graph,u=r==null?void 0:r.type,r.onLayoutEnd=function(){s.emit("aftersublayout",{type:u}),a()},Ys.isForce(u)&&(f=r.onTick,c=r.animate,d=c===void 0&&(u==="force"||u==="force2"),A=function(){f==null||f(),(c||d)&&s.refreshPositions()},r.tick=A),D=this.filterLayoutData(this.data,r),t.init(D),t.updateCfg(r),s.emit("beforesublayout",{type:u}),[4,t.execute()];case 1:return z.sent(),t.isCustomLayout&&r.onLayoutEnd&&r.onLayoutEnd(),[2]}})})})},e.prototype.layout=function(t){var r=this,n,a=this.graph;if(!(!a||a.get("destroyed"))){this.data=this.setDataFromGraph();var o=this.data,s=o.nodes,u=o.hiddenNodes;if(!s)return!1;var f=a.get("width"),c=a.get("height"),d={};Object.assign(d,{width:f,height:c,center:[f/2,c/2]},this.layoutCfg),this.layoutCfg=d;var A=d.type,D=!1;(n=this.layoutMethods)===null||n===void 0||n.forEach(function(Ht){var ne;return D=!!(!((ne=Ht.nodes)===null||ne===void 0)&&ne.length)||D});var z=this.destoryLayoutMethods();a.emit("beforelayout");var Z=Promise.resolve();D&&A&&(z==null?void 0:z.length)===1&&z[0]===A?this.tweakInit():Z=this.initPositions(d.center,s);var rt=this.initPositions(d.center,u);rt.then(),this.isGPU=fg(d,A);var ft=d.onLayoutEnd,ct=d.layoutEndFormatted,gt=d.adjust;if(ct||(d.layoutEndFormatted=!0,d.onAllLayoutEnd=function(){return(0,y.__awaiter)(r,void 0,void 0,function(){return(0,y.__generator)(this,function(Ht){switch(Ht.label){case 0:return ft&&ft(s),this.refreshLayout(),gt&&d.pipes?[4,this.adjustPipesBox(this.data,gt)]:[3,2];case 1:Ht.sent(),this.refreshLayout(),Ht.label=2;case 2:return a.emit("afterlayout"),[2]}})})}),this.stopWorker(),d.workerEnabled&&this.layoutWithWorker(this.data,t))return!0;var Ct=!1;return d.type?(Ct=!0,Z=Z.then(function(){return(0,y.__awaiter)(r,void 0,void 0,function(){return(0,y.__generator)(this,function(Ht){switch(Ht.label){case 0:return[4,this.execLayoutMethod(d,0)];case 1:return[2,Ht.sent()]}})})})):d.pipes&&(Ct=!0,d.pipes.forEach(function(Ht,ne){Z=Z.then(function(){return(0,y.__awaiter)(r,void 0,void 0,function(){return(0,y.__generator)(this,function(re){switch(re.label){case 0:return[4,this.execLayoutMethod(Ht,ne)];case 1:return[2,re.sent()]}})})})})),Ct?Z.then(function(){d.onAllLayoutEnd&&d.onAllLayoutEnd(),t&&t()}).catch(function(Ht){console.warn("graph layout failed,",Ht)}):(a.refreshPositions(),t==null||t()),!1}},e.prototype.tweakInit=function(){var t=this,r=t.data,n=t.graph,a=r.nodes,o=r.edges;if(a!=null&&a.length){var s={};a.forEach(function(c){var d=c.x,A=c.y;!isNaN(d)&&!isNaN(A)&&(s[c.id]={x:d,y:A},c.mass=c.mass||2)}),o.forEach(function(c){var d=c.source,A=c.target,D=s[d],z=s[A];!D&&z?s[d]={x:z.x+(Math.random()-.5)*80,y:z.y+(Math.random()-.5)*80}:!z&&D&&(s[A]={x:D.x+(Math.random()-.5)*80,y:D.y+(Math.random()-.5)*80})});var u=n.get("width"),f=n.get("height");a.forEach(function(c){var d=s[c.id]||{x:u/2+(Math.random()-.5)*20,y:f/2+(Math.random()-.5)*20};c.x=d.x,c.y=d.y})}},e.prototype.initWithPreset=function(t,r){var n=this;return new Promise(function(a,o){return(0,y.__awaiter)(n,void 0,void 0,function(){var s,u,f,c,d,A,D;return(0,y.__generator)(this,function(z){switch(z.label){case 0:return s=this,u=s.layoutCfg,f=s.data,c=u.preset,!(c!=null&&c.type)||!Ci.Layouts[c==null?void 0:c.type]?(r==null||r(),a(),[2,!1]):(d=fg(c,c.type),A=d?"".concat(c.type,"-gpu"):c.type,D=new Ci.Layouts[A](c),delete u.preset,D.init(f),[4,D.execute()]);case 1:return z.sent(),t==null||t(),a(),[2,!0]}})})})},e.prototype.layoutWithWorker=function(t,r){var n=this,a=this,o=a.layoutCfg,s=a.graph,u=this.getWorker(),f=this.workerData;if(!u)return!1;f.requestId=null,f.requestId2=null,f.currentTick=null,f.currentTickData=null,s.emit("beforelayout");var c=Promise.resolve(),d=!1;if(o.type)d=!0,c=c.then(function(){return n.runWebworker(u,t,o)});else if(o.pipes){d=!0;for(var A=function(ft){c=c.then(function(){return n.runWebworker(u,t,ft)})},D=0,z=o.pipes;D<z.length;D++){var Z=z[D];A(Z)}}return d&&c.then(function(){o.onAllLayoutEnd&&o.onAllLayoutEnd(),r==null||r()}).catch(function(rt){console.error("layout failed",rt)}),!0},e.prototype.runWebworker=function(t,r,n){var a=this,o=this.isGPU,s=this.filterLayoutData(r,n),u=s.nodes,f=s.edges,c=document.createElement("canvas"),d=o&&typeof window!="undefined"&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in c,A=wb(n,function(z){return typeof z!="function"});if(!d)t.postMessage({type:cd.RUN,nodes:u,edges:f,layoutCfg:A});else{var D=c.transferControlToOffscreen();A.type="".concat(A.type,"-gpu"),t.postMessage({type:cd.GPURUN,nodes:u,edges:f,layoutCfg:A,canvas:D},[D])}return new Promise(function(z,Z){t.onmessage=function(rt){a.handleWorkerMessage(z,Z,rt,s,n)}})},e.prototype.handleWorkerMessage=function(t,r,n,a,o){var s=this,u=s.graph,f=s.workerData,c=n.data,d=c.type,A=function(){o.onTick&&o.onTick()};switch(d){case cd.TICK:f.currentTick=c.currentTick,f.currentTickData=c,f.requestId||(f.requestId=ch.requestAnimationFrame(function(){ov(a,c),u.refreshPositions(),A(),c.currentTick===c.totalTicks?t():f.currentTick===c.totalTicks&&(f.requestId2=ch.requestAnimationFrame(function(){ov(a,f.currentTickData),u.refreshPositions(),f.requestId2=null,A(),t()})),f.requestId=null}));break;case cd.END:f.currentTick==null&&(ov(a,c),t());break;case cd.GPUEND:f.currentTick==null&&(Sb(a,c),t());break;case cd.ERROR:console.warn("Web-Worker layout error!",c.message),r();break;default:r();break}},e.prototype.updateLayoutCfg=function(t){var r=this,n=this,a=n.graph,o=n.layoutMethods;if(!(!a||a.get("destroyed"))){var s=t.disableTriggerLayout,u=(0,y.__rest)(t,["disableTriggerLayout"]),f=(0,l.mix)({},this.layoutCfg,u);if(this.layoutCfg=f,!s){if(!(o!=null&&o.length)){this.layout();return}if(this.data=this.setDataFromGraph(),this.stopWorker(),!(u.workerEnabled&&this.layoutWithWorker(this.data,null))){a.emit("beforelayout");var c=Promise.resolve(),d=!1;(o==null?void 0:o.length)===1?(d=!0,c=c.then(function(){return(0,y.__awaiter)(r,void 0,void 0,function(){return(0,y.__generator)(this,function(A){switch(A.label){case 0:return[4,this.updateLayoutMethod(o[0],f)];case 1:return[2,A.sent()]}})})})):o!=null&&o.length&&(d=!0,o.forEach(function(A,D){var z=f.pipes[D];c=c.then(function(){return(0,y.__awaiter)(r,void 0,void 0,function(){return(0,y.__generator)(this,function(Z){switch(Z.label){case 0:return[4,this.updateLayoutMethod(A,z)];case 1:return[2,Z.sent()]}})})})})),d&&c.then(function(){f.onAllLayoutEnd&&f.onAllLayoutEnd()}).catch(function(A){console.warn("layout failed",A)})}}}},e.prototype.adjustPipesBox=function(t,r){var n=this;return new Promise(function(a){var o=t.nodes;o!=null&&o.length||a(),bb.includes(r)||(console.warn("The adjust type ".concat(r," is not supported yet, please assign it with 'force', 'grid', or 'circular'.")),a());var s={center:n.layoutCfg.center,nodeSize:function(z){return Math.max(z.height,z.width)},preventOverlap:!0,onLayoutEnd:function(){}},u=n.getLayoutBBox(o),f=u.groupNodes,c=u.layoutNodes,d=(0,l.clone)(c);s.onLayoutEnd=function(){c==null||c.forEach(function(D,z){var Z,rt,ft,ct=D.x-((Z=d[z])===null||Z===void 0?void 0:Z.x),gt=D.y-((rt=d[z])===null||rt===void 0?void 0:rt.y);(ft=f[z])===null||ft===void 0||ft.forEach(function(Ct){Ct.x+=ct,Ct.y+=gt})}),a()};var A=new Ci.Layouts[r](s);A.layout({nodes:c})})},e.prototype.destroy=function(){this.destoryLayoutMethods();var t=this.worker;t&&(t.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},e}(mp),Eb=xb;function ov(i,e){for(var t=i.nodes,r=e.nodes,n=t.length,a=0;a<n;a++){var o=t[a];o.x=r[a].x,o.y=r[a].y}}function wb(i,e){var t={};return i&&iv(i)==="object"?(Object.keys(i).forEach(function(r){i.hasOwnProperty(r)&&e(i[r])&&(t[r]=i[r])}),t):i}function Sb(i,e){for(var t=i.nodes,r=e.vertexEdgeData,n=t.length,a=0;a<n;a++){var o=t[a],s=r[4*a],u=r[4*a+1];o.x=s,o.y=u}}function Mb(i,e){var t;if(!((t=i==null?void 0:i.nodes)===null||t===void 0)&&t.length){var r=i.nodes;r.forEach(function(n){n.layoutOrder=e})}}function ug(i){return yb.includes(i)}function fg(i,e){var t=e;e&&e.split("-")[1]==="gpu"&&(t=e.split("-")[0],i.gpuEnabled=!0);var r=!1;return i.gpuEnabled&&(r=!0,ig().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),r=!1)),r&&!ug(t)&&(console.warn("The '".concat(t,"' layout does not support GPU calculation for now, it will run in CPU.")),r=!1),r}var Ad,sv,cg,uv;function _b(){Ad=document.createElement("table"),sv=document.createElement("tr"),cg=/^\s*<(\w+|!)[^>]*>/,uv={tr:document.createElement("tbody"),tbody:Ad,thead:Ad,tfoot:Ad,td:sv,th:sv,"*":document.createElement("div")}}function qo(i){Ad||_b();var e=cg.test(i)&&RegExp.$1;(!e||!(e in uv))&&(e="*");var t=uv[e];i=typeof i=="string"?i.replace(/(^\s*)|(\s*$)/g,""):i,t.innerHTML=""+i;var r=t.childNodes[0];return r&&t.contains(r)&&t.removeChild(r),r}var Cb=function(e){var t=e.clone();return Tb(e,t),t},Tb=function i(e,t){var r;e.isGroup()&&t.isGroup()&&((r=e.get("children"))===null||r===void 0||r.forEach(function(s,u){var f=t.get("children")[u];i(s,f)}));var n=e.get("type"),a=t.get("type");if(!(n!=="image"||a!=="image")){var o=e.get("clipShape");o&&t.setClip({type:o.get("type"),attrs:o.attr()})}},lg=dt,Ab="svg",Ob=function(i){(0,y.__extends)(e,i);function e(t){var r=i.call(this,t)||this,n=r.get("defaultNode");return n||r.set("defaultNode",{type:"circle"}),n.type||(n.type="circle",r.set("defaultNode",n)),r.destroyed=!1,r}return e.prototype.initLayoutController=function(){var t=new Eb(this);this.set({layoutController:t})},e.prototype.initEventController=function(){var t=new eb(this);this.set({eventController:t})},e.prototype.initCanvas=function(){var t=this.get("container");if(typeof t=="string"&&(t=document.getElementById(t),this.set("container",t)),!t)throw new Error("invalid container");var r=t.clientWidth,n=t.clientHeight,a=this.get("width")||r,o=this.get("height")||n;!this.get("width")&&!this.get("height")&&(this.set("width",r),this.set("height",n));var s=this.get("renderer"),u;if(s===Ab)u=new Cd({container:t,width:a,height:o});else{var f={container:t,width:a,height:o},c=this.get("pixelRatio");c&&(f.pixelRatio=c,window.devicePixelRatio=c),u=new dc(f)}this.set("canvas",u)},e.prototype.initPlugins=function(){var t=this;(0,l.each)(t.get("plugins"),function(r){!r.destroyed&&r.initPlugin&&r.initPlugin(t)})},e.prototype.downloadImageWatermark=function(t,r,n,a){return(0,y.__awaiter)(this,void 0,void 0,function(){var o,s,u;return(0,y.__generator)(this,function(f){switch(f.label){case 0:return o=t.style.backgroundImage,s=o.slice(5,o.length-2),u=new Image,u.src=s,[4,new Promise(function(c){u.onload=function(){var d=r.createPattern(u,"repeat");r.rect(0,0,n,a),r.fillStyle=d,r.fill(),c("")}})];case 1:return f.sent(),[2]}})})},e.prototype.asyncToDataUrl=function(t,r,n,a,o,s){var u=this,f=document.querySelector(".g6-graph-watermarker"),c=this.get("canvas"),d=c.getRenderer(),A=s||c.get("el"),D="";t||(t="image/png"),setTimeout(function(){return(0,y.__awaiter)(u,void 0,void 0,function(){var z,Z,rt,ft,ct,gt,Ct,Ht,ne,re;return(0,y.__generator)(this,function(Me){switch(Me.label){case 0:return d!=="svg"?[3,1]:(z=A.cloneNode(!0),Z=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),rt=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",Z),rt.replaceChild(z,rt.documentElement),ft=new XMLSerializer().serializeToString(rt),D="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(ft)),[3,4]);case 1:return ct=void 0,gt=A.getContext("2d"),Ct=a||this.get("width"),Ht=o||this.get("height"),ne=void 0,f?[4,this.downloadImageWatermark(f,gt,Ct,Ht)]:[3,3];case 2:Me.sent(),Me.label=3;case 3:if(r){re=typeof window!="undefined"?window.devicePixelRatio:1;try{ct=gt.getImageData(0,0,Ct*re,Ht*re),ne=gt.globalCompositeOperation,gt.globalCompositeOperation="destination-over",gt.fillStyle=r,gt.fillRect(0,0,Ct,Ht)}catch(je){console.error("Download image failed. Out of memory at ImageData creation")}}D=A.toDataURL(t),r&&(gt.clearRect(0,0,Ct,Ht),gt.putImageData(ct,0,0),gt.globalCompositeOperation=ne),Me.label=4;case 4:return n&&n(D),[2]}})})},16)},e.prototype.toDataURL=function(t,r){var n=this.get("canvas"),a=n.getRenderer(),o=n.get("el");t||(t="image/png");var s="";if(a==="svg"){var u=o.cloneNode(!0),f=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),c=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",f);c.replaceChild(u,c.documentElement);var d=new XMLSerializer().serializeToString(c);s="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(d))}else{var A=void 0,D=o.getContext("2d"),z=Math.max(this.get("width"),500),Z=Math.max(this.get("height"),500),rt=void 0;if(r){var ft=typeof window!="undefined"&&window.devicePixelRatio||1;try{A=D.getImageData(0,0,z*ft,Z*ft),rt=D.globalCompositeOperation,D.globalCompositeOperation="destination-over",D.fillStyle=r,D.fillRect(0,0,z,Z)}catch(ct){console.error("Download image failed. Out of memory at ImageData creation")}}s=o.toDataURL(t),r&&(D.clearRect(0,0,z,Z),D.putImageData(A,0,0),D.globalCompositeOperation=rt)}return s},e.prototype.toFullDataURL=function(t,r,n){var a=this.get("group").getCanvasBBox(),o=a.height,s=a.width,u=this.get("renderer"),f=qo('<div id="virtual-image"></div>'),c=n?n.backgroundColor:void 0,d=n?n.padding:void 0;d?(0,l.isNumber)(d)&&(d=[d,d,d,d]):d=[0,0,0,0];var A=o+d[0]+d[2],D=s+d[1]+d[3],z={container:f,height:A,width:D,quickHit:!0},Z=u==="svg"?new Cd(z):new dc(z),rt=this.get("group"),ft=rt.clone(),ct=(0,l.clone)(ft.getMatrix());ct||(ct=[1,0,0,0,1,0,0,0,1]);var gt=(a.maxX+a.minX)/2,Ct=(a.maxY+a.minY)/2;ct=lg(ct,[["t",-gt,-Ct],["t",s/2+d[3],o/2+d[0]]]),ft.resetMatrix(),ft.setMatrix(ct),Z.add(ft);var Ht=Z.get("el"),ne="";r||(r="image/png"),setTimeout(function(){if(u==="svg"){var re=Ht.cloneNode(!0),Me=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),je=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",Me);je.replaceChild(re,je.documentElement);var Re=new XMLSerializer().serializeToString(je);ne="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(Re))}else{var ir=void 0,Sr=Ht.getContext("2d"),pn=void 0;if(c){var Gn=typeof window!="undefined"?window.devicePixelRatio:1;try{ir=Sr.getImageData(0,0,D*Gn,A*Gn),pn=Sr.globalCompositeOperation,Sr.globalCompositeOperation="destination-over",Sr.fillStyle=c,Sr.fillRect(0,0,D,A)}catch(Pn){console.error("Download image failed. Out of memory at ImageData creation")}}ne=Ht.toDataURL(r),c&&(Sr.clearRect(0,0,D,A),Sr.putImageData(ir,0,0),Sr.globalCompositeOperation=pn)}t&&t(ne)},16)},e.prototype.downloadFullImage=function(t,r,n){var a=this,o=this.get("group").getCanvasBBox(),s=o.height,u=o.width,f=this.get("renderer"),c=qo('<div id="virtual-image"></div>'),d=document.querySelector(".g6-graph-watermarker"),A=n?n.backgroundColor:void 0,D=n?n.padding:void 0;D?(0,l.isNumber)(D)&&(D=[D,D,D,D]):D=[0,0,0,0];var z=s+D[0]+D[2],Z=u+D[1]+D[3];if(d){var rt=this.get("graphWaterMarker").cfg||{},ft=rt.width,ct=rt.height;z=Math.ceil(z/ct)*ct,Z=Math.ceil(Z/ft)*ft}var gt={container:c,height:z,width:Z},Ct=f==="svg"?new Cd(gt):new dc(gt),Ht=this.get("group"),ne=Cb(Ht),re=(0,l.clone)(ne.getMatrix());re||(re=[1,0,0,0,1,0,0,0,1]);var Me=(o.maxX+o.minX)/2,je=(o.maxY+o.minY)/2;re=lg(re,[["t",-Me,-je],["t",u/2+D[3],s/2+D[0]]]),ne.resetMatrix(),ne.setMatrix(re),Ct.add(ne);var Re=Ct.get("el");r||(r="image/png"),this.asyncToDataUrl(r,A,function(ir){var Sr=document.createElement("a"),pn=(t||"graph")+(f==="svg"?".svg":".".concat(r.split("/")[1]));a.dataURLToImage(ir,f,Sr,pn);var Gn=document.createEvent("MouseEvents");Gn.initEvent("click",!1,!1),Sr.dispatchEvent(Gn)},Z,z,Re)},e.prototype.downloadImage=function(t,r,n){var a=this,o=this;o.stopAnimate();var s=o.get("canvas"),u=s.getRenderer();r||(r="image/png");var f=(t||"graph")+(u==="svg"?".svg":r.split("/")[1]),c=document.createElement("a");o.asyncToDataUrl(r,n,function(d){a.dataURLToImage(d,u,c,f);var A=document.createEvent("MouseEvents");A.initEvent("click",!1,!1),c.dispatchEvent(A)})},e.prototype.dataURLToImage=function(t,r,n,a){if(!t||t==="data:"){console.error("Download image failed. The graph is too large or there is invalid attribute values in graph items");return}if(typeof window!="undefined")if(window.Blob&&window.URL&&r!=="svg"){var o=t.split(","),s="";if(o&&o.length>0){var u=o[0].match(/:(.*?);/);u&&u.length>=2&&(s=u[1])}for(var f=atob(o[1]),c=f.length,d=new Uint8Array(c);c--;)d[c]=f.charCodeAt(c);var A=new Blob([d],{type:s});window.navigator.msSaveBlob?window.navigator.msSaveBlob(A,a):n.addEventListener("click",function(){n.download=a,n.href=window.URL.createObjectURL(A)})}else n.addEventListener("click",function(){n.download=a,n.href=t})},e.prototype.addPlugin=function(t){var r=this;t.destroyed||(r.get("plugins").push(t),t.initPlugin(r))},e.prototype.removePlugin=function(t){var r=this.get("plugins"),n=r.indexOf(t);n>=0&&(t.destroyPlugin(),r.splice(n,1))},e.prototype.setImageWaterMarker=function(t,r){t===void 0&&(t=Al.waterMarkerImage);var n=this.get("container");(0,l.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var a=this.get("graphWaterMarker"),o=(0,l.deepMix)({},Al.imageWaterMarkerConfig,r),s=o.width,u=o.height,f=o.compatible,c=o.image;if(!t){var d=f?n:document.querySelector(".g6-graph-watermarker");d&&(d.style.cssText=void 0),a&&a.clear();return}if(a)a.clear();else{var A={container:n,width:s,height:u,capture:!1},D=this.get("pixelRatio");D&&(A.pixelRatio=D,window.devicePixelRatio=D),a=new dc(A),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var z=a.get("context"),Z=c.rotate,rt=c.x,ft=c.y;z.rotate(-Z*Math.PI/180);var ct=new Image;ct.crossOrigin="anonymous",ct.src=t,ct.onload=function(){if(z.drawImage(ct,rt,ft,c.width,c.height),z.rotate(Z*Math.PI/180),f)n.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var gt=document.querySelector(".g6-graph-watermarker");gt||(gt=document.createElement("div"),gt.className="g6-graph-watermarker"),gt.className="g6-graph-watermarker",a.destroyed||(gt.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;"),n.appendChild(gt))}}},e.prototype.setTextWaterMarker=function(t,r){var n=this.get("container");(0,l.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var a=this.get("graphWaterMarker"),o=(0,l.deepMix)({},Al.textWaterMarkerConfig,r),s=o.width,u=o.height,f=o.compatible,c=o.text;if(!(t!=null&&t.length)){var d=f?n:document.querySelector(".g6-graph-watermarker");d&&(d.style.cssText=void 0),a&&a.clear();return}if(a)a.clear();else{var A={container:n,width:s,height:u,capture:!1},D=this.get("pixelRatio");D&&(A.pixelRatio=D,window.devicePixelRatio=D),a=new dc(A),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var z=a.get("context"),Z=c.rotate,rt=c.fill,ft=c.fontFamily,ct=c.fontSize,gt=c.baseline,Ct=c.x,Ht=c.y,ne=c.lineHeight;z.rotate(-Z*Math.PI/180),z.font="".concat(ct,"px ").concat(ft),z.fillStyle=rt,z.textBaseline=gt;for(var re=(0,l.isString)(t)?[t]:t,Me=re.length-1;Me>=0;Me--)z.fillText(re[Me],Ct,Ht+Me*ne);if(z.rotate(Z*Math.PI/180),f)n.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var je=document.querySelector(".g6-graph-watermarker");je||(je=document.createElement("div"),je.className="g6-graph-watermarker"),je.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;"),n.appendChild(je)}},e.prototype.destroy=function(){var t,r,n,a;(0,l.each)(this.get("plugins"),function(c){c.destroyPlugin()});var o=this.get("tooltips");if(o)for(var s=0;s<o.length;s++){var u=o[s];if(u){var f=u.parentElement;f&&f.removeChild(u)}}(t=this.get("eventController"))===null||t===void 0||t.destroy(),(r=this.get("layoutController"))===null||r===void 0||r.destroy(),(n=this.get("graphWaterMarker"))===null||n===void 0||n.destroy(),(a=document.querySelector(".g6-graph-watermarker"))===null||a===void 0||a.remove(),i.prototype.destroy.call(this)},e}(lp),dg=Ob,Ib=hc.radialLayout,fv=hc.traverseTree,Db=function(i){(0,y.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.layoutAnimating=!1,r.set("removeList",[]),r.set("layoutMethod",r.getLayout()),r}return e.prototype.getLayout=function(){var t=this.get("layout");return t?typeof t=="function"?t:(t.type||(t.type="dendrogram"),t.direction||(t.direction=t.type==="indented"?"LR":"TB"),t.radial?function(r){var n=fh()[t.type](r,t);return Ib(n),n}:function(r){return fh()[t.type](r,t)}):null},e.indexOfChild=function(t,r){var n=-1;return(0,l.each)(t,function(a,o){if(r===a.id)return n=o,!1}),n},e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.animate=!0,t},e.prototype.innerAddChild=function(t,r,n){var a=this,o=t.data;o&&(o.x=t.x,o.y=t.y,o.depth=t.depth);var s=a.addItem("node",o,!1);if(r){if(s.set("parent",r),n){var u=r.get("originAttrs");if(u)s.set("originAttrs",u);else{var f=r.getModel();s.set("originAttrs",{x:f.x,y:f.y})}}var c=r.get("children");c?c.push(s):r.set("children",[s]),a.addItem("edge",{source:r.get("id"),target:s.get("id"),id:"".concat(r.get("id"),":").concat(s.get("id"))},!1)}return(0,l.each)(t.children||[],function(d){a.innerAddChild(d,s,n)}),a.emit("afteraddchild",{item:s,parent:r}),s},e.prototype.innerUpdateChild=function(t,r,n){var a=this,o=a.findById(t.id);if(!o){a.innerAddChild(t,r,n);return}(0,l.each)(t.children||[],function(z){a.innerUpdateChild(z,o,n)});var s=o.get("children");if(s){var u=s.length;if(u>0)for(var f=s.length-1;f>=0;f--){var c=s[f].getModel();e.indexOfChild(t.children||[],c.id)===-1&&(a.innerRemoveChild(c.id,{x:t.x,y:t.y},n),s.splice(f,1))}}var d,A;o.get("originAttrs")&&(d=o.get("originAttrs").x,A=o.get("originAttrs").y);var D=o.getModel();n&&o.set("originAttrs",{x:D.x,y:D.y}),o.set("model",Object.assign(D,t.data)),(d!==t.x||A!==t.y)&&o.updatePosition({x:t.x,y:t.y})},e.prototype.innerRemoveChild=function(t,r,n){var a=this,o=a.findById(t);if(o)if((0,l.each)(o.get("children"),function(u){a.innerRemoveChild(u.getModel().id,r,n)}),n){var s=o.getModel();o.set("to",r),o.set("originAttrs",{x:s.x,y:s.y}),a.get("removeList").push(o)}else a.removeItem(o,!1)},e.prototype.changeData=function(t,r){r===void 0&&(r=!0);var n=this;this.getNodes().map(function(a){return n.clearItemStates(a)}),this.getEdges().map(function(a){return n.clearItemStates(a)}),r&&this.get("enabledStack")&&this.pushStack("changedata",{before:n.get("originData"),after:t||n.get("data")}),t?(n.data(t),n.render(!1)):n.layout(this.get("fitView"))},e.prototype.changeLayout=function(t){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon");var r=this;r.updateLayout(t)},e.prototype.updateLayout=function(t,r,n,a){a===void 0&&(a=!0);var o=this;if(!t){console.warn("layout cannot be null");return}if(a&&this.get("enabledStack")&&this.pushStack("layout",{before:o.get("layout"),after:t}),o.set("layout",t),o.set("layoutMethod",o.getLayout()),o.layout(),r){var s=n;s||(r==="begin"?s={x:0,y:0}:s={x:this.getWidth()/2,y:this.getHeight()/2}),s=this.getPointByCanvas(s.x,s.y);var u=this.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];s.x=s.x*u[0]+u[6],s.y=s.y*u[0]+u[7];var f=this.getGroup().getCanvasBBox(),c=f.minX,d=f.maxX,A=f.minY,D=f.maxY,z={x:(c+d)/2,y:(A+D)/2};r==="begin"&&(z.x=c,z.y=A),this.translate(s.x-z.x,s.y-z.y)}},e.prototype.refreshLayout=function(t){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon");var r=this;r.layout(t)},e.prototype.layout=function(t){var r=this,n=this,a=n.get("data"),o=n.get("layoutMethod"),s=n.get("layout"),u=a;if(s!=null&&s.excludeInvisibles){a=(0,l.clone)(n.get("data"));var f={};fv(a,function(A){var D=A.children;if(!(D!=null&&D.length))return!0;for(var z=D.length-1;z>=0;z--){var Z=r.findById(D[z].id),rt=Z?!Z.isVisible():D[z].visible===!1;rt&&(f[A.id]=f[A.id]||[],f[A.id].push({idx:z,child:D.splice(z,1)[0]}))}}),u=o?o(a,n.get("layout")):a,fv(u,function(A){var D=f[A.id];if(D!=null&&D.length)for(var z=D.length-1;z>=0;z--){var Z=D[z],rt=Z.idx,ft=Z.child;A.children.splice(rt,0,ft)}})}else u=o?o(a,n.get("layout")):a;var c=n.get("animate");if(n.emit("beforerefreshlayout",{data:a,layoutData:u}),n.emit("beforelayout"),n.innerUpdateChild(u,void 0,c),t){var d=n.get("viewController");d.fitView()}c?n.layoutAnimate(u):(n.refresh(),n.paint()),n.emit("afterrefreshlayout",{data:a,layoutData:u}),n.emit("afterlayout")},e.prototype.addChild=function(t,r,n){n===void 0&&(n=!0);var a=this;a.emit("beforeaddchild",{model:t,parent:r}),(0,l.isString)(r)||(r=r.get("id"));var o=a.findDataById(r);if(o){o.children||(o.children=[]),o.children.push(t);var s=a.findById(r);s.refresh(),a.changeData(void 0,n)}},e.prototype.updateChildren=function(t,r,n){n===void 0&&(n=!0);var a=this,o=a.findById(r);if(!r||!o){console.warn("Update children failed! There is no node with id '".concat(r,"'"));return}var s=a.findDataById(r);s.children=t,o.refresh(),a.changeData(void 0,n)},e.prototype.updateChild=function(t,r,n){n===void 0&&(n=!0);var a=this;if(!r||!a.findById(r)){a.changeData(t,n);return}var o=a.findDataById(r),s=a.findById(t.id);if(o.children||(o.children=[]),!s)o.children.push(t);else{var u=e.indexOfChild(o.children,t.id);u>-1&&(o.children[u]=t)}var f=a.findById(r);f==null||f.refresh(),a.changeData(void 0,n)},e.prototype.removeChild=function(t,r){r===void 0&&(r=!0);var n=this,a=n.findById(t),o;if(a?o=a==null?void 0:a.get("parent"):o=n.getNodes().find(function(d){var A=d.getModel().children||[];return!!A.find(function(D){return D.id===t})}),o&&!o.destroyed){var s=o.get("id"),u=n.findDataById(s),f=u&&u.children||[],c=e.indexOfChild(f,t);f.splice(c,1),o.refresh()}n.changeData(void 0,r)},e.prototype.findDataById=function(t,r){var n=this;if(r||(r=n.get("data")),t===r.id)return r;var a=null;return(0,l.each)(r.children||[],function(o){if(o.id===t)return a=o,!1;if(a=n.findDataById(t,o),a)return!1}),a},e.prototype.layoutAnimate=function(t,r){var n=this,a=this.get("animateCfg");n.emit("beforeanimate",{data:t}),n.getEdges().forEach(function(o){var s=o.get("model");s.sourceAnchor||(s.sourceAnchor=o.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(o){fv(t,function(s){var u=n.findById(s.id);if(u){var f=u.get("originAttrs"),c=u.get("model");if(f||(f={x:c.x,y:c.y},u.set("originAttrs",f)),r){var d=r(u,o,f,t);u.set("model",Object.assign(c,d))}else c.x=f.x+(s.x-f.x)*o,c.y=f.y+(s.y-f.y)*o}return!0}),(0,l.each)(n.get("removeList"),function(s){var u=s.getModel(),f=s.get("originAttrs"),c=s.get("to");u.x=f.x+(c.x-f.x)*o,u.y=f.y+(c.y-f.y)*o}),n.refreshPositions()},{duration:a.duration,easing:a.ease,callback:function(){(0,l.each)(n.getNodes(),function(s){s.set("originAttrs",null)}),(0,l.each)(n.get("removeList"),function(s){n.removeItem(s,!1)}),n.set("removeList",[]),a.callback&&a.callback(),n.emit("afteranimate",{data:t})},delay:a.delay})},e.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},e.prototype.isLayoutAnimating=function(){return this.layoutAnimating},e.prototype.render=function(t){t===void 0&&(t=!0);var r=this,n=r.get("data");if(!n||!(0,l.isObject)(n)||!Object.keys(n).length)throw new Error("data must be defined first");r.clear(),t&&this.get("enabledStack")&&this.clearStack(),r.emit("beforerender"),r.layout(this.get("fitView")),r.emit("afterrender")},e.prototype.save=function(){return this.get("data")},e.prototype.data=function(t){i.prototype.data.call(this,t),this.set("originData",JSON.parse(JSON.stringify(t)))},e}(dg),Pb=Db;function gi(i,e){if(i)for(var t in e)e.hasOwnProperty(t)&&(i.style[t]=e[t]);return i}var Lb=function(){function i(e){this._cfgs=(0,l.deepMix)(this.getDefaultCfgs(),e),this._events={},this.destroyed=!1}return i.prototype.getDefaultCfgs=function(){return{}},i.prototype.initPlugin=function(e){var t=this;t.set("graph",e);var r=t.getEvents(),n={};(0,l.each)(r,function(a,o){var s=(0,l.wrapBehavior)(t,a);n[o]=s,e.on(o,s)}),this._events=n,this.init()},i.prototype.getEvents=function(){return{}},i.prototype.get=function(e){var t;return(t=this._cfgs)===null||t===void 0?void 0:t[e]},i.prototype.set=function(e,t){this._cfgs[e]=t},i.prototype.destroy=function(){},i.prototype.destroyPlugin=function(){this.destroy();var e=this.get("graph"),t=this._events;(0,l.each)(t,function(r,n){e.off(n,r)}),this._events=null,this._cfgs=null,this.destroyed=!0},i}(),lu=Lb,Nb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),hg="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",Rb=function(i){Nb(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{img:hg,follow:!0}},e.prototype.init=function(){var t=this.get("graph"),r=t.get("container"),n=t.get("canvas").get("el"),a=this.get("img")||hg;a.includes("url(")||(a='url("'.concat(a,'")'));var o=qo(`<div class='g6-grid-container' style="position:absolute;overflow:hidden;z-index: -1;"></div>`),s=qo(`<div
        class='g6-grid'
        style='position:absolute;
        background-image: `.concat(a,`;
        user-select: none
        '></div>`));this.set("container",o),this.set("gridContainer",s),this.positionInit(),o.appendChild(s),r.insertBefore(o,n)},e.prototype.positionInit=function(){var t=this.get("graph"),r=t.get("minZoom"),n=t.get("width"),a=t.get("height");gi(this.get("container"),{width:"".concat(n,"px"),height:"".concat(a,"px")});var o=n*80/r,s=a*80/r;gi(this.get("gridContainer"),{width:"".concat(o,"px"),height:"".concat(s,"px"),left:"-".concat(o/2,"px"),top:"-".concat(s/2,"px")})},e.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},e.prototype.updateGrid=function(t){var r=this.get("gridContainer"),n=t.matrix;n||(n=[1,0,0,0,1,0,0,0,1]);var a=this.get("follow"),o="matrix(".concat(n[0],", ").concat(n[1],", ").concat(n[3],", ").concat(n[4],", ").concat(a?n[6]:"0",", ").concat(a?n[7]:"0",")");gi(r,{transform:o})},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t=this.get("graph"),r=t.get("container"),n=this.get("container");r.removeChild(n)},e}(lu),kb=Rb,Bb=_(738186),lh=_.n(Bb),Fb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();typeof document!="undefined"&&lh()(`
  .g6-component-contextmenu {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .g6-contextmenu-ul {
    padding: 0;
    margin: 0;
    list-style: none;
  }

`);var zb=function(i){Fb(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(r){return`
          <ul class='g6-contextmenu-ul'>
            <li>\u83DC\u5355\u98791</li>
            <li>\u83DC\u5355\u98792</li>
          </ul>
        `},shouldBegin:function(r){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{click:"onMenuShow",touchend:"onMenuShow"}:{contextmenu:"onMenuShow"}},e.prototype.init=function(){var t=this.get("className"),r=qo("<div class=".concat(t||"g6-component-contextmenu","></div>"));gi(r,{top:"0px",position:"absolute",visibility:"hidden"});var n=this.get("container");n||(n=this.get("graph").get("container")),(0,l.isString)(n)&&(n=document.getElementById(n)),n.appendChild(r),this.set("menu",r)},e.prototype.onMenuShow=function(t){var r=this;t.preventDefault();var n=this.get("itemTypes");if(t.item){if(t.item&&t.item.getType&&n.indexOf(t.item.getType())===-1){r.onMenuHide();return}}else if(n.indexOf("canvas")===-1){r.onMenuHide();return}var a=this.get("shouldBegin");if(a(t)){var o=this.get("menu"),s=this.get("getContent"),u=this.get("graph"),f=s(t,u);(0,l.isString)(f)?o.innerHTML=f:o.innerHTML=f.outerHTML,this.removeMenuEventListener();var c=this.get("handleMenuClick");if(c){var d=function(Me){c(Me.target,t.item,u)};this.set("handleMenuClickWrapper",d),o.addEventListener("click",d)}var A=u.get("width"),D=u.get("height"),z=o.getBoundingClientRect(),Z=this.get("offsetX")||0,rt=this.get("offsetY")||0,ft=u.getContainer().offsetTop,ct=u.getContainer().offsetLeft,gt=t.canvasX+ct+Z,Ct=t.canvasY+ft+rt;gt+z.width>A&&(gt=t.canvasX-z.width-Z+ct),Ct+z.height>D&&(Ct=t.canvasY-z.height-rt+ft),gi(o,{top:"".concat(Ct,"px"),left:"".concat(gt,"px"),visibility:"visible"});var Ht=this.get("trigger")==="click",ne=function(Me){if(Ht){Ht=!1;return}r.onMenuHide()};document.body.addEventListener("click",ne),this.set("handler",ne)}},e.prototype.removeMenuEventListener=function(){var t=this.get("handleMenuClickWrapper"),r=this.get("handler");if(t){var n=this.get("menu");n.removeEventListener("click",t),this.set("handleMenuClickWrapper",null)}r&&document.body.removeEventListener("click",r)},e.prototype.onMenuHide=function(){var t=this.get("menu");t&&gi(t,{visibility:"hidden"}),this.removeMenuEventListener()},e.prototype.destroy=function(){var t=this.get("menu");if(this.removeMenuEventListener(),t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,l.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}},e}(lu),Gb=zb,Ub=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),cv=function(){return cv=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},cv.apply(this,arguments)},vg=Math.max,Wb=dt,Yb="default",Xb="keyShape",jb="delegate",pg="svg",Vb=function(i){Ub(e,i);function e(t){var r=i.call(this,t)||this;return r.handleUpdateCanvas=(0,l.debounce)(function(n){var a=r;a.destroyed||a.updateCanvas()},100,!1),r}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0,hideEdge:!1}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,r=this._cfgs,n=r.size,a=r.graph;if(!this.destroyed){var o=this.get("canvas"),s=o.get("container"),u=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,f=navigator.userAgent.toLowerCase().indexOf("safari")>-1,c=qo(`
      <div
        class=`.concat(r.viewportClassName,`
        style='position:absolute;
          left:0;
          top:0;
          box-sizing:border-box;
          outline: 2px solid #1980ff;
          cursor:move'
        draggable=`).concat(!(f||u),`
      </div>`)),d=0,A=0,D=!1,z=0,Z=0,rt=0,ft=0,ct=0,gt=0,Ct=f||u?"mousedown":"dragstart";c.addEventListener(Ct,function(Me){var je,Re;if(Me.dataTransfer){var ir=new Image;ir.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",(Re=(je=Me.dataTransfer).setDragImage)===null||Re===void 0||Re.call(je,ir,0,0);try{Me.dataTransfer.setData("text/html","view-port-minimap")}catch(pn){Me.dataTransfer.setData("text","view-port-minimap")}}if(r.refresh=!1,Me.target===c){var Sr=c.style;z=parseInt(Sr.left,10),Z=parseInt(Sr.top,10),rt=parseInt(Sr.width,10),ft=parseInt(Sr.height,10),!(rt>n[0]||ft>n[1])&&(gt=a.getZoom(),ct=t.get("ratio"),D=!0,d=Me.clientX,A=Me.clientY)}},!1);var Ht=function(je){if(!(!D||(0,l.isNil)(je.clientX)||(0,l.isNil)(je.clientY))){var Re=d-je.clientX,ir=A-je.clientY;(z-Re<0||z-Re+rt>=n[0])&&(Re=0),(Z-ir<0||Z-ir+ft>=n[1])&&(ir=0),z-=Re,Z-=ir,gi(c,{left:"".concat(z,"px"),top:"".concat(Z,"px")}),a.translate(Re*gt/ct,ir*gt/ct),d=je.clientX,A=je.clientY}};!f&&!u&&c.addEventListener("drag",Ht,!1);var ne=function(){D=!1,r.refresh=!0},re=f||u?"mouseup":"dragend";c.addEventListener(re,ne,!1),s.addEventListener("mouseleave",ne),s.addEventListener("mouseup",ne),(f||u)&&s.addEventListener("mousemove",Ht,!1),this.set("viewport",c),s.appendChild(c)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),r=this.get("totaldx"),n=this.get("totaldy"),a=this.get("graph"),o=this.get("size"),s=a.get("canvas").get("el"),u=a.get("width")||s.scrollWidth||500,f=a.get("height")||s.scrollHeight||500,c=a.getPointByCanvas(0,0),d=a.getPointByCanvas(u,f),A=this.get("viewport");A||this.initViewport();var D=(d.x-c.x)*t,z=(d.y-c.y)*t,Z=c.x*t+r,rt=c.y*t+n,ft=Z+D,ct=rt+z;Z<0&&(D+=Z,Z=0),ft>o[0]&&(D=D-(ft-o[0])),rt<0&&(z+=rt,rt=0),ct>o[1]&&(z=z-(ct-o[1])),this.set("ratio",t);var gt="".concat(Z,"px"),Ct="".concat(rt,"px");gi(A,{left:gt,top:Ct,width:"".concat(D,"px"),height:"".concat(z,"px")})}},e.prototype.updateGraphShapes=function(){var t=this._cfgs.graph,r=this.get("canvas"),n=t.get("group");if(!n.destroyed){r.clear();var a;this.get("hideEdge")?(a=r.addGroup(),n.get("children").forEach(function(s){s.get("id").includes("-edge")||a.add(s.clone())})):(a=n.clone(),a.resetMatrix(),r.add(a));var o=t.get("renderer");o===pg&&this.updateVisible(a)}},e.prototype.updateVisible=function(t){var r=this;if(!t.isGroup()&&!t.get("visible"))t.hide();else{var n=t.get("children");if(!n||!n.length)return;n.forEach(function(a){a.get("visible")||a.hide(),r.updateVisible(a)})}},e.prototype.updateKeyShapes=function(){var t=this,r=this._cfgs.graph,n=this.get("canvas"),a=n.get("children")[0]||n.addGroup();this.get("hideEdge")||(0,l.each)(r.getEdges(),function(u){t.updateOneEdgeKeyShape(u,a)}),(0,l.each)(r.getNodes(),function(u){t.updateOneNodeKeyShape(u,a)});var o=r.getCombos();if(o&&o.length){var s=a.find(function(u){return u.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||((0,l.each)(o,function(u){t.updateOneComboKeyShape(u,s)}),s==null||s.sort(),s==null||s.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.updateOneComboKeyShape=function(t,r){if(!this.destroyed){var n=this.get("itemMap")||{},a=n[t.get("id")],o=t.getBBox(),s=t.get("keyShape").clone(),u=s.attr(),f={x:o.centerX,y:o.centerY};a?f=Object.assign(u,f):(a=s,r.add(a));var c=a.get("type");(c==="rect"||c==="image")&&(f.x=o.minX,f.y=o.minY),a.attr(f),t.isVisible()?a.show():a.hide(),a.exist=!0;var d=t.getModel().depth;isNaN(d)||a.set("zIndex",d),n[t.get("id")]=a,this.set("itemMap",n)}},e.prototype.updateOneNodeKeyShape=function(t,r){var n=this.get("itemMap")||{},a=n[t.get("id")],o=t.getBBox(),s=t.get("keyShape").clone(),u=s.attr(),f={x:o.centerX,y:o.centerY};a?(f=Object.assign(u,f),a.toFront()):(a=s,r.add(a));var c=a.get("type");(c==="rect"||c==="image")&&(f.x=o.minX,f.y=o.minY),a.attr(f),t.isVisible()?a.show():a.hide(),a.exist=!0;var d=t.getModel().depth;isNaN(d)||a.set("zIndex",d),n[t.get("id")]=a,this.set("itemMap",n)},e.prototype.updateDelegateShapes=function(){var t=this,r=this._cfgs.graph,n=this.get("canvas"),a=n.get("children")[0]||n.addGroup();this.get("hideEdge")||(0,l.each)(r.getEdges(),function(u){t.updateOneEdgeKeyShape(u,a)}),(0,l.each)(r.getNodes(),function(u){t.updateOneNodeDelegateShape(u,a)});var o=r.getCombos();if(o&&o.length){var s=a.find(function(u){return u.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||((0,l.each)(o,function(u){t.updateOneComboKeyShape(u,s)}),s==null||s.sort(),s==null||s.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.clearDestroyedShapes=function(){var t=this.get("itemMap")||{},r=Object.keys(t);if(!(!r||r.length===0))for(var n=r.length-1;n>=0;n--){var a=t[r[n]],o=a.exist;a.exist=!1,o||(a.remove(),delete t[r[n]])}},e.prototype.updateOneEdgeKeyShape=function(t,r){var n=this.get("itemMap")||{},a=n[t.get("id")];if(a){var o=t.get("keyShape").attr("path");a.attr("path",o)}else a=t.get("keyShape").clone(),r.add(a);t.isVisible()?a.show():a.hide(),a.exist=!0,n[t.get("id")]=a,this.set("itemMap",n)},e.prototype.updateOneNodeDelegateShape=function(t,r){var n=this.get("delegateStyle"),a=this.get("itemMap")||{},o=a[t.get("id")],s=t.getBBox();if(o){var u={x:s.minX,y:s.minY,width:s.width,height:s.height};o.attr(u),o.toFront()}else o=r.addShape("rect",{attrs:cv({x:s.minX,y:s.minY,width:s.width,height:s.height},n),name:"minimap-node-shape"});t.isVisible()?o.show():o.hide(),o.exist=!0,a[t.get("id")]=o,this.set("itemMap",a)},e.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},e.prototype.initContainer=function(){var t=this,r=t.get("graph"),n=t.get("size"),a=t.get("className"),o=t.get("container"),s=qo("<div class='".concat(a,"' style='width: ").concat(n[0],"px; height: ").concat(n[1],"px; overflow: hidden'></div>"));(0,l.isString)(o)&&(o=document.getElementById(o)),o?o.appendChild(s):r.get("container").appendChild(s),t.set("container",s);var u=qo('<div class="g6-minimap-container" style="position: relative;"></div>');s.appendChild(u),u.addEventListener("dragenter",function(d){d.preventDefault()}),u.addEventListener("dragover",function(d){d.preventDefault()});var f,c=r.get("renderer");c===pg?f=new Cd({container:u,width:n[0],height:n[1]}):f=new dc({container:u,width:n[0],height:n[1]}),t.set("canvas",f),t.updateCanvas()},e.prototype.updateCanvas=function(){if(!this.destroyed){var t=this.get("refresh");if(t){var r=this.get("graph");if(!r.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var n=this.get("size"),a=this.get("canvas"),o=this.get("type"),s=this.get("padding");if(!a.destroyed){switch(o){case Yb:this.updateGraphShapes();break;case Xb:this.updateKeyShapes();break;case jb:this.updateDelegateShapes();break;default:break}var u=a.get("children")[0];if(u){u.resetMatrix();var f=u.getCanvasBBox(),c=r.get("canvas").getCanvasBBox(),d=r.getZoom()||1,A=c.width/d,D=c.height/d;Number.isFinite(f.width)&&(A=vg(f.width,A),D=vg(f.height,D)),A+=2*s,D+=2*s;var z=Math.min(n[0]/A,n[1]/D),Z=[1,0,0,0,1,0,0,0,1],rt=0,ft=0;Number.isFinite(f.minX)&&(rt=-f.minX),Number.isFinite(f.minY)&&(ft=-f.minY);var ct=(n[0]-(A-2*s)*z)/2,gt=(n[1]-(D-2*s)*z)/2;Z=Wb(Z,[["t",rt,ft],["s",z,z],["t",ct,gt]]),u.setMatrix(Z),this.set("ratio",z),this.set("totaldx",ct+rt*z),this.set("totaldy",gt+ft*z),this.set("dx",ct),this.set("dy",gt),this.updateViewport()}}}}}},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t;(t=this.get("canvas"))===null||t===void 0||t.destroy();var r=this.get("container");r!=null&&r.parentNode&&r.parentNode.removeChild(r)},e}(lu),Hb=Vb,Zb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();function Af(i,e,t){var r=i.x-e.x,n=i.y-e.y;return!t||Math.abs(r)>t||Math.abs(n)>t?Math.sqrt(r*r+n*n):t}function Kb(i,e){return i.x*e.x+i.y*e.y}function gg(i,e){var t=(e.source.y-e.target.y)/(e.source.x-e.target.x),r=(t*t*e.source.x+t*(i.y-e.source.y)+i.x)/(t*t+1),n=t*(r-e.source.x)+e.source.y;return{x:r,y:n}}var $b=function(i){Zb(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},e.prototype.init=function(){var t=this.get("graph"),r=this.get("onTick"),n=function(){r&&r(),t.refreshPositions()};this.set("tick",n)},e.prototype.bundling=function(t){var r=this;if(r.set("data",t),!r.isTicking()){var n=t.edges||[],a=t.nodes||[],o={},s=!1;if(a.forEach(function(Ct){(Ct.x===null||!Ct.y===null||Ct.x===void 0||!Ct.y===void 0)&&(s=!0),o[Ct.id]=Ct}),s)throw new Error("please layout the graph or assign x and y for nodes first");r.set("nodeIdMap",o);var u=r.get("divisions"),f=r.get("divRate"),c=r.divideEdges(u);r.set("edgePoints",c);var d=r.getEdgeBundles();r.set("edgeBundles",d);for(var A=r.get("cycles"),D=r.get("iterations"),z=r.get("iterRate"),Z=r.get("lambda"),rt=0;rt<A;rt++){for(var ft=function(Ht){var ne=[];n.forEach(function(re,Me){if(re.source!==re.target){var je=o[re.source],Re=o[re.target];ne[Me]=r.getEdgeForces({source:je,target:Re},Me,u,Z);for(var ir=0;ir<u+1;ir++)c[Me][ir].x+=ne[Me][ir].x,c[Me][ir].y+=ne[Me][ir].y}})},ct=0;ct<D;ct++)ft(ct);Z=Z/2,u*=f,D*=z,c=r.divideEdges(u),r.set("edgePoints",c)}n.forEach(function(Ct,Ht){Ct.source!==Ct.target&&(Ct.type="polyline",Ct.controlPoints=c[Ht].slice(1,c[Ht].length-1))});var gt=r.get("graph");gt.refresh()}},e.prototype.updateBundling=function(t){var r=this,n=t.data;if(n&&r.set("data",n),r.get("ticking")&&r.set("ticking",!1),Object.keys(t).forEach(function(o){r.set(o,t[o])}),t.onTick){var a=this.get("graph");r.set("tick",function(){t.onTick(),a.refresh()})}r.bundling(n)},e.prototype.divideEdges=function(t){var r=this,n=r.get("data").edges,a=r.get("nodeIdMap"),o=r.get("edgePoints");return(!o||o===void 0)&&(o=[]),n.forEach(function(s,u){var f;(!o[u]||o[u]===void 0)&&(o[u]=[]);var c=a[s.source],d=a[s.target];if(t===1)o[u].push({x:c.x,y:c.y}),o[u].push({x:.5*(c.x+d.x),y:.5*(c.y+d.y)}),o[u].push({x:d.x,y:d.y});else{var A=0;!((f=o[u])===null||f===void 0)&&f.length?A=r.getEdgeLength(o[u]):A=Af({x:c.x,y:c.y},{x:d.x,y:d.y});var D=A/(t+1),z=D,Z=[{x:c.x,y:c.y}];o[u].forEach(function(rt,ft){if(ft!==0){for(var ct=Af(rt,o[u][ft-1]);ct>z;){var gt=z/ct,Ct={x:o[u][ft-1].x,y:o[u][ft-1].y};Ct.x+=gt*(rt.x-o[u][ft-1].x),Ct.y+=gt*(rt.y-o[u][ft-1].y),Z.push(Ct),ct-=z,z=D}z-=ct}}),Z.push({x:d.x,y:d.y}),o[u]=Z}}),o},e.prototype.getEdgeLength=function(t){var r=0;return t.forEach(function(n,a){a!==0&&(r+=Af(n,t[a-1]))}),r},e.prototype.getEdgeBundles=function(){var t=this,r=t.get("data"),n=r.edges||[],a=t.get("bundleThreshold"),o=t.get("nodeIdMap"),s=t.get("edgeBundles");return s||(s=[]),n.forEach(function(u,f){(!s[f]||s[f]===void 0)&&(s[f]=[])}),n.forEach(function(u,f){var c=o[u.source],d=o[u.target];n.forEach(function(A,D){if(!(D<=f)){var z=o[A.source],Z=o[A.target],rt=t.getBundleScore({source:c,target:d},{source:z,target:Z});rt>=a&&(s[f].push(D),s[D].push(f))}})}),s},e.prototype.getBundleScore=function(t,r){var n=this;t.vx=t.target.x-t.source.x,t.vy=t.target.y-t.source.y,r.vx=r.target.x-r.source.x,r.vy=r.target.y-r.source.y,t.length=Af({x:t.source.x,y:t.source.y},{x:t.target.x,y:t.target.y}),r.length=Af({x:r.source.x,y:r.source.y},{x:r.target.x,y:r.target.y});var a=n.getAngleScore(t,r),o=n.getScaleScore(t,r),s=n.getPositionScore(t,r),u=n.getVisibilityScore(t,r);return a*o*s*u},e.prototype.getAngleScore=function(t,r){var n=Kb({x:t.vx,y:t.vy},{x:r.vx,y:r.vy});return n/(t.length*r.length)},e.prototype.getScaleScore=function(t,r){var n=(t.length+r.length)/2,a=2/(n/Math.min(t.length,r.length)+Math.max(t.length,r.length)/n);return a},e.prototype.getPositionScore=function(t,r){var n=(t.length+r.length)/2,a={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2},o={x:(r.source.x+r.target.x)/2,y:(r.source.y+r.target.y)/2},s=Af(a,o);return n/(n+s)},e.prototype.getVisibilityScore=function(t,r){var n=this.getEdgeVisibility(t,r),a=this.getEdgeVisibility(r,t);return n<a?n:a},e.prototype.getEdgeVisibility=function(t,r){var n=gg(r.source,t),a=gg(r.target,t),o={x:(n.x+a.x)/2,y:(n.y+a.y)/2},s={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2};return Math.max(0,1-2*Af(o,s)/Af(n,a))},e.prototype.getEdgeForces=function(t,r,n,a){for(var o=this,s=o.get("edgePoints"),u=o.get("K"),f=u/(Af(t.source,t.target)*(n+1)),c=[{x:0,y:0}],d=1;d<n;d++){var A={x:0,y:0},D=o.getSpringForce({pre:s[r][d-1],cur:s[r][d],next:s[r][d+1]},f),z=o.getElectrostaticForce(d,r);A.x=a*(D.x+z.x),A.y=a*(D.y+z.y),c.push(A)}return c.push({x:0,y:0}),c},e.prototype.getSpringForce=function(t,r){var n=t.pre.x+t.next.x-2*t.cur.x,a=t.pre.y+t.next.y-2*t.cur.y;return n*=r,a*=r,{x:n,y:a}},e.prototype.getElectrostaticForce=function(t,r){var n=this,a=n.get("eps"),o=n.get("edgeBundles"),s=n.get("edgePoints"),u=o[r],f={x:0,y:0};return u.forEach(function(c){var d={x:s[c][t].x-s[r][t].x,y:s[c][t].y-s[r][t].y};if(Math.abs(d.x)>a||Math.abs(d.y)>a){var A=Af(s[c][t],s[r][t]),D=1/A;f.x+=d.x*D,f.y+=d.y*D}}),f},e.prototype.isTicking=function(){return this.get("ticking")},e.prototype.getSimulation=function(){return this.get("forceSimulation")},e.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),i.prototype.destroy.call(this)},e}(lu),qb=$b,Qb=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),lv=function(){return lv=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},lv.apply(this,arguments)},dh=.05,mg={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},Jb=function(i){Qb(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:(0,l.clone)(mg),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"magnify"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"magnify"};break}return t},e.prototype.init=function(){var t=this,r=t.get("r");t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{}),t.set("r2",r*r);var n=t.get("d");t.set("molecularParam",(n+1)*r)},e.prototype.createDelegate=function(t){var r=this,n=this,a=n.get("delegate");(!a||a.destroyed)&&(n.magnify(t),a=n.get("delegate"),a.on("dragstart",function(o){n.set("delegateCenterDiff",{x:a.attr("x")-o.x,y:a.attr("y")-o.y})}),a.on("drag",function(o){n.magnify(o)}),this.get("scaleDBy")==="wheel"&&a.on("mousewheel",function(o){r.scaleDByWheel(o)}),this.get("scaleRBy")==="wheel"&&a.on("mousewheel",function(o){n.scaleRByWheel(o)}))},e.prototype.scaleRByWheel=function(t){var r=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=r.get("graph"),a,o=r.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,u=s||n.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?a=1-dh:a=1/(1-dh);var f=r.get("maxR"),c=r.get("minR"),d=r.get("r");(d>(f||n.get("height"))&&a>1||d<(c||n.get("height")*.05)&&a<1)&&(a=1),d*=a,r.set("r",d),r.set("r2",d*d);var A=r.get("d");r.set("molecularParam",(A+1)*d),r.set("delegateCenterDiff",void 0),r.magnify(t,u)}},e.prototype.scaleRByDrag=function(t){var r=this;if(t){var n=r.get("dragPrePos"),a=r.get("graph"),o,s=a.getPointByClient(t.clientX,t.clientY);t.x-n.x<0?o=1-dh:o=1/(1-dh);var u=r.get("maxR"),f=r.get("minR"),c=r.get("r");(c>(u||a.get("height"))&&o>1||c<(f||a.get("height")*.05)&&o<1)&&(o=1),c*=o,r.set("r",c),r.set("r2",c*c);var d=r.get("d");r.set("molecularParam",(d+1)*c),r.magnify(t,s),r.set("dragPrePos",{x:t.x,y:t.y})}},e.prototype.scaleDByWheel=function(t){var r=this;if(!(!t&&!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=0;t.originalEvent.wheelDelta<0?n=-.1:n=.1;var a=r.get("d"),o=a+n,s=r.get("maxD"),u=r.get("minD");if(o<s&&o>u){r.set("d",o);var f=r.get("r");r.set("molecularParam",(o+1)*f);var c=r.get("delegate"),d=c?{x:c.attr("x"),y:c.attr("y")}:void 0;r.set("delegateCenterDiff",void 0),r.magnify(t,d)}}},e.prototype.scaleDByDrag=function(t){var r=this,n=r.get("dragPrePos"),a=t.x-n.x>0?.1:-.1,o=r.get("d"),s=o+a,u=r.get("maxD"),f=r.get("minD");if(s<u&&s>f){r.set("d",s);var c=r.get("r");r.set("molecularParam",(s+1)*c),r.magnify(t)}r.set("dragPrePos",{x:t.x,y:t.y})},e.prototype.magnify=function(t,r){var n=this;n.restoreCache();var a=n.get("graph"),o=n.get("cachedMagnifiedModels"),s=n.get("cachedOriginPositions"),u=n.get("showLabel"),f=n.get("r"),c=n.get("r2"),d=n.get("d"),A=n.get("molecularParam"),D=a.getNodes(),z=D.length,Z=r?{x:r.x,y:r.y}:{x:t.x,y:t.y};n.get("dragging")&&(n.get("trigger")==="mousemove"||n.get("trigger")==="click")&&(Z=n.get("cacheCenter"));var rt=n.get("delegateCenterDiff");rt&&(Z.x+=rt.x,Z.y+=rt.y),n.updateDelegate(Z,f);for(var ft=0;ft<z;ft++){var ct=D[ft].getModel(),gt=ct.x,Ct=ct.y;if(!(isNaN(gt)||isNaN(Ct))){var Ht=(gt-Z.x)*(gt-Z.x)+(Ct-Z.y)*(Ct-Z.y);if(!isNaN(Ht)&&Ht<c&&Ht!==0){var ne=Math.sqrt(Ht),re=A*ne/(d*ne+f),Me=(gt-Z.x)/ne,je=(Ct-Z.y)/ne;if(ct.x=Me*re+Z.x,ct.y=je*re+Z.y,s[ct.id]||(s[ct.id]={x:gt,y:Ct,texts:[]}),o.push(ct),u&&2*ne<f)for(var Re=D[ft],ir=Re.getContainer(),Sr=ir.getChildren(),pn=Sr.length,Gn=0;Gn<pn;Gn++){var Pn=Sr[Gn];Pn.get("type")==="text"&&(s[ct.id].texts.push({visible:Pn.get("visible"),shape:Pn}),Pn.set("visible",!0))}}}}a.refreshPositions()},e.prototype.restoreCache=function(){for(var t=this,r=t.get("cachedMagnifiedModels"),n=t.get("cachedOriginPositions"),a=r.length,o=0;o<a;o++){var s=r[o],u=s.id,f=n[u];s.x=f.x,s.y=f.y;for(var c=f.texts.length,d=0;d<c;d++){var A=f.texts[d];A.shape.set("visible",A.visible)}}t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{})},e.prototype.updateParams=function(t){var r=this,n=t.r,a=t.d,o=t.trigger,s=t.minD,u=t.maxD,f=t.minR,c=t.maxR,d=t.scaleDBy,A=t.scaleRBy;isNaN(t.r)||(r.set("r",n),r.set("r2",n*n)),isNaN(a)||r.set("d",a),isNaN(u)||r.set("maxD",u),isNaN(s)||r.set("minD",s),isNaN(c)||r.set("maxR",c),isNaN(f)||r.set("minR",f);var D=r.get("d"),z=r.get("r");if(r.set("molecularParam",(D+1)*z),(o==="mousemove"||o==="click"||o==="drag")&&r.set("trigger",o),d==="drag"||d==="wheel"||d==="unset"){r.set("scaleDBy",d),r.get("delegate").remove(),r.get("delegate").destroy();var Z=r.get("dPercentText");Z&&(Z.remove(),Z.destroy())}if(A==="drag"||A==="wheel"||A==="unset"){r.set("scaleRBy",A),r.get("delegate").remove(),r.get("delegate").destroy();var Z=r.get("dPercentText");Z&&(Z.remove(),Z.destroy())}},e.prototype.updateDelegate=function(t,r){var n=this,a=this,o=a.get("graph"),s=a.get("delegate");if(!s||s.destroyed){var u=o.get("group"),f=a.get("delegateStyle")||mg;s=u.addShape("circle",{attrs:lv({r:r/1.5,x:t.x,y:t.y},f),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&(this.get("scaleRBy")==="wheel"?s.on("mousewheel",function(z){a.scaleRByWheel(z)}):this.get("scaleRBy")==="drag"&&(s.on("dragstart",function(z){a.set("dragging",!0),a.set("cacheCenter",{x:z.x,y:z.y}),a.set("dragPrePos",{x:z.x,y:z.y})}),s.on("drag",function(z){a.scaleRByDrag(z)}),s.on("dragend",function(z){a.set("dragging",!1)})),this.get("scaleDBy")==="wheel"?s.on("mousewheel",function(z){n.scaleDByWheel(z)}):this.get("scaleDBy")==="drag"&&(s.on("dragstart",function(z){a.set("dragging",!0),a.set("cacheCenter",{x:z.x,y:z.y}),a.set("dragPrePos",{x:z.x,y:z.y})}),s.on("drag",function(z){n.scaleDByDrag(z)}),s.on("dragend",function(z){a.set("dragging",!1)})))}else s.attr({x:t.x,y:t.y,r:r/1.5});if(a.get("showDPercent")){var c=Math.round((a.get("d")-a.get("minD"))/(a.get("maxD")-a.get("minD"))*100),d=a.get("dPercentText"),A=t.y+r/1.5+16;if(!d||d.destroyed){var D=o.get("group");d=D.addShape("text",{attrs:{text:"".concat(c,"%"),x:t.x,y:A,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),a.set("dPercentText",d)}else d.attr({text:"".concat(c,"%"),x:t.x,y:A})}a.set("delegate",s)},e.prototype.clear=function(){var t=this.get("graph");this.restoreCache(),t.refreshPositions();var r=this.get("delegate");r&&!r.destroyed&&(r.remove(),r.destroy());var n=this.get("dPercentText");n&&!n.destroyed&&(n.remove(),n.destroy())},e.prototype.destroy=function(){this.clear()},e}(lu),tx=Jb,ex=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yg=.05;typeof document!="undefined"&&lh()(`
  .g6-component-toolbar {
    position: absolute;
    list-style-type: none;
    padding: 6px;
    left: 0px;
    top: 0px;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    margin: 0;
  }
  .g6-component-toolbar li {
    float: left;
    text-align: center;
    width: 35px;
    height: 24px;
    cursor: pointer;
		list-style-type:none;
    list-style: none;
    margin-left: 0px;
  }
  .g6-component-toolbar li .icon {
    opacity: 0.7;
  }
  .g6-component-toolbar li .icon:hover {
    opacity: 1;
  }
`);var rx=function(e){if(!e)return[];if(e.composedPath)return e.composedPath();for(var t=[],r=e.target;r;){if(t.push(r),r.tagName==="HTML")return t.push(document,window),t;r=r.parentElement}return t},nx=function(i){ex(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(r){return`
          <ul class='g6-component-toolbar'>
            <li code='redo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>
              </svg>
            </li>
            <li code='undo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>
              </svg>
            </li>
            <li  code='zoomOut'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>
              </svg>
            </li>
            <li code='zoomIn'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>
              </svg>
            </li>
            <li code='realZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>
              </svg>
            </li>
            <li code='autoZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>
              </svg>
            </li>
          </ul>
        `},zoomSensitivity:2}},e.prototype.init=function(){var t=this,r=this.get("graph"),n=this.get("getContent"),a=n(r),o=a;(0,l.isString)(a)&&(o=qo(a));var s=this.get("className");o.setAttribute("class",s||"g6-component-toolbar");var u=this.get("container");u||(u=this.get("graph").get("container")),(0,l.isString)(u)&&(u=document.getElementById(u)),u.appendChild(o),this.set("toolBar",o);var f=this.get("handleClick");o.addEventListener("click",function(d){var A=rx(d).filter(function(z){return z.nodeName==="LI"});if(A.length!==0){var D=A[0].getAttribute("code");D&&(f?f(D,r):t.handleDefaultOperator(D))}});var c=this.get("position");c&&gi(o,{top:"".concat(c.y,"px"),left:"".concat(c.x,"px")}),this.bindUndoRedo()},e.prototype.bindUndoRedo=function(){var t=this.get("graph"),r=document.querySelector('.g6-component-toolbar li[code="undo"]'),n=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),a=document.querySelector('.g6-component-toolbar li[code="redo"]'),o=document.querySelector('.g6-component-toolbar li[code="redo"] svg');!r||!n||!a||!o||(r.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4"),a.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4"),t.on("stackchange",function(s){var u=s.undoStack,f=s.redoStack,c=u.length,d=f.length;c===0?(r.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4")):(r.removeAttribute("style"),n.removeAttribute("style")),d===0?(a.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4")):(a.removeAttribute("style"),o.removeAttribute("style"))}))},e.prototype.undo=function(){var t=this.get("graph"),r=t.getUndoStack();if(!(!r||r.length===0)){var n=r.pop();if(n){var a=n.action;t.pushStack(a,(0,l.clone)(n.data),"redo");var o=n.data.before;if(a==="add"&&(o=n.data.after),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(d){var A=o[d];A&&A.forEach(function(D){var z=t.findById(D.id);D.visible?t.showItem(z,!1):t.hideItem(z,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(d){var A=o[d];A&&A.forEach(function(D){var z=t.findById(D.id);delete D.id,t.updateItem(z,D,!1),z.getType()==="combo"&&t.updateCombo(z)})});break;case"changedata":t.changeData(o,!1);break;case"delete":{Object.keys(o).forEach(function(d){var A=o[d];A&&A.forEach(function(D){var z=D.itemType;delete D.itemType,t.addItem(z,D,!1)})});break}case"add":Object.keys(o).forEach(function(d){var A=o[d];A&&A.forEach(function(D){t.removeItem(D.id,!1)})});break;case"updateComboTree":Object.keys(o).forEach(function(d){var A=o[d];A&&A.forEach(function(D){t.updateComboTree(D.id,D.parentId,!1)})});break;case"createCombo":var s=n.data.after.combos,u=s[s.length-1];Object.keys(o).forEach(function(d){var A=o[d];A&&A.forEach(function(D){t.updateComboTree(D.id,D.parentId,!1)})}),t.removeItem(u.id,!1);break;case"uncombo":var f=o.combos[o.combos.length-1],c=o.nodes.concat(o.combos).map(function(d){return d.id}).filter(function(d){return d!==f.id});t.createCombo(f,c,!1);break;case"layout":t.updateLayout(o,void 0,void 0,!1);break;default:}}}},e.prototype.redo=function(){var t=this.get("graph"),r=t.getRedoStack();if(!(!r||r.length===0)){var n=r.pop();if(n){var a=n.action,o=n.data.after;if(t.pushStack(a,(0,l.clone)(n.data)),a==="delete"&&(o=n.data.before),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(c){var d=o[c];d&&d.forEach(function(A){var D=t.findById(A.id);A.visible?t.showItem(D,!1):t.hideItem(D,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(c){var d=o[c];d&&d.forEach(function(A){var D=t.findById(A.id);delete A.id,t.updateItem(D,A,!1),D.getType()==="combo"&&t.updateCombo(D)})});break;case"changedata":t.changeData(o,!1);break;case"delete":o.edges&&o.edges.forEach(function(c){t.removeItem(c.id,!1)}),o.nodes&&o.nodes.forEach(function(c){t.removeItem(c.id,!1)}),o.combos&&o.combos.forEach(function(c){t.removeItem(c.id,!1)});break;case"add":{Object.keys(o).forEach(function(c){var d=o[c];d&&d.forEach(function(A){var D=A.itemType;delete A.itemType,t.addItem(D,A,!1)})});break}case"updateComboTree":Object.keys(o).forEach(function(c){var d=o[c];d&&d.forEach(function(A){t.updateComboTree(A.id,A.parentId,!1)})});break;case"createCombo":var s=o.combos[o.combos.length-1];t.createCombo(s,s.children.map(function(c){return c.id}),!1);break;case"uncombo":var u=n.data.before.combos,f=u[u.length-1];t.uncombo(f.id,!1);break;case"layout":t.updateLayout(o,void 0,void 0,!1);break;default:}}}},e.prototype.zoomOut=function(){var t=this.get("graph"),r=t.getZoom(),n=1/(1-yg*this.get("zoomSensitivity")),a=this.get("maxZoom")||t.get("maxZoom");n*r>a||t.zoomTo(r*n)},e.prototype.zoomIn=function(){var t=this.get("graph"),r=t.getZoom(),n=1-yg*this.get("zoomSensitivity"),a=this.get("minZoom")||t.get("minZoom");n*r<a||t.zoomTo(r*n)},e.prototype.realZoom=function(){var t=this.get("graph");t.zoomTo(1)},e.prototype.autoZoom=function(){var t=this.get("graph");t.fitView([20,20])},e.prototype.handleDefaultOperator=function(t){switch(t){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":this.zoomOut();break;case"zoomIn":this.zoomIn();break;case"realZoom":this.realZoom();break;case"autoZoom":this.autoZoom();break;default:}},e.prototype.destroy=function(){var t=this.get("toolBar");if(t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,l.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}var n=this.get("handleClick");n&&t.removeEventListener("click",n)},e}(lu),ax=nx,ix=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();typeof document!="undefined"&&lh()(`
  .g6-component-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .tooltip-type {
    padding: 0;
    margin: 0;
  }
  .tooltip-id {
    color: #531dab;
  }
`);var ox=function(i){ix(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(r){return`
          <h4 class='tooltip-type'>\u7C7B\u578B\uFF1A`.concat(r.item.getType(),`</h4>
          <span class='tooltip-id'>ID\uFF1A`).concat(r.item.getID(),`</span>
        `)},shouldBegin:function(r){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},e.prototype.init=function(){var t=this,r=t.get("className")||"g6-component-tooltip",n=qo("<div class='".concat(r,"'></div>")),a=t.get("container");a||(a=t.get("graph").get("container")),(0,l.isString)(a)&&(a=document.getElementById(a)),gi(n,{position:"absolute",visibility:"hidden",display:"none"}),a.appendChild(n),t.get("trigger")!=="click"&&(n.addEventListener("mouseenter",function(o){gi(n,{visibility:"visible",display:"unset"})}),n.addEventListener("mouseleave",function(o){t.hideTooltip()})),t.set("tooltip",n)},e.prototype.onClick=function(t){var r=this.get("itemTypes");if(!(t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=t.item,a=this.get("graph");this.currentTarget===n?(this.currentTarget=null,this.hideTooltip(),a.emit("tooltipchange",{item:t.item,action:"hide"})):(this.currentTarget=n,this.showTooltip(t),a.emit("tooltipchange",{item:t.item,action:"show"}))}},e.prototype.onMouseEnter=function(t){var r=this.get("itemTypes");if(!(t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=t.item,a=this.get("graph");this.currentTarget=n,this.showTooltip(t),a.emit("tooltipchange",{item:t.item,action:"show"})}},e.prototype.onMouseMove=function(t){var r=this.get("itemTypes");t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1||!this.currentTarget||t.item!==this.currentTarget||this.showTooltip(t)},e.prototype.onMouseLeave=function(){this.hideTooltip();var t=this.get("graph");t.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},e.prototype.clearContainer=function(){var t=this.get("tooltip");t&&(t.innerHTML="")},e.prototype.showTooltip=function(t){if(t.item){var r=this.get("itemTypes");if(!(t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=this.get("tooltip"),a=this.get("getContent"),o=a(t);(0,l.isString)(o)?n.innerHTML=o:(this.clearContainer(),n.appendChild(o)),this.updatePosition(t)}}},e.prototype.hideTooltip=function(){var t=this.get("tooltip");t&&gi(t,{visibility:"hidden",display:"none"})},e.prototype.updatePosition=function(t){var r=this.get("shouldBegin"),n=this.get("tooltip");if(!r(t)){gi(n,{visibility:"hidden",display:"none"});return}var a=this.get("graph"),o=a.get("width"),s=a.get("height"),u=this.get("offsetX")||0,f=this.get("offsetY")||0,c=a.getPointByClient(t.clientX,t.clientY),d=this.get("fixToNode"),A=t.item;if(A.getType&&A.getType()==="node"&&d&&(0,l.isArray)(d)&&d.length>=2){var D=A.getBBox();c={x:D.minX+D.width*d[0],y:D.minY+D.height*d[1]}}var z=a.getCanvasByPoint(c.x,c.y),Z=z.x,rt=z.y,ft=a.getContainer(),ct={x:Z+ft.offsetLeft+u,y:rt+ft.offsetTop+f};gi(n,{visibility:"visible",display:"unset"});var gt=n.getBoundingClientRect();Z+gt.width+u>o&&(ct.x-=gt.width+u),rt+gt.height+f>s&&(ct.y-=gt.height+f,ct.y<0&&(ct.y=0)),gi(n,{left:"".concat(ct.x,"px"),top:"".concat(ct.y,"px")})},e.prototype.hide=function(){this.onMouseLeave()},e.prototype.destroy=function(){var t=this.get("tooltip");if(t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,l.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}},e}(lu),sx=ox,bg="timebarstartplay",xg="timebarendplay",Of="valuechange",Ol="timebarConfigChanged",Uc="playPauseBtn",Od="nextStepBtn",Id="preStepBtn",gM={opacity:.5,fill:"#000"},mM={opacity:.5,fill:"#000",r:5},yM={fill:"#fff",fontSize:12},ux=function(){function i(e){var t=e.x,r=t===void 0?0:t,n=e.y,a=n===void 0?0:n,o=e.container,s=e.text,u=e.padding,f=u===void 0?[4,4,4,4]:u,c=e.className,d=c===void 0?"g6-component-timebar-tooltip":c,A=e.backgroundColor,D=A===void 0?"#000":A,z=e.textColor,Z=z===void 0?"#fff":z,rt=e.opacity,ft=rt===void 0?.8:rt,ct=e.fontSize,gt=ct===void 0?12:ct;this.container=o,this.className=d,this.backgroundColor=D,this.textColor=Z,this.x=r,this.y=a,this.text=s,this.padding=f,this.opacity=ft,this.fontSize=gt,this.render()}return i.prototype.render=function(){var e=this,t=e.className,r=e.x,n=e.y,a=e.backgroundColor,o=e.textColor,s=e.text,u=e.padding,f=e.opacity,c=e.fontSize,d=e.container,A=qo("<div class='".concat(t,`' style="position: absolute; width: fit-content; height: fit-content; opacity: `).concat(f,'"></div>'));(0,l.isString)(d)&&(d=document.getElementById(d)),d.appendChild(A),e.parentHeight=d.offsetHeight,e.parentWidth=d.offsetWidth,gi(A,{visibility:"hidden",top:0,left:0});var D=qo(`
      <div style='position: absolute; white-space:nowrap; background-color: `.concat(a,"; font-size: ").concat(c,"px; border-radius: 4px; width: fit-content; height: fit-content; color: ").concat(o,"; padding: ").concat(u[0],"px ").concat(u[1],"px ").concat(u[2],"px ").concat(u[3],"px'></div>"));D.innerHTML=s,A.appendChild(D),e.backgroundDOM=D;var z=qo("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid ".concat(a,"'></div>"));A.appendChild(z),e.arrowDOM=z,e.container=A},i.prototype.show=function(e){var t=this,r=e.text,n=e.x,a=e.y,o=e.clientX,s=e.clientY;t.backgroundDOM.innerHTML=r;var u=t.backgroundDOM.offsetWidth,f=t.backgroundDOM.offsetHeight,c=t.arrowDOM.offsetWidth,d=t.arrowDOM.offsetHeight;gi(t.container,{top:"".concat(-f-d,"px"),left:"".concat(n,"px"),visibility:"visible"}),gi(t.backgroundDOM,{marginLeft:"".concat(-u/2,"px")}),gi(t.arrowDOM,{marginLeft:"".concat(-c/2,"px"),top:"".concat(f,"px")});var A=n-u/2,D=n+u/2;A<0?gi(t.backgroundDOM,{marginLeft:"".concat(-u/2-A,"px")}):D>t.parentWidth&&gi(t.backgroundDOM,{marginLeft:"".concat(-u/2-D+t.parentWidth+12,"px")})},i.prototype.hide=function(){gi(this.container,{top:0,left:0,visibility:"hidden"})},i}(),fx=ux,dv=function(){return dv=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},dv.apply(this,arguments)},cx=function(){function i(e){this.config=(0,l.deepMix)({},e),this.init()}return i.prototype.update=function(e){this.config=(0,l.deepMix)({},this.config,e),this.updateElement(),this.renderMarker()},i.prototype.init=function(){this.initElement(),this.renderMarker()},i.prototype.initElement=function(){var e=this.config,t=e.group,r=e.style,n=r.scale,a=n===void 0?1:n,o=r.offsetX,s=o===void 0?0:o,u=r.offsetY,f=u===void 0?0:u,c=this.config.x+s,d=this.config.y+f,A=t.addGroup({name:Uc});this.startMarkerGroup=A.addGroup({name:Uc}),this.circle=t.addShape("circle",{attrs:dv({x:c,y:d,r:this.config.r*a},r),name:Uc}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(c,d,a),fill:r.stroke||"#aaa"},name:"start-marker"}),this.pauseMarkerGroup=A.addGroup({name:Uc});var D=.25*this.config.r*a,z=.5*this.config.r*Math.sqrt(3)*a;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c-.375*this.config.r*a,y:d-z/2,width:D,height:z,fill:r.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c+1/8*this.config.r*a,y:d-z/2,width:D,height:z,fill:r.stroke||"#aaa",lineWidth:0}})},i.prototype.updateElement=function(){var e=this.config.style,t=e.scale,r=t===void 0?1:t,n=e.offsetX,a=n===void 0?0:n,o=e.offsetY,s=o===void 0?0:o,u=this.config.x+a,f=this.config.y+s;this.circle.attr("x",u),this.circle.attr("y",f),this.circle.attr("r",this.config.r*r),this.startMarker.attr("path",this.getStartMarkerPath(u,f,r));var c=.25*this.config.r*r,d=.5*this.config.r*Math.sqrt(3)*r;this.pauseLeftMarker.attr("x",u-(1/4+1/8)*this.config.r*r),this.pauseLeftMarker.attr("y",f-d/2),this.pauseLeftMarker.attr("width",c),this.pauseLeftMarker.attr("height",d),this.pauseRightMarker.attr("x",u+1/8*this.config.r*r),this.pauseRightMarker.attr("y",f-d/2),this.pauseRightMarker.attr("width",c),this.pauseRightMarker.attr("height",d)},i.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},i.prototype.getStartMarkerPath=function(e,t,r){var n=.5*this.config.r*Math.sqrt(3)*r;return[["M",e-n/Math.sqrt(3)/2,t-n/2],["L",e+n/Math.sqrt(3),t],["L",e-n/Math.sqrt(3)/2,t+n/2]]},i}(),lx=cx,ps=function(){return ps=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},ps.apply(this,arguments)},Dd=dt,dx="#aaa",hx="green",vx={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},px={fill:"#fff"},gx={fill:"green"},Eg={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},wg={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},mx={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:Eg,timeTypeControllerStyle:wg},hv=110,Wc=50,If={SINGLE:"single",RANGE:"range"},yx=function(){function i(e){this.controllerCfg=(0,l.deepMix)({},mx,e),this.group=e.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType=this.controllerCfg.defaultTimeType||If.RANGE,this.fontFamily=e.fontFamily||"Arial, sans-serif",this.init()}return i.prototype.init=function(){this.renderPlayButton()},i.prototype.getNextMarkerPath=function(e,t,r){return[["M",e,t-r],["L",e+r,t],["L",e,t+r],["Z",e,t-r],["M",e,t],["L",e-r,t-r],["L",e-r,t+r],["Z"]]},i.prototype.getPreMarkerPath=function(e,t,r){return[["M",e,t-r],["L",e-r,t],["L",e,t+r],["L",e,t-r],["M",e,t],["L",e+r,t-r],["L",e+r,t+r],["Z"]]},i.prototype.renderPlayButton=function(){var e=this.controllerCfg,t=e.width,r=e.height,n=e.x,a=e.y,o=e.hideTimeTypeController,s=e.fill,u=s===void 0?dx:s,f=e.stroke,c=f===void 0?hx:f,d=e.containerStyle,A=d===void 0?{}:d,D=ps(ps({},vx),e.playBtnStyle||{}),z=ps(ps({},px),e.preBtnStyle||{}),Z=ps(ps({},gx),e.nextBtnStyle||{}),rt=r/2-5,ft=a+10,ct=this.controllerGroup.addShape("rect",{attrs:ps({x:n,y:ft,width:t,height:r,stroke:c,fill:u},A),name:"container-rect"});this.playButton?this.playButton.update({x:t/2,y:ft,r:rt}):this.playButton=new lx({group:this.controllerGroup,x:t/2,y:ft+rt+5,r:rt,isPlay:this.isPlay,style:D});var gt=z.offsetX||0,Ct=z.offsetY||0,Ht=(z.scale||1)*rt;this.controllerGroup.addShape("path",{attrs:ps({path:this.getPreMarkerPath(t/2-5*rt+gt,ft+rt+5+Ct,Ht*.5)},z),name:Id});var ne=Z.offsetX||0,re=Z.offsetY||0,Me=(Z.scale||1)*rt;this.controllerGroup.addShape("path",{attrs:ps({path:this.getNextMarkerPath(t/2+5*rt+ne,ft+rt+5+re,Me*.5)},Z),name:Od}),ct.toBack(),this.renderSpeedBtn(),o||this.renderToggleTime(),this.bindEvent();var je=this.controllerCfg.scale,Re=je===void 0?1:je,ir=this.controllerGroup.getCanvasBBox(),Sr=(ir.maxX+ir.minX)/2,pn=(ir.maxY+ir.minY)/2,Gn=Dd([1,0,0,0,1,0,0,0,1],[["t",-Sr,-pn],["s",Re,Re],["t",Sr,pn]]);this.controllerGroup.setMatrix(Gn)},i.prototype.renderSpeedBtn=function(){var e=this.controllerCfg,t=e.y,r=e.width,n=e.hideTimeTypeController,a=ps(ps({},Eg),this.controllerCfg.speedControllerStyle||{}),o=a.scroller,s=o===void 0?{}:o,u=a.text,f=u===void 0?{}:u,c=a.pointer,d=c===void 0?{}:c,A=a.scale,D=A===void 0?1:A,z=a.offsetX,Z=z===void 0?0:z,rt=a.offsetY,ft=rt===void 0?0:rt,ct=this.controllerGroup.addGroup({name:"speed-group"});this.speedGroup=ct;var gt=[],Ct=5;this.speedAxisY=[19,22,26,32,39];for(var Ht=0;Ht<5;Ht++){var ne=t+this.speedAxisY[Ht],re=r-(n?Wc:hv);ct.addShape("line",{attrs:ps({x1:re,x2:re+15,y1:ne,y2:ne},s),speed:Ct,name:"speed-rect"}),this.speedAxisY[Ht]=ne,gt.push(Ct),Ct=Ct-1}this.speedText=ct.addShape("text",{attrs:ps({x:r-(n?Wc:hv)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},f),name:"speed-text"}),this.speedPoint=ct.addShape("path",{attrs:ps({path:this.getPointerPath(r-(n?Wc:hv),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},d),name:"speed-pointer"});var Me=this.speedGroup.getCanvasBBox(),je=(Me.maxX+Me.minX)/2,Re=(Me.maxY+Me.minY)/2,ir=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];ir=Dd(ir,[["t",-je,-Re],["s",D,D],["t",je+Z*D,Re+ft*D]]),this.speedGroup.setMatrix(ir)},i.prototype.getPointerPath=function(e,t){return[["M",e,t],["L",e-10,t-4],["L",e-10,t+4],["Z"]]},i.prototype.renderToggleTime=function(){var e,t,r=this.controllerCfg,n=r.width,a=r.defaultTimeType,o=ps(ps({},wg),this.controllerCfg.timeTypeControllerStyle||{}),s=o.scale,u=s===void 0?1:s,f=o.offsetX,c=f===void 0?0:f,d=o.offsetY,A=d===void 0?0:d,D=o.box,z=D===void 0?{}:D,Z=o.check,rt=Z===void 0?{}:Z,ft=o.text,ct=ft===void 0?{}:ft;this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"});var gt=a===If.SINGLE;this.toggleGroup.addShape("rect",{attrs:ps({x:n-Wc,y:this.speedAxisY[0]+3.5},z),isChecked:gt,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:ps({path:[["M",n-Wc+3,this.speedAxisY[1]+6],["L",n-Wc+7,this.speedAxisY[1]+10],["L",n-Wc+12,this.speedAxisY[1]+4]]},rt),capture:!1,name:"check-icon"}),gt||this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:ps({text:gt?((e=this.controllerCfg)===null||e===void 0?void 0:e.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4":((t=this.controllerCfg)===null||t===void 0?void 0:t.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4",x:n-Wc+15,y:this.speedAxisY[0]+4,fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},ct),name:"checked-text"});var Ct=this.toggleGroup.getCanvasBBox(),Ht=(Ct.maxX+Ct.minX)/2,ne=(Ct.maxY+Ct.minY)/2,re=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];re=Dd(re,[["t",-Ht,-ne],["s",u,u],["t",Ht+c*u,ne+A*u]]),this.toggleGroup.setMatrix(re)},i.prototype.bindEvent=function(){var e=this;this.speedGroup.on("speed-rect:click",function(t){var r=t.target.attr("y1"),n=e.speedPoint.attr("matrix"),a=e.speedAxisY.indexOf(n[7]||0),o=e.speedAxisY.indexOf(r),s=e.speedAxisY[o]-e.speedAxisY[a];n=Dd(n,[["t",0,s]]),e.speedPoint.setMatrix(n),e.currentSpeed=e.speedAxisY.length-o,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(Ol,{speed:e.currentSpeed,type:e.currentType})}),this.speedGroup.on("mousewheel",function(t){t.preventDefault();var r=e.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1],n=r[7],a=e.speedAxisY.indexOf(n);if(a===-1){var o=1/0;e.speedAxisY.forEach(function(u,f){var c=Math.abs(u-n);o>c&&(o=c,a=f)})}t.originalEvent.deltaY>0?a=Math.max(0,a-1):a=Math.min(e.speedAxisY.length-1,a+1);var s=e.speedAxisY[a]-n;r=Dd(r,[["t",0,s]]),e.speedPoint.setMatrix(r),e.currentSpeed=e.speedAxisY.length-a,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(Ol,{speed:e.currentSpeed,type:e.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(t){var r,n,a=t.target.get("isChecked");a?(e.checkedIcon.hide(),e.checkedText.attr("text",((n=e.controllerCfg)===null||n===void 0?void 0:n.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4"),e.currentType=If.RANGE):(e.checkedIcon.show(),e.checkedText.attr("text",((r=e.controllerCfg)===null||r===void 0?void 0:r.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4"),e.currentType=If.SINGLE),t.target.set("isChecked",!a),e.group.emit(Ol,{type:e.currentType,speed:e.currentSpeed})})},i.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},i}(),Sg=yx,Pd=function(){return Pd=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Pd.apply(this,arguments)},bx=dt,xx={fill:"#5B8FF9"},Ex={fill:"#e6e8e9"},wx=function(){function i(e){this.frameCount=0,this.fontFamily="Arial, sans-serif";var t=e.graph,r=e.canvas,n=e.group,a=e.width,o=e.height,s=e.padding,u=e.data,f=e.start,c=e.end,d=e.x,A=d===void 0?0:d,D=e.y,z=D===void 0?0:D,Z=e.tickLabelFormatter,rt=e.selectedTickStyle,ft=rt===void 0?xx:rt,ct=e.unselectedTickStyle,gt=ct===void 0?Ex:ct,Ct=e.tooltipBackgroundColor,Ht=e.tooltipFomatter,ne=e.tickLabelStyle,re=e.controllerCfg,Me=re===void 0?{speed:1}:re;this.graph=t,this.group=n,this.sliceGroup=n.addGroup({name:"slice-group"}),this.canvas=r,this.width=a,this.height=o,this.padding=s,this.data=u,this.start=f,this.end=c,this.tickLabelFormatter=Z,this.tickLabelStyle=ne||{},this.selectedTickStyle=ft,this.unselectedTickStyle=gt,this.controllerCfg=Me,this.currentSpeed=Me.speed||1,this.x=A,this.y=z,this.tooltipBackgroundColor=Ct,this.tooltipFomatter=Ht,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return i.prototype.renderSlices=function(){var e=this,t=this,r=t.width,n=t.height,a=t.padding,o=t.data,s=t.start,u=t.end,f=t.tickLabelFormatter,c=t.selectedTickStyle,d=t.unselectedTickStyle,A=t.tickLabelStyle,D=r-2*a,z=10,Z=4,rt=3*a+Z+z,ft=n-rt-2*a,ct=2,gt=o.length,Ct=(D-ct*(gt-1))/gt;this.tickWidth=Ct;var Ht=this.sliceGroup,ne=[],re=[],Me=Math.round(gt*s),je=Math.round(gt*u);this.startTickRectId=Me,this.endTickRectId=je;var Re=A.rotate;delete A.rotate,o.forEach(function(Sr,pn){var Gn=pn>=Me&&pn<=je,Pn=Gn?c:d,sn=Ht.addShape("rect",{attrs:Pd({x:a+pn*(Ct+ct),y:a,width:Ct,height:ft},Pn),draggable:!0,name:"tick-rect-".concat(pn)}),Jn=Ht.addShape("rect",{attrs:{x:a+pn*Ct+ct*(2*pn-1)/2,y:a,width:pn===0||pn===gt-1?Ct+ct/2:Ct+ct,height:ft,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-".concat(pn)});Jn.toFront();var Kn=sn.getBBox(),un=(Kn.minX+Kn.maxX)/2;ne.push({rect:sn,pickRect:Jn,value:Sr.date,x:un,y:Kn.minY});var Dn;if(f?(Dn=f(Sr),!(0,l.isString)(Dn)&&Dn&&(Dn=Sr.date)):pn%Math.round(gt/10)===0&&(Dn=Sr.date),Dn){re.push(Dn);var Yn=Kn.maxY+a*2;Ht.addShape("line",{attrs:{stroke:"#BFBFBF",x1:un,y1:Yn,x2:un,y2:Yn+Z},name:"tick-line"});var Xn=Yn+Z+a,ia=Ht.addShape("text",{attrs:Pd({fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:un,y:Xn,textAlign:"center",text:Dn,textBaseline:"top",fontSize:10,fontFamily:e.fontFamily||"Arial, sans-serif"},A),capture:!1,name:"tick-label"}),ha=ia.getBBox();if(ha.maxX>r?ia.attr("textAlign","right"):ha.minX<0&&ia.attr("textAlign","left"),(0,l.isNumber)(Re)&&re.length!==10){var ja=bx([1,0,0,0,1,0,0,0,1],[["t",-un,-Xn],["r",Re],["t",un-5,Xn+2]]);ia.attr({textAlign:"left",matrix:ja})}re.length===1?ia.attr({textAlign:"left"}):re.length===10&&ia.attr({textAlign:"right"})}}),this.tickRects=ne;var ir=this.group;this.currentSpeed=1,this.controllerBtnGroup=new Sg(Pd({group:ir,x:this.x,y:this.y+n+5,width:r,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"},this.controllerCfg))},i.prototype.initEvent=function(){var e=this,t=this.sliceGroup;t.on("click",function(c){var d=c.target;if(!(d.get("type")!=="rect"||!d.get("name"))){var A=parseInt(d.get("name").split("-")[2],10);if(!isNaN(A)){var D=e.tickRects,z=e.unselectedTickStyle;D.forEach(function(ct){ct.rect.attr(z)});var Z=e.selectedTickStyle;D[A].rect.attr(Z),e.startTickRectId=A,e.endTickRectId=A;var rt=D.length,ft=A/rt;e.graph.emit(Of,{value:[ft,ft]})}}}),t.on("dragstart",function(c){var d=e.tickRects,A=e.unselectedTickStyle;d.forEach(function(ct){ct.rect.attr(A)});var D=c.target,z=parseInt(D.get("name").split("-")[2],10),Z=e.selectedTickStyle;d[z].rect.attr(Z),e.startTickRectId=z;var rt=d.length,ft=z/rt;e.graph.emit(Of,{value:[ft,ft]}),e.dragging=!0}),t.on("dragover",function(c){if(e.dragging&&c.target.get("type")==="rect"){for(var d=parseInt(c.target.get("name").split("-")[2],10),A=e.startTickRectId,D=e.tickRects,z=e.selectedTickStyle,Z=e.unselectedTickStyle,rt=0;rt<D.length;rt++){var ft=rt>=A&&rt<=d?z:Z;D[rt].rect.attr(ft)}var ct=D.length;e.endTickRectId=d;var gt=A/ct,Ct=d/ct;e.graph.emit(Of,{value:[gt,Ct]})}}),t.on("drop",function(c){if(e.dragging&&(e.dragging=!1,c.target.get("type")==="rect")){var d=e.startTickRectId,A=parseInt(c.target.get("name").split("-")[2],10);if(!(A<d)){var D=e.selectedTickStyle,z=e.tickRects;z[A].rect.attr(D),e.endTickRectId=A;var Z=z.length,rt=d/Z,ft=A/Z;e.graph.emit(Of,{value:[rt,ft]})}}});var r=this,n=r.tooltipBackgroundColor,a=r.tooltipFomatter,o=r.canvas,s=new fx({container:o.get("container"),backgroundColor:n}),u=this.tickRects;u.forEach(function(c){var d=c.pickRect;d.on("mouseenter",function(A){var D=A.target;if(D.get("type")==="rect"){var z=parseInt(D.get("name").split("-")[2],10),Z=o.getClientByPoint(u[z].x,u[z].y);s.show({x:u[z].x,y:u[z].y,clientX:Z.x,clientY:Z.y,text:a?a(u[z].value):u[z].value})}}),d.on("mouseleave",function(A){s.hide()})});var f=this.group;f.on("".concat(Uc,":click"),function(){e.isPlay=!e.isPlay,e.changePlayStatus()}),f.on("".concat(Od,":click"),function(){e.updateStartEnd(1)}),f.on("".concat(Id,":click"),function(){e.updateStartEnd(-1)}),f.on(Ol,function(c){var d=c.type,A=c.speed;e.currentSpeed=A})},i.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(bg,null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(xg,null))},i.prototype.startPlay=function(){var e=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var t=e.currentSpeed;e.frameCount%(60/t)===0&&(e.frameCount=0,e.updateStartEnd(1)),e.frameCount++,e.isPlay&&(e.playHandler=e.startPlay())}):void 0},i.prototype.updateStartEnd=function(e){var t=this,r=this.tickRects,n=r.length,a=this.unselectedTickStyle,o=this.selectedTickStyle,s=t.endTickRectId;if(e>0?t.endTickRectId++:(r[t.endTickRectId].rect.attr(a),t.endTickRectId--),s!==t.startTickRectId)t.endTickRectId<t.startTickRectId&&(t.startTickRectId=t.endTickRectId);else{for(var u=t.startTickRectId;u<=t.endTickRectId-1;u++)r[u].rect.attr(a);t.startTickRectId=t.endTickRectId}if(r[t.endTickRectId]){r[t.endTickRectId].rect.attr(o);var f=t.startTickRectId/n,c=t.endTickRectId/n;this.graph.emit(Of,{value:[f,c]})}},i.prototype.destory=function(){var e=this.sliceGroup;e.off("click"),e.off("dragstart"),e.off("dragover"),e.off("drop"),this.tickRects.forEach(function(t){var r=t.pickRect;r.off("mouseenter"),r.off("mouseleave")}),this.tickRects.length=0,e.off("".concat(Uc,":click")),e.off("".concat(Od,":click")),e.off("".concat(Id,":click")),e.off(Ol),this.sliceGroup.destroy()},i}(),Sx=wx,Mg={};function Mx(i){return Mg[i]}function Df(i,e){Mg[i]=e}var _x=function(){function i(e){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=e,this.initCfg(),this.init()}return i.prototype.translate=function(e){return e},i.prototype.change=function(e){(0,l.assign)(this.__cfg__,e),this.init()},i.prototype.clone=function(){return this.constructor(this.__cfg__)},i.prototype.getTicks=function(){var e=this;return(0,l.map)(this.ticks,function(t,r){return(0,l.isObject)(t)?t:{text:e.getText(t,r),tickValue:t,value:e.scale(t)}})},i.prototype.getText=function(e,t){var r=this.formatter,n=r?r(e,t):e;return(0,l.isNil)(n)||!(0,l.isFunction)(n.toString)?"":n.toString()},i.prototype.getConfig=function(e){return this.__cfg__[e]},i.prototype.init=function(){(0,l.assign)(this,this.__cfg__),this.setDomain(),(0,l.isEmpty)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},i.prototype.initCfg=function(){},i.prototype.setDomain=function(){},i.prototype.calculateTicks=function(){var e=this.tickMethod,t=[];if((0,l.isString)(e)){var r=Mx(e);if(!r)throw new Error("There is no method to to calculate ticks!");t=r(this)}else(0,l.isFunction)(e)&&(t=e(this));return t},i.prototype.rangeMin=function(){return this.range[0]},i.prototype.rangeMax=function(){return this.range[1]},i.prototype.calcPercent=function(e,t,r){return(0,l.isNumber)(e)?(e-t)/(r-t):NaN},i.prototype.calcValue=function(e,t,r){return t+e*(r-t)},i}(),vv=_x,Cx=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="cat",t.isCategory=!0,t}return e.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var t=0;t<this.values.length;t++)this.translateIndexMap.set(this.values[t],t)}},e.prototype.translate=function(t){this.buildIndexMap();var r=this.translateIndexMap.get(t);return r===void 0&&(r=(0,l.isNumber)(t)?t:NaN),r},e.prototype.scale=function(t){var r=this.translate(t),n=this.calcPercent(r,this.min,this.max);return this.calcValue(n,this.rangeMin(),this.rangeMax())},e.prototype.invert=function(t){var r=this.max-this.min,n=this.calcPercent(t,this.rangeMin(),this.rangeMax()),a=Math.round(r*n)+this.min;return a<this.min||a>this.max?NaN:this.values[a]},e.prototype.getText=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=t;return(0,l.isNumber)(t)&&!this.values.includes(t)&&(a=this.values[a]),i.prototype.getText.apply(this,(0,y.__spreadArrays)([a],r))},e.prototype.initCfg=function(){this.tickMethod="cat"},e.prototype.setDomain=function(){if((0,l.isNil)(this.getConfig("min"))&&(this.min=0),(0,l.isNil)(this.getConfig("max"))){var t=this.values.length;this.max=t>1?t-1:t}this.translateIndexMap&&(this.translateIndexMap=void 0)},e}(vv),Ld=Cx,_g=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,Yc="\\d\\d?",Xc="\\d\\d",Tx="\\d{3}",Ax="\\d{4}",Nd="[^\\s]+",Cg=/\[([^]*?)\]/gm;function Tg(i,e){for(var t=[],r=0,n=i.length;r<n;r++)t.push(i[r].substr(0,e));return t}var Ag=function(i){return function(e,t){var r=t[i].map(function(a){return a.toLowerCase()}),n=r.indexOf(e.toLowerCase());return n>-1?n:null}};function jc(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var r=0,n=e;r<n.length;r++){var a=n[r];for(var o in a)i[o]=a[o]}return i}var Og=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Ig=["January","February","March","April","May","June","July","August","September","October","November","December"],Ox=Tg(Ig,3),Ix=Tg(Og,3),pv={dayNamesShort:Ix,dayNames:Og,monthNamesShort:Ox,monthNames:Ig,amPm:["am","pm"],DoFn:function(i){return i+["th","st","nd","rd"][i%10>3?0:(i-i%10!==10?1:0)*i%10]}},hh=jc({},pv),Dg=function(i){return hh=jc(hh,i)},Pg=function(i){return i.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},du=function(i,e){for(e===void 0&&(e=2),i=String(i);i.length<e;)i="0"+i;return i},Dx={D:function(i){return String(i.getDate())},DD:function(i){return du(i.getDate())},Do:function(i,e){return e.DoFn(i.getDate())},d:function(i){return String(i.getDay())},dd:function(i){return du(i.getDay())},ddd:function(i,e){return e.dayNamesShort[i.getDay()]},dddd:function(i,e){return e.dayNames[i.getDay()]},M:function(i){return String(i.getMonth()+1)},MM:function(i){return du(i.getMonth()+1)},MMM:function(i,e){return e.monthNamesShort[i.getMonth()]},MMMM:function(i,e){return e.monthNames[i.getMonth()]},YY:function(i){return du(String(i.getFullYear()),4).substr(2)},YYYY:function(i){return du(i.getFullYear(),4)},h:function(i){return String(i.getHours()%12||12)},hh:function(i){return du(i.getHours()%12||12)},H:function(i){return String(i.getHours())},HH:function(i){return du(i.getHours())},m:function(i){return String(i.getMinutes())},mm:function(i){return du(i.getMinutes())},s:function(i){return String(i.getSeconds())},ss:function(i){return du(i.getSeconds())},S:function(i){return String(Math.round(i.getMilliseconds()/100))},SS:function(i){return du(Math.round(i.getMilliseconds()/10),2)},SSS:function(i){return du(i.getMilliseconds(),3)},a:function(i,e){return i.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(i,e){return i.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(i){var e=i.getTimezoneOffset();return(e>0?"-":"+")+du(Math.floor(Math.abs(e)/60)*100+Math.abs(e)%60,4)},Z:function(i){var e=i.getTimezoneOffset();return(e>0?"-":"+")+du(Math.floor(Math.abs(e)/60),2)+":"+du(Math.abs(e)%60,2)}},Lg=function(i){return+i-1},Ng=[null,Yc],Rg=[null,Nd],kg=["isPm",Nd,function(i,e){var t=i.toLowerCase();return t===e.amPm[0]?0:t===e.amPm[1]?1:null}],Bg=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(i){var e=(i+"").match(/([+-]|\d\d)/gi);if(e){var t=+e[1]*60+parseInt(e[2],10);return e[0]==="+"?t:-t}return 0}],Px={D:["day",Yc],DD:["day",Xc],Do:["day",Yc+Nd,function(i){return parseInt(i,10)}],M:["month",Yc,Lg],MM:["month",Xc,Lg],YY:["year",Xc,function(i){var e=new Date,t=+(""+e.getFullYear()).substr(0,2);return+(""+(+i>68?t-1:t)+i)}],h:["hour",Yc,void 0,"isPm"],hh:["hour",Xc,void 0,"isPm"],H:["hour",Yc],HH:["hour",Xc],m:["minute",Yc],mm:["minute",Xc],s:["second",Yc],ss:["second",Xc],YYYY:["year",Ax],S:["millisecond","\\d",function(i){return+i*100}],SS:["millisecond",Xc,function(i){return+i*10}],SSS:["millisecond",Tx],d:Ng,dd:Ng,ddd:Rg,dddd:Rg,MMM:["month",Nd,Ag("monthNamesShort")],MMMM:["month",Nd,Ag("monthNames")],a:kg,A:kg,ZZ:Bg,Z:Bg},vh={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},Fg=function(i){return jc(vh,i)},zg=function(i,e,t){if(e===void 0&&(e=vh.default),t===void 0&&(t={}),typeof i=="number"&&(i=new Date(i)),Object.prototype.toString.call(i)!=="[object Date]"||isNaN(i.getTime()))throw new Error("Invalid Date pass to format");e=vh[e]||e;var r=[];e=e.replace(Cg,function(a,o){return r.push(o),"@@@"});var n=jc(jc({},hh),t);return e=e.replace(_g,function(a){return Dx[a](i,n)}),e.replace(/@@@/g,function(){return r.shift()})};function Gg(i,e,t){if(t===void 0&&(t={}),typeof e!="string")throw new Error("Invalid format in fecha parse");if(e=vh[e]||e,i.length>1e3)return null;var r=new Date,n={year:r.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},a=[],o=[],s=e.replace(Cg,function(Ct,Ht){return o.push(Pg(Ht)),"@@@"}),u={},f={};s=Pg(s).replace(_g,function(Ct){var Ht=Px[Ct],ne=Ht[0],re=Ht[1],Me=Ht[3];if(u[ne])throw new Error("Invalid format. "+ne+" specified twice in format");return u[ne]=!0,Me&&(f[Me]=!0),a.push(Ht),"("+re+")"}),Object.keys(f).forEach(function(Ct){if(!u[Ct])throw new Error("Invalid format. "+Ct+" is required in specified format")}),s=s.replace(/@@@/g,function(){return o.shift()});var c=i.match(new RegExp(s,"i"));if(!c)return null;for(var d=jc(jc({},hh),t),A=1;A<c.length;A++){var D=a[A-1],z=D[0],Z=D[2],rt=Z?Z(c[A],d):+c[A];if(rt==null)return null;n[z]=rt}n.isPm===1&&n.hour!=null&&+n.hour!=12?n.hour=+n.hour+12:n.isPm===0&&+n.hour==12&&(n.hour=0);var ft;if(n.timezoneOffset==null){ft=new Date(n.year,n.month,n.day,n.hour,n.minute,n.second,n.millisecond);for(var ct=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],A=0,gt=ct.length;A<gt;A++)if(u[ct[A][0]]&&n[ct[A][0]]!==ft[ct[A][1]]())return null}else if(ft=new Date(Date.UTC(n.year,n.month,n.day,n.hour,n.minute-n.timezoneOffset,n.second,n.millisecond)),n.month>11||n.month<0||n.day>31||n.day<1||n.hour>23||n.hour<0||n.minute>59||n.minute<0||n.second>59||n.second<0)return null;return ft}var Lx={format:zg,parse:Gg,defaultI18n:pv,setGlobalDateI18n:Dg,setGlobalDateMasks:Fg},Ug=Lx;function Nx(i){return function(e,t,r,n){for(var a=(0,l.isNil)(r)?0:r,o=(0,l.isNil)(n)?e.length:n;a<o;){var s=a+o>>>1;i(e[s])>t?o=s:a=s+1}return a}}var Wg="format";function Yg(i,e){var t=k[Wg]||Ug[Wg];return t(i,e)}function ph(i){return(0,l.isString)(i)&&(i.indexOf("T")>0?i=new Date(i).getTime():i=new Date(i.replace(/-/gi,"/")).getTime()),(0,l.isDate)(i)&&(i=i.getTime()),i}var af=1e3,Il=60*af,Dl=60*Il,vc=24*Dl,Rd=vc*31,Xg=vc*365,kd=[["HH:mm:ss",af],["HH:mm:ss",af*10],["HH:mm:ss",af*30],["HH:mm",Il],["HH:mm",Il*10],["HH:mm",Il*30],["HH",Dl],["HH",Dl*6],["HH",Dl*12],["YYYY-MM-DD",vc],["YYYY-MM-DD",vc*4],["YYYY-WW",vc*7],["YYYY-MM",Rd],["YYYY-MM",Rd*4],["YYYY-MM",Rd*6],["YYYY",vc*380]];function Rx(i,e,t){var r=(e-i)/t,n=Nx(function(o){return o[1]})(kd,r)-1,a=kd[n];return n<0?a=kd[0]:n>=kd.length&&(a=(0,l.last)(kd)),a}var kx=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="timeCat",t}return e.prototype.translate=function(t){t=ph(t);var r=this.values.indexOf(t);return r===-1&&((0,l.isNumber)(t)&&t<this.values.length?r=t:r=NaN),r},e.prototype.getText=function(t,r){var n=this.translate(t);if(n>-1){var a=this.values[n],o=this.formatter;return a=o?o(a,r):Yg(a,this.mask),a}return t},e.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},e.prototype.setDomain=function(){var t=this.values;(0,l.each)(t,function(r,n){t[n]=ph(r)}),t.sort(function(r,n){return r-n}),i.prototype.setDomain.call(this)},e}(Ld),Bx=kx,Fx=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.isContinuous=!0,t}return e.prototype.scale=function(t){if((0,l.isNil)(t))return NaN;var r=this.rangeMin(),n=this.rangeMax(),a=this.max,o=this.min;if(a===o)return r;var s=this.getScalePercent(t);return r+s*(n-r)},e.prototype.init=function(){i.prototype.init.call(this);var t=this.ticks,r=(0,l.head)(t),n=(0,l.last)(t);r<this.min&&(this.min=r),n>this.max&&(this.max=n),(0,l.isNil)(this.minLimit)||(this.min=r),(0,l.isNil)(this.maxLimit)||(this.max=n)},e.prototype.setDomain=function(){var t=(0,l.getRange)(this.values),r=t.min,n=t.max;(0,l.isNil)(this.min)&&(this.min=r),(0,l.isNil)(this.max)&&(this.max=n),this.min>this.max&&(this.min=r,this.max=n)},e.prototype.calculateTicks=function(){var t=this,r=i.prototype.calculateTicks.call(this);return this.nice||(r=(0,l.filter)(r,function(n){return n>=t.min&&n<=t.max})),r},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;return(t-n)/(r-n)},e.prototype.getInvertPercent=function(t){return(t-this.rangeMin())/(this.rangeMax()-this.rangeMin())},e}(vv),gh=Fx,zx=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="linear",t.isLinear=!0,t}return e.prototype.invert=function(t){var r=this.getInvertPercent(t);return this.min+r*(this.max-this.min)},e.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},e}(gh),Bd=zx;function Vc(i,e){var t=Math.E,r;return e>=0?r=Math.pow(t,Math.log(e)/i):r=Math.pow(t,Math.log(-e)/i)*-1,r}function Gu(i,e){return i===1?1:Math.log(e)/Math.log(i)}function jg(i,e,t){(0,l.isNil)(t)&&(t=Math.max.apply(null,i));var r=t;return(0,l.each)(i,function(n){n>0&&n<r&&(r=n)}),r===t&&(r=t/e),r>1&&(r=1),r}function Vg(i){var e=i.toString().split(/[eE]/),t=(e[0].split(".")[1]||"").length-+(e[1]||0);return t>0?t:0}function bM(i,e){var t=Vg(i),r=Vg(e),n=Math.pow(10,Math.max(t,r));return(i*n+e*n)/n}var Gx=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="log",t}return e.prototype.invert=function(t){var r=this.base,n=Gu(r,this.max),a=this.rangeMin(),o=this.rangeMax()-a,s,u=this.positiveMin;if(u){if(t===0)return 0;s=Gu(r,u/r);var f=1/(n-s)*o;if(t<f)return t/f*u}else s=Gu(r,this.min);var c=(t-a)/o,d=c*(n-s)+s;return Math.pow(r,d)},e.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},e.prototype.setDomain=function(){i.prototype.setDomain.call(this);var t=this.min;if(t<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");t===0&&(this.positiveMin=jg(this.values,this.base,this.max))},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;if(r===n||t<=0)return 0;var a=this.base,o=this.positiveMin;o&&(n=o*1/a);var s;return t<o?s=t/o/(Gu(a,r)-Gu(a,n)):s=(Gu(a,t)-Gu(a,n))/(Gu(a,r)-Gu(a,n)),s},e}(gh),Ux=Gx,Wx=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="pow",t}return e.prototype.invert=function(t){var r=this.getInvertPercent(t),n=this.exponent,a=Vc(n,this.max),o=Vc(n,this.min),s=r*(a-o)+o,u=s>=0?1:-1;return Math.pow(s,n)*u},e.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;if(r===n)return 0;var a=this.exponent,o=(Vc(a,t)-Vc(a,n))/(Vc(a,r)-Vc(a,n));return o},e}(gh),Yx=Wx,Xx=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="time",t}return e.prototype.getText=function(t,r){var n=this.translate(t),a=this.formatter;return a?a(n,r):Yg(n,this.mask)},e.prototype.scale=function(t){var r=t;return((0,l.isString)(r)||(0,l.isDate)(r))&&(r=this.translate(r)),i.prototype.scale.call(this,r)},e.prototype.translate=function(t){return ph(t)},e.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},e.prototype.setDomain=function(){var t=this.values,r=this.getConfig("min"),n=this.getConfig("max");if((!(0,l.isNil)(r)||!(0,l.isNumber)(r))&&(this.min=this.translate(this.min)),(!(0,l.isNil)(n)||!(0,l.isNumber)(n))&&(this.max=this.translate(this.max)),t&&t.length){var a=[],o=1/0,s=o,u=0;(0,l.each)(t,function(f){var c=ph(f);if(isNaN(c))throw new TypeError("Invalid Time: "+f+" in time scale!");o>c?(s=o,o=c):s>c&&(s=c),u<c&&(u=c),a.push(c)}),t.length>1&&(this.minTickInterval=s-o),(0,l.isNil)(r)&&(this.min=o),(0,l.isNil)(n)&&(this.max=u)}},e}(Bd),jx=Xx,Vx=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="quantize",t}return e.prototype.invert=function(t){var r=this.ticks,n=r.length,a=this.getInvertPercent(t),o=Math.floor(a*(n-1));if(o>=n-1)return(0,l.last)(r);if(o<0)return(0,l.head)(r);var s=r[o],u=r[o+1],f=o/(n-1),c=(o+1)/(n-1);return s+(a-f)/(c-f)*(u-s)},e.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},e.prototype.calculateTicks=function(){var t=i.prototype.calculateTicks.call(this);return this.nice||((0,l.last)(t)!==this.max&&t.push(this.max),(0,l.head)(t)!==this.min&&t.unshift(this.min)),t},e.prototype.getScalePercent=function(t){var r=this.ticks;if(t<(0,l.head)(r))return 0;if(t>(0,l.last)(r))return 1;var n=0;return(0,l.each)(r,function(a,o){if(t>=a)n=o;else return!1}),n/(r.length-1)},e}(gh),Hg=Vx,Hx=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="quantile",t}return e.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},e}(Hg),Zx=Hx,Zg={};function Kx(i){return Zg[i]}function Pf(i,e){if(Kx(i))throw new Error("type '"+i+"' existed.");Zg[i]=e}var $x=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="identity",t.isIdentity=!0,t}return e.prototype.calculateTicks=function(){return this.values},e.prototype.scale=function(t){return this.values[0]!==t&&(0,l.isNumber)(t)?t:this.range[0]},e.prototype.invert=function(t){var r=this.range;return t<r[0]||t>r[1]?NaN:this.values[0]},e}(vv),qx=$x;function Kg(i){var e=i.values,t=i.tickInterval,r=i.tickCount,n=i.showLast;if((0,l.isNumber)(t)){var a=(0,l.filter)(e,function(z,Z){return Z%t===0}),o=(0,l.last)(e);return n&&(0,l.last)(a)!==o&&a.push(o),a}var s=e.length,u=i.min,f=i.max;if((0,l.isNil)(u)&&(u=0),(0,l.isNil)(f)&&(f=e.length-1),!(0,l.isNumber)(r)||r>=s)return e.slice(u,f+1);if(r<=0||f<=0)return[];for(var c=r===1?s:Math.floor(s/(r-1)),d=[],A=u,D=0;D<r&&!(A>=f);D++)A=Math.min(u+D*c,f),D===r-1&&n?d.push(e[f]):d.push(e[A]);return d}function Qx(i){var e=i.min,t=i.max,r=i.nice,n=i.tickCount,a=new Jx;return a.domain([e,t]),r&&a.nice(n),a.ticks(n)}var gv=5,$g=Math.sqrt(50),qg=Math.sqrt(10),Qg=Math.sqrt(2),Jx=function(){function i(){this._domain=[0,1]}return i.prototype.domain=function(e){return e?(this._domain=Array.from(e,Number),this):this._domain.slice()},i.prototype.nice=function(e){var t,r;e===void 0&&(e=gv);var n=this._domain.slice(),a=0,o=this._domain.length-1,s=this._domain[a],u=this._domain[o],f;return u<s&&(t=[u,s],s=t[0],u=t[1],r=[o,a],a=r[0],o=r[1]),f=mh(s,u,e),f>0?(s=Math.floor(s/f)*f,u=Math.ceil(u/f)*f,f=mh(s,u,e)):f<0&&(s=Math.ceil(s*f)/f,u=Math.floor(u*f)/f,f=mh(s,u,e)),f>0?(n[a]=Math.floor(s/f)*f,n[o]=Math.ceil(u/f)*f,this.domain(n)):f<0&&(n[a]=Math.ceil(s*f)/f,n[o]=Math.floor(u*f)/f,this.domain(n)),this},i.prototype.ticks=function(e){return e===void 0&&(e=gv),tE(this._domain[0],this._domain[this._domain.length-1],e||gv)},i}();function tE(i,e,t){var r,n=-1,a,o,s;if(e=+e,i=+i,t=+t,i===e&&t>0)return[i];if((r=e<i)&&(a=i,i=e,e=a),(s=mh(i,e,t))===0||!isFinite(s))return[];if(s>0)for(i=Math.ceil(i/s),e=Math.floor(e/s),o=new Array(a=Math.ceil(e-i+1));++n<a;)o[n]=(i+n)*s;else for(i=Math.floor(i*s),e=Math.ceil(e*s),o=new Array(a=Math.ceil(i-e+1));++n<a;)o[n]=(i-n)/s;return r&&o.reverse(),o}function mh(i,e,t){var r=(e-i)/Math.max(0,t),n=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,n);return n>=0?(a>=$g?10:a>=qg?5:a>=Qg?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(a>=$g?10:a>=qg?5:a>=Qg?2:1)}function Jg(i,e,t){var r;return t==="ceil"?r=Math.ceil(i/e):t==="floor"?r=Math.floor(i/e):r=Math.round(i/e),r*e}function mv(i,e,t){var r=Jg(i,t,"floor"),n=Jg(e,t,"ceil");r=(0,l.fixedBase)(r,t),n=(0,l.fixedBase)(n,t);for(var a=[],o=Math.max((n-r)/(Math.pow(2,12)-1),t),s=r;s<=n;s=s+o){var u=(0,l.fixedBase)(s,o);a.push(u)}return{min:r,max:n,ticks:a}}function yv(i,e,t){var r,n=i.minLimit,a=i.maxLimit,o=i.min,s=i.max,u=i.tickCount,f=u===void 0?5:u,c=(0,l.isNil)(n)?(0,l.isNil)(e)?o:e:n,d=(0,l.isNil)(a)?(0,l.isNil)(t)?s:t:a;if(c>d&&(r=[c,d],d=r[0],c=r[1]),f<=2)return[c,d];for(var A=(d-c)/(f-1),D=[],z=0;z<f;z++)D.push(c+A*z);return D}function eE(i){var e=i.min,t=i.max,r=i.tickInterval,n=i.minLimit,a=i.maxLimit,o=Qx(i);return!(0,l.isNil)(n)||!(0,l.isNil)(a)?yv(i,(0,l.head)(o),(0,l.last)(o)):r?mv(e,t,r).ticks:o}function Pl(i){return Math.abs(i)<1e-15?i:parseFloat(i.toFixed(15))}var rE=[1,5,2,2.5,4,3],xM=null,t0=Number.EPSILON*100;function nE(i,e){return(i%e+e)%e}function aE(i){return Math.round(i*1e12)/1e12}function iE(i,e,t,r,n,a){var o=(0,l.size)(e),s=(0,l.indexOf)(e,i),u=0,f=nE(r,a);return(f<t0||a-f<t0)&&r<=0&&n>=0&&(u=1),1-s/(o-1)-t+u}function oE(i,e,t){var r=(0,l.size)(e),n=(0,l.indexOf)(e,i),a=1;return 1-n/(r-1)-t+a}function sE(i,e,t,r,n,a){var o=(i-1)/(a-n),s=(e-1)/(Math.max(a,r)-Math.min(t,n));return 2-Math.max(o/s,s/o)}function uE(i,e){return i>=e?2-(i-1)/(e-1):1}function fE(i,e,t,r){var n=e-i;return 1-.5*(Math.pow(e-r,2)+Math.pow(i-t,2))/Math.pow(.1*n,2)}function cE(i,e,t){var r=e-i;if(t>r){var n=(t-r)/2;return 1-Math.pow(n,2)/Math.pow(.1*r,2)}return 1}function lE(){return 1}function dE(i,e,t,r,n,a){t===void 0&&(t=5),r===void 0&&(r=!0),n===void 0&&(n=rE),a===void 0&&(a=[.25,.2,.5,.05]);var o=t<0?0:Math.round(t);if(Number.isNaN(i)||Number.isNaN(e)||typeof i!="number"||typeof e!="number"||!o)return{min:0,max:0,ticks:[]};if(e-i<1e-15||o===1)return{min:i,max:e,ticks:[i]};if(e-i>1e148){var s=t||5,u=(e-i)/s;return{min:i,max:e,ticks:Array(s).fill(null).map(function(Yn,Xn){return Pl(i+u*Xn)})}}for(var f={score:-2,lmin:0,lmax:0,lstep:0},c=1;c<1/0;){for(var d=0;d<n.length;d+=1){var A=n[d],D=oE(A,n,c);if(a[0]*D+a[1]+a[2]+a[3]<f.score){c=1/0;break}for(var z=2;z<1/0;){var Z=uE(z,o);if(a[0]*D+a[1]+a[2]*Z+a[3]<f.score)break;for(var rt=(e-i)/(z+1)/c/A,ft=Math.ceil(Math.log10(rt));ft<1/0;){var ct=c*A*Math.pow(10,ft),gt=cE(i,e,ct*(z-1));if(a[0]*D+a[1]*gt+a[2]*Z+a[3]<f.score)break;var Ct=Math.floor(e/ct)*c-(z-1)*c,Ht=Math.ceil(i/ct)*c;if(Ct<=Ht)for(var s=Ht-Ct,ne=0;ne<=s;ne+=1){var re=Ct+ne,Me=re*(ct/c),je=Me+ct*(z-1),Re=ct,ir=iE(A,n,c,Me,je,Re),Sr=fE(i,e,Me,je),pn=sE(z,o,i,e,Me,je),Gn=lE(),Pn=a[0]*ir+a[1]*Sr+a[2]*pn+a[3]*Gn;Pn>f.score&&(!r||Me<=i&&je>=e)&&(f.lmin=Me,f.lmax=je,f.lstep=Re,f.score=Pn)}ft+=1}z+=1}}c+=1}var sn=Pl(f.lmax),Jn=Pl(f.lmin),Kn=Pl(f.lstep),un=Math.floor(aE((sn-Jn)/Kn))+1,Dn=new Array(un);Dn[0]=Pl(Jn);for(var d=1;d<un;d++)Dn[d]=Pl(Dn[d-1]+Kn);return{min:Math.min(i,(0,l.head)(Dn)),max:Math.max(e,(0,l.last)(Dn)),ticks:Dn}}function hE(i){var e=i.min,t=i.max,r=i.tickCount,n=i.nice,a=i.tickInterval,o=i.minLimit,s=i.maxLimit,u=dE(e,t,r,n).ticks;return!(0,l.isNil)(o)||!(0,l.isNil)(s)?yv(i,(0,l.head)(u),(0,l.last)(u)):a?mv(e,t,a).ticks:u}function vE(i){var e=i.base,t=i.tickCount,r=i.min,n=i.max,a=i.values,o,s=Gu(e,n);if(r>0)o=Math.floor(Gu(e,r));else{var u=jg(a,e,n);o=Math.floor(Gu(e,u))}for(var f=s-o,c=Math.ceil(f/t),d=[],A=o;A<s+c;A=A+c)d.push(Math.pow(e,A));return r<=0&&d.unshift(0),d}function e0(i,e,t){if(t===void 0&&(t=5),i===e)return{max:e,min:i,ticks:[i]};var r=t<0?0:Math.round(t);if(r===0)return{max:e,min:i,ticks:[]};var n=1.5,a=.5+1.5*n,o=e-i,s=o/r,u=Math.pow(10,Math.floor(Math.log10(s))),f=u;2*u-s<n*(s-f)&&(f=2*u,5*u-s<a*(s-f)&&(f=5*u,10*u-s<n*(s-f)&&(f=10*u)));for(var c=Math.ceil(e/f),d=Math.floor(i/f),A=Math.max(c*f,e),D=Math.min(d*f,i),z=Math.floor((A-D)/f)+1,Z=new Array(z),rt=0;rt<z;rt++)Z[rt]=Pl(D+rt*f);return{min:D,max:A,ticks:Z}}function pE(i){var e=i.exponent,t=i.tickCount,r=Math.ceil(Vc(e,i.max)),n=Math.floor(Vc(e,i.min)),a=e0(n,r,t).ticks;return a.map(function(o){var s=o>=0?1:-1;return Math.pow(o,e)*s})}function gE(i,e){var t=i.length*e;return e===1?i[i.length-1]:e===0?i[0]:t%1!==0?i[Math.ceil(t)-1]:i.length%2===0?(i[t-1]+i[t])/2:i[t]}function mE(i){var e=i.tickCount,t=i.values;if(!t||!t.length)return[];for(var r=t.slice().sort(function(s,u){return s-u}),n=[],a=0;a<e;a++){var o=a/(e-1);n.push(gE(r,o))}return n}function yE(i){var e=i.min,t=i.max,r=i.tickCount,n=i.tickInterval,a=i.minLimit,o=i.maxLimit,s=e0(e,t,r).ticks;return!(0,l.isNil)(a)||!(0,l.isNil)(o)?yv(i,(0,l.head)(s),(0,l.last)(s)):n?mv(e,t,n).ticks:s}function bE(i){var e=i.min,t=i.max,r=i.minTickInterval,n=i.tickInterval,a=i.tickCount;if(n)a=Math.ceil((t-e)/n);else{n=Rx(e,t,a)[1];var o=(t-e)/n,s=o/a;s>1&&(n=n*Math.ceil(s)),r&&n<r&&(n=r)}n=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),n);for(var u=[],f=e;f<t+n;f+=n)u.push(f);return u}function xE(i){var e=Kg((0,y.__assign)({showLast:!0},i));return e}function yh(i){return new Date(i).getFullYear()}function EE(i){return new Date(i,0,1).getTime()}function bv(i){return new Date(i).getMonth()}function wE(i,e){var t=yh(i),r=yh(e),n=bv(i),a=bv(e);return(r-t)*12+(a-n)%12}function SE(i,e){return new Date(i,e,1).getTime()}function ME(i,e){return Math.ceil((e-i)/vc)}function _E(i,e){return Math.ceil((e-i)/Dl)}function CE(i,e){return Math.ceil((e-i)/(60*1e3))}function TE(i){var e=i.min,t=i.max,r=i.minTickInterval,n=i.tickCount,a=i.tickInterval,o=[];a||(a=(t-e)/n,r&&a<r&&(a=r)),a=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),a);var s=yh(e);if(a>Xg)for(var u=yh(t),f=Math.ceil(a/Xg),c=s;c<=u+f;c=c+f)o.push(EE(c));else if(a>Rd)for(var d=Math.ceil(a/Rd),A=bv(e),D=wE(e,t),c=0;c<=D+d;c=c+d)o.push(SE(s,c+A));else if(a>vc)for(var z=new Date(e),Z=z.getFullYear(),rt=z.getMonth(),ft=z.getDate(),ct=Math.ceil(a/vc),gt=ME(e,t),c=0;c<gt+ct;c=c+ct)o.push(new Date(Z,rt,ft+c).getTime());else if(a>Dl)for(var z=new Date(e),Z=z.getFullYear(),rt=z.getMonth(),ct=z.getDate(),Ct=z.getHours(),Ht=Math.ceil(a/Dl),ne=_E(e,t),c=0;c<=ne+Ht;c=c+Ht)o.push(new Date(Z,rt,ct,Ct+c).getTime());else if(a>Il)for(var re=CE(e,t),Me=Math.ceil(a/Il),c=0;c<=re+Me;c=c+Me)o.push(e+c*Il);else{var je=a;je<af&&(je=af);for(var Re=Math.floor(e/af)*af,ir=Math.ceil((t-e)/af),Sr=Math.ceil(je/af),c=0;c<ir+Sr;c=c+Sr)o.push(Re+c*af)}return o.length>=512&&console.warn("Notice: current ticks length("+o.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+a+") is too small, increase the value to solve the problem!"),o}Df("cat",Kg),Df("time-cat",xE),Df("wilkinson-extended",hE),Df("r-pretty",yE),Df("time",bE),Df("time-pretty",TE),Df("log",vE),Df("pow",pE),Df("quantile",mE),Df("d3-linear",eE),Pf("cat",Ld),Pf("category",Ld),Pf("identity",qx),Pf("linear",Bd),Pf("log",Ux),Pf("pow",Yx),Pf("time",jx),Pf("timeCat",Bx),Pf("quantize",Hg),Pf("quantile",Zx);var AE=function(i,e,t){if(t||arguments.length===2)for(var r=0,n=e.length,a;r<n;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return i.concat(a||Array.prototype.slice.call(e))};function OE(i){return(0,l.map)(i,function(e,t){var r=t===0?"M":"L",n=e[0],a=e[1];return[r,n,a]})}function r0(i){return OE(i)}function IE(i){if(i.length<=2)return r0(i);var e=[];(0,l.each)(i,function(o){(0,l.isEqual)(o,e.slice(e.length-2))||e.push(o[0],o[1])});var t=$r(e,!1),r=(0,l.head)(i),n=r[0],a=r[1];return t.unshift(["M",n,a]),t}function DE(i,e,t,r){r===void 0&&(r=!0);var n=new Bd({values:i}),a=new Ld({values:(0,l.map)(i,function(s,u){return u})}),o=(0,l.map)(i,function(s,u){return[a.scale(u)*e,t-n.scale(s)*t]});return r?IE(o):r0(o)}function PE(i,e,t,r){r===void 0&&(r=5);for(var n=new Bd({values:i}),a=new Ld({values:(0,l.map)(i,function(A,D){return D})}),o=(0,l.map)(i,function(A,D){return[a.scale(D)*e,t-n.scale(A)*t]}),s=[],u=0;u<o.length;u++){var f=o[u],c={x:f[0],y:f[1],y0:t,size:r},d=RE(c);s.push.apply(s,d)}return kE(s)}function LE(i,e){var t=new Bd({values:i}),r=Math.max(0,t.min);return e-t.scale(r)*e}function NE(i,e,t,r){var n=AE([],i,!0),a=LE(r,t);return n.push(["L",e,a]),n.push(["L",0,a]),n.push(["Z"]),n}function RE(i){var e=i.x,t=i.y,r=i.y0,n=i.size,a,o;(0,l.isArray)(t)?(a=t[0],o=t[1]):(a=r,o=t);var s,u;(0,l.isArray)(e)?(s=e[0],u=e[1]):(s=e-n/2,u=e+n/2);var f=[{x:s,y:a},{x:s,y:o}];return f.push({x:u,y:o},{x:u,y:a}),f}function kE(i,e){e===void 0&&(e=!0);var t=[],r=i[0];t.push(["M",r.x,r.y]);for(var n=1,a=i.length;n<a;n++)t.push(["L",i[n].x,i[n].y]);return e&&(t.push(["L",r.x,r.y]),t.push(["z"])),t}var Fd=function(){return Fd=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Fd.apply(this,arguments)},BE={stroke:"#C5C5C5",strokeOpacity:.85},FE={fill:"#CACED4",opacity:.85},zE=function(){function i(e){var t=e.x,r=t===void 0?0:t,n=e.y,a=n===void 0?0:n,o=e.width,s=o===void 0?200:o,u=e.height,f=u===void 0?26:u,c=e.smooth,d=c===void 0?!0:c,A=e.isArea,D=A===void 0?!1:A,z=e.data,Z=z===void 0?[]:z,rt=e.lineStyle,ft=e.areaStyle,ct=e.group,gt=e.interval,Ct=gt===void 0?null:gt;this.group=ct,this.x=r,this.y=a,this.width=s,this.height=f,this.data=Z,this.smooth=d,this.isArea=D,this.lineStyle=Object.assign({},BE,rt),this.areaStyle=Object.assign({},FE,ft),this.intervalConfig=Ct,this.renderLine()}return i.prototype.renderLine=function(){var e=this,t=e.x,r=e.y,n=e.width,a=e.height,o=e.barWidth,s=e.data,u=e.smooth,f=e.isArea,c=e.lineStyle,d=e.areaStyle,A=this.group.addGroup({name:"trend-group"});if(s){var D=DE(s,n,a,u);if(A.addShape("path",{attrs:Fd({path:D},c),name:"trend-line"}),f){var z=NE(D,n,a,s);A.addShape("path",{attrs:Fd({path:z},d),name:"trend-area"})}}this.intervalConfig&&A.addShape("path",{attrs:Fd({path:PE(this.intervalConfig.data,n,a,this.intervalConfig.style.barWidth)},this.intervalConfig.style),name:"trend-interval"}),A.move(t,r)},i.prototype.destory=function(){this.group.destroy()},i}(),GE=zE,ld=function(){return ld=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},ld.apply(this,arguments)},UE={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},WE={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize"},YE=function(){function i(e){var t=e.group,r=e.name,n=e.type,a=e.x,o=a===void 0?0:a,s=e.y,u=s===void 0?0:s,f=e.width,c=f===void 0?2:f,d=e.height,A=d===void 0?24:d,D=e.style,z=D===void 0?{}:D;this.group=t,this.name=r,this.handleType=n,this.x=o,this.y=u,this.width=c,this.height=A,n==="trend"?this.style=ld(ld({},UE),z):n==="simple"&&(this.style=ld(ld({},WE),z)),this.renderHandle()}return i.prototype.setX=function(e){this.setXY(e,void 0)},i.prototype.setY=function(e){this.setXY(void 0,e)},i.prototype.setXY=function(e,t){(0,l.isNumber)(e)&&(this.x=e),(0,l.isNumber)(t)&&(this.y=t),this.updateXY()},i.prototype.renderHandle=function(){var e=this,t=e.width,r=e.height,n=e.style,a=e.name,o=n.fill,s=n.stroke,u=n.radius,f=n.opacity,c=n.cursor;this.handleGroup=this.group.addGroup(),this.handleType==="trend"?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:t,height:r,fill:o,stroke:s,radius:u,opacity:f,cursor:c},name:"".concat(a,"-handler")}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:0,r:2*t,fill:o,stroke:s,radius:u,opacity:f,cursor:c,lineAppendWidth:12},name:"".concat(a,"-handler")}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:r,r:2*t,fill:o,stroke:s,radius:u,opacity:f,cursor:c},name:"".concat(a,"-handler")})):this.handleType==="simple"&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:r/2,r:2*t,fill:o,stroke:s,radius:u,opacity:f,cursor:c,lineWidth:2},name:"".concat(a,"-handler")})),this.updateXY(),this.handleType==="trend"?this.bindTrendEvents():this.handleType==="simple"&&this.bindSimpleEvents()},i.prototype.bindSimpleEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var r=e.style.highLightFill;e.topCircle.attr("fill",r)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var r=e.style.fill;e.topCircle.attr("fill",r)})},i.prototype.bindTrendEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var r=e.style.highLightFill;e.verticalLine.attr("fill",r),e.topCircle.attr("fill",r),e.bottomCircle.attr("fill",r)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var r=e.style.fill;e.verticalLine.attr("fill",r),e.topCircle.attr("fill",r),e.bottomCircle.attr("fill",r)})},i.prototype.show=function(){this.handleGroup.show()},i.prototype.hide=function(){this.handleGroup.hide()},i.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},i}(),n0=YE,Yo=function(){return Yo=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Yo.apply(this,arguments)},XE=dt,jE={fill:"#416180",opacity:.05},VE={fill:"#416180",opacity:.15,radius:5},HE={fill:"#5B8FF9",opacity:.3,cursor:"grab"},xv=2,ZE={width:xv,height:24},KE={textBaseline:"middle",fill:"#000",opacity:.45},$E={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35},qE={lineWidth:1,stroke:"#ccc"},QE=function(){function i(e){var t=this;this.prevX=0,this.onMouseDown=function(Yn){return function(Xn){t.currentHandler=Yn;var ia=Xn.originalEvent;ia.stopPropagation(),ia.preventDefault(),t.prevX=(0,l.get)(ia,"touches.0.pageX",ia.pageX);var ha=t.canvas.get("container");ha.addEventListener("mousemove",t.onMouseMove),ha.addEventListener("mouseup",t.onMouseUp),ha.addEventListener("mouseleave",t.onMouseUp),ha.addEventListener("touchmove",t.onMouseMove),ha.addEventListener("touchend",t.onMouseUp),ha.addEventListener("touchcancel",t.onMouseUp)}},this.onMouseMove=function(Yn){Yn.stopPropagation(),Yn.preventDefault();var Xn=(0,l.get)(Yn,"touches.0.pageX",Yn.pageX),ia=Xn-t.prevX,ha=t.adjustOffsetRange(ia/t.width);t.updateStartEnd(ha),t.updateUI(),t.prevX=Xn},this.onMouseUp=function(){t.currentHandler&&(t.currentHandler=void 0);var Yn=t.canvas.get("container");Yn&&(Yn.removeEventListener("mousemove",t.onMouseMove),Yn.removeEventListener("mouseup",t.onMouseUp),Yn.removeEventListener("mouseleave",t.onMouseUp),Yn.removeEventListener("touchmove",t.onMouseMove),Yn.removeEventListener("touchend",t.onMouseUp),Yn.removeEventListener("touchcancel",t.onMouseUp))};var r=e.x,n=r===void 0?0:r,a=e.y,o=a===void 0?0:a,s=e.width,u=s===void 0?100:s,f=e.height,c=e.padding,d=c===void 0?10:c,A=e.trendCfg,D=e.controllerCfg,z=D===void 0?{speed:1}:D,Z=e.backgroundStyle,rt=Z===void 0?{}:Z,ft=e.foregroundStyle,ct=ft===void 0?{}:ft,gt=e.handlerStyle,Ct=gt===void 0?{}:gt,Ht=e.textStyle,ne=Ht===void 0?{}:Ht,re=e.start,Me=re===void 0?0:re,je=e.end,Re=je===void 0?1:je,ir=e.minText,Sr=ir===void 0?"":ir,pn=e.maxText,Gn=pn===void 0?"":pn,Pn=e.group,sn=e.graph,Jn=e.canvas,Kn=e.tick,un=Kn===void 0?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(Xn){return Xn},ticks:[]}:Kn,Dn=e.type;this.graph=sn,this.canvas=Jn,this.group=Pn,this.timeBarType=Dn,this.x=n,this.y=o,this.width=u,this.height=f,this.padding=d,this.ticks=un.ticks,this.trendCfg=A,this.controllerCfg=z,this.currentSpeed=z.speed||1,this.tickLabelFormatter=un.tickLabelFormatter,Dn==="trend"?this.backgroundStyle=Yo(Yo({},jE),rt):Dn==="simple"&&(this.backgroundStyle=Yo(Yo({},VE),rt)),this.foregroundStyle=Yo(Yo({},HE),ct),this.handlerStyle=Yo(Yo({},ZE),Ct),this.textStyle=Yo(Yo({},KE),ne),this.tickLabelStyle=Yo(Yo({},$E),un.tickLabelStyle),this.tickLineStyle=Yo(Yo({},qE),un.tickLineStyle),this.currentMode=z.defaultTimeType||If.RANGE,this.start=Me,this.end=Re,this.minText=Sr,this.maxText=Gn,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return i.prototype.update=function(e){var t=e.x,r=e.y,n=e.width,a=e.height,o=e.minText,s=e.maxText,u=e.start,f=e.end;this.start=Math.min(1,Math.max(u,0)),this.end=Math.min(1,Math.max(f,0)),(0,l.assign)(this,{x:t,y:r,width:n,height:a,minText:o,maxText:s}),this.updateUI()},i.prototype.setText=function(e,t){this.minTextShape.attr("text",e),this.maxTextShape.attr("text",t)},i.prototype.renderSlider=function(){var e=this,t=this,r=t.width,n=t.height,a=t.timeBarType;if(a==="trend"&&(0,l.size)((0,l.get)(this.trendCfg,"data"))){var o=new GE(Yo(Yo({x:this.x,y:this.y,width:r,height:n},this.trendCfg),{group:this.group}));this.trendComponent=o}var s=this.group.addGroup({name:"slider-group"});s.addShape("rect",{attrs:Yo({x:0,y:0,width:r,height:n},this.backgroundStyle),name:"background"});var u=this.group.addGroup();a==="trend"?(this.minTextShape=u.addShape("text",{attrs:Yo({x:0,y:n/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=u.addShape("text",{attrs:Yo({y:n/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})):(this.minTextShape=u.addShape("text",{attrs:Yo({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=u.addShape("text",{attrs:Yo({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:Yo({x:0,y:this.y,height:n},this.foregroundStyle),name:"foreground-shape"}),this.foregroundShape.on("mousedown",function(ft){ft.target.attr("cursor","grabbing")}),this.foregroundShape.on("mouseup",function(ft){ft.target.attr("cursor",e.foregroundStyle.cursor||"grab")});var f=(0,l.get)(this.handlerStyle,"width",2),c=(0,l.get)(this.handlerStyle,"height",24),d=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new n0({name:"minHandlerShape",group:d,type:a,x:this.x,y:this.y,width:f,height:c,style:this.handlerStyle});var A=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new n0({name:"maxHandlerShape",group:A,type:a,x:this.x,y:this.y,width:f,height:c,style:this.handlerStyle});var D=this.ticks,z=r/(D.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function(ft){ft.destroy()});var Z=-1/0,rt=this.tickLabelStyle.rotate;delete this.tickLabelStyle.rotate,this.textList=D.map(function(ft,ct){e.tickPosList.push(e.x+ct*z);var gt;e.tickLabelFormatter?(gt=e.tickLabelFormatter(ft),!(0,l.isString)(gt)&&gt&&(gt=ft.date)):gt=ft.date;var Ct=e.x+ct*z,Ht=e.y+n+5,ne=e.group.addShape("text",{attrs:Yo({x:Ct,y:Ht,text:gt,fontFamily:e.fontFamily||"Arial, sans-serif"},e.tickLabelStyle),name:"tick-label"});if((0,l.isNumber)(rt)&&ct!==D.length-1){var re=XE([1,0,0,0,1,0,0,0,1],[["t",-Ct,-Ht],["r",rt],["t",Ct-5,Ht+2]]);ne.attr({textAlign:"left",matrix:re})}ct===0?ne.attr({textAlign:"left"}):ct!==D.length-1&&ne.attr({textAlign:"right"});var Me=e.group.addShape("line",{attrs:Yo({x1:e.x+ct*z,y1:e.y+n+2,x2:e.x+ct*z,y2:e.y+n+6},e.tickLineStyle),name:"tick-line"});Me.toBack();var je=ne.getBBox();return je.minX>Z?(ne.show(),Me.show(),Z=je.minX+je.width+10):(ne.hide(),Me.hide()),ne}),this.controllerBtnGroup=new Sg(Yo({group:this.group,x:this.x,y:this.y+n+25,width:r,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),s.move(this.x,this.y),this.bindEvents(),this.currentMode===If.SINGLE&&(this.minHandlerShape.hide(),this.foregroundShape.hide(),this.minTextShape.hide())},i.prototype.bindEvents=function(){var e=this,t=this.group.find(function(n){return n.get("name")==="minHandlerShape"});t&&(t.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),t.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var r=this.group.find(function(n){return n.get("name")==="maxHandlerShape"});r&&(r.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),r.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("".concat(Uc,":click"),function(){e.isPlay=!e.isPlay,e.currentHandler=e.maxHandlerShape,e.changePlayStatus()}),this.group.on("".concat(Od,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(.01),e.updateUI()}),this.group.on("".concat(Id,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(-.01),e.updateUI()}),this.group.on(Ol,function(n){var a=n.type,o=n.speed;e.currentSpeed=o,e.currentMode=a,a===If.SINGLE?(e.minHandlerShape.hide(),e.foregroundShape.hide(),e.minTextShape.hide()):a===If.RANGE&&(e.minHandlerShape.show(),e.foregroundShape.show(),e.minTextShape.show())})},i.prototype.adjustTickIndex=function(e){for(var t=0;t<this.tickPosList.length-1;t++)if(this.tickPosList[t]<=e&&e<=this.tickPosList[t+1])return Math.abs(this.tickPosList[t]-e)<Math.abs(e-this.tickPosList[t+1])?t:t+1;return 0},i.prototype.adjustOffsetRange=function(e){switch(this.currentHandler){case this.minHandlerShape:{var t=0-this.start,r=1-this.start;return Math.min(r,Math.max(t,e))}case this.maxHandlerShape:{var t=0-this.end,r=1-this.end;return Math.min(r,Math.max(t,e))}case this.foregroundShape:{var t=0-this.start,r=1-this.end;return Math.min(r,Math.max(t,e))}default:return 0}},i.prototype.updateStartEnd=function(e){var t=this.ticks[this.adjustTickIndex(this.start*this.width)],r=this.ticks[this.adjustTickIndex(this.end*this.width)];if(!this.currentHandler){this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t==null?void 0:t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r==null?void 0:r.date;return}switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=e,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;case this.foregroundShape:this.start+=e,this.end+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;default:break}},i.prototype.updateUI=function(){var e=this;this.start<0&&(this.start=0),this.end>1&&(this.end=1);var t=this.x+this.start*this.width,r=this.x+this.end*this.width;this.foregroundShape.attr("x",t),this.foregroundShape.attr("width",r-t);var n=(0,l.get)(this.handlerStyle,"width",xv);this.setText(this.minText,this.maxText);var a=this.dodgeText([t,r]),o=a[0],s=a[1];this.minHandlerShape.setX(t-n/2),(0,l.each)(o,function(u,f){return e.minTextShape.attr(f,u)}),this.maxHandlerShape.setX(r-n/2),(0,l.each)(s,function(u,f){return e.maxTextShape.attr(f,u)}),this.currentMode===If.RANGE?this.graph.emit(Of,{value:[this.start,this.end].sort()}):this.currentMode===If.SINGLE&&this.graph.emit(Of,{value:[this.end,this.end]})},i.prototype.dodgeText=function(e){var t,r,n=2,a=(0,l.get)(this.handlerStyle,"width",xv),o=this.minTextShape,s=this.maxTextShape,u=e[0],f=e[1],c=!1;u>f&&(t=[f,u],u=t[0],f=t[1],r=[s,o],o=r[0],s=r[1],c=!0);var d=o.getBBox(),A=s.getBBox(),D=null,z=null;return this.timeBarType==="trend"?(D=u-d.width<this.x+n?{x:u+a/2+n,textAlign:"left"}:{x:u-a/2-n,textAlign:"right"},z=f+A.width>this.x+this.width?{x:f-a/2-n,textAlign:"right"}:{x:f+a/2+n,textAlign:"left"}):this.timeBarType==="simple"&&(D=o.attr("x")>d.width?{x:u,textAlign:"center"}:{x:u,textAlign:"left"},z=s.attr("x")>this.width-A.width?{x:f,textAlign:"right"}:{x:f,textAlign:"center"}),c?[z,D]:[D,z]},i.prototype.startPlay=function(){var e=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var t=e,r=t.ticks,n=t.width,a=e.currentSpeed,o=n/r.length,s=o/((10-a)*1e3/60),u=e.adjustOffsetRange(s/e.width);e.updateStartEnd(u),e.updateUI(),e.isPlay&&(e.playHandler=e.startPlay())}):void 0},i.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(bg,null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(xg,null))},i.prototype.destory=function(){this.graph.off(Of,function(){});var e=this.group,t=e.find(function(n){return n.get("name")==="minHandlerShape"});t&&(t.off("minHandlerShape-handler:mousedown"),t.off("minHandlerShape-handler:touchstart"),t.destroy());var r=e.find(function(n){return n.get("name")==="maxHandlerShape"});r&&(r.off("maxHandlerShape-handler:mousedown"),r.off("maxHandlerShape-handler:touchstart"),r.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),e.off("".concat(Uc,":click")),e.off("".concat(Od,":click")),e.off("".concat(Id,":click")),e.off(Ol),e.destroy(),this.trendComponent&&this.trendComponent.destory()},i}(),JE=QE,tw=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),pc=function(){return pc=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},pc.apply(this,arguments)},ew=function(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(i);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(i,r[n])&&(t[r[n]]=i[r[n]]);return t},rw=4,nw=26,aw=function(i){tw(e,i);function e(t){var r=i.call(this,t)||this;return r.afterrenderListener=function(n){return r.filterData({})},r.valueChangeListener=(0,l.throttle)(function(n){return r.filterData(n)},200,{trailing:!0,leading:!0}),r.changeData=function(n){var a=r.get("graph");r.cacheGraphData=a.get("data"),r.filterData({})},r}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1,filterItemTypes:["node"],containerCSS:{},putInGraphContainer:!0}},e.prototype.initContainer=function(){var t=this.get("graph"),r=this._cfgs,n=r.width,a=r.height,o=r.putInGraphContainer,s=this.get("className")||"g6-component-timebar",u=this.get("container"),f;if(u?((0,l.isString)(u)&&(u=document.getElementById(u)),f=u):(f=qo("<div class='".concat(s,"'></div>")),gi(f,{position:"relative"})),o){var c=this.get("graph").get("container");c.appendChild(f)}this.set("timeBarContainer",f);var d,A=t.get("renderer");A==="SVG"?d=new Cd({container:f,width:n,height:a}):d=new dc({container:f,width:n,height:a}),this.get("containerCSS")&&gi(f,this.get("containerCSS")),this.set("canvas",d)},e.prototype.init=function(){this.initContainer();var t=this.get("canvas"),r=t.addGroup({name:"timebar-group"});this.set("timeBarGroup",r),this.renderTrend(),this.initEvent();var n=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",n)},e.prototype.play=function(){this.togglePlay(!0)},e.prototype.pause=function(){this.togglePlay(!1)},e.prototype.togglePlay=function(t){var r=this.get("timebar");r&&(r.isPlay=!!t,r.changePlayStatus())},e.prototype.renderTrend=function(){var t=this,r=this._cfgs,n=r.width,a=r.x,o=r.y,s=r.padding,u=r.type,f=r.trend,c=r.slider,d=r.controllerCfg,A=r.textStyle,D=r.tick,z=r.backgroundStyle,Z=r.foregroundStyle,rt=f.data,ft=ew(f,["data"]),ct=n-2*s,gt=u==="trend"?nw:rw,Ct=this.get("graph"),Ht=this.get("timeBarGroup"),ne=this.get("canvas"),re=null;if(u==="trend"||u==="simple"){var Me=this.get("getValue");re=new JE(pc(pc({graph:Ct,canvas:ne,group:Ht,type:u,x:a+s,y:u==="trend"?o+s:o+s+15,width:ct,height:gt,padding:s,backgroundStyle:z,foregroundStyle:Z,trendCfg:pc(pc({},ft),{data:rt.map(function(Re){return(Me==null?void 0:Me(Re))||Re.value})})},c),{tick:{ticks:rt,tickLabelFormatter:D.tickLabelFormatter,tickLabelStyle:D.tickLabelStyle,tickLineStyle:D.tickLineStyle},handlerStyle:pc(pc({},c.handlerStyle),{height:c.height||gt}),controllerCfg:d,textStyle:A}))}else u==="tick"&&(re=new Sx(pc({graph:Ct,canvas:ne,group:Ht,x:a+s,y:o+s,width:n,height:42,padding:2,controllerCfg:d},D)));var je=function Re(){var ir=t.get("timebar");ir.draggingHandler=!1,ir.isPlay&&(ir.isPlay=!1,ir.currentHandler=ir.maxHandlerShape,ir.changePlayStatus()),document.removeEventListener("mouseup",Re)};ne.on("mousedown",function(Re){(Re.target.get("name")==="maxHandlerShape-handler"||Re.target.get("name")==="minHandlerShape-handler"||Re.target===re.foregroundShape)&&document.addEventListener("mouseup",je)}),this.set("timebar",re)},e.prototype.filterData=function(t){var r,n=t.value;if(!n){n=[];var a=this._cfgs.type;!a||a==="trend"||a==="simple"?(n[0]=this._cfgs.slider.start,n[1]=this._cfgs.slider.end):a==="tick"&&(n[0]=this._cfgs.tick.start,n[1]=this._cfgs.tick.end)}var o=null,s=this._cfgs.type;if(s==="trend"||s==="simple"?o=this._cfgs.trend.data:s==="tick"&&(o=this._cfgs.tick.data),!o||o.length===0){console.warn("\u8BF7\u914D\u7F6E TimeBar \u7EC4\u4EF6\u7684\u6570\u636E");return}var u=this.get("rangeChange"),f=this.get("graph"),c=Math.round(o.length*n[0]),d=Math.round(o.length*n[1]);d=d>=o.length?o.length-1:d,c=c>=o.length?o.length-1:c;var A=(r=this._cfgs.tick)===null||r===void 0?void 0:r.tickLabelFormatter,D=A?A(o[c]):o[c].date,z=A?A(o[d]):o[d].date;if(s!=="tick"){var Z=this.get("timebar");Z.setText(D,z)}if(u)u(f,D,z);else{(!this.cacheGraphData||this.cacheGraphData.nodes&&this.cacheGraphData.nodes.length===0)&&(this.cacheGraphData=f.get("data"));var rt=this.get("filterItemTypes"),ft=this.get("changeData"),ct=this.get("getDate"),gt=this.get("shouldIgnore"),Ct=o[c].date,Ht=o[d].date;if(ft||ft===void 0){var ne=this.cacheGraphData.nodes,re=this.cacheGraphData.edges,Me={},je={};f.getNodes().forEach(function(Re){return Me[Re.getID()]=!0}),f.getEdges().forEach(function(Re){return je[Re.getID()]=!0}),rt.includes("node")&&(ne==null||ne.forEach(function(Re){var ir=+((ct==null?void 0:ct(Re))||Re.date),Sr=ir>=Ct&&ir<=Ht||(gt==null?void 0:gt("node",Re,{min:Ct,max:Ht})),pn=Me[Re.id];pn&&!Sr?(f.removeItem(Re.id),Me[Re.id]=!1):!pn&&Sr&&(f.addItem("node",Re),Me[Re.id]=!0)}),re==null||re.forEach(function(Re){var ir=Me[Re.source]&&Me[Re.target]||(gt==null?void 0:gt("edge",Re,{min:Ct,max:Ht})),Sr=!!f.findById(Re.id);Sr&&!ir?(f.removeItem(Re.id),je[Re.id]=!1):!Sr&&ir?(f.addItem("edge",Re),je[Re.id]=!0):Sr||(je[Re.id]=!1)})),(this.get("filterEdge")||rt.includes("edge"))&&(re==null||re.filter(function(Re){var ir=+((ct==null?void 0:ct(Re))||Re.date),Sr=ir>=Ct&&ir<=Ht||(gt==null?void 0:gt("edge",Re,{min:Ct,max:Ht})),pn=Me[Re.source]&&Me[Re.target],Gn=Sr&&pn,Pn=je[Re.id];Pn&&!Gn?(je[Re.id]=!1,f.removeItem(Re.id)):!Pn&&Gn&&(je[Re.id]=!0,f.addItem("edge",Re))}))}else rt.includes("node")&&f.getNodes().forEach(function(Re){var ir=Re.getModel();if(!(gt!=null&&gt("node",ir,{min:Ct,max:Ht}))){var Sr=+((ct==null?void 0:ct(ir))||ir.date);Sr<Ct||Sr>Ht?f.hideItem(Re):f.showItem(Re)}}),(this.get("filterEdge")||rt.includes("edge"))&&f.getEdges().forEach(function(Re){var ir=Re.getModel();if(!(gt!=null&&gt("edge",ir,{min:o[c].date,max:o[d].date}))){var Sr=+((ct==null?void 0:ct(ir))||ir.date);if(Sr<o[c].date||Sr>o[d].date)f.hideItem(Re);else{var pn=Re.getSource().isVisible(),Gn=Re.getTarget().isVisible();pn&&Gn&&f.showItem(Re)}}})}},e.prototype.initEvent=function(){var t=this.get("graph");t.on("afterchangedata",this.changeData),t.on("afterrender",this.afterrenderListener),t.on(Of,this.valueChangeListener)},e.prototype.destroy=function(){var t=this.get("graph");t.off("afterchangedata",this.changeData),t.off("afterrender",this.afterrenderListener),t.off(Of,this.valueChangeListener);var r=this.get("timebar");r&&r.destory&&r.destory(),i.prototype.destroy.call(this);var n=this.get("timeBarContainer");if(n){var a=this.get("container");a||(a=this.get("graph").get("container")),(0,l.isString)(a)&&(a=document.getElementById(a)),a===n&&(a=a.parentElement),a.removeChild(n)}},e}(lu),iw=aw,ow=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),sw=Ys.applyMatrix;function uw(i,e){var t,r;if(i.naturalWidth)t=i.naturalWidth,r=i.naturalHeight;else{var n=new Image;n.src=i.src,n.onload=function(){e&&e(n.width,n.height)}}return[t,r]}var fw=function(i){ow(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,r=this._cfgs,n=r.graph;if(!this.destroyed){var a=this.get("container");(0,l.isString)(a)&&(a=document.getElementById(a));var o=qo("<div class=".concat(r.viewportClassName,`
      style='position:absolute;
        left:0;
        top:0;
        box-sizing:border-box;
        border: 2px solid #1980ff;
        cursor:move'
      </div>`)),s=0,u=0,f=!1,c=0,d=0,A=0,D=0,z=0,Z=0;a.addEventListener("mousedown",function(rt){if(r.refresh=!1,rt.target===o){var ft=o.style;A=parseInt(ft.width,10),D=parseInt(ft.height,10);var ct=t.get("width"),gt=t.get("height");A>ct||D>gt||(Z=n.getZoom(),z=t.get("ratio"),f=!0,s=rt.clientX,u=rt.clientY)}},!1),a.addEventListener("mousemove",function(rt){if(!(!f||(0,l.isNil)(rt.clientX)||(0,l.isNil)(rt.clientY))){var ft=t.get("width"),ct=t.get("height"),gt=o.style;c=parseInt(gt.left,10),d=parseInt(gt.top,10),A=parseInt(gt.width,10),D=parseInt(gt.height,10);var Ct=s-rt.clientX,Ht=u-rt.clientY;c-Ct<0?Ct=c:c-Ct+A>=ft&&(Ct=0),d-Ht<0?Ht=d:d-Ht+D>=ct&&(Ht=0),c-=Ct,d-=Ht,gi(o,{left:"".concat(c,"px"),top:"".concat(d,"px")}),n.translate(Ct*Z/z,Ht*Z/z),s=rt.clientX,u=rt.clientY}},!1),a.addEventListener("mouseleave",function(){f=!1,r.refresh=!0},!1),a.addEventListener("mouseup",function(){f=!1,r.refresh=!0},!1),this.set("viewport",o),a.appendChild(o)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),r=this.get("width"),n=this.get("height"),a=this.get("graph"),o=a.get("width"),s=a.get("height"),u=o/s,f=a.getGroup(),c=f.getCanvasBBox(),d=[(c.minX+c.maxX)/2,(c.minY+c.maxY)/2],A=[c.maxX-c.minX,c.maxY-c.minY],D={centerX:d[0],centerY:d[1],width:0,height:0,minX:0,minY:0};c[0]/c[1]>u?(D.width=A[0],D.height=D.width/u):(D.height=A[1],D.width=D.height*u),D.minX=d[0]-D.width/2,D.minY=d[1]-D.height/2;var z=f.getMatrix();z||(z=[1,0,0,0,1,0,0,0,1]);var Z=$.invert([1,0,0,0,1,0,0,0,1],z),rt=sw({x:D.minX,y:D.minY},Z),ft=a.getCanvasByPoint(rt.x,rt.y),ct=this.get("viewport");ct||this.initViewport();var gt=o/D.width,Ct=gt*r,Ht=gt*n,ne=r*-ft.x/D.width,re=n*-ft.y/D.height,Me=ne+Ct,je=re+Ht;ne<0&&(Ct+=ne,ne=0),Me>r&&(Ct=Ct-(Me-r)),re<0&&(Ht+=re,re=0),je>n&&(Ht=Ht-(je-n)),this.set("ratio",t);var Re="".concat(ne,"px"),ir="".concat(re,"px");gi(ct,{left:Re,top:ir,width:"".concat(Ct,"px"),height:"".concat(Ht,"px")})}},e.prototype.init=function(){this.initContainer()},e.prototype.initContainer=function(){var t=this,r=t.get("graph"),n=r.get("width"),a=r.get("height"),o=a/n,s=t.get("className"),u=t.get("container"),f=t.get("width"),c=t.get("height");!f&&!c&&(f=200),f?(c=o*f,t.set("height",c)):(f=1/o*c,t.set("width",f));var d=qo("<div class='".concat(s,"' style='width: ").concat(f,"px; height: ").concat(c,"px; overflow: hidden; position: relative;'></div>"));(0,l.isString)(u)&&(u=document.getElementById(u)),u?u.appendChild(d):r.get("container").appendChild(d),t.set("container",d);var A=qo('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');d.appendChild(A);var D=qo('<span style="display: table-cell; vertical-align: middle; "></span>');A.appendChild(D),t.set("containerDOM",A),t.set("containerSpan",D);var z=qo('<img alt="" src="'.concat(this.get("graphImg"),'" style="display: inline-block; user-select: none;" draggable="false" />'));t.set("imgDOM",z),t.updateImgSize(),D.appendChild(z),t.updateCanvas()},e.prototype.updateImgSize=function(){var t=this,r=t.get("imgDOM"),n=t.get("width"),a=t.get("height");r.onload=function(){var o=uw(r);o[0]>o[1]?r.width=n:r.height=a}},e.prototype.updateCanvas=function(){var t=this.get("refresh");if(t){var r=this.get("graph");if(!r.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var n=this.get("width"),a=r.get("canvas").getCanvasBBox(),o=a.width,s=n/o;this.set("ratio",s),this.updateViewport()}}},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.updateGraphImg=function(t){var r=this,n=r.get("imgDOM");n.remove(),r.set("graphImg",t);var a=qo('<img alt="" src="'.concat(t,'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>'));r.set("imgDOM",a),a.src=t,r.updateImgSize();var o=r.get("containerSpan");o.appendChild(a),r.updateCanvas()},e.prototype.destroy=function(){var t=this.get("container");t.parentNode.removeChild(t)},e}(lu),cw=fw,lw=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ev=function(){return Ev=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Ev.apply(this,arguments)},dw=Ys.distance,a0=.05,i0={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},hw=function(i){lw(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:(0,l.clone)(i0),showLabel:"edge",scaleRBy:"wheel"}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"filter"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"filter"};break}return t},e.prototype.init=function(){var t=this,r=t.get("showLabel"),n=r==="node"||r==="both",a=r==="edge"||r==="both";t.set("showNodeLabel",n),t.set("showEdgeLabel",a);var o=t.get("shouldShow");o||t.set("shouldShow",function(){return!0})},e.prototype.createDelegate=function(t){var r=this,n=r.get("delegate");(!n||n.destroyed)&&(r.filter(t),n=r.get("delegate"),n.on("dragstart",function(a){}),n.on("drag",function(a){r.filter(a)}),this.get("scaleRBy")==="wheel"&&n.on("mousewheel",function(a){r.scaleRByWheel(a)}))},e.prototype.scaleRByWheel=function(t){var r=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=r.get("graph"),a,o=r.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,u=s||n.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?a=1-a0:a=1/(1-a0);var f=r.get("maxR"),c=r.get("minR"),d=r.get("r");(d>(f||n.get("height"))&&a>1||d<(c||n.get("height")*.05)&&a<1)&&(a=1),d*=a,r.set("r",d),r.filter(t)}},e.prototype.filter=function(t){var r=this,n=r.get("graph"),a=n.getNodes(),o={},s=r.get("r"),u=r.get("type"),f={x:t.x,y:t.y};r.updateDelegate(f,s);var c=r.get("shouldShow"),d=r.get("vShapes");d&&d.forEach(function(ft){ft.remove(),ft.destroy()}),d=[],a.forEach(function(ft){var ct=ft.getModel(),gt=ct.x,Ct=ct.y;dw({x:gt,y:Ct},f)<s&&(o[ct.id]=ft)});var A=n.getEdges(),D=[];A.forEach(function(ft){var ct=ft.getModel(),gt=ct.source,Ct=ct.target;c(ct)&&(u==="only-source"||u==="one"?o[gt]&&!o[Ct]&&D.push(ft):u==="only-target"||u==="one"?o[Ct]&&!o[gt]&&D.push(ft):u==="both"&&o[gt]&&o[Ct]&&D.push(ft))});var z=r.get("showNodeLabel"),Z=r.get("showEdgelabel"),rt=n.get("group");D.forEach(function(ft){var ct=ft.get("group").get("children");ct.forEach(function(gt){var Ct=gt.get("type"),Ht=rt.addShape(Ct,{attrs:gt.attr()});d.push(Ht),z&&Ct==="text"&&Ht.set("visible",!0)})}),Object.keys(o).forEach(function(ft){var ct=o[ft],gt=ct.get("group").clone();if(rt.add(gt),d.push(gt),Z)for(var Ct=gt.get("children"),Ht=0;Ht<Ct.length;Ht++){var ne=Ct[Ht];ne.get("type")==="text"&&ne.set("visible",!0)}}),r.set("vShapes",d)},e.prototype.updateParams=function(t){var r=this,n=t.r,a=t.trigger,o=t.minR,s=t.maxR,u=t.scaleRBy,f=t.showLabel,c=t.shouldShow;if(isNaN(t.r)||r.set("r",n),isNaN(s)||r.set("maxR",s),isNaN(o)||r.set("minR",o),(a==="mousemove"||a==="click")&&r.set("trigger",a),u==="wheel"||u==="unset"){r.set("scaleRBy",u),r.get("delegate").remove(),r.get("delegate").destroy();var d=r.get("dPercentText");d&&(d.remove(),d.destroy())}(f==="node"||f==="both")&&r.set("showNodeLabel",!0),(f==="edge"||f==="both")&&r.set("showEdgeLabel",!0),c&&r.set("shouldShow",c)},e.prototype.updateDelegate=function(t,r){var n=this,a=n.get("graph"),o=n.get("delegate");if(!o||o.destroyed){var s=a.get("group"),u=n.get("delegateStyle")||i0;o=s.addShape("circle",{attrs:Ev({r,x:t.x,y:t.y},u),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&this.get("scaleRBy")==="wheel"&&o.on("mousewheel",function(f){n.scaleRByWheel(f)})}else o.attr({x:t.x,y:t.y,r});n.set("delegate",o)},e.prototype.clear=function(){var t=this,r=t.get("vShapes");r&&r.forEach(function(a){a.remove(),a.destroy()}),r=[],t.set("vShapes",r);var n=t.get("delegate");n&&!n.destroyed&&(n.remove(),n.destroy())},e.prototype.destroy=function(){this.clear()},e}(lu),vw=hw,pw=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),gw=Ys.pointLineDistance,mw={stroke:"#FA8C16",lineWidth:1},yw=function(i){pw(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{line:mw,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},e.prototype.init=function(){},e.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},e.prototype.onDragStart=function(){this.initBoxLine()},e.prototype.onDrag=function(t){var r=t.item,n=r.get("delegateShape")||r,a=n.getBBox(),o=r.getModel(),s=o.x-a.x,u=o.y-a.y;this.show({x:a.minX+s,y:a.minY+u},{width:a.width,height:a.height})},e.prototype.onDragEnd=function(){this.destory()},e.prototype.initBoxLine=function(){var t=this._cfgs,r=t.horizontalLines,n=t.verticalLines,a=t.itemAlignType,o=this.get("graph"),s=o.getNodes();s.forEach(function(u){var f=u.getBBox(),c=u.get("id");a===!0||a==="horizontal"?(r["".concat(c,"tltr")]=[f.minX,f.minY,f.maxX,f.minY,u],r["".concat(c,"lcrc")]=[f.minX,f.centerY,f.maxX,f.centerY,u],r["".concat(c,"blbr")]=[f.minX,f.maxY,f.maxX,f.maxY,u]):a==="center"&&(r["".concat(c,"lcrc")]=[f.minX,f.centerY,f.maxX,f.centerY,u]),a===!0||a==="vertical"?(n["".concat(c,"tlbl")]=[f.minX,f.minY,f.minX,f.maxY,u],n["".concat(c,"tcbc")]=[f.centerX,f.minY,f.centerX,f.maxY,u],n["".concat(c,"trbr")]=[f.maxX,f.minY,f.maxX,f.maxY,u]):a==="center"&&(n["".concat(c,"tcbc")]=[f.centerX,f.minY,f.centerX,f.maxY,u])})},e.prototype.show=function(t,r){var n=(0,l.mix)({},t);return this.itemAlign(t,r,n),t},e.prototype.itemAlign=function(t,r,n){var a=this,o=this._cfgs,s=o.horizontalLines,u=o.verticalLines,f=o.tolerance,c={x:n.x+r.width/2,y:n.y},d={x:n.x+r.width/2,y:n.y+r.height/2},A={x:n.x+r.width/2,y:n.y+r.height},D={x:n.x,y:n.y+r.height/2},z={x:n.x+r.width,y:n.y+r.height/2},Z=[],rt=[],ft=null;if(this.clearAlignLine(),(0,l.each)(s,function(gt){gt[4].isVisible&&(Z.push(a.getLineDisObject(gt,c)),Z.push(a.getLineDisObject(gt,d)),Z.push(a.getLineDisObject(gt,A)))}),(0,l.each)(u,function(gt){gt[4].isVisible&&(rt.push(a.getLineDisObject(gt,D)),rt.push(a.getLineDisObject(gt,d)),rt.push(a.getLineDisObject(gt,z)))}),Z.sort(function(gt,Ct){return gt.dis-Ct.dis}),rt.sort(function(gt,Ct){return gt.dis-Ct.dis}),Z.length!==0&&Z[0].dis<f){t.y=Z[0].line[1]-Z[0].point.y+n.y,ft={type:"item",horizontals:[Z[0]]};for(var ct=1;ct<3;ct++)Z[0].dis===Z[ct].dis&&ft.horizontals.push(Z[ct])}if(rt.length!==0&&rt[0].dis<f){t.x=rt[0].line[0]-rt[0].point.x+n.x,ft?ft.verticals=[rt[0]]:ft={type:"item",verticals:[rt[0]]};for(var ct=1;ct<3;ct++)rt[0].dis===rt[ct].dis&&ft.verticals.push(rt[ct])}ft&&(ft.bbox=r,this.addAlignLine(ft))},e.prototype.addAlignLine=function(t){var r=t.bbox,n=t.type,a=t.horizontals,o=t.verticals,s=this._cfgs,u=s.line,f=s.alignLines,c=this.get("graph"),d=c.get("group");n==="item"&&(a&&(0,l.each)(a,function(A){var D=A.line,z=A.point,Z=(D[0]+D[2])/2,rt,ft;z.x<Z?(rt=z.x-r.width/2,ft=Math.max(D[0],D[2])):(rt=z.x+r.width/2,ft=Math.min(D[0],D[2]));var ct=(0,l.mix)({x1:rt,y1:D[1],x2:ft,y2:D[1]},u),gt=d.addShape("line",{attrs:ct,capture:!1});f.push(gt)}),o&&(0,l.each)(o,function(A){var D=A.line,z=A.point,Z=(D[1]+D[3])/2,rt,ft;z.y<Z?(rt=z.y-r.height/2,ft=Math.max(D[1],D[3])):(rt=z.y+r.height/2,ft=Math.min(D[1],D[3]));var ct=(0,l.mix)({x1:D[0],y1:rt,x2:D[0],y2:ft},u),gt=d.addShape("line",{attrs:ct,capture:!1});f.push(gt)}))},e.prototype.getLineDisObject=function(t,r){return{line:t,point:r,dis:gw(t,r)}},e.prototype.getContainer=function(){return this.get("container")},e.prototype.clearAlignLine=function(){var t=this._cfgs.alignLines;(0,l.each)(t,function(r){r.remove()}),t.length=0},e.prototype.destory=function(){var t=this._cfgs,r=t.horizontalLines,n=t.verticalLines,a=this.get("graph"),o=a.getNodes();o.forEach(function(s){var u=s.get("id");delete r["".concat(u,"tltr")],delete r["".concat(u,"lcrc")],delete r["".concat(u,"blbr")],delete n["".concat(u,"tlbl")],delete n["".concat(u,"tcbc")],delete n["".concat(u,"trbr")]}),this.clearAlignLine()},e}(lu),bw=yw,xw=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ns=function(){return ns=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},ns.apply(this,arguments)},Ew=["click","mouseenter"],ww=function(i){xw(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},e.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var t=this.get("filter")||{},r=t.multiple;r&&t.trigger==="mouseenter"&&this.set("multiple",!1);var n=this.get("align");if(!n){var a=this.get("position").split("-");a.includes("left")&&(n="left"),a.includes("right")?n="right":n="center",this.set("align",n)}var o=this.get("graph"),s=o.get("container"),u=qo(`<div class='g6-legend-container' style="position: absolute;"></div>`);s.appendChild(u),this.set("container",u);var f=this.render();gi(u,this.getContainerPos(f)),this.bindEvents()},e.prototype.getContainerPos=function(t){t===void 0&&(t=[0,0]);var r=this,n=r.get("graph"),a=this.get("offsetX"),o=this.get("offsetY"),s=this.get("margin"),u=this.get("position").split("-"),f={top:0,right:1,bottom:2,left:3},c=0,d=0,A={left:(n.getWidth()-t[0])/2+c,top:(n.getHeight()-t[1])/2+d};return u.forEach(function(D){var z=s[f[D]],Z=D;switch(D){case"top":z+=d;break;case"left":z+=c;break;case"bottom":z=n.getHeight()-t[1]-z+d,Z="top";break;default:z=n.getWidth()-t[0]-z+c,Z="left";break}A[Z]=z}),A.top+=o+n.getContainer().offsetTop,A.left+=a+n.getContainer().offsetLeft,Object.keys(A).forEach(function(D){A[D]="".concat(A[D],"px")}),A},e.prototype.bindEvents=function(){var t=this,r=t.get("filter");if(!(!r||!r.enable)){var n=r.trigger||"click";Ew.includes(n)||(console.warn("Trigger for legend filterling must be 'click' or 'mouseenter', 'click' will take effect by default."),n="click");var a=t.get("legendCanvas");n==="mouseenter"?(a.on("node-container:mouseenter",function(o){return t.filterData(o)}),a.on("node-container:mouseleave",function(o){t.clearFilter(),t.clearActiveLegend()})):(a.on("node-container:click",function(o){return t.filterData(o)}),a.on("click",function(o){o.target&&o.target.isCanvas&&o.target.isCanvas()&&(t.clearFilter(),t.clearActiveLegend())}))}},e.prototype.changeData=function(t){this.set("data",t);var r=this.render();gi(this.get("container"),this.getContainerPos(r))},e.prototype.activateLegend=function(t){var r=this.get("filter"),n=r==null?void 0:r.multiple;n||this.clearActiveLegend();var a=t.get("parent");a.get("active")?(a.set("active",!1),this.findLegendItemsByState("active").length&&a.set("inactive",!0)):(a.set("inactive",!1),a.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach(function(d){d.set("inactive",!0)}):this.clearActiveLegend();var o=(r==null?void 0:r.legendStateStyles)||{},s=(o==null?void 0:o.inactive)||{opacity:.5,"text-shape":{opacity:.5}},u=s["text-shape"]||{};this.findLegendItemsByState("inactive").forEach(function(d){var A=d.get("children"),D=A[0],z=A[1];D.attr(ns(ns({},D.get("oriAttrs")),s)),z.attr(ns(ns({},z.get("oriAttrs")),u))});var f=(o==null?void 0:o.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}},c=f["text-shape"]||{};this.findLegendItemsByState("active").forEach(function(d){var A=d.get("children"),D=A[0],z=A[1];D.attr(ns(ns({},D.get("oriAttrs")),f)),z.attr(ns(ns({},z.get("oriAttrs")),c))})},e.prototype.findLegendItemsByState=function(t,r,n){r===void 0&&(r="all"),n===void 0&&(n=!0);var a=this.get("legendCanvas").find(function(u){return u.get("name")==="root"}),o=a.find(function(u){return u.get("name")==="node-group"}),s=a.find(function(u){return u.get("name")==="edge-group"});return r==="node"?o.get("children").filter(function(u){return!!u.get(t)===n}):r==="edge"?s.get("children").filter(function(u){return!!u.get(t)===n}):o.get("children").filter(function(u){return!!u.get(t)===n}).concat(s.get("children").filter(function(u){return!!u.get(t)===n}))},e.prototype.clearActiveLegend=function(){var t=this.get("legendCanvas"),r=t.find(function(a){return a.get("name")==="root"}),n=[r.find(function(a){return a.get("name")==="node-group"}),r.find(function(a){return a.get("name")==="edge-group"})];n.forEach(function(a){a.get("children").forEach(function(o){o.set("active",!1),o.set("inactive",!1);var s=o.get("children"),u=s[0],f=s[1];u.attr(u.get("oriAttrs")),f.attr(f.get("oriAttrs"))})})},e.prototype.filterData=function(t){var r=this.get("filter"),n=r==null?void 0:r.filterFunctions;if(!(!r||!n)){var a=this.get("legendCanvas"),o=this.get("graph"),s=r.graphActiveState||"active",u=r.graphInactiveState||"inactive",f=r.multiple;this.clearFilter(),f||this.clearActiveLegend(),this.activateLegend(t.target);var c=a.find(function(ft){return ft.get("name")==="root"}),d=c.find(function(ft){return ft.get("name")==="node-group"}),A=c.find(function(ft){return ft.get("name")==="edge-group"}),D=d.get("children").filter(function(ft){return ft.get("active")}),z=A.get("children").filter(function(ft){return ft.get("active")}),Z=0,rt=["getNodes","getEdges"];rt.forEach(function(ft){o[ft]().forEach(function(ct){var gt=!1,Ct=ft==="getNodes"?D:z;Ct.forEach(function(Ht){var ne=n[Ht.get("id")];gt=gt||ne(ct.getModel())}),gt?(o.setItemState(ct,u,!1),o.setItemState(ct,s,!0),Z++):(o.setItemState(ct,s,!1),o.setItemState(ct,u,!0))})}),Z||rt.forEach(function(ft){o[ft]().forEach(function(ct){o.clearItemStates(ct,[u])})})}},e.prototype.clearFilter=function(){var t=this.get("graph"),r=this.get("filter");if(r){var n=r.graphActiveState||"active",a=r.graphInactiveState||"inactive";t.getNodes().forEach(function(o){t.clearItemStates(o,[n,a])}),t.getEdges().forEach(function(o){t.clearItemStates(o,[n,a])})}},e.prototype.render=function(){var t=this;this.processData();var r=this.get("legendCanvas");r?r.clear():r=new dc({container:this.get("container"),width:200,height:200});var n=r.addGroup({name:"root"}),a=n.addGroup({name:"node-group"}),o=n.addGroup({name:"edge-group"});this.set("legendCanvas",r);var s=this.get("itemsData"),u=["nodes","edges"],f=[a,o];u.forEach(function(sn,Jn){s[sn].forEach(function(Kn){var un,Dn=f[Jn].addGroup({id:Kn.id,name:"node-container"}),Yn,Xn=Kn.type,ia=t.getShapeSize(Kn),ha=ia.width,ja=ia.height,oi=ia.r,to=t.getStyle(sn.substr(0,4),Kn);switch(Kn.type){case"circle":Yn={r:oi,x:0,y:0};break;case"rect":Yn={width:ha,height:ja,x:-ha/2,y:-ja/2};break;case"ellipse":Yn={rx:ha,ry:ja,x:0,y:0},Xn="ellipse";break;case"line":Yn={x1:-ha/2,y1:0,x2:ha/2,y2:0},Xn="line";break;case"quadratic":Yn={path:[["M",-ha/2,0],["Q",0,ha/2,ha/2,0]]},Xn="path";break;case"cubic":Yn={path:[["M",-ha/2,0],["C",-ha/6,ha/2,ha/6,-ha/2,ha/2,0]]},Xn="path";break;case"diamond":Yn={path:[["M",0,-ja],["L",ha,0],["L",0,ja],["L",-ha,0],["Z"]]},Xn="path";break;case"triangle":Yn={path:[["M",-ha,ja],["L",0,-ja],["L",ha,ja],["Z"]]},Xn="path";break;case"star":Yn={path:Ys.getStarPath(oi*3,oi*1.2)},Xn="path";break;default:Yn={r:oi,x:0,y:0};break}var Ni=Dn.addShape(Xn,{attrs:ns(ns({},Yn),to),name:"".concat(Kn.type,"-node-keyShape"),oriAttrs:ns({opacity:1},to)});if(Kn.label){var eo=Ni.getBBox(),ho=((un=Kn.labelCfg)===null||un===void 0?void 0:un.style)||{},Xo=ns({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},ho);Dn.addShape("text",{attrs:ns({x:eo.maxX+4,y:0,text:Kn.label},Xo),className:"legend-label",name:"".concat(Kn.type,"-node-text"),oriAttrs:Xo})}})});var c=this.get("padding"),d,A=n.find(function(sn){return sn.get("name")==="title-container"}),D={height:0,maxY:0,width:0};if(this.get("title")){A||(A=n.addGroup({name:"title-container"}));var z={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:c[0]},Z=this.get("titleConfig")||{},rt=Object.assign(z,Z.style||{});d=A.addShape("text",{attrs:ns({text:this.get("title")},rt)}),D=A.getCanvasBBox(),A.setMatrix([1,0,0,0,1,0,Z.offsetX,Z.offsetY,1])}this.layoutItems();var ft=n.getCanvasBBox(),ct=a.getCanvasBBox(),gt=ct.minX<0?Math.abs(ct.minX)+c[3]:c[3],Ct=D.maxY<ct.minY?Math.abs(D.maxY-ct.minY)+c[0]:D.maxY+c[0],Ht=[1,0,0,0,1,0,gt,Ct,1];a.setMatrix(Ht),ft=n.getCanvasBBox();var ne=[ft.minX+ft.width+c[1],ft.minY+ft.height+c[2]];if(d){var Z=ns({position:"center",offsetX:0,offsetY:0},this.get("titleConfig"));D=A.getCanvasBBox();var re=A.getMatrix()||[1,0,0,0,1,0,0,0,1];Z.position==="center"?re[6]=ne[0]/2+Z.offsetX:Z.position==="right"?(re[6]=ne[0]-c[3]+Z.offsetX,d.attr({textAlign:"right"})):(re[6]=c[3]+Z.offsetX,d.attr({textAlign:"left"})),A.setMatrix(re),D=A.getCanvasBBox(),gt=ct.minX<0?Math.abs(ct.minX)+c[3]:c[3],Ct=ct.minY<D.maxY?Math.abs(D.maxY-ct.minY)+c[0]:D.maxY+c[0],Ht=[1,0,0,0,1,0,gt,Ct,1],a.setMatrix(Ht);var Me=[1,0,0,0,1,0,gt,Ct,1];this.get("layout")==="vertical"?Me[6]+=ct.maxX+this.get("horiSep"):Me[7]+=ct.maxY+this.get("vertiSep"),o.setMatrix(Me)}else{ct=a.getCanvasBBox();var je=[1,0,0,0,1,0,0,0,1];this.get("layout")==="vertical"?je[6]+=Ht[6]+ct.maxX+this.get("horiSep"):je[7]+=Ht[7]+ct.maxY+this.get("vertiSep"),o.setMatrix(je)}ft=n.getCanvasBBox(),ct=a.getCanvasBBox(),Ht=a.getMatrix()||[1,0,0,0,1,0,0,0,1];var Re=o.getMatrix()||[1,0,0,0,1,0,0,0,1],ir=o.getCanvasBBox();ne=[Math.max(ct.width+Ht[6],ir.width+Re[6])+c[1],Math.max(ct.height+Ht[7],ir.height+Re[7])+c[2]],r.changeSize(ne[0],ne[1]);var Sr=this.get("containerStyle"),pn=n.getMatrix()||[1,0,0,0,1,0,0,0,1],Gn=Ys.invertMatrix({x:0,y:0},pn),Pn=n.addShape("rect",{attrs:ns({x:Gn.x+(Sr.lineWidth||1),y:Gn.y+(Sr.lineWidth||1),width:ne[0]-2*(Sr.lineWidth||1),height:ne[1]-2*(Sr.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},Sr),name:"legend-back-rect",capture:!1});return Pn.toBack(),ne},e.prototype.layoutItems=function(){var t=this.get("legendCanvas"),r=this.get("horiSep"),n=this.get("vertiSep"),a=this.get("layout"),o=this.get("align"),s=[0,0],u=t.find(function(Ct){return Ct.get("name")==="root"}),f=u.find(function(Ct){return Ct.get("name")==="node-group"}),c=u.find(function(Ct){return Ct.get("name")==="edge-group"}),d={min:0,max:-1/0},A=-1/0;f.get("children").forEach(function(Ct,Ht){Ht===0&&(d.min=s[0]);var ne=Ct.get("children")[0],re=Ct.getCanvasBBox(),Me=ne.getBBox(),je=Me.width,Re=Me.height,ir=0,Sr=0,pn=0;a==="vertical"?(Sr=s[1],pn=s[0]+je/2,s[0]=pn+re.height+n,ir=re.maxX+Sr+je/2):(Sr=s[0]+je/2,pn=s[1],s[0]=Sr+re.width+r,ir=re.maxY+pn+Re/2),s[0]>d.max&&(d.max=s[0]),ir>A&&(A=ir),Ct.setMatrix([1,0,0,0,1,0,Sr,pn,1])});var D=d.max-d.min,z={min:0,max:-1/0},Z=f.getCanvasBBox();s[0]=0,s[1]=a==="vertical"?Z.maxX+r:Z.maxY+n,c.get("children").forEach(function(Ct,Ht){Ht===0&&(z.min=s[0]);var ne=Ct.get("children")[0],re=Ct.getCanvasBBox(),Me=ne.getBBox(),je=Me.width,Re=Me.height,ir=0,Sr=0;a==="vertical"?(ir=s[1],Sr=s[0],s[0]=Sr+re.height+n,Ct.setMatrix([1,0,0,0,1,0,0,Sr+Re/2,1])):(ir=s[0],Sr=s[1],s[0]=ir+re.width+r,Ct.setMatrix([1,0,0,0,1,0,ir+je/2,0,1])),s[0]>z.max&&(z.max=s[0])});var rt=z.max-z.min;if(o&&o!==""&&o!=="left"){var ft=D-rt,ct=o==="center"?Math.abs(ft)/2:Math.abs(ft),gt=ft<0?f:c;gt.get("children").forEach(function(Ct){var Ht=Ct.getMatrix()||[1,0,0,0,1,0,0,0,1];a==="vertical"?Ht[7]+=ct:Ht[6]+=ct,Ct.setMatrix(Ht)})}},e.prototype.processData=function(){var t=this.get("data"),r={nodes:[],edges:[]};t.nodes&&(t.nodes.sort(function(n,a){return n.order-a.order}),t.nodes.forEach(function(n){var a,o,s,u,f,c=n.size||[((a=n.style)===null||a===void 0?void 0:a.width)||((o=n.style)===null||o===void 0?void 0:o.r)||8,((s=n.style)===null||s===void 0?void 0:s.height)||((u=n.style)===null||u===void 0?void 0:u.r)||8],d=((f=n.labelCfg)===null||f===void 0?void 0:f.style)||{};r.nodes.push({id:n.id||(0,l.uniqueId)(),type:n.type||"circle",style:ns({},n.style),order:n.order,label:n.label,itemType:"node",size:c,labelCfg:{position:"right",style:ns({fontFamily:"Arial"},d)}})})),t.edges&&(t.edges.sort(function(n,a){return n.order-a.order}),t.edges.forEach(function(n){var a,o,s=n.type||"line";n.type==="cubic-horizontal"&&(s="cubic");var u=((a=n.labelCfg)===null||a===void 0?void 0:a.style)||{},f=n.size||[((o=n.style)===null||o===void 0?void 0:o.width)||8,1];r.edges.push({id:n.id||(0,l.uniqueId)(),type:s,size:f,style:ns({lineWidth:(0,l.isArray)(f)?f[1]:1},n.style),order:n.order,label:n.label,itemType:"edge",labelCfg:{position:"right",style:ns({fontFamily:"Arial"},u)}})})),this.set("itemsData",r)},e.prototype.getContainer=function(){return this.get("container")},e.prototype.formatArray=function(t){var r=this.get(t);if((0,l.isNumber)(r))this.set(t,[r,r,r,r]);else if((0,l.isArray)(r))switch(r.length){case 0:this.set(t,[0,0,0,0]);break;case 1:this.set(t,[r[0],r[0],r[0],r[0]]);break;case 2:this.set(t,[r[0],r[1],r[0],r[1]]);break;case 3:this.set(t,[r[0],r[1],r[2],r[1]]);break;default:break}return this.get(t)},e.prototype.getShapeSize=function(t){var r,n,a;return t.size&&((0,l.isArray)(t.size)?(r=t.size[0],n=t.size[1]||t.size[0],a=t.size[0]/2):(0,l.isNumber)(t.size)&&(r=t.size,n=t.size,a=t.size/2)),t.style&&(t.style.width&&(r=t.style.width),t.style.height&&(n=t.style.height),t.style.r&&(a=t.style.r)),a||(a=5),r||(r=a),n||(n=a),{width:r,height:n,r:a}},e.prototype.getStyle=function(t,r){var n=t==="node"?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1};return ns(ns({},n),r.style||{})},e.prototype.destroy=function(){var t=this.get("legendCanvas");t==null||t.destroy();var r=this.get("graph"),n=r.get("container"),a=this.get("container");n.removeChild(a)},e}(lu),Sw=ww,Mw=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Uu=function(){return Uu=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Uu.apply(this,arguments)},o0=function(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(i);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(i,r[n])&&(t[r[n]]=i[r[n]]);return t};typeof document!="undefined"&&lh()(`
  .g6-annotation-container {
    background-color: rgba(255, 255, 255, 0.3);
    padding: 8px;
  }
  .g6-annotation-wrapper {
    background-color: #fff;
    box-shadow: 0 0 8px rgba(0, 0, 0, 0.85);
  }
  .g6-annotation-header-wapper {
    height: fit-content;
    width: 100%;
    background-color: #5B8FF9;
    display: inline-flex;
    cursor: move;
  }
  .g6-annotation-title {
    margin: 4px 40px 4px 8px;
    cursor: text;
    min-width: 32px;
  }
  .g6-annotation-collapse {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-expand {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-close {
    margin: 4px 8px 4px 0;
    cursor: pointer;
  }
  .g6-annotation-content {
    padding: 8px;
    width: fit-content;
    cursor: text;
    word-break: break-all;
    min-width: 32px;
  }
  .g6-annotation-title-input-wrapper {
    margin: 4px 40px 4px 8px;
  }
  .g6-annotation-content-input {
    height: 100%;
    word-break: break-all;
  }
  .g6-annotation-content-input-wrapper {
    margin: 8px;
    height: 100%;
  }
`);var s0="canvas-annotation",_w=function(i){Mw(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"click",editable:!0,itemHighlightState:"highlight",linkHighlightStyle:{shadowColor:"#5B8FF9",shadowBlur:10},cardCfg:{minHeight:60,width:"fit-content",height:"fit-content",collapseType:"minimize",closeType:"hide",borderRadius:5,maxTitleLength:20}}},e.prototype.getEvents=function(){var t={viewportchange:"updateLinks",afterlayout:"updateLinks",aftergraphrefreshposition:"updateLinks",afterupdateitem:"updateLink",afterchangedata:"onGraphDataChange",afteritemvisibilitychange:"onGraphItemVisibilityChange"};switch(this.get("trigger")){case"click":t=Uu(Uu({},t),{"node:click":"showAnnotation","edge:click":"showAnnotation"})}return t},e.prototype.getDOMContent=function(t){if(!this.destroyed){var r=t.collapsed,n=t.maxWidth,a=t.title,o=a===void 0?"":a,s=t.content,u=s===void 0?"":s,f=t.borderRadius,c=f===void 0?5:f,d=r?"<p class='g6-annotation-expand'>+</p>":"<p class='g6-annotation-collapse'>-</p>",A=r?"":" <p class='g6-annotation-content'>".concat(u,"</p>"),D="<p class='g6-annotation-close'>x</p>",z=r?"".concat(c,"px"):"".concat(c,"px ").concat(c,"px 0 0");return'<div class="g6-annotation-wrapper" style="border-radius: '.concat(c,"px; max-width: ").concat(n,`px">
        <div
          class="g6-annotation-header-wapper"
          style="border-radius: `).concat(z,`;"
        >
          <h4 class='g6-annotation-title'>`).concat(o,`</h4>
          `).concat(d,`
          `).concat(D,`
        </div>
        `).concat(A,`
      </div>`)}},e.prototype.init=function(){var t=this;if(!t.destroyed){var r=t.get("graph"),n=r.getContainer(),a=t.get("container"),o=this.get("containerCfg");o?(a=this.createContainer(),n.appendChild(a)):a=n,this.set("container",a);var s=n.getBoundingClientRect(),u=new dc({container:n,width:s.right-s.left,height:s.bottom-s.top});gi(u.get("el"),{position:"absolute",top:0,left:0,pointerEvents:"none"}),window.addEventListener("resize",(0,l.debounce)(function(){return t.resizeCanvas(t)},100));var f=u.addGroup({id:"annotation-link-group"});t.set("linkGroup",f),t.set("canvas",u),t.get("getTitle")||t.set("getTitle",function(d){var A,D=((A=d==null?void 0:d.getModel)===null||A===void 0?void 0:A.call(d))||{},z=D.label,Z=D.id;return z||Z||"-"}),t.get("getContent")||t.set("getContent",function(d){var A,D;if(!d)return"-";var z=((A=d.getModel)===null||A===void 0?void 0:A.call(d))||{},Z=z.label,rt=z.id,ft=(D=d.getType)===null||D===void 0?void 0:D.call(d),ct=ft?"".concat(ft,": "):"";return"".concat(ct).concat(Z||rt||"")});var c=t.get("defaultData");c&&this.readData(c)}},e.prototype.createContainer=function(){var t=this;if(!this.destroyed){var r=this.get("containerCfg"),n=this.get("graph"),a=n.getContainer(),o=a.getBoundingClientRect(),s=o.left,u=o.right,f=o.top,c=o.bottom,d=c-f,A=u-s,D=r.position,z=D===void 0?"top":D,Z=r.offsetX,rt=Z===void 0?0:Z,ft=r.offsetY,ct=ft===void 0?0:ft,gt=o0(r,["position","offsetX","offsetY"]),Ct=r.height,Ht=Ct===void 0?"fit-content":Ct,ne=r.width,re=ne===void 0?n.getWidth():ne;Ht==="100%"&&(Ht=d),re==="100%"&&(re=A);var Me="unset",je="unset",Re={};switch(z){case"right":Me="".concat(d,"px"),Re={top:0,right:0},Re.right+=s+rt,Re.top+=f+ct;break;case"bottom":je="".concat(A,"px"),Re={bottom:0,left:0},Re.left+=s+rt,Re.bottom+=f+ct;break;case"top":je="".concat(A,"px");case"left":Me="".concat(d,"px");default:Re={top:0,left:0},Re.left+=s+rt,Re.top+=f+ct;break}Object.keys(Re).forEach(function(Sr){Re[Sr]="".concat(Re[Sr],"px")});var ir=qo("<div class='".concat(r.className," g6-annotation-container'></div>"));return gi(ir,Uu(Uu({position:"absolute",display:z==="top"||z==="bottom"?"inline-flex":"unset",width:(0,l.isNumber)(re)?"".concat(re,"px"):re,height:(0,l.isNumber)(Ht)?"".concat(Ht,"px"):Ht,maxHeight:Me,maxWidth:je,overflow:"scroll"},Re),gt)),a.appendChild(ir),ir.addEventListener("scroll",function(Sr){t.updateLinks()}),ir}},e.prototype.resizeCanvas=function(t){clearTimeout(t.resizeTimer),t.resizeTimer=setTimeout(function(){if(!(!t||t.destroyed)){var r=t.get("container").getBoundingClientRect(),n=r.right-r.left,a=r.bottom-r.top;t.get("canvas").changeSize(n,a),t.updateOutsideCards(t)}},250)},e.prototype.updateOutsideCards=function(t){var r=t||this,n=r.get("cardInfoMap")||{},a=r.get("graph"),o=a.getPointByCanvas(0,0),s=a.getPointByCanvas(a.getWidth(),a.getHeight()),u=a.getClientByPoint(o.x,o.y),f=u.x,c=u.y,d=a.getClientByPoint(s.x,s.y),A=d.x,D=d.y;Object.values(n).forEach(function(z){var Z=z.card;if(Z){var rt=Z.style,ft=Ll(rt.left),ct=Ll(rt.top),gt=Z.getBoundingClientRect(),Ct=gt.width,Ht=gt.height,ne=ft,re=ct;ft+Ct>A-f&&(ne=A-f-Ct),ft<0&&(ne=0),ct+Ht>D-c&&(re=D-c-Ht),ct<0&&(re=0),gi(Z,{left:"".concat(ne,"px"),top:"".concat(re,"px")})}}),r.updateLinks()},e.prototype.showAnnotation=function(t){if(!this.destroyed){var r=t.item;this.toggleAnnotation(r)}},e.prototype.hideCards=function(){var t=this;if(!t.destroyed){var r=t.get("cardInfoMap")||{};Object.keys(r).forEach(function(n){t.hideCard(n)})}},e.prototype.toggleAnnotation=function(t,r){var n,a;r===void 0&&(r={});var o=this;if(!o.destroyed){var s=o.get("cardInfoMap")||{},u=o.get("graph"),f=o.get("container"),c=o.get("containerCfg"),d=Object.assign({},o.get("cardCfg")||{},r),A=d.minHeight,D=d.minWidth,z=d.width,Z=d.height,rt=d.collapsed,ft=rt===void 0?!1:rt,ct=d.x,gt=d.y,Ct=d.title,Ht=d.content,ne=d.maxTitleLength,re=d.defaultBegin,Me=o0(d,["minHeight","minWidth","width","height","collapsed","x","y","title","content","maxTitleLength","defaultBegin"]),je=o.get("linkGroup"),Re=this.get("rows")||[[]],ir=(n=t.isCanvas)===null||n===void 0?void 0:n.call(t),Sr=ir?s0:t.getID(),pn=s[Sr]||{},Gn=pn.card,Pn=pn.link,sn=pn.x,Jn=pn.y,Kn=pn.title,un=pn.content,Dn=this.get("getTitle"),Yn=this.get("getContent"),Xn=this.get("getContentPlaceholder")||function(){return""},ia=this.get("getTitlePlaceHolder")||function(){return""},ha=Xn(t),ja=ia(t),oi=qo(this.getDOMContent(Uu({itemId:Sr,collapsed:ft,title:((a=Kn||Ct||(Dn==null?void 0:Dn(t)))===null||a===void 0?void 0:a.substr(0,ne))||ja,content:un||Ht||(Yn==null?void 0:Yn(t))||ha},Me))),to=(0,l.isNumber)(A)?"".concat(A,"px"):A;gi(oi,{minHeight:ft?"unset":to,minWidth:(0,l.isNumber)(D)?"".concat(D,"px"):D,height:Z,width:z});var Ni=!!Gn;Ni?(Pn==null||Pn.remove(!0),f.replaceChild(oi,Gn)):f.appendChild(oi);var eo;if(!c){if(eo=f.getBoundingClientRect()||{},ct!==void 0&&gt!==void 0)sn=ct,Jn=gt;else if(!Ni&&!ir){var ho=eo.top,Xo=re||{},Lo=Xo.left,Wu=Xo.right,xs=Wu===void 0?16:Wu,Yu=Xo.top,Es=Yu===void 0?8:Yu,ws=Xo.bottom,yu=xs,Xs=Es;isNaN(Lo)||(yu=f.scrollWidth-Lo),isNaN(ws)||(Xs=f.scrollHeight-ws);var tu=(0,l.isNumber)(D)?D:100;sn=f.scrollWidth-oi.scrollWidth-(Re.length-1)*tu-yu;var mi=Re[Re.length-1],Zi=(mi[mi.length-1]||{}).bbox;Jn=(Zi==null?void 0:Zi.bottom)-ho||Xs}gi(oi,{position:"absolute",left:"".concat(sn,"px"),top:"".concat(Jn,"px"),cusor:c?"unset":"move"})}this.bindListener(oi,Sr);var pi=oi.getBoundingClientRect();if(!ir){var Ki=wv(t,pi,u,this.get("canvas")),_o=this.get("linkStyle");Pn=je.addShape("path",{attrs:Uu({lineWidth:1,lineDash:[5,5],stroke:"#ccc",path:Ki},_o)})}if(s[Sr]=Uu(Uu({},s[Sr]||{}),{id:Sr,collapsed:ft,card:oi,link:Pn,x:sn,y:Jn,cardBBox:pi,content:un||Ht,title:Kn||Ct,contentPlaceholder:ha,titlePlaceholder:ja,isCanvas:ir}),o.set("cardInfoMap",s),c)this.updateCardPositionsInConatainer(),this.updateLinks();else{var Ia=!isNaN(ct)&&!isNaN(gt);if(!Ni&&!ir&&!Ia){var Si=eo.bottom,Ti=Si===void 0?0:Si,ho=eo.top;Re[Re.length-1].push({id:Sr,bbox:pi}),pi.top>Ti-ho-pi.height-16&&Re.push([]),this.set("rows",Re)}}this.updateCardSize(Sr);var Co=this.get("onAnnotationChange");Co==null||Co(s[Sr],Ni?"update":"create")}},e.prototype.updateCardPositionsInConatainer=function(){if(!this.destroyed){var t=this.get("cardInfoMap");if(t){var r=this.get("container"),n=this.get("containerCfg").position,a=r.getBoundingClientRect().width,o=getComputedStyle(r),s=Ll(o.paddingLeft)+Ll(o.paddingRight);a-=s,Object.values(t).forEach(function(u){var f=u.card,c=f.getBoundingClientRect().width;switch(n){case"right":gi(f,{marginLeft:a?"".concat(a-c,"px"):"0px"});break;case"top":case"bottom":gi(f,{marginLeft:"8px"});default:break}})}}},e.prototype.handleExpandCollapseCard=function(t){if(!this.destroyed){var r=this.get("graph"),n=this.get("cardInfoMap");if(n){var a=n[t].collapsed,o=r.findById(t);if(o){var s=this.get("cardCfg").collapseType;s==="hide"&&!a?this.hideCard(t):this.toggleAnnotation(o,{collapsed:!a}),n[t]=Uu(Uu({},n[t]),{collapsed:!a})}}}},e.prototype.hideCard=function(t){if(!this.destroyed){var r=this.get("cardInfoMap");if(!(!r||!r[t])){var n=r[t],a=n.card,o=n.link;gi(a,{display:"none"}),o==null||o.hide();var s=this.get("onAnnotationChange");s(r[t],"hide")}}},e.prototype.removeCard=function(t){if(!this.destroyed){var r=this.get("cardInfoMap");if(r){var n=r[t],a=n.card,o=n.link,s=this.get("container");s.removeChild(a),o==null||o.remove(!0),delete r[t];var u=this.get("onAnnotationChange");u(n,"remove")}}},e.prototype.bindListener=function(t,r){var n=this;if(!this.destroyed){t.addEventListener("mousemove",function(u){var f;if(u.target.className==="g6-annotation-collapse"?f="collapse":u.target.className==="g6-annotation-expand"?f="expand":u.target.className==="g6-annotation-close"&&(f="close"),f){var c=n.get("cardCfg").onMouseEnterIcon,d=c===void 0?function(){}:c;d(u,r,f)}}),t.addEventListener("mouseout",function(u){var f;if(u.target.className==="g6-annotation-collapse"?f="collapse":u.target.className==="g6-annotation-expand"?f="expand":u.target.className==="g6-annotation-close"&&(f="close"),f){var c=n.get("cardCfg").onMouseLeaveIcon,d=c===void 0?function(){}:c;d(u,r,f)}}),t.addEventListener("mouseenter",function(u){var f=n.get("cardInfoMap");if(f){var c=n.get("graph"),d=c.findById(r);if(d){var A=n.get("itemHighlightState");c.setItemState(d,A,!0)}var D=f[r].link;if(D){var z=n.get("linkHighlightStyle")||{};D.attr(z)}}}),t.addEventListener("mouseleave",function(u){var f=n.get("cardInfoMap");if(f){var c=n.get("graph"),d=c.findById(r);if(d){var A=n.get("itemHighlightState");c.setItemState(d,A,!1)}var D=f[r].link;if(D){var z=n.get("linkHighlightStyle")||{};Object.keys(z).forEach(function(rt){D.attr(rt,void 0),D.attr(rt,void 0)});var Z=n.get("linkStyle");D.attr(Z)}}}),t.addEventListener("click",function(u){var f=(n.get("cardCfg")||{}).onClickIcon;if(u.target.className==="g6-annotation-collapse"||u.target.className==="g6-annotation-expand"){var c=n.get("cardCfg").collapseType;c==="hide"?n.hideCard(r):n.handleExpandCollapseCard(r),f==null||f(u,r,u.target.className==="g6-annotation-collapse"?"collapse":"expand")}else if(u.target.className==="g6-annotation-close"){var d=n.get("cardCfg").closeType;d==="remove"?n.removeCard(r):n.hideCard(r),f==null||f(u,r,"close")}});var a=this.get("editable");a&&t.addEventListener("dblclick",function(u){var f=n.get("cardInfoMap"),c=(n.get("cardCfg")||{}).maxTitleLength,d=c===void 0?20:c;if(f){var A=u.target,D=A.className;if(!(D!=="g6-annotation-title"&&D!=="g6-annotation-content")){var z=D==="g6-annotation-title"?A.getBoundingClientRect():A.parentNode.getBoundingClientRect(),Z=z.width,rt=z.height,ft=getComputedStyle(A),ct=D==="g6-annotation-title"?"input":"textarea",gt=qo("<".concat(ct,' class="').concat(D,'-input" type="textarea" style="width:').concat(Z,"px; height: ").concat(rt,'px; min-width: 16px;"/>')),Ct=qo('<div class="'.concat(D,'-input-wrapper" style="width: ').concat(Z,"px; height: ").concat(rt,"px; min-width: 16px; margin-right: ").concat(ft.marginRight,'" />'));Ct.appendChild(gt),A.parentNode.replaceChild(Ct,A);var Ht=f[r],ne=Ht.contentPlaceholder,re=Ht.titlePlaceholder,Me=Ht.content,je=Ht.title,Re=Me;D==="g6-annotation-title"?(gt.name="title",gt.maxLength=d,Re=je):gt.name="content",Re?(gt.innerHTML=A.innerHTML,gt.value=A.innerHTML):gt.placeholder=D==="g6-annotation-title"?re:ne,gt.focus(),gt.addEventListener("blur",function(ir){gt.value&&(A.innerHTML=gt.value,Ht[gt.name||"title"]=gt.value),Ct.parentNode.replaceChild(A,Ct),n.updateCardSize(r);var Sr=n.get("onAnnotationChange");Sr==null||Sr(Ht,"update")})}}});var o=["g6-annotation-title","g6-annotation-content","g6-annotation-title-input","g6-annotation-content-input"];t.draggable=!0,t.addEventListener("dragstart",function(u){var f=u.target.className;if(!o.includes(f)){var c=t.style;n.set("dragging",{card:t,x:u.clientX,y:u.clientY,left:Ll(c.left),top:Ll(c.top)})}}),t.addEventListener("drag",function(u){u.preventDefault();var f=n.get("cardInfoMap");if(f){var c=u.clientX,d=u.clientY,A=n.get("dragging");if(!(isNaN(c)||isNaN(d)||!A)){var D=A.x,z=A.y,Z=A.left,rt=A.top,ft=A.card,ct=c-D,gt=d-z;Z+=ct,rt+=gt;var Ct=n.get("graph"),Ht=Ct.getPointByCanvas(0,0),ne=Ct.getPointByCanvas(Ct.getWidth(),Ct.getHeight()),re=Ct.getClientByPoint(Ht.x,Ht.y),Me=re.x,je=re.y,Re=Ct.getClientByPoint(ne.x,ne.y),ir=Re.x,Sr=Re.y,pn=ft.getBoundingClientRect(),Gn=pn.right-pn.left,Pn=pn.bottom-pn.top;(Z>ir-Me-Gn&&ct>0||Z<0&&ct<0)&&(Z-=ct),(rt>Sr-je-Pn&&gt>0||rt<0&&gt<0)&&(rt-=gt),gi(ft,{left:"".concat(Z,"px"),top:"".concat(rt,"px"),visibility:"hidden"}),D=c,z=d;var sn=(f[r]||{}).link;if(sn){var Jn=Ct.findById(r);sn.attr("path",wv(Jn,pn,Ct,n.get("canvas")))}n.set("dragging",{x:D,y:z,left:Z,top:rt,card:ft})}}});var s=function(f){var c=n.get("cardInfoMap");if(c){var d=n.get("dragging");if(d){var A=d.left,D=d.top,z=d.card;c[r].x=A,c[r].y=D,gi(z,{visibility:"visible"}),n.set("dragging",!1);var Z=n.get("rows");Z==null||Z.forEach(function(ft){for(var ct=ft.length-1;ct>=0;ct--)ft[ct].id===r&&ft.splice(ct,1)});var rt=n.get("onAnnotationChange");rt==null||rt(c[r],"update")}}};t.addEventListener("dragend",s)}},e.prototype.updateCardSize=function(t){var r=this.get("cardInfoMap");if(r){var n=r[t].card,a=n.getBoundingClientRect().width,o=n.getElementsByClassName("g6-annotation-title")[0];if(o){var s=getComputedStyle(o),u=Ll(s.marginLeft),f=o.getBoundingClientRect().width;gi(o,{marginRight:"".concat(a-u-24-16-f,"px")})}}},e.prototype.updateLink=function(t){var r=t.item;if(r){var n=this.get("cardInfoMap");if(n){var a=this.get("canvas"),o=this.get("graph"),s=r.getID(),u=n[s]||{},f=u.link,c=u.card;if(f){var d=wv(r,c.getBoundingClientRect(),o,a);f.attr("path",d)}}}},e.prototype.updateLinks=function(){var t=this;if(!this.destroyed){var r=this.get("cardInfoMap");if(r){var n=this.get("graph");Object.values(r).forEach(function(a){var o=a.id,s=n.findById(o);t.updateLink({item:s})})}}},e.prototype.onGraphDataChange=function(){var t=this,r=this.get("cardInfoMap");if(r){var n=this.get("graph");Object.values(r).forEach(function(a){var o=a.id,s=a.card,u=a.isCanvas;if(!(!s||u||s.style.display==="none")){var f=n.findById(o);f&&f.isVisible()?t.toggleAnnotation(f):t.hideCard(o)}})}},e.prototype.onGraphItemVisibilityChange=function(t){var r=t.item,n=t.visible;if(!(!r||r.destroyed)){var a=this.get("cardInfoMap");if(a){var o=r.getID();a[o]&&(n||this.hideCard(o))}}},e.prototype.saveData=function(t){t===void 0&&(t=!1);var r=this.get("cardInfoMap");if(r){var n=this.get("graph"),a=this.get("getTitle"),o=this.get("getContent"),s=[];return Object.values(r).forEach(function(u){var f=u.title,c=u.content,d=u.x,A=u.y,D=u.id,z=u.collapsed,Z=u.card;if(!(Z&&Z.style.display==="none"&&!t)){var rt=n.findById(D)||n.get("canvas");s.push({id:D,x:d,y:A,collapsed:z,title:f||(a==null?void 0:a(rt)),content:c||(o==null?void 0:o(rt)),visible:Z&&Z.style.display!=="none"})}}),s}},e.prototype.readData=function(t){var r=this,n=this.get("graph");t.forEach(function(a){var o=a.id,s=a.x,u=a.y,f=a.title,c=a.content,d=a.collapsed,A=a.visible,D=n.findById(o);if(!D&&o===s0&&(D=n.get("canvas")),!D){var z=r.get("cardInfoMap")||{};z[o]=a,r.set("cardInfoMap",z);return}r.toggleAnnotation(D,{x:s,y:u,title:f,content:c,collapsed:d}),A||r.hideCard(o)})},e.prototype.clear=function(){var t=this.get("cardInfoMap");if(t){var r=this.get("container");Object.values(t).forEach(function(n){var a=n.card,o=n.link;r.removeChild(a),o==null||o.remove(!0)}),this.set("cardInfoMap",{})}},e.prototype.destroy=function(){var t;this.clear(),(t=this.get("canvas"))===null||t===void 0||t.destroy();var r=this.get("graph");!r||r.destroyed||(this.get("containerCfg")&&r.getContainer().removeChild(this.get("container")),this.destroyed=!0)},e}(lu),Cw=_w,Tw=function(e,t){var r,n,a,o=1/0;Object.keys(e).forEach(function(f){var c=e[f];Object.keys(t).forEach(function(d){var A=t[d],D=c.x-A.x,z=c.y-A.y,Z=D*D+z*z;o>Z&&(o=Z,r=c,n=A,a=[f,d])})});var s=20,u=Ys.getControlPoint(r,n,.5,s);return[["M",r.x,r.y],["Q",u.x,u.y,n.x,n.y]]},wv=function(e,t,r,n){var a,o,s=e.getType();if(s==="edge")o=[e.getKeyShape().getPoint(.5)];else{var u=(a=e.getKeyShape)===null||a===void 0?void 0:a.call(e).getBBox(),f=u.minX,c=u.minY,d=u.maxX,A=u.maxY,D=e.getModel(),z=D.x,Z=D.y;f+=z,c+=Z,d+=z,A+=Z,o={left:{x:f,y:(c+A)/2},right:{x:d,y:(c+A)/2},top:{x:(f+d)/2,y:c},bottom:{x:(f+d)/2,y:A}}}Object.keys(o).forEach(function(je){var Re=o[je],ir=Re.x,Sr=Re.y,pn=r.getClientByPoint(ir,Sr);o[je]=n.getPointByClient(pn.x,pn.y)});var rt=t.top,ft=rt===void 0?0:rt,ct=t.left,gt=ct===void 0?0:ct,Ct=t.right,Ht=Ct===void 0?0:Ct,ne=t.bottom,re=ne===void 0?0:ne,Me={left:n.getPointByClient(gt,(ft+re)/2),right:n.getPointByClient(Ht,(ft+re)/2),top:n.getPointByClient((gt+Ht)/2,ft),bottom:n.getPointByClient((gt+Ht)/2,re)};return Tw(o,Me)},Ll=function(e){return Number(e.replace(/\s+|px/gi,""))||0},Aw={PluginBase:lu,Menu:Gb,Grid:kb,Minimap:Hb,Bundling:qb,ToolBar:ax,Tooltip:sx,Fisheye:tx,TimeBar:iw,ImageMinimap:cw,EdgeFilterLens:vw,SnapLine:bw,Legend:Sw,Annotation:Cw},Ow=Aw,bs=Ow;lc("circle",{options:{size:Qn.defaultNode.size,style:{x:0,y:0,stroke:Qn.defaultNode.style.stroke,fill:Qn.defaultNode.style.fill,lineWidth:Qn.defaultNode.style.lineWidth},labelCfg:{style:{fill:Qn.nodeLabel.style.fill,fontSize:Qn.nodeLabel.style.fontSize,fontFamily:Qn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Qn.defaultNode.linkPoints.size,lineWidth:Qn.defaultNode.linkPoints.lineWidth,fill:Qn.defaultNode.linkPoints.fill,stroke:Qn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,y.__assign)({},Qn.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=(0,l.deepMix)({},n,e.icon),s="".concat(this.type,"-keyShape"),u=t.addShape("circle",{attrs:a,className:s,name:s,draggable:!0});t.shapeMap[s]=u;var f=o.width,c=o.height,d=o.show,A=o.text;if(d){var D="".concat(this.type,"-icon");A?t.shapeMap[D]=t.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:D,name:D,draggable:!0}):t.shapeMap[D]=t.addShape("image",{attrs:(0,y.__assign)({x:-f/2,y:-c/2},o),className:D,name:D,draggable:!0})}return this.drawLinkPoints(e,t),u},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints;if(r){var n=r||{},a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,d=(0,y.__rest)(n,["top","left","right","bottom","size","r"]),A=this.getSize(e),D=A[0]/2;if(o){var z="link-point-left";t.shapeMap[z]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},d),{x:-D,y:0,r:f/2||c||5}),className:z,name:z,isAnchorPoint:!0})}if(s){var Z="link-point-right";t.shapeMap[Z]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},d),{x:D,y:0,r:f/2||c||5}),className:Z,name:Z,isAnchorPoint:!0})}if(a){var rt="link-point-top";t.shapeMap[rt]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},d),{x:0,y:-D,r:f/2||c||5}),className:rt,name:rt,isAnchorPoint:!0})}if(u){var ft="link-point-bottom";t.shapeMap[ft]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},d),{x:0,y:D,r:f/2||c||5}),className:ft,name:ft,isAnchorPoint:!0})}}},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,l.deepMix)({},t,r),a=this.getSize(e),o=a[0]/2,s=(0,y.__assign)({x:0,y:0,r:o},n);return s},update:function(e,t,r){var n=t.getContainer(),a=this.getSize(e),o=(0,y.__assign)({},e.style);e.style.stroke===void 0&&e.color&&(o.stroke=e.color),e.style.r===void 0&&!isNaN(a[0])&&(o.r=a[0]/2),this.updateShape(e,t,o,!0,r),this.updateLinkPoints(e,n)}},"single-node"),lc("rect",{options:{size:[100,30],style:{radius:0,stroke:Qn.defaultNode.style.stroke,fill:Qn.defaultNode.style.fill,lineWidth:Qn.defaultNode.style.lineWidth},labelCfg:{style:{fill:Qn.nodeLabel.style.fill,fontSize:Qn.nodeLabel.style.fontSize,fontFamily:Qn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Qn.defaultNode.linkPoints.size,lineWidth:Qn.defaultNode.linkPoints.lineWidth,fill:Qn.defaultNode.linkPoints.fill,stroke:Qn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,y.__assign)({},Qn.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return t.shapeMap["".concat(this.type,"-keyShape")]=n,this.drawLinkPoints(e,t),n},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,d=(0,y.__rest)(n,["top","left","right","bottom","size","r"]),A=this.getSize(e),D=A[0],z=A[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},d),{x:-D/2,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},d),{x:D/2,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},d),{x:0,y:-z/2,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},d),{x:0,y:z/2,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,l.mix)({},t,r),a=this.getSize(e),o=n.width||a[0],s=n.height||a[1],u=(0,y.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getSize(e),s=t.get("keyShape");e.size||(o[0]=s.attr("width")||a.width,o[1]=s.attr("height")||a.height);var u={stroke:e.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},f=(0,l.mix)({},a,s.attr(),u);f=(0,l.mix)(f,e.style),this.updateShape(e,t,f,!1,r),this.updateLinkPoints(e,n)}},"single-node"),lc("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:Qn.defaultNode.style.stroke,fill:Qn.defaultNode.style.fill,lineWidth:Qn.defaultNode.style.lineWidth},labelCfg:{style:{fill:Qn.nodeLabel.style.fill,fontSize:Qn.nodeLabel.style.fontSize,fontFamily:Qn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Qn.defaultNode.linkPoints.size,lineWidth:Qn.defaultNode.linkPoints.lineWidth,fill:Qn.defaultNode.linkPoints.fill,stroke:Qn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,y.__assign)({},Qn.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("ellipse",{attrs:a,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0});t.shapeMap["ellipse-keyShape"]=o;var s=n.width,u=n.height,f=n.show,c=n.text;return f&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,y.__assign)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,d=(0,y.__rest)(n,["top","left","right","bottom","size","r"]),A=this.getSize(e),D=A[0]/2,z=A[1]/2;o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},d),{x:-D,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},d),{x:D,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},d),{x:0,y:-z,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},d),{x:0,y:z,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,l.mix)({},t,r),a=this.getSize(e),o=a[0]/2,s=a[1]/2,u=(0,y.__assign)({x:0,y:0,rx:o,ry:s},n);return u},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getSize(e),s={stroke:e.color,rx:o[0]/2,ry:o[1]/2},u=t.get("keyShape"),f=(0,l.mix)({},a,u.attr(),s);f=(0,l.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)}},"single-node"),lc("diamond",{options:{size:[80,80],style:{stroke:Qn.defaultNode.style.stroke,fill:Qn.defaultNode.style.fill,lineWidth:Qn.defaultNode.style.lineWidth},labelCfg:{style:{fill:Qn.nodeLabel.style.fill,fontSize:Qn.nodeLabel.style.fontSize,fontFamily:Qn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Qn.defaultNode.linkPoints.size,lineWidth:Qn.defaultNode.linkPoints.lineWidth,fill:Qn.defaultNode.linkPoints.fill,stroke:Qn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,y.__assign)({},Qn.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=o;var s=n.width,u=n.height,f=n.show,c=n.text;return f&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,y.__assign)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,d=(0,y.__rest)(n,["top","left","right","bottom","size","r"]),A=this.getSize(e),D=A[0],z=A[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},d),{x:-D/2,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},d),{x:D/2,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},d),{x:0,y:-z/2,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},d),{x:0,y:z/2,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getPath:function(e){var t=this.getSize(e),r=t[0],n=t[1],a=[["M",0,-n/2],["L",r/2,0],["L",0,n/2],["L",-r/2,0],["Z"]];return a},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,l.mix)({},t,r),a=this.getPath(e),o=(0,y.__assign)({path:a},n);return o},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),f=(0,l.mix)({},a,u.attr(),s);f=(0,l.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)}},"single-node"),lc("triangle",{options:{size:40,direction:"up",style:{stroke:Qn.defaultNode.style.stroke,fill:Qn.defaultNode.style.fill,lineWidth:Qn.defaultNode.style.lineWidth},labelCfg:{style:{fill:Qn.nodeLabel.style.fill,fontSize:Qn.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Qn.defaultNode.linkPoints.size,lineWidth:Qn.defaultNode.linkPoints.lineWidth,fill:Qn.defaultNode.linkPoints.fill,stroke:Qn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:(0,y.__assign)({},Qn.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.icon,a=n===void 0?{}:n,o=r.direction,s=this.getShapeStyle(e),u=e.direction||o,f=t.addShape("path",{attrs:s,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=f;var c=a.width,d=a.height,A=a.show,D=a.offset,z=a.text;if(A)if(z)t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0});else{var Z=-c/2,rt=-d/2;(u==="up"||u==="down")&&(rt+=D),(u==="left"||u==="right")&&(Z+=D),t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,y.__assign)({x:Z,y:rt},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})}return this.drawLinkPoints(e,t),f},drawLinkPoints:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.linkPoints,a=n===void 0?{}:n,o=r.direction,s=e.direction||o,u=a.top,f=a.left,c=a.right,d=a.bottom,A=a.size,D=a.r,z=(0,y.__rest)(a,["top","left","right","bottom","size","r"]),Z=this.getSize(e),rt=Z[0];if(f){var ft=null,ct=rt*Math.sin(1/3*Math.PI),gt=rt*Math.sin(1/3*Math.PI);s==="up"?ft=[-gt,ct]:s==="down"?ft=[-gt,-ct]:s==="left"&&(ft=[-gt,gt-ct]),ft&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},z),{x:ft[0],y:ft[1],r:A/2||D||5}),className:"link-point-left",name:"link-point-left"}))}if(c){var Ct=null,ct=rt*Math.sin(1/3*Math.PI),gt=rt*Math.sin(1/3*Math.PI);s==="up"?Ct=[gt,ct]:s==="down"?Ct=[gt,-ct]:s==="right"&&(Ct=[gt,gt-ct]),Ct&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},z),{x:Ct[0],y:Ct[1],r:A/2||D||5}),className:"link-point-right",name:"link-point-right"}))}if(u){var Ht=null,ct=rt*Math.sin(1/3*Math.PI),gt=rt*Math.sin(1/3*Math.PI);s==="up"?Ht=[gt-ct,-ct]:s==="left"?Ht=[gt,-ct]:s==="right"&&(Ht=[-gt,-ct]),Ht&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},z),{x:Ht[0],y:Ht[1],r:A/2||D||5}),className:"link-point-top",name:"link-point-top"}))}if(d){var ne=null,ct=rt*Math.sin(1/3*Math.PI),gt=rt*Math.sin(1/3*Math.PI);s==="down"?ne=[-gt+ct,ct]:s==="left"?ne=[gt,ct]:s==="right"&&(ne=[-gt,ct]),ne&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},z),{x:ne[0],y:ne[1],r:A/2||D||5}),className:"link-point-bottom",name:"link-point-bottom"}))}},getPath:function(e){var t=(this.mergeStyle||this.getOptions(e)).direction,r=e.direction||t,n=this.getSize(e),a=n[0],o=a*Math.sin(1/3*Math.PI),s=a*Math.sin(1/3*Math.PI),u=[["M",-s,o],["L",0,-o],["L",s,o],["Z"]];return r==="down"?u=[["M",-s,-o],["L",s,-o],["L",0,o],["Z"]]:r==="left"?u=[["M",-s,s-o],["L",s,-s],["L",s,s],["Z"]]:r==="right"&&(u=[["M",s,s-o],["L",-s,s],["L",-s,-s],["Z"]]),u},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,l.mix)({},t,r),a=this.getPath(e),o=(0,y.__assign)({path:a},n);return o},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),f=(0,l.mix)({},a,u.attr(),s);f=(0,l.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)},updateLinkPoints:function(e,t){var r=this.getOptions({}),n=r.linkPoints,a=r.direction,o=e.direction||a,s=t.shapeMap["link-point-left"]||t.find(function(sn){return sn.get("className")==="link-point-left"}),u=t.shapeMap["link-point-right"]||t.find(function(sn){return sn.get("className")==="link-point-right"}),f=t.shapeMap["link-point-top"]||t.find(function(sn){return sn.get("className")==="link-point-top"}),c=t.shapeMap["link-point-bottom"]||t.find(function(sn){return sn.get("className")==="link-point-bottom"}),d=n,A=s||u||f||c;A&&(d=A.attr());var D=(0,l.mix)({},d,e.linkPoints),z=D.fill,Z=D.stroke,rt=D.lineWidth,ft=D.size/2;ft||(ft=D.r);var ct=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},gt=ct.left,Ct=ct.right,Ht=ct.top,ne=ct.bottom,re=this.getSize(e),Me=re[0],je={r:ft,fill:z,stroke:Z,lineWidth:rt},Re=null,ir=Me*Math.sin(1/3*Math.PI),Sr=Me*Math.sin(1/3*Math.PI);o==="up"?Re=[-Sr,ir]:o==="down"?Re=[-Sr,-ir]:o==="left"&&(Re=[-Sr,Sr-ir]),Re&&(s?!gt&&gt!==void 0?(s.remove(),delete t.shapeMap["link-point-left"]):s.attr((0,y.__assign)((0,y.__assign)({},je),{x:Re[0],y:Re[1]})):gt&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},je),{x:Re[0],y:Re[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})));var pn=null;o==="up"?pn=[Sr,ir]:o==="down"?pn=[Sr,-ir]:o==="right"&&(pn=[Sr,Sr-ir]),pn&&(u?!Ct&&Ct!==void 0?(u.remove(),delete t.shapeMap["link-point-right"]):u.attr((0,y.__assign)((0,y.__assign)({},je),{x:pn[0],y:pn[1]})):Ct&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},je),{x:pn[0],y:pn[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})));var Gn=null;o==="up"?Gn=[Sr-ir,-ir]:o==="left"?Gn=[Sr,-ir]:o==="right"&&(Gn=[-Sr,-ir]),Gn&&(f?!Ht&&Ht!==void 0?(f.remove(),delete t.shapeMap["link-point-top"]):f.attr((0,y.__assign)((0,y.__assign)({},je),{x:Gn[0],y:Gn[1]})):Ht&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},je),{x:Gn[0],y:Gn[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})));var Pn=null;o==="down"?Pn=[-Sr+ir,ir]:o==="left"?Pn=[Sr,ir]:o==="right"&&(Pn=[-Sr,ir]),Pn&&(c?!ne&&ne!==void 0?(c.remove(),delete t.shapeMap["link-point-bottom"]):c.attr((0,y.__assign)((0,y.__assign)({},je),{x:Pn[0],y:Pn[1]})):ne&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},je),{x:Pn[0],y:Pn[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})))}},"single-node"),lc("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:Qn.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14,fontFamily:Qn.windowFontFamily},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf",fontFamily:Qn.windowFontFamily},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).preRect,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=this.getSize(e),s=o[0],u=o[1],f=t.addShape("rect",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=f;var c=n.show,d=(0,y.__rest)(n,["show"]);return c&&(t.shapeMap["pre-rect"]=t.addShape("rect",{attrs:(0,y.__assign)({x:-s/2,y:-u/2,height:u},d),className:"pre-rect",name:"pre-rect",draggable:!0})),this.drawLogoIcon(e,t),this.drawStateIcon(e,t),this.drawLinkPoints(e,t),f},drawLogoIcon:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).logoIcon,n=r===void 0?{}:r,a=this.getSize(e),o=a[0];if(n.show){var s=n.width,u=n.height,f=n.x,c=n.y,d=n.offset,A=n.text,D=(0,y.__rest)(n,["width","height","x","y","offset","text"]);A?t.shapeMap["rect-logo-icon"]=t.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},D),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):t.shapeMap["rect-logo-icon"]=t.addShape("image",{attrs:(0,y.__assign)((0,y.__assign)({},D),{x:f||-o/2+s+d,y:c||-u/2,width:s,height:u}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).stateIcon,n=r===void 0?{}:r,a=this.getSize(e),o=a[0];if(n.show){var s=n.width,u=n.height,f=n.x,c=n.y,d=n.offset,A=n.text,D=(0,y.__rest)(n,["width","height","x","y","offset","text"]);A?t.shapeMap["rect-state-icon"]=t.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},D),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):t.shapeMap["rect-state-icon"]=t.addShape("image",{attrs:(0,y.__assign)((0,y.__assign)({},D),{x:f||o/2-s+d,y:c||-u/2,width:s,height:u}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,d=(0,y.__rest)(n,["top","left","right","bottom","size","r"]),A=this.getSize(e),D=A[0],z=A[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},d),{x:-D/2,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},d),{x:D/2,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},d),{x:0,y:-z/2,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},d),{x:0,y:z/2,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},drawLabel:function(e,t){var r=this.getOptions(e),n=r.labelCfg,a=n===void 0?{}:n,o=r.logoIcon,s=o===void 0?{}:o,u=r.descriptionCfg,f=u===void 0?{}:u,c=this.getSize(e),d=c[0],A=null,D=s.show,z=s.width,Z=-d/2+a.offset;D&&(Z=-d/2+z+a.offset);var rt=a.style,ft=f.style,ct=f.paddingTop;return(0,l.isString)(e.description)?(A=t.addShape("text",{attrs:(0,y.__assign)((0,y.__assign)({},rt),{x:Z,y:-5,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=A,t.shapeMap["rect-description"]=t.addShape("text",{attrs:(0,y.__assign)((0,y.__assign)({},ft),{x:Z,y:17+(ct||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})):(A=t.addShape("text",{attrs:(0,y.__assign)((0,y.__assign)({},rt),{x:Z,y:7,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=A),A},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,l.mix)({},t,r),a=this.getSize(e),o=n.width||a[0],s=n.height||a[1],u=(0,y.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.style,a=n===void 0?{}:n,o=r.labelCfg,s=o===void 0?{}:o,u=r.descriptionCfg,f=u===void 0?{}:u,c=this.getSize(e),d=c[0],A=c[1],D=t.get("keyShape");D.attr((0,y.__assign)((0,y.__assign)({},a),{x:-d/2,y:-A/2,width:d,height:A}));var z=t.getContainer(),Z=z.shapeMap["rect-logo-icon"]||z.find(function(oi){return oi.get("className")==="rect-logo-icon"}),rt=Z?Z.attr():{},ft=(0,l.mix)({},rt,e.logoIcon),ct=ft.width;ct===void 0&&(ct=this.options.logoIcon.width);var gt=e.logoIcon?e.logoIcon.show:void 0,Ct=s.offset,Ht=-d/2+ct+Ct;!gt&&gt!==void 0&&(Ht=-d/2+Ct);var ne=z.shapeMap["node-label"]||z.find(function(oi){return oi.get("className")==="node-label"}),re=z.shapeMap["rect-description"]||z.find(function(oi){return oi.get("className")==="rect-description"});if(e.label)if(!ne)z.shapeMap["node-label"]=z.addShape("text",{attrs:(0,y.__assign)((0,y.__assign)({},s.style),{x:Ht,y:e.description?-5:7,text:e.label}),className:"node-label",name:"node-label",draggable:!0,labelRelated:!0});else{var Me=e.labelCfg?e.labelCfg.style:{},je=(0,l.mix)({},ne.attr(),Me);e.label&&(je.text=e.label),je.x=Ht,(0,l.isString)(e.description)&&(je.y=-5),re&&(re.resetMatrix(),re.attr({x:Ht})),ne.resetMatrix(),ne.attr(je)}if((0,l.isString)(e.description)){var Re=f.paddingTop;if(!re)z.shapeMap["rect-description"]=z.addShape("text",{attrs:(0,y.__assign)((0,y.__assign)({},f.style),{x:Ht,y:17+(Re||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0});else{var Me=e.descriptionCfg?e.descriptionCfg.style:{},ir=(0,l.mix)({},re.attr(),Me);(0,l.isString)(e.description)&&(ir.text=e.description),ir.x=Ht,re.resetMatrix(),re.attr((0,y.__assign)((0,y.__assign)({},ir),{y:17+(Re||0)}))}}var Sr=z.shapeMap["pre-rect"]||z.find(function(oi){return oi.get("className")==="pre-rect"});if(Sr&&!Sr.destroyed){var pn=(0,l.mix)({},Sr.attr(),e.preRect);Sr.attr((0,y.__assign)((0,y.__assign)({},pn),{x:-d/2,y:-A/2,height:A}))}if(Z&&!Z.destroyed)if(!gt&&gt!==void 0)Z.remove(),delete z.shapeMap["pre-rect"];else{var Gn=ft.width,Pn=ft.height,sn=ft.x,Jn=ft.y,Kn=ft.offset,un=(0,y.__rest)(ft,["width","height","x","y","offset"]);Z.attr((0,y.__assign)((0,y.__assign)({},un),{x:sn||-d/2+Gn+Kn,y:Jn||-Pn/2,width:Gn,height:Pn}))}else gt&&this.drawLogoIcon(e,z);var Dn=z.shapeMap["rect-state-icon"]||z.find(function(oi){return oi.get("className")==="rect-state-icon"}),Yn=Dn?Dn.attr():{},Xn=(0,l.mix)({},Yn,e.stateIcon);if(Dn){!Xn.show&&Xn.show!==void 0&&(Dn.remove(),delete z.shapeMap["rect-state-icon"]);var ia=Xn.width,Pn=Xn.height,sn=Xn.x,Jn=Xn.y,ha=Xn.offset,ja=(0,y.__rest)(Xn,["width","height","x","y","offset"]);Dn.attr((0,y.__assign)((0,y.__assign)({},ja),{x:sn||d/2-ia+ha,y:Jn||-Pn/2,width:ia,height:Pn}))}else Xn.show&&this.drawStateIcon(e,z);this.updateLinkPoints(e,z)},getOptions:function(e,t){return t==="move"?e:(0,l.deepMix)({},this.options,this.getCustomConfig(e)||{},e)}},"single-node"),lc("star",{options:{size:60,style:{stroke:Qn.defaultNode.style.stroke,fill:Qn.defaultNode.style.fill,lineWidth:Qn.defaultNode.style.lineWidth},labelCfg:{style:{fill:Qn.nodeLabel.style.fill,fontSize:Qn.nodeLabel.style.fontSize,fontFamily:Qn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Qn.defaultNode.linkPoints.size,lineWidth:Qn.defaultNode.linkPoints.lineWidth,fill:Qn.defaultNode.linkPoints.fill,stroke:Qn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,y.__assign)({},Qn.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=o;var s=n.width,u=n.height,f=n.show,c=n.text;return f&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,y.__assign)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.leftBottom,f=n.rightBottom,c=n.size,d=n.r,A=(0,y.__rest)(n,["top","left","right","leftBottom","rightBottom","size","r"]),D=this.getSize(e),z=D[0];if(s){var Z=Math.cos(.1*Math.PI)*z,rt=Math.sin((18+72*0)/180*Math.PI)*z;t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},A),{x:Z,y:-rt,r:c/2||d||5}),className:"link-point-right",name:"link-point-right"})}if(a){var Z=Math.cos(.5*Math.PI)*z,rt=Math.sin((18+72*1)/180*Math.PI)*z;t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},A),{x:Z,y:-rt,r:c/2||d||5}),className:"link-point-top",name:"link-point-top"})}if(o){var Z=Math.cos(.9*Math.PI)*z,rt=Math.sin((18+72*2)/180*Math.PI)*z;t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},A),{x:Z,y:-rt,r:c/2||d||5}),className:"link-point-left",name:"link-point-left"})}if(u){var Z=Math.cos(1.3*Math.PI)*z,rt=Math.sin((18+72*3)/180*Math.PI)*z;t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},A),{x:Z,y:-rt,r:c/2||d||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})}if(f){var Z=Math.cos(1.7*Math.PI)*z,rt=Math.sin((18+72*4)/180*Math.PI)*z;t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},A),{x:Z,y:-rt,r:c/2||d||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"})}},getPath:function(e){var t=this.getSize(e),r=t[0],n=r*3/8,a=e.innerR||n;return Ys.getStarPath(r,a)},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,l.mix)({},t,r),a=this.getPath(e),o=(0,y.__assign)({path:a},n);return o},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),f=(0,l.mix)({},a,u.attr(),s);f=(0,l.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)},updateLinkPoints:function(e,t){var r=this.getOptions({}).linkPoints,n=t.shapeMap["link-point-left"]||t.find(function(ir){return ir.get("className")==="link-point-left"}),a=t.shapeMap["link-point-right"]||t.find(function(ir){return ir.get("className")==="link-point-right"}),o=t.shapeMap["link-point-top"]||t.find(function(ir){return ir.get("className")==="link-point-top"}),s=t.shapeMap["link-point-left-bottom"]||t.find(function(ir){return ir.get("className")==="link-point-left-bottom"}),u=t.shapeMap["link-point-left-bottom"]||t.find(function(ir){return ir.get("className")==="link-point-right-bottom"}),f=r,c=n||a||o||s||u;c&&(f=c.attr());var d=(0,l.mix)({},f,e.linkPoints),A=d.fill,D=d.stroke,z=d.lineWidth,Z=d.size/2;Z||(Z=d.r);var rt=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},ft=rt.left,ct=rt.right,gt=rt.top,Ct=rt.leftBottom,Ht=rt.rightBottom,ne=this.getSize(e),re=ne[0],Me={r:Z,fill:A,stroke:D,lineWidth:z},je=Math.cos((18+72*0)/180*Math.PI)*re,Re=Math.sin((18+72*0)/180*Math.PI)*re;a?!ct&&ct!==void 0?(a.remove(),delete t.shapeMap["link-point-right"]):a.attr((0,y.__assign)((0,y.__assign)({},Me),{x:je,y:-Re})):ct&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},Me),{x:je,y:-Re}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),je=Math.cos((18+72*1)/180*Math.PI)*re,Re=Math.sin((18+72*1)/180*Math.PI)*re,o?!gt&&gt!==void 0?(o.remove(),delete t.shapeMap["link-point-top"]):o.attr((0,y.__assign)((0,y.__assign)({},Me),{x:je,y:-Re})):gt&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},Me),{x:je,y:-Re}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),je=Math.cos((18+72*2)/180*Math.PI)*re,Re=Math.sin((18+72*2)/180*Math.PI)*re,n?!ft&&ft!==void 0?(n.remove(),delete t.shapeMap["link-point-left"]):n.attr((0,y.__assign)((0,y.__assign)({},Me),{x:je,y:-Re})):ft&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},Me),{x:je,y:-Re}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),je=Math.cos((18+72*3)/180*Math.PI)*re,Re=Math.sin((18+72*3)/180*Math.PI)*re,s?!Ct&&Ct!==void 0?(s.remove(),delete t.shapeMap["link-point-left-bottom"]):s.attr((0,y.__assign)((0,y.__assign)({},Me),{x:je,y:-Re})):Ct&&(t.shapeMap["link-point-left-bottom"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},Me),{x:je,y:-Re}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0})),je=Math.cos((18+72*4)/180*Math.PI)*re,Re=Math.sin((18+72*4)/180*Math.PI)*re,u?!Ht&&Ht!==void 0?(u.remove(),delete t.shapeMap["link-point-right-bottom"]):u.attr((0,y.__assign)((0,y.__assign)({},Me),{x:je,y:-Re})):Ht&&(t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},Me),{x:je,y:-Re}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0}))}},"single-node");var u0=Ys.defaultSubjectColors,zd="fan-shape-";lc("donut",{options:{size:Qn.defaultNode.size,style:{x:0,y:0,stroke:Qn.defaultNode.style.stroke,fill:Qn.defaultNode.style.fill,lineWidth:Qn.defaultNode.style.lineWidth},labelCfg:{style:{fill:Qn.nodeLabel.style.fill,fontSize:Qn.nodeLabel.style.fontSize,fontFamily:Qn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Qn.defaultNode.linkPoints.size,lineWidth:Qn.defaultNode.linkPoints.lineWidth,fill:Qn.defaultNode.linkPoints.fill,stroke:Qn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,y.__assign)({},Qn.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=(0,l.deepMix)({},n,e.icon),s=t.addShape("circle",{attrs:a,className:"".concat(this.type,"-keyShape"),draggable:!0,name:"".concat(this.type,"-keyShape")});t.shapeMap["".concat(this.type,"-keyShape")]=s;var u=o.width,f=o.height,c=o.show,d=o.text;return c&&(d?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,y.__assign)({x:-u/2,y:-f/2},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),Iw(e,t,s),this.drawLinkPoints(e,t),s},updateShape:function(e,t,r,n,a){var o=t.get("keyShape");o.attr((0,y.__assign)({},r)),Dw(e,t,o),this.updateLabel(e,t,a),n&&this.updateIcon(e,t)}},"circle");var Iw=function(e,t,r){var n=e.donutAttrs,a=n===void 0?{}:n,o=e.donutColorMap,s=o===void 0?{}:o,u=Object.keys(a).length;if(a&&u>1){var f=f0(a,s),c=f.configs,d=f.totalValue;if(d){var A=c0(r),D=A.lineWidth,z=A.arcR,Z=[z,0],rt=0;if(u===1){Sv(t,{arcR:z,arcBegin:Z,beginAngle:rt,config:c[0],fanIndex:0,lineWidth:D,totalValue:d,drawWhole:!0});return}for(var ft=0;ft<c.length;ft++){var ct=Sv(t,{arcR:z,arcBegin:Z,beginAngle:rt,config:c[ft],fanIndex:ft,lineWidth:D,totalValue:d});if(ct.shouldEnd)return;Z=ct.arcBegin,rt=ct.beginAngle}}}},Sv=function(e,t){var r=t.arcR,n=t.arcBegin,a=t.beginAngle,o=t.config,s=t.fanIndex,u=t.lineWidth,f=t.totalValue,c=t.drawWhole,d=c===void 0?!1:c,A=t.updateShape,D=A===void 0?void 0:A,z=o.value/f;if(z<.001)return{beginAngle:a,arcBegin:n,shape:void 0,shouldEnd:!1};var Z,rt,ft;if(d||z>.999)Z=[r,1e-4],ft=1;else{var ct=z*Math.PI*2;rt=a+ct,Z=[r*Math.cos(rt),-r*Math.sin(rt)],ft=ct>Math.PI?1:0}var gt={path:[["M",n[0],n[1]],["A",r,r,0,ft,0,Z[0],Z[1]]],stroke:o.color||(D==null?void 0:D.attr("stroke"))||u0[s%u0.length],lineWidth:u};return D?D.attr(gt):e.shapeMap["".concat(zd).concat(s)]=e.addShape("path",{attrs:gt,name:"".concat(zd).concat(s),draggable:!0}),{beginAngle:rt,arcBegin:Z,shape:e.shapeMap["".concat(zd).concat(s)],shouldEnd:d||z>.999}},Dw=function(e,t,r){var n=e.donutAttrs,a=e.donutColorMap,o=a===void 0?{}:a,s={},u=t.getContainer();if(n){var f=f0(n,o),c=f.configs,d=f.totalValue;if(d)for(var A=c0(r),D=A.lineWidth,z=A.arcR,Z=[z,0],rt=0,ft=0;ft<c.length;ft++){var ct="".concat(zd).concat(ft),gt=Sv(u,{arcR:z,arcBegin:Z,beginAngle:rt,config:c[ft],fanIndex:ft,lineWidth:D,totalValue:d,drawWhole:c.length===1,updateShape:u.shapeMap[ct]});if(gt.shape&&(s[ct]=!0),gt.shouldEnd)break;Z=gt.arcBegin,rt=gt.beginAngle}}var Ct=Object.keys(u.shapeMap).filter(function(Ht){return Ht.includes(zd)});Ct.forEach(function(Ht){s[Ht]||(u.shapeMap[Ht].remove(!0),delete u.shapeMap[Ht])})},f0=function(e,t){var r=0,n=[];return Object.keys(e).forEach(function(a){var o=+e[a];isNaN(o)||(n.push({key:a,value:o,color:t[a]}),r+=o)}),{totalValue:r,configs:n}},c0=function(e){var t=e.attr("r"),r=.6*t,n=(t+r)/2,a=t-r;return{lineWidth:a,arcR:n}},bh=function(e){var t=e.x,r=e.y;return{x:t,y:r,centerX:t,centerY:r,minX:t,minY:r,maxX:t,maxY:r,height:0,width:0}},Pw=function(e){e===void 0&&(e=[]);var t=[],r=[];e.forEach(function(u){t.push(u.x),r.push(u.y)});var n=Math.min.apply(Math,t),a=Math.max.apply(Math,t),o=Math.min.apply(Math,r),s=Math.max.apply(Math,r);return{centerX:(n+a)/2,centerY:(o+s)/2,maxX:a,maxY:s,minX:n,minY:o,height:s-o,width:a-n}},EM=function(e,t){return Math.abs(e.centerX-t.centerX)*2<e.width+t.width&&Math.abs(e.centerY-t.centerY)*2<e.height+t.height},Mv=function(e){for(var t=[],r={},n=e.length,a=n-1;a>=0;a--){var o=e[a];o.id="".concat(o.x,"|||").concat(o.y),r[o.id]||(r[o.id]=o,t.push(o))}return t},l0=function(e){return Mv(e)},wM=function(e,t){return[e,{x:e.x,y:t.y},t]},xh=function(e,t){return e.width||e.height?{centerX:e.centerX,centerY:e.centerY,minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t,height:e.height+2*t,width:e.width+2*t}:e},Lw=function(e,t){var r=Math.abs(e.x-t.centerX),n=Math.abs(e.y-t.centerY);return r===0&&n===0?0:r/t.width>n/t.height},_v=function(e,t,r){var n=Lw(t,e);if(n===0){var a=e.centerX,o=e.centerY;return r.y<t.y?o=e.minY:r.x>t.x?a=e.maxX:r.x<t.x?a=e.minX:r.x===t.x&&(o=e.maxY),{x:a,y:o}}return n?{x:t.x>e.centerX?e.maxX:e.minX,y:t.y}:{x:t.x,y:t.y>e.centerY?e.maxY:e.minY}},d0=function(e,t){var r=Math.min(e.minX,t.minX),n=Math.min(e.minY,t.minY),a=Math.max(e.maxX,t.maxX),o=Math.max(e.maxY,t.maxY);return{centerX:(r+a)/2,centerY:(n+o)/2,minX:r,minY:n,maxX:a,maxY:o,height:o-n,width:a-r}},Cv=function(e){return[{x:e.minX,y:e.minY},{x:e.maxX,y:e.minY},{x:e.maxX,y:e.maxY},{x:e.minX,y:e.maxY}]},Eh=function(e,t){var r=e.x,n=e.y;return r<t.minX||r>t.maxX||n<t.minY||n>t.maxY},Nw=function(e,t){return t<e.minX||t>e.maxX?[]:[{x:t,y:e.minY},{x:t,y:e.maxY}]},Rw=function(e,t){return t<e.minY||t>e.maxY?[]:[{x:e.minX,y:t},{x:e.maxX,y:t}]},kw=function(e,t){return Nw(e,t.x).concat(Rw(e,t.y))},Gd=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},Bw=function(e,t){var r=-2,n=0;return t.forEach(function(a){a&&(e.x===a.x&&(n+=r),e.y===a.y&&(n+=r))}),n},h0=function(e,t,r,n,a){return Gd(e,t)+Gd(e,r)+Bw(e,[t,r,n,a])},Fw=function i(e,t,r,n,a){a===void 0&&(a=0),e.unshift(t[n]),r[n]&&r[n]!==n&&a<=100&&i(e,t,r,r[n],a+1)},SM=function(e,t){var r=e.indexOf(t);r>-1&&e.splice(r,1)},wh=function(e,t,r,n){var a=r.x-e.x,o=r.y-e.y,s=n.x-e.x,u=n.y-e.y,f=r.x-t.x,c=r.y-t.y,d=n.x-t.x,A=n.y-t.y,D=a*u-o*s,z=f*A-c*d,Z=a*c-o*f,rt=s*A-u*d;return D*z<=0&&Z*rt<=0},Tv=function(e,t,r){if(r.width||r.height){var n=Cv(r),a=n[0],o=n[1],s=n[2],u=n[3];return wh(e,t,a,o)||wh(e,t,a,u)||wh(e,t,o,s)||wh(e,t,s,u)}return!1},zw=function(e,t,r,n){var a=[];return e.forEach(function(o){if(o!==t&&(o.x===t.x||o.y===t.y)){if(Tv(o,t,r)||Tv(o,t,n))return;a.push(o)}}),Mv(a)},Gw=function(e,t,r,n,a,o,s){var u,f=[],c=(u={},u[t.id]=t,u),d={},A={},D={};A[t.id]=0,D[t.id]=h0(t,r,t);var z=new g0;z.add({id:t.id,value:D[t.id]});var Z={};e.forEach(function(Ht){Z[Ht.id]=Ht});for(var rt;Object.keys(c).length;){var ft=z.minId(!1);if(ft)rt=c[ft];else break;if(rt===r){var ct=[];return Fw(ct,Z,d,r.id),ct}delete c[rt.id],z.remove(rt.id),f.push(rt);var gt=zw(e,rt,n,a),Ct=function(ne){ne.forEach(function(re){if(f.indexOf(re)===-1){var Me=re.id;c[Me]||(c[Me]=re);var je=D[rt.id]+Gd(rt,re);if(A[Me]&&je>=A[Me]){z.add({id:Me,value:D[Me]});return}d[Me]=rt.id,A[Me]=je,D[Me]=A[Me]+h0(re,r,t,o,s),z.add({id:Me,value:D[Me]})}})};Ct(gt)}return[t,r]},Uw=function(e,t,r){return!(e.x===t.x&&t.x===r.x||e.y===t.y&&t.y===r.y)},Ww=function(e,t,r,n){var a=Gd(e,t),o=Gd(r,t);a<n&&(n=a),o<n&&(n=o);var s={x:t.x-n/a*(t.x-e.x),y:t.y-n/a*(t.y-e.y)},u={x:t.x-n/o*(t.x-r.x),y:t.y-n/o*(t.y-r.y)};return[s,u]},v0=function(e,t){var r=[],n=e[0];return r.push("M".concat(n.x," ").concat(n.y)),e.forEach(function(a,o){var s=e[o+1],u=e[o+2];if(s&&u)if(Uw(a,s,u)){var f=Ww(a,s,u,t),c=f[0],d=f[1];r.push("L".concat(c.x," ").concat(c.y)),r.push("Q".concat(s.x," ").concat(s.y," ").concat(d.x," ").concat(d.y)),r.push("L".concat(d.x," ").concat(d.y))}else r.push("L".concat(s.x," ").concat(s.y));else s&&r.push("L".concat(s.x," ").concat(s.y))}),r.join("")},p0=function(e,t,r,n,a){var o,s;if(!r||!r.getType())o=bh(e);else if(r.getType()==="combo"){var u=r.getKeyShape().getBBox();if(u){var f=r.getModel(),c=f.x,d=f.y;o={x:c,y:d,width:u.width,height:u.height,minX:u.minX+c,maxX:u.maxX+c,minY:u.minY+d,maxY:u.maxY+d},o.centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2}else o=bh(e)}else o=r&&r.getBBox();if(!n||!n.getType())s=bh(t);else if(n.getType()==="combo"){var A=n.getKeyShape().getBBox();if(A){var D=n.getModel(),z=D.x,Z=D.y;s={x:z,y:Z,width:A.width,height:A.height,minX:A.minX+z,maxX:A.maxX+z,minY:A.minY+Z,maxY:A.maxY+Z},s.centerX=(s.minX+s.maxX)/2,s.centerY=(s.minY+s.maxY)/2}else s=bh(t)}else s=n&&n.getBBox();var rt=xh(o,a),ft=xh(s,a),ct=_v(rt,e,t),gt=_v(ft,t,e),Ct=Pw([ct,gt]),Ht=d0(rt,Ct),ne=d0(ft,Ct),re=[];re=re.concat(Cv(Ht)).concat(Cv(ne));var Me={x:(e.x+t.x)/2,y:(e.y+t.y)/2};[Ct,Ht,ne].forEach(function(Re){re=re.concat(kw(Re,Me).filter(function(ir){return Eh(ir,rt)&&Eh(ir,ft)}))}),[{x:ct.x,y:gt.y},{x:gt.x,y:ct.y}].forEach(function(Re){Eh(Re,rt)&&Eh(Re,ft)&&re.push(Re)}),re.unshift(ct),re.push(gt),re=Mv(re);var je=Gw(re,ct,gt,o,s,e,t);return je.unshift(e),je.push(t),l0(je)},Yw=function(e){if(!(e!=null&&e.length))return e;for(var t=e[e.length-1],r={x:t.x,y:t.y},n=[t],a=[t],o=e.length-2;o>=0;o--){var s=e[o];if(s.x===r.x?n.push(s):(n=[s],r.x=s.x),s.y===r.y?a.push(s):(a=[s],r.y=s.y),n.length>2){var u=e.indexOf(n[1]);u>-1&&e.splice(u,1);continue}if(a.length>2){var u=e.indexOf(a[1]);u>-1&&e.splice(u,1)}}return e},g0=function(){function i(){this.arr=[],this.map={},this.arr=[],this.map={}}return i.prototype._innerAdd=function(e,t){for(var r=[0,t-1];r[1]-r[0]>1;){var n=Math.floor((r[0]+r[1])/2);if(this.arr[n].value>e.value)r[1]=n;else if(this.arr[n].value<e.value)r[0]=n;else{this.arr.splice(n,0,e),this.map[e.id]=!0;return}}this.arr.splice(r[1],0,e),this.map[e.id]=!0},i.prototype.add=function(e){delete this.map[e.id];var t=this.arr.length;if(!t){this.arr.push(e),this.map[e.id]=!0;return}if(this.arr[t-1].value<e.value){this.arr.push(e),this.map[e.id]=!0;return}this._innerAdd(e,t)},i.prototype.remove=function(e){this.map[e]&&delete this.map[e]},i.prototype._clearAndGetMinId=function(){for(var e,t=this.arr.length-1;t>=0;t--)this.map[this.arr[t].id]?e=this.arr[t].id:this.arr.splice(t,1);return e},i.prototype._findFirstId=function(){for(;this.arr.length;){var e=this.arr.shift();if(this.map[e.id])return e.id}},i.prototype.minId=function(e){return e?this._clearAndGetMinId():this._findFirstId()},i}(),Xw=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},jw=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},Vw=function(e,t){return[e,t]},Hw=function(e,t,r,n,a){return l0(p0(e,t,r,n,a.offset))},Zw={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:Xw,fallbackRoute:Hw},MM={maxAllowedDirectionChange:Math.PI/4,directions:[{stepX:1,stepY:0},{stepX:1,stepY:1},{stepX:0,stepY:1},{stepX:-1,stepY:1},{stepX:-1,stepY:0},{stepX:-1,stepY:-1},{stepX:0,stepY:-1},{stepX:1,stepY:-1}],distFunc:jw,fallbackRoute:Vw},gc=function(e,t){var r=Math.round(Math.abs(e/t)),n=e<0?-1:1;return r<0?0:n*r},Kw=function(e,t,r){var n={};return e.forEach(function(a){if(a)for(var o=xh(a.getBBox(),r),s=gc(o.minX,t);s<=gc(o.maxX,t);s+=1)for(var u=gc(o.minY,t);u<=gc(o.maxY,t);u+=1)n["".concat(s,"|||").concat(u)]=!0}),n},Av=function(e,t){var r=t.x-e.x,n=t.y-e.y;return r||n?Math.atan2(n,r):0},m0=function(e,t){var r=Math.abs(e-t);return r>Math.PI?2*Math.PI-r:r},y0=function(e,t,r){for(var n=1/0,a=0,o=t.length;a<o;a++){var s=r(e,t[a]);s<n&&(n=s)}return n},b0=function(e,t,r,n,a){var o=[];if(!r)return[e];var s=a.directions,u=a.offset,f=r.getBBox(),c=t.x>f.minX&&t.x<f.maxX&&t.y>f.minY&&t.y<f.maxY,d=xh(f,u);for(var A in d)d[A]=gc(d[A],a.gridSize);if(c){for(var D=0,z=s;D<z.length;D++)for(var Z=z[D],rt=[[{x:d.minX,y:d.minY},{x:d.maxX,y:d.minY}],[{x:d.minX,y:d.minY},{x:d.minX,y:d.maxY}],[{x:d.maxX,y:d.minY},{x:d.maxX,y:d.maxY}],[{x:d.minX,y:d.maxY},{x:d.maxX,y:d.maxY}]],A=0;A<4;A++){var ft=rt[A],ct=Ys.getLineIntersect(e,{x:e.x+Z.stepX*d.width,y:e.y+Z.stepY*d.height},ft[0],ft[1]);ct&&!Tv(e,ct,f)&&(ct.id="".concat(ct.x,"|||").concat(ct.y),o.push(ct))}return o}var gt=_v(d,e,n);return gt.id="".concat(gt.x,"|||").concat(gt.y),[gt]},Ov=function(e,t,r,n){var a=Av(e,t),o=r[e.id];if(!o){var s=Av(n,e);return m0(s,a)}var u=Av({x:o.x,y:o.y},e);return m0(u,a)},$w=function(e,t,r,n,a,o,s){var u=[n],f=n,c=e.id,d=e.x,A=e.y,D={x:d,y:A,id:c};Ov(D,o,t,r)&&(f={x:o.x===n.x?n.x:D.x*s,y:o.y===n.y?n.y:D.y*s},u.unshift(f));for(var z=t[c];z&&z.id!==c;){var Z={x:d,y:A,id:c},rt={x:z.x,y:z.y,id:z.id},ft=Ov(rt,Z,t,r);ft&&(f={x:rt.x===Z.x?f.x:rt.x*s,y:rt.y===Z.y?f.y:rt.y*s},u.unshift(f)),c=rt.id,d=rt.x,A=rt.y,z=t[c]}return u[0].x=d===r.x?a.x:f.x,u[0].y=A===r.y?a.y:f.y,u.unshift(a),u},qw=function(e,t,r,n,a){if(isNaN(e.x)||isNaN(t.x))return[];var o=(0,l.deepMix)(Zw,a);o.obstacles=o.obstacles||[];var s=o.penalties,u=o.gridSize,f=Kw(o.obstacles.concat([r,n]),u,o.offset),c={x:gc(e.x,u),y:gc(e.y,u)},d={x:gc(t.x,u),y:gc(t.y,u)};e.id="".concat(c.x,"|||").concat(c.y),t.id="".concat(d.x,"|||").concat(d.y);var A=b0(c,e,r,d,o),D=b0(d,t,n,c,o);A.forEach(function(un){delete f[un.id]}),D.forEach(function(un){delete f[un.id]});for(var z={},Z={},rt={},ft={},ct={},gt=new g0,Ct=0;Ct<A.length;Ct++){var Ht=A[Ct];z[Ht.id]=Ht,ft[Ht.id]=0,ct[Ht.id]=y0(Ht,D,o.distFunc),gt.add({id:Ht.id,value:ct[Ht.id]})}var ne=o.maximumLoops,re,Me,je,Re,ir,Sr,pn=1/0,Gn={};for(D.forEach(function(un){Gn["".concat(un.x,"|||").concat(un.y)]=!0}),Object.keys(z).forEach(function(un){var Dn=z[un].id;ct[Dn]<=pn&&(pn=ct[Dn],re=z[Dn])});Object.keys(z).length>0&&ne>0;){var Pn=gt.minId((ne+1)%30===0);if(Pn)re=z[Pn];else break;if(Gn["".concat(re.x,"|||").concat(re.y)])return $w(re,rt,c,t,e,d,u);delete z[re.id],gt.remove(re.id),Z[re.id]=!0;for(var Ct=0;Ct<o.directions.length;Ct++){Me=o.directions[Ct];var sn="".concat(Math.round(re.x)+Me.stepX,"|||").concat(Math.round(re.y)+Me.stepY);if(je={x:re.x+Me.stepX,y:re.y+Me.stepY,id:sn},!Z[sn]&&(Sr=Ov(re,je,rt,c),!(Sr>o.maxAllowedDirectionChange)&&!f[sn])){z[sn]||(z[sn]=je);var Jn=s[Sr];Re=o.distFunc(re,je)+(isNaN(Jn)?u:Jn),ir=ft[re.id]+Re;var Kn=ft[sn];Kn&&ir>=Kn||(rt[sn]=re,ft[sn]=ir,ct[sn]=ir+y0(je,D,o.distFunc),gt.add({id:sn,value:ct[sn]}))}}ne-=1}return o.fallbackRoute(e,t,r,n,o)};bp("polyline",{options:{color:Qn.defaultEdge.color,size:Qn.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:Qn.defaultEdge.style.stroke,lineAppendWidth:Qn.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:Qn.edgeLabel.style.fill,fontSize:Qn.edgeLabel.style.fontSize,fontFamily:Qn.windowFontFamily}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:(0,y.__assign)({},Qn.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e);r.radius===0&&delete r.radius;var n=t.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:r});return t.shapeMap["edge-shape"]=n,n},getShapeStyle:function(e){var t=this.options.style,r={stroke:e.color},n=(0,l.mix)({},t,r,e.style);e=this.getPathPoints(e),this.radius=n.radius,this.offset=n.offset;var a=e.startPoint,o=e.endPoint,s=this.getControlPoints(e),u=[a];s&&(u=u.concat(s)),u.push(o);var f=e.sourceNode,c=e.targetNode,d=n.radius,A=this.options.routeCfg,D=(0,l.mix)({},A,e.routeCfg);D.offset=n.offset;var z=this.getPath(u,f,c,d,D,!s);((0,l.isArray)(z)&&z.length<=1||(0,l.isString)(z)&&z.indexOf("L")===-1)&&(z="M0 0, L0 0"),(isNaN(a.x)||isNaN(a.y)||isNaN(o.x)||isNaN(o.y))&&(z="M0 0, L0 0");var Z=(0,l.mix)({},Qn.defaultEdge.style,n,{lineWidth:e.size,path:z});return Z},updateShapeStyle:function(e,t){var r=t.getContainer();if(t.isVisible()){var n={stroke:e.color},a=r.shapeMap["edge-shape"]||r.find(function(Ct){return Ct.get("className")==="edge-shape"})||t.getKeyShape(),o=e.size;e=this.getPathPoints(e);var s=e.startPoint,u=e.endPoint,f=this.getControlPoints(e),c=[s];f&&(c=c.concat(f)),c.push(u);var d=a.attr(),A=(0,l.mix)({},n,d,e.style),D=e.sourceNode,z=e.targetNode,Z=A.radius,rt=this.options.routeCfg,ft=(0,l.mix)({},rt,e.routeCfg);ft.offset=A.offset;var ct=this.getPath(c,D,z,Z,ft,!f);((0,l.isArray)(ct)&&ct.length<=1||(0,l.isString)(ct)&&ct.indexOf("L")===-1)&&(ct="M0 0, L0 0"),(isNaN(s.x)||isNaN(s.y)||isNaN(u.x)||isNaN(u.y))&&(ct="M0 0, L0 0"),d.endArrow&&A.endArrow===!1&&(e.style.endArrow={path:""}),d.startArrow&&A.startArrow===!1&&(e.style.startArrow={path:""});var gt=(0,l.mix)(n,a.attr(),{lineWidth:o,path:ct},e.style);a&&a.attr(gt)}},getPath:function(e,t,r,n,a,o){var s=a.offset,u=a.obstacles,f=a.simple;if(!s||e.length>2||o===!1){if(n)return v0(e,n);var c=[];return(0,l.each)(e,function(z,Z){Z===0?c.push(["M",z.x,z.y]):c.push(["L",z.x,z.y])}),c}f!==!1&&!(u!=null&&u.length)&&(f=!0);var d=f?p0(e[e.length-1],e[0],r,t,s):qw(e[0],e[e.length-1],t,r,a);if(!d||!d.length)return"M0 0, L0 0";if(n){var A=v0(d,n);return A}d=Yw(d);var D=Ys.pointsToPolygon(d);return D}},"single-edge");var x0=hc.cloneEvent,E0=hc.isNaN,w0=Math.abs,Qw=10,Jw=["shift","ctrl","alt","control"],tS={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{mousedown:"onMouseDown",drag:"onDragMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(e){var t=this.origin,r=+e.clientX,n=+e.clientY;if(!(E0(r)||E0(n))){var a=r-t.x,o=n-t.y;this.get("direction")==="x"?o=0:this.get("direction")==="y"&&(a=0),this.origin={x:r,y:n};var s=this.graph.get("width"),u=this.graph.get("height"),f=this.graph.get("canvas").getCanvasBBox(),c=this.scalableRange,d=this.scalableRange;c<1&&c>-1&&(c=s*c,d=u*d),(f.minX<=s+c&&f.minX+a>s+c||f.maxX+c>=0&&f.maxX+c+a<0)&&(a=0),(f.minY<=u+d&&f.minY+o>u+d||f.maxY+d>=0&&f.maxY+d+o<0)&&(o=0),this.graph.translate(a,o)}},onTouchStart:function(e){var t=this,r=e.originalEvent.touches,n=r[0],a=r[1];n&&a||(e.preventDefault(),this.mousedown=!0,t.onDragStart(e))},onMouseDown:function(e){this.mousedown=!0},onDragMove:function(e){this.mousedown&&(this.dragstart?this.onDrag(e):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var t=this,r=e.originalEvent;if(!(r&&e.name!=="touchstart"&&r.button!==0)&&!(e.name!=="touchstart"&&typeof window!="undefined"&&window.event&&!window.event.buttons&&!window.event.button)&&this.shouldBegin(e,this)&&!t.keydown&&this.allowDrag(e)){if(t.origin={x:e.clientX,y:e.clientY},t.dragging=!1,this.enableOptimize){for(var n=this.graph,a=n.getEdges(),o=0,s=a.length;o<s;o++){var u=a[o].get("group").get("children");u&&u.forEach(function(gt){gt.set("ori-visibility",gt.get("ori-visibility")||gt.get("visible")),gt.hide()})}for(var f=n.getNodes(),c=0,d=f.length;c<d;c++)for(var A=f[c].getContainer(),D=A.get("children"),z=0,Z=D;z<Z.length;z++){var rt=Z[z],ft=rt.get("isKeyShape");ft||(rt.set("ori-visibility",rt.get("ori-visibility")||rt.get("visible")),rt.hide())}}if(typeof window!="undefined"){var ct=this;this.handleDOMContextMenu=function(gt){return ct.onMouseUp(gt)},document.body.addEventListener("contextmenu",this.handleDOMContextMenu)}}},onTouchMove:function(e){var t=this,r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a){this.onMouseUp(e);return}e.preventDefault(),t.onDrag(e)},onDrag:function(e){if(this.mousedown){var t=this.graph;if(!this.keydown&&this.allowDrag(e)&&(e=x0(e),!!this.origin)){if(this.dragging)e.type="drag",t.emit("canvas:drag",e);else{if(w0(this.origin.x-e.clientX)+w0(this.origin.y-e.clientY)<Qw)return;this.shouldBegin(e,this)&&(e.type="dragstart",t.emit("canvas:dragstart",e),this.originPosition={x:e.clientX,y:e.clientY},this.dragging=!0)}this.shouldUpdate(e,this)&&this.updateViewport(e)}}},onMouseUp:function(e){var t,r;this.mousedown=!1,this.dragstart=!1;var n=this.graph;if(!this.keydown){var a=n.getZoom(),o=n.get("modeController"),s=(r=(t=o==null?void 0:o.modes[o.mode])===null||t===void 0?void 0:t.filter(function(re){return re.type==="zoom-canvas"}))===null||r===void 0?void 0:r[0],u=s?s.optimizeZoom||.1:0;if(this.enableOptimize){for(var f=n.getEdges(),c=0,d=f.length;c<d;c++){var A=f[c].get("group").get("children");A&&A.forEach(function(re){var Me=re.get("ori-visibility");re.set("ori-visibility",void 0),Me&&re.show()})}if(a>u)for(var D=n.getNodes(),z=0,Z=D.length;z<Z;z++)for(var rt=D[z].getContainer(),ft=rt.get("children"),ct=0,gt=ft;ct<gt.length;ct++){var Ct=gt[ct],Ht=Ct.get("isKeyShape");if(!Ht){var ne=Ct.get("ori-visibility");Ct.set("ori-visibility",void 0),ne&&Ct.show()}}}if(!this.dragging){this.origin=null;return}e=x0(e),this.shouldEnd(e,this)&&this.updateViewport(e),e.type="dragend",e.dx=e.clientX-this.originPosition.x,e.dy=e.clientY-this.originPosition.y,n.emit("canvas:dragend",e),this.endDrag(),typeof window!="undefined"&&document.body.removeEventListener("contextmenu",this.handleDOMContextMenu)}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1,this.mousedown=!1,this.dragstart=!1},onKeyDown:function(e){var t=this,r=e.key;r&&(Jw.indexOf(r.toLowerCase())>-1?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1},allowDrag:function(e){var t,r,n=e.target,a=n&&n.isCanvas&&n.isCanvas();if((0,l.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!a)return!1;if((0,l.isObject)(this.allowDragOnItem)){var o=this.allowDragOnItem,s=o.node,u=o.edge,f=o.combo,c=(r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t);if(!s&&c==="node"||!u&&c==="edge"||!f&&c==="combo")return!1}return!0}},eS={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1,enableStack:!0}},getEvents:function(){return{"node:mousedown":"onMouseDown",drag:"onDragMove",dragend:"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onDragEnd",afterchangedata:"onDragEnd"}},validationCombo:function(e){if(!this.origin||!e||e.destroyed)return!1;var t=e.getType();return t==="combo"},onTouchStart:function(e){if(e.item){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}this.mousedown={item:e.item,target:e.target,origin:{x:e.x,y:e.y}},this.dragstart=!0,t.onDragStart(e)}},onTouchMove:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a){t.onDragEnd(e);return}e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.onDrag(e)},onMouseDown:function(e){this.mousedown={item:e.item,target:e.target,origin:{x:e.x,y:e.y}},typeof window!="undefined"&&!this.windowEventBinded&&(this.windowEventBinded=!0,document.body.addEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.addEventListener("mouseup",this.onDragEnd.bind(this)))},onDragMove:function(e){var t,r;if(((r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t))!=="node"){this.onDragEnd();return}this.mousedown&&(this.dragstart?this.onDrag((0,y.__assign)((0,y.__assign)({},e),this.mousedown)):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var t=this;if(this.currentShouldEnd=!0,!!this.shouldBegin((0,y.__assign)((0,y.__assign)({},e),this.mousedown),this)){var r=this.mousedown,n=r.item,a=r.target;if(!(!n||n.destroyed||n.hasLocked())){var o=n.getContainer();if(o.set("capture",!1),this.cachedCaptureItems||(this.cachedCaptureItems=[]),this.cachedCaptureItems.push(n),a){var s=a.get("isAnchorPoint");if(s)return}var u=this.graph;this.targets=[],this.targetCombo=null;var f=u.findAllByState("node",this.selectedState),c=n.get("id"),d=f.filter(function(D){var z=D.get("id");return c===z});if(d.length===0?this.targets.push(n):f.length>1?f.forEach(function(D){var z=D.hasLocked();z||t.targets.push(D)}):this.targets.push(n),this.graph.get("enabledStack")&&this.enableStack){var A=[];this.targets.forEach(function(D){var z=D.getModel(),Z=z.x,rt=z.y,ft=z.id;A.push({x:Z,y:rt,id:ft})}),this.set("beforeDragNodes",A)}this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(D){var z=D.getEdges();z.forEach(function(Z){Z.isVisible()&&(t.hidenEdge[Z.getID()]=!0,Z.hide())})}),this.origin=this.mousedown.origin,this.point={},this.originPoint={}}}},onDrag:function(e){var t=this;if(!(!this.mousedown||!this.origin)&&this.shouldUpdate(e,this))if(this.get("enableDelegate"))this.updateDelegate(e);else if(this.enableDebounce)this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos});else{var r={};this.targets.map(function(n){t.update(n,e);var a=n.getModel().comboId;a&&(r[a]=t.graph.findById(a))}),this.onlyChangeComboSize&&this.updateParentCombos()}},onDragEnd:function(e){var t=this,r;if(this.mousedown=!1,this.dragstart=!1,typeof window!="undefined"&&this.windowEventBinded&&(this.windowEventBinded=!1,document.body.removeEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.removeEventListener("mouseup",this.onDragEnd.bind(this))),!!this.origin){(r=this.cachedCaptureItems)===null||r===void 0||r.forEach(function(o){var s=o.getContainer();s.set("capture",!0)}),this.cachedCaptureItems=[],this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(o){var s=o.getEdges();s.forEach(function(u){t.hidenEdge[u.getID()]&&u.show(),u.refresh()})}),this.hidenEdge={};var n=this.graph;if(n.get("enabledStack")&&this.enableStack){var a={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.get("beforeDragNodes").forEach(function(o){a.before.nodes.push(o)}),this.targets.forEach(function(o){var s=o.getModel(),u=s.x,f=s.y,c=s.id;a.after.nodes.push({x:u,y:f,id:c})}),n.pushStack("update",(0,l.clone)(a))}n.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(e){var t=e.item;if(this.currentShouldEnd=this.shouldEnd(e,t,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.currentShouldEnd||!this.validationCombo(t))){var r=this.graph;if(this.comboActiveState&&r.setItemState(t,this.comboActiveState,!1),this.targetCombo=t,this.onlyChangeComboSize)r.updateCombos();else{var n=t.getModel();this.targets.map(function(a){var o=a.getModel();o.comboId!==n.id&&r.updateComboTree(a,n.id)}),r.updateCombo(t)}r.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(e){var t=this.graph;this.currentShouldEnd=this.shouldEnd(e,void 0,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.targets||this.targets.length===0||!this.currentShouldEnd)&&(this.onlyChangeComboSize?this.updateParentCombos():this.targets.map(function(r){var n=r.getModel();n.comboId&&t.updateComboTree(r)}))},onDropNode:function(e){if(!(!this.targets||this.targets.length===0)){var t=this,r=e.item,n=t.graph,a=r.getModel().comboId,o=a?n.findById(a):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),!!this.currentShouldEnd){if(this.onlyChangeComboSize)this.updateParentCombos();else if(a){var s=n.findById(a);t.comboActiveState&&n.setItemState(s,t.comboActiveState,!1),this.targets.map(function(u){var f=u.getModel();a!==f.comboId&&n.updateComboTree(u,a)}),n.updateCombo(s)}else this.targets.map(function(u){var f=u.getModel();f.comboId&&n.updateComboTree(u)});n.emit("dragnodeend",{items:this.targets,targetItem:r})}}},onDragEnter:function(e){var t=e.item;if(this.validationCombo(t)){var r=this.graph;this.comboActiveState&&r.setItemState(t,this.comboActiveState,!0)}},onDragLeave:function(e){var t=e.item;if(this.validationCombo(t)){var r=this.graph;this.comboActiveState&&r.setItemState(t,this.comboActiveState,!1)}},updatePositions:function(e,t){var r=this;!this.targets||this.targets.length===0||(this.get("enableDelegate")?this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos}):t||this.targets.map(function(n){return r.update(n,e)}):this.targets.map(function(n){return r.update(n,e,t)}))},update:function(e,t,r){var n=this.origin,a=e.get("model"),o=e.get("id");this.point[o]||(this.point[o]={x:a.x||0,y:a.y||0});var s=t.x-n.x+this.point[o].x,u=t.y-n.y+this.point[o].y;r&&(s+=n.x-t.x,u+=n.y-t.y);var f={x:s,y:u};this.get("updateEdge")?this.graph.updateItem(e,f,!1):e.updatePosition(f)},debounceUpdate:(0,l.debounce)(function(i){var e=i.targets,t=i.graph,r=i.point,n=i.origin,a=i.evt,o=i.updateEdge,s=i.onlyChangeComboSize,u=i.updateParentCombos;e.map(function(f){var c=f.get("model"),d=f.get("id");r[d]||(r[d]={x:c.x||0,y:c.y||0});var A=a.x-n.x+r[d].x,D=a.y-n.y+r[d].y,z={x:A,y:D};o?t.updateItem(f,z,!1):f.updatePosition(z)}),s&&u(t,e)},50,!0),updateDelegate:function(e){var t=this.graph;if(this.delegateRect){var A=e.x-this.origin.x+this.originPoint.minX,D=e.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:A,y:D})}else{var r=t.get("group"),n=(0,l.deepMix)({},Al.delegateStyle,this.delegateStyle),a=this.calculationGroupPosition(e),o=a.x,s=a.y,u=a.width,f=a.height,c=a.minX,d=a.minY;this.originPoint={x:o,y:s,width:u,height:f,minX:c,minY:d},this.delegateRect=r.addShape("rect",{attrs:(0,y.__assign)({width:u,height:f,x:o,y:s},n),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(e){var t=this.targets;t.length===0&&t.push(e.item);for(var r=1/0,n=-1/0,a=1/0,o=-1/0,s=0;s<t.length;s++){var u=t[s],f=u.getBBox(),c=f.minX,d=f.minY,A=f.maxX,D=f.maxY;c<r&&(r=c),d<a&&(a=d),A>n&&(n=A),D>o&&(o=D)}var z=Math.floor(r),Z=Math.floor(a),rt=Math.ceil(n)-Math.floor(r),ft=Math.ceil(o)-Math.floor(a);return{x:z,y:Z,width:rt,height:ft,minX:r,minY:a}},updateParentCombos:function(e,t){var r=e||this.graph,n=t||this.targets,a={};n==null||n.forEach(function(o){var s=o.getModel().comboId;s&&(a[s]=r.findById(s))}),Object.values(a).forEach(function(o){o&&r.updateCombo(o)})}},rS={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return this.get("trigger")==="mouseenter"?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.setAllItemStates(e)},clearOnTouchStart:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.clearActiveState(e)},setAllItemStates:function(e){clearTimeout(this.timer),this.throttleSetAllItemStates(e,this)},clearActiveState:function(e){var t=this;this.timer=setTimeout(function(){t.throttleClearActiveState(e,t)},50)},throttleSetAllItemStates:(0,l.throttle)(function(i,e){var t=i.item,r=e.graph;if(!(!r||r.destroyed)&&(e.item=t,!!e.shouldUpdate(i.item,{event:i,action:"activate"},e))){for(var n=e.activeState,a=e.inactiveState,o=r.getNodes(),s=r.getCombos(),u=r.getEdges(),f=r.get("vedges"),c=o.length,d=s.length,A=u.length,D=f.length,z=e.inactiveItems||{},Z=e.activeItems||{},rt=0;rt<c;rt++){var ft=o[rt],ct=ft.getID(),gt=ft.hasState("selected");e.resetSelected&&gt&&r.setItemState(ft,"selected",!1),Z[ct]&&(r.setItemState(ft,n,!1),delete Z[ct]),a&&!z[ct]&&(r.setItemState(ft,a,!0),z[ct]=ft)}for(var rt=0;rt<d;rt++){var Ct=s[rt],Ht=Ct.getID(),gt=Ct.hasState("selected");e.resetSelected&&gt&&r.setItemState(Ct,"selected",!1),Z[Ht]&&(r.setItemState(Ct,n,!1),delete Z[Ht]),a&&!z[Ht]&&(r.setItemState(Ct,a,!0),z[Ht]=Ct)}for(var rt=0;rt<A;rt++){var ne=u[rt],re=ne.getID();Z[re]&&(r.setItemState(ne,n,!1),delete Z[re]),a&&!z[re]&&(r.setItemState(ne,a,!0),z[re]=ne)}for(var rt=0;rt<D;rt++){var Me=f[rt],je=Me.getID();Z[je]&&(r.setItemState(Me,n,!1),delete Z[je]),a&&!z[je]&&(r.setItemState(Me,a,!0),z[je]=Me)}if(t&&!t.destroyed){a&&(r.setItemState(t,a,!1),delete z[t.getID()]),Z[t.getID()]||(r.setItemState(t,n,!0),Z[t.getID()]=t);for(var Re=t.getEdges(),ir=Re.length,rt=0;rt<ir;rt++){var ne=Re[rt],re=ne.getID(),Sr=void 0;ne.getSource()===t?Sr=ne.getTarget():Sr=ne.getSource();var pn=Sr.getID();a&&z[pn]&&(r.setItemState(Sr,a,!1),delete z[pn]),Z[pn]||(r.setItemState(Sr,n,!0),Z[pn]=Sr),z[re]&&(r.setItemState(ne,a,!1),delete z[re]),Z[re]||(r.setItemState(ne,n,!0),Z[re]=ne),ne.toFront()}}e.activeItems=Z,e.inactiveItems=z,r.emit("afteractivaterelations",{item:i.item,action:"activate"})}},50,{trailing:!0,leading:!0}),throttleClearActiveState:(0,l.throttle)(function(i,e){var t=e.get("graph");if(!(!t||t.destroyed)&&e.shouldUpdate(i.item,{event:i,action:"deactivate"},e)){var r=e.activeState,n=e.inactiveState,a=e.activeItems||{},o=e.inactiveItems||{};Object.values(a).filter(function(s){return!s.destroyed}).forEach(function(s){t.clearItemStates(s,r)}),Object.values(o).filter(function(s){return!s.destroyed}).forEach(function(s){t.clearItemStates(s,n)}),e.activeItems={},e.inactiveItems={},t.emit("afteractivaterelations",{item:i.item||e.get("item"),action:"deactivate"})}},50,{trailing:!0,leading:!0})},Sh=Math.min,S0=Math.max,M0=Math.abs,_0="shift",nS=["drag","shift","ctrl","alt","control"],aS={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:_0,includeEdges:!0,includeCombos:!1,selectedEdges:[],selectedNodes:[],selectedCombos:[]}},getEvents:function(){return nS.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=_0,console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(e){var t=e.item,r=this.brush;t||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),r||(r=this.createBrush()),this.originPoint={x:e.canvasX,y:e.canvasY},r.attr({width:0,height:0}),r.show(),this.dragging=!0)},onMouseMove:function(e){this.dragging&&(this.trigger!=="drag"&&!this.keydown||this.updateBrush(e))},onMouseUp:function(e){var t=this.graph;!this.brush&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(e),this.dragging=!1)},clearStates:function(){var e=this,t=e.graph,r=e.selectedState,n=t.findAllByState("node",r),a=t.findAllByState("edge",r),o=t.findAllByState("combo",r);n.forEach(function(s){return t.setItemState(s,r,!1)}),a.forEach(function(s){return t.setItemState(s,r,!1)}),o.forEach(function(s){return t.setItemState(s,r,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.selectedCombos=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges,this.selectedCombos),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},isBBoxCenterInRect:function(e,t,r,n,a){var o=e.getBBox();return o.centerX>=t&&o.centerX<=r&&o.centerY>=n&&o.centerY<=a},getSelectedNodes:function(e){var t=this,r=this,n=r.graph,a=r.originPoint,o=r.shouldUpdate,s=r.isBBoxCenterInRect,u=this.selectedState,f={x:e.x,y:e.y},c=n.getPointByCanvas(a.x,a.y),d=Sh(f.x,c.x),A=S0(f.x,c.x),D=Sh(f.y,c.y),z=S0(f.y,c.y),Z=[],rt=[];n.getNodes().forEach(function(gt){if(gt.isVisible()&&s(gt,d,A,D,z)&&o(gt,"select",t)){Z.push(gt);var Ct=gt.getModel();rt.push(Ct.id),n.setItemState(gt,u,!0)}});var ft=[];this.includeEdges&&Z.forEach(function(gt){var Ct=gt.getOutEdges();Ct.forEach(function(Ht){if(Ht.isVisible()){var ne=Ht.getModel(),re=ne.source,Me=ne.target;rt.includes(re)&&rt.includes(Me)&&o(Ht,"select",t)&&(ft.push(Ht),n.setItemState(Ht,t.selectedState,!0))}})});var ct=[];this.includeCombos&&n.getCombos().forEach(function(gt){if(gt.isVisible()&&s(gt,d,A,D,z)&&o(gt,"select",t)){ct.push(gt);var Ct=gt.getModel();rt.push(Ct.id),n.setItemState(gt,u,!0)}}),this.selectedEdges=ft,this.selectedNodes=Z,this.selectedCombos=ct,this.onSelect&&this.onSelect(Z,ft,ct),n.emit("nodeselectchange",{selectedItems:{nodes:Z,edges:ft,combos:ct},select:!0})},createBrush:function(){var e=this,t=e.graph.get("canvas").addShape("rect",{attrs:e.brushStyle,capture:!1,name:"brush-shape"});return this.brush=t,this.delegate=t,t},updateBrush:function(e){var t=this.originPoint;this.brush.attr({width:M0(e.canvasX-t.x),height:M0(e.canvasY-t.y),x:Sh(e.canvasX,t.x),y:Sh(e.canvasY,t.y)})},onKeyDown:function(e){var t=e.key;if(t){var r=this.trigger.toLowerCase(),n=t.toLowerCase();n===r||n==="control"&&r==="ctrl"||n==="ctrl"&&r==="control"?this.keydown=!0:this.keydown=!1}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}},C0="shift",iS=["shift","ctrl","alt","control"],oS={getDefaultCfg:function(){return{multiple:!0,trigger:C0,selectedState:"selected",selectNode:!0,selectEdge:!1,selectCombo:!0}},getEvents:function(){var e=this;return iS.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=C0,console.warn("Behavior click-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),e.multiple?{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(e){var t=this,r=e.item;if(!(!r||r.destroyed)){var n=r.getType(),a=t.graph,o=t.keydown,s=t.multiple,u=t.shouldUpdate,f=t.shouldBegin;if(f(e,t)){if(!o||!s){var c=a.findAllByState("node",t.selectedState).concat(a.findAllByState("edge",t.selectedState)).concat(a.findAllByState("combo",t.selectedState));(0,l.each)(c,function(Z){Z!==r&&a.setItemState(Z,t.selectedState,!1)})}var d=function(){switch(n){case"node":return t.selectNode;case"edge":return t.selectEdge;case"combo":return t.selectCombo;default:return!1}}();if(!d){var A=a.findAllByState("node",t.selectedState),D=a.findAllByState("edge",t.selectedState),z=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{selectedItems:{nodes:A,edges:D,combos:z},select:!1});return}if(r.hasState(t.selectedState)){u(e,t)&&a.setItemState(r,t.selectedState,!1);var A=a.findAllByState("node",t.selectedState),D=a.findAllByState("edge",t.selectedState),z=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{target:r,selectedItems:{nodes:A,edges:D,combos:z},select:!1})}else{u(e,t)&&a.setItemState(r,t.selectedState,!0);var A=a.findAllByState("node",t.selectedState),D=a.findAllByState("edge",t.selectedState),z=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{target:r,selectedItems:{nodes:A,edges:D,combos:z},select:!0})}}}},onCanvasClick:function(e){var t=this,r=this,n=r.graph,a=r.shouldBegin;if(a(e,this)){var o=n.findAllByState("node",this.selectedState);(0,l.each)(o,function(f){n.setItemState(f,t.selectedState,!1)});var s=n.findAllByState("edge",this.selectedState);(0,l.each)(s,function(f){n.setItemState(f,t.selectedState,!1)});var u=n.findAllByState("combo",this.selectedState);(0,l.each)(u,function(f){n.setItemState(f,t.selectedState,!1)}),n.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})}},onKeyDown:function(e){var t=this,r=e.key;r&&(r.toLowerCase()===this.trigger.toLowerCase()||r.toLowerCase()==="control"?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var e=this;e.keydown=!1}},sS=dt,T0=.05,uS={getDefaultCfg:function(){return{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"},animate:!1,animateCfg:{duration:500}}},getEvents:function(){var e=this.fixSelectedItems;return e.fixState||(e.fixState="selected"),e.fixAll&&(e.fixLineWidth=!0,e.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(e){var t=e.originalEvent.touches,r=t[0],n=t[1];e.preventDefault(),n&&(this.shouldBegin&&!this.shouldBegin(e,this)||(this.startPoint={pageX:r.pageX,pageY:r.pageY},this.moveable=!0,n&&(this.endPoint={pageX:n.pageX,pageY:n.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1))},onTouchMove:function(e){if(this.moveable){e.preventDefault();var t=e.originalEvent.touches,r=t[0],n=t[1];if(n){this.endPoint||(this.endPoint={pageX:n.pageX,pageY:n.pageY});var a=function(Z,rt){return Math.hypot(rt.x-Z.x,rt.y-Z.y)},o=a({x:r.pageX,y:r.pageY},{x:n.pageX,y:n.pageY})/a({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),s=this.originScale*o;this.currentScale=s;var u=this.get("minZoom")||this.graph.get("minZoom"),f=this.get("maxZoom")||this.graph.get("maxZoom");if(!(s>f||s<u)){var c=this.get("animate"),d=this.get("animateCfg"),A=this.graph.get("canvas"),D=A.getPointByClient(e.clientX,e.clientY);this.graph.zoomTo(s,{x:D.x,y:D.y},c,d),this.graph.emit("wheelzoom",e)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(e){var t=this,r=this,n=r.graph,a=r.fixSelectedItems;if(!(this.shouldBegin&&!this.shouldBegin(e,this))&&this.shouldUpdate(e,this)){e.preventDefault();var o=n.get("canvas"),s=o.getPointByClient(e.clientX,e.clientY),u=this.get("sensitivity"),f=n.getZoom(),c=f,d=f;e.wheelDelta<0?c=1-T0*u:c=1/(1-T0*u),d=f*c;var A=this.get("minZoom")||n.get("minZoom"),D=this.get("maxZoom")||n.get("maxZoom");d>D?d=D:d<A&&(d=A);var z=this.get("enableOptimize");if(z){var Z=this.get("optimizeZoom"),rt=this.get("optimized"),ft=n.getNodes(),ct=n.getEdges(),gt=ft.length,Ct=ct.length;if(!rt){for(var Ht=0;Ht<gt;Ht++){var ne=ft[Ht];if(!ne.destroyed)for(var re=ne.get("group").get("children"),Me=re.length,je=0;je<Me;je++){var Re=re[je];!Re.destoryed&&!Re.get("isKeyShape")&&(Re.set("ori-visibility",Re.get("ori-visibility")||Re.get("visible")),Re.hide())}}for(var ir=0;ir<Ct;ir++)for(var Sr=ct[ir],re=Sr.get("group").get("children"),Me=re.length,je=0;je<Me;je++){var Re=re[je];Re.set("ori-visibility",Re.get("ori-visibility")||Re.get("visible")),Re.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var pn=setTimeout(function(){var mi=n.getZoom(),Zi=t.get("optimized");if(Zi){t.set("optimized",!1);for(var pi=0;pi<gt;pi++){var Ki=ft[pi],_o=Ki.get("group").get("children"),Ia=_o.length;if(mi<Z){var Si=Ki.getKeyShape(),Ti=Si.get("ori-visibility");Si.set("ori-visibility",void 0),Ti&&Si.show()}else for(var Co=0;Co<Ia;Co++){var Oi=_o[Co],Ti=Oi.get("ori-visibility");Oi.set("ori-visibility",void 0),!Oi.get("visible")&&Ti&&Ti&&Oi.show()}}for(var Wi=0;Wi<Ct;Wi++){var ts=ct[Wi],_o=ts.get("group").get("children"),Ia=_o.length;if(mi<Z){var Si=ts.getKeyShape(),Ti=Si.get("ori-visibility");Si.set("ori-visibility",void 0),Ti&&Si.show()}else for(var Co=0;Co<Ia;Co++){var Oi=_o[Co];if(!Oi.get("visible")){var Ti=Oi.get("ori-visibility");Oi.set("ori-visibility",void 0),Ti&&Oi.show()}}}}},100);this.set("timeout",pn)}if(f<=1){var Gn=void 0,Pn=void 0;if(a.fixAll||a.fixLineWidth||a.fixLabel){Gn=n.findAllByState("node",a.fixState),Pn=n.findAllByState("edge",a.fixState);for(var sn=f/d,Jn=Gn.length,Kn=0;Kn<Jn;Kn++){var ne=Gn[Kn],un=ne.getContainer(),Dn=ne.getModel(),Yn=ne.getOriginStyle(),Xn=ne.getStateStyle(a.fixState),ia=ne.get("shapeFactory").getShape(Dn.type).getStateStyle(a.fixState,ne)[a.fixState];if(a.fixAll){if(d<=1){var ha=(0,l.clone)(un.getMatrix());ha||(ha=[1,0,0,0,1,0,0,0,1]);var ja=ne.getModel(),oi=ja.x,to=ja.y;ha=sS(ha,[["t",-oi,-to],["s",sn,sn],["t",oi,to]]),un.setMatrix(ha)}}else for(var re=un.get("children"),Me=re.length,je=0;je<Me;je++){var Re=re[je],Ni=void 0,eo=void 0;if(a.fixLabel){var ho=Re.get("type");if(ho==="text"){Ni=Re.attr("fontSize")||12;var Xo=Xn[Re.get("name")],Lo=ia[Re.get("name")],Wu=Xo?Xo.fontSize:12,xs=Lo?Lo.fontSize:12,Yu=Wu||xs||12;if(d<=1&&Re.attr("fontSize",Yu/d),eo)break}}if(a.fixLineWidth&&Re.get("isKeyShape")){eo=Re.attr("lineWidth")||0;var Es=Xn.lineWidth||ia.lineWidth||Yn.lineWidth||0;if(d<=1&&Re.attr("lineWidth",Es/d),Ni)break}}}for(var ws=Pn.length,yu=0;yu<ws;yu++)for(var Sr=Pn[yu],un=Sr.getContainer(),re=un.get("children"),Dn=Sr.getModel(),Xn=Sr.getStateStyle(a.fixState),ia=Sr.get("shapeFactory").getShape(Dn.type).getStateStyle(a.fixState,Sr)[a.fixState],Me=re.length,je=0;je<Me;je++){var Re=re[je],Ni=void 0,eo=void 0;if(a.fixLabel||a.fixAll){var ho=Re.get("type");if(ho==="text"){Ni=Re.attr("fontSize")||12;var Xo=Xn[Re.get("name")],Lo=ia[Re.get("name")],Wu=Xo?Xo.fontSize:12,xs=Lo?Lo.fontSize:12,Yu=Wu||xs||12;if(d<=1&&Re.attr("fontSize",Yu/d),eo)break}}if((a.fixLineWidth||a.fixAll)&&Re.get("isKeyShape")){eo=Re.attr("lineWidth")||0;var Es=Xn.lineWidth||ia.lineWidth||1;if(d<=1&&Re.attr("lineWidth",Es/d),Ni)break}}}}var Xs=this.get("animate"),tu=this.get("animateCfg");n.zoomTo(d,{x:s.x,y:s.y},Xs,tu),n.emit("wheelzoom",e)}}},A0={onMouseEnter:function(e){var t=e.item;this.currentTarget=t,this.showTooltip(e),this.graph.emit("tooltipchange",{item:e.item,action:"show"})},onMouseMove:function(e){if(!this.shouldUpdate(e,this)){this.hideTooltip();return}!this.currentTarget||e.item!==this.currentTarget||this.updatePosition(e)},onMouseLeave:function(e){this.shouldEnd(e,this)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(e){var t=this.container;if(!(!e.item||e.item.destroyed)){t||(t=this.createTooltip(this.graph.get("canvas")),this.container=t);var r=this.formatText(e.item.get("model"),e);t.innerHTML=r,gi(this.container,{visibility:"visible"}),this.updatePosition(e)}},hideTooltip:function(){gi(this.container,{visibility:"hidden"})},updatePosition:function(e){var t=this.get("shouldBegin"),r=this,n=r.width,a=r.height,o=r.container,s=r.graph;if(!t(e,this)){gi(o,{visibility:"hidden"});return}var u=s.getPointByClient(e.clientX,e.clientY),f=s.getCanvasByPoint(u.x,u.y),c=f.x,d=f.y,A=o.getBoundingClientRect();c>n/2?c-=A.width:c+=this.offset,d>a/2?d-=A.height:d+=this.offset;var D="".concat(c,"px"),z="".concat(d,"px");gi(this.container,{left:D,top:z,visibility:"visible"})},createTooltip:function(e){var t=e.get("el");t.style.position="relative";var r=qo('<div class="g6-tooltip g6-'.concat(this.item,'-tooltip"></div>'));return t.parentNode.appendChild(r),gi(r,{position:"absolute",visibility:"visible"}),this.width=e.get("width"),this.height=e.get("height"),this.container=r,this.graph.get("tooltips").push(r),r}},fS=(0,y.__assign)({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(t){return t.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},A0),cS=(0,y.__assign)({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(t){return"source: ".concat(t.source," target: ").concat(t.target)}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},A0),O0="click",lS=["click","dblclick"],dS={getDefaultCfg:function(){return{trigger:O0,onChange:function(){}}},getEvents:function(){var e,t;return lS.includes(this.trigger)?t=this.trigger:(t=O0,console.warn("Behavior collapse-expand \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),e={},e["node:".concat(t)]="onNodeClick",e.touchstart="onNodeClick",e},onNodeClick:function(e){var t=this;if(this.trigger==="click"){if(this.timer){clearTimeout(this.timer),this.timer=0;return}this.timer=setTimeout(function(){t.toggle(e),clearTimeout(t.timer),t.timer=0},200)}else this.toggle(e)},toggle:function(e){var t=e.item;if(t){var r=this.graph.findDataById(t.get("id"));if(r){var n=r.children;if(!(!n||n.length===0)){var a=!r.collapsed;this.shouldBegin(e,a,this)&&(r.collapsed=a,t.getModel().collapsed=a,this.graph.emit("itemcollapsed",{item:e.item,collapsed:a}),this.shouldUpdate(e,a,this)&&(this.onChange(t,a,this),this.graph.layout()))}}}}},hS=hc.calculationItemsBBox,vS=function i(e,t){if(t(e)!==!1&&e){var r=e.get("combos");if(r.length===0)return!1;(0,l.each)(r,function(n){i(n,t)})}},pS={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected",enableStack:!0}},getEvents:function(){return{"combo:mousedown":"onMouseDown","combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(e){var t=e.item;if(!t||t.destroyed||!this.shouldUpdate(e,this))return!1;var r=t.getType();return r==="combo"},onMouseDown:function(e){this.origin={x:e.x,y:e.y}},onDragStart:function(e){var t=this,r=this.graph,n=e.item;if(this.currentShouldEnd=!0,!!this.validationCombo(e)){this.targets=[];var a=r.findAllByState("combo",this.selectedState),o=n.get("id"),s=a.filter(function(f){var c=f.get("id");return o===c});s.length===0?this.targets.push(n):this.targets=a;var u=[];this.targets.forEach(function(f){var c=f.getModel(),d=c.x,A=c.y,D=c.id;u.push({x:d,y:A,id:D})}),this.set("beforeDragItems",u),this.activeState&&this.targets.map(function(f){var c=f.getModel();if(c.parentId){var d=r.findById(c.parentId);d&&r.setItemState(d,t.activeState,!0)}}),this.point={},this.originPoint={},this.currentItemChildCombos=[],vS(n,function(f){if(f.destroyed)return!1;var c=f.getModel();return t.currentItemChildCombos.push(c.id),!0})}},onDrag:function(e){var t=this;if(this.origin&&this.validationCombo(e))if(this.enableDelegate)this.updateDelegate(e);else{if(this.activeState){var r=this.graph,n=e.item,a=n.getModel(),o=r.getCombos(),s=n.getBBox(),u=s.centerX,f=s.centerY,c=s.width,d=o.filter(function(A){var D=A.getModel();return a.parentId,D.id!==a.id&&!t.currentItemChildCombos.includes(D.id)});d.map(function(A){var D=A.getBBox(),z=D.centerX,Z=D.centerY,rt=D.width,ft=u-z,ct=f-Z,gt=2*Math.sqrt(ft*ft+ct*ct);c+rt-gt>.8*c?r.setItemState(A,t.activeState,!0):r.setItemState(A,t.activeState,!1)})}(0,l.each)(this.targets,function(A){t.updateCombo(A,e)}),this.onlyChangeComboSize&&this.updateParentCombos()}},updatePositions:function(e,t){var r=this;(this.enableDelegate||t)&&(0,l.each)(this.targets,function(n){r.updateCombo(n,e,t)})},onDrop:function(e){var t=this,r=e.item;if(this.currentShouldEnd=this.shouldEnd(e,r,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.currentShouldEnd||!r||!this.targets||r.destroyed)){var n=this.graph,a=r.getModel();this.targets.map(function(o){var s=o.getModel();s.parentId!==a.id?(t.activeState&&n.setItemState(r,t.activeState,!1),t.onlyChangeComboSize?n.updateCombo(o):n.updateComboTree(o,a.id,!1)):n.updateCombo(r)}),this.end(r,e),this.endComparison=!0}},onNodeDrop:function(e){var t=this;if(!(!this.targets||this.targets.length===0)){var r=this.graph,n=e.item,a=n.getModel().comboId,o=a?r.findById(a):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),!!this.currentShouldEnd){var s;if(a){if(this.activeState){var u=r.findById(a);r.setItemState(u,this.activeState,!1)}this.targets.map(function(f){t.onlyChangeComboSize?r.updateCombo(f):a!==f.getID()&&(s=r.findById(a),a!==f.getModel().parentId&&r.updateComboTree(f,a,!1))})}else this.targets.map(function(f){if(t.onlyChangeComboSize)r.updateCombo(f);else{var c=f.getModel();c.comboId&&r.updateComboTree(f,void 0,!1)}});this.endComparison=!0,this.end(s,e)}}},onDragEnter:function(e){if(this.origin&&this.validationCombo(e)){var t=e.item,r=this.graph;this.activeState&&r.setItemState(t,this.activeState,!0)}},onDragLeave:function(e){if(this.origin&&this.validationCombo(e)){var t=e.item,r=this.graph;this.activeState&&r.setItemState(t,this.activeState,!1)}},onDragEnd:function(e){if(!(!this.targets||this.targets.length===0)){var t=e.item;this.currentShouldEnd&&this.updatePositions(e);var r=this.getParentCombo(t.getModel().parentId),n=this.graph;r&&this.activeState&&n.setItemState(r,this.activeState,!1),this.end(void 0,e)}},end:function(e,t){var r=this;if(this.origin){var n=this.graph;if(this.delegateShape){var a=n.get("delegateGroup");a.clear(),this.delegateShape=null}if(e&&this.activeState&&n.setItemState(e,this.activeState,!1),!e){var o=n.get("enabledStack")&&this.enableStack,s={before:{nodes:[],edges:[],combos:[].concat(this.get("beforeDragItems"))},after:{nodes:[],edges:[],combos:[]}};this.targets.map(function(u){if(!r.onlyChangeComboSize)n.updateComboTree(u,void 0,o);else{n.updateCombo(u);var f=u.getModel(),c=f.x,d=f.y,A=f.id;s.after.combos.push({x:c,y:d,id:A}),n.pushStack("update",s)}})}this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(e,t,r){var n=this;if(r===void 0&&(r={}),t(e,r)!==!1&&e){var a=e.get("combos");(0,l.each)(a,function(s){n.traverse(s,t,r)});var o=e.get("nodes");(0,l.each)(o,function(s){n.traverse(s,t,r)})}},updateCombo:function(e,t,r){this.updateSingleItem(e,t,r);var n={};this.traverse(e,function(a,o){return a.destroyed?!1:(a.getEdges().forEach(function(s){return o[s.getID()]=s}),!0)},n),Object.values(n).forEach(function(a){return a.refresh()})},updateSingleItem:function(e,t,r){var n=this.origin,a=this.graph,o=e.getModel(),s=e.get("id");this.point[s]||(this.point[s]={x:o.x,y:o.y});var u=t.x-n.x+this.point[s].x,f=t.y-n.y+this.point[s].y;r&&(u+=n.x-t.x,f+=n.y-t.y),a.updateItem(e,{x:u,y:f},!1)},getParentCombo:function(e){var t=this.graph;if(e){var r=t.findById(e);if(r)return r}},updateDelegate:function(e){var t=this.graph;if(this.delegateShape){var A=e.x-this.origin.x+this.originPoint.minX,D=e.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:A,y:D})}else{var r=t.get("delegateGroup"),n=null;this.targets.length>1?n=hS(this.targets):n=this.targets[0].getBBox();var a=n.x,o=n.y,s=n.width,u=n.height,f=n.minX,c=n.minY;this.originPoint={x:a,y:o,width:s,height:u,minX:f,minY:c};var d=(0,y.__assign)((0,y.__assign)({},Al.delegateStyle),this.delegateStyle);this.delegateShape=r.addShape("rect",{attrs:(0,y.__assign)({width:n.width,height:n.height,x:n.x,y:n.y},d),name:"combo-delegate-shape"}),this.delegateShape.set("capture",!1),this.delegate=this.delegateShape}},updateParentCombos:function(){var e=this,t=e.graph,r=e.targets,n={};r==null||r.forEach(function(a){var o=a.getModel().parentId;o&&(n[o]=t.findById(o))}),Object.values(n).forEach(function(a){a&&t.updateCombo(a)})}},I0="dblclick",gS=["click","dblclick"],mS={getDefaultCfg:function(){return{trigger:I0,relayout:!0}},getEvents:function(){var e,t;return gS.includes(this.trigger)?t=this.trigger:(t=I0,console.warn("Behavior collapse-expand-group \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),e={},e["combo:".concat(t)]="onComboClick",e},onComboClick:function(e){var t=e.item,r=this,n=r.graph,a=r.relayout;if(!(!t||t.destroyed||t.getType()!=="combo")){var o=t.getModel(),s=o.id;s&&(n.collapseExpandCombo(s),a&&n.get("layout")?n.layout():n.refreshPositions())}}},yS=hc.isPolygonsIntersect,bS=hc.pathToPoints,D0="shift",xS=["drag","shift","ctrl","alt","control"],ES=function(e,t){var r,n=e.getKeyShape();if(e.get("type")==="path")r=bS(n.attr("path"));else{var a=n.getCanvasBBox();r=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]]}return yS(t,r)},wS={getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},shouldDeselect:void 0,selectedState:"selected",trigger:D0,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return xS.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=D0,console.warn("Behavior lasso-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(e){var t=this.lasso,r=e.item;r||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates("dragstart"),t||(t=this.createLasso()),this.dragging=!0,this.originPoint={x:e.x,y:e.y},this.points.push(this.originPoint),t.show())},onDragMove:function(e){this.dragging&&(this.trigger!=="drag"&&!this.keydown||(this.points.push({x:e.x,y:e.y}),this.updateLasso(e)))},onDragEnd:function(e){!this.lasso&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var e=this.points,t=[];return e.length&&(e.forEach(function(r,n){n===0?t.push(["M",r.x,r.y]):t.push(["L",r.x,r.y])}),t.push(["L",e[0].x,e[0].y])),t},clearStates:function(e){e===void 0&&(e="canvas:click");var t=this,r=t.graph,n=t.selectedState,a=t.shouldDeselect,o=r.findAllByState("node",n),s=r.findAllByState("edge",n);(!a||a({action:e,nodes:o,edges:s}))&&(o.forEach(function(u){return r.setItemState(u,n,!1)}),s.forEach(function(u){return r.setItemState(u,n,!1)})),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],r.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var e=this,t=this,r=t.graph,n=t.shouldUpdate,a=this.points.map(function(c){return[r.getCanvasByPoint(c.x,c.y).x,r.getCanvasByPoint(c.x,c.y).y]}),o=this.selectedState,s=[],u=[];r.getNodes().forEach(function(c){if(c.isVisible()&&ES(c,a)&&n(c,"select",e)){s.push(c);var d=c.getModel();u.push(d.id),r.setItemState(c,o,!0)}});var f=[];this.includeEdges&&s.forEach(function(c){var d=c.getOutEdges();d.forEach(function(A){if(A.isVisible()){var D=A.getModel(),z=D.source,Z=D.target;u.includes(z)&&u.includes(Z)&&n(A,"select",e)&&(f.push(A),r.setItemState(A,e.selectedState,!0))}})}),this.selectedEdges=f,this.selectedNodes=s,this.onSelect&&this.onSelect(s,f),r.emit("nodeselectchange",{selectedItems:{nodes:s,edges:f},select:!0})},createLasso:function(){var e=this,t=e.graph.get("delegateGroup").addShape("path",{attrs:(0,y.__assign)({path:[]},e.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=t,this.delegate=t,this.points=[],t},updateLasso:function(e){var t=this;this.lasso.attr({path:t.getLassoPath()})},onKeyDown:function(e){var t=e.key;t&&(t.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}},P0="click",SS=["click","drag"],L0=void 0,MS=["shift","ctrl","control","alt","meta",void 0],_S={getDefaultCfg:function(){return{trigger:P0,key:L0,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var e=this;SS.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=P0,console.warn("Behavior create-edge \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click'\uFF0C'drag'")),e.key&&MS.indexOf(e.key.toLowerCase())===-1&&(e.trigger=L0,console.warn("Behavior create-edge \u7684 key \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'shift'\uFF0C'ctrl'\uFF0C'alt'\uFF0C'control'\uFF0C\u6216 undefined"));var t;return e.trigger==="drag"?t={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:e.trigger==="click"&&(t={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),e.key&&(t.keydown="onKeyDown",t.keyup="onKeyUp"),t},onDragEnd:function(e){var t=this;if(!(t.key&&!t.keydown)){var r=e.item;(!r||r.getID()===t.source||r.getType()!=="node")&&t.cancelCreating({item:t.edge,x:e.x,y:e.y})}},onClick:function(e){var t=this;if(!(t.key&&!t.keydown)){var r=e.item,n=t.graph,a=r.getModel(),o=t.getEdgeConfig;if(t.addingEdge&&t.edge){if(!t.shouldEnd(e,t))return;var s=void 0;o&&(0,l.isFunction)(o)?s=o({source:t.source,target:a.id},t):s=t.edgeConfig;var u=(0,y.__assign)({target:a.id},s);if(t.source===a.id&&(u.type="loop"),n.emit("beforecreateedge",{}),n.updateItem(t.edge,u,!1),n.get("enabledStack")){var f=(0,y.__assign)((0,y.__assign)({},t.edge.getModel()),{itemType:"edge"}),c={};c.edges=[f],n.pushStack("add",{before:{},after:c})}n.emit("aftercreateedge",{edge:t.edge}),t.edge.getKeyShape().set("capture",!0),t.edge=null,t.addingEdge=!1}else{if(!t.shouldBegin(e,t))return;var s=void 0;o&&(0,l.isFunction)(o)?s=o({source:a.id,target:a.id},t):s=t.edgeConfig,t.edge=n.addItem("edge",(0,y.__assign)({source:a.id,target:a.id},s),!1),t.source=a.id,t.addingEdge=!0,t.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(e){var t=this;if(!(t.key&&!t.keydown)){t.edge&&t.edge.destroyed&&t.cancelCreating({item:t.edge});var r={x:e.x,y:e.y};if(!t.graph.findById(t.source)){t.addingEdge=!1;return}t.addingEdge&&t.edge&&t.graph.updateItem(t.edge,{target:r},!1)}},cancelCreating:function(e){var t,r,n=this;if(!(n.key&&!n.keydown)){var a=n.graph,o=e.item;if(n.addingEdge&&(n.edge===o||!((r=(t=e.target)===null||t===void 0?void 0:t.isCanvas)===null||r===void 0)&&r.call(t))){n.edge&&!n.edge.destroyed&&a.removeItem(n.edge,!1),n.edge=null,n.addingEdge=!1;return}}},onKeyDown:function(e){var t=this,r=e.key;r&&(r.toLowerCase()===t.key.toLowerCase()?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var e=this;e.addingEdge&&e.edge&&(e.graph.removeItem(e.edge,!1),e.addingEdge=!1,e.edge=null),this.keydown=!1}},N0="ctrl",CS=["shift","ctrl","alt","control"],TS="1",AS={getDefaultCfg:function(){return{trigger:N0,combinedKey:TS,functionName:"fitView",functionParams:[]}},getEvents:function(){return CS.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=N0,console.warn("Behavior shortcuts-fit-view \u7684 trigger \u53C2\u6570 '".concat(this.trigger,"' \u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'"))),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(e){var t=e.key;if(t){var r=this.trigger.toLowerCase(),n=t.toLowerCase();this.triggerKeydown||(n===r||n==="control"&&r==="ctrl"||n==="ctrl"&&r==="control"?this.triggerKeydown=!0:this.triggerKeydown=!1);var a=this.graph;if(!a[this.functionName])return console.warn("Behavior shortcuts-fit-view \u7684 functionName \u53C2\u6570 '".concat(this.functionName,"' \u4E0D\u5408\u6CD5\uFF0C\u5B83\u4E0D\u662F Graph \u7684\u4E00\u4E2A\u51FD\u6570\u540D")),{};if(this.triggerKeydown&&!this.combinedKey){this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]();return}var o=this.combinedKey.toLowerCase();this.triggerKeydown&&(n===o||n==="control"&&o==="ctrl"||n==="ctrl"&&o==="control")&&(this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]())}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}},OS=["shift","ctrl","alt","control","meta"],IS={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0,allowDragOnItem:!0}},getEvents:function(){return(!this.zoomKey||OS.indexOf(this.zoomKey)===-1)&&(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(e){var t=this;if(this.allowDrag(e)){var r=this.graph,n=Array.isArray(this.zoomKey)?[].concat(this.zoomKey):[this.zoomKey];n.includes("control")&&n.push("ctrl");var a=n.some(function(Dn){return e["".concat(Dn,"Key")]});if(a){var o=r.get("canvas"),s=o.getPointByClient(e.clientX,e.clientY),u=r.getZoom();e.wheelDelta>0?u=u+u*.05:u=u-u*.05,r.zoomTo(u,{x:s.x,y:s.y})}else{var f=e.deltaX||e.movementX,c=e.deltaY||e.movementY;!c&&navigator.userAgent.indexOf("Firefox")>-1&&(c=-e.wheelDelta*125/3);var d=this.graph.get("width"),A=this.graph.get("height"),D=this.graph.get("canvas").getCanvasBBox(),z=this.scalableRange,Z=this.scalableRange;z<1&&z>-1&&(z=d*z,Z=A*Z);var rt=D.minX,ft=D.maxX,ct=D.minY,gt=D.maxY;f>0?ft<-z?f=0:ft-f<-z&&(f=ft+z):f<0&&(rt>d+z?f=0:rt-f>d+z&&(f=rt-(d+z))),c>0?gt<-Z?c=0:gt-c<-Z&&(c=gt+Z):c<0&&(ct>A+Z?c=0:ct-c>A+Z&&(c=ct-(A+Z))),this.get("direction")==="x"?c=0:this.get("direction")==="y"&&(f=0),r.translate(-f,-c)}e.preventDefault();var Ct=this.get("enableOptimize");if(Ct){var Ht=this.get("optimizeZoom"),ne=this.get("optimized"),re=r.getNodes(),Me=r.getEdges(),je=re.length,Re=Me.length;if(!ne){for(var ir=0;ir<je;ir++){var Sr=re[ir];if(!Sr.destroyed)for(var pn=Sr.get("group").get("children"),Gn=pn.length,Pn=0;Pn<Gn;Pn++){var sn=pn[Pn];!sn.destoryed&&!sn.get("isKeyShape")&&(sn.set("ori-visibility",sn.get("ori-visibility")||sn.get("visible")),sn.hide())}}for(var Jn=0;Jn<Re;Jn++)for(var Kn=Me[Jn],pn=Kn.get("group").get("children"),Gn=pn.length,Pn=0;Pn<Gn;Pn++){var sn=pn[Pn];sn.set("ori-visibility",sn.get("ori-visibility")||sn.get("visible")),sn.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var un=setTimeout(function(){var Dn=r.getZoom(),Yn=t.get("optimized");if(Yn){t.set("optimized",!1);for(var Xn=0;Xn<je;Xn++){var ia=re[Xn],ha=ia.get("group").get("children"),ja=ha.length;if(Dn<Ht){var oi=ia.getKeyShape(),to=oi.get("ori-visibility");to&&oi.show()}else for(var Ni=0;Ni<ja;Ni++){var eo=ha[Ni],to=eo.get("ori-visibility");!eo.get("visible")&&to&&to&&eo.show()}}for(var ho=0;ho<Re;ho++){var Xo=Me[ho],ha=Xo.get("group").get("children"),ja=ha.length;if(Dn<Ht){var oi=Xo.getKeyShape(),to=oi.get("ori-visibility");to&&oi.show()}else for(var Ni=0;Ni<ja;Ni++){var eo=ha[Ni];if(!eo.get("visible")){var to=eo.get("ori-visibility");to&&eo.show()}}}}},100);this.set("timeout",un)}}},allowDrag:function(e){var t,r,n=e.target,a=n&&n.isCanvas&&n.isCanvas();if((0,l.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!a)return!1;if((0,l.isObject)(this.allowDragOnItem)){var o=this.allowDragOnItem,s=o.node,u=o.edge,f=o.combo,c=(r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t);if(!s&&c==="node"||!u&&c==="edge"||!f&&c==="combo")return!1}return!0}},DS={"drag-canvas":tS,"zoom-canvas":uS,"drag-node":eS,"activate-relations":rS,"brush-select":aS,"click-select":oS,"lasso-select":wS,tooltip:fS,"edge-tooltip":cS,"collapse-expand":dS,"drag-combo":pS,"collapse-expand-combo":mS,"create-edge":_S,"shortcuts-call":AS,"scroll-canvas":IS};(0,l.each)(DS,function(i,e){xp(e,i)});var PS=(0,y.__assign)((0,y.__assign)({},m),$m),_M=bs.Grid,CM=bs.Minimap,TM=bs.Bundling,AM=bs.Menu,LS=bs.Fisheye,OM=bs.ToolBar,IM=bs.Tooltip,NS=bs.TimeBar,RS=bs.ImageMinimap,kS=bs.EdgeFilterLens,BS=bs.SnapLine,DM=bs.Legend,FS=bs.Annotation,R0={version:Al.version,Graph:dg,TreeGraph:Pb,Util:hc,Layout:Ci.Layouts,TreeLayout:hb,registerLayout:vb,Global:Al,registerBehavior:xp,registerCombo:Km,registerEdge:bp,registerNode:lc,Minimap:bs.Minimap,Grid:bs.Grid,Bundling:bs.Bundling,Menu:bs.Menu,ToolBar:bs.ToolBar,Tooltip:bs.Tooltip,Legend:bs.Legend,TimeBar:NS,SnapLine:BS,Fisheye:LS,ImageMinimap:RS,EdgeFilterLens:kS,Annotation:FS,Algorithm:PS,Arrow:vp,Marker:pp,Shape:zc};R0.version="4.8.15";var zS=R0,PM="4.8.15"},199905:function(We,G,_){"use strict";_.r(G),_.d(G,{Graph:function(){return V},GraphWithEvent:function(){return Nt},algorithm:function(){return m},comparision:function(){return w},essence:function(){return R},generate:function(){return M}});var m={};_.r(m),_.d(m,{components:function(){return ue},dfs:function(){return ae},dijkstra:function(){return Pe},dijkstraAll:function(){return Qe},findCycles:function(){return En},floydWarshall:function(){return kt},isAcyclic:function(){return tr},postorder:function(){return $t},preorder:function(){return we},prim:function(){return Xt},tarjan:function(){return fr},topsort:function(){return bn}});var R={};_.r(R),_.d(R,{hasSelfLoop:function(){return xr},isGraph:function(){return Ur},isNullGraph:function(){return rr},isSimpleGraph:function(){return xn}});var w={};_.r(w),_.d(w,{containAllSameEdges:function(){return mt},containAllSameNodes:function(){return H},containSameEdges:function(){return at},containSameNodes:function(){return Q},getSameEdges:function(){return C},getSameNodes:function(){return B},isGraphComplement:function(){return Wr},isGraphContainsAnother:function(){return Lt},isGraphOptionSame:function(){return I},isGraphSame:function(){return Pt}});var M={};_.r(M),_.d(M,{getGraphComplement:function(){return Gr}});var P;(function(ce){ce.DEFAULT_EDGE_NAME="\0",ce.GRAPH_NODE="\0",ce.EDGE_KEY_DELIM=""})(P||(P={}));function L(ce,Yt){var ge=ce.get(Yt)||0;ce.set(Yt,ge+1)}function p(ce,Yt){var ge=ce.get(Yt);ge!==void 0&&(ge=ge-1,ge>0?ce.set(Yt,ge):ce.delete(Yt))}function b(ce,Yt,ge,Ie){var xe=String(Yt),Ye=String(ge);if(!ce&&xe>Ye){var gr=xe;xe=Ye,Ye=gr}return xe+P.EDGE_KEY_DELIM+Ye+P.EDGE_KEY_DELIM+(Ie===void 0?P.DEFAULT_EDGE_NAME:Ie)}function S(ce,Yt,ge,Ie){var xe=String(Yt),Ye=String(ge),gr={v:Yt,w:ge};if(!ce&&xe>Ye){var Mr=gr.v;gr.v=gr.w,gr.w=Mr}return Ie!==void 0&&(gr.name=Ie),gr}function x(ce,Yt){return b(ce,Yt.v,Yt.w,Yt.name)}function g(ce){return typeof ce=="function"}var T=function(Yt){return Yt.nodes().map(function(ge){var Ie=Yt.node(ge),xe=Yt.parent(ge),Ye={id:ge,value:Ie,parent:xe};return Ye.value===void 0&&delete Ye.value,Ye.parent===void 0&&delete Ye.parent,Ye})},E=function(Yt){return Yt.edges().map(function(ge){var Ie=Yt.edge(ge),xe={v:ge.v,w:ge.w,value:Ie,name:ge.name};return xe.name===void 0&&delete xe.name,xe.value===void 0&&delete xe.value,xe})},O=function(Yt){var ge={options:{directed:Yt.isDirected(),multigraph:Yt.isMultigraph(),compound:Yt.isCompound()},nodes:T(Yt),edges:E(Yt),value:Yt.graph()};return ge.value===void 0&&delete ge.value,ge},k=function(Yt){var ge=new V(Yt.options);return Yt.value!==void 0&&ge.setGraph(Yt.value),Yt.nodes.forEach(function(Ie){ge.setNode(Ie.id,Ie.value),Ie.parent&&ge.setParent(Ie.id,Ie.parent)}),Yt.edges.forEach(function(Ie){ge.setEdge(Ie.v,Ie.w,Ie.value,Ie.name)}),ge};function y(ce,Yt){var ge=Object.keys(ce);if(Object.getOwnPropertySymbols){var Ie=Object.getOwnPropertySymbols(ce);Yt&&(Ie=Ie.filter(function(xe){return Object.getOwnPropertyDescriptor(ce,xe).enumerable})),ge.push.apply(ge,Ie)}return ge}function l(ce){for(var Yt=1;Yt<arguments.length;Yt++){var ge=arguments[Yt]!=null?arguments[Yt]:{};Yt%2?y(Object(ge),!0).forEach(function(Ie){U(ce,Ie,ge[Ie])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ce,Object.getOwnPropertyDescriptors(ge)):y(Object(ge)).forEach(function(Ie){Object.defineProperty(ce,Ie,Object.getOwnPropertyDescriptor(ge,Ie))})}return ce}function U(ce,Yt,ge){return Yt in ce?Object.defineProperty(ce,Yt,{value:ge,enumerable:!0,configurable:!0,writable:!0}):ce[Yt]=ge,ce}function X(ce,Yt){if(!(ce instanceof Yt))throw new TypeError("Cannot call a class as a function")}function F(ce,Yt){for(var ge=0;ge<Yt.length;ge++){var Ie=Yt[ge];Ie.enumerable=Ie.enumerable||!1,Ie.configurable=!0,"value"in Ie&&(Ie.writable=!0),Object.defineProperty(ce,Ie.key,Ie)}}function W(ce,Yt,ge){return Yt&&F(ce.prototype,Yt),ge&&F(ce,ge),Object.defineProperty(ce,"prototype",{writable:!1}),ce}var j={compound:!1,multigraph:!1,directed:!0},V=function(){function ce(){var Yt=this,ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};X(this,ce),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=P.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return Yt.directed},this.isMultigraph=function(){return Yt.multigraph},this.isCompound=function(){return Yt.compound},this.setGraph=function(xe){return Yt.label=xe,Yt},this.graph=function(){return Yt.label},this.setDefaultNodeLabel=function(xe){return g(xe)?Yt.defaultNodeLabelFn=xe:Yt.defaultNodeLabelFn=function(){return xe},Yt},this.nodeCount=function(){return Yt.nodeCountNum},this.node=function(xe){return Yt.nodesLabelMap.get(xe)},this.nodes=function(){return Array.from(Yt.nodesLabelMap.keys())},this.sources=function(){return Yt.nodes().filter(function(xe){var Ye;return!(!((Ye=Yt.inEdgesMap.get(xe))===null||Ye===void 0)&&Ye.size)})},this.sinks=function(){return Yt.nodes().filter(function(xe){var Ye;return!(!((Ye=Yt.outEdgesMap.get(xe))===null||Ye===void 0)&&Ye.size)})},this.setNodes=function(xe,Ye){return xe.map(function(gr){return Yt.setNode(gr,Ye)}),Yt},this.hasNode=function(xe){return Yt.nodesLabelMap.has(xe)},this.checkCompound=function(){if(!Yt.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(xe){if(Yt.isCompound()){var Ye,gr=(Ye=Yt.parentMap)===null||Ye===void 0?void 0:Ye.get(xe);if(gr!==Yt.GRAPH_NODE)return gr}},this.removeFromParentsChildList=function(xe){var Ye=Yt.parentMap.get(xe);Yt.childrenMap.get(Ye).delete(xe)},this.setParent=function(xe,Ye){var gr,Mr;Yt.checkCompound();for(var vn=Ye===void 0?Yt.GRAPH_NODE:Ye,Wn=Yt.parent(vn);Wn;){if(xe===Wn)throw new Error("Setting "+Ye+" as parent of "+xe+" would create a cycle");Wn=Yt.parent(Wn)}Ye&&Yt.setNode(Ye),Yt.setNode(xe),Yt.removeFromParentsChildList(xe),(gr=Yt.parentMap)===null||gr===void 0||gr.set(xe,vn);var Sn=Yt.childrenMap.get(vn);return Sn.set(xe,!0),(Mr=Yt.childrenMap)===null||Mr===void 0||Mr.set(vn,Sn),Yt},this.children=function(xe){var Ye=xe===void 0?Yt.GRAPH_NODE:xe;if(Yt.isCompound()){var gr,Mr=(gr=Yt.childrenMap)===null||gr===void 0?void 0:gr.get(Ye);return Mr?Array.from(Mr.keys()):void 0}if(Ye===Yt.GRAPH_NODE)return Yt.nodes();if(xe&&Yt.hasNode(xe))return[]},this.predecessors=function(xe){var Ye=Yt.predecessorsMap.get(xe);return Ye?Array.from(Ye.keys()):void 0},this.successors=function(xe){var Ye=Yt.successorsMap.get(xe);return Ye?Array.from(Ye.keys()):void 0},this.neighbors=function(xe){var Ye;if(Yt.hasNode(xe))return Array.from(new Set((Ye=Yt.predecessors(xe))===null||Ye===void 0?void 0:Ye.concat(Yt.successors(xe))))},this.isLeaf=function(xe){var Ye;if(Yt.isDirected()){var gr;return!(!((gr=Yt.successors(xe))===null||gr===void 0)&&gr.length)}return!(!((Ye=Yt.neighbors(xe))===null||Ye===void 0)&&Ye.length)},this.filterNodes=function(xe){var Ye=Yt.directed,gr=Yt.multigraph,Mr=Yt.compound,vn=new ce({directed:Ye,multigraph:gr,compound:Mr});if(vn.setGraph(Yt.graph()),Yt.nodes().forEach(function(Sn){xe(Sn)&&vn.setNode(Sn,Yt.node(Sn))}),Yt.edges().forEach(function(Sn){vn.hasNode(Sn.v)&&vn.hasNode(Sn.w)&&vn.setEdgeObj(Sn,Yt.edge(Sn))}),Mr){var Wn=function(ea){for(var wn=Yt.parent(ea);wn!==void 0&&!vn.hasNode(wn);)wn=Yt.parent(wn);return wn};vn.nodes().forEach(function(Sn){vn.setParent(Sn,Wn(Sn))})}return vn},this.setDefaultEdgeLabel=function(xe){return g(xe)?Yt.defaultEdgeLabelFn=xe:Yt.defaultEdgeLabelFn=function(){return xe},Yt},this.edgeCount=function(){return Yt.edgeCountNum},this.setEdgeObj=function(xe,Ye){return Yt.setEdge(xe.v,xe.w,Ye,xe.name)},this.setPath=function(xe,Ye){return xe.reduce(function(gr,Mr){return Yt.setEdge(gr,Mr,Ye),Mr}),Yt},this.edgeFromArgs=function(xe,Ye,gr){return Yt.edge({v:xe,w:Ye,name:gr})},this.edge=function(xe){return Yt.edgesLabelsMap.get(x(Yt.isDirected(),xe))},this.hasEdge=function(xe,Ye,gr){return Yt.edgesLabelsMap.has(x(Yt.isDirected(),{v:xe,w:Ye,name:gr}))},this.removeEdgeObj=function(xe){var Ye=xe.v,gr=xe.w,Mr=xe.name;return Yt.removeEdge(Ye,gr,Mr)},this.edges=function(){return Array.from(Yt.edgesMap.values())},this.inEdges=function(xe,Ye){var gr=Yt.inEdgesMap.get(xe);if(gr)return Array.from(gr.values()).filter(function(Mr){return!Ye||Mr.v===Ye})},this.outEdges=function(xe,Ye){var gr=Yt.outEdgesMap.get(xe);if(gr)return Array.from(gr.values()).filter(function(Mr){return!Ye||Mr.w===Ye})},this.nodeEdges=function(xe,Ye){var gr;if(Yt.hasNode(xe))return(gr=Yt.inEdges(xe,Ye))===null||gr===void 0?void 0:gr.concat(Yt.outEdges(xe,Ye))},this.toJSON=function(){return O(Yt)},this.nodeInDegree=function(xe){var Ye=Yt.inEdgesMap.get(xe);return Ye?Ye.size:0},this.nodeOutDegree=function(xe){var Ye=Yt.outEdgesMap.get(xe);return Ye?Ye.size:0},this.nodeDegree=function(xe){return Yt.nodeInDegree(xe)+Yt.nodeOutDegree(xe)},this.source=function(xe){return xe.v},this.target=function(xe){return xe.w};var Ie=l(l({},j),ge);this.compound=Ie.compound,this.directed=Ie.directed,this.multigraph=Ie.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return W(ce,[{key:"setNode",value:function(ge,Ie){var xe=this.nodesLabelMap,Ye=this.defaultNodeLabelFn,gr=this.isCompound,Mr=this.parentMap,vn=this.childrenMap,Wn=this.inEdgesMap,Sn=this.outEdgesMap,ea=this.predecessorsMap,wn=this.successorsMap;if(xe.has(ge))return Ie!==void 0&&xe.set(ge,Ie),this;if(xe.set(ge,Ie||Ye(ge)),gr()){var Hn;Mr==null||Mr.set(ge,this.GRAPH_NODE),vn==null||vn.set(ge,new Map),vn!=null&&vn.has(this.GRAPH_NODE)||vn==null||vn.set(this.GRAPH_NODE,new Map),vn==null||(Hn=vn.get(this.GRAPH_NODE))===null||Hn===void 0||Hn.set(ge,!0)}return[Wn,Sn,ea,wn].forEach(function(la){return la.set(ge,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(ge){var Ie=this;if(this.hasNode(ge)){var xe=function(xa){Ie.removeEdge(xa.v,xa.w,xa.name)},Ye=this.inEdgesMap,gr=this.outEdgesMap,Mr=this.predecessorsMap,vn=this.successorsMap,Wn=this.nodesLabelMap;if(this.isCompound()){var Sn,ea,wn;this.removeFromParentsChildList(ge),(Sn=this.parentMap)===null||Sn===void 0||Sn.delete(ge),(ea=this.children(ge))===null||ea===void 0||ea.forEach(function(ba){return Ie.setParent(ba)}),(wn=this.childrenMap)===null||wn===void 0||wn.delete(ge)}var Hn=Ye.get(ge),la=gr.get(ge);Array.from(Hn.values()).forEach(function(ba){return xe(ba)}),Array.from(la.values()).forEach(function(ba){return xe(ba)}),Wn.delete(ge),Ye.delete(ge),gr.delete(ge),Mr.delete(ge),vn.delete(ge),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(ge,Ie,xe,Ye){var gr,Mr,vn=S(this.isDirected(),ge,Ie,Ye),Wn=x(this.isDirected(),vn),Sn=vn.v,ea=vn.w;if(this.edgesLabelsMap.has(Wn))return this.edgesLabelsMap.set(Wn,xe),this;if(Ye!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(Sn),this.setNode(ea),this.edgesLabelsMap.set(Wn,xe||this.defaultEdgeLabelFn(Sn,ea,Ye)),Object.freeze(vn),this.edgesMap.set(Wn,vn);var wn=this.predecessorsMap.get(ea),Hn=this.successorsMap.get(Sn);return L(wn,Sn),L(Hn,ea),(gr=this.inEdgesMap.get(ea))===null||gr===void 0||gr.set(Wn,vn),(Mr=this.outEdgesMap.get(Sn))===null||Mr===void 0||Mr.set(Wn,vn),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(ge,Ie,xe){var Ye=b(this.isDirected(),ge,Ie,xe),gr=this.edgesMap.get(Ye);if(gr){var Mr=S(this.isDirected(),ge,Ie,xe),vn=Mr.v,Wn=Mr.w;this.edgesLabelsMap.delete(Ye),this.edgesMap.delete(Ye);var Sn=this.predecessorsMap.get(Wn),ea=this.successorsMap.get(vn);p(Sn,vn),p(ea,Wn),this.inEdgesMap.get(Wn).delete(Ye),this.outEdgesMap.get(vn).delete(Ye),this.edgeCountNum-=1}return this}}]),ce}();V.fromJSON=k;function q(ce){"@babel/helpers - typeof";return q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Yt){return typeof Yt}:function(Yt){return Yt&&typeof Symbol=="function"&&Yt.constructor===Symbol&&Yt!==Symbol.prototype?"symbol":typeof Yt},q(ce)}function $(ce,Yt){if(!(ce instanceof Yt))throw new TypeError("Cannot call a class as a function")}function J(ce,Yt){for(var ge=0;ge<Yt.length;ge++){var Ie=Yt[ge];Ie.enumerable=Ie.enumerable||!1,Ie.configurable=!0,"value"in Ie&&(Ie.writable=!0),Object.defineProperty(ce,Ie.key,Ie)}}function ut(ce,Yt,ge){return Yt&&J(ce.prototype,Yt),ge&&J(ce,ge),Object.defineProperty(ce,"prototype",{writable:!1}),ce}function nt(){return typeof Reflect!="undefined"&&Reflect.get?nt=Reflect.get:nt=function(Yt,ge,Ie){var xe=yt(Yt,ge);if(xe){var Ye=Object.getOwnPropertyDescriptor(xe,ge);return Ye.get?Ye.get.call(arguments.length<3?Yt:Ie):Ye.value}},nt.apply(this,arguments)}function yt(ce,Yt){for(;!Object.prototype.hasOwnProperty.call(ce,Yt)&&(ce=Tt(ce),ce!==null););return ce}function dt(ce,Yt){if(typeof Yt!="function"&&Yt!==null)throw new TypeError("Super expression must either be null or a function");ce.prototype=Object.create(Yt&&Yt.prototype,{constructor:{value:ce,writable:!0,configurable:!0}}),Object.defineProperty(ce,"prototype",{writable:!1}),Yt&&Ft(ce,Yt)}function Ft(ce,Yt){return Ft=Object.setPrototypeOf||function(Ie,xe){return Ie.__proto__=xe,Ie},Ft(ce,Yt)}function wt(ce){var Yt=it();return function(){var Ie=Tt(ce),xe;if(Yt){var Ye=Tt(this).constructor;xe=Reflect.construct(Ie,arguments,Ye)}else xe=Ie.apply(this,arguments);return St(this,xe)}}function St(ce,Yt){if(Yt&&(q(Yt)==="object"||typeof Yt=="function"))return Yt;if(Yt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return et(ce)}function et(ce){if(ce===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ce}function it(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ce){return!1}}function Tt(ce){return Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(ge){return ge.__proto__||Object.getPrototypeOf(ge)},Tt(ce)}var Nt=function(ce){dt(ge,ce);var Yt=wt(ge);function ge(){var Ie;$(this,ge);for(var xe=arguments.length,Ye=new Array(xe),gr=0;gr<xe;gr++)Ye[gr]=arguments[gr];return Ie=Yt.call.apply(Yt,[this].concat(Ye)),Ie.eventPool={},Ie}return ut(ge,[{key:"appendEvent",value:function(xe,Ye){this.eventPool[xe]||(this.eventPool[xe]=[]),this.eventPool[xe].push(Ye)}},{key:"removeEvent",value:function(xe,Ye){if(this.eventPool[xe]){var gr=this.eventPool[xe].indexOf(Ye);gr>-1&&this.eventPool[xe].splice(gr,1)}}},{key:"emitEvent",value:function(xe){for(var Ye=arguments.length,gr=new Array(Ye>1?Ye-1:0),Mr=1;Mr<Ye;Mr++)gr[Mr-1]=arguments[Mr];this.eventPool[xe]&&this.eventPool[xe].forEach(function(vn){vn.apply(void 0,gr)})}},{key:"setNode",value:function(xe,Ye){return nt(Tt(ge.prototype),"setNode",this).call(this,xe,Ye),this.emitEvent("nodeAdd",xe,Ye),this}},{key:"removeNode",value:function(xe){return nt(Tt(ge.prototype),"removeNode",this).call(this,xe),this.emitEvent("nodeRemove",xe),this}},{key:"setEdge",value:function(xe,Ye,gr,Mr){return nt(Tt(ge.prototype),"setEdge",this).call(this,xe,Ye,gr,Mr),this.emitEvent("edgeAdd",xe,Ye,gr,Mr),this}},{key:"removeEdge",value:function(xe,Ye,gr){return nt(Tt(ge.prototype),"removeEdge",this).call(this,xe,Ye,gr),this.emitEvent("edgeRemove",xe,Ye,gr),this}}]),ge}(V);function st(ce,Yt){for(var ge=0;ge<Yt.length;ge++){var Ie=Yt[ge];Ie.enumerable=Ie.enumerable||!1,Ie.configurable=!0,"value"in Ie&&(Ie.writable=!0),Object.defineProperty(ce,Ie.key,Ie)}}function xt(ce,Yt,ge){return Yt&&st(ce.prototype,Yt),ge&&st(ce,ge),Object.defineProperty(ce,"prototype",{writable:!1}),ce}function zt(ce,Yt){if(!(ce instanceof Yt))throw new TypeError("Cannot call a class as a function")}var Wt=xt(function ce(){var Yt=this;zt(this,ce),this.arr=[],this.keyIndice=new Map,this.size=function(){return Yt.arr.length},this.keys=function(){return Yt.arr.map(function(ge){return ge.key})},this.has=function(ge){return Yt.keyIndice.has(ge)},this.priority=function(ge){var Ie=Yt.keyIndice.get(ge);if(Ie!==void 0)return Yt.arr[Ie].priority},this.swap=function(ge,Ie){var xe=Yt.arr,Ye=Yt.keyIndice,gr=[xe[ge],xe[Ie]],Mr=gr[0],vn=gr[1];xe[ge]=vn,xe[Ie]=Mr,Ye.set(Mr.key,Ie),Ye.set(vn.key,ge)},this.innerDecrease=function(ge){for(var Ie=Yt.arr,xe=Ie[ge].priority,Ye,gr=ge;gr!==0;){var Mr;if(Ye=gr>>1,((Mr=Ie[Ye])===null||Mr===void 0?void 0:Mr.priority)<xe)break;Yt.swap(gr,Ye),gr=Ye}},this.heapify=function(ge){var Ie=Yt.arr,xe=ge<<1,Ye=xe+1,gr=ge;xe<Ie.length&&(gr=Ie[xe].priority<Ie[gr].priority?xe:gr,Ye<Ie.length&&(gr=Ie[Ye].priority<Ie[gr].priority?Ye:gr),gr!==ge&&(Yt.swap(ge,gr),Yt.heapify(gr)))},this.min=function(){if(Yt.size()===0)throw new Error("Queue underflow");return Yt.arr[0].key},this.add=function(ge,Ie){var xe=Yt.keyIndice,Ye=Yt.arr;if(!xe.has(ge)){var gr=Ye.length;return xe.set(ge,gr),Ye.push({key:ge,priority:Ie}),Yt.innerDecrease(gr),!0}return!1},this.removeMin=function(){Yt.swap(0,Yt.arr.length-1);var ge=Yt.arr.pop();return Yt.keyIndice.delete(ge.key),Yt.heapify(0),ge.key},this.decrease=function(ge,Ie){if(!Yt.has(ge))throw new Error("There's no key named ".concat(ge));var xe=Yt.keyIndice.get(ge);if(Ie>Yt.arr[xe].priority)throw new Error("New priority is greater than current priority.Key: ".concat(ge," Old: + ").concat(Yt.arr[xe].priority," New: ").concat(Ie));Yt.arr[xe].priority=Ie,Yt.innerDecrease(xe)}}),_t=function(Yt,ge){var Ie=new V,xe=new Map,Ye=new Wt,gr;function Mr(Sn){var ea=Sn.v===gr?Sn.w:Sn.v,wn=Ye.priority(ea);if(wn!==void 0){var Hn=ge(Sn);Hn<wn&&(xe.set(ea,gr),Ye.decrease(ea,Hn))}}if(Yt.nodeCount()===0)return Ie;Yt.nodes().forEach(function(Sn){Ye.add(Sn,Number.POSITIVE_INFINITY),Ie.setNode(Sn)}),Ye.decrease(Yt.nodes()[0],0);for(var vn=!1;Ye.size()>0;){var Wn;if(gr=Ye.removeMin(),xe.has(gr))Ie.setEdge(gr,xe.get(gr));else{if(vn)throw new Error("Input graph is not connected: "+Yt.graph());vn=!0}(Wn=Yt.nodeEdges(gr))===null||Wn===void 0||Wn.forEach(Mr)}return Ie},Xt=_t,te=function(Yt){var ge=new Set,Ie=[],xe=Yt.nodes();return xe.forEach(function(Ye){for(var gr=[],Mr=[Ye];Mr.length>0;){var vn=Mr.pop();if(!ge.has(vn)){var Wn,Sn;ge.add(vn),gr.push(vn),(Wn=Yt.successors(vn))===null||Wn===void 0||Wn.forEach(function(ea){return Mr.push(ea)}),(Sn=Yt.predecessors(vn))===null||Sn===void 0||Sn.forEach(function(ea){return Mr.push(ea)})}}gr.length&&Ie.push(gr)}),Ie},ue=te,fe=function ce(Yt,ge,Ie,xe,Ye,gr){xe.includes(ge)||(xe.push(ge),Ie||gr.push(ge),Ye(ge).forEach(function(Mr){return ce(Yt,Mr,Ie,xe,Ye,gr)}),Ie&&gr.push(ge))},Gt=function(Yt,ge,Ie){var xe=Array.isArray(ge)?ge:[ge],Ye=function(Wn){return Yt.isDirected()?Yt.successors(Wn):Yt.neighbors(Wn)},gr=[],Mr=[];return xe.forEach(function(vn){if(Yt.hasNode(vn))fe(Yt,vn,Ie==="post",Mr,Ye,gr);else throw new Error("Graph does not have node: "+vn)}),gr},ae=Gt;function Ne(ce,Yt){return ke(ce)||be(ce,Yt)||de(ce,Yt)||ee()}function ee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function de(ce,Yt){if(ce){if(typeof ce=="string")return ze(ce,Yt);var ge=Object.prototype.toString.call(ce).slice(8,-1);if(ge==="Object"&&ce.constructor&&(ge=ce.constructor.name),ge==="Map"||ge==="Set")return Array.from(ce);if(ge==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ge))return ze(ce,Yt)}}function ze(ce,Yt){(Yt==null||Yt>ce.length)&&(Yt=ce.length);for(var ge=0,Ie=new Array(Yt);ge<Yt;ge++)Ie[ge]=ce[ge];return Ie}function be(ce,Yt){var ge=ce==null?null:typeof Symbol!="undefined"&&ce[Symbol.iterator]||ce["@@iterator"];if(ge!=null){var Ie=[],xe=!0,Ye=!1,gr,Mr;try{for(ge=ge.call(ce);!(xe=(gr=ge.next()).done)&&(Ie.push(gr.value),!(Yt&&Ie.length===Yt));xe=!0);}catch(vn){Ye=!0,Mr=vn}finally{try{!xe&&ge.return!=null&&ge.return()}finally{if(Ye)throw Mr}}return Ie}}function ke(ce){if(Array.isArray(ce))return ce}var he=function(){return 1},vt=function(Yt,ge,Ie,xe){return ie(Yt,ge,Ie||he,xe||function(Ye){return Yt.outEdges(Ye)})},ie=function(Yt,ge,Ie,xe){var Ye=new Map,gr=new Wt,Mr,vn,Wn=function(wn){var Hn=wn.v!==Mr?wn.v:wn.w,la=Ye.get(Hn),ba=Ie(wn),xa=vn.distance+ba;if(ba<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+wn+" Weight: "+ba);xa<la.distance&&(la.distance=xa,la.predecessor=Mr,gr.decrease(Hn,xa))};for(Yt.nodes().forEach(function(ea){var wn=ea===ge?0:Number.POSITIVE_INFINITY;Ye.set(ea,{distance:wn}),gr.add(ea,wn)});gr.size()>0&&(Mr=gr.removeMin(),vn=Ye.get(Mr),!(vn&&vn.distance===Number.POSITIVE_INFINITY));)xe(Mr).forEach(Wn);var Sn={};return Array.from(Ye.entries()).forEach(function(ea){var wn=Ne(ea,2),Hn=wn[0],la=wn[1];return Sn[String(Hn)]=la,Sn}),Sn},Pe=vt,qe=function(Yt,ge,Ie){var xe={};return Yt.nodes().forEach(function(Ye){return xe[String(Ye)]=Pe(Yt,Ye,ge,Ie),xe}),xe},Qe=qe,lr=function(Yt){var ge=0,Ie=[],xe=new Map,Ye=[];function gr(Mr){var vn,Wn={onStack:!0,lowlink:ge,index:ge};if(xe.set(Mr,Wn),ge+=1,Ie.push(Mr),(vn=Yt.successors(Mr))===null||vn===void 0||vn.forEach(function(Hn){var la;if(xe.has(Hn)){if(!((la=xe.get(Hn))===null||la===void 0)&&la.onStack){var xa=xe.get(Hn);Wn.lowlink=Math.min(Wn.lowlink,xa.index)}}else{gr(Hn);var ba=xe.get(Hn);Wn.lowlink=Math.min(Wn.lowlink,ba.lowlink)}}),Wn.lowlink===Wn.index){var Sn=[],ea;do{ea=Ie.pop();var wn=xe.get(ea);wn.onStack=!1,Sn.push(ea)}while(Mr!==ea);Ye.push(Sn)}}return Yt.nodes().forEach(function(Mr){xe.has(Mr)||gr(Mr)}),Ye},fr=lr,kr=function(Yt){return fr(Yt).filter(function(ge){return ge.length>1||ge.length===1&&Yt.hasEdge(ge[0],ge[0])})},En=kr;function fn(ce){"@babel/helpers - typeof";return fn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Yt){return typeof Yt}:function(Yt){return Yt&&typeof Symbol=="function"&&Yt.constructor===Symbol&&Yt!==Symbol.prototype?"symbol":typeof Yt},fn(ce)}function Vr(ce,Yt){for(var ge=0;ge<Yt.length;ge++){var Ie=Yt[ge];Ie.enumerable=Ie.enumerable||!1,Ie.configurable=!0,"value"in Ie&&(Ie.writable=!0),Object.defineProperty(ce,Ie.key,Ie)}}function Je(ce,Yt,ge){return Yt&&Vr(ce.prototype,Yt),ge&&Vr(ce,ge),Object.defineProperty(ce,"prototype",{writable:!1}),ce}function dr(ce,Yt){if(!(ce instanceof Yt))throw new TypeError("Cannot call a class as a function")}function nr(ce,Yt){if(typeof Yt!="function"&&Yt!==null)throw new TypeError("Super expression must either be null or a function");ce.prototype=Object.create(Yt&&Yt.prototype,{constructor:{value:ce,writable:!0,configurable:!0}}),Object.defineProperty(ce,"prototype",{writable:!1}),Yt&&Fr(ce,Yt)}function oe(ce){var Yt=en();return function(){var Ie=Kr(ce),xe;if(Yt){var Ye=Kr(this).constructor;xe=Reflect.construct(Ie,arguments,Ye)}else xe=Ie.apply(this,arguments);return Te(this,xe)}}function Te(ce,Yt){if(Yt&&(fn(Yt)==="object"||typeof Yt=="function"))return Yt;if(Yt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lr(ce)}function Lr(ce){if(ce===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ce}function Nr(ce){var Yt=typeof Map=="function"?new Map:void 0;return Nr=function(Ie){if(Ie===null||!Dr(Ie))return Ie;if(typeof Ie!="function")throw new TypeError("Super expression must either be null or a function");if(typeof Yt!="undefined"){if(Yt.has(Ie))return Yt.get(Ie);Yt.set(Ie,xe)}function xe(){return ln(Ie,arguments,Kr(this).constructor)}return xe.prototype=Object.create(Ie.prototype,{constructor:{value:xe,enumerable:!1,writable:!0,configurable:!0}}),Fr(xe,Ie)},Nr(ce)}function ln(ce,Yt,ge){return en()?ln=Reflect.construct:ln=function(xe,Ye,gr){var Mr=[null];Mr.push.apply(Mr,Ye);var vn=Function.bind.apply(xe,Mr),Wn=new vn;return gr&&Fr(Wn,gr.prototype),Wn},ln.apply(null,arguments)}function en(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ce){return!1}}function Dr(ce){return Function.toString.call(ce).indexOf("[native code]")!==-1}function Fr(ce,Yt){return Fr=Object.setPrototypeOf||function(Ie,xe){return Ie.__proto__=xe,Ie},Fr(ce,Yt)}function Kr(ce){return Kr=Object.setPrototypeOf?Object.getPrototypeOf:function(ge){return ge.__proto__||Object.getPrototypeOf(ge)},Kr(ce)}var an=function(ce){nr(ge,ce);var Yt=oe(ge);function ge(){return dr(this,ge),Yt.apply(this,arguments)}return Je(ge)}(Nr(Error));function yn(ce){var Yt=new Set,ge=new Set,Ie=[];function xe(Ye){if(ge.has(Ye))throw new an;if(!Yt.has(Ye)){var gr;ge.add(Ye),Yt.add(Ye),(gr=ce.predecessors(Ye))===null||gr===void 0||gr.forEach(xe),ge.delete(Ye),Ie.push(Ye)}}if(ce.sinks().forEach(xe),Yt.size!==ce.nodeCount())throw new an;return Ie}var bn=yn,tt=function(Yt){try{bn(Yt)}catch(ge){if(ge instanceof an)return!1;throw ge}return!0},tr=tt,Kt=function(Yt,ge){return ae(Yt,ge,"post")},$t=Kt,Et=function(Yt,ge){return ae(Yt,ge,"pre")},we=Et,Dt=function(){return 1};function Vt(ce,Yt,ge){return ht(ce,Yt||Dt,ge||function(Ie){return ce.outEdges(Ie)})}function ht(ce,Yt,ge){var Ie={},xe=ce.nodes();return xe.forEach(function(Ye){var gr=String(Ye);Ie[gr]={},Ie[gr][gr]={distance:0},xe.forEach(function(Mr){Ye!==Mr&&(Ie[gr][String(Mr)]={distance:Number.POSITIVE_INFINITY})}),ge(Ye).forEach(function(Mr){var vn=Mr.v===Ye?Mr.w:Mr.v,Wn=Yt(Mr);Ie[gr][String(vn)]={distance:Wn,predecessor:Ye}})}),xe.forEach(function(Ye){var gr=String(Ye),Mr=Ie[gr];xe.forEach(function(vn){var Wn=String(vn),Sn=Ie[Wn];xe.forEach(function(ea){var wn=String(ea),Hn=Sn[gr],la=Mr[wn],ba=Sn[wn],xa=Hn.distance+la.distance;xa<ba.distance&&(ba.distance=xa,ba.predecessor=la.predecessor)})})}),Ie}var kt=Vt,Q=function(Yt,ge){for(var Ie=Yt.nodes(),xe=0;xe<Ie.length;xe++){var Ye=Ie[xe];if(ge.hasNode(Ye))return!0}return!1},at=function(Yt,ge){for(var Ie=Yt.edges(),xe=0;xe<Ie.length;xe++){var Ye=Ie[xe];if(ge.hasEdge(Ye.v,Ye.w,Ye.name))return!0}return!1},B=function(Yt,ge){var Ie=Yt.nodes(),xe=Ie.filter(function(Ye){return ge.hasNode(Ye)});return xe},C=function(Yt,ge){var Ie=Yt.edges(),xe=Ie.filter(function(Ye){return ge.hasEdge(Ye.v,Ye.w,Ye.name)});return xe},I=function(Yt,ge){return Yt.isCompound()===ge.isCompound()&&Yt.isDirected()===ge.isDirected()&&Yt.isMultigraph()===ge.isMultigraph()},H=function(Yt,ge){var Ie=B(Yt,ge);return Ie.length===Yt.nodes().length},mt=function(Yt,ge){var Ie=C(Yt,ge);return Ie.length===Yt.edges().length},Pt=function(Yt,ge){return I(Yt,ge)&&Yt.nodeCount()===ge.nodeCount()&&H(Yt,ge)&&Yt.edgeCount()===ge.edgeCount()&&mt(Yt,ge)},Lt=function(Yt,ge){return H(Yt,ge)&&mt(Yt,ge)};function Jt(ce,Yt){return er(ce)||wr(ce,Yt)||ye(ce,Yt)||Oe()}function Oe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ye(ce,Yt){if(ce){if(typeof ce=="string")return Ze(ce,Yt);var ge=Object.prototype.toString.call(ce).slice(8,-1);if(ge==="Object"&&ce.constructor&&(ge=ce.constructor.name),ge==="Map"||ge==="Set")return Array.from(ce);if(ge==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ge))return Ze(ce,Yt)}}function Ze(ce,Yt){(Yt==null||Yt>ce.length)&&(Yt=ce.length);for(var ge=0,Ie=new Array(Yt);ge<Yt;ge++)Ie[ge]=ce[ge];return Ie}function wr(ce,Yt){var ge=ce==null?null:typeof Symbol!="undefined"&&ce[Symbol.iterator]||ce["@@iterator"];if(ge!=null){var Ie=[],xe=!0,Ye=!1,gr,Mr;try{for(ge=ge.call(ce);!(xe=(gr=ge.next()).done)&&(Ie.push(gr.value),!(Yt&&Ie.length===Yt));xe=!0);}catch(vn){Ye=!0,Mr=vn}finally{try{!xe&&ge.return!=null&&ge.return()}finally{if(Ye)throw Mr}}return Ie}}function er(ce){if(Array.isArray(ce))return ce}function Ur(ce){return ce instanceof V}function xn(ce){if(ce.isMultigraph())return!1;for(var Yt=ce.edges(),ge=new Map,Ie=0;Ie<Yt.length;Ie++){var xe=Yt[Ie];if(xe.v===xe.w)return!1;var Ye=[xe.v,xe.w].sort(),gr=Jt(Ye,2),Mr=gr[0],vn=gr[1],Wn="".concat(Mr,"-").concat(vn);if(ge.has(Wn))return!1;ge.set(Wn,!0)}return!0}function rr(ce){return ce.nodes().length===0}function xr(ce){for(var Yt=ce.edges(),ge=0;ge<Yt.length;ge++){var Ie=Yt[ge];if(Ie.v===Ie.w)return!0}return!1}var Wr=function(Yt,ge){if(!xn(Yt)||!xn(ge)||!H(Yt,ge)||at(Yt,ge))return!1;var Ie=Yt.nodeCount();return Yt.edgeCount()+ge.edgeCount()===Ie*(Ie-1)/2},Gr=function(Yt){if(!xn(Yt))return null;for(var ge=Yt.nodeCount(),Ie=new V({compound:Yt.isCompound(),directed:Yt.isDirected(),multigraph:Yt.isMultigraph()}),xe=Yt.nodes(),Ye=0;Ye<ge;Ye++){var gr=xe[Ye];Ie.setNode(gr,Yt.node(gr));for(var Mr=Ye+1;Mr<ge;Mr++){var vn=xe[Mr];Yt.hasEdge(gr,vn)||Ie.setEdge(gr,vn)}}return Ie}},981746:function(We){(function(_,m){We.exports=m()})(typeof self!="undefined"?self:this,function(){return function(G){var _={};function m(R){if(_[R])return _[R].exports;var w=_[R]={i:R,l:!1,exports:{}};return G[R].call(w.exports,w,w.exports,m),w.l=!0,w.exports}return m.m=G,m.c=_,m.d=function(R,w,M){m.o(R,w)||Object.defineProperty(R,w,{configurable:!1,enumerable:!0,get:M})},m.n=function(R){var w=R&&R.__esModule?function(){return R.default}:function(){return R};return m.d(w,"a",w),w},m.o=function(R,w){return Object.prototype.hasOwnProperty.call(R,w)},m.p="",m(m.s=36)}([function(G,_,m){"use strict";var R=m(3);_.a=function(w){return Array.isArray?Array.isArray(w):Object(R.a)(w,"Array")}},function(G,_,m){"use strict";var R=function(w){return w!==null&&typeof w!="function"&&isFinite(w.length)};_.a=R},function(G,_,m){"use strict";var R=m(3);_.a=function(w){return Object(R.a)(w,"Function")}},function(G,_,m){"use strict";var R={}.toString,w=function(M,P){return R.call(M)==="[object "+P+"]"};_.a=w},function(G,_,m){"use strict";var R=m(3);_.a=function(w){return Object(R.a)(w,"String")}},function(G,_,m){"use strict";var R=m(3),w=function(M){return Object(R.a)(M,"Number")};_.a=w},function(G,_,m){var R=m(38),w=R.mix;function M(P,L,p,b){return b===void 0&&(b="height"),p==="center"?(P[b]+L[b])/2:P.height}G.exports={assign:w,getHeight:M}},function(G,_,m){"use strict";var R=function(w){return w==null};_.a=R},function(G,_,m){"use strict";var R=m(0),w=m(12);function M(P,L){if(P){var p;if(Object(R.a)(P))for(var b=0,S=P.length;b<S&&(p=L(P[b],b),p!==!1);b++);else if(Object(w.a)(P)){for(var x in P)if(P.hasOwnProperty(x)&&(p=L(P[x],x),p===!1))break}}}_.a=M},function(G,_,m){"use strict";var R=m(7);_.a=function(w){return Object(R.a)(w)?"":w.toString()}},function(G,_,m){"use strict";var R=m(14),w=m(3),M=function(P){if(!Object(R.a)(P)||!Object(w.a)(P,"Object"))return!1;if(Object.getPrototypeOf(P)===null)return!0;for(var L=P;Object.getPrototypeOf(L)!==null;)L=Object.getPrototypeOf(L);return Object.getPrototypeOf(P)===L};_.a=M},function(G,_,m){var R=m(18),w=function(){function M(L,p){p===void 0&&(p={});var b=this;b.options=p,b.rootNode=R(L,p)}var P=M.prototype;return P.execute=function(){throw new Error("please override this method")},M}();G.exports=w},function(G,_,m){"use strict";_.a=function(R){var w=typeof R;return R!==null&&w==="object"||w==="function"}},function(G,_,m){"use strict";var R=m(1),w=function(M,P){return Object(R.a)(M)?M.indexOf(P)>-1:!1};_.a=w},function(G,_,m){"use strict";var R=function(w){return typeof w=="object"&&w!==null};_.a=R},function(G,_,m){"use strict";var R=m(8),w=m(2),M=Object.values?function(P){return Object.values(P)}:function(P){var L=[];return Object(R.a)(P,function(p,b){Object(w.a)(P)&&b==="prototype"||L.push(p)}),L};_.a=M},function(G,_,m){"use strict";_.a=w;function R(M,P){for(var L in P)P.hasOwnProperty(L)&&L!=="constructor"&&P[L]!==void 0&&(M[L]=P[L])}function w(M,P,L,p){return P&&R(M,P),L&&R(M,L),p&&R(M,p),M}},function(G,_,m){var R=m(35),w=["LR","RL","TB","BT","H","V"],M=["LR","RL","H"],P=function(b){return M.indexOf(b)>-1},L=w[0];G.exports=function(p,b,S){var x=b.direction||L;if(b.isHorizontal=P(x),x&&w.indexOf(x)===-1)throw new TypeError("Invalid direction: "+x);if(x===w[0])S(p,b);else if(x===w[1])S(p,b),p.right2left();else if(x===w[2])S(p,b);else if(x===w[3])S(p,b),p.bottom2top();else if(x===w[4]||x===w[5]){var g=R(p,b),T=g.left,E=g.right;S(T,b),S(E,b),b.isHorizontal?T.right2left():T.bottom2top(),E.translate(T.x-E.x,T.y-E.y),p.x=T.x,p.y=E.y;var O=p.getBoundingBox();b.isHorizontal?O.top<0&&p.translate(0,-O.top):O.left<0&&p.translate(-O.left,0)}var k=b.fixedRoot;return k===void 0&&(k=!0),k&&p.translate(-(p.x+p.width/2+p.hgap),-(p.y+p.height/2+p.vgap)),p}},function(G,_,m){var R=m(6),w=18,M=w*2,P=w,L={getId:function(x){return x.id||x.name},getPreH:function(x){return x.preH||0},getPreV:function(x){return x.preV||0},getHGap:function(x){return x.hgap||P},getVGap:function(x){return x.vgap||P},getChildren:function(x){return x.children},getHeight:function(x){return x.height||M},getWidth:function(x){var g=x.label||" ";return x.width||g.split("").length*w}};function p(S,x){var g=this;if(g.vgap=g.hgap=0,S instanceof p)return S;g.data=S;var T=x.getHGap(S),E=x.getVGap(S);return g.preH=x.getPreH(S),g.preV=x.getPreV(S),g.width=x.getWidth(S),g.height=x.getHeight(S),g.width+=g.preH,g.height+=g.preV,g.id=x.getId(S),g.x=g.y=0,g.depth=0,g.children||(g.children=[]),g.addGap(T,E),g}R.assign(p.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(x,g){var T=this;T.hgap+=x,T.vgap+=g,T.width+=2*x,T.height+=2*g},eachNode:function(x){for(var g=this,T=[g],E;E=T.shift();)x(E),T=E.children.concat(T)},DFTraverse:function(x){this.eachNode(x)},BFTraverse:function(x){for(var g=this,T=[g],E;E=T.shift();)x(E),T=T.concat(E.children)},getBoundingBox:function(){var x={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(g){x.left=Math.min(x.left,g.x),x.top=Math.min(x.top,g.y),x.width=Math.max(x.width,g.x+g.width),x.height=Math.max(x.height,g.y+g.height)}),x},translate:function(x,g){x===void 0&&(x=0),g===void 0&&(g=0),this.eachNode(function(T){T.x+=x,T.y+=g,T.x+=T.preH,T.y+=T.preV})},right2left:function(){var x=this,g=x.getBoundingBox();x.eachNode(function(T){T.x=T.x-(T.x-g.left)*2-T.width}),x.translate(g.width,0)},bottom2top:function(){var x=this,g=x.getBoundingBox();x.eachNode(function(T){T.y=T.y-(T.y-g.top)*2-T.height}),x.translate(0,g.height)}});function b(S,x,g){x===void 0&&(x={}),x=R.assign({},L,x);var T=new p(S,x),E=[T],O;if(!g&&!S.collapsed){for(;O=E.shift();)if(!O.data.collapsed){var k=x.getChildren(O.data),y=k?k.length:0;if(O.children=new Array(y),k&&y)for(var l=0;l<y;l++){var U=new p(k[l],x);O.children[l]=U,E.push(U),U.parent=O,U.depth=O.depth+1}}}return T}G.exports=b},function(G,_,m){"use strict";var R=m(1),w=function(M,P){if(!Object(R.a)(M))return M;for(var L=[],p=0;p<M.length;p++){var b=M[p];P(b,p)&&L.push(b)}return L};_.a=w},function(G,_,m){"use strict";var R=m(7),w=m(21);function M(P,L){var p=Object(w.a)(L),b=p.length;if(Object(R.a)(P))return!b;for(var S=0;S<b;S+=1){var x=p[S];if(L[x]!==P[x]||!(x in P))return!1}return!0}_.a=M},function(G,_,m){"use strict";var R=m(8),w=m(2),M=Object.keys?function(P){return Object.keys(P)}:function(P){var L=[];return Object(R.a)(P,function(p,b){Object(w.a)(P)&&b==="prototype"||L.push(b)}),L};_.a=M},function(G,_,m){"use strict";var R=m(0);_.a=function(w){if(Object(R.a)(w))return w.reduce(function(M,P){return Math.max(M,P)},w[0])}},function(G,_,m){"use strict";var R=m(0);_.a=function(w){if(Object(R.a)(w))return w.reduce(function(M,P){return Math.min(M,P)},w[0])}},function(G,_,m){"use strict";var R=m(1),w=Array.prototype.splice,M=function(L,p){if(!Object(R.a)(L))return[];for(var b=L?p.length:0,S=b-1;b--;){var x=void 0,g=p[b];(b===S||g!==x)&&(x=g,w.call(L,g,1))}return L};_.a=M},function(G,_,m){"use strict";var R=m(8),w=m(0),M=m(10),P=function(L,p,b){if(!Object(w.a)(L)&&!Object(M.a)(L))return L;var S=b;return Object(R.a)(L,function(x,g){S=p(S,x,g)}),S};_.a=P},function(G,_,m){"use strict";_.a=R;function R(w,M){M===void 0&&(M=new Map);var P=[];if(Array.isArray(w))for(var L=0,p=w.length;L<p;L++){var b=w[L];M.has(b)||(P.push(b),M.set(b,!0))}return P}},function(G,_,m){"use strict";_.a=P;var R=m(0),w=m(2),M=m(28);function P(L,p){if(!p)return{0:L};if(!Object(w.a)(p)){var b=Object(R.a)(p)?p:p.replace(/\s+/g,"").split("*");p=function(S){for(var x="_",g=0,T=b.length;g<T;g++)x+=S[b[g]]&&S[b[g]].toString();return x}}return Object(M.a)(L,p)}},function(G,_,m){"use strict";var R=m(0),w=m(2),M=Object.prototype.hasOwnProperty;function P(L,p){if(!p||!Object(R.a)(L))return{};for(var b={},S=Object(w.a)(p)?p:function(E){return E[p]},x,g=0;g<L.length;g++){var T=L[g];x=S(T),M.call(b,x)?b[x].push(T):b[x]=[T]}return b}_.a=P},function(G,_,m){"use strict";_.a=function(R,w){return R.hasOwnProperty(w)}},function(G,_,m){"use strict";var R={}.toString,w=function(M){return R.call(M).replace(/^\[object /,"").replace(/]$/,"")};_.a=w},function(G,_,m){"use strict";var R=Object.prototype,w=function(M){var P=M&&M.constructor,L=typeof P=="function"&&P.prototype||R;return M===L};_.a=w},function(G,_,m){"use strict";var R=m(2);_.a=function(w,M){if(!Object(R.a)(w))throw new TypeError("Expected a function");var P=function(){for(var L=[],p=0;p<arguments.length;p++)L[p]=arguments[p];var b=M?M.apply(this,L):L[0],S=P.cache;if(S.has(b))return S.get(b);var x=w.apply(this,L);return S.set(b,x),x};return P.cache=new Map,P}},function(G,_,m){"use strict";var R=m(14),w=m(1),M=m(4),P=function(L,p){if(L===p)return!0;if(!L||!p||Object(M.a)(L)||Object(M.a)(p))return!1;if(Object(w.a)(L)||Object(w.a)(p)){if(L.length!==p.length)return!1;for(var b=!0,S=0;S<L.length&&(b=P(L[S],p[S]),!!b);S++);return b}if(Object(R.a)(L)||Object(R.a)(p)){var x=Object.keys(L),g=Object.keys(p);if(x.length!==g.length)return!1;for(var b=!0,S=0;S<x.length&&(b=P(L[x[S]],p[x[S]]),!!b);S++);return b}return!1};_.a=P},function(G,_,m){"use strict";var R=m(116),w=m(15),M=m(32),P=m(4),L;_.a=Object(M.a)(function(p,b){b===void 0&&(b={});var S=b.fontSize,x=b.fontFamily,g=b.fontWeight,T=b.fontStyle,E=b.fontVariant;return L||(L=document.createElement("canvas").getContext("2d")),L.font=[T,E,g,S+"px",x].join(" "),L.measureText(Object(P.a)(p)?p:"").width},function(p,b){return b===void 0&&(b={}),Object(R.a)([p],Object(w.a)(b)).join("")})},function(G,_,m){var R=m(18);G.exports=function(w,M){for(var P=R(w.data,M,!0),L=R(w.data,M,!0),p=w.children.length,b=Math.round(p/2),S=M.getSide||function(E,O){return O<b?"right":"left"},x=0;x<p;x++){var g=w.children[x],T=S(g,x);T==="right"?L.children.push(g):P.children.push(g)}return P.eachNode(function(E){E.isRoot()||(E.side="left")}),L.eachNode(function(E){E.isRoot()||(E.side="right")}),{left:P,right:L}}},function(G,_,m){var R={compactBox:m(37),dendrogram:m(120),indented:m(122),mindmap:m(124)};G.exports=R},function(G,_,m){function R(g,T){g.prototype=Object.create(T.prototype),g.prototype.constructor=g,w(g,T)}function w(g,T){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(O,k){return O.__proto__=k,O},w(g,T)}var M=m(11),P=m(119),L=m(17),p=m(6),b=function(g){R(T,g);function T(){return g.apply(this,arguments)||this}var E=T.prototype;return E.execute=function(){var k=this;return L(k.rootNode,k.options,P)},T}(M),S={};function x(g,T){return T=p.assign({},S,T),new b(g,T).execute()}G.exports=x},function(G,_,m){"use strict";Object.defineProperty(_,"__esModule",{value:!0});var R=m(13);m.d(_,"contains",function(){return R.a}),m.d(_,"includes",function(){return R.a});var w=m(39);m.d(_,"difference",function(){return w.a});var M=m(40);m.d(_,"find",function(){return M.a});var P=m(41);m.d(_,"findIndex",function(){return P.a});var L=m(42);m.d(_,"firstValue",function(){return L.a});var p=m(43);m.d(_,"flatten",function(){return p.a});var b=m(44);m.d(_,"flattenDeep",function(){return b.a});var S=m(45);m.d(_,"getRange",function(){return S.a});var x=m(46);m.d(_,"pull",function(){return x.a});var g=m(24);m.d(_,"pullAt",function(){return g.a});var T=m(25);m.d(_,"reduce",function(){return T.a});var E=m(47);m.d(_,"remove",function(){return E.a});var O=m(48);m.d(_,"sortBy",function(){return O.a});var k=m(49);m.d(_,"union",function(){return k.a});var y=m(26);m.d(_,"uniq",function(){return y.a});var l=m(50);m.d(_,"valuesOfKey",function(){return l.a});var U=m(51);m.d(_,"head",function(){return U.a});var X=m(52);m.d(_,"last",function(){return X.a});var F=m(53);m.d(_,"startsWith",function(){return F.a});var W=m(54);m.d(_,"endsWith",function(){return W.a});var j=m(19);m.d(_,"filter",function(){return j.a});var V=m(55);m.d(_,"every",function(){return V.a});var q=m(56);m.d(_,"some",function(){return q.a});var $=m(57);m.d(_,"group",function(){return $.a});var J=m(28);m.d(_,"groupBy",function(){return J.a});var ut=m(27);m.d(_,"groupToMap",function(){return ut.a});var nt=m(58);m.d(_,"getWrapBehavior",function(){return nt.a});var yt=m(59);m.d(_,"wrapBehavior",function(){return yt.a});var dt=m(60);m.d(_,"number2color",function(){return dt.a});var Ft=m(61);m.d(_,"parseRadius",function(){return Ft.a});var wt=m(62);m.d(_,"clamp",function(){return wt.a});var St=m(63);m.d(_,"fixedBase",function(){return St.a});var et=m(64);m.d(_,"isDecimal",function(){return et.a});var it=m(65);m.d(_,"isEven",function(){return it.a});var Tt=m(66);m.d(_,"isInteger",function(){return Tt.a});var Nt=m(67);m.d(_,"isNegative",function(){return Nt.a});var st=m(68);m.d(_,"isNumberEqual",function(){return st.a});var xt=m(69);m.d(_,"isOdd",function(){return xt.a});var zt=m(70);m.d(_,"isPositive",function(){return zt.a});var Wt=m(22);m.d(_,"max",function(){return Wt.a});var _t=m(71);m.d(_,"maxBy",function(){return _t.a});var Xt=m(23);m.d(_,"min",function(){return Xt.a});var te=m(72);m.d(_,"minBy",function(){return te.a});var ue=m(73);m.d(_,"mod",function(){return ue.a});var fe=m(74);m.d(_,"toDegree",function(){return fe.a});var Gt=m(75);m.d(_,"toInteger",function(){return Gt.a});var ae=m(76);m.d(_,"toRadian",function(){return ae.a});var Ne=m(77);m.d(_,"forIn",function(){return Ne.a});var ee=m(29);m.d(_,"has",function(){return ee.a});var de=m(78);m.d(_,"hasKey",function(){return de.a});var ze=m(79);m.d(_,"hasValue",function(){return ze.a});var be=m(21);m.d(_,"keys",function(){return be.a});var ke=m(20);m.d(_,"isMatch",function(){return ke.a});var he=m(15);m.d(_,"values",function(){return he.a});var vt=m(80);m.d(_,"lowerCase",function(){return vt.a});var ie=m(81);m.d(_,"lowerFirst",function(){return ie.a});var Pe=m(82);m.d(_,"substitute",function(){return Pe.a});var qe=m(83);m.d(_,"upperCase",function(){return qe.a});var Qe=m(84);m.d(_,"upperFirst",function(){return Qe.a});var lr=m(30);m.d(_,"getType",function(){return lr.a});var fr=m(85);m.d(_,"isArguments",function(){return fr.a});var kr=m(0);m.d(_,"isArray",function(){return kr.a});var En=m(1);m.d(_,"isArrayLike",function(){return En.a});var fn=m(86);m.d(_,"isBoolean",function(){return fn.a});var Vr=m(87);m.d(_,"isDate",function(){return Vr.a});var Je=m(88);m.d(_,"isError",function(){return Je.a});var dr=m(2);m.d(_,"isFunction",function(){return dr.a});var nr=m(89);m.d(_,"isFinite",function(){return nr.a});var oe=m(7);m.d(_,"isNil",function(){return oe.a});var Te=m(90);m.d(_,"isNull",function(){return Te.a});var Lr=m(5);m.d(_,"isNumber",function(){return Lr.a});var Nr=m(12);m.d(_,"isObject",function(){return Nr.a});var ln=m(14);m.d(_,"isObjectLike",function(){return ln.a});var en=m(10);m.d(_,"isPlainObject",function(){return en.a});var Dr=m(31);m.d(_,"isPrototype",function(){return Dr.a});var Fr=m(91);m.d(_,"isRegExp",function(){return Fr.a});var Kr=m(4);m.d(_,"isString",function(){return Kr.a});var an=m(3);m.d(_,"isType",function(){return an.a});var yn=m(92);m.d(_,"isUndefined",function(){return yn.a});var bn=m(93);m.d(_,"isElement",function(){return bn.a});var tt=m(94);m.d(_,"requestAnimationFrame",function(){return tt.a});var tr=m(95);m.d(_,"clearAnimationFrame",function(){return tr.a});var Kt=m(96);m.d(_,"augment",function(){return Kt.a});var $t=m(97);m.d(_,"clone",function(){return $t.a});var Et=m(98);m.d(_,"debounce",function(){return Et.a});var we=m(32);m.d(_,"memoize",function(){return we.a});var Dt=m(99);m.d(_,"deepMix",function(){return Dt.a});var Vt=m(8);m.d(_,"each",function(){return Vt.a});var ht=m(100);m.d(_,"extend",function(){return ht.a});var kt=m(101);m.d(_,"indexOf",function(){return kt.a});var Q=m(102);m.d(_,"isEmpty",function(){return Q.a});var at=m(33);m.d(_,"isEqual",function(){return at.a});var B=m(103);m.d(_,"isEqualWith",function(){return B.a});var C=m(104);m.d(_,"map",function(){return C.a});var I=m(105);m.d(_,"mapValues",function(){return I.a});var H=m(16);m.d(_,"mix",function(){return H.a}),m.d(_,"assign",function(){return H.a});var mt=m(106);m.d(_,"get",function(){return mt.a});var Pt=m(107);m.d(_,"set",function(){return Pt.a});var Lt=m(108);m.d(_,"pick",function(){return Lt.a});var Jt=m(109);m.d(_,"omit",function(){return Jt.a});var Oe=m(110);m.d(_,"throttle",function(){return Oe.a});var ye=m(111);m.d(_,"toArray",function(){return ye.a});var Ze=m(9);m.d(_,"toString",function(){return Ze.a});var wr=m(112);m.d(_,"uniqueId",function(){return wr.a});var er=m(113);m.d(_,"noop",function(){return er.a});var Ur=m(114);m.d(_,"identity",function(){return Ur.a});var xn=m(115);m.d(_,"size",function(){return xn.a});var rr=m(34);m.d(_,"measureTextWidth",function(){return rr.a});var xr=m(117);m.d(_,"getEllipsisText",function(){return xr.a});var Wr=m(118);m.d(_,"Cache",function(){return Wr.a})},function(G,_,m){"use strict";var R=m(19),w=m(13),M=function(P,L){return L===void 0&&(L=[]),Object(R.a)(P,function(p){return!Object(w.a)(L,p)})};_.a=M},function(G,_,m){"use strict";var R=m(2),w=m(20),M=m(0),P=m(10);function L(p,b){if(!Object(M.a)(p))return null;var S;if(Object(R.a)(b)&&(S=b),Object(P.a)(b)&&(S=function(g){return Object(w.a)(g,b)}),S){for(var x=0;x<p.length;x+=1)if(S(p[x]))return p[x]}return null}_.a=L},function(G,_,m){"use strict";function R(w,M,P){P===void 0&&(P=0);for(var L=P;L<w.length;L++)if(M(w[L],L))return L;return-1}_.a=R},function(G,_,m){"use strict";var R=m(7),w=m(0),M=function(P,L){for(var p=null,b=0;b<P.length;b++){var S=P[b],x=S[L];if(!Object(R.a)(x)){Object(w.a)(x)?p=x[0]:p=x;break}}return p};_.a=M},function(G,_,m){"use strict";var R=m(0),w=function(M){if(!Object(R.a)(M))return[];for(var P=[],L=0;L<M.length;L++)P=P.concat(M[L]);return P};_.a=w},function(G,_,m){"use strict";var R=m(0),w=function(M,P){if(P===void 0&&(P=[]),!Object(R.a)(M))P.push(M);else for(var L=0;L<M.length;L+=1)w(M[L],P);return P};_.a=w},function(G,_,m){"use strict";var R=m(0),w=m(22),M=m(23),P=function(L){var p=L.filter(function(T){return!isNaN(T)});if(!p.length)return{min:0,max:0};if(Object(R.a)(L[0])){for(var b=[],S=0;S<L.length;S++)b=b.concat(L[S]);p=b}var x=Object(w.a)(p),g=Object(M.a)(p);return{min:g,max:x}};_.a=P},function(G,_,m){"use strict";var R=Array.prototype,w=R.splice,M=R.indexOf,P=function(L){for(var p=[],b=1;b<arguments.length;b++)p[b-1]=arguments[b];for(var S=0;S<p.length;S++)for(var x=p[S],g=-1;(g=M.call(L,x))>-1;)w.call(L,g,1);return L};_.a=P},function(G,_,m){"use strict";var R=m(1),w=m(24),M=function(P,L){var p=[];if(!Object(R.a)(P))return p;for(var b=-1,S=[],x=P.length;++b<x;){var g=P[b];L(g,b,P)&&(p.push(g),S.push(b))}return Object(w.a)(P,S),p};_.a=M},function(G,_,m){"use strict";var R=m(0),w=m(4),M=m(2);function P(L,p){var b;if(Object(M.a)(p))b=function(x,g){return p(x)-p(g)};else{var S=[];Object(w.a)(p)?S.push(p):Object(R.a)(p)&&(S=p),b=function(x,g){for(var T=0;T<S.length;T+=1){var E=S[T];if(x[E]>g[E])return 1;if(x[E]<g[E])return-1}return 0}}return L.sort(b),L}_.a=P},function(G,_,m){"use strict";var R=m(26),w=function(){for(var M=[],P=0;P<arguments.length;P++)M[P]=arguments[P];return Object(R.a)([].concat.apply([],M))};_.a=w},function(G,_,m){"use strict";var R=m(0),w=m(7);_.a=function(M,P){for(var L=[],p={},b=0;b<M.length;b++){var S=M[b],x=S[P];if(!Object(w.a)(x)){Object(R.a)(x)||(x=[x]);for(var g=0;g<x.length;g++){var T=x[g];p[T]||(L.push(T),p[T]=!0)}}}return L}},function(G,_,m){"use strict";_.a=w;var R=m(1);function w(M){if(Object(R.a)(M))return M[0]}},function(G,_,m){"use strict";_.a=w;var R=m(1);function w(M){if(Object(R.a)(M)){var P=M;return P[P.length-1]}}},function(G,_,m){"use strict";var R=m(0),w=m(4);function M(P,L){return Object(R.a)(P)||Object(w.a)(P)?P[0]===L:!1}_.a=M},function(G,_,m){"use strict";var R=m(0),w=m(4);function M(P,L){return Object(R.a)(P)||Object(w.a)(P)?P[P.length-1]===L:!1}_.a=M},function(G,_,m){"use strict";var R=function(w,M){for(var P=0;P<w.length;P++)if(!M(w[P],P))return!1;return!0};_.a=R},function(G,_,m){"use strict";var R=function(w,M){for(var P=0;P<w.length;P++)if(M(w[P],P))return!0;return!1};_.a=R},function(G,_,m){"use strict";var R=m(27);_.a=function(w,M){if(!M)return[w];var P=Object(R.a)(w,M),L=[];for(var p in P)L.push(P[p]);return L}},function(G,_,m){"use strict";function R(w,M){return w["_wrap_"+M]}_.a=R},function(G,_,m){"use strict";function R(w,M){if(w["_wrap_"+M])return w["_wrap_"+M];var P=function(L){w[M](L)};return w["_wrap_"+M]=P,P}_.a=R},function(G,_,m){"use strict";var R={};function w(M){var P=R[M];if(!P){for(var L=M.toString(16),p=L.length;p<6;p++)L="0"+L;P="#"+L,R[M]=P}return P}_.a=w},function(G,_,m){"use strict";var R=m(0);function w(M){var P=0,L=0,p=0,b=0;return Object(R.a)(M)?M.length===1?P=L=p=b=M[0]:M.length===2?(P=p=M[0],L=b=M[1]):M.length===3?(P=M[0],L=b=M[1],p=M[2]):(P=M[0],L=M[1],p=M[2],b=M[3]):P=L=p=b=M,{r1:P,r2:L,r3:p,r4:b}}_.a=w},function(G,_,m){"use strict";var R=function(w,M,P){return w<M?M:w>P?P:w};_.a=R},function(G,_,m){"use strict";var R=function(w,M){var P=M.toString(),L=P.indexOf(".");if(L===-1)return Math.round(w);var p=P.substr(L+1).length;return p>20&&(p=20),parseFloat(w.toFixed(p))};_.a=R},function(G,_,m){"use strict";var R=m(5),w=function(M){return Object(R.a)(M)&&M%1!==0};_.a=w},function(G,_,m){"use strict";var R=m(5),w=function(M){return Object(R.a)(M)&&M%2===0};_.a=w},function(G,_,m){"use strict";var R=m(5),w=Number.isInteger?Number.isInteger:function(M){return Object(R.a)(M)&&M%1===0};_.a=w},function(G,_,m){"use strict";var R=m(5),w=function(M){return Object(R.a)(M)&&M<0};_.a=w},function(G,_,m){"use strict";_.a=w;var R=1e-5;function w(M,P,L){return L===void 0&&(L=R),Math.abs(M-P)<L}},function(G,_,m){"use strict";var R=m(5),w=function(M){return Object(R.a)(M)&&M%2!==0};_.a=w},function(G,_,m){"use strict";var R=m(5),w=function(M){return Object(R.a)(M)&&M>0};_.a=w},function(G,_,m){"use strict";var R=m(0),w=m(2);_.a=function(M,P){if(Object(R.a)(M)){for(var L,p=-1/0,b=0;b<M.length;b++){var S=M[b],x=Object(w.a)(P)?P(S):S[P];x>p&&(L=S,p=x)}return L}}},function(G,_,m){"use strict";var R=m(0),w=m(2);_.a=function(M,P){if(Object(R.a)(M)){for(var L,p=1/0,b=0;b<M.length;b++){var S=M[b],x=Object(w.a)(P)?P(S):S[P];x<p&&(L=S,p=x)}return L}}},function(G,_,m){"use strict";var R=function(w,M){return(w%M+M)%M};_.a=R},function(G,_,m){"use strict";var R=180/Math.PI,w=function(M){return R*M};_.a=w},function(G,_,m){"use strict";_.a=parseInt},function(G,_,m){"use strict";var R=Math.PI/180,w=function(M){return R*M};_.a=w},function(G,_,m){"use strict";var R=m(8);_.a=R.a},function(G,_,m){"use strict";var R=m(29);_.a=R.a},function(G,_,m){"use strict";var R=m(13),w=m(15);_.a=function(M,P){return Object(R.a)(Object(w.a)(M),P)}},function(G,_,m){"use strict";var R=m(9),w=function(M){return Object(R.a)(M).toLowerCase()};_.a=w},function(G,_,m){"use strict";var R=m(9),w=function(M){var P=Object(R.a)(M);return P.charAt(0).toLowerCase()+P.substring(1)};_.a=w},function(G,_,m){"use strict";function R(w,M){return!w||!M?w:w.replace(/\\?\{([^{}]+)\}/g,function(P,L){return P.charAt(0)==="\\"?P.slice(1):M[L]===void 0?"":M[L]})}_.a=R},function(G,_,m){"use strict";var R=m(9),w=function(M){return Object(R.a)(M).toUpperCase()};_.a=w},function(G,_,m){"use strict";var R=m(9),w=function(M){var P=Object(R.a)(M);return P.charAt(0).toUpperCase()+P.substring(1)};_.a=w},function(G,_,m){"use strict";var R=m(3),w=function(M){return Object(R.a)(M,"Arguments")};_.a=w},function(G,_,m){"use strict";var R=m(3),w=function(M){return Object(R.a)(M,"Boolean")};_.a=w},function(G,_,m){"use strict";var R=m(3),w=function(M){return Object(R.a)(M,"Date")};_.a=w},function(G,_,m){"use strict";var R=m(3),w=function(M){return Object(R.a)(M,"Error")};_.a=w},function(G,_,m){"use strict";var R=m(5);_.a=function(w){return Object(R.a)(w)&&isFinite(w)}},function(G,_,m){"use strict";var R=function(w){return w===null};_.a=R},function(G,_,m){"use strict";var R=m(3),w=function(M){return Object(R.a)(M,"RegExp")};_.a=w},function(G,_,m){"use strict";var R=function(w){return w===void 0};_.a=R},function(G,_,m){"use strict";var R=function(w){return w instanceof Element||w instanceof HTMLDocument};_.a=R},function(G,_,m){"use strict";_.a=R;function R(w){var M=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(P){return setTimeout(P,16)};return M(w)}},function(G,_,m){"use strict";_.a=R;function R(w){var M=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;M(w)}},function(G,_,m){"use strict";var R=m(16),w=m(2),M=function(){for(var P=[],L=0;L<arguments.length;L++)P[L]=arguments[L];for(var p=P[0],b=1;b<P.length;b++){var S=P[b];Object(w.a)(S)&&(S=S.prototype),Object(R.a)(p.prototype,S)}};_.a=M},function(G,_,m){"use strict";var R=m(0),w=function(M){if(typeof M!="object"||M===null)return M;var P;if(Object(R.a)(M)){P=[];for(var L=0,p=M.length;L<p;L++)typeof M[L]=="object"&&M[L]!=null?P[L]=w(M[L]):P[L]=M[L]}else{P={};for(var b in M)typeof M[b]=="object"&&M[b]!=null?P[b]=w(M[b]):P[b]=M[b]}return P};_.a=w},function(G,_,m){"use strict";function R(w,M,P){var L;return function(){var p=this,b=arguments,S=function(){L=null,P||w.apply(p,b)},x=P&&!L;clearTimeout(L),L=setTimeout(S,M),x&&w.apply(p,b)}}_.a=R},function(G,_,m){"use strict";var R=m(0),w=m(10),M=5;function P(p,b,S,x){S=S||0,x=x||M;for(var g in b)if(b.hasOwnProperty(g)){var T=b[g];T!==null&&Object(w.a)(T)?(Object(w.a)(p[g])||(p[g]={}),S<x?P(p[g],T,S+1,x):p[g]=b[g]):Object(R.a)(T)?(p[g]=[],p[g]=p[g].concat(T)):T!==void 0&&(p[g]=T)}}var L=function(p){for(var b=[],S=1;S<arguments.length;S++)b[S-1]=arguments[S];for(var x=0;x<b.length;x+=1)P(p,b[x]);return p};_.a=L},function(G,_,m){"use strict";var R=m(16),w=m(2),M=function(P,L,p,b){Object(w.a)(L)||(p=L,L=P,P=function(){});var S=Object.create?function(g,T){return Object.create(g,{constructor:{value:T}})}:function(g,T){function E(){}E.prototype=g;var O=new E;return O.constructor=T,O},x=S(L.prototype,P);return P.prototype=Object(R.a)(x,P.prototype),P.superclass=S(L.prototype,L),Object(R.a)(x,p),Object(R.a)(P,b),P};_.a=M},function(G,_,m){"use strict";var R=m(1),w=function(M,P){if(!Object(R.a)(M))return-1;var L=Array.prototype.indexOf;if(L)return L.call(M,P);for(var p=-1,b=0;b<M.length;b++)if(M[b]===P){p=b;break}return p};_.a=w},function(G,_,m){"use strict";var R=m(7),w=m(1),M=m(30),P=m(31),L=Object.prototype.hasOwnProperty;function p(b){if(Object(R.a)(b))return!0;if(Object(w.a)(b))return!b.length;var S=Object(M.a)(b);if(S==="Map"||S==="Set")return!b.size;if(Object(P.a)(b))return!Object.keys(b).length;for(var x in b)if(L.call(b,x))return!1;return!0}_.a=p},function(G,_,m){"use strict";var R=m(2),w=m(33);_.a=function(M,P,L){return Object(R.a)(L)?!!L(M,P):Object(w.a)(M,P)}},function(G,_,m){"use strict";var R=m(1),w=function(M,P){if(!Object(R.a)(M))return M;for(var L=[],p=0;p<M.length;p++){var b=M[p];L.push(P(b,p))}return L};_.a=w},function(G,_,m){"use strict";var R=m(7),w=m(12),M=function(P){return P};_.a=function(P,L){L===void 0&&(L=M);var p={};return Object(w.a)(P)&&!Object(R.a)(P)&&Object.keys(P).forEach(function(b){p[b]=L(P[b],b)}),p}},function(G,_,m){"use strict";var R=m(4);_.a=function(w,M,P){for(var L=0,p=Object(R.a)(M)?M.split("."):M;w&&L<p.length;)w=w[p[L++]];return w===void 0||L<p.length?P:w}},function(G,_,m){"use strict";var R=m(12),w=m(4),M=m(5);_.a=function(P,L,p){var b=P,S=Object(w.a)(L)?L.split("."):L;return S.forEach(function(x,g){g<S.length-1?(Object(R.a)(b[x])||(b[x]=Object(M.a)(S[g+1])?[]:{}),b=b[x]):b[x]=p}),P}},function(G,_,m){"use strict";var R=m(8),w=m(10),M=Object.prototype.hasOwnProperty;_.a=function(P,L){if(P===null||!Object(w.a)(P))return{};var p={};return Object(R.a)(L,function(b){M.call(P,b)&&(p[b]=P[b])}),p}},function(G,_,m){"use strict";var R=m(25);_.a=function(w,M){return Object(R.a)(w,function(P,L,p){return M.includes(p)||(P[p]=L),P},{})}},function(G,_,m){"use strict";_.a=function(R,w,M){var P,L,p,b,S=0;M||(M={});var x=function(){S=M.leading===!1?0:Date.now(),P=null,b=R.apply(L,p),P||(L=p=null)},g=function(){var T=Date.now();!S&&M.leading===!1&&(S=T);var E=w-(T-S);return L=this,p=arguments,E<=0||E>w?(P&&(clearTimeout(P),P=null),S=T,b=R.apply(L,p),P||(L=p=null)):!P&&M.trailing!==!1&&(P=setTimeout(x,E)),b};return g.cancel=function(){clearTimeout(P),S=0,P=L=p=null},g}},function(G,_,m){"use strict";var R=m(1);_.a=function(w){return Object(R.a)(w)?Array.prototype.slice.call(w):[]}},function(G,_,m){"use strict";var R={};_.a=function(w){return w=w||"g",R[w]?R[w]+=1:R[w]=1,w+R[w]}},function(G,_,m){"use strict";_.a=function(){}},function(G,_,m){"use strict";_.a=function(R){return R}},function(G,_,m){"use strict";_.a=M;var R=m(7),w=m(1);function M(P){return Object(R.a)(P)?0:Object(w.a)(P)?P.length:Object.keys(P).length}},function(G,_,m){"use strict";_.a=F;var R=function(St,et){return R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(it,Tt){it.__proto__=Tt}||function(it,Tt){for(var Nt in Tt)Object.prototype.hasOwnProperty.call(Tt,Nt)&&(it[Nt]=Tt[Nt])},R(St,et)};function w(St,et){if(typeof et!="function"&&et!==null)throw new TypeError("Class extends value "+String(et)+" is not a constructor or null");R(St,et);function it(){this.constructor=St}St.prototype=et===null?Object.create(et):(it.prototype=et.prototype,new it)}var M=function(){return M=Object.assign||function(et){for(var it,Tt=1,Nt=arguments.length;Tt<Nt;Tt++){it=arguments[Tt];for(var st in it)Object.prototype.hasOwnProperty.call(it,st)&&(et[st]=it[st])}return et},M.apply(this,arguments)};function P(St,et){var it={};for(var Tt in St)Object.prototype.hasOwnProperty.call(St,Tt)&&et.indexOf(Tt)<0&&(it[Tt]=St[Tt]);if(St!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Nt=0,Tt=Object.getOwnPropertySymbols(St);Nt<Tt.length;Nt++)et.indexOf(Tt[Nt])<0&&Object.prototype.propertyIsEnumerable.call(St,Tt[Nt])&&(it[Tt[Nt]]=St[Tt[Nt]]);return it}function L(St,et,it,Tt){var Nt=arguments.length,st=Nt<3?et:Tt===null?Tt=Object.getOwnPropertyDescriptor(et,it):Tt,xt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")st=Reflect.decorate(St,et,it,Tt);else for(var zt=St.length-1;zt>=0;zt--)(xt=St[zt])&&(st=(Nt<3?xt(st):Nt>3?xt(et,it,st):xt(et,it))||st);return Nt>3&&st&&Object.defineProperty(et,it,st),st}function p(St,et){return function(it,Tt){et(it,Tt,St)}}function b(St,et,it,Tt,Nt,st){function xt(ee){if(ee!==void 0&&typeof ee!="function")throw new TypeError("Function expected");return ee}for(var zt=Tt.kind,Wt=zt==="getter"?"get":zt==="setter"?"set":"value",_t=!et&&St?Tt.static?St:St.prototype:null,Xt=et||(_t?Object.getOwnPropertyDescriptor(_t,Tt.name):{}),te,ue=!1,fe=it.length-1;fe>=0;fe--){var Gt={};for(var ae in Tt)Gt[ae]=ae==="access"?{}:Tt[ae];for(var ae in Tt.access)Gt.access[ae]=Tt.access[ae];Gt.addInitializer=function(ee){if(ue)throw new TypeError("Cannot add initializers after decoration has completed");st.push(xt(ee||null))};var Ne=(0,it[fe])(zt==="accessor"?{get:Xt.get,set:Xt.set}:Xt[Wt],Gt);if(zt==="accessor"){if(Ne===void 0)continue;if(Ne===null||typeof Ne!="object")throw new TypeError("Object expected");(te=xt(Ne.get))&&(Xt.get=te),(te=xt(Ne.set))&&(Xt.set=te),(te=xt(Ne.init))&&Nt.push(te)}else(te=xt(Ne))&&(zt==="field"?Nt.push(te):Xt[Wt]=te)}_t&&Object.defineProperty(_t,Tt.name,Xt),ue=!0}function S(St,et,it){for(var Tt=arguments.length>2,Nt=0;Nt<et.length;Nt++)it=Tt?et[Nt].call(St,it):et[Nt].call(St);return Tt?it:void 0}function x(St){return typeof St=="symbol"?St:"".concat(St)}function g(St,et,it){return typeof et=="symbol"&&(et=et.description?"[".concat(et.description,"]"):""),Object.defineProperty(St,"name",{configurable:!0,value:it?"".concat(it," ",et):et})}function T(St,et){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(St,et)}function E(St,et,it,Tt){function Nt(st){return st instanceof it?st:new it(function(xt){xt(st)})}return new(it||(it=Promise))(function(st,xt){function zt(Xt){try{_t(Tt.next(Xt))}catch(te){xt(te)}}function Wt(Xt){try{_t(Tt.throw(Xt))}catch(te){xt(te)}}function _t(Xt){Xt.done?st(Xt.value):Nt(Xt.value).then(zt,Wt)}_t((Tt=Tt.apply(St,et||[])).next())})}function O(St,et){var it={label:0,sent:function(){if(st[0]&1)throw st[1];return st[1]},trys:[],ops:[]},Tt,Nt,st,xt;return xt={next:zt(0),throw:zt(1),return:zt(2)},typeof Symbol=="function"&&(xt[Symbol.iterator]=function(){return this}),xt;function zt(_t){return function(Xt){return Wt([_t,Xt])}}function Wt(_t){if(Tt)throw new TypeError("Generator is already executing.");for(;xt&&(xt=0,_t[0]&&(it=0)),it;)try{if(Tt=1,Nt&&(st=_t[0]&2?Nt.return:_t[0]?Nt.throw||((st=Nt.return)&&st.call(Nt),0):Nt.next)&&!(st=st.call(Nt,_t[1])).done)return st;switch(Nt=0,st&&(_t=[_t[0]&2,st.value]),_t[0]){case 0:case 1:st=_t;break;case 4:return it.label++,{value:_t[1],done:!1};case 5:it.label++,Nt=_t[1],_t=[0];continue;case 7:_t=it.ops.pop(),it.trys.pop();continue;default:if(st=it.trys,!(st=st.length>0&&st[st.length-1])&&(_t[0]===6||_t[0]===2)){it=0;continue}if(_t[0]===3&&(!st||_t[1]>st[0]&&_t[1]<st[3])){it.label=_t[1];break}if(_t[0]===6&&it.label<st[1]){it.label=st[1],st=_t;break}if(st&&it.label<st[2]){it.label=st[2],it.ops.push(_t);break}st[2]&&it.ops.pop(),it.trys.pop();continue}_t=et.call(St,it)}catch(Xt){_t=[6,Xt],Nt=0}finally{Tt=st=0}if(_t[0]&5)throw _t[1];return{value:_t[0]?_t[1]:void 0,done:!0}}}var k=Object.create?function(St,et,it,Tt){Tt===void 0&&(Tt=it);var Nt=Object.getOwnPropertyDescriptor(et,it);(!Nt||("get"in Nt?!et.__esModule:Nt.writable||Nt.configurable))&&(Nt={enumerable:!0,get:function(){return et[it]}}),Object.defineProperty(St,Tt,Nt)}:function(St,et,it,Tt){Tt===void 0&&(Tt=it),St[Tt]=et[it]};function y(St,et){for(var it in St)it!=="default"&&!Object.prototype.hasOwnProperty.call(et,it)&&k(et,St,it)}function l(St){var et=typeof Symbol=="function"&&Symbol.iterator,it=et&&St[et],Tt=0;if(it)return it.call(St);if(St&&typeof St.length=="number")return{next:function(){return St&&Tt>=St.length&&(St=void 0),{value:St&&St[Tt++],done:!St}}};throw new TypeError(et?"Object is not iterable.":"Symbol.iterator is not defined.")}function U(St,et){var it=typeof Symbol=="function"&&St[Symbol.iterator];if(!it)return St;var Tt=it.call(St),Nt,st=[],xt;try{for(;(et===void 0||et-- >0)&&!(Nt=Tt.next()).done;)st.push(Nt.value)}catch(zt){xt={error:zt}}finally{try{Nt&&!Nt.done&&(it=Tt.return)&&it.call(Tt)}finally{if(xt)throw xt.error}}return st}function X(){for(var St=[],et=0;et<arguments.length;et++)St=St.concat(U(arguments[et]));return St}function F(){for(var St=0,et=0,it=arguments.length;et<it;et++)St+=arguments[et].length;for(var Tt=Array(St),Nt=0,et=0;et<it;et++)for(var st=arguments[et],xt=0,zt=st.length;xt<zt;xt++,Nt++)Tt[Nt]=st[xt];return Tt}function W(St,et,it){if(it||arguments.length===2)for(var Tt=0,Nt=et.length,st;Tt<Nt;Tt++)(st||!(Tt in et))&&(st||(st=Array.prototype.slice.call(et,0,Tt)),st[Tt]=et[Tt]);return St.concat(st||Array.prototype.slice.call(et))}function j(St){return this instanceof j?(this.v=St,this):new j(St)}function V(St,et,it){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Tt=it.apply(St,et||[]),Nt,st=[];return Nt={},xt("next"),xt("throw"),xt("return"),Nt[Symbol.asyncIterator]=function(){return this},Nt;function xt(ue){Tt[ue]&&(Nt[ue]=function(fe){return new Promise(function(Gt,ae){st.push([ue,fe,Gt,ae])>1||zt(ue,fe)})})}function zt(ue,fe){try{Wt(Tt[ue](fe))}catch(Gt){te(st[0][3],Gt)}}function Wt(ue){ue.value instanceof j?Promise.resolve(ue.value.v).then(_t,Xt):te(st[0][2],ue)}function _t(ue){zt("next",ue)}function Xt(ue){zt("throw",ue)}function te(ue,fe){ue(fe),st.shift(),st.length&&zt(st[0][0],st[0][1])}}function q(St){var et,it;return et={},Tt("next"),Tt("throw",function(Nt){throw Nt}),Tt("return"),et[Symbol.iterator]=function(){return this},et;function Tt(Nt,st){et[Nt]=St[Nt]?function(xt){return(it=!it)?{value:j(St[Nt](xt)),done:!1}:st?st(xt):xt}:st}}function $(St){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var et=St[Symbol.asyncIterator],it;return et?et.call(St):(St=typeof l=="function"?l(St):St[Symbol.iterator](),it={},Tt("next"),Tt("throw"),Tt("return"),it[Symbol.asyncIterator]=function(){return this},it);function Tt(st){it[st]=St[st]&&function(xt){return new Promise(function(zt,Wt){xt=St[st](xt),Nt(zt,Wt,xt.done,xt.value)})}}function Nt(st,xt,zt,Wt){Promise.resolve(Wt).then(function(_t){st({value:_t,done:zt})},xt)}}function J(St,et){return Object.defineProperty?Object.defineProperty(St,"raw",{value:et}):St.raw=et,St}var ut=Object.create?function(St,et){Object.defineProperty(St,"default",{enumerable:!0,value:et})}:function(St,et){St.default=et};function nt(St){if(St&&St.__esModule)return St;var et={};if(St!=null)for(var it in St)it!=="default"&&Object.prototype.hasOwnProperty.call(St,it)&&k(et,St,it);return ut(et,St),et}function yt(St){return St&&St.__esModule?St:{default:St}}function dt(St,et,it,Tt){if(it==="a"&&!Tt)throw new TypeError("Private accessor was defined without a getter");if(typeof et=="function"?St!==et||!Tt:!et.has(St))throw new TypeError("Cannot read private member from an object whose class did not declare it");return it==="m"?Tt:it==="a"?Tt.call(St):Tt?Tt.value:et.get(St)}function Ft(St,et,it,Tt,Nt){if(Tt==="m")throw new TypeError("Private method is not writable");if(Tt==="a"&&!Nt)throw new TypeError("Private accessor was defined without a setter");if(typeof et=="function"?St!==et||!Nt:!et.has(St))throw new TypeError("Cannot write private member to an object whose class did not declare it");return Tt==="a"?Nt.call(St,it):Nt?Nt.value=it:et.set(St,it),it}function wt(St,et){if(et===null||typeof et!="object"&&typeof et!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof St=="function"?et===St:St.has(et)}},function(G,_,m){"use strict";var R=m(4),w=m(9),M=m(34);_.a=function(P,L,p,b){b===void 0&&(b="...");var S=16,x=Object(M.a)(b,p),g=Object(R.a)(P)?P:Object(w.a)(P),T=L,E=[],O,k;if(Object(M.a)(P,p)<=L)return P;for(;O=g.substr(0,S),k=Object(M.a)(O,p),!(k+x>T&&k>T);)if(E.push(O),T-=k,g=g.substr(S),!g)return E.join("");for(;O=g.substr(0,1),k=Object(M.a)(O,p),!(k+x>T);)if(E.push(O),T-=k,g=g.substr(1),!g)return E.join("");return""+E.join("")+b}},function(G,_,m){"use strict";var R=function(){function w(){this.map={}}return w.prototype.has=function(M){return this.map[M]!==void 0},w.prototype.get=function(M,P){var L=this.map[M];return L===void 0?P:L},w.prototype.set=function(M,P){this.map[M]=P},w.prototype.clear=function(){this.map={}},w.prototype.delete=function(M){delete this.map[M]},w.prototype.size=function(){return Object.keys(this.map).length},w}();_.a=R},function(G,_){function m(p,b,S,x){x===void 0&&(x=[]);var g=this;g.w=p||0,g.h=b||0,g.y=S||0,g.x=0,g.c=x||[],g.cs=x.length,g.prelim=0,g.mod=0,g.shift=0,g.change=0,g.tl=null,g.tr=null,g.el=null,g.er=null,g.msel=0,g.mser=0}m.fromNode=function(p,b){if(!p)return null;var S=[];return p.children.forEach(function(x){S.push(m.fromNode(x,b))}),b?new m(p.height,p.width,p.x,S):new m(p.width,p.height,p.y,S)};function R(p,b,S){S?p.y+=b:p.x+=b,p.children.forEach(function(x){R(x,b,S)})}function w(p,b){var S=b?p.y:p.x;return p.children.forEach(function(x){S=Math.min(w(x,b),S)}),S}function M(p,b){var S=w(p,b);R(p,-S,b)}function P(p,b,S){S?b.y=p.x:b.x=p.x,p.c.forEach(function(x,g){P(x,b.children[g],S)})}function L(p,b,S){S===void 0&&(S=0),b?(p.x=S,S+=p.width):(p.y=S,S+=p.height),p.children.forEach(function(x){L(x,b,S)})}G.exports=function(p,b){b===void 0&&(b={});var S=b.isHorizontal;function x($){if($.cs===0){g($);return}x($.c[0]);for(var J=V(y($.c[0].el),0,null),ut=1;ut<$.cs;++ut){x($.c[ut]);var nt=y($.c[ut].er);T($,ut,J),J=V(nt,ut,J)}X($),g($)}function g($){$.cs===0?($.el=$,$.er=$,$.msel=$.mser=0):($.el=$.c[0].el,$.msel=$.c[0].msel,$.er=$.c[$.cs-1].er,$.mser=$.c[$.cs-1].mser)}function T($,J,ut){for(var nt=$.c[J-1],yt=nt.mod,dt=$.c[J],Ft=dt.mod;nt!==null&&dt!==null;){y(nt)>ut.low&&(ut=ut.nxt);var wt=yt+nt.prelim+nt.w-(Ft+dt.prelim);wt>0&&(Ft+=wt,E($,J,ut.index,wt));var St=y(nt),et=y(dt);St<=et&&(nt=k(nt),nt!==null&&(yt+=nt.mod)),St>=et&&(dt=O(dt),dt!==null&&(Ft+=dt.mod))}!nt&&dt?l($,J,dt,Ft):nt&&!dt&&U($,J,nt,yt)}function E($,J,ut,nt){$.c[J].mod+=nt,$.c[J].msel+=nt,$.c[J].mser+=nt,W($,J,ut,nt)}function O($){return $.cs===0?$.tl:$.c[0]}function k($){return $.cs===0?$.tr:$.c[$.cs-1]}function y($){return $.y+$.h}function l($,J,ut,nt){var yt=$.c[0].el;yt.tl=ut;var dt=nt-ut.mod-$.c[0].msel;yt.mod+=dt,yt.prelim-=dt,$.c[0].el=$.c[J].el,$.c[0].msel=$.c[J].msel}function U($,J,ut,nt){var yt=$.c[J].er;yt.tr=ut;var dt=nt-ut.mod-$.c[J].mser;yt.mod+=dt,yt.prelim-=dt,$.c[J].er=$.c[J-1].er,$.c[J].mser=$.c[J-1].mser}function X($){$.prelim=($.c[0].prelim+$.c[0].mod+$.c[$.cs-1].mod+$.c[$.cs-1].prelim+$.c[$.cs-1].w)/2-$.w/2}function F($,J){J+=$.mod,$.x=$.prelim+J,j($);for(var ut=0;ut<$.cs;ut++)F($.c[ut],J)}function W($,J,ut,nt){if(ut!==J-1){var yt=J-ut;$.c[ut+1].shift+=nt/yt,$.c[J].shift-=nt/yt,$.c[J].change-=nt-nt/yt}}function j($){for(var J=0,ut=0,nt=0;nt<$.cs;nt++)J+=$.c[nt].shift,ut+=J+$.c[nt].change,$.c[nt].mod+=ut}function V($,J,ut){for(;ut!==null&&$>=ut.low;)ut=ut.nxt;return{low:$,index:J,nxt:ut}}L(p,S);var q=m.fromNode(p,S);return x(q),F(q,0),P(q,p,S),M(p,S),p}},function(G,_,m){function R(g,T){g.prototype=Object.create(T.prototype),g.prototype.constructor=g,w(g,T)}function w(g,T){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(O,k){return O.__proto__=k,O},w(g,T)}var M=m(11),P=m(121),L=m(17),p=m(6),b=function(g){R(T,g);function T(){return g.apply(this,arguments)||this}var E=T.prototype;return E.execute=function(){var k=this;return k.rootNode.width=0,L(k.rootNode,k.options,P)},T}(M),S={};function x(g,T){return T=p.assign({},S,T),new b(g,T).execute()}G.exports=x},function(G,_,m){var R=m(6);function w(L,p){L===void 0&&(L=0),p===void 0&&(p=[]);var b=this;b.x=b.y=0,b.leftChild=b.rightChild=null,b.height=0,b.children=p}var M={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function P(L,p,b){b?(p.x=L.x,p.y=L.y):(p.x=L.y,p.y=L.x),L.children.forEach(function(S,x){P(S,p.children[x],b)})}G.exports=function(L,p){p===void 0&&(p={}),p=R.assign({},M,p);var b=0;function S(O){if(!O)return null;O.width=0,O.depth&&O.depth>b&&(b=O.depth);var k=O.children,y=k.length,l=new w(O.height,[]);return k.forEach(function(U,X){var F=S(U);l.children.push(F),X===0&&(l.leftChild=F),X===y-1&&(l.rightChild=F)}),l.originNode=O,l.isLeaf=O.isLeaf(),l}function x(O){if(O.isLeaf||O.children.length===0)O.drawingDepth=b;else{var k=O.children.map(function(l){return x(l)}),y=Math.min.apply(null,k);O.drawingDepth=y-1}return O.drawingDepth}var g;function T(O){O.x=O.drawingDepth*p.rankSep,O.isLeaf?(O.y=0,g&&(O.y=g.y+g.height+p.nodeSep,O.originNode.parent!==g.originNode.parent&&(O.y+=p.subTreeSep)),g=O):(O.children.forEach(function(k){T(k)}),O.y=(O.leftChild.y+O.rightChild.y)/2)}var E=S(L);return x(E),T(E),P(E,L,p.isHorizontal),L}},function(G,_,m){function R(E,O){E.prototype=Object.create(O.prototype),E.prototype.constructor=E,w(E,O)}function w(E,O){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(y,l){return y.__proto__=l,y},w(E,O)}var M=m(11),P=m(123),L=m(35),p=m(6),b=["LR","RL","H"],S=b[0],x=function(E){R(O,E);function O(){return E.apply(this,arguments)||this}var k=O.prototype;return k.execute=function(){var l=this,U=l.options,X=l.rootNode;U.isHorizontal=!0;var F=U.indent,W=F===void 0?20:F,j=U.dropCap,V=j===void 0?!0:j,q=U.direction,$=q===void 0?S:q,J=U.align;if($&&b.indexOf($)===-1)throw new TypeError("Invalid direction: "+$);if($===b[0])P(X,W,V,J);else if($===b[1])P(X,W,V,J),X.right2left();else if($===b[2]){var ut=L(X,U),nt=ut.left,yt=ut.right;P(nt,W,V,J),nt.right2left(),P(yt,W,V,J);var dt=nt.getBoundingBox();yt.translate(dt.width,0),X.x=yt.x-X.width/2}return X},O}(M),g={};function T(E,O){return O=p.assign({},g,O),new x(E,O).execute()}G.exports=T},function(G,_,m){var R=m(6);function w(M,P,L,p,b){var S=typeof L=="function"?L(M):L*M.depth;if(!p)try{if(M.id===M.parent.children[0].id){M.x+=S,M.y=P?P.y:0;return}}catch(T){}if(M.x+=S,P){if(M.y=P.y+R.getHeight(P,M,b),P.parent&&M.parent.id!==P.parent.id){var x=P.parent,g=x.y+R.getHeight(x,M,b);M.y=g>M.y?g:M.y}}else M.y=0}G.exports=function(M,P,L,p){var b=null;M.eachNode(function(S){w(S,b,P,L,p),b=S})}},function(G,_,m){function R(g,T){g.prototype=Object.create(T.prototype),g.prototype.constructor=g,w(g,T)}function w(g,T){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(O,k){return O.__proto__=k,O},w(g,T)}var M=m(11),P=m(125),L=m(17),p=m(6),b=function(g){R(T,g);function T(){return g.apply(this,arguments)||this}var E=T.prototype;return E.execute=function(){var k=this;return L(k.rootNode,k.options,P)},T}(M),S={};function x(g,T){return T=p.assign({},S,T),new b(g,T).execute()}G.exports=x},function(G,_,m){var R=m(6);function w(L,p){var b=0;return L.children.length?L.children.forEach(function(S){b+=w(S,p)}):b=L.height,L._subTreeSep=p.getSubTreeSep(L.data),L.totalHeight=Math.max(L.height,b)+2*L._subTreeSep,L.totalHeight}function M(L){var p=L.children,b=p.length;if(b){p.forEach(function(O){M(O)});var S=p[0],x=p[b-1],g=x.y-S.y+x.height,T=0;if(p.forEach(function(O){T+=O.totalHeight}),g>L.height)L.y=S.y+g/2-L.height/2;else if(p.length!==1||L.height>T){var E=L.y+(L.height-g)/2-S.y;p.forEach(function(O){O.translate(0,E)})}else L.y=(S.y+S.height/2+x.y+x.height/2)/2-L.height/2}}var P={getSubTreeSep:function(){return 0}};G.exports=function(L,p){p===void 0&&(p={}),p=R.assign({},P,p),L.parent={x:0,width:0,height:0,y:0},L.BFTraverse(function(b){b.x=b.parent.x+b.parent.width}),L.parent=null,w(L,p),L.startY=0,L.y=L.totalHeight/2-L.height/2,L.eachNode(function(b){var S=b.children,x=S.length;if(x){var g=S[0];if(g.startY=b.startY+b._subTreeSep,x===1)g.y=b.y+b.height/2-g.height/2;else{g.y=g.startY+g.totalHeight/2-g.height/2;for(var T=1;T<x;T++){var E=S[T];E.startY=S[T-1].startY+S[T-1].totalHeight,E.y=E.startY+E.totalHeight/2-E.height/2}}}}),M(L)}}])})},483360:function(We,G,_){"use strict";var m=this&&this.__createBinding||(Object.create?function(M,P,L,p){p===void 0&&(p=L);var b=Object.getOwnPropertyDescriptor(P,L);(!b||("get"in b?!P.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return P[L]}}),Object.defineProperty(M,p,b)}:function(M,P,L,p){p===void 0&&(p=L),M[p]=P[L]}),R=this&&this.__exportStar||function(M,P){for(var L in M)L!=="default"&&!Object.prototype.hasOwnProperty.call(P,L)&&m(P,M,L)};Object.defineProperty(G,"__esModule",{value:!0}),G.getLayoutByName=G.unRegisterLayout=G.registerLayout=void 0;var w=_(695326);Object.defineProperty(G,"registerLayout",{enumerable:!0,get:function(){return w.registerLayout}}),Object.defineProperty(G,"unRegisterLayout",{enumerable:!0,get:function(){return w.unRegisterLayout}}),Object.defineProperty(G,"getLayoutByName",{enumerable:!0,get:function(){return w.getLayoutByName}}),R(_(702584),G)},762329:function(We,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.Base=void 0;var _=function(){function m(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}return m.prototype.layout=function(R){return this.init(R),this.execute(!0)},m.prototype.init=function(R){this.nodes=R.nodes||[],this.edges=R.edges||[],this.combos=R.combos||[],this.comboEdges=R.comboEdges||[],this.hiddenNodes=R.hiddenNodes||[],this.hiddenEdges=R.hiddenEdges||[],this.hiddenCombos=R.hiddenCombos||[],this.vedges=R.vedges||[]},m.prototype.execute=function(R){},m.prototype.executeWithWorker=function(){},m.prototype.getDefaultCfg=function(){return{}},m.prototype.updateCfg=function(R){R&&Object.assign(this,R)},m.prototype.getType=function(){return"base"},m.prototype.destroy=function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0},m}();G.Base=_},964885:function(We,G,_){"use strict";var m=this&&this.__extends||function(){var b=function(S,x){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,T){g.__proto__=T}||function(g,T){for(var E in T)Object.prototype.hasOwnProperty.call(T,E)&&(g[E]=T[E])},b(S,x)};return function(S,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");b(S,x);function g(){this.constructor=S}S.prototype=x===null?Object.create(x):(g.prototype=x.prototype,new g)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.CircularLayout=void 0;var R=_(762329),w=_(449784);function M(b,S,x,g){b.forEach(function(T,E){b[E].children=[],b[E].parent=[]}),g?S.forEach(function(T){var E=(0,w.getEdgeTerminal)(T,"source"),O=(0,w.getEdgeTerminal)(T,"target"),k=0;E&&(k=x[E]);var y=0;O&&(y=x[O]);var l=b[k].children,U=b[y].parent;l.push(b[y].id),U.push(b[k].id)}):S.forEach(function(T){var E=(0,w.getEdgeTerminal)(T,"source"),O=(0,w.getEdgeTerminal)(T,"target"),k=0;E&&(k=x[E]);var y=0;O&&(y=x[O]);var l=b[k].children,U=b[y].children;l.push(b[y].id),U.push(b[k].id)})}function P(b,S,x){for(var g=x.length,T=0;T<g;T++){var E=(0,w.getEdgeTerminal)(x[T],"source"),O=(0,w.getEdgeTerminal)(x[T],"target");if(b.id===E&&S.id===O||S.id===E&&b.id===O)return!0}return!1}function L(b,S){var x=b.degree,g=S.degree;return x<g?-1:x>g?1:0}var p=function(b){m(S,b);function S(x){var g=b.call(this)||this;return g.radius=null,g.nodeSize=void 0,g.startRadius=null,g.endRadius=null,g.startAngle=0,g.endAngle=2*Math.PI,g.clockwise=!0,g.divisions=1,g.ordering=null,g.angleRatio=1,g.nodes=[],g.edges=[],g.nodeMap={},g.degrees=[],g.width=300,g.height=300,g.updateCfg(x),g}return S.prototype.getDefaultCfg=function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}},S.prototype.execute=function(){var x,g=this,T=g.nodes,E=g.edges,O=T.length;if(O===0){g.onLayoutEnd&&g.onLayoutEnd();return}!g.width&&typeof window!="undefined"&&(g.width=window.innerWidth),!g.height&&typeof window!="undefined"&&(g.height=window.innerHeight),g.center||(g.center=[g.width/2,g.height/2]);var k=g.center;if(O===1){T[0].x=k[0],T[0].y=k[1],g.onLayoutEnd&&g.onLayoutEnd();return}var y=g.radius,l=g.startRadius,U=g.endRadius,X=g.divisions,F=g.startAngle,W=g.endAngle,j=g.angleRatio,V=g.ordering,q=g.clockwise,$=g.nodeSpacing,J=g.nodeSize,ut=(W-F)/O,nt={};T.forEach(function(zt,Wt){nt[zt.id]=Wt}),g.nodeMap=nt;var yt=(0,w.getDegree)(T.length,nt,E);if(g.degrees=yt,$){var dt=(0,w.getFuncByUnknownType)(10,$),Ft=(0,w.getFuncByUnknownType)(10,J),wt=-1/0;T.forEach(function(zt){var Wt=Ft(zt);wt<Wt&&(wt=Wt)});var St=0;T.forEach(function(zt,Wt){Wt===0?St+=wt||10:St+=(dt(zt)||0)+(wt||10)}),y=St/(2*Math.PI)}else!y&&!l&&!U?y=g.height>g.width?g.width/2:g.height/2:!l&&U?l=U:l&&!U&&(U=l);var et=ut*j,it=[];V==="topology"?it=g.topologyOrdering():V==="topology-directed"?it=g.topologyOrdering(!0):V==="degree"?it=g.degreeOrdering():it=T;for(var Tt=Math.ceil(O/X),Nt=0;Nt<O;++Nt){var st=y;!st&&l!==null&&U!==null&&(st=l+Nt*(U-l)/(O-1)),st||(st=10+Nt*100/(O-1));var xt=F+Nt%Tt*et+2*Math.PI/X*Math.floor(Nt/Tt);q||(xt=W-Nt%Tt*et-2*Math.PI/X*Math.floor(Nt/Tt)),it[Nt].x=k[0]+Math.cos(xt)*st,it[Nt].y=k[1]+Math.sin(xt)*st,it[Nt].weight=yt[Nt].all}return(x=g.onLayoutEnd)===null||x===void 0||x.call(g),{nodes:it,edges:this.edges}},S.prototype.topologyOrdering=function(x){x===void 0&&(x=!1);var g=this,T=g.degrees,E=g.edges,O=g.nodes,k=(0,w.clone)(O),y=g.nodeMap,l=[k[0]],U=[O[0]],X=[],F=O.length;X[0]=!0,M(k,E,y,x);var W=0;return k.forEach(function(j,V){if(V!==0)if((V===F-1||T[V].all!==T[V+1].all||P(l[W],j,E))&&!X[V])l.push(j),U.push(O[y[j.id]]),X[V]=!0,W++;else{for(var q=l[W].children,$=!1,J=0;J<q.length;J++){var ut=y[q[J]];if(T[ut].all===T[V].all&&!X[ut]){l.push(k[ut]),U.push(O[y[k[ut].id]]),X[ut]=!0,$=!0;break}}for(var nt=0;!$&&(X[nt]||(l.push(k[nt]),U.push(O[y[k[nt].id]]),X[nt]=!0,$=!0),nt++,nt!==F););}}),U},S.prototype.degreeOrdering=function(){var x=this,g=x.nodes,T=[],E=x.degrees;return g.forEach(function(O,k){O.degree=E[k].all,T.push(O)}),T.sort(L),T},S.prototype.getType=function(){return"circular"},S}(R.Base);G.CircularLayout=p},263861:function(We,G,_){"use strict";var m=this&&this.__extends||function(){var b=function(S,x){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,T){g.__proto__=T}||function(g,T){for(var E in T)Object.prototype.hasOwnProperty.call(T,E)&&(g[E]=T[E])},b(S,x)};return function(S,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");b(S,x);function g(){this.constructor=S}S.prototype=x===null?Object.create(x):(g.prototype=x.prototype,new g)}}(),R=this&&this.__assign||function(){return R=Object.assign||function(b){for(var S,x=1,g=arguments.length;x<g;x++){S=arguments[x];for(var T in S)Object.prototype.hasOwnProperty.call(S,T)&&(b[T]=S[T])}return b},R.apply(this,arguments)};Object.defineProperty(G,"__esModule",{value:!0}),G.ComboCombinedLayout=void 0;var w=_(416470),M=_(762329),P=_(449784),L=_(702584),p=function(b){m(S,b);function S(x){var g=b.call(this)||this;return g.center=[0,0],g.nodes=[],g.edges=[],g.combos=[],g.comboEdges=[],g.comboPadding=10,g.comboTrees=[],g.updateCfg(x),g}return S.prototype.getDefaultCfg=function(){return{}},S.prototype.execute=function(){var x=this,g=x.nodes,T=x.center;if(!g||g.length===0){x.onLayoutEnd&&x.onLayoutEnd();return}if(g.length===1){g[0].x=T[0],g[0].y=T[1],x.onLayoutEnd&&x.onLayoutEnd();return}x.initVals(),x.run(),x.onLayoutEnd&&x.onLayoutEnd()},S.prototype.run=function(){var x,g=this,T=g.nodes,E=g.edges,O=g.combos,k=g.comboEdges,y=g.center,l={};T.forEach(function(wt){l[wt.id]=wt});var U={};O.forEach(function(wt){U[wt.id]=wt});var X=g.getInnerGraphs(l),F=[],W=[],j={},V=!0;this.comboTrees.forEach(function(wt){var St=X[wt.id],et=R(R({},wt),{x:St.x||U[wt.id].x,y:St.y||U[wt.id].y,fx:St.fx||U[wt.id].fx,fy:St.fy||U[wt.id].fy,mass:St.mass||U[wt.id].mass,size:St.size});W.push(et),!isNaN(et.x)&&et.x!==0&&!isNaN(et.y)&&et.y!==0?V=!1:(et.x=Math.random()*100,et.y=Math.random()*100),F.push(wt.id),(0,P.traverseTreeUp)(wt,function(it){return it.id!==wt.id&&(j[it.id]=wt.id),!0})}),T.forEach(function(wt){if(!(wt.comboId&&U[wt.comboId])){var St=R({},wt);W.push(St),!isNaN(St.x)&&St.x!==0&&!isNaN(St.y)&&St.y!==0?V=!1:(St.x=Math.random()*100,St.y=Math.random()*100),F.push(wt.id)}});var q=[];if(E.concat(k).forEach(function(wt){var St=j[wt.source]||wt.source,et=j[wt.target]||wt.target;St!==et&&F.includes(St)&&F.includes(et)&&q.push({source:St,target:et})}),W!=null&&W.length){if(W.length===1)W[0].x=y[0],W[0].y=y[1];else{var $={nodes:W,edges:q},J=this.outerLayout||new L.GForceLayout({gravity:1,factor:4,linkDistance:function(wt,St,et){var it,Tt,Nt=((((it=St.size)===null||it===void 0?void 0:it[0])||30)+(((Tt=et.size)===null||Tt===void 0?void 0:Tt[0])||30))/2;return Math.min(Nt*1.5,700)}}),ut=(x=J.getType)===null||x===void 0?void 0:x.call(J);if(J.updateCfg({center:y,kg:5,preventOverlap:!0,animate:!1}),V&&w.FORCE_LAYOUT_TYPE_MAP[ut]){var nt=W.length<100?new L.MDSLayout:new L.GridLayout;nt.layout($)}J.layout($)}W.forEach(function(wt){var St=X[wt.id];if(!St){var et=l[wt.id];et&&(et.x=wt.x,et.y=wt.y);return}St.visited=!0,St.x=wt.x,St.y=wt.y,St.nodes.forEach(function(it){it.x+=wt.x,it.y+=wt.y})})}for(var yt=Object.keys(X),dt=function(wt){var St=yt[wt],et=X[St];if(!et)return"continue";et.nodes.forEach(function(it){et.visited||(it.x+=et.x||0,it.y+=et.y||0),l[it.id]&&(l[it.id].x=it.x,l[it.id].y=it.y)}),U[St]&&(U[St].x=et.x,U[St].y=et.y)},Ft=yt.length-1;Ft>=0;Ft--)dt(Ft);return{nodes:T,edges:E,combos:O,comboEdges:k}},S.prototype.getInnerGraphs=function(x){var g=this,T=g.comboTrees,E=g.nodeSize,O=g.edges,k=g.comboPadding,y=g.spacing,l={},U=this.innerLayout||new L.ConcentricLayout({sortBy:"id"});return U.center=[0,0],U.preventOverlap=!0,U.nodeSpacing=y,(T||[]).forEach(function(X){(0,P.traverseTreeUp)(X,function(F){var W,j=(k==null?void 0:k(F))||10;if((0,P.isArray)(j)&&(j=Math.max.apply(Math,j)),!((W=F.children)===null||W===void 0)&&W.length){var q=F.children.map(function(it){if(it.itemType==="combo")return l[it.id];var Tt=x[it.id]||{};return R(R({},Tt),it)}),$=q.map(function(it){return it.id}),J={nodes:q,edges:O.filter(function(it){return $.includes(it.source)&&$.includes(it.target)})},ut=1/0;q.forEach(function(it){var Tt;it.size||(it.size=((Tt=l[it.id])===null||Tt===void 0?void 0:Tt.size)||(E==null?void 0:E(it))||[30,30]),(0,P.isNumber)(it.size)&&(it.size=[it.size,it.size]),ut>it.size[0]&&(ut=it.size[0]),ut>it.size[1]&&(ut=it.size[1])}),U.layout(J);var nt=(0,P.getLayoutBBox)(q),yt=nt.minX,dt=nt.minY,Ft=nt.maxX,wt=nt.maxY,St={x:(Ft+yt)/2,y:(wt+dt)/2};J.nodes.forEach(function(it){it.x-=St.x,it.y-=St.y});var et=Math.max(Ft-yt,wt-dt,ut)+j*2;l[F.id]={id:F.id,nodes:q,size:[et,et]}}else if(F.itemType==="combo"){var V=j?[j*2,j*2]:[30,30];l[F.id]={id:F.id,nodes:[],size:V}}return!0})}),l},S.prototype.initVals=function(){var x=this,g=x.nodeSize,T=x.spacing,E,O;if((0,P.isNumber)(T)?O=function(){return T}:(0,P.isFunction)(T)?O=T:O=function(){return 0},this.spacing=O,!g)E=function(F){var W=O(F);if(F.size){if((0,P.isArray)(F.size)){var j=F.size[0]>F.size[1]?F.size[0]:F.size[1];return(j+W)/2}if((0,P.isObject)(F.size)){var j=F.size.width>F.size.height?F.size.width:F.size.height;return(j+W)/2}return(F.size+W)/2}return 10+W/2};else if((0,P.isFunction)(g))E=function(F){var W=g(F),j=O(F);if((0,P.isArray)(F.size)){var V=F.size[0]>F.size[1]?F.size[0]:F.size[1];return(V+j)/2}return((W||10)+j)/2};else if((0,P.isArray)(g)){var k=g[0]>g[1]?g[0]:g[1],y=k/2;E=function(F){return y+O(F)/2}}else{var l=g/2;E=function(F){return l+O(F)/2}}this.nodeSize=E;var U=x.comboPadding,X;(0,P.isNumber)(U)?X=function(){return U}:(0,P.isArray)(U)?X=function(){return Math.max.apply(null,U)}:(0,P.isFunction)(U)?X=U:X=function(){return 0},this.comboPadding=X},S.prototype.getType=function(){return"comboCombined"},S}(M.Base);G.ComboCombinedLayout=p},366590:function(We,G,_){"use strict";var m=this&&this.__extends||function(){var P=function(L,p){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,S){b.__proto__=S}||function(b,S){for(var x in S)Object.prototype.hasOwnProperty.call(S,x)&&(b[x]=S[x])},P(L,p)};return function(L,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");P(L,p);function b(){this.constructor=L}L.prototype=p===null?Object.create(p):(b.prototype=p.prototype,new b)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.ComboForceLayout=void 0;var R=_(762329),w=_(449784),M=function(P){m(L,P);function L(p){var b=P.call(this)||this;return b.center=[0,0],b.maxIteration=100,b.gravity=10,b.comboGravity=10,b.linkDistance=10,b.alpha=1,b.alphaMin=.001,b.alphaDecay=1-Math.pow(b.alphaMin,1/300),b.alphaTarget=0,b.velocityDecay=.6,b.edgeStrength=.6,b.nodeStrength=30,b.preventOverlap=!1,b.preventNodeOverlap=!1,b.preventComboOverlap=!1,b.collideStrength=void 0,b.nodeCollideStrength=.5,b.comboCollideStrength=.5,b.comboSpacing=20,b.comboPadding=10,b.optimizeRangeFactor=1,b.onTick=function(){},b.onLayoutEnd=function(){},b.depthAttractiveForceScale=1,b.depthRepulsiveForceScale=2,b.nodes=[],b.edges=[],b.combos=[],b.comboTrees=[],b.width=300,b.height=300,b.bias=[],b.nodeMap={},b.oriComboMap={},b.indexMap={},b.comboMap={},b.previousLayouted=!1,b.updateCfg(p),b}return L.prototype.getDefaultCfg=function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}},L.prototype.execute=function(){var p=this,b=p.nodes,S=p.center;if(p.comboTree={id:"comboTreeRoot",depth:-1,children:p.comboTrees},!b||b.length===0){p.onLayoutEnd&&p.onLayoutEnd();return}if(b.length===1){b[0].x=S[0],b[0].y=S[1],p.onLayoutEnd&&p.onLayoutEnd();return}p.initVals(),p.run(),p.onLayoutEnd&&p.onLayoutEnd()},L.prototype.run=function(){var p=this,b=p.nodes,S=p.previousLayouted?p.maxIteration/5:p.maxIteration;!p.width&&typeof window!="undefined"&&(p.width=window.innerWidth),!p.height&&typeof window!="undefined"&&(p.height=window.innerHeight);var x=p.center,g=p.velocityDecay,T=p.comboMap;p.previousLayouted||p.initPos(T);for(var E=function(l){var U=[];b.forEach(function(X,F){U[F]={x:0,y:0}}),p.applyCalculate(U),p.applyComboCenterForce(U),b.forEach(function(X,F){!(0,w.isNumber)(X.x)||!(0,w.isNumber)(X.y)||(X.x+=U[F].x*g,X.y+=U[F].y*g)}),p.alpha+=(p.alphaTarget-p.alpha)*p.alphaDecay,p.onTick()},O=0;O<S;O++)E(O);var k=[0,0];b.forEach(function(l){!(0,w.isNumber)(l.x)||!(0,w.isNumber)(l.y)||(k[0]+=l.x,k[1]+=l.y)}),k[0]/=b.length,k[1]/=b.length;var y=[x[0]-k[0],x[1]-k[1]];b.forEach(function(l,U){!(0,w.isNumber)(l.x)||!(0,w.isNumber)(l.y)||(l.x+=y[0],l.y+=y[1])}),p.combos.forEach(function(l){var U=T[l.id];U&&U.empty&&(l.x=U.cx||l.x,l.y=U.cy||l.y)}),p.previousLayouted=!0},L.prototype.initVals=function(){var p=this,b=p.edges,S=p.nodes,x=p.combos,g={},T={},E={};S.forEach(function(st,xt){T[st.id]=st,E[st.id]=xt}),p.nodeMap=T,p.indexMap=E;var O={};x.forEach(function(st){O[st.id]=st}),p.oriComboMap=O,p.comboMap=p.getComboMap();var k=p.preventOverlap;p.preventComboOverlap=p.preventComboOverlap||k,p.preventNodeOverlap=p.preventNodeOverlap||k;var y=p.collideStrength;y&&(p.comboCollideStrength=y,p.nodeCollideStrength=y),p.comboCollideStrength=p.comboCollideStrength?p.comboCollideStrength:0,p.nodeCollideStrength=p.nodeCollideStrength?p.nodeCollideStrength:0;for(var l=0;l<b.length;++l){var U=(0,w.getEdgeTerminal)(b[l],"source"),X=(0,w.getEdgeTerminal)(b[l],"target");g[U]?g[U]++:g[U]=1,g[X]?g[X]++:g[X]=1}for(var F=[],l=0;l<b.length;++l){var U=(0,w.getEdgeTerminal)(b[l],"source"),X=(0,w.getEdgeTerminal)(b[l],"target");F[l]=g[U]/(g[U]+g[X])}this.bias=F;var W=p.nodeSize,j=p.nodeSpacing,V,q;if((0,w.isNumber)(j)?q=function(){return j}:(0,w.isFunction)(j)?q=j:q=function(){return 0},this.nodeSpacing=q,!W)V=function(st){if(st.size){if((0,w.isArray)(st.size)){var xt=st.size[0]>st.size[1]?st.size[0]:st.size[1];return xt/2}if((0,w.isObject)(st.size)){var xt=st.size.width>st.size.height?st.size.width:st.size.height;return xt/2}return st.size/2}return 10};else if((0,w.isFunction)(W))V=function(st){return W(st)};else if((0,w.isArray)(W)){var $=W[0]>W[1]?W[0]:W[1],J=$/2;V=function(st){return J}}else{var ut=W/2;V=function(st){return ut}}this.nodeSize=V;var nt=p.comboSpacing,yt;(0,w.isNumber)(nt)?yt=function(){return nt}:(0,w.isFunction)(nt)?yt=nt:yt=function(){return 0},this.comboSpacing=yt;var dt=p.comboPadding,Ft;(0,w.isNumber)(dt)?Ft=function(){return dt}:(0,w.isArray)(dt)?Ft=function(){return Math.max.apply(null,dt)}:(0,w.isFunction)(dt)?Ft=dt:Ft=function(){return 0},this.comboPadding=Ft;var wt=this.linkDistance,St;wt||(wt=10),(0,w.isNumber)(wt)?St=function(st){return wt}:St=wt,this.linkDistance=St;var et=this.edgeStrength,it;et||(et=1),(0,w.isNumber)(et)?it=function(st){return et}:it=et,this.edgeStrength=it;var Tt=this.nodeStrength,Nt;Tt||(Tt=30),(0,w.isNumber)(Tt)?Nt=function(st){return Tt}:Nt=Tt,this.nodeStrength=Nt},L.prototype.initPos=function(p){var b=this,S=b.nodes;S.forEach(function(x,g){var T=x.comboId,E=p[T];T&&E?(x.x=E.cx+100/(g+1),x.y=E.cy+100/(g+1)):(x.x=100/(g+1),x.y=100/(g+1))})},L.prototype.getComboMap=function(){var p=this,b=p.nodeMap,S=p.comboTrees,x=p.oriComboMap,g={};return(S||[]).forEach(function(T){var E=[];(0,w.traverseTreeUp)(T,function(O){if(O.itemType==="node"||!x[O.id])return!0;if(g[O.id]===void 0){var k={id:O.id,name:O.id,cx:0,cy:0,count:0,depth:p.oriComboMap[O.id].depth||0,children:[]};g[O.id]=k}var y=O.children;y&&y.forEach(function(X){if(!g[X.id]&&!b[X.id])return!0;E.push(X)});var l=g[O.id];if(l.cx=0,l.cy=0,E.length===0){l.empty=!0;var U=x[O.id];l.cx=U.x,l.cy=U.y}return E.forEach(function(X){if(l.count++,X.itemType!=="node"){var F=g[X.id];(0,w.isNumber)(F.cx)&&(l.cx+=F.cx),(0,w.isNumber)(F.cy)&&(l.cy+=F.cy);return}var W=b[X.id];W&&((0,w.isNumber)(W.x)&&(l.cx+=W.x),(0,w.isNumber)(W.y)&&(l.cy+=W.y))}),l.cx/=l.count||1,l.cy/=l.count||1,l.children=E,!0})}),g},L.prototype.applyComboCenterForce=function(p){var b=this,S=b.gravity,x=b.comboGravity||S,g=this.alpha,T=b.comboTrees,E=b.indexMap,O=b.nodeMap,k=b.comboMap;(T||[]).forEach(function(y){(0,w.traverseTreeUp)(y,function(l){if(l.itemType==="node")return!0;var U=k[l.id];if(!U)return!0;var X=k[l.id],F=(X.depth+1)/10*.5,W=X.cx,j=X.cy;return X.cx=0,X.cy=0,X.children.forEach(function(V){if(V.itemType!=="node"){var q=k[V.id];q&&(0,w.isNumber)(q.cx)&&(X.cx+=q.cx),q&&(0,w.isNumber)(q.cy)&&(X.cy+=q.cy);return}var $=O[V.id],J=$.x-W||.005,ut=$.y-j||.005,nt=Math.sqrt(J*J+ut*ut),yt=E[$.id],dt=x*g/nt*F;p[yt].x-=J*dt,p[yt].y-=ut*dt,(0,w.isNumber)($.x)&&(X.cx+=$.x),(0,w.isNumber)($.y)&&(X.cy+=$.y)}),X.cx/=X.count||1,X.cy/=X.count||1,!0})})},L.prototype.applyCalculate=function(p){var b=this,S=b.comboMap,x=b.nodes,g={};x.forEach(function(E,O){x.forEach(function(k,y){if(!(O<y)){var l=E.x-k.x||.005,U=E.y-k.y||.005,X=l*l+U*U,F=Math.sqrt(X);X<1&&(X=F),g["".concat(E.id,"-").concat(k.id)]={vx:l,vy:U,vl2:X,vl:F},g["".concat(k.id,"-").concat(E.id)]={vl2:X,vl:F,vx:-l,vy:-U}}})}),b.updateComboSizes(S),b.calRepulsive(p,g),b.calAttractive(p,g);var T=b.preventComboOverlap;T&&b.comboNonOverlapping(p,S)},L.prototype.updateComboSizes=function(p){var b=this,S=b.comboTrees,x=b.nodeMap,g=b.nodeSize,T=b.comboSpacing,E=b.comboPadding;(S||[]).forEach(function(O){var k=[];(0,w.traverseTreeUp)(O,function(y){if(y.itemType==="node")return!0;var l=p[y.id];if(!l)return!1;var U=y.children;U&&U.forEach(function(W){!p[W.id]&&!x[W.id]||k.push(W)}),l.minX=1/0,l.minY=1/0,l.maxX=-1/0,l.maxY=-1/0,k.forEach(function(W){if(W.itemType!=="node")return!0;var j=x[W.id];if(!j)return!0;var V=g(j),q=j.x-V,$=j.y-V,J=j.x+V,ut=j.y+V;l.minX>q&&(l.minX=q),l.minY>$&&(l.minY=$),l.maxX<J&&(l.maxX=J),l.maxY<ut&&(l.maxY=ut)});var X=b.oriComboMap[y.id].size||10;(0,w.isArray)(X)&&(X=X[0]);var F=Math.max(l.maxX-l.minX,l.maxY-l.minY,X);return l.r=F/2+T(l)/2+E(l),!0})})},L.prototype.comboNonOverlapping=function(p,b){var S=this,x=S.comboTree,g=S.comboCollideStrength,T=S.indexMap,E=S.nodeMap;(0,w.traverseTreeUp)(x,function(O){if(!b[O.id]&&!E[O.id]&&O.id!=="comboTreeRoot")return!1;var k=O.children;return k&&k.length>1&&k.forEach(function(y,l){if(y.itemType==="node")return!1;var U=b[y.id];U&&k.forEach(function(X,F){if(l<=F||X.itemType==="node")return!1;var W=b[X.id];if(!W)return!1;var j=U.cx-W.cx||.005,V=U.cy-W.cy||.005,q=j*j+V*V,$=U.r||1,J=W.r||1,ut=$+J,nt=J*J,yt=$*$;if(q<ut*ut){var dt=y.children;if(!dt||dt.length===0)return!1;var Ft=X.children;if(!Ft||Ft.length===0)return!1;var wt=Math.sqrt(q),St=(ut-wt)/wt*g,et=j*St,it=V*St,Tt=nt/(yt+nt),Nt=1-Tt;dt.forEach(function(st){if(st.itemType!=="node")return!1;if(E[st.id]){var xt=T[st.id];Ft.forEach(function(zt){if(zt.itemType!=="node"||!E[zt.id])return!1;var Wt=T[zt.id];p[xt].x+=et*Tt,p[xt].y+=it*Tt,p[Wt].x-=et*Nt,p[Wt].y-=it*Nt})}})}})}),!0})},L.prototype.calRepulsive=function(p,b){var S=this,x=S.nodes,g=S.width*S.optimizeRangeFactor,T=S.nodeStrength,E=S.alpha,O=S.nodeCollideStrength,k=S.preventNodeOverlap,y=S.nodeSize,l=S.nodeSpacing,U=S.depthRepulsiveForceScale,X=S.center;x.forEach(function(F,W){if(!(!F.x||!F.y)){if(X){var j=S.gravity,V=F.x-X[0]||.005,q=F.y-X[1]||.005,$=Math.sqrt(V*V+q*q);p[W].x-=V*j*E/$,p[W].y-=q*j*E/$}x.forEach(function(J,ut){if(W!==ut&&!(!J.x||!J.y)){var nt=b["".concat(F.id,"-").concat(J.id)],yt=nt.vl2,dt=nt.vl;if(!(dt>g)){var Ft=b["".concat(F.id,"-").concat(J.id)],wt=Ft.vx,St=Ft.vy,et=Math.log(Math.abs(J.depth-F.depth)/10)+1||1;et=et<1?1:et,J.comboId!==F.comboId&&(et+=1);var it=et?Math.pow(U,et):1,Tt=T(J)*E/yt*it;if(p[W].x+=wt*Tt,p[W].y+=St*Tt,W<ut&&k){var Nt=y(F)+l(F)||1,st=y(J)+l(J)||1,xt=Nt+st;if(yt<xt*xt){var zt=(xt-dt)/dt*O,Wt=st*st,_t=Wt/(Nt*Nt+Wt),Xt=wt*zt,te=St*zt;p[W].x+=Xt*_t,p[W].y+=te*_t,_t=1-_t,p[ut].x-=Xt*_t,p[ut].y-=te*_t}}}}})}})},L.prototype.calAttractive=function(p,b){var S=this,x=S.edges,g=S.linkDistance,T=S.alpha,E=S.edgeStrength,O=S.bias,k=S.depthAttractiveForceScale;x.forEach(function(y,l){var U=(0,w.getEdgeTerminal)(y,"source"),X=(0,w.getEdgeTerminal)(y,"target");if(!(!U||!X||U===X)){var F=S.indexMap[U],W=S.indexMap[X],j=S.nodeMap[U],V=S.nodeMap[X];if(!(!j||!V)){var q=j.depth===V.depth?0:Math.log(Math.abs(j.depth-V.depth)/10);j.comboId===V.comboId&&(q=q/2);var $=q?Math.pow(k,q):1;if(j.comboId!==V.comboId&&$===1?$=k/2:j.comboId===V.comboId&&($=2),!(!(0,w.isNumber)(V.x)||!(0,w.isNumber)(j.x)||!(0,w.isNumber)(V.y)||!(0,w.isNumber)(j.y))){var J=b["".concat(X,"-").concat(U)],ut=J.vl,nt=J.vx,yt=J.vy,dt=(ut-g(y))/ut*T*E(y)*$,Ft=nt*dt,wt=yt*dt,St=O[l];p[W].x-=Ft*St,p[W].y-=wt*St,p[F].x+=Ft*(1-St),p[F].y+=wt*(1-St)}}}})},L.prototype.getType=function(){return"comboForce"},L}(R.Base);G.ComboForceLayout=M},843281:function(We,G,_){"use strict";var m=this&&this.__extends||function(){var P=function(L,p){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,S){b.__proto__=S}||function(b,S){for(var x in S)Object.prototype.hasOwnProperty.call(S,x)&&(b[x]=S[x])},P(L,p)};return function(L,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");P(L,p);function b(){this.constructor=L}L.prototype=p===null?Object.create(p):(b.prototype=p.prototype,new b)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.ConcentricLayout=void 0;var R=_(449784),w=_(762329),M=function(P){m(L,P);function L(p){var b=P.call(this)||this;return b.nodeSize=30,b.minNodeSpacing=10,b.nodeSpacing=10,b.preventOverlap=!1,b.equidistant=!1,b.startAngle=3/2*Math.PI,b.clockwise=!0,b.sortBy="degree",b.nodes=[],b.edges=[],b.width=300,b.height=300,b.onLayoutEnd=function(){},b.updateCfg(p),b}return L.prototype.getDefaultCfg=function(){return{nodeSize:30,minNodeSpacing:10,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}},L.prototype.execute=function(){var p,b,S=this,x=S.nodes,g=S.edges,T=x.length;if(T===0){(p=S.onLayoutEnd)===null||p===void 0||p.call(S);return}!S.width&&typeof window!="undefined"&&(S.width=window.innerWidth),!S.height&&typeof window!="undefined"&&(S.height=window.innerHeight),S.center||(S.center=[S.width/2,S.height/2]);var E=S.center;if(T===1){x[0].x=E[0],x[0].y=E[1],(b=S.onLayoutEnd)===null||b===void 0||b.call(S);return}var O=S.nodeSize,k=S.nodeSpacing,y=[],l,U=0;(0,R.isArray)(O)?l=Math.max(O[0],O[1]):l=O,(0,R.isArray)(k)?U=Math.max(k[0],k[1]):(0,R.isNumber)(k)&&(U=k),x.forEach(function(et){y.push(et);var it=l;(0,R.isArray)(et.size)?it=Math.max(et.size[0],et.size[1]):(0,R.isNumber)(et.size)?it=et.size:(0,R.isObject)(et.size)&&(it=Math.max(et.size.width,et.size.height)),l=Math.max(l,it),(0,R.isFunction)(k)&&(U=Math.max(k(et),U))}),S.clockwise=S.counterclockwise!==void 0?!S.counterclockwise:S.clockwise;var X={},F={};if(y.forEach(function(et,it){X[et.id]=et,F[et.id]=it}),(S.sortBy==="degree"||!(0,R.isString)(S.sortBy)||y[0][S.sortBy]===void 0)&&(S.sortBy="degree",!(0,R.isNumber)(x[0].degree))){var W=(0,R.getDegree)(x.length,F,g);y.forEach(function(et,it){et.degree=W[it].all})}y.sort(function(et,it){return it[S.sortBy]-et[S.sortBy]}),S.maxValueNode=y[0],S.maxLevelDiff=S.maxLevelDiff||S.maxValueNode[S.sortBy]/4;var j=[[]],V=j[0];y.forEach(function(et){if(V.length>0){var it=Math.abs(V[0][S.sortBy]-et[S.sortBy]);S.maxLevelDiff&&it>=S.maxLevelDiff&&(V=[],j.push(V))}V.push(et)});var q=l+(U||S.minNodeSpacing);if(!S.preventOverlap){var $=j.length>0&&j[0].length>1,J=Math.min(S.width,S.height)/2-q,ut=J/(j.length+($?1:0));q=Math.min(q,ut)}var nt=0;if(j.forEach(function(et){var it=S.sweep;it===void 0&&(it=2*Math.PI-2*Math.PI/et.length);var Tt=et.dTheta=it/Math.max(1,et.length-1);if(et.length>1&&S.preventOverlap){var Nt=Math.cos(Tt)-Math.cos(0),st=Math.sin(Tt)-Math.sin(0),xt=Math.sqrt(q*q/(Nt*Nt+st*st));nt=Math.max(xt,nt)}et.r=nt,nt+=q}),S.equidistant){for(var yt=0,dt=0,Ft=0;Ft<j.length;Ft++){var wt=j[Ft],St=wt.r-dt;yt=Math.max(yt,St)}dt=0,j.forEach(function(et,it){it===0&&(dt=et.r),et.r=dt,dt+=yt})}return j.forEach(function(et){var it=et.dTheta,Tt=et.r;et.forEach(function(Nt,st){var xt=S.startAngle+(S.clockwise?1:-1)*it*st;Nt.x=E[0]+Tt*Math.cos(xt),Nt.y=E[1]+Tt*Math.sin(xt)})}),S.onLayoutEnd&&S.onLayoutEnd(),{nodes:x,edges:g}},L.prototype.getType=function(){return"concentric"},L}(w.Base);G.ConcentricLayout=M},416470:function(We,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.FORCE_LAYOUT_TYPE_MAP=G.LAYOUT_MESSAGE=void 0,G.LAYOUT_MESSAGE={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"},G.FORCE_LAYOUT_TYPE_MAP={gForce:!0,force2:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0}},920171:function(We,G,_){"use strict";var m=this&&this.__extends||function(){var S=function(x,g){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,E){T.__proto__=E}||function(T,E){for(var O in E)Object.prototype.hasOwnProperty.call(E,O)&&(T[O]=E[O])},S(x,g)};return function(x,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");S(x,g);function T(){this.constructor=x}x.prototype=g===null?Object.create(g):(T.prototype=g.prototype,new T)}}(),R=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(G,"__esModule",{value:!0}),G.DagreLayout=void 0;var w=R(_(441106)),M=_(449784),P=_(762329),L=_(627652),p=function(S){m(x,S);function x(g){var T=S.call(this)||this;return T.rankdir="TB",T.nodesep=50,T.ranksep=50,T.controlPoints=!1,T.sortByCombo=!1,T.edgeLabelSpace=!0,T.radial=!1,T.nodes=[],T.edges=[],T.onLayoutEnd=function(){},T.layoutNode=function(E){var O=T,k=O.nodes,y=k.find(function(U){return U.id===E});if(y){var l=y.layout!==!1;return l}return!0},T.updateCfg(g),T}return x.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}},x.prototype.execute=function(){var g=this,T,E,O,k,y=this,l=y.nodes,U=y.nodeSize,X=y.rankdir,F=y.combos,W=y.begin,j=y.radial,V=y.comboEdges,q=V===void 0?[]:V,$=y.vedges,J=$===void 0?[]:$;if(l){var ut=y.edges||[],nt=new L.Graph({multigraph:!0,compound:!0});y.nodeMap={};var yt={};l.forEach(function(Je){y.nodeMap[Je.id]=Je,Je.comboId&&(yt[Je.comboId]=yt[Je.comboId]||[],yt[Je.comboId].push(Je.id))});var dt=[],Ft={};!((T=y.nodeOrder)===null||T===void 0)&&T.length?(y.nodeOrder.forEach(function(Je){Ft[Je]=!0,dt.push(y.nodeMap[Je])}),l.forEach(function(Je){Ft[Je.id]||dt.push(Je)})):dt=l;var wt;U?(0,M.isArray)(U)?wt=function(){return U}:wt=function(){return[U,U]}:wt=function(Je){return Je.size?(0,M.isArray)(Je.size)?Je.size:(0,M.isObject)(Je.size)?[Je.size.width||40,Je.size.height||40]:[Je.size,Je.size]:[40,40]};var St=(0,M.getFunc)(y.ranksep,50,y.ranksepFunc),et=(0,M.getFunc)(y.nodesep,50,y.nodesepFunc),it=et,Tt=St;(X==="LR"||X==="RL")&&(it=St,Tt=et),nt.setDefaultEdgeLabel(function(){return{}}),nt.setGraph(y);var Nt={};this.sortByCombo&&F&&F.forEach(function(Je){if(Nt[Je.id]=Je,Je.collapsed){var dr=wt(Je),nr=Tt(Je),oe=it(Je),Te=dr[0]+2*oe,Lr=dr[1]+2*nr;nt.setNode(Je.id,{width:Te,height:Lr})}Je.parentId&&(Nt[Je.parentId]||nt.setNode(Je.parentId,{}),nt.setParent(Je.id,Je.parentId))}),dt.filter(function(Je){return Je.layout!==!1}).forEach(function(Je){var dr=wt(Je),nr=Tt(Je),oe=it(Je),Te=dr[0]+2*oe,Lr=dr[1]+2*nr,Nr=Je.layer;(0,M.isNumber)(Nr)?nt.setNode(Je.id,{width:Te,height:Lr,layer:Nr}):nt.setNode(Je.id,{width:Te,height:Lr}),g.sortByCombo&&Je.comboId&&(Nt[Je.comboId]||(Nt[Je.comboId]={id:Je.comboId},nt.setNode(Je.comboId,{})),nt.setParent(Je.id,Je.comboId))}),ut.forEach(function(Je){var dr=(0,M.getEdgeTerminal)(Je,"source"),nr=(0,M.getEdgeTerminal)(Je,"target");g.layoutNode(dr)&&g.layoutNode(nr)&&nt.setEdge(dr,nr,{weight:Je.weight||1})}),(E=q==null?void 0:q.concat(J||[]))===null||E===void 0||E.forEach(function(Je){var dr,nr,oe=Je.source,Te=Je.target,Lr=!((dr=Nt[oe])===null||dr===void 0)&&dr.collapsed?[oe]:yt[oe]||[oe],Nr=!((nr=Nt[Te])===null||nr===void 0)&&nr.collapsed?[Te]:yt[Te]||[Te];Lr.forEach(function(ln){Nr.forEach(function(en){nt.setEdge(ln,en,{weight:Je.weight||1})})})});var st=void 0;!((O=y.preset)===null||O===void 0)&&O.nodes&&(st=new L.Graph({multigraph:!0,compound:!0}),y.preset.nodes.forEach(function(Je){st==null||st.setNode(Je.id,Je)})),w.default.layout(nt,{prevGraph:st,edgeLabelSpace:y.edgeLabelSpace,keepNodeOrder:!!y.nodeOrder,nodeOrder:y.nodeOrder});var xt=[0,0];if(W){var zt=1/0,Wt=1/0;nt.nodes().forEach(function(Je){var dr=nt.node(Je);zt>dr.x&&(zt=dr.x),Wt>dr.y&&(Wt=dr.y)}),nt.edges().forEach(function(Je){var dr,nr=nt.edge(Je);(dr=nr.points)===null||dr===void 0||dr.forEach(function(oe){zt>oe.x&&(zt=oe.x),Wt>oe.y&&(Wt=oe.y)})}),xt[0]=W[0]-zt,xt[1]=W[1]-Wt}var _t=X==="LR"||X==="RL";if(j){var Xt=this,te=Xt.focusNode,ue=Xt.ranksep,fe=Xt.getRadialPos,Gt=(0,M.isString)(te)?te:te==null?void 0:te.id,ae=Gt?(k=nt.node(Gt))===null||k===void 0?void 0:k._rank:0,Ne=[],ee=_t?"y":"x",de=_t?"height":"width",ze=1/0,be=-1/0;nt.nodes().forEach(function(Je){var dr=nt.node(Je);if(y.nodeMap[Je]){var nr=et(y.nodeMap[Je]);if(ae===0)Ne[dr._rank]||(Ne[dr._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),Ne[dr._rank].nodes.push(Je),Ne[dr._rank].totalWidth+=nr*2+dr[de],Ne[dr._rank].maxSize<Math.max(dr.width,dr.height)&&(Ne[dr._rank].maxSize=Math.max(dr.width,dr.height));else{var oe=dr._rank-ae;if(oe===0)Ne[oe]||(Ne[oe]={nodes:[],totalWidth:0,maxSize:-1/0}),Ne[oe].nodes.push(Je),Ne[oe].totalWidth+=nr*2+dr[de],Ne[oe].maxSize<Math.max(dr.width,dr.height)&&(Ne[oe].maxSize=Math.max(dr.width,dr.height));else{var Te=Math.abs(oe);Ne[Te]||(Ne[Te]={left:[],right:[],totalWidth:0,maxSize:-1/0}),Ne[Te].totalWidth+=nr*2+dr[de],Ne[Te].maxSize<Math.max(dr.width,dr.height)&&(Ne[Te].maxSize=Math.max(dr.width,dr.height)),oe<0?Ne[Te].left.push(Je):Ne[Te].right.push(Je)}}var Lr=dr[ee]-dr[de]/2-nr,Nr=dr[ee]+dr[de]/2+nr;Lr<ze&&(ze=Lr),Nr>be&&(be=Nr)}});var ke=ue||50,he={},vt=(be-ze)/.9,ie=[(ze+be-vt)*.5,(ze+be+vt)*.5],Pe=function(Je,dr,nr,oe){nr===void 0&&(nr=-1/0),oe===void 0&&(oe=[0,1]);var Te=nr;return Je.forEach(function(Lr){var Nr=nt.node(Lr);he[Lr]=dr;var ln=fe(Nr[ee],ie,vt,dr,oe),en=ln.x,Dr=ln.y;if(y.nodeMap[Lr]){y.nodeMap[Lr].x=en+xt[0],y.nodeMap[Lr].y=Dr+xt[1],y.nodeMap[Lr]._order=Nr._order;var Fr=St(y.nodeMap[Lr]);Te<Fr&&(Te=Fr)}}),Te},qe=!0,Qe=0;Ne.forEach(function(Je){var dr,nr,oe,Te,Lr,Nr,ln;if(!(!(!((dr=Je==null?void 0:Je.nodes)===null||dr===void 0)&&dr.length)&&!(!((nr=Je==null?void 0:Je.left)===null||nr===void 0)&&nr.length)&&!(!((oe=Je==null?void 0:Je.right)===null||oe===void 0)&&oe.length))){if(qe&&Je.nodes.length===1){var en=Je.nodes[0];if(!y.nodeMap[en])return;y.nodeMap[en].x=xt[0],y.nodeMap[en].y=xt[1],he[Je.nodes[0]]=0,ke=St(y.nodeMap[en]),qe=!1;return}ke=Math.max(ke,Je.totalWidth/(2*Math.PI));var Dr=-1/0;if(ae===0||!((Te=Je.nodes)===null||Te===void 0)&&Te.length)Dr=Pe(Je.nodes,ke,Dr,[0,1]);else{var Fr=((Lr=Je.left)===null||Lr===void 0?void 0:Lr.length)/(((Nr=Je.left)===null||Nr===void 0?void 0:Nr.length)+((ln=Je.right)===null||ln===void 0?void 0:ln.length));Dr=Pe(Je.left,ke,Dr,[0,Fr]),Dr=Pe(Je.right,ke,Dr,[Fr+.05,1])}ke+=Dr,qe=!1,Qe-Je.maxSize}}),nt.edges().forEach(function(Je){var dr,nr,oe,Te=nt.edge(Je),Lr=ut.findIndex(function(yn){var bn=(0,M.getEdgeTerminal)(yn,"source"),tt=(0,M.getEdgeTerminal)(yn,"target");return bn===Je.v&&tt===Je.w});if(!(Lr<=-1)&&y.edgeLabelSpace&&y.controlPoints&&ut[Lr].type!=="loop"){var Nr=ee==="x"?"y":"x",ln=(dr=Te==null?void 0:Te.points)===null||dr===void 0?void 0:dr.slice(1,Te.points.length-1),en=[],Dr=(nr=nt.node(Je.v))===null||nr===void 0?void 0:nr[Nr],Fr=Dr-((oe=nt.node(Je.w))===null||oe===void 0?void 0:oe[Nr]),Kr=he[Je.v],an=Kr-he[Je.w];ln==null||ln.forEach(function(yn){var bn=(yn[Nr]-Dr)/Fr*an+Kr,tt=fe(yn[ee],ie,vt,bn);en.push({x:tt.x+xt[0],y:tt.y+xt[1]})}),ut[Lr].controlPoints=en}})}else{var lr=new Set,fr=X==="BT"||X==="RL",kr=fr?function(Je,dr){return dr-Je}:function(Je,dr){return Je-dr};nt.nodes().forEach(function(Je){var dr=nt.node(Je);if(dr){var nr=g.nodeMap[Je];nr||(nr=F==null?void 0:F.find(function(oe){return oe.id===Je})),nr&&(nr.x=dr.x+xt[0],nr.y=dr.y+xt[1],nr._order=dr._order,lr.add(_t?nr.x:nr.y))}});var En=Array.from(lr).sort(kr),fn=_t?function(Je,dr){return Je.x!==dr.x}:function(Je,dr){return Je.y!==dr.y},Vr=_t?function(Je,dr,nr){var oe=Math.max(dr.y,nr.y),Te=Math.min(dr.y,nr.y);return Je.filter(function(Lr){return Lr.y<=oe&&Lr.y>=Te})}:function(Je,dr,nr){var oe=Math.max(dr.x,nr.x),Te=Math.min(dr.x,nr.x);return Je.filter(function(Lr){return Lr.x<=oe&&Lr.x>=Te})};nt.edges().forEach(function(Je){var dr,nr=nt.edge(Je),oe=ut.findIndex(function(Nr){var ln=(0,M.getEdgeTerminal)(Nr,"source"),en=(0,M.getEdgeTerminal)(Nr,"target");return ln===Je.v&&en===Je.w});if(!(oe<=-1)&&y.edgeLabelSpace&&y.controlPoints&&ut[oe].type!=="loop"){(dr=nr==null?void 0:nr.points)===null||dr===void 0||dr.forEach(function(Nr){Nr.x+=xt[0],Nr.y+=xt[1]});var Te=y.nodeMap[Je.v],Lr=y.nodeMap[Je.w];ut[oe].controlPoints=b(nr==null?void 0:nr.points,Te,Lr,En,_t,fn,Vr)}})}return y.onLayoutEnd&&y.onLayoutEnd(),{nodes:l,edges:ut}}},x.prototype.getRadialPos=function(g,T,E,O,k){k===void 0&&(k=[0,1]);var y=(g-T[0])/E;y=y*(k[1]-k[0])+k[0];var l=y*2*Math.PI;return{x:Math.cos(l)*O,y:Math.sin(l)*O}},x.prototype.getType=function(){return"dagre"},x}(P.Base);G.DagreLayout=p;var b=function(S,x,g,T,E,O,k){var y=(S==null?void 0:S.slice(1,S.length-1))||[];if(x&&g){var l=x.x,U=x.y,X=g.x,F=g.y;if(E&&(l=x.y,U=x.x,X=g.y,F=g.x),F!==U&&l!==X){var W=T.indexOf(U),j=T[W+1];if(j){var V=y[0],q=E?{x:(U+j)/2,y:(V==null?void 0:V.y)||X}:{x:(V==null?void 0:V.x)||X,y:(U+j)/2};(!V||O(V,q))&&y.unshift(q)}var $=T.indexOf(F),J=Math.abs($-W);if(J===1)y=k(y,x,g),y.length||y.push(E?{x:(U+F)/2,y:l}:{x:l,y:(U+F)/2});else if(J>1){var ut=T[$-1];if(ut){var nt=y[y.length-1],yt=E?{x:(F+ut)/2,y:(nt==null?void 0:nt.y)||X}:{x:(nt==null?void 0:nt.x)||l,y:(F+ut)/2};(!nt||O(nt,yt))&&y.push(yt)}}}}return y}},627652:function(We,G,_){"use strict";var m=this&&this.__extends||function(){var M=function(P,L){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,b){p.__proto__=b}||function(p,b){for(var S in b)Object.prototype.hasOwnProperty.call(b,S)&&(p[S]=b[S])},M(P,L)};return function(P,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");M(P,L);function p(){this.constructor=P}P.prototype=L===null?Object.create(L):(p.prototype=L.prototype,new p)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.Graph=void 0;var R=_(199905),w=function(M){m(P,M);function P(){return M!==null&&M.apply(this,arguments)||this}return P}(R.Graph);G.Graph=w},441106:function(We,G,_){"use strict";var m=this&&this.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(G,"__esModule",{value:!0});var R=m(_(265236)),w=_(269209);G.default={layout:R.default,util:{time:w.time,notime:w.notime}}},178029:function(We,G,_){"use strict";var m=this&&this.__importDefault||function(L){return L&&L.__esModule?L:{default:L}};Object.defineProperty(G,"__esModule",{value:!0});var R=m(_(40773)),w=function(L){var p=function(S){return function(x){var g;return((g=S.edge(x))===null||g===void 0?void 0:g.weight)||1}},b=L.graph().acyclicer==="greedy"?(0,R.default)(L,p(L)):M(L);b==null||b.forEach(function(S){var x=L.edge(S);L.removeEdgeObj(S),x.forwardName=S.name,x.reversed=!0,L.setEdge(S.w,S.v,x,"rev-".concat(Math.random()))})},M=function(L){var p=[],b={},S={},x=function(g){var T;S[g]||(S[g]=!0,b[g]=!0,(T=L.outEdges(g))===null||T===void 0||T.forEach(function(E){b[E.w]?p.push(E):x(E.w)}),delete b[g])};return L.nodes().forEach(x),p},P=function(L){L.edges().forEach(function(p){var b=L.edge(p);if(b.reversed){L.removeEdgeObj(p);var S=b.forwardName;delete b.reversed,delete b.forwardName,L.setEdge(p.w,p.v,b,S)}})};G.default={run:w,undo:P}},111500:function(We,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var m=_(269209),R=function(M){var P,L=function(p){var b=M.children(p),S=M.node(p);if(b!=null&&b.length&&b.forEach(function(T){return L(T)}),S.hasOwnProperty("minRank")){S.borderLeft=[],S.borderRight=[];for(var x=S.minRank,g=S.maxRank+1;x<g;x+=1)w(M,"borderLeft","_bl",p,S,x),w(M,"borderRight","_br",p,S,x)}};(P=M.children())===null||P===void 0||P.forEach(function(p){return L(p)})},w=function(M,P,L,p,b,S){var x={rank:S,borderType:P,width:0,height:0},g=b[P][S-1],T=(0,m.addDummyNode)(M,"border",x,L);b[P][S]=T,M.setParent(T,p),g&&M.setEdge(g,T,{weight:1})};G.default=R},335279:function(We,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var _=function(b){var S,x=(S=b.graph().rankdir)===null||S===void 0?void 0:S.toLowerCase();(x==="lr"||x==="rl")&&R(b)},m=function(b){var S,x=(S=b.graph().rankdir)===null||S===void 0?void 0:S.toLowerCase();(x==="bt"||x==="rl")&&M(b),(x==="lr"||x==="rl")&&(L(b),R(b))},R=function(b){b.nodes().forEach(function(S){w(b.node(S))}),b.edges().forEach(function(S){w(b.edge(S))})},w=function(b){var S=b.width;b.width=b.height,b.height=S},M=function(b){b.nodes().forEach(function(S){P(b.node(S))}),b.edges().forEach(function(S){var x,g=b.edge(S);(x=g.points)===null||x===void 0||x.forEach(function(T){return P(T)}),g.hasOwnProperty("y")&&P(g)})},P=function(b){b!=null&&b.y&&(b.y=-b.y)},L=function(b){b.nodes().forEach(function(S){p(b.node(S))}),b.edges().forEach(function(S){var x,g=b.edge(S);(x=g.points)===null||x===void 0||x.forEach(function(T){return p(T)}),g.hasOwnProperty("x")&&p(g)})},p=function(b){var S=b.x;b.x=b.y,b.y=S};G.default={adjust:_,undo:m}},455532:function(We,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var _=function(w,M){if(w!=="next"&&w!=="prev")return M},m=function(w){w.prev.next=w.next,w.next.prev=w.prev,delete w.next,delete w.prev},R=function(){function w(){var M={};M.prev=M,M.next=M.prev,this.shortcut=M}return w.prototype.dequeue=function(){var M=this.shortcut,P=M.prev;if(P&&P!==M)return m(P),P},w.prototype.enqueue=function(M){var P=this.shortcut;M.prev&&M.next&&m(M),M.next=P.next,P.next.prev=M,P.next=M,M.prev=P},w.prototype.toString=function(){for(var M=[],P=this.shortcut,L=P.prev;L!==P;)M.push(JSON.stringify(L,_)),L=L==null?void 0:L.prev;return"[".concat(M.join(", "),"]")},w}();G.default=R},40773:function(We,G,_){"use strict";var m=this&&this.__extends||function(){var E=function(O,k){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,l){y.__proto__=l}||function(y,l){for(var U in l)Object.prototype.hasOwnProperty.call(l,U)&&(y[U]=l[U])},E(O,k)};return function(O,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");E(O,k);function y(){this.constructor=O}O.prototype=k===null?Object.create(k):(y.prototype=k.prototype,new y)}}(),R=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(G,"__esModule",{value:!0});var w=R(_(455532)),M=_(199905),P=function(E){m(O,E);function O(){return E!==null&&E.apply(this,arguments)||this}return O}(w.default),L=function(E){m(O,E);function O(){return E!==null&&E.apply(this,arguments)||this}return O}(M.Graph),p=function(){return 1},b=function(E,O){var k;if(E.nodeCount()<=1)return[];var y=g(E,O||p),l=S(y.graph,y.buckets,y.zeroIdx);return(k=l.map(function(U){return E.outEdges(U.v,U.w)}))===null||k===void 0?void 0:k.flat()},S=function(E,O,k){for(var y=[],l=O[O.length-1],U=O[0],X;E.nodeCount();){for(;X=U.dequeue();)x(E,O,k,X);for(;X=l.dequeue();)x(E,O,k,X);if(E.nodeCount()){for(var F=O.length-2;F>0;--F)if(X=O[F].dequeue(),X){y=y.concat(x(E,O,k,X,!0));break}}}return y},x=function(E,O,k,y,l){var U,X,F=[];return(U=E.inEdges(y.v))===null||U===void 0||U.forEach(function(W){var j=E.edge(W),V=E.node(W.v);l&&F.push({v:W.v,w:W.w,in:0,out:0}),V.out===void 0&&(V.out=0),V.out-=j,T(O,k,V)}),(X=E.outEdges(y.v))===null||X===void 0||X.forEach(function(W){var j=E.edge(W),V=W.w,q=E.node(V);q.in===void 0&&(q.in=0),q.in-=j,T(O,k,q)}),E.removeNode(y.v),l?F:void 0},g=function(E,O){var k=new L,y=0,l=0;E.nodes().forEach(function(j){k.setNode(j,{v:j,in:0,out:0})}),E.edges().forEach(function(j){var V=k.edge(j)||0,q=(O==null?void 0:O(j))||1,$=V+q;k.setEdge(j.v,j.w,$),l=Math.max(l,k.node(j.v).out+=q),y=Math.max(y,k.node(j.w).in+=q)});for(var U=[],X=l+y+3,F=0;F<X;F++)U.push(new P);var W=y+1;return k.nodes().forEach(function(j){T(U,W,k.node(j))}),{buckets:U,zeroIdx:W,graph:k}},T=function(E,O,k){k.out?k.in?E[k.out-k.in+O].enqueue(k):E[E.length-1].enqueue(k):E[0].enqueue(k)};G.default=b},265236:function(We,G,_){"use strict";var m=this&&this.__assign||function(){return m=Object.assign||function(_t){for(var Xt,te=1,ue=arguments.length;te<ue;te++){Xt=arguments[te];for(var fe in Xt)Object.prototype.hasOwnProperty.call(Xt,fe)&&(_t[fe]=Xt[fe])}return _t},m.apply(this,arguments)},R=this&&this.__importDefault||function(_t){return _t&&_t.__esModule?_t:{default:_t}};Object.defineProperty(G,"__esModule",{value:!0});var w=R(_(178029)),M=R(_(546171)),P=R(_(576827)),L=_(269209),p=R(_(933562)),b=R(_(59596)),S=R(_(111500)),x=R(_(335279)),g=R(_(819597)),T=R(_(100095)),E=R(_(724956)),O=_(627652),k=function(_t,Xt){var te=Xt&&Xt.debugTiming?L.time:L.notime;te("layout",function(){Xt&&!Xt.keepNodeOrder&&Xt.prevGraph&&te("  inheritOrder",function(){l(_t,Xt.prevGraph)});var ue=te("  buildLayoutGraph",function(){return ut(_t)});Xt&&Xt.edgeLabelSpace===!1||te("  makeSpaceForEdgeLabels",function(){nt(ue)});try{te("  runLayout",function(){y(ue,te,Xt)})}catch(fe){if(fe.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,fe);return}throw fe}te("  updateInputGraph",function(){U(_t,ue)})})},y=function(_t,Xt,te){Xt("    removeSelfEdges",function(){Nt(_t)}),Xt("    acyclic",function(){w.default.run(_t)}),Xt("    nestingGraph.run",function(){b.default.run(_t)}),Xt("    rank",function(){(0,P.default)((0,L.asNonCompoundGraph)(_t))}),Xt("    injectEdgeLabelProxies",function(){yt(_t)}),Xt("    removeEmptyRanks",function(){(0,L.removeEmptyRanks)(_t)}),Xt("    nestingGraph.cleanup",function(){b.default.cleanup(_t)}),Xt("    normalizeRanks",function(){(0,L.normalizeRanks)(_t)}),Xt("    assignRankMinMax",function(){dt(_t)}),Xt("    removeEdgeLabelProxies",function(){Ft(_t)}),Xt("    normalize.run",function(){M.default.run(_t)}),Xt("    parentDummyChains",function(){(0,p.default)(_t)}),Xt("    addBorderSegments",function(){(0,S.default)(_t)}),te&&te.keepNodeOrder&&Xt("    initDataOrder",function(){(0,E.default)(_t,te.nodeOrder)}),Xt("    order",function(){(0,g.default)(_t,te==null?void 0:te.keepNodeOrder)}),Xt("    insertSelfEdges",function(){st(_t)}),Xt("    adjustCoordinateSystem",function(){x.default.adjust(_t)}),Xt("    position",function(){(0,T.default)(_t)}),Xt("    positionSelfEdges",function(){xt(_t)}),Xt("    removeBorderNodes",function(){Tt(_t)}),Xt("    normalize.undo",function(){M.default.undo(_t)}),Xt("    fixupEdgeLabelCoords",function(){et(_t)}),Xt("    undoCoordinateSystem",function(){x.default.undo(_t)}),Xt("    translateGraph",function(){wt(_t)}),Xt("    assignNodeIntersects",function(){St(_t)}),Xt("    reversePoints",function(){it(_t)}),Xt("    acyclic.undo",function(){w.default.undo(_t)})},l=function(_t,Xt){_t.nodes().forEach(function(te){var ue=_t.node(te),fe=Xt.node(te);fe!==void 0?(ue.fixorder=fe._order,delete fe._order):delete ue.fixorder})},U=function(_t,Xt){_t.nodes().forEach(function(te){var ue,fe=_t.node(te);if(fe){var Gt=Xt.node(te);fe.x=Gt.x,fe.y=Gt.y,fe._order=Gt.order,fe._rank=Gt.rank,!((ue=Xt.children(te))===null||ue===void 0)&&ue.length&&(fe.width=Gt.width,fe.height=Gt.height)}}),_t.edges().forEach(function(te){var ue=_t.edge(te),fe=Xt.edge(te);ue.points=fe?fe.points:[],fe&&fe.hasOwnProperty("x")&&(ue.x=fe.x,ue.y=fe.y)}),_t.graph().width=Xt.graph().width,_t.graph().height=Xt.graph().height},X=["nodesep","edgesep","ranksep","marginx","marginy"],F={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},W=["acyclicer","ranker","rankdir","align"],j=["width","height","layer","fixorder"],V={width:0,height:0},q=["minlen","weight","width","height","labeloffset"],$={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},J=["labelpos"],ut=function(_t){var Xt=new O.Graph({multigraph:!0,compound:!0}),te=Wt(_t.graph()),ue={};return W==null||W.forEach(function(fe){te[fe]!==void 0&&(ue[fe]=te[fe])}),Xt.setGraph(Object.assign({},F,zt(te,X),ue)),_t.nodes().forEach(function(fe){var Gt=Wt(_t.node(fe)),ae=m(m({},V),Gt),Ne=zt(ae,j);Xt.setNode(fe,Ne),Xt.setParent(fe,_t.parent(fe))}),_t.edges().forEach(function(fe){var Gt=Wt(_t.edge(fe)),ae={};J==null||J.forEach(function(Ne){Gt[Ne]!==void 0&&(ae[Ne]=Gt[Ne])}),Xt.setEdgeObj(fe,Object.assign({},$,zt(Gt,q),ae))}),Xt},nt=function(_t){var Xt=_t.graph();Xt.ranksep||(Xt.ranksep=0),Xt.ranksep/=2,_t.nodes().forEach(function(te){var ue=_t.node(te);isNaN(ue.layer)||ue.layer||(ue.layer=0)}),_t.edges().forEach(function(te){var ue,fe=_t.edge(te);fe.minlen*=2,((ue=fe.labelpos)===null||ue===void 0?void 0:ue.toLowerCase())!=="c"&&(Xt.rankdir==="TB"||Xt.rankdir==="BT"?fe.width+=fe.labeloffset:fe.height+=fe.labeloffset)})},yt=function(_t){_t.edges().forEach(function(Xt){var te=_t.edge(Xt);if(te.width&&te.height){var ue=_t.node(Xt.v),fe=_t.node(Xt.w),Gt={e:Xt,rank:(fe.rank-ue.rank)/2+ue.rank};(0,L.addDummyNode)(_t,"edge-proxy",Gt,"_ep")}})},dt=function(_t){var Xt=0;_t.nodes().forEach(function(te){var ue,fe,Gt=_t.node(te);Gt.borderTop&&(Gt.minRank=(ue=_t.node(Gt.borderTop))===null||ue===void 0?void 0:ue.rank,Gt.maxRank=(fe=_t.node(Gt.borderBottom))===null||fe===void 0?void 0:fe.rank,Xt=Math.max(Xt,Gt.maxRank||-1/0))}),_t.graph().maxRank=Xt},Ft=function(_t){_t.nodes().forEach(function(Xt){var te=_t.node(Xt);te.dummy==="edge-proxy"&&(_t.edge(te.e).labelRank=te.rank,_t.removeNode(Xt))})},wt=function(_t){var Xt,te=0,ue,fe=0,Gt=_t.graph(),ae=Gt.marginx||0,Ne=Gt.marginy||0,ee=function(de){if(de){var ze=de.x,be=de.y,ke=de.width,he=de.height;!isNaN(ze)&&!isNaN(ke)&&(Xt===void 0&&(Xt=ze-ke/2),Xt=Math.min(Xt,ze-ke/2),te=Math.max(te,ze+ke/2)),!isNaN(be)&&!isNaN(he)&&(ue===void 0&&(ue=be-he/2),ue=Math.min(ue,be-he/2),fe=Math.max(fe,be+he/2))}};_t.nodes().forEach(function(de){ee(_t.node(de))}),_t.edges().forEach(function(de){var ze=_t.edge(de);ze!=null&&ze.hasOwnProperty("x")&&ee(ze)}),Xt-=ae,ue-=Ne,_t.nodes().forEach(function(de){var ze=_t.node(de);ze&&(ze.x-=Xt,ze.y-=ue)}),_t.edges().forEach(function(de){var ze,be=_t.edge(de);(ze=be.points)===null||ze===void 0||ze.forEach(function(ke){ke.x-=Xt,ke.y-=ue}),be.hasOwnProperty("x")&&(be.x-=Xt),be.hasOwnProperty("y")&&(be.y-=ue)}),Gt.width=te-Xt+ae,Gt.height=fe-ue+Ne},St=function(_t){_t.edges().forEach(function(Xt){var te=_t.edge(Xt),ue=_t.node(Xt.v),fe=_t.node(Xt.w),Gt,ae;te.points?(Gt=te.points[0],ae=te.points[te.points.length-1]):(te.points=[],Gt=fe,ae=ue),te.points.unshift((0,L.intersectRect)(ue,Gt)),te.points.push((0,L.intersectRect)(fe,ae))})},et=function(_t){_t.edges().forEach(function(Xt){var te=_t.edge(Xt);if(te!=null&&te.hasOwnProperty("x"))switch((te.labelpos==="l"||te.labelpos==="r")&&(te.width-=te.labeloffset),te.labelpos){case"l":te.x-=te.width/2+te.labeloffset;break;case"r":te.x+=te.width/2+te.labeloffset;break}})},it=function(_t){_t.edges().forEach(function(Xt){var te,ue=_t.edge(Xt);ue.reversed&&((te=ue.points)===null||te===void 0||te.reverse())})},Tt=function(_t){_t.nodes().forEach(function(Xt){var te,ue,fe;if(!((te=_t.children(Xt))===null||te===void 0)&&te.length){var Gt=_t.node(Xt),ae=_t.node(Gt.borderTop),Ne=_t.node(Gt.borderBottom),ee=_t.node(Gt.borderLeft[((ue=Gt.borderLeft)===null||ue===void 0?void 0:ue.length)-1]),de=_t.node(Gt.borderRight[((fe=Gt.borderRight)===null||fe===void 0?void 0:fe.length)-1]);Gt.width=Math.abs((de==null?void 0:de.x)-(ee==null?void 0:ee.x))||10,Gt.height=Math.abs((Ne==null?void 0:Ne.y)-(ae==null?void 0:ae.y))||10,Gt.x=((ee==null?void 0:ee.x)||0)+Gt.width/2,Gt.y=((ae==null?void 0:ae.y)||0)+Gt.height/2}}),_t.nodes().forEach(function(Xt){var te;((te=_t.node(Xt))===null||te===void 0?void 0:te.dummy)==="border"&&_t.removeNode(Xt)})},Nt=function(_t){_t.edges().forEach(function(Xt){if(Xt.v===Xt.w){var te=_t.node(Xt.v);te.selfEdges||(te.selfEdges=[]),te.selfEdges.push({e:Xt,label:_t.edge(Xt)}),_t.removeEdgeObj(Xt)}})},st=function(_t){var Xt=(0,L.buildLayerMatrix)(_t);Xt==null||Xt.forEach(function(te){var ue=0;te==null||te.forEach(function(fe,Gt){var ae,Ne=_t.node(fe);Ne.order=Gt+ue,(ae=Ne.selfEdges)===null||ae===void 0||ae.forEach(function(ee){(0,L.addDummyNode)(_t,"selfedge",{width:ee.label.width,height:ee.label.height,rank:Ne.rank,order:Gt+ ++ue,e:ee.e,label:ee.label},"_se")}),delete Ne.selfEdges})})},xt=function(_t){_t.nodes().forEach(function(Xt){var te=_t.node(Xt);if(te.dummy==="selfedge"){var ue=_t.node(te.e.v),fe=ue.x+ue.width/2,Gt=ue.y,ae=te.x-fe,Ne=ue.height/2;_t.setEdgeObj(te.e,te.label),_t.removeNode(Xt),te.label.points=[{x:fe+2*ae/3,y:Gt-Ne},{x:fe+5*ae/6,y:Gt-Ne},{y:Gt,x:fe+ae},{x:fe+5*ae/6,y:Gt+Ne},{x:fe+2*ae/3,y:Gt+Ne}],te.label.x=te.x,te.label.y=te.y}})},zt=function(_t,Xt){var te={};return Xt==null||Xt.forEach(function(ue){_t[ue]!==void 0&&(te[ue]=+_t[ue])}),te},Wt=function(_t){_t===void 0&&(_t={});var Xt={};return Object.keys(_t).forEach(function(te){Xt[te.toLowerCase()]=_t[te]}),Xt};G.default=k},59596:function(We,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var m=_(269209),R=function(p){var b,S=(0,m.addDummyNode)(p,"root",{},"_root"),x=M(p),g=Math.max.apply(Math,Object.values(x));Math.abs(g)===1/0&&(g=1);var T=g-1,E=2*T+1;p.graph().nestingRoot=S,p.edges().forEach(function(k){p.edge(k).minlen*=E});var O=P(p)+1;(b=p.children())===null||b===void 0||b.forEach(function(k){w(p,S,E,O,T,x,k)}),p.graph().nodeRankFactor=E},w=function(p,b,S,x,g,T,E){var O=p.children(E);if(!(O!=null&&O.length)){E!==b&&p.setEdge(b,E,{weight:0,minlen:S});return}var k=(0,m.addBorderNode)(p,"_bt"),y=(0,m.addBorderNode)(p,"_bb"),l=p.node(E);p.setParent(k,E),l.borderTop=k,p.setParent(y,E),l.borderBottom=y,O==null||O.forEach(function(U){w(p,b,S,x,g,T,U);var X=p.node(U),F=X.borderTop?X.borderTop:U,W=X.borderBottom?X.borderBottom:U,j=X.borderTop?x:2*x,V=F!==W?1:g-T[E]+1;p.setEdge(k,F,{minlen:V,weight:j,nestingEdge:!0}),p.setEdge(W,y,{minlen:V,weight:j,nestingEdge:!0})}),p.parent(E)||p.setEdge(b,k,{weight:0,minlen:g+T[E]})},M=function(p){var b,S={},x=function(g,T){var E=p.children(g);E==null||E.forEach(function(O){return x(O,T+1)}),S[g]=T};return(b=p.children())===null||b===void 0||b.forEach(function(g){return x(g,1)}),S},P=function(p){var b=0;return p.edges().forEach(function(S){b+=p.edge(S).weight}),b},L=function(p){var b=p.graph();b.nestingRoot&&p.removeNode(b.nestingRoot),delete b.nestingRoot,p.edges().forEach(function(S){var x=p.edge(S);x.nestingEdge&&p.removeEdgeObj(S)})};G.default={run:R,cleanup:L}},546171:function(We,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var m=_(269209),R=function(P){P.graph().dummyChains=[],P.edges().forEach(function(L){return w(P,L)})},w=function(P,L){var p=L.v,b=P.node(p).rank,S=L.w,x=P.node(S).rank,g=L.name,T=P.edge(L),E=T.labelRank;if(x!==b+1){P.removeEdgeObj(L);var O=P.graph(),k,y,l;for(l=0,++b;b<x;++l,++b)T.points=[],y={edgeLabel:T,width:0,height:0,edgeObj:L,rank:b},k=(0,m.addDummyNode)(P,"edge",y,"_d"),b===E&&(y.width=T.width,y.height=T.height,y.dummy="edge-label",y.labelpos=T.labelpos),P.setEdge(p,k,{weight:T.weight},g),l===0&&(O.dummyChains||(O.dummyChains=[]),O.dummyChains.push(k)),p=k;P.setEdge(p,S,{weight:T.weight},g)}},M=function(P){var L;(L=P.graph().dummyChains)===null||L===void 0||L.forEach(function(p){var b=P.node(p),S=b.edgeLabel,x;b.edgeObj&&P.setEdgeObj(b.edgeObj,S);for(var g=p;b.dummy;)x=P.successors(g)[0],P.removeNode(g),S.points.push({x:b.x,y:b.y}),b.dummy==="edge-label"&&(S.x=b.x,S.y=b.y,S.width=b.width,S.height=b.height),g=x,b=P.node(g)})};G.default={run:R,undo:M}},680314:function(We,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var _=function(m,R,w){var M={},P;w==null||w.forEach(function(L){for(var p=m.parent(L),b,S;p;){if(b=m.parent(p),b?(S=M[b],M[b]=p):(S=P,P=p),S&&S!==p){R.setEdge(S,p);return}p=b}})};G.default=_},989921:function(We,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var _=function(m,R){return R.map(function(w){var M=m.inEdges(w);if(!(M!=null&&M.length))return{v:w};{var P={sum:0,weight:0};return M==null||M.forEach(function(L){var p=m.edge(L),b=m.node(L.v);P.sum+=p.weight*b.order,P.weight+=p.weight}),{v:w,barycenter:P.sum/P.weight,weight:P.weight}}})};G.default=_},277006:function(We,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var m=_(627652),R=function(M,P,L){var p=w(M),b=new m.Graph({compound:!0}).setGraph({root:p}).setDefaultNodeLabel(function(S){return M.node(S)});return M.nodes().forEach(function(S){var x,g=M.node(S),T=M.parent(S);(g.rank===P||g.minRank<=P&&P<=g.maxRank)&&(b.setNode(S),b.setParent(S,T||p),(x=M[L](S))===null||x===void 0||x.forEach(function(E){var O=E.v===S?E.w:E.v,k=b.edgeFromArgs(O,S),y=k!==void 0?k.weight:0;b.setEdge(O,S,{weight:M.edge(E).weight+y})}),g.hasOwnProperty("minRank")&&b.setNode(S,{borderLeft:g.borderLeft[P],borderRight:g.borderRight[P]}))}),b},w=function(M){for(var P;M.hasNode(P="_root".concat(Math.random())););return P};G.default=R},632957:function(We,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var m=_(269209),R=function(M,P,L){for(var p=(0,m.zipObject)(L,L.map(function(O,k){return k})),b=P.map(function(O){var k,y=(k=M.outEdges(O))===null||k===void 0?void 0:k.map(function(l){return{pos:p[l.w]||0,weight:M.edge(l).weight}});return y==null?void 0:y.sort(function(l,U){return l.pos-U.pos})}),S=b.flat().filter(function(O){return O!==void 0}),x=1;x<L.length;)x<<=1;var g=2*x-1;x-=1;var T=Array(g).fill(0,0,g),E=0;return S==null||S.forEach(function(O){if(O){var k=O.pos+x;T[k]+=O.weight;for(var y=0;k>0;)k%2&&(y+=T[k+1]),k=k-1>>1,T[k]+=O.weight;E+=O.weight*y}}),E},w=function(M,P){for(var L=0,p=1;p<(P==null?void 0:P.length);p+=1)L+=R(M,P[p-1],P[p]);return L};G.default=w},819597:function(We,G,_){"use strict";var m=this&&this.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(G,"__esModule",{value:!0});var R=m(_(115697)),w=m(_(632957)),M=m(_(277006)),P=m(_(680314)),L=m(_(99455)),p=_(449784),b=_(627652),S=_(269209),x=function(O,k){for(var y=(0,S.maxRank)(O),l=[],U=[],X=1;X<y+1;X++)l.push(X);for(var X=y-1;X>-1;X--)U.push(X);var F=g(O,l,"inEdges"),W=g(O,U,"outEdges"),j=(0,R.default)(O);E(O,j);for(var V=Number.POSITIVE_INFINITY,q,X=0,$=0;$<4;++X,++$){T(X%2?F:W,X%4>=2,!1,k),j=(0,S.buildLayerMatrix)(O);var J=(0,w.default)(O,j);J<V&&($=0,q=(0,p.clone)(j),V=J)}j=(0,R.default)(O),E(O,j);for(var X=0,$=0;$<4;++X,++$){T(X%2?F:W,X%4>=2,!0,k),j=(0,S.buildLayerMatrix)(O);var J=(0,w.default)(O,j);J<V&&($=0,q=(0,p.clone)(j),V=J)}E(O,q)},g=function(O,k,y){return k.map(function(l){return(0,M.default)(O,l,y)})},T=function(O,k,y,l){var U=new b.Graph;O==null||O.forEach(function(X){for(var F,W=X.graph().root,j=(0,L.default)(X,W,U,k,y,l),V=0;V<((F=j.vs)===null||F===void 0?void 0:F.length);V++){var q=X.node(j.vs[V]);q&&(q.order=V)}(0,P.default)(X,U,j.vs)})},E=function(O,k){k==null||k.forEach(function(y){y==null||y.forEach(function(l,U){O.node(l).order=U})})};G.default=x},724956:function(We,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var _=function(m,R){for(var w=m.nodes().filter(function(b){var S;return!(!((S=m.children(b))===null||S===void 0)&&S.length)}),M=w.map(function(b){return m.node(b).rank}),P=Math.max.apply(Math,M),L=[],p=0;p<P+1;p++)L[p]=[];R==null||R.forEach(function(b){var S=m.node(b);!S||S!=null&&S.dummy||isNaN(S.rank)||(S.fixorder=L[S.rank].length,L[S.rank].push(b))})};G.default=_},115697:function(We,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var m=_(233446),R=function(w){for(var M={},P=w.nodes().filter(function(O){var k;return!(!((k=w.children(O))===null||k===void 0)&&k.length)}),L=P.map(function(O){return w.node(O).rank}),p=(0,m.max)(L),b=[],S=0;S<p+1;S++)b.push([]);var x=function(O){var k;if(!M.hasOwnProperty(O)){M[O]=!0;var y=w.node(O);isNaN(y.rank)||b[y.rank].push(O),(k=w.successors(O))===null||k===void 0||k.forEach(function(l){return x(l)})}},g=P.sort(function(O,k){return w.node(O).rank-w.node(k).rank}),T=g.filter(function(O){return w.node(O).fixorder!==void 0}),E=T.sort(function(O,k){return w.node(O).fixorder-w.node(k).fixorder});return E==null||E.forEach(function(O){isNaN(w.node(O).rank)||b[w.node(O).rank].push(O),M[O]=!0}),g==null||g.forEach(x),b};G.default=R},707043:function(We,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var _=function(w,M){var P,L,p,b={};w==null||w.forEach(function(x,g){b[x.v]={i:g,indegree:0,in:[],out:[],vs:[x.v]};var T=b[x.v];x.barycenter!==void 0&&(T.barycenter=x.barycenter,T.weight=x.weight)}),(P=M.edges())===null||P===void 0||P.forEach(function(x){var g=b[x.v],T=b[x.w];g!==void 0&&T!==void 0&&(T.indegree++,g.out.push(b[x.w]))});var S=(p=(L=Object.values(b)).filter)===null||p===void 0?void 0:p.call(L,function(x){return!x.indegree});return m(S)},m=function(w){for(var M,P,L=[],p=function(T){return function(E){E.merged||(E.barycenter===void 0||T.barycenter===void 0||E.barycenter>=T.barycenter)&&R(T,E)}},b=function(T){return function(E){E.in.push(T),--E.indegree===0&&w.push(E)}},S=function(){var T=w.pop();L.push(T),(M=T.in.reverse())===null||M===void 0||M.forEach(function(E){return p(T)(E)}),(P=T.out)===null||P===void 0||P.forEach(function(E){return b(T)(E)})};w!=null&&w.length;)S();var x=L.filter(function(T){return!T.merged}),g=["vs","i","barycenter","weight"];return x.map(function(T){var E={};return g==null||g.forEach(function(O){T[O]!==void 0&&(E[O]=T[O])}),E})},R=function(w,M){var P,L=0,p=0;w.weight&&(L+=w.barycenter*w.weight,p+=w.weight),M.weight&&(L+=M.barycenter*M.weight,p+=M.weight),w.vs=(P=M.vs)===null||P===void 0?void 0:P.concat(w.vs),w.barycenter=L/p,w.weight=p,w.i=Math.min(M.i,w.i),M.merged=!0};G.default=_},99455:function(We,G,_){"use strict";var m=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(G,"__esModule",{value:!0});var R=m(_(989921)),w=m(_(707043)),M=m(_(421498)),P=function(b,S,x,g,T,E){var O,k,y,l,U=b.children(S),X=b.node(S),F=X?X.borderLeft:void 0,W=X?X.borderRight:void 0,j={};F&&(U=U==null?void 0:U.filter(function(nt){return nt!==F&&nt!==W}));var V=(0,R.default)(b,U||[]);V==null||V.forEach(function(nt){var yt;if(!((yt=b.children(nt.v))===null||yt===void 0)&&yt.length){var dt=P(b,nt.v,x,g,E);j[nt.v]=dt,dt.hasOwnProperty("barycenter")&&p(nt,dt)}});var q=(0,w.default)(V,x);L(q,j),(O=q.filter(function(nt){return nt.vs.length>0}))===null||O===void 0||O.forEach(function(nt){var yt=b.node(nt.vs[0]);yt&&(nt.fixorder=yt.fixorder,nt.order=yt.order)});var $=(0,M.default)(q,g,T,E);if(F&&($.vs=[F,$.vs,W].flat(),!((k=b.predecessors(F))===null||k===void 0)&&k.length)){var J=b.node(((y=b.predecessors(F))===null||y===void 0?void 0:y[0])||""),ut=b.node(((l=b.predecessors(W))===null||l===void 0?void 0:l[0])||"");$.hasOwnProperty("barycenter")||($.barycenter=0,$.weight=0),$.barycenter=($.barycenter*$.weight+J.order+ut.order)/($.weight+2),$.weight+=2}return $},L=function(b,S){b==null||b.forEach(function(x){var g,T=(g=x.vs)===null||g===void 0?void 0:g.map(function(E){return S[E]?S[E].vs:E});x.vs=T.flat()})},p=function(b,S){b.barycenter!==void 0?(b.barycenter=(b.barycenter*b.weight+S.barycenter*S.weight)/(b.weight+S.weight),b.weight+=S.weight):(b.barycenter=S.barycenter,b.weight=S.weight)};G.default=P},421498:function(We,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var m=_(269209),R=function(P,L,p,b){var S=(0,m.partition)(P,function(l){var U=l.hasOwnProperty("fixorder")&&!isNaN(l.fixorder);return b?!U&&l.hasOwnProperty("barycenter"):U||l.hasOwnProperty("barycenter")}),x=S.lhs,g=S.rhs.sort(function(l,U){return-l.i- -U.i}),T=[],E=0,O=0,k=0;x==null||x.sort(M(!!L,!!p)),k=w(T,g,k),x==null||x.forEach(function(l){var U;k+=(U=l.vs)===null||U===void 0?void 0:U.length,T.push(l.vs),E+=l.barycenter*l.weight,O+=l.weight,k=w(T,g,k)});var y={vs:T.flat()};return O&&(y.barycenter=E/O,y.weight=O),y},w=function(P,L,p){for(var b=p,S;L.length&&(S=L[L.length-1]).i<=b;)L.pop(),P==null||P.push(S.vs),b++;return b},M=function(P,L){return function(p,b){if(p.fixorder!==void 0&&b.fixorder!==void 0)return p.fixorder-b.fixorder;if(p.barycenter<b.barycenter)return-1;if(p.barycenter>b.barycenter)return 1;if(L&&p.order!==void 0&&b.order!==void 0){if(p.order<b.order)return-1;if(p.order>b.order)return 1}return P?b.i-p.i:p.i-b.i}};G.default=R},933562:function(We,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var _=function(w){var M,P={},L=0,p=function(b){var S,x=L;(S=w.children(b))===null||S===void 0||S.forEach(p),P[b]={low:x,lim:L++}};return(M=w.children())===null||M===void 0||M.forEach(p),P},m=function(w,M,P,L){var p=[],b=[],S=Math.min(M[P].low,M[L].low),x=Math.max(M[P].lim,M[L].lim),g,T;g=P;do g=w.parent(g),p.push(g);while(g&&(M[g].low>S||x>M[g].lim));for(T=g,g=L;g&&g!==T;)b.push(g),g=w.parent(g);return{lca:T,path:p.concat(b.reverse())}},R=function(w){var M,P=_(w);(M=w.graph().dummyChains)===null||M===void 0||M.forEach(function(L){var p,b,S=L,x=w.node(S),g=x.edgeObj;if(g)for(var T=m(w,P,g.v,g.w),E=T.path,O=T.lca,k=0,y=E[k],l=!0;S!==g.w;){if(x=w.node(S),l){for(;y!==O&&((p=w.node(y))===null||p===void 0?void 0:p.maxRank)<x.rank;)k++,y=E[k];y===O&&(l=!1)}if(!l){for(;k<E.length-1&&((b=w.node(E[k+1]))===null||b===void 0?void 0:b.minRank)<=x.rank;)k++;y=E[k]}w.setParent(S,y),S=w.successors(S)[0]}})};G.default=R},371963:function(We,G,_){"use strict";var m=this&&this.__extends||function(){var F=function(W,j){return F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(V,q){V.__proto__=q}||function(V,q){for(var $ in q)Object.prototype.hasOwnProperty.call(q,$)&&(V[$]=q[$])},F(W,j)};return function(W,j){if(typeof j!="function"&&j!==null)throw new TypeError("Class extends value "+String(j)+" is not a constructor or null");F(W,j);function V(){this.constructor=W}W.prototype=j===null?Object.create(j):(V.prototype=j.prototype,new V)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.width=G.sep=G.positionX=G.balance=G.alignCoordinates=G.findSmallestWidthAlignment=G.buildBlockGraph=G.horizontalCompaction=G.verticalAlignment=G.hasConflict=G.addConflict=G.findOtherInnerSegmentNode=G.findType2Conflicts=G.findType1Conflicts=void 0;var R=_(199905),w=_(233446),M=_(269209),P=function(F){m(W,F);function W(){return F!==null&&F.apply(this,arguments)||this}return W}(R.Graph),L=function(F,W){var j={},V=function(q,$){var J=0,ut=0,nt=q.length,yt=$==null?void 0:$[($==null?void 0:$.length)-1];return $==null||$.forEach(function(dt,Ft){var wt,St=(0,G.findOtherInnerSegmentNode)(F,dt),et=St?F.node(St).order:nt;(St||dt===yt)&&((wt=$.slice(ut,Ft+1))===null||wt===void 0||wt.forEach(function(it){var Tt;(Tt=F.predecessors(it))===null||Tt===void 0||Tt.forEach(function(Nt){var st,xt=F.node(Nt),zt=xt.order;(zt<J||et<zt)&&!(xt.dummy&&(!((st=F.node(it))===null||st===void 0)&&st.dummy))&&(0,G.addConflict)(j,Nt,it)})}),ut=Ft+1,J=et)}),$};return W!=null&&W.length&&W.reduce(V),j};G.findType1Conflicts=L;var p=function(F,W){var j={};function V(ut,nt,yt,dt,Ft){for(var wt,St,et,it=nt;it<yt;it++)et=ut[it],!((wt=F.node(et))===null||wt===void 0)&&wt.dummy&&((St=F.predecessors(et))===null||St===void 0||St.forEach(function(Tt){var Nt=F.node(Tt);Nt.dummy&&(Nt.order<dt||Nt.order>Ft)&&(0,G.addConflict)(j,Tt,et)}))}function q(ut){return JSON.stringify(ut.slice(1))}function $(ut,nt){var yt=q(ut);nt.get(yt)||(V.apply(void 0,ut),nt.set(yt,!0))}var J=function(ut,nt){var yt=-1,dt,Ft=0,wt=new Map;return nt==null||nt.forEach(function(St,et){var it;if(((it=F.node(St))===null||it===void 0?void 0:it.dummy)==="border"){var Tt=F.predecessors(St)||[];Tt.length&&(dt=F.node(Tt[0]).order,$([nt,Ft,et,yt,dt],wt),Ft=et,yt=dt)}$([nt,Ft,nt.length,dt,ut.length],wt)}),nt};return W!=null&&W.length&&W.reduce(J),j};G.findType2Conflicts=p;var b=function(F,W){var j,V;if(!((j=F.node(W))===null||j===void 0)&&j.dummy)return(V=F.predecessors(W))===null||V===void 0?void 0:V.find(function(q){return F.node(q).dummy})};G.findOtherInnerSegmentNode=b;var S=function(F,W,j){var V=W,q=j;if(V>q){var $=V;V=q,q=$}var J=F[V];J||(F[V]=J={}),J[q]=!0};G.addConflict=S;var x=function(F,W,j){var V=W,q=j;if(V>q){var $=W;V=q,q=$}return!!F[V]};G.hasConflict=x;var g=function(F,W,j,V){var q={},$={},J={};return W==null||W.forEach(function(ut){ut==null||ut.forEach(function(nt,yt){q[nt]=nt,$[nt]=nt,J[nt]=yt})}),W==null||W.forEach(function(ut){var nt=-1;ut==null||ut.forEach(function(yt){var dt=V(yt);if(dt.length){dt=dt.sort(function(it,Tt){return J[it]-J[Tt]});for(var Ft=(dt.length-1)/2,wt=Math.floor(Ft),St=Math.ceil(Ft);wt<=St;++wt){var et=dt[wt];$[yt]===yt&&nt<J[et]&&!(0,G.hasConflict)(j,yt,et)&&($[et]=yt,$[yt]=q[yt]=q[et],nt=J[et])}}})}),{root:q,align:$}};G.verticalAlignment=g;var T=function(F,W,j,V,q){var $,J={},ut=(0,G.buildBlockGraph)(F,W,j,q),nt=q?"borderLeft":"borderRight",yt=function(wt,St){for(var et=ut.nodes(),it=et.pop(),Tt={};it;)Tt[it]?wt(it):(Tt[it]=!0,et.push(it),et=et.concat(St(it))),it=et.pop()},dt=function(wt){J[wt]=(ut.inEdges(wt)||[]).reduce(function(St,et){return Math.max(St,(J[et.v]||0)+ut.edge(et))},0)},Ft=function(wt){var St=(ut.outEdges(wt)||[]).reduce(function(it,Tt){return Math.min(it,(J[Tt.w]||0)-ut.edge(Tt))},Number.POSITIVE_INFINITY),et=F.node(wt);St!==Number.POSITIVE_INFINITY&&et.borderType!==nt&&(J[wt]=Math.max(J[wt],St))};return yt(dt,ut.predecessors.bind(ut)),yt(Ft,ut.successors.bind(ut)),($=Object.values(V))===null||$===void 0||$.forEach(function(wt){J[wt]=J[j[wt]]}),J};G.horizontalCompaction=T;var E=function(F,W,j,V){var q=new P,$=F.graph(),J=(0,G.sep)($.nodesep,$.edgesep,V);return W==null||W.forEach(function(ut){var nt;ut==null||ut.forEach(function(yt){var dt=j[yt];if(q.setNode(dt),nt){var Ft=j[nt],wt=q.edgeFromArgs(Ft,dt);q.setEdge(Ft,dt,Math.max(J(F,yt,nt),wt||0))}nt=yt})}),q};G.buildBlockGraph=E;var O=function(F,W){return(0,M.minBy)(Object.values(W),function(j){var V,q=Number.NEGATIVE_INFINITY,$=Number.POSITIVE_INFINITY;return(V=Object.keys(j))===null||V===void 0||V.forEach(function(J){var ut=j[J],nt=(0,G.width)(F,J)/2;q=Math.max(ut+nt,q),$=Math.min(ut-nt,$)}),q-$})};G.findSmallestWidthAlignment=O;function k(F,W){var j=Object.values(W),V=(0,w.min)(j),q=(0,w.max)(j);["u","d"].forEach(function($){["l","r"].forEach(function(J){var ut=$+J,nt=F[ut],yt;if(nt!==W){var dt=Object.values(nt);yt=J==="l"?V-(0,w.min)(dt):q-(0,w.max)(dt),yt&&(F[ut]={},Object.keys(nt).forEach(function(Ft){F[ut][Ft]=nt[Ft]+yt}))}})})}G.alignCoordinates=k;var y=function(F,W){var j={};return Object.keys(F.ul).forEach(function(V){if(W)j[V]=F[W.toLowerCase()][V];else{var q=Object.values(F).map(function($){return $[V]});j[V]=(q[0]+q[1])/2}}),j};G.balance=y;var l=function(F){var W=(0,M.buildLayerMatrix)(F),j=Object.assign((0,G.findType1Conflicts)(F,W),(0,G.findType2Conflicts)(F,W)),V={},q;["u","d"].forEach(function(J){q=J==="u"?W:Object.values(W).reverse(),["l","r"].forEach(function(ut){ut==="r"&&(q=q.map(function(Ft){return Object.values(Ft).reverse()}));var nt=(J==="u"?F.predecessors:F.successors).bind(F),yt=(0,G.verticalAlignment)(F,q,j,nt),dt=(0,G.horizontalCompaction)(F,q,yt.root,yt.align,ut==="r");ut==="r"&&Object.keys(dt).forEach(function(Ft){dt[Ft]=-dt[Ft]}),V[J+ut]=dt})});var $=(0,G.findSmallestWidthAlignment)(F,V);return k(V,$),(0,G.balance)(V,F.graph().align)};G.positionX=l;var U=function(F,W,j){return function(V,q,$){var J=V.node(q),ut=V.node($),nt=0,yt;if(nt+=J.width/2,J.hasOwnProperty("labelpos"))switch((J.labelpos||"").toLowerCase()){case"l":yt=-J.width/2;break;case"r":yt=J.width/2;break}if(yt&&(nt+=j?yt:-yt),yt=0,nt+=(J.dummy?W:F)/2,nt+=(ut.dummy?W:F)/2,nt+=ut.width/2,ut.labelpos)switch((ut.labelpos||"").toLowerCase()){case"l":yt=ut.width/2;break;case"r":yt=-ut.width/2;break}return yt&&(nt+=j?yt:-yt),yt=0,nt}};G.sep=U;var X=function(F,W){return F.node(W).width||0};G.width=X},100095:function(We,G,_){"use strict";var m=this&&this.__spreadArray||function(p,b,S){if(S||arguments.length===2)for(var x=0,g=b.length,T;x<g;x++)(T||!(x in b))&&(T||(T=Array.prototype.slice.call(b,0,x)),T[x]=b[x]);return p.concat(T||Array.prototype.slice.call(b))};Object.defineProperty(G,"__esModule",{value:!0});var R=_(269209),w=_(371963),M=function(p){var b=(0,R.buildLayerMatrix)(p),S=p.graph().ranksep,x=0;b==null||b.forEach(function(g){var T=g.map(function(O){return p.node(O).height}),E=Math.max.apply(Math,m(m([],T,!1),[0],!1));g==null||g.forEach(function(O){p.node(O).y=x+E/2}),x+=E+S})},P=function(p){var b=(0,R.buildLayerMatrix)(p),S=Object.assign((0,w.findType1Conflicts)(p,b),(0,w.findType2Conflicts)(p,b)),x={},g=[];["u","d"].forEach(function(E){g=E==="u"?b:Object.values(b).reverse(),["l","r"].forEach(function(O){O==="r"&&(g=g.map(function(U){return Object.values(U).reverse()}));var k=(E==="u"?p.predecessors:p.successors).bind(p),y=(0,w.verticalAlignment)(p,g,S,k),l=(0,w.horizontalCompaction)(p,g,y.root,y.align,O==="r");O==="r"&&Object.keys(l).forEach(function(U){return l[U]=-l[U]}),x[E+O]=l})});var T=(0,w.findSmallestWidthAlignment)(p,x);return T&&(0,w.alignCoordinates)(x,T),(0,w.balance)(x,p.graph().align)},L=function(p){var b,S=(0,R.asNonCompoundGraph)(p);M(S);var x=P(S);(b=Object.keys(x))===null||b===void 0||b.forEach(function(g){S.node(g).x=x[g]})};G.default=L},813614:function(We,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.feasibleTreeWithLayer=G.feasibleTree=void 0;var m=_(337323),R=_(269209),w=_(627652),M=function(x){var g=new w.Graph({directed:!1}),T=x.nodes()[0],E=x.nodeCount();g.setNode(T,{});for(var O,k;P(g,x)<E;)O=b(g,x),k=g.hasNode(O.v)?(0,m.slack)(x,O):-(0,m.slack)(x,O),S(g,x,k);return g};G.feasibleTree=M;var P=function(x,g){var T=function(E){g.nodeEdges(E).forEach(function(O){var k=O.v,y=E===k?O.w:k;!x.hasNode(y)&&!(0,m.slack)(g,O)&&(x.setNode(y,{}),x.setEdge(E,y,{}),T(y))})};return x.nodes().forEach(T),x.nodeCount()},L=function(x){var g=new w.Graph({directed:!1}),T=x.nodes()[0],E=x.nodes().filter(function(y){return!!x.node(y)}).length;g.setNode(T,{});for(var O,k;p(g,x)<E;)O=b(g,x),k=g.hasNode(O.v)?(0,m.slack)(x,O):-(0,m.slack)(x,O),S(g,x,k);return g};G.feasibleTreeWithLayer=L;var p=function(x,g){var T=function(E){var O;(O=g.nodeEdges(E))===null||O===void 0||O.forEach(function(k){var y=k.v,l=E===y?k.w:y;!x.hasNode(l)&&(g.node(l).layer!==void 0||!(0,m.slack)(g,k))&&(x.setNode(l,{}),x.setEdge(E,l,{}),T(l))})};return x.nodes().forEach(T),x.nodeCount()},b=function(x,g){return(0,R.minBy)(g.edges(),function(T){return x.hasNode(T.v)!==x.hasNode(T.w)?(0,m.slack)(g,T):1/0})},S=function(x,g,T){x.nodes().forEach(function(E){g.node(E).rank||(g.node(E).rank=0),g.node(E).rank+=T})};G.default={feasibleTree:M,feasibleTreeWithLayer:L}},576827:function(We,G,_){"use strict";var m=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(G,"__esModule",{value:!0});var R=_(337323),w=_(813614),M=m(_(432253)),P=function(S){switch(S.graph().ranker){case"network-simplex":b(S);break;case"tight-tree":p(S);break;case"longest-path":L(S);break;default:p(S)}},L=R.longestPath,p=function(S){(0,R.longestPathWithLayer)(S),(0,w.feasibleTreeWithLayer)(S)},b=function(S){(0,M.default)(S)};G.default=P},432253:function(We,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.exchangeEdges=G.enterEdge=G.leaveEdge=G.initLowLimValues=G.calcCutValue=G.initCutValues=void 0;var m=_(813614),R=_(337323),w=_(269209),M=_(199905),P=M.algorithm.preorder,L=M.algorithm.postorder,p=function(X){var F=(0,w.simplify)(X);(0,R.longestPath)(F);var W=(0,m.feasibleTree)(F);(0,G.initLowLimValues)(W),(0,G.initCutValues)(W,F);for(var j,V;j=(0,G.leaveEdge)(W);)V=(0,G.enterEdge)(W,F,j),(0,G.exchangeEdges)(W,F,j,V)},b=function(X,F){var W=L(X,X.nodes());W=W==null?void 0:W.slice(0,(W==null?void 0:W.length)-1),W==null||W.forEach(function(j){S(X,F,j)})};G.initCutValues=b;var S=function(X,F,W){var j=X.node(W),V=j.parent;X.edgeFromArgs(W,V).cutvalue=(0,G.calcCutValue)(X,F,W)},x=function(X,F,W){var j,V=X.node(W),q=V.parent,$=!0,J=F.edgeFromArgs(W,q),ut=0;return J||($=!1,J=F.edgeFromArgs(q,W)),ut=J.weight,(j=F.nodeEdges(W))===null||j===void 0||j.forEach(function(nt){var yt=nt.v===W,dt=yt?nt.w:nt.v;if(dt!==q){var Ft=yt===$,wt=F.edge(nt).weight;if(ut+=Ft?wt:-wt,l(X,W,dt)){var St=X.edgeFromArgs(W,dt).cutvalue;ut+=Ft?-St:St}}}),ut};G.calcCutValue=x;var g=function(X,F){F===void 0&&(F=X.nodes()[0]),T(X,{},1,F)};G.initLowLimValues=g;var T=function(X,F,W,j,V){var q,$=W,J=W,ut=X.node(j);return F[j]=!0,(q=X.neighbors(j))===null||q===void 0||q.forEach(function(nt){F[nt]||(J=T(X,F,J,nt,j))}),ut.low=$,ut.lim=J++,V?ut.parent=V:delete ut.parent,J},E=function(X){return X.edges().find(function(F){return X.edge(F).cutvalue<0})};G.leaveEdge=E;var O=function(X,F,W){var j=W.v,V=W.w;F.hasEdge(j,V)||(j=W.w,V=W.v);var q=X.node(j),$=X.node(V),J=q,ut=!1;q.lim>$.lim&&(J=$,ut=!0);var nt=F.edges().filter(function(yt){return ut===U(X,X.node(yt.v),J)&&ut!==U(X,X.node(yt.w),J)});return(0,w.minBy)(nt,function(yt){return(0,R.slack)(F,yt)})};G.enterEdge=O;var k=function(X,F,W,j){var V=W.v,q=W.w;X.removeEdge(V,q),X.setEdge(j.v,j.w,{}),(0,G.initLowLimValues)(X),(0,G.initCutValues)(X,F),y(X,F)};G.exchangeEdges=k;var y=function(X,F){var W=X.nodes().find(function(V){var q;return!(!((q=F.node(V))===null||q===void 0)&&q.parent)}),j=P(X,W);j=j==null?void 0:j.slice(1),j==null||j.forEach(function(V){var q=X.node(V).parent,$=F.edgeFromArgs(V,q),J=!1;$||($=F.edgeFromArgs(q,V),J=!0),F.node(V).rank=F.node(q).rank+(J?$.minlen:-$.minlen)})},l=function(X,F,W){return X.hasEdge(F,W)},U=function(X,F,W){return W.low<=F.lim&&F.lim<=W.lim};G.default=p},337323:function(We,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.slack=G.longestPathWithLayer=G.longestPath=void 0;var _=function(w){var M,P={},L=function(p){var b,S=w.node(p);if(!S)return 0;if(P[p])return S.rank;P[p]=!0;var x;return(b=w.outEdges(p))===null||b===void 0||b.forEach(function(g){var T=L(g.w),E=w.edge(g).minlen,O=T-E;O&&(x===void 0||O<x)&&(x=O)}),x||(x=0),S.rank=x,x};(M=w.sources())===null||M===void 0||M.forEach(function(p){return L(p)})};G.longestPath=_;var m=function(w){var M,P={},L,p=function(x){var g,T=w.node(x);if(!T)return 0;if(P[x])return T.rank;P[x]=!0;var E;return(g=w.outEdges(x))===null||g===void 0||g.forEach(function(O){var k=p(O.w),y=w.edge(O).minlen,l=k-y;l&&(E===void 0||l<E)&&(E=l)}),E||(E=0),(L===void 0||E<L)&&(L=E),T.rank=E,E};(M=w.sources())===null||M===void 0||M.forEach(function(x){w.node(x)&&p(x)}),L===void 0&&(L=0);var b={},S=function(x,g){var T,E=w.node(x),O=isNaN(E.layer)?g:E.layer;(E.rank===void 0||E.rank<O)&&(E.rank=O),!b[x]&&(b[x]=!0,(T=w.outEdges(x))===null||T===void 0||T.map(function(k){S(k.w,O+w.edge(k).minlen)}))};w.nodes().forEach(function(x){var g=w.node(x);g&&(isNaN(g.layer)?g.rank-=L:S(x,g.layer))})};G.longestPathWithLayer=m;var R=function(w,M){return w.node(M.w).rank-w.node(M.v).rank-w.edge(M).minlen};G.slack=R,G.default={longestPath:_,longestPathWithLayer:m,slack:R}},269209:function(We,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.minBy=G.notime=G.time=G.partition=G.maxRank=G.addBorderNode=G.removeEmptyRanks=G.normalizeRanks=G.buildLayerMatrix=G.intersectRect=G.predecessorWeights=G.successorWeights=G.zipObject=G.asNonCompoundGraph=G.simplify=G.addDummyNode=void 0;var m=_(449784),R=_(627652),w=function(F,W){return Number(F)-Number(W)},M=function(F,W,j,V){var q;do q="".concat(V).concat(Math.random());while(F.hasNode(q));return j.dummy=W,F.setNode(q,j),q};G.addDummyNode=M;var P=function(F){var W=new R.Graph().setGraph(F.graph());return F.nodes().forEach(function(j){W.setNode(j,F.node(j))}),F.edges().forEach(function(j){var V=W.edgeFromArgs(j.v,j.w)||{weight:0,minlen:1},q=F.edge(j);W.setEdge(j.v,j.w,{weight:V.weight+q.weight,minlen:Math.max(V.minlen,q.minlen)})}),W};G.simplify=P;var L=function(F){var W=new R.Graph({multigraph:F.isMultigraph()}).setGraph(F.graph());return F.nodes().forEach(function(j){var V;!((V=F.children(j))===null||V===void 0)&&V.length||W.setNode(j,F.node(j))}),F.edges().forEach(function(j){W.setEdgeObj(j,F.edge(j))}),W};G.asNonCompoundGraph=L;var p=function(F,W){return F==null?void 0:F.reduce(function(j,V,q){return j[V]=W[q],j},{})};G.zipObject=p;var b=function(F){var W={};return F.nodes().forEach(function(j){var V,q={};(V=F.outEdges(j))===null||V===void 0||V.forEach(function($){var J;q[$.w]=(q[$.w]||0)+(((J=F.edge($))===null||J===void 0?void 0:J.weight)||0)}),W[j]=q}),W};G.successorWeights=b;var S=function(F){var W=F.nodes(),j=W.map(function(V){var q,$={};return(q=F.inEdges(V))===null||q===void 0||q.forEach(function(J){$[J.v]=($[J.v]||0)+F.edge(J).weight}),$});return(0,G.zipObject)(W,j)};G.predecessorWeights=S;var x=function(F,W){var j=Number(F.x),V=Number(F.y),q=Number(W.x)-j,$=Number(W.y)-V,J=Number(F.width)/2,ut=Number(F.height)/2;if(!q&&!$)return{x:0,y:0};var nt,yt;return Math.abs($)*J>Math.abs(q)*ut?($<0&&(ut=-ut),nt=ut*q/$,yt=ut):(q<0&&(J=-J),nt=J,yt=J*$/q),{x:j+nt,y:V+yt}};G.intersectRect=x;var g=function(F){for(var W=[],j=(0,G.maxRank)(F)+1,V=0;V<j;V++)W.push([]);F.nodes().forEach(function(q){var $=F.node(q);if($){var J=$.rank;J!==void 0&&W[J]&&W[J].push(q)}});for(var V=0;V<j;V++)W[V]=W[V].sort(function($,J){var ut,nt;return w((ut=F.node($))===null||ut===void 0?void 0:ut.order,(nt=F.node(J))===null||nt===void 0?void 0:nt.order)});return W};G.buildLayerMatrix=g;var T=function(F){var W=F.nodes().filter(function(V){var q;return((q=F.node(V))===null||q===void 0?void 0:q.rank)!==void 0}).map(function(V){return F.node(V).rank}),j=Math.min.apply(Math,W);F.nodes().forEach(function(V){var q=F.node(V);q.hasOwnProperty("rank")&&j!==1/0&&(q.rank-=j)})};G.normalizeRanks=T;var E=function(F){var W=F.nodes(),j=W.filter(function(yt){var dt;return((dt=F.node(yt))===null||dt===void 0?void 0:dt.rank)!==void 0}).map(function(yt){return F.node(yt).rank}),V=Math.min.apply(Math,j),q=[];W.forEach(function(yt){var dt,Ft=(((dt=F.node(yt))===null||dt===void 0?void 0:dt.rank)||0)-V;q[Ft]||(q[Ft]=[]),q[Ft].push(yt)});for(var $=0,J=F.graph().nodeRankFactor||0,ut=0;ut<q.length;ut++){var nt=q[ut];nt===void 0?ut%J!==0&&($-=1):$&&(nt==null||nt.forEach(function(yt){var dt=F.node(yt);dt&&(dt.rank=dt.rank||0,dt.rank+=$)}))}};G.removeEmptyRanks=E;var O=function(F,W,j,V){var q={width:0,height:0};return(0,m.isNumber)(j)&&(0,m.isNumber)(V)&&(q.rank=j,q.order=V),(0,G.addDummyNode)(F,"border",q,W)};G.addBorderNode=O;var k=function(F){var W;return F.nodes().forEach(function(j){var V,q=(V=F.node(j))===null||V===void 0?void 0:V.rank;q!==void 0&&(W===void 0||q>W)&&(W=q)}),W||(W=0),W};G.maxRank=k;var y=function(F,W){var j={lhs:[],rhs:[]};return F==null||F.forEach(function(V){W(V)?j.lhs.push(V):j.rhs.push(V)}),j};G.partition=y;var l=function(F,W){var j=Date.now();try{return W()}finally{console.log("".concat(F," time: ").concat(Date.now()-j,"ms"))}};G.time=l;var U=function(F,W){return W()};G.notime=U;var X=function(F,W){return F.reduce(function(j,V){var q=W(j),$=W(V);return q>$?V:j})};G.minBy=X},177057:function(We,G,_){"use strict";var m=this&&this.__extends||function(){var b=function(S,x){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,T){g.__proto__=T}||function(g,T){for(var E in T)Object.prototype.hasOwnProperty.call(T,E)&&(g[E]=T[E])},b(S,x)};return function(S,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");b(S,x);function g(){this.constructor=S}S.prototype=x===null?Object.create(x):(g.prototype=x.prototype,new g)}}(),R=this&&this.__assign||function(){return R=Object.assign||function(b){for(var S,x=1,g=arguments.length;x<g;x++){S=arguments[x];for(var T in S)Object.prototype.hasOwnProperty.call(S,T)&&(b[T]=S[T])}return b},R.apply(this,arguments)},w=this&&this.__spreadArray||function(b,S,x){if(x||arguments.length===2)for(var g=0,T=S.length,E;g<T;g++)(E||!(g in S))&&(E||(E=Array.prototype.slice.call(S,0,g)),E[g]=S[g]);return b.concat(E||Array.prototype.slice.call(S))};Object.defineProperty(G,"__esModule",{value:!0}),G.DagreCompoundLayout=void 0;var M=_(762329),P=_(631969),L=_(449784),p=function(b){m(S,b);function S(x){var g=b.call(this)||this;return g.rankdir="TB",g.nodesep=50,g.edgesep=5,g.ranksep=50,g.controlPoints=!0,g.anchorPoint=!0,g.nodes=[],g.edges=[],g.combos=[],g.onLayoutEnd=function(){},g.updateCfg(x),g}return S.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,begin:void 0,nodeSize:void 0,nodesep:50,ranksep:50,controlPoints:!0,anchorPoint:!0}},S.prototype.init=function(x){var g=x.hiddenNodes||[],T=x.hiddenEdges||[],E=x.hiddenCombos||[];this.nodes=this.getDataByOrder((x.nodes||[]).concat(g)),this.edges=this.getDataByOrder((x.edges||[]).concat(T)),this.combos=(x.combos||[]).concat(E.map(function(O){return R(R({},O),{collapsed:!0})}))},S.prototype.execute=function(){var x=this,g=x.nodes,T=x.edges;if(g){var E=x.getLayoutConfig(),O=E.graphDef,k=E.graphOption,y=E.graphSettings,l=(0,P.buildGraph)(O,k,y),U=(0,P.flatGraph)(l,!0);return this.updatePosition(U),x.onLayoutEnd&&x.onLayoutEnd(),{nodes:g,edges:T}}},S.prototype.getNodePath=function(x){var g=this,T=g.nodes,E=g.combos,O=T.find(function(y){return y.id===x}),k=function(y,l){l===void 0&&(l=[]);var U=E.find(function(X){return X.id===y});return U?(l.unshift(y),U.parentId?k(U.parentId,l):l):l};return O&&O.comboId?k(O.comboId,[x]):[x]},S.prototype.getLayoutConfig=function(){var x,g,T,E=this,O=E.nodes,k=E.edges,y=E.combos,l=E.nodeSize,U=E.rankdir,X=E.align,F=E.edgesep,W=E.nodesep,j=E.ranksep,V=E.settings,q=(y||[]).reduce(function(zt,Wt){var _t=O.filter(function(te){return te.comboId===Wt.id}).map(function(te){return te.id}),Xt=(y||[]).filter(function(te){return te.parentId===Wt.id}).map(function(te){return te.id});return(_t.length||Xt.length)&&(zt[Wt.id]=w(w([],_t,!0),Xt,!0)),zt},{}),$;l?(0,L.isArray)(l)?$=function(){return l}:$=function(){return[l,l]}:$=function(zt){return zt&&zt.size?(0,L.isArray)(zt.size)?zt.size:(0,L.isObject)(zt.size)?[zt.size.width||40,zt.size.height||40]:[zt.size,zt.size]:[40,40]};var J=function(zt){return zt&&zt.size?(0,L.isArray)(zt.size)?zt.size:[zt.size,zt.size]:[80,40]},ut=J(y==null?void 0:y[0]),nt=ut[0],yt=ut[1],dt=(g=(x=E.graphSettings)===null||x===void 0?void 0:x.subScene)===null||g===void 0?void 0:g.meta,Ft=((T=y.find(function(zt){return!zt.collapsed}))===null||T===void 0?void 0:T.padding)||[20,20,20,20],wt=Ft[0],St=Ft[1],et=Ft[2],it=Ft[3],Tt={compound:q,nodes:w([],(O||[]).map(function(zt){var Wt=$(zt),_t=Wt[0],Xt=Wt[1];return R(R({},zt),{width:_t,height:Xt})}),!0),edges:w([],(k||[]).map(function(zt){return R(R({},zt),{v:zt.source,w:zt.target})}),!0)},Nt={expanded:(y||[]).filter(function(zt){return!zt.collapsed}).map(function(zt){return zt.id})},st={graph:{meta:{align:X,rankDir:U,nodeSep:W,edgeSep:F,rankSep:j}},subScene:{meta:{paddingTop:wt||(dt==null?void 0:dt.paddingTop)||20,paddingRight:St||(dt==null?void 0:dt.paddingRight)||20,paddingBottom:et||(dt==null?void 0:dt.paddingBottom)||20,paddingLeft:it||(dt==null?void 0:dt.paddingLeft)||20,labelHeight:0}},nodeSize:{meta:{width:nt,height:yt}}},xt=(0,P.mergeConfig)(V,R({},(0,P.mergeConfig)(st,P.LAYOUT_CONFIG)));return E.graphSettings=xt,{graphDef:Tt,graphOption:Nt,graphSettings:xt}},S.prototype.updatePosition=function(x){var g=x.nodes,T=x.edges;this.updateNodePosition(g,T),this.updateEdgePosition(g,T)},S.prototype.getBegin=function(x,g){var T=this,E=T.begin,O=[0,0];if(E){var k=1/0,y=1/0;x.forEach(function(l){k>l.x&&(k=l.x),y>l.y&&(y=l.y)}),g.forEach(function(l){l.points.forEach(function(U){k>U.x&&(k=U.x),y>U.y&&(y=U.y)})}),O[0]=E[0]-k,O[1]=E[1]-y}return O},S.prototype.updateNodePosition=function(x,g){var T=this,E=T.combos,O=T.nodes,k=T.edges,y=T.anchorPoint,l=T.graphSettings,U=this.getBegin(x,g);x.forEach(function(X){var F,W=X.x,j=X.y,V=X.id,q=X.type,$=X.coreBox;if(q===P.HierarchyNodeType.META&&V!==P.ROOT_NAME){var J=E.findIndex(function(Ft){return Ft.id===V}),ut=(F=l==null?void 0:l.subScene)===null||F===void 0?void 0:F.meta;E[J].offsetX=W+U[0],E[J].offsetY=j+U[1],E[J].fixSize=[$.width,$.height],E[J].fixCollapseSize=[$.width,$.height],X.expanded?E[J].padding=[ut==null?void 0:ut.paddingTop,ut==null?void 0:ut.paddingRight,ut==null?void 0:ut.paddingBottom,ut==null?void 0:ut.paddingLeft]:E[J].padding=[0,0,0,0]}else if(q===P.HierarchyNodeType.OP){var J=O.findIndex(function(wt){return wt.id===V});if(O[J].x=W+U[0],O[J].y=j+U[1],y){var nt=[],yt=g.filter(function(wt){return wt.v===V}),dt=g.filter(function(wt){return wt.w===V});yt.length>0&&yt.forEach(function(wt){var St=wt.points[0],et=(St.x-W)/X.width+.5,it=(St.y-j)/X.height+.5;nt.push([et,it]),wt.baseEdgeList.forEach(function(Tt){var Nt=k.find(function(st){return st.source===Tt.v&&st.target===Tt.w});Nt&&(Nt.sourceAnchor=nt.length-1)})}),dt.length>0&&dt.forEach(function(wt){var St=wt.points[wt.points.length-1],et=(St.x-W)/X.width+.5,it=(St.y-j)/X.height+.5;nt.push([et,it]),wt.baseEdgeList.forEach(function(Tt){var Nt=k.find(function(st){return st.source===Tt.v&&st.target===Tt.w});Nt&&(Nt.targetAnchor=nt.length-1)})}),O[J].anchorPoints=nt.length>0?nt:O[J].anchorPoints||[]}}})},S.prototype.updateEdgePosition=function(x,g){var T=this,E=T.combos,O=T.edges,k=T.controlPoints,y=this.getBegin(x,g);k&&(E.forEach(function(l){l.inEdges=[],l.outEdges=[]}),O.forEach(function(l){var U,X,F,W,j=x.find(function(Ft){return Ft.id===l.source}),V=x.find(function(Ft){return Ft.id===l.target}),q=[],$=[];if(j&&V)$=(0,P.getEdges)(j==null?void 0:j.id,V==null?void 0:V.id,x);else if(!j||!V){var J=T.getNodePath(l.source),ut=T.getNodePath(l.target),nt=J.reverse().slice(j?0:1).find(function(Ft){return x.find(function(wt){return wt.id===Ft})}),yt=ut.reverse().slice(V?0:1).find(function(Ft){return x.find(function(wt){return wt.id===Ft})});j=x.find(function(Ft){return Ft.id===nt}),V=x.find(function(Ft){return Ft.id===yt}),$=(0,P.getEdges)(j==null?void 0:j.id,V==null?void 0:V.id,x,{v:l.source,w:l.target})}if(q=$.reduce(function(Ft,wt){return w(w([],Ft,!0),wt.points.map(function(St){return R(R({},St),{x:St.x+y[0],y:St.y+y[1]})}),!0)},[]),q=q.slice(1,-1),l.controlPoints=q,(V==null?void 0:V.type)===P.NodeType.META){var dt=E.findIndex(function(Ft){return Ft.id===(V==null?void 0:V.id)});if(!E[dt]||!((U=E[dt].inEdges)===null||U===void 0)&&U.some(function(Ft){return Ft.source===j.id&&Ft.target===V.id}))return;(X=E[dt].inEdges)===null||X===void 0||X.push({source:j.id,target:V.id,controlPoints:q})}if((j==null?void 0:j.type)===P.NodeType.META){var dt=E.findIndex(function(wt){return wt.id===(j==null?void 0:j.id)});if(!E[dt]||!((F=E[dt].outEdges)===null||F===void 0)&&F.some(function(wt){return wt.source===j.id&&wt.target===V.id}))return;(W=E[dt].outEdges)===null||W===void 0||W.push({source:j.id,target:V.id,controlPoints:q})}}))},S.prototype.getType=function(){return"dagreCompound"},S.prototype.getDataByOrder=function(x){return x.every(function(g){return g.layoutOrder!==void 0})||x.forEach(function(g,T){g.layoutOrder=T}),x.sort(function(g,T){return g.layoutOrder-T.layoutOrder})},S}(M.Base);G.DagreCompoundLayout=p},934015:function(We,G,_){"use strict";var m=this&&this.__assign||function(){return m=Object.assign||function(g){for(var T,E=1,O=arguments.length;E<O;E++){T=arguments[E];for(var k in T)Object.prototype.hasOwnProperty.call(T,k)&&(g[k]=T[k])}return g},m.apply(this,arguments)},R=this&&this.__createBinding||(Object.create?function(g,T,E,O){O===void 0&&(O=E);var k=Object.getOwnPropertyDescriptor(T,E);(!k||("get"in k?!T.__esModule:k.writable||k.configurable))&&(k={enumerable:!0,get:function(){return T[E]}}),Object.defineProperty(g,O,k)}:function(g,T,E,O){O===void 0&&(O=E),g[O]=T[E]}),w=this&&this.__setModuleDefault||(Object.create?function(g,T){Object.defineProperty(g,"default",{enumerable:!0,value:T})}:function(g,T){g.default=T}),M=this&&this.__importStar||function(g){if(g&&g.__esModule)return g;var T={};if(g!=null)for(var E in g)E!=="default"&&Object.prototype.hasOwnProperty.call(g,E)&&R(T,g,E);return w(T,g),T},P=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(G,"__esModule",{value:!0});var L=M(_(486880)),p=P(_(788221)),b=P(_(87064)),S=_(920171);function x(g,T){var E=g.nodes,O=g.edges,k=T.width,y=T.height;if(!(E!=null&&E.length))return Promise.resolve();var l=[];E.forEach(function($){var J=O.filter(function(nt){return nt.source===$.id||nt.target===$.id});if(J.length>1){var ut=m({},$);delete ut.size,l.push(ut)}});var U=[];O.forEach(function($){var J=l.find(function(nt){return nt.id===$.source}),ut=l.find(function(nt){return nt.id===$.target});J&&ut&&U.push($)});var X=new S.DagreLayout({type:"dagre",ranksep:T.nodeMinGap,nodesep:T.nodeMinGap}),F=X.layout({nodes:l,edges:U}).nodes;E.forEach(function($){var J=(F||[]).find(function(ut){return ut.id===$.id});$.x=(J==null?void 0:J.x)||k/2,$.y=(J==null?void 0:J.y)||y/2});var W=JSON.parse(JSON.stringify(E)),j=JSON.parse(JSON.stringify(O)),V=L.forceSimulation().nodes(W).force("link",L.forceLink(j).id(function($){return $.id}).distance(function($){var J=U.find(function(ut){return ut.source===$.source&&ut.target===$.target});return J?30:20})).force("charge",L.forceManyBody()).force("center",L.forceCenter(k/2,y/2)).force("x",L.forceX(k/2)).force("y",L.forceY(y/2)).alpha(.3).alphaDecay(.08).alphaMin(.001),q=new Promise(function($){V.on("end",function(){E.forEach(function(wt){var St=W.find(function(et){return et.id===wt.id});St&&(wt.x=St.x,wt.y=St.y)});var J=Math.min.apply(Math,E.map(function(wt){return wt.x})),ut=Math.max.apply(Math,E.map(function(wt){return wt.x})),nt=Math.min.apply(Math,E.map(function(wt){return wt.y})),yt=Math.max.apply(Math,E.map(function(wt){return wt.y})),dt=k/(ut-J),Ft=y/(yt-nt);E.forEach(function(wt){wt.x!==void 0&&dt<1&&(wt.x=(wt.x-J)*dt),wt.y!==void 0&&Ft<1&&(wt.y=(wt.y-nt)*Ft)}),E.forEach(function(wt){wt.sizeTemp=wt.size,wt.size=[10,10]}),(0,b.default)(E,O),E.forEach(function(wt){wt.size=wt.sizeTemp||[],delete wt.sizeTemp}),(0,p.default)({nodes:E,edges:O},T),$()})});return q}G.default=x},788221:function(We,G,_){"use strict";var m=this&&this.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(G,"__esModule",{value:!0});var R=m(_(28611));function w(M,P){if(!M.nodes||M.nodes.length===0)return M;var L=P.width,p=P.height,b=P.nodeMinGap,S=1e4,x=1e4;M.nodes.forEach(function(j){var V=j.size[0]||50,q=j.size[1]||50;S=Math.min(V,S),x=Math.min(q,x)});var g=new R.default;g.init(L,p,{CELL_H:x,CELL_W:S}),M.nodes.forEach(function(j){var V=g.occupyNearest(j);V&&(V.node={id:j.id,size:j.size},j.x=V.x,j.y=V.y,j.dx=V.dx,j.dy=V.dy)});for(var T=0;T<M.nodes.length;T++){var E=M.nodes[T],O=g.findGridByNodeId(E.id);if(!O)throw new Error("can not find node cell");var k=O.column,y=O.row;if(E.size[0]+b>S){for(var l=Math.ceil((E.size[0]+b)/S)-1,U=l,X=0;X<l;X++){var F=g.additionColumn.indexOf(k+X+1)>-1;if(F&&!g.cells[k+X+1][y].node)U--;else break}g.insertColumn(k,U)}if(E.size[1]+b>x){for(var l=Math.ceil((E.size[1]+b)/x)-1,U=l,X=0;X<l;X++){var F=g.additionRow.indexOf(y+X+1)>-1;if(F&&!g.cells[k][y+X+1].node)U--;else break}g.insertRow(y,U)}}for(var T=0;T<g.columnNum;T++)for(var W=function(V){var q=g.cells[T][V];if(q.node){var $=M.nodes.find(function(J){var ut;return J.id===((ut=q==null?void 0:q.node)===null||ut===void 0?void 0:ut.id)});$&&($.x=q.x+$.size[0]/2,$.y=q.y+$.size[1]/2)}},X=0;X<g.rowNum;X++)W(X)}G.default=w},28611:function(We,G){"use strict";var _=this&&this.__assign||function(){return _=Object.assign||function(R){for(var w,M=1,P=arguments.length;M<P;M++){w=arguments[M];for(var L in w)Object.prototype.hasOwnProperty.call(w,L)&&(R[L]=w[L])}return R},_.apply(this,arguments)};Object.defineProperty(G,"__esModule",{value:!0});var m=function(){function R(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}return R.prototype.init=function(w,M,P){this.cells=[],this.CELL_W=P.CELL_W||R.DEFAULT_CELL_W,this.CELL_H=P.CELL_H||R.DEFAULT_CELL_H,this.columnNum=Math.ceil(w/this.CELL_W),this.rowNum=Math.ceil(M/this.CELL_H),R.MIN_DIST=Math.pow(w,2)+Math.pow(M,2);for(var L=0;L<this.columnNum;L++){for(var p=[],b=0;b<this.rowNum;b++){var S={dx:L,dy:b,x:L*this.CELL_W,y:b*this.CELL_H,occupied:!1};p.push(S)}this.cells.push(p)}},R.prototype.findGridByNodeId=function(w){for(var M,P,L=0;L<this.columnNum;L++)for(var p=0;p<this.rowNum;p++)if(this.cells[L][p].node&&((P=(M=this.cells[L][p])===null||M===void 0?void 0:M.node)===null||P===void 0?void 0:P.id)===w)return{column:L,row:p};return null},R.prototype.sqdist=function(w,M){return Math.pow(w.x-M.x,2)+Math.pow(w.y-M.y,2)},R.prototype.occupyNearest=function(w){for(var M=R.MIN_DIST,P,L=null,p=0;p<this.columnNum;p++)for(var b=0;b<this.rowNum;b++)!this.cells[p][b].occupied&&(P=this.sqdist(w,this.cells[p][b]))<M&&(M=P,L=this.cells[p][b]);return L&&(L.occupied=!0),L},R.prototype.insertColumn=function(w,M){if(!(M<=0)){for(var P=0;P<M;P++){this.cells[P+this.columnNum]=[];for(var L=0;L<this.rowNum;L++)this.cells[P+this.columnNum][L]={dx:P,dy:L,x:P*this.CELL_W,y:L*this.CELL_H,occupied:!1,node:null}}for(var P=this.columnNum-1;P>w;P--)for(var L=0;L<this.rowNum;L++)this.cells[P+M][L]=_(_({},this.cells[P][L]),{x:(P+M)*this.CELL_W,y:L*this.CELL_H}),this.cells[P][L]={x:P*this.CELL_W,y:L*this.CELL_H,occupied:!0,node:null};for(var L=0;L<this.additionColumn.length;L++)this.additionColumn[L]>=w&&(this.additionColumn[L]+=M);for(var P=0;P<M;P++)this.additionColumn.push(w+P+1);this.columnNum+=M}},R.prototype.insertRow=function(w,M){if(!(M<=0)){for(var P=0;P<M;P++)for(var L=0;L<this.columnNum;L++)this.cells[L][P+this.rowNum]={dx:L,dy:P,x:L*this.CELL_W,y:P*this.CELL_H,occupied:!1,node:null};for(var L=0;L<this.columnNum;L++)for(var P=this.rowNum-1;P>w;P--)this.cells[L][P+M]=_(_({},this.cells[L][P]),{dx:L,dy:P+M,x:L*this.CELL_W,y:(P+M)*this.CELL_H}),this.cells[L][P]={dx:L,dy:P,x:L*this.CELL_W,y:P*this.CELL_H,occupied:!1,node:null};for(var P=0;P<this.additionRow.length;P++)this.additionRow[P]>=w&&(this.additionRow[P]+=M);for(var L=0;L<M;L++)this.additionRow.push(w+L+1);this.rowNum+=M}},R.prototype.getNodes=function(){for(var w=[],M=0;M<this.columnNum;M++)for(var P=0;P<this.rowNum;P++)this.cells[M][P].node&&w.push(this.cells[M][P]);return w},R.MIN_DIST=50,R.DEFAULT_CELL_W=80,R.DEFAULT_CELL_H=80,R}();G.default=m},290441:function(We,G,_){"use strict";var m=this&&this.__extends||function(){var L=function(p,b){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,x){S.__proto__=x}||function(S,x){for(var g in x)Object.prototype.hasOwnProperty.call(x,g)&&(S[g]=x[g])},L(p,b)};return function(p,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");L(p,b);function S(){this.constructor=p}p.prototype=b===null?Object.create(b):(S.prototype=b.prototype,new S)}}(),R=this&&this.__importDefault||function(L){return L&&L.__esModule?L:{default:L}};Object.defineProperty(G,"__esModule",{value:!0}),G.ERLayout=void 0;var w=_(762329),M=R(_(934015)),P=function(L){m(p,L);function p(b){var S=L.call(this)||this;return S.width=300,S.height=300,S.nodeMinGap=50,S.onLayoutEnd=function(){},b&&S.updateCfg(b),S}return p.prototype.getDefaultCfg=function(){return{width:300,height:300,nodeMinGap:50}},p.prototype.execute=function(){var b=this,S=b.nodes,x=b.edges;return S==null||S.forEach(function(g){g.size||(g.size=[50,50])}),(0,M.default)({nodes:S,edges:x},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(function(){b.onLayoutEnd&&b.onLayoutEnd()})},p.prototype.getType=function(){return"er"},p}(w.Base);G.ERLayout=P},87064:function(We,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var _=1200,m=800,R=1e7,w=10,M=3.141592653589793,P=1.5707963267948966,L=M*.375,p=M*.625,b=new Map,S=10,x=10,g=.8,T=.1,E=.5;function O(W,j,V){var q=W.x-W.size[0]/2,$=W.y-W.size[1]/2,J=W.x+W.size[0]/2,ut=W.y+W.size[1]/2,nt=j.x-j.size[0]/2,yt=j.y-j.size[1]/2,dt=j.x+j.size[0]/2,Ft=j.y+j.size[1]/2,wt=W.x,St=W.y,et=j.x,it=j.y,Tt=et-wt,Nt=Math.atan2(Tt,it-St),st=0,xt=0,zt=0,Wt=0;Nt>P?(xt=$-Ft,st=nt-J,zt=parseFloat(xt?(xt/Math.cos(Nt)).toFixed(2):st.toFixed(2)),Wt=parseFloat(st?(st/Math.sin(Nt)).toFixed(2):xt.toFixed(2))):0<Nt&&Nt<=P?(xt=yt-ut,st=nt-J,xt>st?zt=Wt=parseFloat(xt?(xt/Math.cos(Nt)).toFixed(2):st.toFixed(2)):zt=Wt=parseFloat(st?(st/Math.sin(Nt)).toFixed(2):xt.toFixed(2))):Nt<-P?(xt=$-Ft,st=-(dt-q),xt>st?zt=Wt=parseFloat(xt?(xt/Math.cos(Nt)).toFixed(2):st.toFixed(2)):zt=Wt=parseFloat(st?(st/Math.sin(Nt)).toFixed(2):xt.toFixed(2))):(xt=yt-ut,Math.abs(Tt)>(J-q)/2?st=q-dt:st=Tt,xt>st?zt=Wt=parseFloat(xt?(xt/Math.cos(Nt)).toFixed(2):st.toFixed(2)):zt=Wt=parseFloat(st&&Nt!==0?(st/Math.sin(Nt)).toFixed(2):xt.toFixed(2)));var _t=parseFloat(Nt.toFixed(2)),Xt=V;return V&&(Xt=L<_t&&_t<p),{distance:Math.abs(zt<Wt?zt:Wt),isHoriz:Xt}}function k(W,j){var V=b.get(W.id)||[],q=V.find(function(be){return be.source===j.id||be.target===j.id}),$=W.size[0]*W.size[1],J=j.size[0]*j.size[1],ut=$>J?j:W,nt=$>J?W:j,yt=ut.x-ut.size[0]/2,dt=ut.y-ut.size[1]/2,Ft=ut.x+ut.size[0]/2,wt=ut.y+ut.size[1]/2,St=nt.x-nt.size[0]/2,et=nt.y-nt.size[1]/2,it=nt.x+nt.size[0]/2,Tt=nt.y+nt.size[1]/2,Nt=ut.x,st=ut.y,xt=nt.x,zt=nt.y,Wt=Ft>=St&&it>=yt&&wt>=et&&Tt>=dt,_t=0,Xt=0;if(Wt){Xt=Math.sqrt(Math.pow(xt-Nt,2)+Math.pow(zt-st,2));var te=yt>St?yt:St,ue=dt>et?dt:et,fe=Ft<it?Ft:it,Gt=wt<Tt?wt:Tt,ae=fe-te,Ne=Gt-ue,ee=ae*Ne;Xt===0&&(Xt=1e-7),_t=w*1/Xt*100+ee,_t*=R}else{var de=!1,ze=O(ut,nt,de);Xt=ze.distance,de=ze.isHoriz,Xt<=w?Xt!==0?q?_t+=w+R*1/Xt:_t+=w+R*w/Xt:_t+=R:(_t+=Xt,q&&(_t+=Xt*Xt))}return _t}function y(W){for(var j=0,V=0;V<W.length;V++){var q=W[V];(q.x<0||q.y<0||q.x>_||q.y>m)&&(j+=1e12);for(var $=V+1;$<W.length;$++)j+=k(q,W[$])}return j}function l(W,j,V,q){var $=new Map;V.forEach(function(Nt,st){$.set(Nt.id,Nt)});var J=q.filter(function(Nt){return Nt.source===W.id||Nt.target===W.id})||[],ut=[];J.forEach(function(Nt){var st=Nt.source===W.id?Nt.target:Nt.source,xt=$.get(st);xt&&ut.push(xt)});for(var nt=!0,yt=0;yt<ut.length;yt++){var dt=ut[yt],Ft=Math.atan((W.y-dt.y)/(dt.x-W.y))*180,wt=Math.atan((j.y-dt.y)/(dt.x-j.y))*180,St=Ft<30||Ft>150,et=wt<30||wt>150,it=Ft>70&&Ft<110,Tt=wt>70&&wt<110;if(St&&!et||Ft*wt<0){nt=!1;break}else if(it&&!Tt||Ft*wt<0){nt=!1;break}else if((dt.x-W.x)*(dt.x-j.x)<0){nt=!1;break}else if((dt.y-W.y)*(dt.y-j.y)<0){nt=!1;break}}return nt}function U(W,j){for(var V=!1,q=1,$=S*q,J=x*q,ut=[$,-$,0,0],nt=[0,0,J,-J],yt=0;yt<W.length;++yt)for(var dt=W[yt],Ft=X(dt,W),wt=0;wt<ut.length;wt++){var St=l(dt,{x:dt.x+ut[wt],y:dt.y+nt[wt]},W,j);if(St){dt.x+=ut[wt],dt.y+=nt[wt];var et=X(dt,W),it=Math.random();et<Ft||it<g&&it>T?(Ft=et,V=!0):(dt.x-=ut[wt],dt.y-=nt[wt])}}return g>T&&(g*=E),V?y(W):0}function X(W,j){var V=0;(W.x<0||W.y<0||W.x+W.size[0]+20>_||W.y+W.size[1]+20>m)&&(V+=1e12);for(var q=0;q<j.length;++q)W.id!==j[q].id&&(V+=k(W,j[q]));return V}function F(W,j){if(W.length===0)return{nodes:W,edges:j};W.forEach(function(dt){var Ft=j.filter(function(wt){return wt.source===dt.id||wt.target===dt.id});b.set(dt,Ft)}),W.sort(function(dt,Ft){var wt,St;return((wt=b.get(dt.id))===null||wt===void 0?void 0:wt.length)-((St=b.get(Ft.id))===null||St===void 0?void 0:St.length)});for(var V=y(W),q=20,$=1,J=0,ut=50,nt=0;q>0&&(nt++,!(nt>=ut));){var yt=U(W,j);yt!==0&&(J=yt),$=J-V,V=J,$===0?--q:q=20}return W.forEach(function(dt){dt.x=dt.x-dt.size[0]/2,dt.y=dt.y-dt.size[1]/2}),{nodes:W,edges:j}}G.default=F},589806:function(We,G,_){"use strict";var m=this&&this.__createBinding||(Object.create?function(p,b,S,x){x===void 0&&(x=S);var g=Object.getOwnPropertyDescriptor(b,S);(!g||("get"in g?!b.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return b[S]}}),Object.defineProperty(p,x,g)}:function(p,b,S,x){x===void 0&&(x=S),p[x]=b[S]}),R=this&&this.__setModuleDefault||(Object.create?function(p,b){Object.defineProperty(p,"default",{enumerable:!0,value:b})}:function(p,b){p.default=b}),w=this&&this.__importStar||function(p){if(p&&p.__esModule)return p;var b={};if(p!=null)for(var S in p)S!=="default"&&Object.prototype.hasOwnProperty.call(p,S)&&m(b,p,S);return R(b,p),b};Object.defineProperty(G,"__esModule",{value:!0});var M=w(_(486880)),P=_(449784);function L(){function p(Gt){return function(){return Gt}}var b=function(Gt){return Gt.cluster},S=p(1),x=p(-1),g=p(100),T=p(.1),E=[0,0],O=[],k={},y=[],l=100,U=100,X={none:{x:0,y:0}},F=[],W,j="force",V=!0,q=.1;function $(Gt){if(!V)return $;W.tick(),Ft();for(var ae=0,Ne=O.length,ee=void 0,de=Gt*q;ae<Ne;++ae)ee=O[ae],ee.vx+=(X[b(ee)].x-ee.x)*de,ee.vy+=(X[b(ee)].y-ee.y)*de}function J(){O&&ut()}function ut(){if(!(!O||!O.length)){if(b(O[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var Gt=nt();W=M.forceSimulation(Gt.nodes).force("x",M.forceX(l).strength(.1)).force("y",M.forceY(U).strength(.1)).force("collide",M.forceCollide(function(ae){return ae.r}).iterations(4)).force("charge",M.forceManyBody().strength(x)).force("links",M.forceLink(Gt.nodes.length?Gt.links:[]).distance(g).strength(T)),F=W.nodes(),Ft()}}function nt(){var Gt=[],ae=[],Ne={},ee=[],de={},ze=[];return de=yt(O),ze=dt(y),ee=Object.keys(de),ee.forEach(function(be,ke){var he=de[be];Gt.push({id:be,size:he.count,r:Math.sqrt(he.sumforceNodeSize/Math.PI)}),Ne[be]=ke}),ze.forEach(function(be){var ke=(0,P.getEdgeTerminal)(be,"source"),he=(0,P.getEdgeTerminal)(be,"target"),vt=Ne[ke],ie=Ne[he];vt!==void 0&&ie!==void 0&&ae.push({source:vt,target:ie,count:be.count})}),{nodes:Gt,links:ae}}function yt(Gt){var ae={};return Gt.forEach(function(Ne){var ee=b(Ne);ae[ee]||(ae[ee]={count:0,sumforceNodeSize:0})}),Gt.forEach(function(Ne){var ee=b(Ne),de=S(Ne),ze=ae[ee];ze.count=ze.count+1,ze.sumforceNodeSize=ze.sumforceNodeSize+Math.PI*(de*de)*1.3,ae[ee]=ze}),ae}function dt(Gt){var ae={},Ne=[];Gt.forEach(function(de){var ze=wt(de),be=0;ae[ze]!==void 0&&(be=ae[ze]),be+=1,ae[ze]=be});var ee=Object.entries(ae);return ee.forEach(function(de){var ze=de[0],be=de[1],ke=ze.split("~")[0],he=ze.split("~")[1];ke!==void 0&&he!==void 0&&Ne.push({source:ke,target:he,count:be})}),Ne}function Ft(){return X={none:{x:0,y:0}},F.forEach(function(Gt){X[Gt.id]={x:Gt.x-E[0],y:Gt.y-E[1]}}),X}function wt(Gt){var ae=(0,P.getEdgeTerminal)(Gt,"source"),Ne=(0,P.getEdgeTerminal)(Gt,"target"),ee=b(k[ae]),de=b(k[Ne]);return ee<=de?"".concat(ee,"~").concat(de):"".concat(de,"~").concat(ee)}function St(Gt){k={},Gt.forEach(function(ae){k[ae.id]=ae})}function et(Gt){return arguments.length?(j=Gt,J(),$):j}function it(Gt){return arguments.length?typeof Gt=="string"?(b=function(ae){return ae[Gt]},$):(b=Gt,$):b}function Tt(Gt){return arguments.length?(V=Gt,$):V}function Nt(Gt){return arguments.length?(q=Gt,$):q}function st(Gt){return arguments.length?(l=Gt,$):l}function xt(Gt){return arguments.length?(U=Gt,$):U}function zt(Gt){return arguments.length?(St(Gt||[]),O=Gt||[],$):O}function Wt(Gt){return arguments.length?(y=Gt||[],J(),$):y}function _t(Gt){return arguments.length?(typeof Gt=="function"?S=Gt:S=p(+Gt),J(),$):S}function Xt(Gt){return arguments.length?(typeof Gt=="function"?x=Gt:x=p(+Gt),J(),$):x}function te(Gt){return arguments.length?(typeof Gt=="function"?g=Gt:g=p(+Gt),J(),$):g}function ue(Gt){return arguments.length?(typeof Gt=="function"?T=Gt:T=p(+Gt),J(),$):T}function fe(Gt){return arguments.length?(E=Gt,$):E}return $.initialize=function(Gt){O=Gt,J()},$.template=et,$.groupBy=it,$.enableGrouping=Tt,$.strength=Nt,$.centerX=st,$.centerY=xt,$.nodes=zt,$.links=Wt,$.forceNodeSize=_t,$.nodeSize=$.forceNodeSize,$.forceCharge=Xt,$.forceLinkDistance=te,$.forceLinkStrength=ue,$.offset=fe,$.getFocis=Ft,$}G.default=L},508810:function(We,G,_){"use strict";var m=this&&this.__extends||function(){var O=function(k,y){return O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,U){l.__proto__=U}||function(l,U){for(var X in U)Object.prototype.hasOwnProperty.call(U,X)&&(l[X]=U[X])},O(k,y)};return function(k,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");O(k,y);function l(){this.constructor=k}k.prototype=y===null?Object.create(y):(l.prototype=y.prototype,new l)}}(),R=this&&this.__createBinding||(Object.create?function(O,k,y,l){l===void 0&&(l=y);var U=Object.getOwnPropertyDescriptor(k,y);(!U||("get"in U?!k.__esModule:U.writable||U.configurable))&&(U={enumerable:!0,get:function(){return k[y]}}),Object.defineProperty(O,l,U)}:function(O,k,y,l){l===void 0&&(l=y),O[l]=k[y]}),w=this&&this.__setModuleDefault||(Object.create?function(O,k){Object.defineProperty(O,"default",{enumerable:!0,value:k})}:function(O,k){O.default=k}),M=this&&this.__importStar||function(O){if(O&&O.__esModule)return O;var k={};if(O!=null)for(var y in O)y!=="default"&&Object.prototype.hasOwnProperty.call(O,y)&&R(k,O,y);return w(k,O),k},P=this&&this.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(G,"__esModule",{value:!0}),G.ForceLayout=void 0;var L=M(_(486880)),p=P(_(589806)),b=_(449784),S=_(762329),x=_(416470),g=function(O){m(k,O);function k(y){var l=O.call(this)||this;return l.center=[0,0],l.nodeStrength=null,l.edgeStrength=null,l.preventOverlap=!1,l.clusterNodeStrength=null,l.clusterEdgeStrength=null,l.clusterEdgeDistance=null,l.clusterNodeSize=null,l.clusterFociStrength=null,l.linkDistance=50,l.alphaDecay=.028,l.alphaMin=.001,l.alpha=.3,l.collideStrength=1,l.workerEnabled=!1,l.tick=function(){},l.onLayoutEnd=function(){},l.ticking=void 0,y&&l.updateCfg(y),l}return k.prototype.getDefaultCfg=function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}},k.prototype.init=function(y){var l=this;l.nodes=y.nodes||[];var U=y.edges||[];l.edges=U.map(function(X){var F={},W=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(X).forEach(function(j){W.indexOf(j)>-1||(F[j]=X[j])}),F}),l.ticking=!1},k.prototype.execute=function(y){var l=this,U=l.nodes,X=l.edges;if(!l.ticking){var F=l.forceSimulation,W=l.alphaMin,j=l.alphaDecay,V=l.alpha;if(F){if(y){if(l.clustering&&l.clusterForce&&(l.clusterForce.nodes(U),l.clusterForce.links(X)),F.nodes(U),X&&l.edgeForce)l.edgeForce.links(X);else if(X&&!l.edgeForce){var J=L.forceLink().id(function(dt){return dt.id}).links(X);l.edgeStrength&&J.strength(l.edgeStrength),l.linkDistance&&J.distance(l.linkDistance),l.edgeForce=J,F.force("link",J)}}l.preventOverlap&&l.overlapProcess(F),F.alpha(V).restart(),this.ticking=!0}else try{var q=L.forceManyBody();if(l.nodeStrength&&q.strength(l.nodeStrength),F=L.forceSimulation().nodes(U),l.clustering){var $=(0,p.default)();$.centerX(l.center[0]).centerY(l.center[1]).template("force").strength(l.clusterFociStrength),X&&$.links(X),U&&$.nodes(U),$.forceLinkDistance(l.clusterEdgeDistance).forceLinkStrength(l.clusterEdgeStrength).forceCharge(l.clusterNodeStrength).forceNodeSize(l.clusterNodeSize),l.clusterForce=$,F.force("group",$)}if(F.force("center",L.forceCenter(l.center[0],l.center[1])).force("charge",q).alpha(V).alphaDecay(j).alphaMin(W),l.preventOverlap&&l.overlapProcess(F),X){var J=L.forceLink().id(function(yt){return yt.id}).links(X);l.edgeStrength&&J.strength(l.edgeStrength),l.linkDistance&&J.distance(l.linkDistance),l.edgeForce=J,F.force("link",J)}if(l.workerEnabled&&!E()&&(l.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!l.workerEnabled)F.on("tick",function(){l.tick()}).on("end",function(){l.ticking=!1,l.onLayoutEnd&&l.onLayoutEnd()}),l.ticking=!0;else{F.stop();for(var ut=T(F),nt=1;nt<=ut;nt++)F.tick(),postMessage({nodes:U,currentTick:nt,totalTicks:ut,type:x.LAYOUT_MESSAGE.TICK},void 0);l.ticking=!1}l.forceSimulation=F,l.ticking=!0}catch(yt){l.ticking=!1,console.warn(yt)}}},k.prototype.overlapProcess=function(y){var l=this,U=l.nodeSize,X=l.nodeSpacing,F,W,j=l.collideStrength;if((0,b.isNumber)(X)?W=function(){return X}:(0,b.isFunction)(X)?W=X:W=function(){return 0},!U)F=function(J){if(J.size){if((0,b.isArray)(J.size)){var ut=J.size[0]>J.size[1]?J.size[0]:J.size[1];return ut/2+W(J)}if((0,b.isObject)(J.size)){var ut=J.size.width>J.size.height?J.size.width:J.size.height;return ut/2+W(J)}return J.size/2+W(J)}return 10+W(J)};else if((0,b.isFunction)(U))F=function(J){var ut=U(J);return ut+W(J)};else if((0,b.isArray)(U)){var V=U[0]>U[1]?U[0]:U[1],q=V/2;F=function(J){return q+W(J)}}else if((0,b.isNumber)(U)){var $=U/2;F=function(J){return $+W(J)}}else F=function(){return 10};y.force("collisionForce",L.forceCollide(F).strength(j))},k.prototype.updateCfg=function(y){var l=this;l.ticking&&(l.forceSimulation.stop(),l.ticking=!1),l.forceSimulation=null,Object.assign(l,y)},k.prototype.destroy=function(){var y=this;y.ticking&&(y.forceSimulation.stop(),y.ticking=!1),y.nodes=null,y.edges=null,y.destroyed=!0},k}(S.Base);G.ForceLayout=g;function T(O){var k=O.alphaMin(),y=O.alphaTarget(),l=O.alpha(),U=Math.log((k-y)/(l-y))/Math.log(1-O.alphaDecay()),X=Math.ceil(U);return X}function E(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}},885717:function(We,G,_){"use strict";var m=this&&this.__createBinding||(Object.create?function(w,M,P,L){L===void 0&&(L=P);var p=Object.getOwnPropertyDescriptor(M,P);(!p||("get"in p?!M.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return M[P]}}),Object.defineProperty(w,L,p)}:function(w,M,P,L){L===void 0&&(L=P),w[L]=M[P]}),R=this&&this.__exportStar||function(w,M){for(var P in w)P!=="default"&&!Object.prototype.hasOwnProperty.call(M,P)&&m(M,w,P)};Object.defineProperty(G,"__esModule",{value:!0}),R(_(508810),G)},191019:function(We,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.forceNBody=void 0;var m=_(971829),R=.81,w=.1;function M(b,S,x,g,T){var E=x/g,O=b.map(function(y,l){var U=S[y.id],X=U.data,F=U.x,W=U.y,j=U.size,V=X.layout.force.nodeStrength;return{x:F,y:W,size:j,index:l,vx:0,vy:0,weight:E*V}}),k=(0,m.quadtree)(O,function(y){return y.x},function(y){return y.y}).visitAfter(P);return O.forEach(function(y){p(y,k)}),O.map(function(y,l){var U=S[b[l].id],X=U.data.layout.force.mass,F=X===void 0?1:X;T[2*l]=y.vx/F,T[2*l+1]=y.vy/F}),T}G.forceNBody=M;function P(b){var S=0,x=0,g=0;if(b.length){for(var T=0;T<4;T++){var E=b[T];E&&E.weight&&(S+=E.weight,x+=E.x*E.weight,g+=E.y*E.weight)}b.x=x/S,b.y=g/S,b.weight=S}else{var E=b;b.x=E.data.x,b.y=E.data.y,b.weight=E.data.weight}}var L=function(b,S,x,g,T,E){var O=E.x-b.x||w,k=E.y-b.y||w,y=g-S,l=O*O+k*k,U=Math.sqrt(l)*l;if(y*y*R<l){var X=b.weight/U;return E.vx+=O*X,E.vy+=k*X,!0}if(b.length)return!1;if(b.data!==E){var X=b.data.weight/U;E.vx+=O*X,E.vy+=k*X}};function p(b,S){S.visit(function(x,g,T,E,O){return L(x,g,T,E,O,b)})}},306740:function(We,G,_){"use strict";var m=this&&this.__extends||function(){var b=function(S,x){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,T){g.__proto__=T}||function(g,T){for(var E in T)Object.prototype.hasOwnProperty.call(T,E)&&(g[E]=T[E])},b(S,x)};return function(S,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");b(S,x);function g(){this.constructor=S}S.prototype=x===null?Object.create(x):(g.prototype=x.prototype,new g)}}(),R=this&&this.__assign||function(){return R=Object.assign||function(b){for(var S,x=1,g=arguments.length;x<g;x++){S=arguments[x];for(var T in S)Object.prototype.hasOwnProperty.call(S,T)&&(b[T]=S[T])}return b},R.apply(this,arguments)};Object.defineProperty(G,"__esModule",{value:!0}),G.Force2Layout=void 0;var w=_(762329),M=_(449784),P=_(191019),L=function(b,S){var x;return b?(0,M.isNumber)(b)?x=function(g){return b}:x=b:x=function(g){return S||1},x},p=function(b){m(S,b);function S(x){var g=b.call(this)||this;g.maxIteration=1e3,g.workerEnabled=!1,g.edgeStrength=200,g.nodeStrength=1e3,g.coulombDisScale=.005,g.damping=.9,g.maxSpeed=500,g.minMovement=.4,g.interval=.02,g.factor=1,g.linkDistance=200,g.gravity=0,g.clusterNodeStrength=20,g.preventOverlap=!0,g.distanceThresholdMode="mean",g.tick=function(){},g.nodes=[],g.edges=[],g.width=300,g.height=300,g.nodeMap={},g.nodeIdxMap={},g.judgingDistance=0,g.centripetalOptions={leaf:2,single:2,others:1,center:function(E){return{x:g.width/2,y:g.height/2}}};var T=x.getMass;return g.propsGetMass=T,g.updateCfg(x),g}return S.prototype.getCentripetalOptions=function(){var x=this,g=x.leafCluster,T=x.clustering,E=x.nodeClusterBy,O=x.nodes,k=x.nodeMap,y=x.clusterNodeStrength,l=function(ut){return typeof y=="function"?y(ut):y},U={},X;if(g){X=this.getSameTypeLeafMap()||{};var F=Array.from(new Set(O==null?void 0:O.map(function(ut){return ut[E]})))||[];U={single:100,leaf:function(ut,nt,yt){var dt=X[ut.id]||{},Ft=dt.relativeLeafNodes,wt=dt.sameTypeLeafNodes;return(wt==null?void 0:wt.length)===(Ft==null?void 0:Ft.length)||(F==null?void 0:F.length)===1?1:l(ut)},others:1,center:function(ut,nt,yt){var dt,Ft=(((dt=ut.data)===null||dt===void 0?void 0:dt.layout)||{}).degree;if(!Ft)return{x:100,y:100};var wt;if(Ft===1){var St=(X[ut.id]||{}).sameTypeLeafNodes,et=St===void 0?[]:St;et.length===1?wt=void 0:et.length>1&&(wt=(0,M.getAvgNodePosition)(et))}else wt=void 0;return{x:wt==null?void 0:wt.x,y:wt==null?void 0:wt.y}}}}if(T){X||(X=this.getSameTypeLeafMap());var W=Array.from(new Set(O.map(function(ut,nt){return ut[E]}))).filter(function(ut){return ut!==void 0}),j={};W.forEach(function(ut){var nt=O.filter(function(yt){return yt[E]===ut}).map(function(yt){return k[yt.id]});j[ut]=(0,M.getAvgNodePosition)(nt)}),U={single:function(ut){return l(ut)},leaf:function(ut){return l(ut)},others:function(ut){return l(ut)},center:function(ut,nt,yt){var dt=j[ut[E]];return{x:dt==null?void 0:dt.x,y:dt==null?void 0:dt.y}}}}this.centripetalOptions=R(R({},this.centripetalOptions),U);var V=this.centripetalOptions,q=V.leaf,$=V.single,J=V.others;q&&typeof q!="function"&&(this.centripetalOptions.leaf=function(){return q}),$&&typeof $!="function"&&(this.centripetalOptions.single=function(){return $}),J&&typeof J!="function"&&(this.centripetalOptions.others=function(){return J})},S.prototype.updateCfg=function(x){x&&Object.assign(this,x)},S.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},S.prototype.execute=function(){var x=this;x.stop();var g=x.nodes,T=x.edges,E=x.defSpringLen;if(x.judgingDistance=0,!g||g.length===0){x.onLayoutEnd([]);return}!x.width&&typeof window!="undefined"&&(x.width=window.innerWidth),!x.height&&typeof window!="undefined"&&(x.height=window.innerHeight),x.center||(x.center=[x.width/2,x.height/2]);var O=x.center;if(g.length===1){g[0].x=O[0],g[0].y=O[1],x.onLayoutEnd([R({},g[0])]);return}x.degreesMap=(0,M.getDegreeMap)(g,T),x.propsGetMass?x.getMass=x.propsGetMass:x.getMass=function(W){var j=1;(0,M.isNumber)(W.mass)&&(j=W.mass);var V=x.degreesMap[W.id].all;return!V||V<5?j:V*5*j};var k=x.nodeSize,y;if(x.preventOverlap){var l=x.nodeSpacing,U;(0,M.isNumber)(l)?U=function(){return l}:(0,M.isFunction)(l)?U=l:U=function(){return 0},k?(0,M.isArray)(k)?y=function(W){return Math.max(k[0],k[1])+U(W)}:y=function(W){return k+U(W)}:y=function(W){return W.size?(0,M.isArray)(W.size)?Math.max(W.size[0],W.size[1])+U(W):(0,M.isObject)(W.size)?Math.max(W.size.width,W.size.height)+U(W):W.size+U(W):10+U(W)}}x.nodeSize=y,x.linkDistance=L(x.linkDistance,1),x.nodeStrength=L(x.nodeStrength,1),x.edgeStrength=L(x.edgeStrength,1);var X={},F={};g.forEach(function(W,j){(0,M.isNumber)(W.x)||(W.x=Math.random()*x.width),(0,M.isNumber)(W.y)||(W.y=Math.random()*x.height);var V=x.degreesMap[W.id];X[W.id]=R(R({},W),{data:R(R({},W.data),{size:x.nodeSize(W)||30,layout:{inDegree:V.in,outDegree:V.out,degree:V.all,tDegree:V.in,sDegree:V.out,force:{mass:x.getMass(W),nodeStrength:x.nodeStrength(W,T)}}})}),F[W.id]=j}),x.nodeMap=X,x.nodeIdxMap=F,x.edgeInfos=[],T==null||T.forEach(function(W){var j=X[W.source],V=X[W.target];!j||!V?elf.edgeInfos.push({}):x.edgeInfos.push({edgeStrength:x.edgeStrength(W),linkDistance:E?E(R(R({},W),{source:j,target:V}),j,V):x.linkDistance(W,j,V)||1+(k(j)+k(j)||0)/2})}),this.getCentripetalOptions(),x.onLayoutEnd=x.onLayoutEnd||function(){},x.run()},S.prototype.run=function(){var x=this,g=x.maxIteration,T=x.nodes,E=x.edges,O=x.workerEnabled,k=x.minMovement,y=x.animate,l=x.nodeMap,U=x.height;if(x.currentMinY=0,x.currentMaxY=U,!!T){var X=[];if(T.forEach(function(J,ut){X[2*ut]=0,X[2*ut+1]=0}),this.defSideCoe&&typeof this.defSideCoe=="function"){var F={};E.forEach(function(J){var ut=J.source,nt=J.target;F[ut]=F[ut]||[],F[ut].push(J),F[nt]=F[nt]||[],F[nt].push(J)}),this.relatedEdges=F}var W=g,j=!y;if(O||j){for(var V=0,q=0;(x.judgingDistance>k||q<1)&&q<W;q++)V=q,x.runOneStep(q,X);x.onLayoutEnd(Object.values(l))}else{if(typeof window=="undefined")return;var $=0;this.timeInterval=window.setInterval(function(){T&&(x.runOneStep($,X),$++,($>=W||x.judgingDistance<k)&&(x.onLayoutEnd(Object.values(l)),window.clearInterval(x.timeInterval)))},0)}}},S.prototype.runOneStep=function(x,g){var T,E=this,O=E.nodes,k=E.edges,y=E.nodeMap,l=E.monitor,U=[];if(O!=null&&O.length){E.calRepulsive(U),k&&E.calAttractive(U),E.calGravity(U),E.attractToSide(U);var X=E.interval;if(E.updateVelocity(U,g,X),E.updatePosition(g,X),(T=E.tick)===null||T===void 0||T.call(E),l){var F=this.calTotalEnergy(U);l({energy:F,nodes:O,edges:k,iterations:x})}}},S.prototype.calTotalEnergy=function(x){var g=this,T=g.nodes,E=g.nodeMap;if(!(T!=null&&T.length))return 0;var O=0;return T.forEach(function(k,y){var l=x[2*y],U=x[2*y+1],X=l*l+U*U,F=E[k.id].data.layout.force.mass,W=F===void 0?1:F;O+=W*X*.5}),O},S.prototype.calRepulsive=function(x){var g=this,T=g.nodes,E=g.nodeMap,O=g.factor,k=g.coulombDisScale,y=g.nodeSize;(0,P.forceNBody)(T,E,O,k*k,x)},S.prototype.calAttractive=function(x){var g=this,T=g.edges,E=g.nodeMap,O=g.nodeIdxMap,k=g.edgeInfos,y=g.nodeSize;T.forEach(function(l,U){var X=(0,M.getEdgeTerminal)(l,"source"),F=(0,M.getEdgeTerminal)(l,"target"),W=E[X],j=E[F];if(!(!W||!j)){var V=j.x-W.x,q=j.y-W.y;!V&&!q&&(V=Math.random()*.01,q=Math.random()*.01);var $=Math.sqrt(V*V+q*q),J=V/$,ut=q/$,nt=k[U]||{},yt=nt.linkDistance,dt=yt===void 0?200:yt,Ft=nt.edgeStrength,wt=Ft===void 0?200:Ft,St=dt-$,et=St*wt,it=W.data.layout.force.mass||1,Tt=j.data.layout.force.mass||1,Nt=1/it,st=1/Tt,xt=J*et,zt=ut*et,Wt=2*O[X],_t=2*O[F];x[Wt]-=xt*Nt,x[Wt+1]-=zt*Nt,x[_t]+=xt*st,x[_t+1]+=zt*st}})},S.prototype.calGravity=function(x){var g,T=this,E=T.nodes,O=T.edges,k=O===void 0?[]:O,y=T.nodeMap,l=T.width,U=T.height,X=T.center,F=T.gravity,W=T.degreesMap,j=T.centripetalOptions;if(E)for(var V=E.length,q=0;q<V;q++){var $=2*q,J=y[E[q].id],ut=J.data.layout.force.mass,nt=ut===void 0?1:ut,yt=0,dt=0,Ft=F,wt=W[J.id],St=wt.in,et=wt.out,it=wt.all,Tt=(g=T.getCenter)===null||g===void 0?void 0:g.call(T,J,it);if(Tt){var Nt=Tt[0],st=Tt[1],xt=Tt[2];yt=J.x-Nt,dt=J.y-st,Ft=xt}else yt=J.x-X[0],dt=J.y-X[1];if(Ft&&(x[$]-=Ft*yt/nt,x[$+1]-=Ft*dt/nt),j){var zt=j.leaf,Wt=j.single,_t=j.others,Xt=j.center,te=(Xt==null?void 0:Xt(J,E,k,l,U))||{x:0,y:0,centerStrength:0},ue=te.x,fe=te.y,Gt=te.centerStrength;if(!(0,M.isNumber)(ue)||!(0,M.isNumber)(fe))continue;var ae=(J.x-ue)/nt,Ne=(J.y-fe)/nt;if(Gt&&(x[$]-=Gt*ae,x[$+1]-=Gt*Ne),it===0){var ee=Wt(J);if(!ee)continue;x[$]-=ee*ae,x[$+1]-=ee*Ne;continue}if(St===0||et===0){var de=zt(J,E,k);if(!de)continue;x[$]-=de*ae,x[$+1]-=de*Ne;continue}var ze=_t(J);if(!ze)continue;x[$]-=ze*ae,x[$+1]-=ze*Ne}}},S.prototype.attractToSide=function(x){var g=this,T=g.defSideCoe,E=g.height,O=g.nodes,k=g.relatedEdges,y=g.currentMinY,l=y===void 0?0:y,U=g.currentMaxY,X=U===void 0?this.height:U;!T||typeof T!="function"||!(O!=null&&O.length)||O.forEach(function(F,W){var j=T(F,k[F.id]||[]);if(j!==0){var V=j<0?l:X,q=Math.abs(j);x[2*W+1]-=q*(F.y-V)}})},S.prototype.updateVelocity=function(x,g,T){var E=this,O=E.nodes,k=E.damping,y=E.maxSpeed;O!=null&&O.length&&O.forEach(function(l,U){var X=(g[2*U]+x[2*U]*T)*k||.01,F=(g[2*U+1]+x[2*U+1]*T)*k||.01,W=Math.sqrt(X*X+F*F);if(W>y){var j=y/W;X=j*X,F=j*F}g[2*U]=X,g[2*U+1]=F})},S.prototype.updatePosition=function(x,g){var T=this,E=T.nodes,O=T.distanceThresholdMode,k=T.nodeMap;if(!(E!=null&&E.length)){this.judgingDistance=0;return}var y=0;O==="max"?T.judgingDistance=-1/0:O==="min"&&(T.judgingDistance=1/0);var l=1/0,U=-1/0;E.forEach(function(X,F){var W=k[X.id];if((0,M.isNumber)(X.fx)&&(0,M.isNumber)(X.fy)){X.x=X.fx,X.y=X.fy,W.x=X.x,W.y=X.y;return}var j=x[2*F]*g,V=x[2*F+1]*g;X.x+=j,X.y+=V,W.x=X.x,W.y=X.y,X.y<l&&(l=X.y),X.y>U&&(U=X.y);var q=Math.sqrt(j*j+V*V);switch(O){case"max":T.judgingDistance<q&&(T.judgingDistance=q);break;case"min":T.judgingDistance>q&&(T.judgingDistance=q);break;default:y=y+q;break}}),this.currentMinY=l,this.currentMaxY=U,(!O||O==="mean")&&(T.judgingDistance=y/E.length)},S.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},S.prototype.destroy=function(){var x=this;x.stop(),x.tick=null,x.nodes=null,x.edges=null,x.destroyed=!0},S.prototype.getType=function(){return"force2"},S.prototype.getSameTypeLeafMap=function(){var x=this,g=x.nodeClusterBy,T=x.nodes,E=x.edges,O=x.nodeMap,k=x.degreesMap;if(T!=null&&T.length){var y={};return T.forEach(function(l,U){var X=k[l.id].all;X===1&&(y[l.id]=(0,M.getCoreNodeAndRelativeLeafNodes)("leaf",l,E,g,k,O))}),y}},S}(w.Base);G.Force2Layout=p},19712:function(We,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var _=function(){function m(R){this.id=R.id||0,this.rx=R.rx,this.ry=R.ry,this.fx=0,this.fy=0,this.mass=R.mass,this.degree=R.degree,this.g=R.g||0}return m.prototype.distanceTo=function(R){var w=this.rx-R.rx,M=this.ry-R.ry;return Math.hypot(w,M)},m.prototype.setPos=function(R,w){this.rx=R,this.ry=w},m.prototype.resetForce=function(){this.fx=0,this.fy=0},m.prototype.addForce=function(R){var w=R.rx-this.rx,M=R.ry-this.ry,P=Math.hypot(w,M);P=P<1e-4?1e-4:P;var L=this.g*(this.degree+1)*(R.degree+1)/P;this.fx+=L*w/P,this.fy+=L*M/P},m.prototype.in=function(R){return R.contains(this.rx,this.ry)},m.prototype.add=function(R){var w=this.mass+R.mass,M=(this.rx*this.mass+R.rx*R.mass)/w,P=(this.ry*this.mass+R.ry*R.mass)/w,L=this.degree+R.degree,p={rx:M,ry:P,mass:w,degree:L};return new m(p)},m}();G.default=_},148564:function(We,G,_){"use strict";var m=this&&this.__extends||function(){var S=function(x,g){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,E){T.__proto__=E}||function(T,E){for(var O in E)Object.prototype.hasOwnProperty.call(E,O)&&(T[O]=E[O])},S(x,g)};return function(x,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");S(x,g);function T(){this.constructor=x}x.prototype=g===null?Object.create(g):(T.prototype=g.prototype,new T)}}(),R=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(G,"__esModule",{value:!0}),G.ForceAtlas2Layout=void 0;var w=_(762329),M=_(449784),P=R(_(19712)),L=R(_(851638)),p=R(_(762732)),b=function(S){m(x,S);function x(g){var T=S.call(this)||this;return T.center=[0,0],T.width=300,T.height=300,T.nodes=[],T.edges=[],T.kr=5,T.kg=1,T.mode="normal",T.preventOverlap=!1,T.dissuadeHubs=!1,T.barnesHut=void 0,T.maxIteration=0,T.ks=.1,T.ksmax=10,T.tao=.1,T.onLayoutEnd=function(){},T.prune=void 0,T.updateCfg(g),T}return x.prototype.getDefaultCfg=function(){return{}},x.prototype.execute=function(){var g=this,T=g.nodes,E=g.onLayoutEnd,O=g.prune,k=g.maxIteration;!g.width&&typeof window!="undefined"&&(g.width=window.innerWidth),!g.height&&typeof window!="undefined"&&(g.height=window.innerHeight);for(var y=[],l=T.length,U=0;U<l;U+=1){var X=T[U],F=10,W=10;(0,M.isNumber)(X.size)&&(F=X.size,W=X.size),(0,M.isArray)(X.size)?(isNaN(X.size[0])||(F=X.size[0]),isNaN(X.size[1])||(W=X.size[1])):(0,M.isObject)(X.size)&&(F=X.size.width,W=X.size.height),g.getWidth&&!isNaN(g.getWidth(X))&&(W=g.getWidth(X)),g.getHeight&&!isNaN(g.getHeight(X))&&(F=g.getHeight(X));var j=Math.max(F,W);y.push(j)}g.barnesHut===void 0&&l>250&&(g.barnesHut=!0),g.prune===void 0&&l>100&&(g.prune=!0),this.maxIteration===0&&!g.prune?(k=250,l<=200&&l>100?k=1e3:l>200&&(k=1200),this.maxIteration=k):this.maxIteration===0&&O&&(k=100,l<=200&&l>100?k=500:l>200&&(k=950),this.maxIteration=k),g.kr||(g.kr=50,l>100&&l<=500?g.kr=20:l>500&&(g.kr=1)),g.kg||(g.kg=20,l>100&&l<=500?g.kg=10:l>500&&(g.kg=1)),this.nodes=g.updateNodesByForces(y),E()},x.prototype.updateNodesByForces=function(g){for(var T=this,E=T.edges,O=T.maxIteration,k=T.nodes,y=E.filter(function(wt){var St=(0,M.getEdgeTerminal)(wt,"source"),et=(0,M.getEdgeTerminal)(wt,"target");return St!==et}),l=k.length,U=y.length,X=[],F={},W={},j=[],V=0;V<l;V+=1)F[k[V].id]=V,X[V]=0,(k[V].x===void 0||isNaN(k[V].x))&&(k[V].x=Math.random()*1e3),(k[V].y===void 0||isNaN(k[V].y))&&(k[V].y=Math.random()*1e3),j.push({x:k[V].x,y:k[V].y});for(var V=0;V<U;V+=1){for(var q=void 0,$=void 0,J=0,ut=0,nt=0;nt<l;nt+=1){var yt=(0,M.getEdgeTerminal)(y[V],"source"),dt=(0,M.getEdgeTerminal)(y[V],"target");k[nt].id===yt?(q=k[nt],J=nt):k[nt].id===dt&&($=k[nt],ut=nt),W[V]={sourceIdx:J,targetIdx:ut}}q&&(X[F[q.id]]+=1),$&&(X[F[$.id]]+=1)}var Ft=O;if(k=this.iterate(Ft,F,W,U,X,g),T.prune){for(var nt=0;nt<U;nt+=1)X[W[nt].sourceIdx]<=1?(k[W[nt].sourceIdx].x=k[W[nt].targetIdx].x,k[W[nt].sourceIdx].y=k[W[nt].targetIdx].y):X[W[nt].targetIdx]<=1&&(k[W[nt].targetIdx].x=k[W[nt].sourceIdx].x,k[W[nt].targetIdx].y=k[W[nt].sourceIdx].y);T.prune=!1,T.barnesHut=!1,Ft=100,k=this.iterate(Ft,F,W,U,X,g)}return k},x.prototype.iterate=function(g,T,E,O,k,y){for(var l=this,U=l.nodes,X=l.kr,F=l.preventOverlap,W=l.barnesHut,j=U.length,V=0,q=100,$=g,J=50,ut=[],nt=[],yt=[],dt=0;dt<j;dt+=1)if(ut[2*dt]=0,ut[2*dt+1]=0,W){var Ft={id:dt,rx:U[dt].x,ry:U[dt].y,mass:1,g:X,degree:k[dt]};yt[dt]=new P.default(Ft)}for(;$>0;){for(var dt=0;dt<j;dt+=1)nt[2*dt]=ut[2*dt],nt[2*dt+1]=ut[2*dt+1],ut[2*dt]=0,ut[2*dt+1]=0;ut=this.getAttrForces($,J,O,T,E,k,y,ut),W&&(F&&$>J||!F)?ut=this.getOptRepGraForces(ut,yt,k):ut=this.getRepGraForces($,J,ut,q,y,k);var wt=this.updatePos(ut,nt,V,k);U=wt.nodes,V=wt.sg,$--,l.tick&&l.tick()}return U},x.prototype.getAttrForces=function(g,T,E,O,k,y,l,U){for(var X=this,F=X.nodes,W=X.preventOverlap,j=X.dissuadeHubs,V=X.mode,q=X.prune,$=0;$<E;$+=1){var J=F[k[$].sourceIdx],ut=k[$].sourceIdx,nt=F[k[$].targetIdx],yt=k[$].targetIdx;if(!(q&&(y[ut]<=1||y[yt]<=1))){var dt=[nt.x-J.x,nt.y-J.y],Ft=Math.hypot(dt[0],dt[1]);Ft=Ft<1e-4?1e-4:Ft,dt[0]=dt[0]/Ft,dt[1]=dt[1]/Ft,W&&g<T&&(Ft=Ft-l[ut]-l[yt]);var wt=Ft,St=wt;V==="linlog"&&(wt=Math.log(1+Ft),St=wt),j&&(wt=Ft/y[ut],St=Ft/y[yt]),W&&g<T&&Ft<=0?(wt=0,St=0):W&&g<T&&Ft>0&&(wt=Ft,St=Ft),U[2*O[J.id]]+=wt*dt[0],U[2*O[nt.id]]-=St*dt[0],U[2*O[J.id]+1]+=wt*dt[1],U[2*O[nt.id]+1]-=St*dt[1]}}return U},x.prototype.getRepGraForces=function(g,T,E,O,k,y){for(var l=this,U=l.nodes,X=l.preventOverlap,F=l.kr,W=l.kg,j=l.center,V=l.prune,q=U.length,$=0;$<q;$+=1){for(var J=$+1;J<q;J+=1)if(!(V&&(y[$]<=1||y[J]<=1))){var ut=[U[J].x-U[$].x,U[J].y-U[$].y],nt=Math.hypot(ut[0],ut[1]);nt=nt<1e-4?1e-4:nt,ut[0]=ut[0]/nt,ut[1]=ut[1]/nt,X&&g<T&&(nt=nt-k[$]-k[J]);var yt=F*(y[$]+1)*(y[J]+1)/nt;X&&g<T&&nt<0?yt=O*(y[$]+1)*(y[J]+1):X&&g<T&&nt===0?yt=0:X&&g<T&&nt>0&&(yt=F*(y[$]+1)*(y[J]+1)/nt),E[2*$]-=yt*ut[0],E[2*J]+=yt*ut[0],E[2*$+1]-=yt*ut[1],E[2*J+1]+=yt*ut[1]}var dt=[U[$].x-j[0],U[$].y-j[1]],Ft=Math.hypot(dt[0],dt[1]);dt[0]=dt[0]/Ft,dt[1]=dt[1]/Ft;var wt=W*(y[$]+1);E[2*$]-=wt*dt[0],E[2*$+1]-=wt*dt[1]}return E},x.prototype.getOptRepGraForces=function(g,T,E){for(var O=this,k=O.nodes,y=O.kg,l=O.center,U=O.prune,X=k.length,F=9e10,W=-9e10,j=9e10,V=-9e10,q=0;q<X;q+=1)U&&E[q]<=1||(T[q].setPos(k[q].x,k[q].y),k[q].x>=W&&(W=k[q].x),k[q].x<=F&&(F=k[q].x),k[q].y>=V&&(V=k[q].y),k[q].y<=j&&(j=k[q].y));for(var $=Math.max(W-F,V-j),J={xmid:(W+F)/2,ymid:(V+j)/2,length:$,massCenter:l,mass:X},ut=new L.default(J),nt=new p.default(ut),q=0;q<X;q+=1)U&&E[q]<=1||T[q].in(ut)&&nt.insert(T[q]);for(var q=0;q<X;q+=1)if(!(U&&E[q]<=1)){T[q].resetForce(),nt.updateForce(T[q]),g[2*q]-=T[q].fx,g[2*q+1]-=T[q].fy;var yt=[k[q].x-l[0],k[q].y-l[1]],dt=Math.hypot(yt[0],yt[1]);dt=dt<1e-4?1e-4:dt,yt[0]=yt[0]/dt,yt[1]=yt[1]/dt;var Ft=y*(E[q]+1);g[2*q]-=Ft*yt[0],g[2*q+1]-=Ft*yt[1]}return g},x.prototype.updatePos=function(g,T,E,O){for(var k=this,y=k.nodes,l=k.ks,U=k.tao,X=k.prune,F=k.ksmax,W=y.length,j=[],V=[],q=0,$=0,J=0;J<W;J+=1)if(!(X&&O[J]<=1)){var ut=[g[2*J]-T[2*J],g[2*J+1]-T[2*J+1]],nt=Math.hypot(ut[0],ut[1]),yt=[g[2*J]+T[2*J],g[2*J+1]+T[2*J+1]],dt=Math.hypot(yt[0],yt[1]);j[J]=nt,V[J]=dt/2,q+=(O[J]+1)*j[J],$+=(O[J]+1)*V[J]}var Ft=E;E=U*$/q,Ft!==0&&(E=E>1.5*Ft?1.5*Ft:E);for(var J=0;J<W;J+=1)if(!(X&&O[J]<=1)&&!((0,M.isNumber)(y[J].fx)&&(0,M.isNumber)(y[J].fy))){var wt=l*E/(1+E*Math.sqrt(j[J])),St=Math.hypot(g[2*J],g[2*J+1]);St=St<1e-4?1e-4:St;var et=F/St;wt=wt>et?et:wt;var it=wt*g[2*J],Tt=wt*g[2*J+1];y[J].x+=it,y[J].y+=Tt}return{nodes:y,sg:E}},x}(w.Base);G.ForceAtlas2Layout=b},851638:function(We,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var _=function(){function m(R){this.xmid=R.xmid,this.ymid=R.ymid,this.length=R.length,this.massCenter=R.massCenter||[0,0],this.mass=R.mass||1}return m.prototype.getLength=function(){return this.length},m.prototype.contains=function(R,w){var M=this.length/2;return R<=this.xmid+M&&R>=this.xmid-M&&w<=this.ymid+M&&w>=this.ymid-M},m.prototype.NW=function(){var R=this.xmid-this.length/4,w=this.ymid+this.length/4,M=this.length/2,P={xmid:R,ymid:w,length:M},L=new m(P);return L},m.prototype.NE=function(){var R=this.xmid+this.length/4,w=this.ymid+this.length/4,M=this.length/2,P={xmid:R,ymid:w,length:M},L=new m(P);return L},m.prototype.SW=function(){var R=this.xmid-this.length/4,w=this.ymid-this.length/4,M=this.length/2,P={xmid:R,ymid:w,length:M},L=new m(P);return L},m.prototype.SE=function(){var R=this.xmid+this.length/4,w=this.ymid-this.length/4,M=this.length/2,P={xmid:R,ymid:w,length:M},L=new m(P);return L},m}();G.default=_},762732:function(We,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var _=function(){function m(R){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,R!=null&&(this.quad=R)}return m.prototype.insert=function(R){if(this.body==null){this.body=R;return}this._isExternal()?(this.quad&&(this.NW=new m(this.quad.NW()),this.NE=new m(this.quad.NE()),this.SW=new m(this.quad.SW()),this.SE=new m(this.quad.SE())),this._putBody(this.body),this._putBody(R),this.body=this.body.add(R)):(this.body=this.body.add(R),this._putBody(R))},m.prototype._putBody=function(R){this.quad&&(R.in(this.quad.NW())&&this.NW?this.NW.insert(R):R.in(this.quad.NE())&&this.NE?this.NE.insert(R):R.in(this.quad.SW())&&this.SW?this.SW.insert(R):R.in(this.quad.SE())&&this.SE&&this.SE.insert(R))},m.prototype._isExternal=function(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null},m.prototype.updateForce=function(R){if(!(this.body==null||R===this.body))if(this._isExternal())R.addForce(this.body);else{var w=this.quad?this.quad.getLength():0,M=this.body.distanceTo(R);w/M<this.theta?R.addForce(this.body):(this.NW&&this.NW.updateForce(R),this.NE&&this.NE.updateForce(R),this.SW&&this.SW.updateForce(R),this.SE&&this.SE.updateForce(R))}},m}();G.default=_},880374:function(We,G,_){"use strict";var m=this&&this.__extends||function(){var L=function(p,b){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,x){S.__proto__=x}||function(S,x){for(var g in x)Object.prototype.hasOwnProperty.call(x,g)&&(S[g]=x[g])},L(p,b)};return function(p,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");L(p,b);function S(){this.constructor=p}p.prototype=b===null?Object.create(b):(S.prototype=b.prototype,new S)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.FruchtermanLayout=void 0;var R=_(762329),w=_(449784),M=800,P=function(L){m(p,L);function p(b){var S=L.call(this)||this;return S.maxIteration=1e3,S.workerEnabled=!1,S.gravity=10,S.speed=5,S.clustering=!1,S.clusterGravity=10,S.nodes=[],S.edges=[],S.width=300,S.height=300,S.nodeMap={},S.nodeIdxMap={},S.onLayoutEnd=function(){},S.tick=function(){},S.animate=!0,S.updateCfg(b),S}return p.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10,animate:!0}},p.prototype.execute=function(){var b=this,S,x,g=this,T=g.nodes;if(g.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(g.timeInterval),!T||T.length===0){(S=g.onLayoutEnd)===null||S===void 0||S.call(g);return}!g.width&&typeof window!="undefined"&&(g.width=window.innerWidth),!g.height&&typeof window!="undefined"&&(g.height=window.innerHeight),g.center||(g.center=[g.width/2,g.height/2]);var E=g.center;if(T.length===1){T[0].x=E[0],T[0].y=E[1],(x=g.onLayoutEnd)===null||x===void 0||x.call(g);return}var O={},k={};return T.forEach(function(y,l){(0,w.isNumber)(y.x)||(y.x=Math.random()*b.width),(0,w.isNumber)(y.y)||(y.y=Math.random()*b.height),O[y.id]=y,k[y.id]=l}),g.nodeMap=O,g.nodeIdxMap=k,g.run()},p.prototype.run=function(){var b,S=this,x=S.nodes;if(x){var g=S.edges,T=S.maxIteration,E=S.workerEnabled,O=S.clustering,k=S.animate,y={};if(O&&x.forEach(function(X){y[X.cluster]===void 0&&(y[X.cluster]={name:X.cluster,cx:0,cy:0,count:0})}),E||!k){for(var l=0;l<T;l++)S.runOneStep(y);(b=S.onLayoutEnd)===null||b===void 0||b.call(S)}else{if(typeof window=="undefined")return;var U=0;this.timeInterval=window.setInterval(function(){var X;S.runOneStep(y),U++,U>=T&&((X=S.onLayoutEnd)===null||X===void 0||X.call(S),window.clearInterval(S.timeInterval))},0)}return{nodes:x,edges:g}}},p.prototype.runOneStep=function(b){var S,x=this,g=x.nodes;if(g){var T=x.edges,E=x.center,O=x.gravity,k=x.speed,y=x.clustering,l=x.height*x.width,U=Math.sqrt(l)/10,X=l/(g.length+1),F=Math.sqrt(X),W=[];if(g.forEach(function(q,$){W[$]={x:0,y:0}}),x.applyCalculate(g,T,W,F,X),y){for(var j in b)b[j].cx=0,b[j].cy=0,b[j].count=0;g.forEach(function(q){var $=b[q.cluster];(0,w.isNumber)(q.x)&&($.cx+=q.x),(0,w.isNumber)(q.y)&&($.cy+=q.y),$.count++});for(var j in b)b[j].cx/=b[j].count,b[j].cy/=b[j].count;var V=x.clusterGravity||O;g.forEach(function(q,$){if(!(!(0,w.isNumber)(q.x)||!(0,w.isNumber)(q.y))){var J=b[q.cluster],ut=Math.sqrt((q.x-J.cx)*(q.x-J.cx)+(q.y-J.cy)*(q.y-J.cy)),nt=F*V;W[$].x-=nt*(q.x-J.cx)/ut,W[$].y-=nt*(q.y-J.cy)/ut}})}g.forEach(function(q,$){if(!(!(0,w.isNumber)(q.x)||!(0,w.isNumber)(q.y))){var J=.01*F*O;W[$].x-=J*(q.x-E[0]),W[$].y-=J*(q.y-E[1])}}),g.forEach(function(q,$){if((0,w.isNumber)(q.fx)&&(0,w.isNumber)(q.fy)){q.x=q.fx,q.y=q.fy;return}if(!(!(0,w.isNumber)(q.x)||!(0,w.isNumber)(q.y))){var J=Math.sqrt(W[$].x*W[$].x+W[$].y*W[$].y);if(J>0){var ut=Math.min(U*(k/M),J);q.x+=W[$].x/J*ut,q.y+=W[$].y/J*ut}}}),(S=x.tick)===null||S===void 0||S.call(x)}},p.prototype.applyCalculate=function(b,S,x,g,T){var E=this;E.calRepulsive(b,x,T),S&&E.calAttractive(S,x,g)},p.prototype.calRepulsive=function(b,S,x){b.forEach(function(g,T){S[T]={x:0,y:0},b.forEach(function(E,O){if(T!==O&&!(!(0,w.isNumber)(g.x)||!(0,w.isNumber)(E.x)||!(0,w.isNumber)(g.y)||!(0,w.isNumber)(E.y))){var k=g.x-E.x,y=g.y-E.y,l=k*k+y*y;if(l===0){l=1;var U=T>O?1:-1;k=.01*U,y=.01*U}var X=x/l;S[T].x+=k*X,S[T].y+=y*X}})})},p.prototype.calAttractive=function(b,S,x){var g=this;b.forEach(function(T){var E=(0,w.getEdgeTerminal)(T,"source"),O=(0,w.getEdgeTerminal)(T,"target");if(!(!E||!O)){var k=g.nodeIdxMap[E],y=g.nodeIdxMap[O];if(k!==y){var l=g.nodeMap[E],U=g.nodeMap[O];if(!(!(0,w.isNumber)(U.x)||!(0,w.isNumber)(l.x)||!(0,w.isNumber)(U.y)||!(0,w.isNumber)(l.y))){var X=U.x-l.x,F=U.y-l.y,W=Math.sqrt(X*X+F*F),j=W*W/x;S[y].x-=X/W*j,S[y].y-=F/W*j,S[k].x+=X/W*j,S[k].y+=F/W*j}}}})},p.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},p.prototype.destroy=function(){var b=this;b.stop(),b.tick=null,b.nodes=null,b.edges=null,b.destroyed=!0},p.prototype.getType=function(){return"fruchterman"},p}(R.Base);G.FruchtermanLayout=P},113653:function(We,G,_){"use strict";var m=this&&this.__extends||function(){var L=function(p,b){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,x){S.__proto__=x}||function(S,x){for(var g in x)Object.prototype.hasOwnProperty.call(x,g)&&(S[g]=x[g])},L(p,b)};return function(p,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");L(p,b);function S(){this.constructor=p}p.prototype=b===null?Object.create(b):(S.prototype=b.prototype,new S)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.GForceLayout=void 0;var R=_(762329),w=_(449784),M=function(L,p){var b;return L?(0,w.isNumber)(L)?b=function(S){return L}:b=L:b=function(S){return p||1},b},P=function(L){m(p,L);function p(b){var S=L.call(this)||this;return S.maxIteration=500,S.workerEnabled=!1,S.edgeStrength=200,S.nodeStrength=1e3,S.coulombDisScale=.005,S.damping=.9,S.maxSpeed=1e3,S.minMovement=.5,S.interval=.02,S.factor=1,S.linkDistance=1,S.gravity=10,S.preventOverlap=!0,S.collideStrength=1,S.tick=function(){},S.nodes=[],S.edges=[],S.width=300,S.height=300,S.nodeMap={},S.nodeIdxMap={},S.animate=!0,S.updateCfg(b),S}return p.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},p.prototype.execute=function(){var b,S,x=this,g=x.nodes;if(x.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(x.timeInterval),!g||g.length===0){(b=x.onLayoutEnd)===null||b===void 0||b.call(x);return}!x.width&&typeof window!="undefined"&&(x.width=window.innerWidth),!x.height&&typeof window!="undefined"&&(x.height=window.innerHeight),x.center||(x.center=[x.width/2,x.height/2]);var T=x.center;if(g.length===1){g[0].x=T[0],g[0].y=T[1],(S=x.onLayoutEnd)===null||S===void 0||S.call(x);return}var E={},O={};g.forEach(function(F,W){(0,w.isNumber)(F.x)||(F.x=Math.random()*x.width),(0,w.isNumber)(F.y)||(F.y=Math.random()*x.height),E[F.id]=F,O[F.id]=W}),x.nodeMap=E,x.nodeIdxMap=O,x.linkDistance=M(x.linkDistance,1),x.nodeStrength=M(x.nodeStrength,1),x.edgeStrength=M(x.edgeStrength,1);var k=x.nodeSize,y;if(x.preventOverlap){var l=x.nodeSpacing,U;(0,w.isNumber)(l)?U=function(){return l}:(0,w.isFunction)(l)?U=l:U=function(){return 0},k?(0,w.isArray)(k)?y=function(F){return Math.max(k[0],k[1])+U(F)}:y=function(F){return k+U(F)}:y=function(F){return F.size?(0,w.isArray)(F.size)?Math.max(F.size[0],F.size[1])+U(F):(0,w.isObject)(F.size)?Math.max(F.size.width,F.size.height)+U(F):F.size+U(F):10+U(F)}}x.nodeSize=y;var X=x.edges;x.degrees=(0,w.getDegree)(g.length,x.nodeIdxMap,X),x.getMass||(x.getMass=function(F){var W=F.mass||x.degrees[x.nodeIdxMap[F.id]].all||1;return W}),x.run()},p.prototype.run=function(){var b,S=this,x=S.maxIteration,g=S.nodes,T=S.workerEnabled,E=S.minMovement,O=S.animate;if(g)if(T||!O){for(var k=0;k<x;k++){var y=S.runOneStep(k);if(S.reachMoveThreshold(g,y,E))break}(b=S.onLayoutEnd)===null||b===void 0||b.call(S)}else{if(typeof window=="undefined")return;var l=0;this.timeInterval=window.setInterval(function(){var U,X;if(g){var F=S.runOneStep(l)||[];S.reachMoveThreshold(g,F,E)&&((U=S.onLayoutEnd)===null||U===void 0||U.call(S),window.clearInterval(S.timeInterval)),l++,l>=x&&((X=S.onLayoutEnd)===null||X===void 0||X.call(S),window.clearInterval(S.timeInterval))}},0)}},p.prototype.reachMoveThreshold=function(b,S,x){var g=0;return b.forEach(function(T,E){var O=T.x-S[E].x,k=T.y-S[E].y;g+=Math.sqrt(O*O+k*k)}),g/=b.length,g<x},p.prototype.runOneStep=function(b){var S,x=this,g=x.nodes,T=x.edges,E=[],O=[];if(g){g.forEach(function(l,U){E[2*U]=0,E[2*U+1]=0,O[2*U]=0,O[2*U+1]=0}),x.calRepulsive(E,g),T&&x.calAttractive(E,T),x.calGravity(E,g);var k=Math.max(.02,x.interval-b*.002);x.updateVelocity(E,O,k,g);var y=[];return g.forEach(function(l){y.push({x:l.x,y:l.y})}),x.updatePosition(O,k,g),(S=x.tick)===null||S===void 0||S.call(x),y}},p.prototype.calRepulsive=function(b,S){var x=this,g=x.getMass,T=x.factor,E=x.coulombDisScale,O=x.preventOverlap,k=x.collideStrength,y=k===void 0?1:k,l=x.nodeStrength,U=x.nodeSize;S.forEach(function(X,F){var W=g?g(X):1;S.forEach(function(j,V){if(!(F>=V)){var q=X.x-j.x,$=X.y-j.y;q===0&&$===0&&(q=Math.random()*.01,$=Math.random()*.01);var J=q*q+$*$,ut=Math.sqrt(J),nt=(ut+.1)*E,yt=q/ut,dt=$/ut,Ft=(l(X)+l(j))*.5*T/(nt*nt),wt=g?g(j):1;if(b[2*F]+=yt*Ft,b[2*F+1]+=dt*Ft,b[2*V]-=yt*Ft,b[2*V+1]-=dt*Ft,O&&(U(X)+U(j))/2>ut){var St=y*(l(X)+l(j))*.5/J;b[2*F]+=yt*St/W,b[2*F+1]+=dt*St/W,b[2*V]-=yt*St/wt,b[2*V+1]-=dt*St/wt}}})})},p.prototype.calAttractive=function(b,S){var x=this,g=x.nodeMap,T=x.nodeIdxMap,E=x.linkDistance,O=x.edgeStrength,k=x.nodeSize,y=x.getMass;S.forEach(function(l,U){var X=(0,w.getEdgeTerminal)(l,"source"),F=(0,w.getEdgeTerminal)(l,"target"),W=g[X],j=g[F],V=j.x-W.x,q=j.y-W.y;V===0&&q===0&&(V=Math.random()*.01,q=Math.random()*.01);var $=Math.sqrt(V*V+q*q),J=V/$,ut=q/$,nt=E(l,W,j)||1+(k(W)+k(j)||0)/2,yt=nt-$,dt=yt*O(l),Ft=T[X],wt=T[F],St=y?y(W):1,et=y?y(j):1;b[2*Ft]-=J*dt/St,b[2*Ft+1]-=ut*dt/St,b[2*wt]+=J*dt/et,b[2*wt+1]+=ut*dt/et})},p.prototype.calGravity=function(b,S){for(var x=this,g=x.center,T=x.gravity,E=x.degrees,O=S.length,k=0;k<O;k++){var y=S[k],l=y.x-g[0],U=y.y-g[1],X=T;if(x.getCenter){var F=x.getCenter(y,E[k].all);F&&(0,w.isNumber)(F[0])&&(0,w.isNumber)(F[1])&&(0,w.isNumber)(F[2])&&(l=y.x-F[0],U=y.y-F[1],X=F[2])}X&&(b[2*k]-=X*l,b[2*k+1]-=X*U)}},p.prototype.updateVelocity=function(b,S,x,g){var T=this,E=x*T.damping;g.forEach(function(O,k){var y=b[2*k]*E||.01,l=b[2*k+1]*E||.01,U=Math.sqrt(y*y+l*l);if(U>T.maxSpeed){var X=T.maxSpeed/U;y=X*y,l=X*l}S[2*k]=y,S[2*k+1]=l})},p.prototype.updatePosition=function(b,S,x){x.forEach(function(g,T){if((0,w.isNumber)(g.fx)&&(0,w.isNumber)(g.fy)){g.x=g.fx,g.y=g.fy;return}var E=b[2*T]*S,O=b[2*T+1]*S;g.x+=E,g.y+=O})},p.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},p.prototype.destroy=function(){var b=this;b.stop(),b.tick=null,b.nodes=null,b.edges=null,b.destroyed=!0},p.prototype.getType=function(){return"gForce"},p}(R.Base);G.GForceLayout=P},687745:function(We,G,_){"use strict";var m=this&&this.__extends||function(){var g=function(T,E){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,k){O.__proto__=k}||function(O,k){for(var y in k)Object.prototype.hasOwnProperty.call(k,y)&&(O[y]=k[y])},g(T,E)};return function(T,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");g(T,E);function O(){this.constructor=T}T.prototype=E===null?Object.create(E):(O.prototype=E.prototype,new O)}}(),R=this&&this.__awaiter||function(g,T,E,O){function k(y){return y instanceof E?y:new E(function(l){l(y)})}return new(E||(E=Promise))(function(y,l){function U(W){try{F(O.next(W))}catch(j){l(j)}}function X(W){try{F(O.throw(W))}catch(j){l(j)}}function F(W){W.done?y(W.value):k(W.value).then(U,X)}F((O=O.apply(g,T||[])).next())})},w=this&&this.__generator||function(g,T){var E={label:0,sent:function(){if(y[0]&1)throw y[1];return y[1]},trys:[],ops:[]},O,k,y,l;return l={next:U(0),throw:U(1),return:U(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function U(F){return function(W){return X([F,W])}}function X(F){if(O)throw new TypeError("Generator is already executing.");for(;l&&(l=0,F[0]&&(E=0)),E;)try{if(O=1,k&&(y=F[0]&2?k.return:F[0]?k.throw||((y=k.return)&&y.call(k),0):k.next)&&!(y=y.call(k,F[1])).done)return y;switch(k=0,y&&(F=[F[0]&2,y.value]),F[0]){case 0:case 1:y=F;break;case 4:return E.label++,{value:F[1],done:!1};case 5:E.label++,k=F[1],F=[0];continue;case 7:F=E.ops.pop(),E.trys.pop();continue;default:if(y=E.trys,!(y=y.length>0&&y[y.length-1])&&(F[0]===6||F[0]===2)){E=0;continue}if(F[0]===3&&(!y||F[1]>y[0]&&F[1]<y[3])){E.label=F[1];break}if(F[0]===6&&E.label<y[1]){E.label=y[1],y=F;break}if(y&&E.label<y[2]){E.label=y[2],E.ops.push(F);break}y[2]&&E.ops.pop(),E.trys.pop();continue}F=T.call(g,E)}catch(W){F=[6,W],k=0}finally{O=y=0}if(F[0]&5)throw F[1];return{value:F[0]?F[1]:void 0,done:!0}}};Object.defineProperty(G,"__esModule",{value:!0}),G.FruchtermanGPULayout=void 0;var M=_(762329),P=_(449784),L=_(901029),p=_(248835),b=_(108574),S=_(416470),x=function(g){m(T,g);function T(E){var O=g.call(this)||this;return O.maxIteration=1e3,O.gravity=10,O.speed=1,O.clustering=!1,O.clusterField="cluster",O.clusterGravity=10,O.workerEnabled=!1,O.nodes=[],O.edges=[],O.width=300,O.height=300,O.nodeMap={},O.nodeIdxMap={},O.updateCfg(E),O}return T.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}},T.prototype.execute=function(){return R(this,void 0,void 0,function(){var E,O,k,y,l,U=this;return w(this,function(X){switch(X.label){case 0:return E=this,O=E.nodes,!O||O.length===0?(E.onLayoutEnd&&E.onLayoutEnd(),[2]):(!E.width&&typeof window!="undefined"&&(E.width=window.innerWidth),!E.height&&typeof window!="undefined"&&(E.height=window.innerHeight),E.center||(E.center=[E.width/2,E.height/2]),k=E.center,O.length===1?(O[0].x=k[0],O[0].y=k[1],E.onLayoutEnd&&E.onLayoutEnd(),[2]):(y={},l={},O.forEach(function(F,W){(0,P.isNumber)(F.x)||(F.x=Math.random()*U.width),(0,P.isNumber)(F.y)||(F.y=Math.random()*U.height),y[F.id]=F,l[F.id]=W}),E.nodeMap=y,E.nodeIdxMap=l,[4,E.run()]));case 1:return X.sent(),[2]}})})},T.prototype.executeWithWorker=function(E,O){return R(this,void 0,void 0,function(){var k,y,l,U,X,F=this;return w(this,function(W){switch(W.label){case 0:return k=this,y=k.nodes,l=k.center,!y||y.length===0?[2]:y.length===1?(y[0].x=l[0],y[0].y=l[1],[2]):(U={},X={},y.forEach(function(j,V){(0,P.isNumber)(j.x)||(j.x=Math.random()*F.width),(0,P.isNumber)(j.y)||(j.y=Math.random()*F.height),U[j.id]=j,X[j.id]=V}),k.nodeMap=U,k.nodeIdxMap=X,[4,k.run(E,O)]);case 1:return W.sent(),[2]}})})},T.prototype.run=function(E,O){return R(this,void 0,void 0,function(){var k,y,l,U,X,F,W,j,V,q,$,J,ut,nt,yt,dt,Ft,wt,St,et,it,Tt,Nt,st,xt,zt,Wt=this;return w(this,function(_t){switch(_t.label){case 0:for(k=this,y=k.nodes,l=k.edges,U=k.maxIteration,X=k.center,F=k.height*k.width,W=Math.sqrt(F)/10,j=F/(y.length+1),V=Math.sqrt(j),q=k.speed,$=k.clustering,J=(0,p.attributesToTextureData)([k.clusterField],y),ut=J.array,nt=J.count,y.forEach(function(Xt,te){var ue=0,fe=0;(0,P.isNumber)(Xt.fx)&&(0,P.isNumber)(Xt.fy)&&(ue=Xt.fx||.001,fe=Xt.fy||.001),ut[4*te+1]=ue,ut[4*te+2]=fe}),yt=y.length,dt=(0,p.buildTextureData)(y,l),Ft=dt.maxEdgePerVetex,wt=dt.array,St=k.workerEnabled,St?et=L.World.create({canvas:E,engineOptions:{supportCompute:!0}}):et=L.World.create({engineOptions:{supportCompute:!0}}),it=k.onLayoutEnd,Tt=[],Nt=0;Nt<nt;Nt++)Tt.push(0,0,0,0);return st=et.createKernel(b.fruchtermanBundle).setDispatch([yt,1,1]).setBinding({u_Data:wt,u_K:V,u_K2:j,u_Gravity:k.gravity,u_ClusterGravity:k.clusterGravity||k.gravity||1,u_Speed:q,u_MaxDisplace:W,u_Clustering:$?1:0,u_Center:X,u_AttributeArray:ut,u_ClusterCenters:Tt,MAX_EDGE_PER_VERTEX:Ft,VERTEX_COUNT:yt}),$&&(xt=et.createKernel(b.clusterBundle).setDispatch([nt,1,1]).setBinding({u_Data:wt,u_NodeAttributes:ut,u_ClusterCenters:Tt,VERTEX_COUNT:yt,CLUSTER_COUNT:nt})),zt=function(){return R(Wt,void 0,void 0,function(){var Xt,te;return w(this,function(ue){switch(ue.label){case 0:Xt=0,ue.label=1;case 1:return Xt<U?[4,st.execute()]:[3,6];case 2:return ue.sent(),$?(xt.setBinding({u_Data:st}),[4,xt.execute()]):[3,4];case 3:ue.sent(),st.setBinding({u_ClusterCenters:xt}),ue.label=4;case 4:st.setBinding({u_MaxDisplace:W*=.99}),ue.label=5;case 5:return Xt++,[3,1];case 6:return[4,st.getOutput()];case 7:return te=ue.sent(),E?O.postMessage({type:S.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:te}):y.forEach(function(fe,Gt){var ae=te[4*Gt],Ne=te[4*Gt+1];fe.x=ae,fe.y=Ne}),it&&it(),[2]}})})},[4,zt()];case 1:return _t.sent(),[2]}})})},T.prototype.getType=function(){return"fruchterman-gpu"},T}(M.Base);G.FruchtermanGPULayout=x},108574:function(We,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.clusterBundle=G.clusterCode=G.fruchtermanBundle=G.fruchtermanCode=void 0,G.fruchtermanCode=`
import { globalInvocationID } from 'g-webgpu';
const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class Fruchterman {
  @in @out
  u_Data: vec4[];
  @in
  u_K: float;
  @in
  u_K2: float;
  
  @in
  u_Center: vec2;
  @in
  u_Gravity: float;
  @in
  u_ClusterGravity: float;
  @in
  u_Speed: float;
  @in
  u_MaxDisplace: float;
  @in
  u_Clustering: float;
  @in
  u_AttributeArray: vec4[];
  @in
  u_ClusterCenters: vec4[];
  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const xDist = currentNode[0] - nextNode[0];
        const yDist = currentNode[1] - nextNode[1];
        const dist = (xDist * xDist + yDist * yDist) + 0.01;
        let param = this.u_K2 / dist;
        
        if (dist > 0.0) {
          dx += param * xDist;
          dy += param * yDist;
          if (xDist == 0 && yDist == 0) {
            const sign = i < j ? 1 : -1;
            dx += param * sign;
            dy += param * sign;
          }
        }
      }
    }
    return [dx, dy];
  }
  calcGravity(currentNode: vec4, nodeAttributes: vec4): vec2 { // 
    let dx = 0, dy = 0;
    const vx = currentNode[0] - this.u_Center[0];
    const vy = currentNode[1] - this.u_Center[1];
    const gf = 0.01 * this.u_K * this.u_Gravity;
    dx = gf * vx;
    dy = gf * vy;
    if (this.u_Clustering == 1) {
      const clusterIdx = int(nodeAttributes[0]);
      const center = this.u_ClusterCenters[clusterIdx];
      const cvx = currentNode[0] - center[0];
      const cvy = currentNode[1] - center[1];
      const dist = sqrt(cvx * cvx + cvy * cvy) + 0.01;
      const parma = this.u_K * this.u_ClusterGravity / dist;
      dx += parma * cvx;
      dy += parma * cvy;
    }
    return [dx, dy];
  }
  calcAttractive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    const arr_offset = int(floor(currentNode[2] + 0.5));
    const length = int(floor(currentNode[3] + 0.5));
    const node_buffer: vec4;
    for (let p = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + p;
      // when arr_idx % 4 == 0 update currentNodedx_buffer
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)];
      }
      const float_j = buf_offset == 0 ? node_buffer[0] :
                      buf_offset == 1 ? node_buffer[1] :
                      buf_offset == 2 ? node_buffer[2] :
                                        node_buffer[3];
      const nextNode = this.u_Data[int(float_j)];
      const xDist = currentNode[0] - nextNode[0];
      const yDist = currentNode[1] - nextNode[1];
      const dist = sqrt(xDist * xDist + yDist * yDist) + 0.01;
      let attractiveF = dist / this.u_K;
    
      if (dist > 0.0) {
        dx -= xDist * attractiveF;
        dy -= yDist * attractiveF;
        if (xDist == 0 && yDist == 0) {
          const sign = i < int(float_j) ? 1 : -1;
          dx -= sign * attractiveF;
          dy -= sign * attractiveF;
        }
      }
    }
    return [dx, dy];
  }
  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    let dx = 0, dy = 0;
    if (i >= VERTEX_COUNT) {
      this.u_Data[i] = currentNode;
      return;
    }

    // [gravity, fx, fy, 0]
    const nodeAttributes = this.u_AttributeArray[i];

    if (nodeAttributes[1] != 0 && nodeAttributes[2] != 0) {
      // the node is fixed
      this.u_Data[i] = [
        nodeAttributes[1],
        nodeAttributes[2],
        currentNode[2],
        currentNode[3]
      ];
      return;
    }

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    dx += repulsive[0];
    dy += repulsive[1];
    // attractive
    const attractive = this.calcAttractive(i, currentNode);
    dx += attractive[0];
    dy += attractive[1];
    // gravity
    const gravity = this.calcGravity(currentNode, nodeAttributes);
    dx -= gravity[0];
    dy -= gravity[1];
    // speed
    dx *= this.u_Speed;
    dy *= this.u_Speed;

    // move
    const distLength = sqrt(dx * dx + dy * dy);
    if (distLength > 0.0) {
      const limitedDist = min(this.u_MaxDisplace * this.u_Speed, distLength);
      this.u_Data[i] = [
        currentNode[0] + dx / distLength * limitedDist,
        currentNode[1] + dy / distLength * limitedDist,
        currentNode[2],
        currentNode[3]
      ];
    }
  }
}
`,G.fruchtermanBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',G.clusterCode=`
import { globalInvocationID } from 'g-webgpu';
const VERTEX_COUNT;
const CLUSTER_COUNT;
@numthreads(1, 1, 1)
class CalcCenter {
  @in
  u_Data: vec4[];
  @in
  u_NodeAttributes: vec4[]; // [[clusterIdx, 0, 0, 0], ...]
  @in @out
  u_ClusterCenters: vec4[]; // [[cx, cy, nodeCount, clusterIdx], ...]
  @main
  compute() {
    const i = globalInvocationID.x;
    const center = this.u_ClusterCenters[i];
    let sumx = 0;
    let sumy = 0;
    let count = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      const attributes = this.u_NodeAttributes[j];
      const clusterIdx = int(attributes[0]);
      const vertex = this.u_Data[j];
      if (clusterIdx == i) {
        sumx += vertex.x;
        sumy += vertex.y;
        count += 1;
      }
    }
    this.u_ClusterCenters[i] = [
      sumx / count,
      sumy / count,
      count,
      i
    ];
  }
}
`,G.clusterBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}'},785194:function(We,G,_){"use strict";var m=this&&this.__extends||function(){var T=function(E,O){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,y){k.__proto__=y}||function(k,y){for(var l in y)Object.prototype.hasOwnProperty.call(y,l)&&(k[l]=y[l])},T(E,O)};return function(E,O){if(typeof O!="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");T(E,O);function k(){this.constructor=E}E.prototype=O===null?Object.create(O):(k.prototype=O.prototype,new k)}}(),R=this&&this.__awaiter||function(T,E,O,k){function y(l){return l instanceof O?l:new O(function(U){U(l)})}return new(O||(O=Promise))(function(l,U){function X(j){try{W(k.next(j))}catch(V){U(V)}}function F(j){try{W(k.throw(j))}catch(V){U(V)}}function W(j){j.done?l(j.value):y(j.value).then(X,F)}W((k=k.apply(T,E||[])).next())})},w=this&&this.__generator||function(T,E){var O={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},k,y,l,U;return U={next:X(0),throw:X(1),return:X(2)},typeof Symbol=="function"&&(U[Symbol.iterator]=function(){return this}),U;function X(W){return function(j){return F([W,j])}}function F(W){if(k)throw new TypeError("Generator is already executing.");for(;U&&(U=0,W[0]&&(O=0)),O;)try{if(k=1,y&&(l=W[0]&2?y.return:W[0]?y.throw||((l=y.return)&&l.call(y),0):y.next)&&!(l=l.call(y,W[1])).done)return l;switch(y=0,l&&(W=[W[0]&2,l.value]),W[0]){case 0:case 1:l=W;break;case 4:return O.label++,{value:W[1],done:!1};case 5:O.label++,y=W[1],W=[0];continue;case 7:W=O.ops.pop(),O.trys.pop();continue;default:if(l=O.trys,!(l=l.length>0&&l[l.length-1])&&(W[0]===6||W[0]===2)){O=0;continue}if(W[0]===3&&(!l||W[1]>l[0]&&W[1]<l[3])){O.label=W[1];break}if(W[0]===6&&O.label<l[1]){O.label=l[1],l=W;break}if(l&&O.label<l[2]){O.label=l[2],O.ops.push(W);break}l[2]&&O.ops.pop(),O.trys.pop();continue}W=E.call(T,O)}catch(j){W=[6,j],y=0}finally{k=l=0}if(W[0]&5)throw W[1];return{value:W[0]?W[1]:void 0,done:!0}}};Object.defineProperty(G,"__esModule",{value:!0}),G.GForceGPULayout=void 0;var M=_(762329),P=_(449784),L=_(901029),p=_(248835),b=_(280628),S=_(549762),x=_(416470),g=function(T){m(E,T);function E(O){var k=T.call(this)||this;return k.maxIteration=1e3,k.edgeStrength=200,k.nodeStrength=1e3,k.coulombDisScale=.005,k.damping=.9,k.maxSpeed=1e3,k.minMovement=.5,k.interval=.02,k.factor=1,k.linkDistance=1,k.gravity=10,k.workerEnabled=!1,k.nodes=[],k.edges=[],k.width=300,k.height=300,k.nodeMap={},k.nodeIdxMap={},k.updateCfg(O),k}return E.prototype.getDefaultCfg=function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}},E.prototype.execute=function(){return R(this,void 0,void 0,function(){var O,k,y,l,U;return w(this,function(X){switch(X.label){case 0:return O=this,k=O.nodes,!k||k.length===0?(O.onLayoutEnd&&O.onLayoutEnd(),[2]):(!O.width&&typeof window!="undefined"&&(O.width=window.innerWidth),!O.height&&typeof window!="undefined"&&(O.height=window.innerHeight),O.center||(O.center=[O.width/2,O.height/2]),y=O.center,k.length===1?(k[0].x=y[0],k[0].y=y[1],O.onLayoutEnd&&O.onLayoutEnd(),[2]):(l={},U={},k.forEach(function(F,W){(0,P.isNumber)(F.x)||(F.x=Math.random()*O.width),(0,P.isNumber)(F.y)||(F.y=Math.random()*O.height),l[F.id]=F,U[F.id]=W}),O.nodeMap=l,O.nodeIdxMap=U,O.nodeStrength=(0,p.proccessToFunc)(O.nodeStrength,1),O.edgeStrength=(0,p.proccessToFunc)(O.edgeStrength,1),[4,O.run()]));case 1:return X.sent(),[2]}})})},E.prototype.executeWithWorker=function(O,k){var y=this,l=y.nodes,U=y.center;if(!(!l||l.length===0)){if(l.length===1){l[0].x=U[0],l[0].y=U[1];return}var X={},F={};l.forEach(function(W,j){(0,P.isNumber)(W.x)||(W.x=Math.random()*y.width),(0,P.isNumber)(W.y)||(W.y=Math.random()*y.height),X[W.id]=W,F[W.id]=j}),y.nodeMap=X,y.nodeIdxMap=F,y.nodeStrength=(0,p.proccessToFunc)(y.nodeStrength,1),y.edgeStrength=(0,p.proccessToFunc)(y.edgeStrength,1),y.run(O,k)}},E.prototype.run=function(O,k){return R(this,void 0,void 0,function(){var y,l,U,X,F,W,j,V,q,$,J,ut,nt,yt,dt,Ft,wt,St,et,it,Tt,Nt,st,xt,zt,Wt,_t,Xt=this;return w(this,function(te){switch(te.label){case 0:for(y=this,l=y.nodes,U=y.edges,X=y.maxIteration,!y.width&&typeof window!="undefined"&&(y.width=window.innerWidth),!y.height&&typeof window!="undefined"&&(y.height=window.innerHeight),F=l.length,y.linkDistance=(0,p.proccessToFunc)(y.linkDistance),y.edgeStrength=(0,p.proccessToFunc)(y.edgeStrength),W=(0,p.buildTextureDataWithTwoEdgeAttr)(l,U,y.linkDistance,y.edgeStrength),j=W.maxEdgePerVetex,V=W.array,y.degrees=(0,b.getDegree)(l.length,y.nodeIdxMap,U).map(function(ue){return ue.all}),q=[],$=[],J=[],ut=[],nt=[],yt=[],dt=[],y.getMass||(y.getMass=function(ue){return y.degrees[y.nodeIdxMap[ue.id]]||1}),Ft=y.gravity,wt=y.center,l.forEach(function(ue,fe){q.push(y.getMass(ue)),$.push(y.nodeStrength(ue)),y.degrees[fe]||(y.degrees[fe]=0);var Gt=[wt[0],wt[1],Ft];if(y.getCenter){var ae=y.getCenter(ue,y.degrees[fe]);ae&&(0,P.isNumber)(ae[0])&&(0,P.isNumber)(ae[1])&&(0,P.isNumber)(ae[2])&&(Gt=ae)}J.push(Gt[0]),ut.push(Gt[1]),nt.push(Gt[2]),(0,P.isNumber)(ue.fx)&&(0,P.isNumber)(ue.fy)?(yt.push(ue.fx||.001),dt.push(ue.fy||.001)):(yt.push(0),dt.push(0))}),St=(0,p.arrayToTextureData)([q,y.degrees,$,yt]),et=(0,p.arrayToTextureData)([J,ut,nt,dt]),it=y.workerEnabled,it?Tt=L.World.create({canvas:O,engineOptions:{supportCompute:!0}}):Tt=L.World.create({engineOptions:{supportCompute:!0}}),Nt=y.onLayoutEnd,st=[],V.forEach(function(ue){st.push(ue)}),xt=0;xt<4;xt++)st.push(0);return zt=Tt.createKernel(S.gForceBundle).setDispatch([F,1,1]).setBinding({u_Data:V,u_damping:y.damping,u_maxSpeed:y.maxSpeed,u_minMovement:y.minMovement,u_coulombDisScale:y.coulombDisScale,u_factor:y.factor,u_NodeAttributeArray1:St,u_NodeAttributeArray2:et,MAX_EDGE_PER_VERTEX:j,VERTEX_COUNT:F,u_AveMovement:st,u_interval:y.interval}),Wt=Tt.createKernel(S.aveMovementBundle).setDispatch([1,1,1]).setBinding({u_Data:V,VERTEX_COUNT:F,u_AveMovement:[0,0,0,0]}),_t=function(){return R(Xt,void 0,void 0,function(){var ue,fe,Gt;return w(this,function(ae){switch(ae.label){case 0:ue=0,ae.label=1;case 1:return ue<X?[4,zt.execute()]:[3,5];case 2:return ae.sent(),Wt.setBinding({u_Data:zt}),[4,Wt.execute()];case 3:ae.sent(),fe=Math.max(.02,y.interval-ue*.002),zt.setBinding({u_interval:fe,u_AveMovement:Wt}),ae.label=4;case 4:return ue++,[3,1];case 5:return[4,zt.getOutput()];case 6:return Gt=ae.sent(),O?k.postMessage({type:x.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:Gt}):l.forEach(function(Ne,ee){var de=Gt[4*ee],ze=Gt[4*ee+1];Ne.x=de,Ne.y=ze}),Nt&&Nt(),[2]}})})},[4,_t()];case 1:return te.sent(),[2]}})})},E.prototype.getType=function(){return"gForce-gpu"},E}(M.Base);G.GForceGPULayout=g},549762:function(We,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.aveMovementBundle=G.aveMovementCode=G.gForceBundle=G.gForceCode=void 0,G.gForceCode=`
import { globalInvocationID } from 'g-webgpu';

const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
const SHIFT_20 = 1048576;

@numthreads(1, 1, 1)
class GGForce {
  @in @out
  u_Data: vec4[];

  @in
  u_damping: float;
  
  @in
  u_maxSpeed: float;

  @in
  u_minMovement: float;

  @in
  u_AveMovement: vec4[];

  @in
  u_coulombDisScale: float;

  @in
  u_factor: float;

  @in
  u_NodeAttributeArray1: vec4[];

  @in
  u_NodeAttributeArray2: vec4[];

  @in
  u_interval: float;

  unpack_float(packedValue: float): ivec2 {
    const packedIntValue = int(packedValue);
    const v0 = packedIntValue / SHIFT_20;
    return [v0, packedIntValue - v0 * SHIFT_20];
  }

  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let ax = 0, ay = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const vx = currentNode[0] - nextNode[0];
        const vy = currentNode[1] - nextNode[1];
        const dist = sqrt(vx * vx + vy * vy) + 0.01;
        const n_dist = (dist + 0.1) * this.u_coulombDisScale;
        const direx = vx / dist;
        const direy = vy / dist;
        const attributesi = this.u_NodeAttributeArray1[i];
        const attributesj = this.u_NodeAttributeArray1[j];
        const massi = attributesi[0];
        const nodeStrengthi = attributesi[2];
        const nodeStrengthj = attributesj[2];
        const nodeStrength = (nodeStrengthi + nodeStrengthj) / 2;
        // const param = nodeStrength * this.u_factor / (n_dist * n_dist * massi);
        const param = nodeStrength * this.u_factor / (n_dist * n_dist);
        ax += direx * param;
        ay += direy * param;
      }
    }
    return [ax, ay];
  }

  calcGravity(i: int, currentNode: vec4, attributes2: vec4): vec2 {
    // note: attributes2 = [centerX, centerY, gravity, 0]

    const vx = currentNode[0] - attributes2[0];
    const vy = currentNode[1] - attributes2[1];
    
    const ax = vx * attributes2[2];
    const ay = vy * attributes2[2];
    
    return [ax, ay];
  }

  calcAttractive(i: int, currentNode: vec4, attributes1: vec4): vec2 {
    // note: attributes1 = [mass, degree, nodeSterngth, 0]

    const mass = attributes1[0];
    let ax = 0, ay = 0;
    // const arr_offset = int(floor(currentNode[2] + 0.5));
    // const length = int(floor(currentNode[3] + 0.5));

    const compressed = this.unpack_float(currentNode[2]);
    const length = compressed[0];
    const arr_offset = compressed[1];

    const node_buffer: vec4;
    for (let p: int = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + 4 * p; // i \u8282\u70B9\u7684\u7B2C p \u6761\u8FB9\u5F00\u59CB\u7684\u5C0F\u683C\u5B50\u4F4D\u7F6E
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)]; // \u5927\u683C\u5B50\uFF0C\u5927\u683C\u5B50\u4F4D\u7F6E=\u5C0F\u4E2A\u5B50\u4F4D\u7F6E / 4\uFF0C
      }

      let float_j: float = node_buffer[0];

      const nextNode = this.u_Data[int(float_j)];
      const vx = nextNode[0] - currentNode[0];
      const vy = nextNode[1] - currentNode[1];
      const dist = sqrt(vx * vx + vy * vy) + 0.01;
      const direx = vx / dist;
      const direy = vy / dist;
      const edgeLength = node_buffer[1];
      const edgeStrength = node_buffer[2];
      const diff: float = edgeLength - dist;//edgeLength
      // const param = diff * this.u_stiffness / mass; //
      const param = diff * edgeStrength / mass; // 
      ax -= direx * param;
      ay -= direy * param;
    }
    return [ax, ay];
  }

  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    const movement = u_AveMovement[0];
    let ax = 0, ay = 0;

    if (i >= VERTEX_COUNT || movement.x < u_minMovement) {
      this.u_Data[i] = currentNode;
      return;
    }

    // \u6BCF\u4E2A\u8282\u70B9\u5C5E\u6027\u5360\u4E24\u4E2A\u6570\u7EC4\u4E2D\u5404\u4E00\u683C
    // [mass, degree, nodeStrength, fx]
    const nodeAttributes1 = this.u_NodeAttributeArray1[i];
    // [centerX, centerY, centerGravity, fy]
    const nodeAttributes2 = this.u_NodeAttributeArray2[i];

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    ax += repulsive[0];
    ay += repulsive[1];

    // attractive
    const attractive = this.calcAttractive(i, currentNode, nodeAttributes1);
    ax += attractive[0];
    ay += attractive[1];

    // gravity
    const gravity = this.calcGravity(i, currentNode, nodeAttributes2);
    ax -= gravity[0];
    ay -= gravity[1];

    // speed
    const param = this.u_interval * this.u_damping;
    let vx = ax * param;
    let vy = ay * param;
    const vlength = sqrt(vx * vx + vy * vy) + 0.0001;
    if (vlength > this.u_maxSpeed) {
      const param2 = this.u_maxSpeed / vlength;
      vx = param2 * vx;
      vy = param2 * vy;
    }

    // move
    if (nodeAttributes1[3] != 0 && nodeAttributes2[3] != 0) {
      this.u_Data[i] = [
        nodeAttributes1[3],
        nodeAttributes2[3],
        currentNode[2],
        0
      ];
    } else {
      const distx = vx * this.u_interval;
      const disty = vy * this.u_interval;
      const distLength = sqrt(distx * distx + disty * disty);
      this.u_Data[i] = [
        currentNode[0] + distx,
        currentNode[1] + disty,
        currentNode[2],
        distLength
      ];
    }
    
    // the avarage move distance
    // need to share memory
    
  }
}
`,G.gForceBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {float distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',G.aveMovementCode=`
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class CalcAveMovement {
  @in
  u_Data: vec4[];
  @in
  u_iter: float;
  @in @out
  u_AveMovement: vec4[];
  @main
  compute() {
    let movement = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      const vertex = this.u_Data[j];
      movement += vertex[3];
    }
    movement = movement / float(VERTEX_COUNT);
    this.u_AveMovement[0] = [movement, 0, 0, 0];
  }
}
`,G.aveMovementBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}'},694414:function(We,G,_){"use strict";var m=this&&this.__extends||function(){var P=function(L,p){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,S){b.__proto__=S}||function(b,S){for(var x in S)Object.prototype.hasOwnProperty.call(S,x)&&(b[x]=S[x])},P(L,p)};return function(L,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");P(L,p);function b(){this.constructor=L}L.prototype=p===null?Object.create(p):(b.prototype=p.prototype,new b)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.GridLayout=void 0;var R=_(449784),w=_(762329),M=function(P){m(L,P);function L(p){var b=P.call(this)||this;return b.begin=[0,0],b.preventOverlap=!0,b.preventOverlapPadding=10,b.condense=!1,b.sortBy="degree",b.nodes=[],b.edges=[],b.width=300,b.height=300,b.row=0,b.col=0,b.cellWidth=0,b.cellHeight=0,b.cellUsed={},b.id2manPos={},b.onLayoutEnd=function(){},b.updateCfg(p),b}return L.prototype.getDefaultCfg=function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}},L.prototype.execute=function(){var p=this,b=p.nodes,S=p.edges,x=p.begin,g=b.length;if(g===0)return p.onLayoutEnd&&p.onLayoutEnd(),{nodes:b,edges:S};if(g===1)return b[0].x=x[0],b[0].y=x[1],p.onLayoutEnd&&p.onLayoutEnd(),{nodes:b,edges:S};var T=p.sortBy,E=p.width,O=p.height,k=p.condense,y=p.preventOverlapPadding,l=p.preventOverlap,U=p.nodeSpacing,X=p.nodeSize,F=[];b.forEach(function(St){F.push(St)});var W={};if(F.forEach(function(St,et){W[St.id]=et}),(T==="degree"||!(0,R.isString)(T)||F[0][T]===void 0)&&(T="degree",(0,R.isNaN)(b[0].degree))){var j=(0,R.getDegree)(F.length,W,S);F.forEach(function(St,et){St.degree=j[et].all})}F.sort(function(St,et){return et[T]-St[T]}),!E&&typeof window!="undefined"&&(E=window.innerWidth),!O&&typeof window!="undefined"&&(O=window.innerHeight);var V=p.rows,q=p.cols!=null?p.cols:p.columns;if(p.cells=g,V!=null&&q!=null?(p.rows=V,p.cols=q):V!=null&&q==null?(p.rows=V,p.cols=Math.ceil(p.cells/p.rows)):V==null&&q!=null?(p.cols=q,p.rows=Math.ceil(p.cells/p.cols)):(p.splits=Math.sqrt(p.cells*p.height/p.width),p.rows=Math.round(p.splits),p.cols=Math.round(p.width/p.height*p.splits)),p.rows=Math.max(p.rows,1),p.cols=Math.max(p.cols,1),p.cols*p.rows>p.cells){var $=p.small(),J=p.large();($-1)*J>=p.cells?p.small($-1):(J-1)*$>=p.cells&&p.large(J-1)}else for(;p.cols*p.rows<p.cells;){var $=p.small(),J=p.large();(J+1)*$>=p.cells?p.large(J+1):p.small($+1)}if(p.cellWidth=E/p.cols,p.cellHeight=O/p.rows,k&&(p.cellWidth=0,p.cellHeight=0),l||U){var ut=(0,R.getFuncByUnknownType)(10,U),nt=(0,R.getFuncByUnknownType)(30,X,!1);F.forEach(function(St){(!St.x||!St.y)&&(St.x=0,St.y=0);var et=nt(St)||30,it,Tt;(0,R.isArray)(et)?(it=et[0],Tt=et[1]):(it=et,Tt=et);var Nt=ut!==void 0?ut(St):y,st=it+Nt,xt=Tt+Nt;p.cellWidth=Math.max(p.cellWidth,st),p.cellHeight=Math.max(p.cellHeight,xt)})}p.cellUsed={},p.row=0,p.col=0,p.id2manPos={};for(var yt=0;yt<F.length;yt++){var dt=F[yt],Ft=void 0;if(p.position&&(Ft=p.position(dt)),Ft&&(Ft.row!==void 0||Ft.col!==void 0)){var wt={row:Ft.row,col:Ft.col};if(wt.col===void 0)for(wt.col=0;p.used(wt.row,wt.col);)wt.col++;else if(wt.row===void 0)for(wt.row=0;p.used(wt.row,wt.col);)wt.row++;p.id2manPos[dt.id]=wt,p.use(wt.row,wt.col)}p.getPos(dt)}return p.onLayoutEnd&&p.onLayoutEnd(),{edges:S,nodes:F}},L.prototype.small=function(p){var b=this,S,x=b.rows||5,g=b.cols||5;if(p==null)S=Math.min(x,g);else{var T=Math.min(x,g);T===b.rows?b.rows=p:b.cols=p}return S},L.prototype.large=function(p){var b=this,S,x=b.rows||5,g=b.cols||5;if(p==null)S=Math.max(x,g);else{var T=Math.max(x,g);T===b.rows?b.rows=p:b.cols=p}return S},L.prototype.used=function(p,b){var S=this;return S.cellUsed["c-".concat(p,"-").concat(b)]||!1},L.prototype.use=function(p,b){var S=this;S.cellUsed["c-".concat(p,"-").concat(b)]=!0},L.prototype.moveToNextCell=function(){var p=this,b=p.cols||5;p.col++,p.col>=b&&(p.col=0,p.row++)},L.prototype.getPos=function(p){var b=this,S=b.begin,x=b.cellWidth,g=b.cellHeight,T,E,O=b.id2manPos[p.id];if(O)T=O.col*x+x/2+S[0],E=O.row*g+g/2+S[1];else{for(;b.used(b.row,b.col);)b.moveToNextCell();T=b.col*x+x/2+S[0],E=b.row*g+g/2+S[1],b.use(b.row,b.col),b.moveToNextCell()}p.x=T,p.y=E},L.prototype.getType=function(){return"grid"},L}(w.Base);G.GridLayout=M},702584:function(We,G,_){"use strict";var m=this&&this.__createBinding||(Object.create?function(j,V,q,$){$===void 0&&($=q);var J=Object.getOwnPropertyDescriptor(V,q);(!J||("get"in J?!V.__esModule:J.writable||J.configurable))&&(J={enumerable:!0,get:function(){return V[q]}}),Object.defineProperty(j,$,J)}:function(j,V,q,$){$===void 0&&($=q),j[$]=V[q]}),R=this&&this.__exportStar||function(j,V){for(var q in j)q!=="default"&&!Object.prototype.hasOwnProperty.call(V,q)&&m(V,j,q)};Object.defineProperty(G,"__esModule",{value:!0}),G.ERLayout=G.ForceAtlas2Layout=G.ComboCombinedLayout=G.ComboForceLayout=G.GForceGPULayout=G.FruchtermanGPULayout=G.FruchtermanLayout=G.MDSLayout=G.ConcentricLayout=G.RadialLayout=G.DagreCompoundLayout=G.DagreLayout=G.CircularLayout=G.ForceLayout=G.Force2Layout=G.GForceLayout=G.RandomLayout=G.GridLayout=G.Layouts=G.Layout=void 0;var w=_(694414);Object.defineProperty(G,"GridLayout",{enumerable:!0,get:function(){return w.GridLayout}});var M=_(539711);Object.defineProperty(G,"RandomLayout",{enumerable:!0,get:function(){return M.RandomLayout}});var P=_(113653);Object.defineProperty(G,"GForceLayout",{enumerable:!0,get:function(){return P.GForceLayout}});var L=_(306740);Object.defineProperty(G,"Force2Layout",{enumerable:!0,get:function(){return L.Force2Layout}});var p=_(885717);Object.defineProperty(G,"ForceLayout",{enumerable:!0,get:function(){return p.ForceLayout}});var b=_(964885);Object.defineProperty(G,"CircularLayout",{enumerable:!0,get:function(){return b.CircularLayout}});var S=_(920171);Object.defineProperty(G,"DagreLayout",{enumerable:!0,get:function(){return S.DagreLayout}});var x=_(177057);Object.defineProperty(G,"DagreCompoundLayout",{enumerable:!0,get:function(){return x.DagreCompoundLayout}});var g=_(847944);Object.defineProperty(G,"RadialLayout",{enumerable:!0,get:function(){return g.RadialLayout}});var T=_(843281);Object.defineProperty(G,"ConcentricLayout",{enumerable:!0,get:function(){return T.ConcentricLayout}});var E=_(352899);Object.defineProperty(G,"MDSLayout",{enumerable:!0,get:function(){return E.MDSLayout}});var O=_(880374);Object.defineProperty(G,"FruchtermanLayout",{enumerable:!0,get:function(){return O.FruchtermanLayout}});var k=_(687745);Object.defineProperty(G,"FruchtermanGPULayout",{enumerable:!0,get:function(){return k.FruchtermanGPULayout}});var y=_(785194);Object.defineProperty(G,"GForceGPULayout",{enumerable:!0,get:function(){return y.GForceGPULayout}});var l=_(366590);Object.defineProperty(G,"ComboForceLayout",{enumerable:!0,get:function(){return l.ComboForceLayout}});var U=_(263861);Object.defineProperty(G,"ComboCombinedLayout",{enumerable:!0,get:function(){return U.ComboCombinedLayout}});var X=_(148564);Object.defineProperty(G,"ForceAtlas2Layout",{enumerable:!0,get:function(){return X.ForceAtlas2Layout}});var F=_(290441);Object.defineProperty(G,"ERLayout",{enumerable:!0,get:function(){return F.ERLayout}});var W=_(842875);Object.defineProperty(G,"Layout",{enumerable:!0,get:function(){return W.Layout}}),Object.defineProperty(G,"Layouts",{enumerable:!0,get:function(){return W.Layouts}}),R(_(932867),G)},842875:function(We,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.Layouts=G.Layout=void 0;var m=_(695326),R=_(694414),w=_(539711),M=_(306740),P=_(113653),L=_(885717),p=_(964885),b=_(920171),S=_(847944),x=_(843281),g=_(352899),T=_(880374),E=_(687745),O=_(785194),k=_(366590),y=_(263861),l=_(148564),U=_(290441),X=_(177057),F=_(449784),W=function(){function j(V){var q=(0,m.getLayoutByName)(V.type);this.layoutInstance=new q(V)}return j.prototype.layout=function(V){return this.layoutInstance.layout(V)},j.prototype.updateCfg=function(V){this.layoutInstance.updateCfg(V)},j.prototype.init=function(V){this.correctLayers(V.nodes),this.layoutInstance.init(V)},j.prototype.correctLayers=function(V){if(V!=null&&V.length){var q=1/0,$=[];if(V.forEach(function(ut){(0,F.isString)(ut.layer)&&(ut.layer=parseInt(ut.layer,10)),!(ut.layer===void 0||isNaN(ut.layer))&&($.push(ut),ut.layer<q&&(q=ut.layer))}),q<=0){var J=Math.abs(q)+1;$.forEach(function(ut){return ut.layer+=J})}}},j.prototype.execute=function(){this.layoutInstance.execute()},j.prototype.getDefaultCfg=function(){return this.layoutInstance.getDefaultCfg()},j.prototype.destroy=function(){return this.layoutInstance.destroy()},j}();G.Layout=W,G.Layouts={force:L.ForceLayout,fruchterman:T.FruchtermanLayout,forceAtlas2:l.ForceAtlas2Layout,gForce:P.GForceLayout,force2:M.Force2Layout,dagre:b.DagreLayout,dagreCompound:X.DagreCompoundLayout,circular:p.CircularLayout,radial:S.RadialLayout,concentric:x.ConcentricLayout,grid:R.GridLayout,mds:g.MDSLayout,comboForce:k.ComboForceLayout,comboCombined:y.ComboCombinedLayout,random:w.RandomLayout,"gForce-gpu":O.GForceGPULayout,"fruchterman-gpu":E.FruchtermanGPULayout,er:U.ERLayout}},352899:function(We,G,_){"use strict";var m=this&&this.__extends||function(){var L=function(p,b){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,x){S.__proto__=x}||function(S,x){for(var g in x)Object.prototype.hasOwnProperty.call(x,g)&&(S[g]=x[g])},L(p,b)};return function(p,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");L(p,b);function S(){this.constructor=p}p.prototype=b===null?Object.create(b):(S.prototype=b.prototype,new S)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.MDSLayout=void 0;var R=_(405237),w=_(449784),M=_(762329),P=function(L){m(p,L);function p(b){var S=L.call(this)||this;return S.center=[0,0],S.linkDistance=50,S.nodes=[],S.edges=[],S.onLayoutEnd=function(){},S.updateCfg(b),S}return p.prototype.getDefaultCfg=function(){return{center:[0,0],linkDistance:50}},p.prototype.execute=function(){var b=this,S=b.nodes,x=b.edges,g=x===void 0?[]:x,T=b.center;if(!S||S.length===0){b.onLayoutEnd&&b.onLayoutEnd();return}if(S.length===1){S[0].x=T[0],S[0].y=T[1],b.onLayoutEnd&&b.onLayoutEnd();return}var E=b.linkDistance,O=(0,w.getAdjMatrix)({nodes:S,edges:g},!1),k=(0,w.floydWarshall)(O);b.handleInfinity(k);var y=(0,w.scaleMatrix)(k,E);b.scaledDistances=y;var l=b.runMDS();return b.positions=l,l.forEach(function(U,X){S[X].x=U[0]+T[0],S[X].y=U[1]+T[1]}),b.onLayoutEnd&&b.onLayoutEnd(),{nodes:S,edges:g}},p.prototype.runMDS=function(){var b=this,S=2,x=b.scaledDistances,g=R.Matrix.mul(R.Matrix.pow(x,2),-.5),T=g.mean("row"),E=g.mean("column"),O=g.mean();g.add(O).subRowVector(T).subColumnVector(E);var k=new R.SingularValueDecomposition(g),y=R.Matrix.sqrt(k.diagonalMatrix).diagonal();return k.leftSingularVectors.toJSON().map(function(l){return R.Matrix.mul([l],[y]).toJSON()[0].splice(0,S)})},p.prototype.handleInfinity=function(b){var S=-999999;b.forEach(function(x){x.forEach(function(g){g!==1/0&&S<g&&(S=g)})}),b.forEach(function(x,g){x.forEach(function(T,E){T===1/0&&(b[g][E]=S)})})},p.prototype.getType=function(){return"mds"},p}(M.Base);G.MDSLayout=P},847944:function(We,G,_){"use strict";var m=this&&this.__createBinding||(Object.create?function(w,M,P,L){L===void 0&&(L=P);var p=Object.getOwnPropertyDescriptor(M,P);(!p||("get"in p?!M.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return M[P]}}),Object.defineProperty(w,L,p)}:function(w,M,P,L){L===void 0&&(L=P),w[L]=M[P]}),R=this&&this.__exportStar||function(w,M){for(var P in w)P!=="default"&&!Object.prototype.hasOwnProperty.call(M,P)&&m(M,w,P)};Object.defineProperty(G,"__esModule",{value:!0}),R(_(255974),G)},366082:function(We,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var m=_(405237),R=function(){function w(M){this.distances=M.distances,this.dimension=M.dimension||2,this.linkDistance=M.linkDistance}return w.prototype.layout=function(){var M=this,P=M.dimension,L=M.distances,p=M.linkDistance;try{var b=m.Matrix.mul(m.Matrix.pow(L,2),-.5),S=b.mean("row"),x=b.mean("column"),g=b.mean();b.add(g).subRowVector(S).subColumnVector(x);var T=new m.SingularValueDecomposition(b),E=m.Matrix.sqrt(T.diagonalMatrix).diagonal();return T.leftSingularVectors.toJSON().map(function(U){return m.Matrix.mul([U],[E]).toJSON()[0].splice(0,P)})}catch(U){for(var O=[],k=0;k<L.length;k++){var y=Math.random()*p,l=Math.random()*p;O.push([y,l])}return O}},w}();G.default=R},255974:function(We,G,_){"use strict";var m=this&&this.__extends||function(){var g=function(T,E){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,k){O.__proto__=k}||function(O,k){for(var y in k)Object.prototype.hasOwnProperty.call(k,y)&&(O[y]=k[y])},g(T,E)};return function(T,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");g(T,E);function O(){this.constructor=T}T.prototype=E===null?Object.create(E):(O.prototype=E.prototype,new O)}}(),R=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(G,"__esModule",{value:!0}),G.RadialLayout=void 0;var w=_(449784),M=_(762329),P=R(_(366082)),L=R(_(706290));function p(g){for(var T=g.length,E=g[0].length,O=[],k=0;k<T;k++){for(var y=[],l=0;l<E;l++)g[k][l]!==0?y.push(1/(g[k][l]*g[k][l])):y.push(0);O.push(y)}return O}function b(g,T){var E=-1;return g.forEach(function(O,k){O.id===T&&(E=k)}),E}function S(g,T){return Math.sqrt((g[0]-T[0])*(g[0]-T[0])+(g[1]-T[1])*(g[1]-T[1]))}var x=function(g){m(T,g);function T(E){var O=g.call(this)||this;return O.maxIteration=1e3,O.focusNode=null,O.unitRadius=null,O.linkDistance=50,O.preventOverlap=!1,O.strictRadial=!0,O.maxPreventOverlapIteration=200,O.sortStrength=10,O.nodes=[],O.edges=[],O.updateCfg(E),O}return T.prototype.getDefaultCfg=function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}},T.prototype.execute=function(){var E=this,O=E.nodes,k=E.edges||[];if(!O||O.length===0){E.onLayoutEnd&&E.onLayoutEnd();return}!E.width&&typeof window!="undefined"&&(E.width=window.innerWidth),!E.height&&typeof window!="undefined"&&(E.height=window.innerHeight),E.center||(E.center=[E.width/2,E.height/2]);var y=E.center;if(O.length===1){O[0].x=y[0],O[0].y=y[1],E.onLayoutEnd&&E.onLayoutEnd();return}var l=E.linkDistance,U=null;if((0,w.isString)(E.focusNode)){for(var X=!1,F=0;F<O.length;F++)O[F].id===E.focusNode&&(U=O[F],E.focusNode=U,X=!0,F=O.length);X||(U=null)}else U=E.focusNode;U||(U=O[0],E.focusNode=U);var W=b(O,U.id);W<0&&(W=0),E.focusIndex=W;var j=(0,w.getAdjMatrix)({nodes:O,edges:k},!1),V=(0,w.floydWarshall)(j),q=E.maxToFocus(V,W);E.handleInfinity(V,W,q+1),E.distances=V;var $=V[W],J=E.width||500,ut=E.height||500,nt=J-y[0]>y[0]?y[0]:J-y[0],yt=ut-y[1]>y[1]?y[1]:ut-y[1];nt===0&&(nt=J/2),yt===0&&(yt=ut/2);var dt=yt>nt?nt:yt,Ft=Math.max.apply(Math,$),wt=[];$.forEach(function(ue,fe){E.unitRadius||(E.unitRadius=dt/Ft),wt[fe]=ue*E.unitRadius}),E.radii=wt;var St=E.eIdealDisMatrix();E.eIdealDistances=St;var et=p(St);E.weights=et;var it=new P.default({linkDistance:l,distances:St}),Tt=it.layout();Tt.forEach(function(ue){(0,w.isNaN)(ue[0])&&(ue[0]=Math.random()*l),(0,w.isNaN)(ue[1])&&(ue[1]=Math.random()*l)}),E.positions=Tt,Tt.forEach(function(ue,fe){O[fe].x=ue[0]+y[0],O[fe].y=ue[1]+y[1]}),Tt.forEach(function(ue){ue[0]-=Tt[W][0],ue[1]-=Tt[W][1]}),E.run();var Nt=E.preventOverlap,st=E.nodeSize,xt,zt=E.strictRadial;if(Nt){var Wt=E.nodeSpacing,_t;(0,w.isNumber)(Wt)?_t=function(){return Wt}:(0,w.isFunction)(Wt)?_t=Wt:_t=function(){return 0},st?(0,w.isArray)(st)?xt=function(ue){var fe=st[0]>st[1]?st[0]:st[1];return fe+_t(ue)}:xt=function(ue){return st+_t(ue)}:xt=function(ue){if(ue.size){if((0,w.isArray)(ue.size)){var fe=ue.size[0]>ue.size[1]?ue.size[0]:ue.size[1];return fe+_t(ue)}if((0,w.isObject)(ue.size)){var fe=ue.size.width>ue.size.height?ue.size.width:ue.size.height;return fe+_t(ue)}return ue.size+_t(ue)}return 10+_t(ue)};var Xt={nodes:O,nodeSizeFunc:xt,adjMatrix:j,positions:Tt,radii:wt,height:ut,width:J,strictRadial:zt,focusID:W,iterations:E.maxPreventOverlapIteration||200,k:Tt.length/4.5},te=new L.default(Xt);Tt=te.layout()}return Tt.forEach(function(ue,fe){O[fe].x=ue[0]+y[0],O[fe].y=ue[1]+y[1]}),E.onLayoutEnd&&E.onLayoutEnd(),{nodes:O,edges:k}},T.prototype.run=function(){for(var E=this,O=E.maxIteration,k=E.positions||[],y=E.weights||[],l=E.eIdealDistances||[],U=E.radii||[],X=0;X<=O;X++){var F=X/O;E.oneIteration(F,k,U,l,y)}},T.prototype.oneIteration=function(E,O,k,y,l){var U=this,X=1-E,F=U.focusIndex;O.forEach(function(W,j){var V=S(W,[0,0]),q=V===0?0:1/V;if(j!==F){var $=0,J=0,ut=0;O.forEach(function(yt,dt){if(j!==dt){var Ft=S(W,yt),wt=Ft===0?0:1/Ft,St=y[dt][j];ut+=l[j][dt],$+=l[j][dt]*(yt[0]+St*(W[0]-yt[0])*wt),J+=l[j][dt]*(yt[1]+St*(W[1]-yt[1])*wt)}});var nt=k[j]===0?0:1/k[j];ut*=X,ut+=E*nt*nt,$*=X,$+=E*nt*W[0]*q,W[0]=$/ut,J*=X,J+=E*nt*W[1]*q,W[1]=J/ut}})},T.prototype.eIdealDisMatrix=function(){var E=this,O=E.nodes;if(!O)return[];var k=E.distances,y=E.linkDistance,l=E.radii||[],U=E.unitRadius||50,X=[];return k&&k.forEach(function(F,W){var j=[];F.forEach(function(V,q){if(W===q)j.push(0);else if(l[W]===l[q])if(E.sortBy==="data")j.push(V*(Math.abs(W-q)*E.sortStrength)/(l[W]/U));else if(E.sortBy){var $=O[W][E.sortBy]||0,J=O[q][E.sortBy]||0;(0,w.isString)($)&&($=$.charCodeAt(0)),(0,w.isString)(J)&&(J=J.charCodeAt(0)),j.push(V*(Math.abs($-J)*E.sortStrength)/(l[W]/U))}else j.push(V*y/(l[W]/U));else{var ut=(y+U)/2;j.push(V*ut)}}),X.push(j)}),X},T.prototype.handleInfinity=function(E,O,k){for(var y=E.length,l=0;l<y;l++)if(E[O][l]===1/0){E[O][l]=k,E[l][O]=k;for(var U=0;U<y;U++)E[l][U]!==1/0&&E[O][U]===1/0&&(E[O][U]=k+E[l][U],E[U][O]=k+E[l][U])}for(var l=0;l<y;l++)if(l!==O){for(var U=0;U<y;U++)if(E[l][U]===1/0){var X=Math.abs(E[O][l]-E[O][U]);X=X===0?1:X,E[l][U]=X}}},T.prototype.maxToFocus=function(E,O){for(var k=0,y=0;y<E[O].length;y++)E[O][y]!==1/0&&(k=E[O][y]>k?E[O][y]:k);return k},T.prototype.getType=function(){return"radial"},T}(M.Base);G.RadialLayout=x},706290:function(We,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var _=800,m=function(){function R(w){this.disp=[],this.positions=w.positions,this.adjMatrix=w.adjMatrix,this.focusID=w.focusID,this.radii=w.radii,this.iterations=w.iterations||10,this.height=w.height||10,this.width=w.width||10,this.speed=w.speed||100,this.gravity=w.gravity||10,this.nodeSizeFunc=w.nodeSizeFunc,this.k=w.k||5,this.strictRadial=w.strictRadial,this.nodes=w.nodes}return R.prototype.layout=function(){var w=this,M=w.positions,P=[],L=w.iterations,p=w.width/10;w.maxDisplace=p,w.disp=P;for(var b=0;b<L;b++)M.forEach(function(S,x){P[x]={x:0,y:0}}),w.getRepulsion(),w.updatePositions();return M},R.prototype.getRepulsion=function(){var w=this,M=w.positions,P=w.nodes,L=w.disp,p=w.k,b=w.radii||[];M.forEach(function(S,x){L[x]={x:0,y:0},M.forEach(function(g,T){if(x!==T&&b[x]===b[T]){var E=S[0]-g[0],O=S[1]-g[1],k=Math.sqrt(E*E+O*O);if(k===0){k=1;var y=x>T?1:-1;E=.01*y,O=.01*y}if(k<w.nodeSizeFunc(P[x])/2+w.nodeSizeFunc(P[T])/2){var l=p*p/k;L[x].x+=E/k*l,L[x].y+=O/k*l}}})})},R.prototype.updatePositions=function(){var w=this,M=w.positions,P=w.disp,L=w.speed,p=w.strictRadial,b=w.focusID,S=w.maxDisplace||w.width/10;p&&P.forEach(function(g,T){var E=M[T][0]-M[b][0],O=M[T][1]-M[b][1],k=Math.sqrt(E*E+O*O),y=O/k,l=-E/k,U=Math.sqrt(g.x*g.x+g.y*g.y),X=Math.acos((y*g.x+l*g.y)/U);X>Math.PI/2&&(X-=Math.PI/2,y*=-1,l*=-1);var F=Math.cos(X)*U;g.x=y*F,g.y=l*F});var x=w.radii;M.forEach(function(g,T){if(T!==b){var E=Math.sqrt(P[T].x*P[T].x+P[T].y*P[T].y);if(E>0&&T!==b){var O=Math.min(S*(L/_),E);if(g[0]+=P[T].x/E*O,g[1]+=P[T].y/E*O,p){var k=g[0]-M[b][0],y=g[1]-M[b][1],l=Math.sqrt(k*k+y*y);k=k/l*x[T],y=y/l*x[T],g[0]=M[b][0]+k,g[1]=M[b][1]+y}}}})},R}();G.default=m},539711:function(We,G,_){"use strict";var m=this&&this.__extends||function(){var M=function(P,L){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,b){p.__proto__=b}||function(p,b){for(var S in b)Object.prototype.hasOwnProperty.call(b,S)&&(p[S]=b[S])},M(P,L)};return function(P,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");M(P,L);function p(){this.constructor=P}P.prototype=L===null?Object.create(L):(p.prototype=L.prototype,new p)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.RandomLayout=void 0;var R=_(762329),w=function(M){m(P,M);function P(L){var p=M.call(this)||this;return p.center=[0,0],p.width=300,p.height=300,p.nodes=[],p.edges=[],p.onLayoutEnd=function(){},p.updateCfg(L),p}return P.prototype.getDefaultCfg=function(){return{center:[0,0],width:300,height:300}},P.prototype.execute=function(){var L=this,p=L.nodes,b=.9,S=L.center;return!L.width&&typeof window!="undefined"&&(L.width=window.innerWidth),!L.height&&typeof window!="undefined"&&(L.height=window.innerHeight),p&&p.forEach(function(x){x.x=(Math.random()-.5)*b*L.width+S[0],x.y=(Math.random()-.5)*b*L.height+S[1]}),L.onLayoutEnd&&L.onLayoutEnd(),{nodes:p,edges:this.edges}},P.prototype.getType=function(){return"random"},P}(R.Base);G.RandomLayout=w},932867:function(We,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0})},695326:function(We,G,_){"use strict";var m=this&&this.__extends||function(){var b=function(S,x){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,T){g.__proto__=T}||function(g,T){for(var E in T)Object.prototype.hasOwnProperty.call(T,E)&&(g[E]=T[E])},b(S,x)};return function(S,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");b(S,x);function g(){this.constructor=S}S.prototype=x===null?Object.create(x):(g.prototype=x.prototype,new g)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.getLayoutByName=G.unRegisterLayout=G.registerLayout=void 0;var R=_(762329),w=_(449784),M=new Map,P=function(b,S){if(M.get(b)&&console.warn("The layout with the name ".concat(b," exists already, it will be overridden")),(0,w.isObject)(S)){var x=function(g){m(T,g);function T(E){var O=this,k;O=g.call(this)||this;var y=O,l={},U=Object.assign({},y.getDefaultCfg(),((k=S.getDefaultCfg)===null||k===void 0?void 0:k.call(S))||{});return Object.assign(l,U,S,E),Object.keys(l).forEach(function(X){var F=l[X];y[X]=F}),O}return T}(R.Base);M.set(b,x)}else M.set(b,S);return M.get(b)};G.registerLayout=P;var L=function(b){M.has(b)&&M.delete(b)};G.unRegisterLayout=L;var p=function(b){return M.has(b)?M.get(b):null};G.getLayoutByName=p},185087:function(We,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.isArray=void 0,G.isArray=Array.isArray},578732:function(We,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.getFuncByUnknownType=G.getFunc=G.isFunction=void 0;var m=_(449784),R=_(330627),w=function(L){return typeof L=="function"};G.isFunction=w;var M=function(L,p,b){var S;return b?S=b:(0,R.isNumber)(L)?S=function(){return L}:S=function(){return p},S};G.getFunc=M;var P=function(L,p,b){return b===void 0&&(b=!0),!p&&p!==0?function(S){return S.size?(0,m.isArray)(S.size)?S.size[0]>S.size[1]?S.size[0]:S.size[1]:(0,m.isObject)(S.size)?S.size.width>S.size.height?S.size.width:S.size.height:S.size:L}:(0,G.isFunction)(p)?p:(0,R.isNumber)(p)?function(){return p}:(0,m.isArray)(p)?function(){if(b){var S=Math.max.apply(Math,p);return isNaN(S)?L:S}return p}:(0,m.isObject)(p)?function(){if(b){var S=Math.max(p.width,p.height);return isNaN(S)?L:S}return[p.width,p.height]}:function(){return L}};G.getFuncByUnknownType=P},248835:function(We,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.arrayToTextureData=G.attributesToTextureData=G.buildTextureDataWithTwoEdgeAttr=G.buildTextureData=G.proccessToFunc=void 0;var m=_(449784),R=_(280628),w=function(b,S){var x;return b?(0,m.isNumber)(b)?x=function(){return b}:x=b:x=function(){return S||1},x};G.proccessToFunc=w;var M=function(b,S){var x=[],g=[],T={},E=0;for(E=0;E<b.length;E++){var O=b[E];T[O.id]=E,x.push(O.x),x.push(O.y),x.push(0),x.push(0),g.push([])}for(E=0;E<S.length;E++){var k=S[E],y=(0,R.getEdgeTerminal)(k,"source"),l=(0,R.getEdgeTerminal)(k,"target");!isNaN(T[y])&&!isNaN(T[l])&&(g[T[y]].push(T[l]),g[T[l]].push(T[y]))}var U=0;for(E=0;E<b.length;E++){var X=x.length,F=g[E],W=F.length;x[E*4+2]=X,x[E*4+3]=W,U=Math.max(U,W);for(var j=0;j<W;++j){var V=F[j];x.push(+V)}}for(;x.length%4!==0;)x.push(0);return{maxEdgePerVetex:U,array:new Float32Array(x)}};G.buildTextureData=M;var P=function(b,S,x,g){var T=[],E=[],O={},k=0;for(k=0;k<b.length;k++){var y=b[k];O[y.id]=k,T.push(y.x),T.push(y.y),T.push(0),T.push(0),E.push([])}for(k=0;k<S.length;k++){var l=S[k],U=(0,R.getEdgeTerminal)(l,"source"),X=(0,R.getEdgeTerminal)(l,"target");E[O[U]].push(O[X]),E[O[U]].push(x(l)),E[O[U]].push(g(l)),E[O[U]].push(0),E[O[X]].push(O[U]),E[O[X]].push(x(l)),E[O[X]].push(g(l)),E[O[X]].push(0)}var F=0;for(k=0;k<b.length;k++){var W=T.length,j=E[k],V=j.length;T[k*4+2]=W+1048576*V/4,T[k*4+3]=0,F=Math.max(F,V/4);for(var q=0;q<V;++q){var $=j[q];T.push(+$)}}for(;T.length%4!==0;)T.push(0);return{maxEdgePerVetex:F,array:new Float32Array(T)}};G.buildTextureDataWithTwoEdgeAttr=P;var L=function(b,S){var x=[],g=b.length,T={};return S.forEach(function(E){b.forEach(function(O,k){if(T[E[O]]===void 0&&(T[E[O]]=Object.keys(T).length),x.push(T[E[O]]),k===g-1)for(;x.length%4!==0;)x.push(0)})}),{array:new Float32Array(x),count:Object.keys(T).length}};G.attributesToTextureData=L;var p=function(b){for(var S=[],x=b.length,g=b[0].length,T=function(O){b.forEach(function(k,y){if(S.push(k[O]),y===x-1)for(;S.length%4!==0;)S.push(0)})},E=0;E<g;E++)T(E);return new Float32Array(S)};G.arrayToTextureData=p},449784:function(We,G,_){"use strict";var m=this&&this.__createBinding||(Object.create?function(w,M,P,L){L===void 0&&(L=P);var p=Object.getOwnPropertyDescriptor(M,P);(!p||("get"in p?!M.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return M[P]}}),Object.defineProperty(w,L,p)}:function(w,M,P,L){L===void 0&&(L=P),w[L]=M[P]}),R=this&&this.__exportStar||function(w,M){for(var P in w)P!=="default"&&!Object.prototype.hasOwnProperty.call(M,P)&&m(M,w,P)};Object.defineProperty(G,"__esModule",{value:!0}),R(_(708055),G),R(_(185087),G),R(_(330627),G),R(_(280628),G),R(_(898130),G),R(_(578732),G)},280628:function(We,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.getCoreNodeAndRelativeLeafNodes=G.getAvgNodePosition=G.getLayoutBBox=G.traverseTreeUp=G.scaleMatrix=G.getAdjMatrix=G.floydWarshall=G.getDegreeMap=G.getDegree=G.getEdgeTerminal=void 0;var m=_(185087),R=_(330627),w=_(898130),M=function(U,X){var F=U[X];return(0,w.isObject)(F)?F.cell:F};G.getEdgeTerminal=M;var P=function(U,X,F){for(var W=[],j=0;j<U;j++)W[j]={in:0,out:0,all:0};return F&&F.forEach(function(V){var q=(0,G.getEdgeTerminal)(V,"source"),$=(0,G.getEdgeTerminal)(V,"target");q&&W[X[q]]&&(W[X[q]].out+=1,W[X[q]].all+=1),$&&W[X[$]]&&(W[X[$]].in+=1,W[X[$]].all+=1)}),W};G.getDegree=P;var L=function(U,X){var F={};return U.forEach(function(W){F[W.id]={in:0,out:0,all:0}}),X&&X.forEach(function(W){var j=(0,G.getEdgeTerminal)(W,"source"),V=(0,G.getEdgeTerminal)(W,"target");j&&(F[j].out+=1,F[j].all+=1),V&&(F[V].in+=1,F[V].all+=1)}),F};G.getDegreeMap=L;var p=function(U){for(var X=[],F=U.length,W=0;W<F;W+=1){X[W]=[];for(var j=0;j<F;j+=1)W===j?X[W][j]=0:U[W][j]===0||!U[W][j]?X[W][j]=1/0:X[W][j]=U[W][j]}for(var V=0;V<F;V+=1)for(var W=0;W<F;W+=1)for(var j=0;j<F;j+=1)X[W][j]>X[W][V]+X[V][j]&&(X[W][j]=X[W][V]+X[V][j]);return X};G.floydWarshall=p;var b=function(U,X){var F=U.nodes,W=U.edges,j=[],V={};if(!F)throw new Error("invalid nodes data!");return F&&F.forEach(function(q,$){V[q.id]=$;var J=[];j.push(J)}),W==null||W.forEach(function(q){var $=(0,G.getEdgeTerminal)(q,"source"),J=(0,G.getEdgeTerminal)(q,"target"),ut=V[$],nt=V[J];ut===void 0||nt===void 0||(j[ut][nt]=1,X||(j[nt][ut]=1))}),j};G.getAdjMatrix=b;var S=function(U,X){var F=[];return U.forEach(function(W){var j=[];W.forEach(function(V){j.push(V*X)}),F.push(j)}),F};G.scaleMatrix=S;var x=function(U,X){if(U&&U.children){for(var F=U.children.length-1;F>=0;F--)if(!x(U.children[F],X))return}return!!X(U)},g=function(U,X){typeof X=="function"&&x(U,X)};G.traverseTreeUp=g;var T=function(U){var X=1/0,F=1/0,W=-1/0,j=-1/0;return U.forEach(function(V){var q=V.size;(0,m.isArray)(q)?q.length===1&&(q=[q[0],q[0]]):(0,R.isNumber)(q)?q=[q,q]:(q===void 0||isNaN(q))&&(q=[30,30]);var $=[q[0]/2,q[1]/2],J=V.x-$[0],ut=V.x+$[0],nt=V.y-$[1],yt=V.y+$[1];X>J&&(X=J),F>nt&&(F=nt),W<ut&&(W=ut),j<yt&&(j=yt)}),{minX:X,minY:F,maxX:W,maxY:j}};G.getLayoutBBox=T;var E=function(U){var X={x:0,y:0};U.forEach(function(W){X.x+=W.x||0,X.y+=W.y||0});var F=U.length||1;return{x:X.x/F,y:X.y/F}};G.getAvgNodePosition=E;var O=function(U,X,F){var W,j;return U==="source"?((W=F==null?void 0:F.find(function(V){return V.target===X.id}))===null||W===void 0?void 0:W.source)||{}:((j=F==null?void 0:F.find(function(V){return V.source===X.id}))===null||j===void 0?void 0:j.target)||{}},k=function(U,X,F){var W=[];switch(U){case"source":W=F==null?void 0:F.filter(function(V){return V.source===X.id}).map(function(V){return V.target});break;case"target":W=F==null?void 0:F.filter(function(V){return V.target===X.id}).map(function(V){return V.source});break;case"both":W=F==null?void 0:F.filter(function(V){return V.source===X.id}).map(function(V){return V.target}).concat(F==null?void 0:F.filter(function(V){return V.target===X.id}).map(function(V){return V.source}));break;default:break}var j=new Set(W);return Array.from(j)},y=function(U,X,F,W,j){var V=F[X]||"",q=(W==null?void 0:W.filter(function($){return $[X]===V}))||[];return U==="leaf"&&(q=q.filter(function($){var J,ut;return((J=j[$.id])===null||J===void 0?void 0:J.in)===0||((ut=j[$.id])===null||ut===void 0?void 0:ut.out)===0})),q},l=function(U,X,F,W,j,V){var q=j[X.id],$=q.in,J=q.out,ut=X,nt=[];$===0?(ut=O("source",X,F),nt=k("both",ut,F).map(function(dt){return V[dt]})):J===0&&(ut=O("target",X,F),nt=k("both",ut,F).map(function(dt){return V[dt]})),nt=nt.filter(function(dt){return j[dt.id]&&(j[dt.id].in===0||j[dt.id].out===0)});var yt=y(U,W,X,nt,j);return{coreNode:ut,relativeLeafNodes:nt,sameTypeLeafNodes:yt}};G.getCoreNodeAndRelativeLeafNodes=l},330627:function(We,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.toNumber=G.isNaN=G.isNumber=void 0;var _=function(w){return typeof w=="number"};G.isNumber=_;var m=function(w){return Number.isNaN(Number(w))};G.isNaN=m;var R=function(w){var M=parseFloat(w);return(0,G.isNaN)(M)?w:M};G.toNumber=R},898130:function(We,G){"use strict";var _=this&&this.__assign||function(){return _=Object.assign||function(w){for(var M,P=1,L=arguments.length;P<L;P++){M=arguments[P];for(var p in M)Object.prototype.hasOwnProperty.call(M,p)&&(w[p]=M[p])}return w},_.apply(this,arguments)};Object.defineProperty(G,"__esModule",{value:!0}),G.clone=G.isObject=void 0;var m=function(w){return w!==null&&typeof w=="object"};G.isObject=m;var R=function(w){if(w===null)return w;if(w instanceof Date)return new Date(w.getTime());if(w instanceof Array){var M=[];return w.forEach(function(L){M.push(L)}),M.map(function(L){return(0,G.clone)(L)})}if(typeof w=="object"&&Object.keys(w).length){var P=_({},w);return Object.keys(P).forEach(function(L){P[L]=(0,G.clone)(P[L])}),P}return w};G.clone=R},708055:function(We,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.camelize=G.isString=void 0;var _=function(w){return typeof w=="string"};G.isString=_;var m=function(w){var M=Object.create(null);return function(P){var L=M[P];return L||(M[P]=w(P))}},R=/-(\w)/g;G.camelize=m(function(w){return w.replace(R,function(M,P){return P?P.toUpperCase():""})})},233446:function(We,G,_){"use strict";_.r(G),_.d(G,{Cache:function(){return ta},angleTo:function(){return q},arcToCubic:function(){return be},assign:function(){return mr},augment:function(){return tn},clamp:function(){return ei},clearAnimationFrame:function(){return Ue},clone:function(){return Tn},clonePath:function(){return J},contains:function(){return Dt},debounce:function(){return dn},deepMix:function(){return Ma},difference:function(){return Q},direction:function(){return V},distanceSquareRoot:function(){return vt},each:function(){return Oe},endsWith:function(){return $i},equalizeSegments:function(){return Kt},every:function(){return Qt},extend:function(){return Do},filter:function(){return ht},find:function(){return Gr},findIndex:function(){return Yt},firstValue:function(){return Ie},fixedBase:function(){return Ii},flatten:function(){return Ye},flattenDeep:function(){return Mr},forIn:function(){return fs},get:function(){return Rf},getDrawDirection:function(){return Fr},getPathArea:function(){return Dr},getPathBBox:function(){return oe},getPathBBoxTotalLength:function(){return Lr},getPointAtLength:function(){return Kr},getRange:function(){return ea},getRotatedCurve:function(){return ln},getTotalLength:function(){return Te},getType:function(){return ls},getWrapBehavior:function(){return Bn},gradient:function(){return x},group:function(){return cn},groupBy:function(){return Yr},groupToMap:function(){return Pr},has:function(){return Is},hasKey:function(){return Aa},hasValue:function(){return cr},head:function(){return ro},identity:function(){return Kc},includes:function(){return Dt},indexOf:function(){return bo},isArguments:function(){return Ks},isArray:function(){return Pt},isArrayLike:function(){return Et},isBoolean:function(){return hu},isDate:function(){return Ds},isDecimal:function(){return Da},isElement:function(){return me},isEmpty:function(){return ko},isEqual:function(){return ci},isEqualWith:function(){return Fi},isError:function(){return is},isEven:function(){return _i},isFinite:function(){return Eu},isFunction:function(){return at},isInteger:function(){return uo},isMatch:function(){return er},isNegative:function(){return po},isNil:function(){return C},isNull:function(){return yo},isNumber:function(){return za},isNumberEqual:function(){return rs},isObject:function(){return Lt},isObjectLike:function(){return xn},isOdd:function(){return ni},isPlainObject:function(){return xr},isPointInPolygon:function(){return Mu},isPointInStroke:function(){return bn},isPolygonsIntersect:function(){return zs},isPositive:function(){return fo},isPrototype:function(){return h},isRegExp:function(){return Mt},isString:function(){return wa},isType:function(){return mt},isUndefined:function(){return qt},keys:function(){return Ze},last:function(){return vo},lowerCase:function(){return _n},lowerFirst:function(){return qa},map:function(){return Fs},mapValues:function(){return vu},max:function(){return vn},maxBy:function(){return Xa},memoize:function(){return ra},min:function(){return Wn},minBy:function(){return go},mix:function(){return mr},mod:function(){return Hi},noop:function(){return Ec},normalizePath:function(){return ee},number2color:function(){return vi},omit:function(){return Zc},parseRadius:function(){return ua},path2Absolute:function(){return ae},path2Curve:function(){return Qe},path2String:function(){return nt},pick:function(){return kf},pull:function(){return xa},pullAt:function(){return ti},reduce:function(){return Vi},remove:function(){return io},requestAnimationFrame:function(){return De},reverseCurve:function(){return lr},rgb2arr:function(){return m},set:function(){return bc},size:function(){return pu},some:function(){return Ge},sortBy:function(){return To},startsWith:function(){return Go},substitute:function(){return Oo},throttle:function(){return Bf},toArray:function(){return ju},toCSSGradient:function(){return k},toDegree:function(){return Ro},toInteger:function(){return ss},toRGB:function(){return p},toRadian:function(){return us},toString:function(){return _r},transform:function(){return j},union:function(){return so},uniq:function(){return ii},uniqueId:function(){return Ff},upperCase:function(){return Rs},upperFirst:function(){return Io},values:function(){return Xe},valuesOfKey:function(){return zo},vertical:function(){return $},wrapBehavior:function(){return qn}});function m(lt){return[parseInt(lt.substr(1,2),16),parseInt(lt.substr(3,2),16),parseInt(lt.substr(5,2),16)]}function R(lt){var It=Math.round(lt).toString(16);return It.length===1?"0"+It:It}function w(lt){return"#"+R(lt[0])+R(lt[1])+R(lt[2])}var M=/rgba?\(([\s.,0-9]+)\)/;function P(){var lt=document.createElement("i");return lt.title="Web Colour Picker",lt.style.display="none",document.body.appendChild(lt),lt}var L;function p(lt){if(lt[0]==="#"&&lt.length===7)return lt;L||(L=P()),L.style.color=lt;var It=document.defaultView.getComputedStyle(L,"").getPropertyValue("color"),jt=M.exec(It),le=jt[1].split(/\s*,\s*/).map(function(Ae){return Number(Ae)});return It=w(le),It}function b(lt,It,jt,le){return lt[le]+(It[le]-lt[le])*jt}function S(lt,It){var jt=isNaN(Number(It))||It<0?0:It>1?1:Number(It),le=lt.length-1,Ae=Math.floor(le*jt),vr=le*jt-Ae,yr=lt[Ae],Zr=Ae===le?yr:lt[Ae+1];return w([b(yr,Zr,vr,0),b(yr,Zr,vr,1),b(yr,Zr,vr,2)])}function x(lt){var It=typeof lt=="string"?lt.split("-"):lt,jt=It.map(function(le){return m(le.indexOf("#")===-1?p(le):le)});return function(le){return S(jt,le)}}var g=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,T=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,E=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function O(lt){return/^[r,R,L,l]{1}[\s]*\(/.test(lt)}function k(lt){if(O(lt)){var It,jt=void 0;if(lt[0]==="l"){var le=g.exec(lt),Ae=+le[1]+90;jt=le[2],It="linear-gradient("+Ae+"deg, "}else if(lt[0]==="r"){It="radial-gradient(";var le=T.exec(lt);jt=le[4]}var vr=jt.match(E);return vr.forEach(function(yr,Zr){var Cn=yr.split(":");It+=Cn[1]+" "+Number(Cn[0])*100+"%",Zr!==vr.length-1&&(It+=", ")}),It+=")",It}return lt}var y=_(935600),l=_(631437);function U(lt,It,jt){var le=[0,0,0,0,0,0,0,0,0];return y.fromTranslation(le,jt),y.multiply(lt,le,It)}function X(lt,It,jt){var le=[0,0,0,0,0,0,0,0,0];return y.fromRotation(le,jt),y.multiply(lt,le,It)}function F(lt,It,jt){var le=[0,0,0,0,0,0,0,0,0];return y.fromScaling(le,jt),y.multiply(lt,le,It)}function W(lt,It,jt){return y.multiply(lt,jt,It)}function j(lt,It){for(var jt=lt?[].concat(lt):[1,0,0,0,1,0,0,0,1],le=0,Ae=It.length;le<Ae;le++){var vr=It[le];switch(vr[0]){case"t":U(jt,jt,[vr[1],vr[2]]);break;case"s":F(jt,jt,[vr[1],vr[2]]);break;case"r":X(jt,jt,vr[1]);break;case"m":W(jt,jt,vr[1]);break;default:break}}return jt}function V(lt,It){return lt[0]*It[1]-It[0]*lt[1]}function q(lt,It,jt){var le=l.angle(lt,It),Ae=V(lt,It)>=0;return jt?Ae?Math.PI*2-le:le:Ae?le:Math.PI*2-le}function $(lt,It,jt){return jt?(lt[0]=It[1],lt[1]=-1*It[0]):(lt[0]=-1*It[1],lt[1]=It[0]),lt}function J(lt){return lt.map(function(It){return Array.isArray(It)?[].concat(It):It})}function ut(lt,It){if(It==="off")return J(lt);var jt=typeof It=="number"&&It>=1?Math.pow(10,It):1;return lt.map(function(le){var Ae=le.slice(1).map(Number).map(function(vr){return It?Math.round(vr*jt)/jt:Math.round(vr)});return[le[0]].concat(Ae)})}function nt(lt,It){return It===void 0&&(It="off"),ut(lt,It).map(function(jt){return jt[0]+jt.slice(1).join(" ")}).join("")}var yt=_(197582),dt={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function Ft(lt,It,jt){if(lt[jt].length>7){lt[jt].shift();for(var le=lt[jt],Ae=jt;le.length;)It[jt]="A",lt.splice(Ae+=1,0,["C"].concat(le.splice(0,6)));lt.splice(jt,1)}}var wt={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function St(lt){return Array.isArray(lt)&&lt.every(function(It){var jt=It[0].toLowerCase();return wt[jt]===It.length-1&&"achlmqstvz".includes(jt)})}function et(lt){return St(lt)&&lt.every(function(It){var jt=It[0];return jt===jt.toUpperCase()})}function it(lt){return et(lt)&&lt.every(function(It){var jt=It[0];return"ACLMQZ".includes(jt)})}function Tt(lt){for(var It=lt.pathValue[lt.segmentStart],jt=It.toLowerCase(),le=lt.data;le.length>=wt[jt]&&(jt==="m"&&le.length>2?(lt.segments.push([It].concat(le.splice(0,2))),jt="l",It=It==="m"?"l":"L"):lt.segments.push([It].concat(le.splice(0,wt[jt]))),!!wt[jt]););}function Nt(lt){var It=lt.index,jt=lt.pathValue,le=jt.charCodeAt(It);if(le===48){lt.param=0,lt.index+=1;return}if(le===49){lt.param=1,lt.index+=1;return}lt.err='[path-util]: invalid Arc flag "'+jt[It]+'", expecting 0 or 1 at index '+It}function st(lt){return lt>=48&&lt<=57||lt===43||lt===45||lt===46}function xt(lt){return lt>=48&&lt<=57}function zt(lt){var It=lt.max,jt=lt.pathValue,le=lt.index,Ae=le,vr=!1,yr=!1,Zr=!1,Cn=!1,An;if(Ae>=It){lt.err="[path-util]: Invalid path value at index "+Ae+', "pathValue" is missing param';return}if(An=jt.charCodeAt(Ae),(An===43||An===45)&&(Ae+=1,An=jt.charCodeAt(Ae)),!xt(An)&&An!==46){lt.err="[path-util]: Invalid path value at index "+Ae+', "'+jt[Ae]+'" is not a number';return}if(An!==46){if(vr=An===48,Ae+=1,An=jt.charCodeAt(Ae),vr&&Ae<It&&An&&xt(An)){lt.err="[path-util]: Invalid path value at index "+le+', "'+jt[le]+'" illegal number';return}for(;Ae<It&&xt(jt.charCodeAt(Ae));)Ae+=1,yr=!0;An=jt.charCodeAt(Ae)}if(An===46){for(Cn=!0,Ae+=1;xt(jt.charCodeAt(Ae));)Ae+=1,Zr=!0;An=jt.charCodeAt(Ae)}if(An===101||An===69){if(Cn&&!yr&&!Zr){lt.err="[path-util]: Invalid path value at index "+Ae+', "'+jt[Ae]+'" invalid float exponent';return}if(Ae+=1,An=jt.charCodeAt(Ae),(An===43||An===45)&&(Ae+=1),Ae<It&&xt(jt.charCodeAt(Ae)))for(;Ae<It&&xt(jt.charCodeAt(Ae));)Ae+=1;else{lt.err="[path-util]: Invalid path value at index "+Ae+', "'+jt[Ae]+'" invalid integer exponent';return}}lt.index=Ae,lt.param=+lt.pathValue.slice(le,Ae)}function Wt(lt){var It=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return lt===10||lt===13||lt===8232||lt===8233||lt===32||lt===9||lt===11||lt===12||lt===160||lt>=5760&&It.includes(lt)}function _t(lt){for(var It=lt.pathValue,jt=lt.max;lt.index<jt&&Wt(It.charCodeAt(lt.index));)lt.index+=1}function Xt(lt){switch(lt|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function te(lt){return(lt|32)===97}function ue(lt){var It=lt.max,jt=lt.pathValue,le=lt.index,Ae=jt.charCodeAt(le),vr=wt[jt[le].toLowerCase()];if(lt.segmentStart=le,!Xt(Ae)){lt.err='[path-util]: Invalid path value "'+jt[le]+'" is not a path command';return}if(lt.index+=1,_t(lt),lt.data=[],!vr){Tt(lt);return}for(;;){for(var yr=vr;yr>0;yr-=1){if(te(Ae)&&(yr===3||yr===4)?Nt(lt):zt(lt),lt.err.length)return;lt.data.push(lt.param),_t(lt),lt.index<It&&jt.charCodeAt(lt.index)===44&&(lt.index+=1,_t(lt))}if(lt.index>=lt.max||!st(jt.charCodeAt(lt.index)))break}Tt(lt)}var fe=function(){function lt(It){this.pathValue=It,this.segments=[],this.max=It.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return lt}();function Gt(lt){if(St(lt))return J(lt);var It=new fe(lt);for(_t(It);It.index<It.max&&!It.err.length;)ue(It);return It.err?It.err:It.segments}function ae(lt){if(et(lt))return J(lt);var It=Gt(lt),jt=0,le=0,Ae=0,vr=0;return It.map(function(yr){var Zr=yr.slice(1).map(Number),Cn=yr[0],An=Cn.toUpperCase();if(Cn==="M")return jt=Zr[0],le=Zr[1],Ae=jt,vr=le,["M",jt,le];var Vn;if(Cn!==An)switch(An){case"A":Vn=[An,Zr[0],Zr[1],Zr[2],Zr[3],Zr[4],Zr[5]+jt,Zr[6]+le];break;case"V":Vn=[An,Zr[0]+le];break;case"H":Vn=[An,Zr[0]+jt];break;default:{var aa=Zr.map(function(La,Qa){return La+(Qa%2?le:jt)});Vn=[An].concat(aa)}}else Vn=[An].concat(Zr);var Zn=Vn.length;switch(An){case"Z":jt=Ae,le=vr;break;case"H":jt=Vn[1];break;case"V":le=Vn[1];break;default:jt=Vn[Zn-2],le=Vn[Zn-1],An==="M"&&(Ae=jt,vr=le)}return Vn})}function Ne(lt,It){var jt=lt[0],le=It.x1,Ae=It.y1,vr=It.x2,yr=It.y2,Zr=lt.slice(1).map(Number),Cn=lt;if("TQ".includes(jt)||(It.qx=null,It.qy=null),jt==="H")Cn=["L",lt[1],Ae];else if(jt==="V")Cn=["L",le,lt[1]];else if(jt==="S"){var An=le*2-vr,Vn=Ae*2-yr;It.x1=An,It.y1=Vn,Cn=["C",An,Vn].concat(Zr)}else if(jt==="T"){var aa=le*2-It.qx,Zn=Ae*2-It.qy;It.qx=aa,It.qy=Zn,Cn=["Q",aa,Zn].concat(Zr)}else if(jt==="Q"){var La=Zr[0],Qa=Zr[1];It.qx=La,It.qy=Qa}return Cn}function ee(lt){if(it(lt))return J(lt);for(var It=ae(lt),jt=(0,yt.__assign)({},dt),le=0;le<It.length;le+=1){It[le]=Ne(It[le],jt);var Ae=It[le],vr=Ae.length;jt.x1=+Ae[vr-2],jt.y1=+Ae[vr-1],jt.x2=+Ae[vr-4]||jt.x1,jt.y2=+Ae[vr-3]||jt.y1}return It}function de(lt){return it(lt)&&lt.every(function(It){var jt=It[0];return"MC".includes(jt)})}function ze(lt,It,jt){var le=lt*Math.cos(jt)-It*Math.sin(jt),Ae=lt*Math.sin(jt)+It*Math.cos(jt);return{x:le,y:Ae}}function be(lt,It,jt,le,Ae,vr,yr,Zr,Cn,An){var Vn=lt,aa=It,Zn=jt,La=le,Qa=Zr,ka=Cn,Ca=Math.PI*120/180,Wa=Math.PI/180*(+Ae||0),va=[],Ka,Ya,ma,ai,bi;if(An)Ya=An[0],ma=An[1],ai=An[2],bi=An[3];else{Ka=ze(Vn,aa,-Wa),Vn=Ka.x,aa=Ka.y,Ka=ze(Qa,ka,-Wa),Qa=Ka.x,ka=Ka.y;var Di=(Vn-Qa)/2,xi=(aa-ka)/2,li=Di*Di/(Zn*Zn)+xi*xi/(La*La);li>1&&(li=Math.sqrt(li),Zn*=li,La*=li);var co=Zn*Zn,Mo=La*La,lo=(vr===yr?-1:1)*Math.sqrt(Math.abs((co*Mo-co*xi*xi-Mo*Di*Di)/(co*xi*xi+Mo*Di*Di)));ai=lo*Zn*xi/La+(Vn+Qa)/2,bi=lo*-La*Di/Zn+(aa+ka)/2,Ya=Math.asin(((aa-bi)/La*Math.pow(10,9)>>0)/Math.pow(10,9)),ma=Math.asin(((ka-bi)/La*Math.pow(10,9)>>0)/Math.pow(10,9)),Ya=Vn<ai?Math.PI-Ya:Ya,ma=Qa<ai?Math.PI-ma:ma,Ya<0&&(Ya=Math.PI*2+Ya),ma<0&&(ma=Math.PI*2+ma),yr&&Ya>ma&&(Ya-=Math.PI*2),!yr&&ma>Ya&&(ma-=Math.PI*2)}var Gs=ma-Ya;if(Math.abs(Gs)>Ca){var qs=ma,Us=Qa,au=ka;ma=Ya+Ca*(yr&&ma>Ya?1:-1),Qa=ai+Zn*Math.cos(ma),ka=bi+La*Math.sin(ma),va=be(Qa,ka,Zn,La,Ae,0,yr,Us,au,[ma,qs,ai,bi])}Gs=ma-Ya;var _u=Math.cos(Ya),Hs=Math.sin(Ya),Wf=Math.cos(ma),Yf=Math.sin(ma),Cu=Math.tan(Gs/4),ff=4/3*Zn*Cu,Xf=4/3*La*Cu,Hu=[Vn,aa],Tu=[Vn+ff*Hs,aa-Xf*_u],cf=[Qa+ff*Yf,ka-Xf*Wf],Zu=[Qa,ka];if(Tu[0]=2*Hu[0]-Tu[0],Tu[1]=2*Hu[1]-Tu[1],An)return Tu.concat(cf,Zu,va);va=Tu.concat(cf,Zu,va);for(var lf=[],Qs=0,Js=va.length;Qs<Js;Qs+=1)lf[Qs]=Qs%2?ze(va[Qs-1],va[Qs],Wa).y:ze(va[Qs],va[Qs+1],Wa).x;return lf}function ke(lt,It,jt,le,Ae,vr){var yr=.3333333333333333,Zr=2/3;return[yr*lt+Zr*jt,yr*It+Zr*le,yr*Ae+Zr*jt,yr*vr+Zr*le,Ae,vr]}function he(lt,It,jt){var le=lt[0],Ae=lt[1],vr=It[0],yr=It[1];return[le+(vr-le)*jt,Ae+(yr-Ae)*jt]}function vt(lt,It){return Math.sqrt((lt[0]-It[0])*(lt[0]-It[0])+(lt[1]-It[1])*(lt[1]-It[1]))}function ie(lt,It,jt,le,Ae){var vr=vt([lt,It],[jt,le]),yr={x:0,y:0};if(typeof Ae=="number")if(Ae<=0)yr={x:lt,y:It};else if(Ae>=vr)yr={x:jt,y:le};else{var Zr=he([lt,It],[jt,le],Ae/vr),Cn=Zr[0],An=Zr[1];yr={x:Cn,y:An}}return{length:vr,point:yr,min:{x:Math.min(lt,jt),y:Math.min(It,le)},max:{x:Math.max(lt,jt),y:Math.max(It,le)}}}function Pe(lt,It,jt,le){var Ae=.5,vr=[lt,It],yr=[jt,le],Zr=he(vr,yr,Ae),Cn=he(yr,Zr,Ae),An=he(Zr,Cn,Ae),Vn=he(Cn,An,Ae),aa=he(An,Vn,Ae),Zn=ie(vr[0],vr[1],Zr[0],Zr[1],An[0]).point,La=ie(aa[0],aa[1],Vn[0],Vn[1],Cn[0]).point;return[Zn.x,Zn.y,La.x,La.y,jt,le]}function qe(lt,It){var jt=lt[0],le=lt.slice(1).map(Number),Ae=le[0],vr=le[1],yr,Zr=It.x1,Cn=It.y1,An=It.x,Vn=It.y;switch("TQ".includes(jt)||(It.qx=null,It.qy=null),jt){case"M":return It.x=Ae,It.y=vr,lt;case"A":return yr=[Zr,Cn].concat(le),["C"].concat(be(yr[0],yr[1],yr[2],yr[3],yr[4],yr[5],yr[6],yr[7],yr[8],yr[9]));case"Q":return It.qx=Ae,It.qy=vr,yr=[Zr,Cn].concat(le),["C"].concat(ke(yr[0],yr[1],yr[2],yr[3],yr[4],yr[5]));case"L":return["C"].concat(Pe(Zr,Cn,Ae,vr));case"Z":return Zr===An&&Cn===Vn?["C",Zr,Cn,An,Vn,An,Vn]:["C"].concat(Pe(Zr,Cn,An,Vn));default:}return lt}function Qe(lt,It){if(It===void 0&&(It=!1),de(lt)){var jt=J(lt);return It?[jt,[]]:jt}for(var le=ee(lt),Ae=(0,yt.__assign)({},dt),vr=[],yr="",Zr=le.length,Cn,An,Vn=[],aa=0;aa<Zr;aa+=1){le[aa]&&(yr=le[aa][0]),vr[aa]=yr;var Zn=qe(le[aa],Ae);le[aa]=Zn,Ft(le,vr,aa),Zr=le.length,yr==="Z"&&Vn.push(aa),Cn=le[aa],An=Cn.length,Ae.x1=+Cn[An-2],Ae.y1=+Cn[An-1],Ae.x2=+Cn[An-4]||Ae.x1,Ae.y2=+Cn[An-3]||Ae.y1}return It?[le,Vn]:le}function lr(lt){var It=lt.slice(1).map(function(jt,le,Ae){return le?Ae[le-1].slice(-2).concat(jt.slice(1)):lt[0].slice(1).concat(jt.slice(1))}).map(function(jt){return jt.map(function(le,Ae){return jt[jt.length-Ae-2*(1-Ae%2)]})}).reverse();return[["M"].concat(It[0].slice(0,2))].concat(It.map(function(jt){return["C"].concat(jt.slice(2))}))}function fr(lt,It){var jt=lt.x,le=lt.y,Ae=It.x,vr=It.y,yr=jt*Ae+le*vr,Zr=Math.sqrt((Math.pow(jt,2)+Math.pow(le,2))*(Math.pow(Ae,2)+Math.pow(vr,2))),Cn=jt*vr-le*Ae<0?-1:1,An=Cn*Math.acos(yr/Zr);return An}function kr(lt,It,jt,le,Ae,vr,yr,Zr,Cn,An){var Vn=Math.abs,aa=Math.sin,Zn=Math.cos,La=Math.sqrt,Qa=Math.PI,ka=Vn(jt),Ca=Vn(le),Wa=(Ae%360+360)%360,va=Wa*(Qa/180);if(lt===Zr&&It===Cn)return{x:lt,y:It};if(ka===0||Ca===0)return ie(lt,It,Zr,Cn,An).point;var Ka=(lt-Zr)/2,Ya=(It-Cn)/2,ma={x:Zn(va)*Ka+aa(va)*Ya,y:-aa(va)*Ka+Zn(va)*Ya},ai=Math.pow(ma.x,2)/Math.pow(ka,2)+Math.pow(ma.y,2)/Math.pow(Ca,2);ai>1&&(ka*=La(ai),Ca*=La(ai));var bi=Math.pow(ka,2)*Math.pow(Ca,2)-Math.pow(ka,2)*Math.pow(ma.y,2)-Math.pow(Ca,2)*Math.pow(ma.x,2),Di=Math.pow(ka,2)*Math.pow(ma.y,2)+Math.pow(Ca,2)*Math.pow(ma.x,2),xi=bi/Di;xi=xi<0?0:xi;var li=(vr!==yr?1:-1)*La(xi),co={x:li*(ka*ma.y/Ca),y:li*(-(Ca*ma.x)/ka)},Mo={x:Zn(va)*co.x-aa(va)*co.y+(lt+Zr)/2,y:aa(va)*co.x+Zn(va)*co.y+(It+Cn)/2},lo={x:(ma.x-co.x)/ka,y:(ma.y-co.y)/Ca},Gs=fr({x:1,y:0},lo),qs={x:(-ma.x-co.x)/ka,y:(-ma.y-co.y)/Ca},Us=fr(lo,qs);!yr&&Us>0?Us-=2*Qa:yr&&Us<0&&(Us+=2*Qa),Us%=2*Qa;var au=Gs+Us*An,_u=ka*Zn(au),Hs=Ca*aa(au),Wf={x:Zn(va)*_u-aa(va)*Hs+Mo.x,y:aa(va)*_u+Zn(va)*Hs+Mo.y};return Wf}function En(lt,It,jt,le,Ae,vr,yr,Zr,Cn,An,Vn){var aa,Zn=Vn.bbox,La=Zn===void 0?!0:Zn,Qa=Vn.length,ka=Qa===void 0?!0:Qa,Ca=Vn.sampleSize,Wa=Ca===void 0?30:Ca,va=typeof An=="number",Ka=lt,Ya=It,ma=0,ai=[Ka,Ya,ma],bi=[Ka,Ya],Di=0,xi={x:0,y:0},li=[{x:Ka,y:Ya}];va&&An<=0&&(xi={x:Ka,y:Ya});for(var co=0;co<=Wa;co+=1){if(Di=co/Wa,aa=kr(lt,It,jt,le,Ae,vr,yr,Zr,Cn,Di),Ka=aa.x,Ya=aa.y,La&&li.push({x:Ka,y:Ya}),ka&&(ma+=vt(bi,[Ka,Ya])),bi=[Ka,Ya],va&&ma>=An&&An>ai[2]){var Mo=(ma-An)/(ma-ai[2]);xi={x:bi[0]*(1-Mo)+ai[0]*Mo,y:bi[1]*(1-Mo)+ai[1]*Mo}}ai=[Ka,Ya,ma]}return va&&An>=ma&&(xi={x:Zr,y:Cn}),{length:ma,point:xi,min:{x:Math.min.apply(null,li.map(function(lo){return lo.x})),y:Math.min.apply(null,li.map(function(lo){return lo.y}))},max:{x:Math.max.apply(null,li.map(function(lo){return lo.x})),y:Math.max.apply(null,li.map(function(lo){return lo.y}))}}}function fn(lt,It,jt,le,Ae,vr,yr,Zr,Cn){var An=1-Cn;return{x:Math.pow(An,3)*lt+3*Math.pow(An,2)*Cn*jt+3*An*Math.pow(Cn,2)*Ae+Math.pow(Cn,3)*yr,y:Math.pow(An,3)*It+3*Math.pow(An,2)*Cn*le+3*An*Math.pow(Cn,2)*vr+Math.pow(Cn,3)*Zr}}function Vr(lt,It,jt,le,Ae,vr,yr,Zr,Cn,An){var Vn,aa=An.bbox,Zn=aa===void 0?!0:aa,La=An.length,Qa=La===void 0?!0:La,ka=An.sampleSize,Ca=ka===void 0?10:ka,Wa=typeof Cn=="number",va=lt,Ka=It,Ya=0,ma=[va,Ka,Ya],ai=[va,Ka],bi=0,Di={x:0,y:0},xi=[{x:va,y:Ka}];Wa&&Cn<=0&&(Di={x:va,y:Ka});for(var li=0;li<=Ca;li+=1){if(bi=li/Ca,Vn=fn(lt,It,jt,le,Ae,vr,yr,Zr,bi),va=Vn.x,Ka=Vn.y,Zn&&xi.push({x:va,y:Ka}),Qa&&(Ya+=vt(ai,[va,Ka])),ai=[va,Ka],Wa&&Ya>=Cn&&Cn>ma[2]){var co=(Ya-Cn)/(Ya-ma[2]);Di={x:ai[0]*(1-co)+ma[0]*co,y:ai[1]*(1-co)+ma[1]*co}}ma=[va,Ka,Ya]}return Wa&&Cn>=Ya&&(Di={x:yr,y:Zr}),{length:Ya,point:Di,min:{x:Math.min.apply(null,xi.map(function(Mo){return Mo.x})),y:Math.min.apply(null,xi.map(function(Mo){return Mo.y}))},max:{x:Math.max.apply(null,xi.map(function(Mo){return Mo.x})),y:Math.max.apply(null,xi.map(function(Mo){return Mo.y}))}}}function Je(lt,It,jt,le,Ae,vr,yr){var Zr=1-yr;return{x:Math.pow(Zr,2)*lt+2*Zr*yr*jt+Math.pow(yr,2)*Ae,y:Math.pow(Zr,2)*It+2*Zr*yr*le+Math.pow(yr,2)*vr}}function dr(lt,It,jt,le,Ae,vr,yr,Zr){var Cn,An=Zr.bbox,Vn=An===void 0?!0:An,aa=Zr.length,Zn=aa===void 0?!0:aa,La=Zr.sampleSize,Qa=La===void 0?10:La,ka=typeof yr=="number",Ca=lt,Wa=It,va=0,Ka=[Ca,Wa,va],Ya=[Ca,Wa],ma=0,ai={x:0,y:0},bi=[{x:Ca,y:Wa}];ka&&yr<=0&&(ai={x:Ca,y:Wa});for(var Di=0;Di<=Qa;Di+=1){if(ma=Di/Qa,Cn=Je(lt,It,jt,le,Ae,vr,ma),Ca=Cn.x,Wa=Cn.y,Vn&&bi.push({x:Ca,y:Wa}),Zn&&(va+=vt(Ya,[Ca,Wa])),Ya=[Ca,Wa],ka&&va>=yr&&yr>Ka[2]){var xi=(va-yr)/(va-Ka[2]);ai={x:Ya[0]*(1-xi)+Ka[0]*xi,y:Ya[1]*(1-xi)+Ka[1]*xi}}Ka=[Ca,Wa,va]}return ka&&yr>=va&&(ai={x:Ae,y:vr}),{length:va,point:ai,min:{x:Math.min.apply(null,bi.map(function(li){return li.x})),y:Math.min.apply(null,bi.map(function(li){return li.y}))},max:{x:Math.max.apply(null,bi.map(function(li){return li.x})),y:Math.max.apply(null,bi.map(function(li){return li.y}))}}}function nr(lt,It,jt){for(var le,Ae,vr,yr,Zr,Cn,An=ee(lt),Vn=typeof It=="number",aa,Zn=[],La,Qa=0,ka=0,Ca=0,Wa=0,va,Ka=[],Ya=[],ma=0,ai={x:0,y:0},bi=ai,Di=ai,xi=ai,li=0,co=0,Mo=An.length;co<Mo;co+=1)va=An[co],La=va[0],aa=La==="M",Zn=aa?Zn:[Qa,ka].concat(va.slice(1)),aa?(Ca=va[1],Wa=va[2],ai={x:Ca,y:Wa},bi=ai,ma=0,Vn&&It<.001&&(xi=ai)):La==="L"?(le=ie(Zn[0],Zn[1],Zn[2],Zn[3],(It||0)-li),ma=le.length,ai=le.min,bi=le.max,Di=le.point):La==="A"?(Ae=En(Zn[0],Zn[1],Zn[2],Zn[3],Zn[4],Zn[5],Zn[6],Zn[7],Zn[8],(It||0)-li,jt||{}),ma=Ae.length,ai=Ae.min,bi=Ae.max,Di=Ae.point):La==="C"?(vr=Vr(Zn[0],Zn[1],Zn[2],Zn[3],Zn[4],Zn[5],Zn[6],Zn[7],(It||0)-li,jt||{}),ma=vr.length,ai=vr.min,bi=vr.max,Di=vr.point):La==="Q"?(yr=dr(Zn[0],Zn[1],Zn[2],Zn[3],Zn[4],Zn[5],(It||0)-li,jt||{}),ma=yr.length,ai=yr.min,bi=yr.max,Di=yr.point):La==="Z"&&(Zn=[Qa,ka,Ca,Wa],Zr=ie(Zn[0],Zn[1],Zn[2],Zn[3],(It||0)-li),ma=Zr.length,ai=Zr.min,bi=Zr.max,Di=Zr.point),Vn&&li<It&&li+ma>=It&&(xi=Di),Ya.push(bi),Ka.push(ai),li+=ma,Cn=La!=="Z"?va.slice(-2):[Ca,Wa],Qa=Cn[0],ka=Cn[1];return Vn&&It>=li&&(xi={x:Qa,y:ka}),{length:li,point:xi,min:{x:Math.min.apply(null,Ka.map(function(lo){return lo.x})),y:Math.min.apply(null,Ka.map(function(lo){return lo.y}))},max:{x:Math.max.apply(null,Ya.map(function(lo){return lo.x})),y:Math.max.apply(null,Ya.map(function(lo){return lo.y}))}}}function oe(lt,It){if(!lt)return{x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var jt=nr(lt,void 0,(0,yt.__assign)((0,yt.__assign)({},It),{length:!1})),le=jt.min,Ae=le.x,vr=le.y,yr=jt.max,Zr=yr.x,Cn=yr.y,An=Zr-Ae,Vn=Cn-vr;return{width:An,height:Vn,x:Ae,y:vr,x2:Zr,y2:Cn,cx:Ae+An/2,cy:vr+Vn/2,cz:Math.max(An,Vn)+Math.min(An,Vn)/2}}function Te(lt,It){return nr(lt,void 0,(0,yt.__assign)((0,yt.__assign)({},It),{bbox:!1,length:!0})).length}function Lr(lt,It){if(!lt)return{length:0,x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var jt=nr(lt,void 0,(0,yt.__assign)((0,yt.__assign)({},It),{bbox:!0,length:!0})),le=jt.length,Ae=jt.min,vr=Ae.x,yr=Ae.y,Zr=jt.max,Cn=Zr.x,An=Zr.y,Vn=Cn-vr,aa=An-yr;return{length:le,width:Vn,height:aa,x:vr,y:yr,x2:Cn,y2:An,cx:vr+Vn/2,cy:yr+aa/2,cz:Math.max(Vn,aa)+Math.min(Vn,aa)/2}}function Nr(lt){var It=lt.length,jt=It-1;return lt.map(function(le,Ae){return lt.map(function(vr,yr){var Zr=Ae+yr,Cn;return yr===0||lt[Zr]&&lt[Zr][0]==="M"?(Cn=lt[Zr],["M"].concat(Cn.slice(-2))):(Zr>=It&&(Zr-=jt),lt[Zr])})})}function ln(lt,It){var jt=lt.length-1,le=[],Ae=0,vr=0,yr=Nr(lt);return yr.forEach(function(Zr,Cn){lt.slice(1).forEach(function(An,Vn){vr+=vt(lt[(Cn+Vn)%jt].slice(-2),It[Vn%jt].slice(-2))}),le[Cn]=vr,vr=0}),Ae=le.indexOf(Math.min.apply(null,le)),yr[Ae]}function en(lt,It,jt,le,Ae,vr,yr,Zr){return 3*((Zr-It)*(jt+Ae)-(yr-lt)*(le+vr)+le*(lt-Ae)-jt*(It-vr)+Zr*(Ae+lt/3)-yr*(vr+It/3))/20}function Dr(lt){var It=0,jt=0,le=0;return Qe(lt).map(function(Ae){var vr;switch(Ae[0]){case"M":return It=Ae[1],jt=Ae[2],0;default:var yr=Ae.slice(1),Zr=yr[0],Cn=yr[1],An=yr[2],Vn=yr[3],aa=yr[4],Zn=yr[5];return le=en(It,jt,Zr,Cn,An,Vn,aa,Zn),vr=Ae.slice(-2),It=vr[0],jt=vr[1],le}}).reduce(function(Ae,vr){return Ae+vr},0)}function Fr(lt){return Dr(lt)>=0}function Kr(lt,It,jt){return nr(lt,It,(0,yt.__assign)((0,yt.__assign)({},jt),{bbox:!1,length:!0})).point}function an(lt,It){var jt=Gt(lt);if(typeof jt=="string")throw TypeError(jt);var le=jt.slice(),Ae=Te(le),vr=le.length-1,yr=0,Zr=0,Cn=jt[0],An=Cn.slice(-2),Vn=An[0],aa=An[1],Zn={x:Vn,y:aa};if(vr<=0||!It||!Number.isFinite(It))return{segment:Cn,index:0,length:Zr,point:Zn,lengthAtSegment:yr};if(It>=Ae)return le=jt.slice(0,-1),yr=Te(le),Zr=Ae-yr,{segment:jt[vr],index:vr,length:Zr,lengthAtSegment:yr};for(var La=[];vr>0;)Cn=le[vr],le=le.slice(0,-1),yr=Te(le),Zr=Ae-yr,Ae=yr,La.push({segment:Cn,index:vr,length:Zr,lengthAtSegment:yr}),vr-=1;return La.find(function(Qa){var ka=Qa.lengthAtSegment;return ka<=It})}function yn(lt,It){for(var jt=Gt(lt),le=ee(jt),Ae=Te(jt),vr=function(ma){var ai=ma.x-It.x,bi=ma.y-It.y;return ai*ai+bi*bi},yr=8,Zr,Cn=0,An,Vn=0,aa=1/0,Zn=0;Zn<=Ae;Zn+=yr)Zr=Kr(le,Zn),Cn=vr(Zr),Cn<aa&&(An=Zr,Vn=Zn,aa=Cn);yr/=2;for(var La,Qa,ka=0,Ca=0,Wa=0,va=0;yr>.5;)ka=Vn-yr,La=Kr(le,ka),Wa=vr(La),Ca=Vn+yr,Qa=Kr(le,Ca),va=vr(Qa),ka>=0&&Wa<aa?(An=La,Vn=ka,aa=Wa):Ca<=Ae&&va<aa?(An=Qa,Vn=Ca,aa=va):yr/=2;var Ka=an(jt,Vn),Ya=Math.sqrt(aa);return{closest:An,distance:Ya,segment:Ka}}function bn(lt,It){var jt=yn(lt,It).distance;return Math.abs(jt)<.001}function tt(lt,It){It===void 0&&(It=.5);var jt=lt.slice(0,2),le=lt.slice(2,4),Ae=lt.slice(4,6),vr=lt.slice(6,8),yr=he(jt,le,It),Zr=he(le,Ae,It),Cn=he(Ae,vr,It),An=he(yr,Zr,It),Vn=he(Zr,Cn,It),aa=he(An,Vn,It);return[["C"].concat(yr,An,aa),["C"].concat(Vn,Cn,vr)]}function tr(lt){return lt.map(function(It,jt,le){var Ae=jt&&le[jt-1].slice(-2).concat(It.slice(1)),vr=jt?Vr(Ae[0],Ae[1],Ae[2],Ae[3],Ae[4],Ae[5],Ae[6],Ae[7],Ae[8],{bbox:!1}).length:0,yr;return jt?yr=vr?tt(Ae):[It,It]:yr=[It],{s:It,ss:yr,l:vr}})}function Kt(lt,It,jt){var le=tr(lt),Ae=tr(It),vr=le.length,yr=Ae.length,Zr=le.filter(function(Ca){return Ca.l}).length,Cn=Ae.filter(function(Ca){return Ca.l}).length,An=le.filter(function(Ca){return Ca.l}).reduce(function(Ca,Wa){var va=Wa.l;return Ca+va},0)/Zr||0,Vn=Ae.filter(function(Ca){return Ca.l}).reduce(function(Ca,Wa){var va=Wa.l;return Ca+va},0)/Cn||0,aa=jt||Math.max(vr,yr),Zn=[An,Vn],La=[aa-vr,aa-yr],Qa=0,ka=[le,Ae].map(function(Ca,Wa){return Ca.l===aa?Ca.map(function(va){return va.s}):Ca.map(function(va,Ka){return Qa=Ka&&La[Wa]&&va.l>=Zn[Wa],La[Wa]-=Qa?1:0,Qa?va.ss:[va.s]}).flat()});return ka[0].length===ka[1].length?ka:Kt(ka[0],ka[1],aa)}var $t=function(lt){return lt!==null&&typeof lt!="function"&&isFinite(lt.length)},Et=$t,we=function(lt,It){return Et(lt)?lt.indexOf(It)>-1:!1},Dt=we,Vt=function(lt,It){if(!Et(lt))return lt;for(var jt=[],le=0;le<lt.length;le++){var Ae=lt[le];It(Ae,le)&&jt.push(Ae)}return jt},ht=Vt,kt=function(lt,It){return It===void 0&&(It=[]),ht(lt,function(jt){return!Dt(It,jt)})},Q=kt,at=function(lt){return typeof lt=="function"},B=function(lt){return lt==null},C=B,I={}.toString,H=function(lt,It){return I.call(lt)==="[object "+It+"]"},mt=H,Pt=function(lt){return Array.isArray?Array.isArray(lt):mt(lt,"Array")},Lt=function(lt){var It=typeof lt;return lt!==null&&It==="object"||It==="function"};function Jt(lt,It){if(lt){var jt;if(Pt(lt))for(var le=0,Ae=lt.length;le<Ae&&(jt=It(lt[le],le),jt!==!1);le++);else if(Lt(lt)){for(var vr in lt)if(lt.hasOwnProperty(vr)&&(jt=It(lt[vr],vr),jt===!1))break}}}var Oe=Jt,ye=Object.keys?function(lt){return Object.keys(lt)}:function(lt){var It=[];return Oe(lt,function(jt,le){at(lt)&&le==="prototype"||It.push(le)}),It},Ze=ye;function wr(lt,It){var jt=Ze(It),le=jt.length;if(C(lt))return!le;for(var Ae=0;Ae<le;Ae+=1){var vr=jt[Ae];if(It[vr]!==lt[vr]||!(vr in lt))return!1}return!0}var er=wr,Ur=function(lt){return typeof lt=="object"&&lt!==null},xn=Ur,rr=function(lt){if(!xn(lt)||!mt(lt,"Object"))return!1;if(Object.getPrototypeOf(lt)===null)return!0;for(var It=lt;Object.getPrototypeOf(It)!==null;)It=Object.getPrototypeOf(It);return Object.getPrototypeOf(lt)===It},xr=rr;function Wr(lt,It){if(!Pt(lt))return null;var jt;if(at(It)&&(jt=It),xr(It)&&(jt=function(Ae){return er(Ae,It)}),jt){for(var le=0;le<lt.length;le+=1)if(jt(lt[le]))return lt[le]}return null}var Gr=Wr;function ce(lt,It,jt){jt===void 0&&(jt=0);for(var le=jt;le<lt.length;le++)if(It(lt[le],le))return le;return-1}var Yt=ce,ge=function(lt,It){for(var jt=null,le=0;le<lt.length;le++){var Ae=lt[le],vr=Ae[It];if(!C(vr)){Pt(vr)?jt=vr[0]:jt=vr;break}}return jt},Ie=ge,xe=function(lt){if(!Pt(lt))return[];for(var It=[],jt=0;jt<lt.length;jt++)It=It.concat(lt[jt]);return It},Ye=xe,gr=function(lt,It){if(It===void 0&&(It=[]),!Pt(lt))It.push(lt);else for(var jt=0;jt<lt.length;jt+=1)gr(lt[jt],It);return It},Mr=gr,vn=function(lt){if(Pt(lt))return lt.reduce(function(It,jt){return Math.max(It,jt)},lt[0])},Wn=function(lt){if(Pt(lt))return lt.reduce(function(It,jt){return Math.min(It,jt)},lt[0])},Sn=function(lt){var It=lt.filter(function(yr){return!isNaN(yr)});if(!It.length)return{min:0,max:0};if(Pt(lt[0])){for(var jt=[],le=0;le<lt.length;le++)jt=jt.concat(lt[le]);It=jt}var Ae=vn(It),vr=Wn(It);return{min:vr,max:Ae}},ea=Sn,wn=Array.prototype,Hn=wn.splice,la=wn.indexOf,ba=function(lt){for(var It=[],jt=1;jt<arguments.length;jt++)It[jt-1]=arguments[jt];for(var le=0;le<It.length;le++)for(var Ae=It[le],vr=-1;(vr=la.call(lt,Ae))>-1;)Hn.call(lt,vr,1);return lt},xa=ba,Yi=Array.prototype.splice,ri=function(It,jt){if(!Et(It))return[];for(var le=It?jt.length:0,Ae=le-1;le--;){var vr=void 0,yr=jt[le];(le===Ae||yr!==vr)&&(vr=yr,Yi.call(It,yr,1))}return It},ti=ri,Mi=function(lt,It,jt){if(!Pt(lt)&&!xr(lt))return lt;var le=jt;return Oe(lt,function(Ae,vr){le=It(le,Ae,vr)}),le},Vi=Mi,ao=function(lt,It){var jt=[];if(!Et(lt))return jt;for(var le=-1,Ae=[],vr=lt.length;++le<vr;){var yr=lt[le];It(yr,le,lt)&&(jt.push(yr),Ae.push(le))}return ti(lt,Ae),jt},io=ao,wa=function(lt){return mt(lt,"String")};function oo(lt,It){var jt;if(at(It))jt=function(Ae,vr){return It(Ae)-It(vr)};else{var le=[];wa(It)?le.push(It):Pt(It)&&(le=It),jt=function(Ae,vr){for(var yr=0;yr<le.length;yr+=1){var Zr=le[yr];if(Ae[Zr]>vr[Zr])return 1;if(Ae[Zr]<vr[Zr])return-1}return 0}}return lt.sort(jt),lt}var To=oo;function ii(lt,It){It===void 0&&(It=new Map);var jt=[];if(Array.isArray(lt))for(var le=0,Ae=lt.length;le<Ae;le++){var vr=lt[le];It.has(vr)||(jt.push(vr),It.set(vr,!0))}return jt}var Xi=function(){for(var lt=[],It=0;It<arguments.length;It++)lt[It]=arguments[It];return ii([].concat.apply([],lt))},so=Xi,zo=function(lt,It){for(var jt=[],le={},Ae=0;Ae<lt.length;Ae++){var vr=lt[Ae],yr=vr[It];if(!C(yr)){Pt(yr)||(yr=[yr]);for(var Zr=0;Zr<yr.length;Zr++){var Cn=yr[Zr];le[Cn]||(jt.push(Cn),le[Cn]=!0)}}}return jt};function ro(lt){if(Et(lt))return lt[0]}function vo(lt){if(Et(lt)){var It=lt;return It[It.length-1]}}function Ao(lt,It){return Pt(lt)||wa(lt)?lt[0]===It:!1}var Go=Ao;function Ai(lt,It){return Pt(lt)||wa(lt)?lt[lt.length-1]===It:!1}var $i=Ai,oa=function(lt,It){for(var jt=0;jt<lt.length;jt++)if(!It(lt[jt],jt))return!1;return!0},Qt=oa,ve=function(lt,It){for(var jt=0;jt<lt.length;jt++)if(It(lt[jt],jt))return!0;return!1},Ge=ve,pr=Object.prototype.hasOwnProperty;function Xr(lt,It){if(!It||!Pt(lt))return{};for(var jt={},le=at(It)?It:function(Zr){return Zr[It]},Ae,vr=0;vr<lt.length;vr++){var yr=lt[vr];Ae=le(yr),pr.call(jt,Ae)?jt[Ae].push(yr):jt[Ae]=[yr]}return jt}var Yr=Xr;function Pr(lt,It){if(!It)return{0:lt};if(!at(It)){var jt=Pt(It)?It:It.replace(/\s+/g,"").split("*");It=function(le){for(var Ae="_",vr=0,yr=jt.length;vr<yr;vr++)Ae+=le[jt[vr]]&&le[jt[vr]].toString();return Ae}}return Yr(lt,It)}var cn=function(lt,It){if(!It)return[lt];var jt=Pr(lt,It),le=[];for(var Ae in jt)le.push(jt[Ae]);return le};function Mn(lt,It){return lt["_wrap_"+It]}var Bn=Mn;function sa(lt,It){if(lt["_wrap_"+It])return lt["_wrap_"+It];var jt=function(le){lt[It](le)};return lt["_wrap_"+It]=jt,jt}var qn=sa,ga={};function ya(lt){var It=ga[lt];if(!It){for(var jt=lt.toString(16),le=jt.length;le<6;le++)jt="0"+jt;It="#"+jt,ga[lt]=It}return It}var vi=ya;function Sa(lt){var It=0,jt=0,le=0,Ae=0;return Pt(lt)?lt.length===1?It=jt=le=Ae=lt[0]:lt.length===2?(It=le=lt[0],jt=Ae=lt[1]):lt.length===3?(It=lt[0],jt=Ae=lt[1],le=lt[2]):(It=lt[0],jt=lt[1],le=lt[2],Ae=lt[3]):It=jt=le=Ae=lt,{r1:It,r2:jt,r3:le,r4:Ae}}var ua=Sa,fi=function(lt,It,jt){return lt<It?It:lt>jt?jt:lt},ei=fi,Ga=function(lt,It){var jt=It.toString(),le=jt.indexOf(".");if(le===-1)return Math.round(lt);var Ae=jt.substr(le+1).length;return Ae>20&&(Ae=20),parseFloat(lt.toFixed(Ae))},Ii=Ga,yi=function(lt){return mt(lt,"Number")},za=yi,Va=function(lt){return za(lt)&&lt%1!==0},Da=Va,Ri=function(lt){return za(lt)&&lt%2===0},_i=Ri,ki=Number.isInteger?Number.isInteger:function(lt){return za(lt)&&lt%1===0},uo=ki,qi=function(lt){return za(lt)&&lt<0},po=qi,es=1e-5;function rs(lt,It,jt){return jt===void 0&&(jt=es),Math.abs(lt-It)<jt}var no=function(lt){return za(lt)&&lt%2!==0},ni=no,zi=function(lt){return za(lt)&&lt>0},fo=zi,Xa=function(lt,It){if(Pt(lt)){for(var jt,le=-1/0,Ae=0;Ae<lt.length;Ae++){var vr=lt[Ae],yr=at(It)?It(vr):vr[It];yr>le&&(jt=vr,le=yr)}return jt}},go=function(lt,It){if(Pt(lt)){for(var jt,le=1/0,Ae=0;Ae<lt.length;Ae++){var vr=lt[Ae],yr=at(It)?It(vr):vr[It];yr<le&&(jt=vr,le=yr)}return jt}},No=function(lt,It){return(lt%It+It)%It},Hi=No,as=180/Math.PI,Gi=function(lt){return as*lt},Ro=Gi,ss=parseInt,Ss=Math.PI/180,mo=function(lt){return Ss*lt},us=mo,fs=Oe,Is=function(lt,It){return lt.hasOwnProperty(It)},Aa=Is,Ut=Object.values?function(lt){return Object.values(lt)}:function(lt){var It=[];return Oe(lt,function(jt,le){at(lt)&&le==="prototype"||It.push(jt)}),It},Xe=Ut,cr=function(lt,It){return Dt(Xe(lt),It)},_r=function(lt){return C(lt)?"":lt.toString()},on=function(lt){return _r(lt).toLowerCase()},_n=on,$n=function(lt){var It=_r(lt);return It.charAt(0).toLowerCase()+It.substring(1)},qa=$n;function Bi(lt,It){return!lt||!It?lt:lt.replace(/\\?\{([^{}]+)\}/g,function(jt,le){return jt.charAt(0)==="\\"?jt.slice(1):It[le]===void 0?"":It[le]})}var Oo=Bi,jo=function(lt){return _r(lt).toUpperCase()},Rs=jo,Qi=function(lt){var It=_r(lt);return It.charAt(0).toUpperCase()+It.substring(1)},Io=Qi,cs={}.toString,ks=function(lt){return cs.call(lt).replace(/^\[object /,"").replace(/]$/,"")},ls=ks,js=function(lt){return mt(lt,"Arguments")},Ks=js,Vs=function(lt){return mt(lt,"Boolean")},hu=Vs,ds=function(lt){return mt(lt,"Date")},Ds=ds,Bs=function(lt){return mt(lt,"Error")},is=Bs;function Eu(lt){return za(lt)&&isFinite(lt)}var wu=function(lt){return lt===null},yo=wu,Vo=Object.prototype,os=function(lt){var It=lt&&lt.constructor,jt=typeof It=="function"&&It.prototype||Vo;return lt===jt},h=os,Y=function(lt){return mt(lt,"RegExp")},Mt=Y,Bt=function(lt){return lt===void 0},qt=Bt,pe=function(lt){return lt instanceof Element||lt instanceof HTMLDocument},me=pe;function De(lt){var It=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(jt){return setTimeout(jt,16)};return It(lt)}function Ue(lt){var It=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;It(lt)}function $e(lt,It){for(var jt in It)It.hasOwnProperty(jt)&&jt!=="constructor"&&It[jt]!==void 0&&(lt[jt]=It[jt])}function mr(lt,It,jt,le){return It&&$e(lt,It),jt&&$e(lt,jt),le&&$e(lt,le),lt}var qr=function(){for(var lt=[],It=0;It<arguments.length;It++)lt[It]=arguments[It];for(var jt=lt[0],le=1;le<lt.length;le++){var Ae=lt[le];at(Ae)&&(Ae=Ae.prototype),mr(jt.prototype,Ae)}},tn=qr,Qr=function(lt){if(typeof lt!="object"||lt===null)return lt;var It;if(Pt(lt)){It=[];for(var jt=0,le=lt.length;jt<le;jt++)typeof lt[jt]=="object"&&lt[jt]!=null?It[jt]=Qr(lt[jt]):It[jt]=lt[jt]}else{It={};for(var Ae in lt)typeof lt[Ae]=="object"&&lt[Ae]!=null?It[Ae]=Qr(lt[Ae]):It[Ae]=lt[Ae]}return It},Tn=Qr;function Un(lt,It,jt){var le;return function(){var Ae=this,vr=arguments,yr=function(){le=null,jt||lt.apply(Ae,vr)},Zr=jt&&!le;clearTimeout(le),le=setTimeout(yr,It),Zr&&lt.apply(Ae,vr)}}var dn=Un,ra=function(lt,It){if(!at(lt))throw new TypeError("Expected a function");var jt=function(){for(var le=[],Ae=0;Ae<arguments.length;Ae++)le[Ae]=arguments[Ae];var vr=It?It.apply(this,le):le[0],yr=jt.cache;if(yr.has(vr))return yr.get(vr);var Zr=lt.apply(this,le);return yr.set(vr,Zr),Zr};return jt.cache=new Map,jt},Ha=5;function Za(lt,It,jt,le){jt=jt||0,le=le||Ha;for(var Ae in It)if(It.hasOwnProperty(Ae)){var vr=It[Ae];vr!==null&&xr(vr)?(xr(lt[Ae])||(lt[Ae]={}),jt<le?Za(lt[Ae],vr,jt+1,le):lt[Ae]=It[Ae]):Pt(vr)?(lt[Ae]=[],lt[Ae]=lt[Ae].concat(vr)):vr!==void 0&&(lt[Ae]=vr)}}var Ua=function(lt){for(var It=[],jt=1;jt<arguments.length;jt++)It[jt-1]=arguments[jt];for(var le=0;le<It.length;le+=1)Za(lt,It[le]);return lt},Ma=Ua,Ra=function(lt,It,jt,le){at(It)||(jt=It,It=lt,lt=function(){});var Ae=Object.create?function(yr,Zr){return Object.create(yr,{constructor:{value:Zr}})}:function(yr,Zr){function Cn(){}Cn.prototype=yr;var An=new Cn;return An.constructor=Zr,An},vr=Ae(It.prototype,lt);return lt.prototype=mr(vr,lt.prototype),lt.superclass=Ae(It.prototype,It),mr(vr,jt),mr(lt,le),lt},Do=Ra,Eo=function(lt,It){if(!Et(lt))return-1;var jt=Array.prototype.indexOf;if(jt)return jt.call(lt,It);for(var le=-1,Ae=0;Ae<lt.length;Ae++)if(lt[Ae]===It){le=Ae;break}return le},bo=Eo,wo=Object.prototype.hasOwnProperty;function So(lt){if(C(lt))return!0;if(Et(lt))return!lt.length;var It=ls(lt);if(It==="Map"||It==="Set")return!lt.size;if(h(lt))return!Object.keys(lt).length;for(var jt in lt)if(wo.call(lt,jt))return!1;return!0}var ko=So,Bo=function(lt,It){if(lt===It)return!0;if(!lt||!It||wa(lt)||wa(It))return!1;if(Et(lt)||Et(It)){if(lt.length!==It.length)return!1;for(var jt=!0,le=0;le<lt.length&&(jt=Bo(lt[le],It[le]),!!jt);le++);return jt}if(xn(lt)||xn(It)){var Ae=Object.keys(lt),vr=Object.keys(It);if(Ae.length!==vr.length)return!1;for(var jt=!0,le=0;le<Ae.length&&(jt=Bo(lt[Ae[le]],It[Ae[le]]),!!jt);le++);return jt}return!1},ci=Bo,Fi=function(lt,It,jt){return at(jt)?!!jt(lt,It):ci(lt,It)},$s=function(lt,It){if(!Et(lt))return lt;for(var jt=[],le=0;le<lt.length;le++){var Ae=lt[le];jt.push(It(Ae,le))}return jt},Fs=$s,Ms=function(lt){return lt},vu=function(lt,It){It===void 0&&(It=Ms);var jt={};return Lt(lt)&&!C(lt)&&Object.keys(lt).forEach(function(le){jt[le]=It(lt[le],le)}),jt},Rf=function(lt,It,jt){for(var le=0,Ae=wa(It)?It.split("."):It;lt&&le<Ae.length;)lt=lt[Ae[le++]];return lt===void 0||le<Ae.length?jt:lt},bc=function(lt,It,jt){var le=lt,Ae=wa(It)?It.split("."):It;return Ae.forEach(function(vr,yr){yr<Ae.length-1?(Lt(le[vr])||(le[vr]=za(Ae[yr+1])?[]:{}),le=le[vr]):le[vr]=jt}),lt},xc=Object.prototype.hasOwnProperty,kf=function(lt,It){if(lt===null||!xr(lt))return{};var jt={};return Oe(It,function(le){xc.call(lt,le)&&(jt[le]=lt[le])}),jt},Zc=function(lt,It){return Vi(lt,function(jt,le,Ae){return It.includes(Ae)||(jt[Ae]=le),jt},{})},Bf=function(lt,It,jt){var le,Ae,vr,yr,Zr=0;jt||(jt={});var Cn=function(){Zr=jt.leading===!1?0:Date.now(),le=null,yr=lt.apply(Ae,vr),le||(Ae=vr=null)},An=function(){var Vn=Date.now();!Zr&&jt.leading===!1&&(Zr=Vn);var aa=It-(Vn-Zr);return Ae=this,vr=arguments,aa<=0||aa>It?(le&&(clearTimeout(le),le=null),Zr=Vn,yr=lt.apply(Ae,vr),le||(Ae=vr=null)):!le&&jt.trailing!==!1&&(le=setTimeout(Cn,aa)),yr};return An.cancel=function(){clearTimeout(le),Zr=0,le=Ae=vr=null},An},ju=function(lt){return Et(lt)?Array.prototype.slice.call(lt):[]},Vu={},Ff=function(lt){return lt=lt||"g",Vu[lt]?Vu[lt]+=1:Vu[lt]=1,lt+Vu[lt]},Ec=function(){},Kc=function(lt){return lt};function pu(lt){return C(lt)?0:Et(lt)?lt.length:Object.keys(lt).length}var wc=function(){function lt(){this.map={}}return lt.prototype.has=function(It){return this.map[It]!==void 0},lt.prototype.get=function(It,jt){var le=this.map[It];return le===void 0?jt:le},lt.prototype.set=function(It,jt){this.map[It]=jt},lt.prototype.clear=function(){this.map={}},lt.prototype.delete=function(It){delete this.map[It]},lt.prototype.size=function(){return Object.keys(this.map).length},lt}(),ta=wc,Su=1e-6;function si(lt){return Math.abs(lt)<Su?0:lt<0?-1:1}function zf(lt,It,jt){return(jt[0]-lt[0])*(It[1]-lt[1])===(It[0]-lt[0])*(jt[1]-lt[1])&&Math.min(lt[0],It[0])<=jt[0]&&jt[0]<=Math.max(lt[0],It[0])&&Math.min(lt[1],It[1])<=jt[1]&&jt[1]<=Math.max(lt[1],It[1])}function Mu(lt,It,jt){var le=!1,Ae=lt.length;if(Ae<=2)return!1;for(var vr=0;vr<Ae;vr++){var yr=lt[vr],Zr=lt[(vr+1)%Ae];if(zf(yr,Zr,[It,jt]))return!0;si(yr[1]-jt)>0!=si(Zr[1]-jt)>0&&si(It-(jt-yr[1])*(yr[0]-Zr[0])/(yr[1]-Zr[1])-yr[0])<0&&(le=!le)}return le}var nu=function(lt,It,jt){return lt>=It&&lt<=jt};function Gf(lt,It,jt,le){var Ae=.001,vr={x:jt.x-lt.x,y:jt.y-lt.y},yr={x:It.x-lt.x,y:It.y-lt.y},Zr={x:le.x-jt.x,y:le.y-jt.y},Cn=yr.x*Zr.y-yr.y*Zr.x,An=Cn*Cn,Vn=yr.x*yr.x+yr.y*yr.y,aa=Zr.x*Zr.x+Zr.y*Zr.y,Zn=null;if(An>Ae*Vn*aa){var La=(vr.x*Zr.y-vr.y*Zr.x)/Cn,Qa=(vr.x*yr.y-vr.y*yr.x)/Cn;nu(La,0,1)&&nu(Qa,0,1)&&(Zn={x:lt.x+La*yr.x,y:lt.y+La*yr.y})}return Zn}function sf(lt){for(var It=[],jt=lt.length,le=0;le<jt-1;le++){var Ae=lt[le],vr=lt[le+1];It.push({from:{x:Ae[0],y:Ae[1]},to:{x:vr[0],y:vr[1]}})}if(It.length>1){var yr=lt[0],Zr=lt[jt-1];It.push({from:{x:Zr[0],y:Zr[1]},to:{x:yr[0],y:yr[1]}})}return It}function uf(lt,It){var jt=!1;return lt.forEach(function(le){if(Gf(le.from,le.to,It.from,It.to))return jt=!0,!1}),jt}function Uf(lt){var It=lt.map(function(le){return le[0]}),jt=lt.map(function(le){return le[1]});return{minX:Math.min.apply(null,It),maxX:Math.max.apply(null,It),minY:Math.min.apply(null,jt),maxY:Math.max.apply(null,jt)}}function Sc(lt,It){return!(It.minX>lt.maxX||It.maxX<lt.minX||It.minY>lt.maxY||It.maxY<lt.minY)}function zs(lt,It){if(lt.length<2||It.length<2)return!1;var jt=Uf(lt),le=Uf(It);if(!Sc(jt,le))return!1;var Ae=!1;if(It.forEach(function(Cn){if(Mu(lt,Cn[0],Cn[1]))return Ae=!0,!1}),Ae||(lt.forEach(function(Cn){if(Mu(It,Cn[0],Cn[1]))return Ae=!0,!1}),Ae))return!0;var vr=sf(lt),yr=sf(It),Zr=!1;return yr.forEach(function(Cn){if(uf(vr,Cn))return Zr=!0,!1}),Zr}},731278:function(We,G,_){"use strict";var m;m={value:!0};var R=_(858204);function w(g,T,E){var O=[0,0,0,0,0,0,0,0,0];return R.mat3.fromTranslation(O,E),R.mat3.multiply(g,O,T)}m=w;function M(g,T,E){var O=[0,0,0,0,0,0,0,0,0];return R.mat3.fromRotation(O,E),R.mat3.multiply(g,O,T)}m=M;function P(g,T,E){var O=[0,0,0,0,0,0,0,0,0];return R.mat3.fromScaling(O,E),R.mat3.multiply(g,O,T)}m=P;function L(g,T,E){return R.mat3.multiply(g,E,T)}function p(g,T){for(var E=g?[].concat(g):[1,0,0,0,1,0,0,0,1],O=0,k=T.length;O<k;O++){var y=T[O];switch(y[0]){case"t":w(E,E,[y[1],y[2]]);break;case"s":P(E,E,[y[1],y[2]]);break;case"r":M(E,E,y[1]);break;case"m":L(E,E,y[1]);break;default:break}}return E}G.vs=p;function b(g,T){return g[0]*T[1]-T[0]*g[1]}m=b;function S(g,T,E){var O=R.vec2.angle(g,T),k=b(g,T)>=0;return E?k?Math.PI*2-O:O:k?O:Math.PI*2-O}m=S;function x(g,T,E){return E?(g[0]=T[1],g[1]=-1*T[0]):(g[0]=-1*T[1],g[1]=T[0]),g}m=x},413810:function(We,G,_){"use strict";_.r(G),_.d(G,{Cache:function(){return Aa},assign:function(){return cn},augment:function(){return Bn},clamp:function(){return $t},clearAnimationFrame:function(){return Yr},clone:function(){return qn},contains:function(){return M},debounce:function(){return ya},deepMix:function(){return ei},difference:function(){return b},each:function(){return U},endsWith:function(){return fn},every:function(){return Je},extend:function(){return Ii},filter:function(){return L},find:function(){return nt},findIndex:function(){return dt},firstValue:function(){return wt},fixedBase:function(){return we},flatten:function(){return et},flattenDeep:function(){return Tt},forIn:function(){return ge},get:function(){return no},getEllipsisText:function(){return fs},getRange:function(){return zt},getType:function(){return Vi},getWrapBehavior:function(){return Dr},group:function(){return ln},groupBy:function(){return Lr},groupToMap:function(){return Nr},has:function(){return Ie},hasKey:function(){return xe},hasValue:function(){return Mr},head:function(){return Qe},identity:function(){return Ro},includes:function(){return M},indexOf:function(){return za},isArguments:function(){return io},isArray:function(){return k},isArrayLike:function(){return R},isBoolean:function(){return oo},isDate:function(){return ii},isDecimal:function(){return kt},isElement:function(){return pr},isEmpty:function(){return Ri},isEqual:function(){return ki},isEqualWith:function(){return uo},isError:function(){return so},isEven:function(){return at},isFinite:function(){return zo},isFunction:function(){return T},isInteger:function(){return C},isMatch:function(){return j},isNegative:function(){return H},isNil:function(){return O},isNull:function(){return vo},isNumber:function(){return Vt},isNumberEqual:function(){return Pt},isObject:function(){return y},isObjectLike:function(){return q},isOdd:function(){return Jt},isPlainObject:function(){return J},isPositive:function(){return ye},isPrototype:function(){return Ai},isRegExp:function(){return oa},isString:function(){return be},isType:function(){return g},isUndefined:function(){return ve},keys:function(){return F},last:function(){return lr},lowerCase:function(){return Sn},lowerFirst:function(){return wn},map:function(){return po},mapValues:function(){return rs},max:function(){return Nt},maxBy:function(){return Ze},measureTextWidth:function(){return us},memoize:function(){return vi},min:function(){return st},minBy:function(){return wr},mix:function(){return cn},mod:function(){return Ur},noop:function(){return Gi},number2color:function(){return bn},omit:function(){return Xa},parseRadius:function(){return tr},pick:function(){return fo},pull:function(){return ue},pullAt:function(){return ae},reduce:function(){return ee},remove:function(){return ze},requestAnimationFrame:function(){return Xr},set:function(){return ni},size:function(){return ss},some:function(){return nr},sortBy:function(){return he},startsWith:function(){return kr},substitute:function(){return la},throttle:function(){return go},toArray:function(){return No},toDegree:function(){return xr},toInteger:function(){return Wr},toRadian:function(){return Yt},toString:function(){return vn},union:function(){return Pe},uniq:function(){return vt},uniqueId:function(){return as},upperCase:function(){return xa},upperFirst:function(){return ri},values:function(){return gr},valuesOfKey:function(){return qe},wrapBehavior:function(){return Kr}});var m=function(Ut){return Ut!==null&&typeof Ut!="function"&&isFinite(Ut.length)},R=m,w=function(Ut,Xe){return R(Ut)?Ut.indexOf(Xe)>-1:!1},M=w,P=function(Ut,Xe){if(!R(Ut))return Ut;for(var cr=[],_r=0;_r<Ut.length;_r++){var on=Ut[_r];Xe(on,_r)&&cr.push(on)}return cr},L=P,p=function(Ut,Xe){return Xe===void 0&&(Xe=[]),L(Ut,function(cr){return!M(Xe,cr)})},b=p,S={}.toString,x=function(Ut,Xe){return S.call(Ut)==="[object "+Xe+"]"},g=x,T=function(Ut){return g(Ut,"Function")},E=function(Ut){return Ut==null},O=E,k=function(Ut){return Array.isArray?Array.isArray(Ut):g(Ut,"Array")},y=function(Ut){var Xe=typeof Ut;return Ut!==null&&Xe==="object"||Xe==="function"};function l(Ut,Xe){if(Ut){var cr;if(k(Ut))for(var _r=0,on=Ut.length;_r<on&&(cr=Xe(Ut[_r],_r),cr!==!1);_r++);else if(y(Ut)){for(var _n in Ut)if(Ut.hasOwnProperty(_n)&&(cr=Xe(Ut[_n],_n),cr===!1))break}}}var U=l,X=Object.keys?function(Ut){return Object.keys(Ut)}:function(Ut){var Xe=[];return U(Ut,function(cr,_r){T(Ut)&&_r==="prototype"||Xe.push(_r)}),Xe},F=X;function W(Ut,Xe){var cr=F(Xe),_r=cr.length;if(O(Ut))return!_r;for(var on=0;on<_r;on+=1){var _n=cr[on];if(Xe[_n]!==Ut[_n]||!(_n in Ut))return!1}return!0}var j=W,V=function(Ut){return typeof Ut=="object"&&Ut!==null},q=V,$=function(Ut){if(!q(Ut)||!g(Ut,"Object"))return!1;if(Object.getPrototypeOf(Ut)===null)return!0;for(var Xe=Ut;Object.getPrototypeOf(Xe)!==null;)Xe=Object.getPrototypeOf(Xe);return Object.getPrototypeOf(Ut)===Xe},J=$;function ut(Ut,Xe){if(!k(Ut))return null;var cr;if(T(Xe)&&(cr=Xe),J(Xe)&&(cr=function(on){return j(on,Xe)}),cr){for(var _r=0;_r<Ut.length;_r+=1)if(cr(Ut[_r]))return Ut[_r]}return null}var nt=ut;function yt(Ut,Xe,cr){cr===void 0&&(cr=0);for(var _r=cr;_r<Ut.length;_r++)if(Xe(Ut[_r],_r))return _r;return-1}var dt=yt,Ft=function(Ut,Xe){for(var cr=null,_r=0;_r<Ut.length;_r++){var on=Ut[_r],_n=on[Xe];if(!O(_n)){k(_n)?cr=_n[0]:cr=_n;break}}return cr},wt=Ft,St=function(Ut){if(!k(Ut))return[];for(var Xe=[],cr=0;cr<Ut.length;cr++)Xe=Xe.concat(Ut[cr]);return Xe},et=St,it=function(Ut,Xe){if(Xe===void 0&&(Xe=[]),!k(Ut))Xe.push(Ut);else for(var cr=0;cr<Ut.length;cr+=1)it(Ut[cr],Xe);return Xe},Tt=it,Nt=function(Ut){if(k(Ut))return Ut.reduce(function(Xe,cr){return Math.max(Xe,cr)},Ut[0])},st=function(Ut){if(k(Ut))return Ut.reduce(function(Xe,cr){return Math.min(Xe,cr)},Ut[0])},xt=function(Ut){var Xe=Ut.filter(function($n){return!isNaN($n)});if(!Xe.length)return{min:0,max:0};if(k(Ut[0])){for(var cr=[],_r=0;_r<Ut.length;_r++)cr=cr.concat(Ut[_r]);Xe=cr}var on=Nt(Xe),_n=st(Xe);return{min:_n,max:on}},zt=xt,Wt=Array.prototype,_t=Wt.splice,Xt=Wt.indexOf,te=function(Ut){for(var Xe=[],cr=1;cr<arguments.length;cr++)Xe[cr-1]=arguments[cr];for(var _r=0;_r<Xe.length;_r++)for(var on=Xe[_r],_n=-1;(_n=Xt.call(Ut,on))>-1;)_t.call(Ut,_n,1);return Ut},ue=te,fe=Array.prototype.splice,Gt=function(Xe,cr){if(!R(Xe))return[];for(var _r=Xe?cr.length:0,on=_r-1;_r--;){var _n=void 0,$n=cr[_r];(_r===on||$n!==_n)&&(_n=$n,fe.call(Xe,$n,1))}return Xe},ae=Gt,Ne=function(Ut,Xe,cr){if(!k(Ut)&&!J(Ut))return Ut;var _r=cr;return U(Ut,function(on,_n){_r=Xe(_r,on,_n)}),_r},ee=Ne,de=function(Ut,Xe){var cr=[];if(!R(Ut))return cr;for(var _r=-1,on=[],_n=Ut.length;++_r<_n;){var $n=Ut[_r];Xe($n,_r,Ut)&&(cr.push($n),on.push(_r))}return ae(Ut,on),cr},ze=de,be=function(Ut){return g(Ut,"String")};function ke(Ut,Xe){var cr;if(T(Xe))cr=function(on,_n){return Xe(on)-Xe(_n)};else{var _r=[];be(Xe)?_r.push(Xe):k(Xe)&&(_r=Xe),cr=function(on,_n){for(var $n=0;$n<_r.length;$n+=1){var qa=_r[$n];if(on[qa]>_n[qa])return 1;if(on[qa]<_n[qa])return-1}return 0}}return Ut.sort(cr),Ut}var he=ke;function vt(Ut,Xe){Xe===void 0&&(Xe=new Map);var cr=[];if(Array.isArray(Ut))for(var _r=0,on=Ut.length;_r<on;_r++){var _n=Ut[_r];Xe.has(_n)||(cr.push(_n),Xe.set(_n,!0))}return cr}var ie=function(){for(var Ut=[],Xe=0;Xe<arguments.length;Xe++)Ut[Xe]=arguments[Xe];return vt([].concat.apply([],Ut))},Pe=ie,qe=function(Ut,Xe){for(var cr=[],_r={},on=0;on<Ut.length;on++){var _n=Ut[on],$n=_n[Xe];if(!O($n)){k($n)||($n=[$n]);for(var qa=0;qa<$n.length;qa++){var Bi=$n[qa];_r[Bi]||(cr.push(Bi),_r[Bi]=!0)}}}return cr};function Qe(Ut){if(R(Ut))return Ut[0]}function lr(Ut){if(R(Ut)){var Xe=Ut;return Xe[Xe.length-1]}}function fr(Ut,Xe){return k(Ut)||be(Ut)?Ut[0]===Xe:!1}var kr=fr;function En(Ut,Xe){return k(Ut)||be(Ut)?Ut[Ut.length-1]===Xe:!1}var fn=En,Vr=function(Ut,Xe){for(var cr=0;cr<Ut.length;cr++)if(!Xe(Ut[cr],cr))return!1;return!0},Je=Vr,dr=function(Ut,Xe){for(var cr=0;cr<Ut.length;cr++)if(Xe(Ut[cr],cr))return!0;return!1},nr=dr,oe=Object.prototype.hasOwnProperty;function Te(Ut,Xe){if(!Xe||!k(Ut))return{};for(var cr={},_r=T(Xe)?Xe:function(qa){return qa[Xe]},on,_n=0;_n<Ut.length;_n++){var $n=Ut[_n];on=_r($n),oe.call(cr,on)?cr[on].push($n):cr[on]=[$n]}return cr}var Lr=Te;function Nr(Ut,Xe){if(!Xe)return{0:Ut};if(!T(Xe)){var cr=k(Xe)?Xe:Xe.replace(/\s+/g,"").split("*");Xe=function(_r){for(var on="_",_n=0,$n=cr.length;_n<$n;_n++)on+=_r[cr[_n]]&&_r[cr[_n]].toString();return on}}return Lr(Ut,Xe)}var ln=function(Ut,Xe){if(!Xe)return[Ut];var cr=Nr(Ut,Xe),_r=[];for(var on in cr)_r.push(cr[on]);return _r};function en(Ut,Xe){return Ut["_wrap_"+Xe]}var Dr=en;function Fr(Ut,Xe){if(Ut["_wrap_"+Xe])return Ut["_wrap_"+Xe];var cr=function(_r){Ut[Xe](_r)};return Ut["_wrap_"+Xe]=cr,cr}var Kr=Fr,an={};function yn(Ut){var Xe=an[Ut];if(!Xe){for(var cr=Ut.toString(16),_r=cr.length;_r<6;_r++)cr="0"+cr;Xe="#"+cr,an[Ut]=Xe}return Xe}var bn=yn;function tt(Ut){var Xe=0,cr=0,_r=0,on=0;return k(Ut)?Ut.length===1?Xe=cr=_r=on=Ut[0]:Ut.length===2?(Xe=_r=Ut[0],cr=on=Ut[1]):Ut.length===3?(Xe=Ut[0],cr=on=Ut[1],_r=Ut[2]):(Xe=Ut[0],cr=Ut[1],_r=Ut[2],on=Ut[3]):Xe=cr=_r=on=Ut,{r1:Xe,r2:cr,r3:_r,r4:on}}var tr=tt,Kt=function(Ut,Xe,cr){return Ut<Xe?Xe:Ut>cr?cr:Ut},$t=Kt,Et=function(Ut,Xe){var cr=Xe.toString(),_r=cr.indexOf(".");if(_r===-1)return Math.round(Ut);var on=cr.substr(_r+1).length;return on>20&&(on=20),parseFloat(Ut.toFixed(on))},we=Et,Dt=function(Ut){return g(Ut,"Number")},Vt=Dt,ht=function(Ut){return Vt(Ut)&&Ut%1!==0},kt=ht,Q=function(Ut){return Vt(Ut)&&Ut%2===0},at=Q,B=Number.isInteger?Number.isInteger:function(Ut){return Vt(Ut)&&Ut%1===0},C=B,I=function(Ut){return Vt(Ut)&&Ut<0},H=I,mt=1e-5;function Pt(Ut,Xe,cr){return cr===void 0&&(cr=mt),Math.abs(Ut-Xe)<cr}var Lt=function(Ut){return Vt(Ut)&&Ut%2!==0},Jt=Lt,Oe=function(Ut){return Vt(Ut)&&Ut>0},ye=Oe,Ze=function(Ut,Xe){if(k(Ut)){for(var cr,_r=-1/0,on=0;on<Ut.length;on++){var _n=Ut[on],$n=T(Xe)?Xe(_n):_n[Xe];$n>_r&&(cr=_n,_r=$n)}return cr}},wr=function(Ut,Xe){if(k(Ut)){for(var cr,_r=1/0,on=0;on<Ut.length;on++){var _n=Ut[on],$n=T(Xe)?Xe(_n):_n[Xe];$n<_r&&(cr=_n,_r=$n)}return cr}},er=function(Ut,Xe){return(Ut%Xe+Xe)%Xe},Ur=er,xn=180/Math.PI,rr=function(Ut){return xn*Ut},xr=rr,Wr=parseInt,Gr=Math.PI/180,ce=function(Ut){return Gr*Ut},Yt=ce,ge=U,Ie=function(Ut,Xe){return Ut.hasOwnProperty(Xe)},xe=Ie,Ye=Object.values?function(Ut){return Object.values(Ut)}:function(Ut){var Xe=[];return U(Ut,function(cr,_r){T(Ut)&&_r==="prototype"||Xe.push(cr)}),Xe},gr=Ye,Mr=function(Ut,Xe){return M(gr(Ut),Xe)},vn=function(Ut){return O(Ut)?"":Ut.toString()},Wn=function(Ut){return vn(Ut).toLowerCase()},Sn=Wn,ea=function(Ut){var Xe=vn(Ut);return Xe.charAt(0).toLowerCase()+Xe.substring(1)},wn=ea;function Hn(Ut,Xe){return!Ut||!Xe?Ut:Ut.replace(/\\?\{([^{}]+)\}/g,function(cr,_r){return cr.charAt(0)==="\\"?cr.slice(1):Xe[_r]===void 0?"":Xe[_r]})}var la=Hn,ba=function(Ut){return vn(Ut).toUpperCase()},xa=ba,Yi=function(Ut){var Xe=vn(Ut);return Xe.charAt(0).toUpperCase()+Xe.substring(1)},ri=Yi,ti={}.toString,Mi=function(Ut){return ti.call(Ut).replace(/^\[object /,"").replace(/]$/,"")},Vi=Mi,ao=function(Ut){return g(Ut,"Arguments")},io=ao,wa=function(Ut){return g(Ut,"Boolean")},oo=wa,To=function(Ut){return g(Ut,"Date")},ii=To,Xi=function(Ut){return g(Ut,"Error")},so=Xi;function zo(Ut){return Vt(Ut)&&isFinite(Ut)}var ro=function(Ut){return Ut===null},vo=ro,Ao=Object.prototype,Go=function(Ut){var Xe=Ut&&Ut.constructor,cr=typeof Xe=="function"&&Xe.prototype||Ao;return Ut===cr},Ai=Go,$i=function(Ut){return g(Ut,"RegExp")},oa=$i,Qt=function(Ut){return Ut===void 0},ve=Qt,Ge=function(Ut){return Ut instanceof Element||Ut instanceof HTMLDocument},pr=Ge;function Xr(Ut){var Xe=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(cr){return setTimeout(cr,16)};return Xe(Ut)}function Yr(Ut){var Xe=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;Xe(Ut)}function Pr(Ut,Xe){for(var cr in Xe)Xe.hasOwnProperty(cr)&&cr!=="constructor"&&Xe[cr]!==void 0&&(Ut[cr]=Xe[cr])}function cn(Ut,Xe,cr,_r){return Xe&&Pr(Ut,Xe),cr&&Pr(Ut,cr),_r&&Pr(Ut,_r),Ut}var Mn=function(){for(var Ut=[],Xe=0;Xe<arguments.length;Xe++)Ut[Xe]=arguments[Xe];for(var cr=Ut[0],_r=1;_r<Ut.length;_r++){var on=Ut[_r];T(on)&&(on=on.prototype),cn(cr.prototype,on)}},Bn=Mn,sa=function(Ut){if(typeof Ut!="object"||Ut===null)return Ut;var Xe;if(k(Ut)){Xe=[];for(var cr=0,_r=Ut.length;cr<_r;cr++)typeof Ut[cr]=="object"&&Ut[cr]!=null?Xe[cr]=sa(Ut[cr]):Xe[cr]=Ut[cr]}else{Xe={};for(var on in Ut)typeof Ut[on]=="object"&&Ut[on]!=null?Xe[on]=sa(Ut[on]):Xe[on]=Ut[on]}return Xe},qn=sa;function ga(Ut,Xe,cr){var _r;return function(){var on=this,_n=arguments,$n=function(){_r=null,cr||Ut.apply(on,_n)},qa=cr&&!_r;clearTimeout(_r),_r=setTimeout($n,Xe),qa&&Ut.apply(on,_n)}}var ya=ga,vi=function(Ut,Xe){if(!T(Ut))throw new TypeError("Expected a function");var cr=function(){for(var _r=[],on=0;on<arguments.length;on++)_r[on]=arguments[on];var _n=Xe?Xe.apply(this,_r):_r[0],$n=cr.cache;if($n.has(_n))return $n.get(_n);var qa=Ut.apply(this,_r);return $n.set(_n,qa),qa};return cr.cache=new Map,cr},Sa=5;function ua(Ut,Xe,cr,_r){cr=cr||0,_r=_r||Sa;for(var on in Xe)if(Xe.hasOwnProperty(on)){var _n=Xe[on];_n!==null&&J(_n)?(J(Ut[on])||(Ut[on]={}),cr<_r?ua(Ut[on],_n,cr+1,_r):Ut[on]=Xe[on]):k(_n)?(Ut[on]=[],Ut[on]=Ut[on].concat(_n)):_n!==void 0&&(Ut[on]=_n)}}var fi=function(Ut){for(var Xe=[],cr=1;cr<arguments.length;cr++)Xe[cr-1]=arguments[cr];for(var _r=0;_r<Xe.length;_r+=1)ua(Ut,Xe[_r]);return Ut},ei=fi,Ga=function(Ut,Xe,cr,_r){T(Xe)||(cr=Xe,Xe=Ut,Ut=function(){});var on=Object.create?function($n,qa){return Object.create($n,{constructor:{value:qa}})}:function($n,qa){function Bi(){}Bi.prototype=$n;var Oo=new Bi;return Oo.constructor=qa,Oo},_n=on(Xe.prototype,Ut);return Ut.prototype=cn(_n,Ut.prototype),Ut.superclass=on(Xe.prototype,Xe),cn(_n,cr),cn(Ut,_r),Ut},Ii=Ga,yi=function(Ut,Xe){if(!R(Ut))return-1;var cr=Array.prototype.indexOf;if(cr)return cr.call(Ut,Xe);for(var _r=-1,on=0;on<Ut.length;on++)if(Ut[on]===Xe){_r=on;break}return _r},za=yi,Va=Object.prototype.hasOwnProperty;function Da(Ut){if(O(Ut))return!0;if(R(Ut))return!Ut.length;var Xe=Vi(Ut);if(Xe==="Map"||Xe==="Set")return!Ut.size;if(Ai(Ut))return!Object.keys(Ut).length;for(var cr in Ut)if(Va.call(Ut,cr))return!1;return!0}var Ri=Da,_i=function(Ut,Xe){if(Ut===Xe)return!0;if(!Ut||!Xe||be(Ut)||be(Xe))return!1;if(R(Ut)||R(Xe)){if(Ut.length!==Xe.length)return!1;for(var cr=!0,_r=0;_r<Ut.length&&(cr=_i(Ut[_r],Xe[_r]),!!cr);_r++);return cr}if(q(Ut)||q(Xe)){var on=Object.keys(Ut),_n=Object.keys(Xe);if(on.length!==_n.length)return!1;for(var cr=!0,_r=0;_r<on.length&&(cr=_i(Ut[on[_r]],Xe[on[_r]]),!!cr);_r++);return cr}return!1},ki=_i,uo=function(Ut,Xe,cr){return T(cr)?!!cr(Ut,Xe):ki(Ut,Xe)},qi=function(Ut,Xe){if(!R(Ut))return Ut;for(var cr=[],_r=0;_r<Ut.length;_r++){var on=Ut[_r];cr.push(Xe(on,_r))}return cr},po=qi,es=function(Ut){return Ut},rs=function(Ut,Xe){Xe===void 0&&(Xe=es);var cr={};return y(Ut)&&!O(Ut)&&Object.keys(Ut).forEach(function(_r){cr[_r]=Xe(Ut[_r],_r)}),cr},no=function(Ut,Xe,cr){for(var _r=0,on=be(Xe)?Xe.split("."):Xe;Ut&&_r<on.length;)Ut=Ut[on[_r++]];return Ut===void 0||_r<on.length?cr:Ut},ni=function(Ut,Xe,cr){var _r=Ut,on=be(Xe)?Xe.split("."):Xe;return on.forEach(function(_n,$n){$n<on.length-1?(y(_r[_n])||(_r[_n]=Vt(on[$n+1])?[]:{}),_r=_r[_n]):_r[_n]=cr}),Ut},zi=Object.prototype.hasOwnProperty,fo=function(Ut,Xe){if(Ut===null||!J(Ut))return{};var cr={};return U(Xe,function(_r){zi.call(Ut,_r)&&(cr[_r]=Ut[_r])}),cr},Xa=function(Ut,Xe){return ee(Ut,function(cr,_r,on){return Xe.includes(on)||(cr[on]=_r),cr},{})},go=function(Ut,Xe,cr){var _r,on,_n,$n,qa=0;cr||(cr={});var Bi=function(){qa=cr.leading===!1?0:Date.now(),_r=null,$n=Ut.apply(on,_n),_r||(on=_n=null)},Oo=function(){var jo=Date.now();!qa&&cr.leading===!1&&(qa=jo);var Rs=Xe-(jo-qa);return on=this,_n=arguments,Rs<=0||Rs>Xe?(_r&&(clearTimeout(_r),_r=null),qa=jo,$n=Ut.apply(on,_n),_r||(on=_n=null)):!_r&&cr.trailing!==!1&&(_r=setTimeout(Bi,Rs)),$n};return Oo.cancel=function(){clearTimeout(_r),qa=0,_r=on=_n=null},Oo},No=function(Ut){return R(Ut)?Array.prototype.slice.call(Ut):[]},Hi={},as=function(Ut){return Ut=Ut||"g",Hi[Ut]?Hi[Ut]+=1:Hi[Ut]=1,Ut+Hi[Ut]},Gi=function(){},Ro=function(Ut){return Ut};function ss(Ut){return O(Ut)?0:R(Ut)?Ut.length:Object.keys(Ut).length}var Ss=_(197582),mo,us=vi(function(Ut,Xe){Xe===void 0&&(Xe={});var cr=Xe.fontSize,_r=Xe.fontFamily,on=Xe.fontWeight,_n=Xe.fontStyle,$n=Xe.fontVariant;return mo||(mo=document.createElement("canvas").getContext("2d")),mo.font=[_n,$n,on,cr+"px",_r].join(" "),mo.measureText(be(Ut)?Ut:"").width},function(Ut,Xe){return Xe===void 0&&(Xe={}),(0,Ss.__spreadArrays)([Ut],gr(Xe)).join("")}),fs=function(Ut,Xe,cr,_r){_r===void 0&&(_r="...");var on=16,_n=us(_r,cr),$n=be(Ut)?Ut:vn(Ut),qa=Xe,Bi=[],Oo,jo;if(us(Ut,cr)<=Xe)return Ut;for(;Oo=$n.substr(0,on),jo=us(Oo,cr),!(jo+_n>qa&&jo>qa);)if(Bi.push(Oo),qa-=jo,$n=$n.substr(on),!$n)return Bi.join("");for(;Oo=$n.substr(0,1),jo=us(Oo,cr),!(jo+_n>qa);)if(Bi.push(Oo),qa-=jo,$n=$n.substr(1),!$n)return Bi.join("");return""+Bi.join("")+_r},Is=function(){function Ut(){this.map={}}return Ut.prototype.has=function(Xe){return this.map[Xe]!==void 0},Ut.prototype.get=function(Xe,cr){var _r=this.map[Xe];return _r===void 0?cr:_r},Ut.prototype.set=function(Xe,cr){this.map[Xe]=cr},Ut.prototype.clear=function(){this.map={}},Ut.prototype.delete=function(Xe){delete this.map[Xe]},Ut.prototype.size=function(){return Object.keys(this.map).length},Ut}(),Aa=Is},960887:function(We,G,_){"use strict";_.d(G,{LB:function(){return ba},g4:function(){return nr},we:function(){return Fr},pE:function(){return ut},VK:function(){return zt},Cj:function(){return Mi},O1:function(){return ti},Zj:function(){return io},VT:function(){return l},Dy:function(){return U}});var m=_(667294),R=_(973935),w=_(724285);const M={display:"none"};function P(Qt){let{id:ve,value:Ge}=Qt;return m.createElement("div",{id:ve,style:M},Ge)}const L={position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};function p(Qt){let{id:ve,announcement:Ge}=Qt;return m.createElement("div",{id:ve,style:L,role:"status","aria-live":"assertive","aria-atomic":!0},Ge)}function b(){const[Qt,ve]=(0,m.useState)("");return{announce:(0,m.useCallback)(pr=>{pr!=null&&ve(pr)},[]),announcement:Qt}}const S=(0,m.createContext)(null);function x(Qt){const ve=(0,m.useContext)(S);(0,m.useEffect)(()=>{if(!ve)throw new Error("useDndMonitor must be used within a children of <DndContext>");return ve(Qt)},[Qt,ve])}function g(){const[Qt]=(0,m.useState)(()=>new Set),ve=(0,m.useCallback)(pr=>(Qt.add(pr),()=>Qt.delete(pr)),[Qt]);return[(0,m.useCallback)(pr=>{let{type:Xr,event:Yr}=pr;Qt.forEach(Pr=>{var cn;return(cn=Pr[Xr])==null?void 0:cn.call(Pr,Yr)})},[Qt]),ve]}const T={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},E={onDragStart(Qt){let{active:ve}=Qt;return"Picked up draggable item "+ve.id+"."},onDragOver(Qt){let{active:ve,over:Ge}=Qt;return Ge?"Draggable item "+ve.id+" was moved over droppable area "+Ge.id+".":"Draggable item "+ve.id+" is no longer over a droppable area."},onDragEnd(Qt){let{active:ve,over:Ge}=Qt;return Ge?"Draggable item "+ve.id+" was dropped over droppable area "+Ge.id:"Draggable item "+ve.id+" was dropped."},onDragCancel(Qt){let{active:ve}=Qt;return"Dragging was cancelled. Draggable item "+ve.id+" was dropped."}};function O(Qt){let{announcements:ve=E,container:Ge,hiddenTextDescribedById:pr,screenReaderInstructions:Xr=T}=Qt;const{announce:Yr,announcement:Pr}=b(),cn=(0,w.Ld)("DndLiveRegion"),[Mn,Bn]=(0,m.useState)(!1);if((0,m.useEffect)(()=>{Bn(!0)},[]),x((0,m.useMemo)(()=>({onDragStart(qn){let{active:ga}=qn;Yr(ve.onDragStart({active:ga}))},onDragMove(qn){let{active:ga,over:ya}=qn;ve.onDragMove&&Yr(ve.onDragMove({active:ga,over:ya}))},onDragOver(qn){let{active:ga,over:ya}=qn;Yr(ve.onDragOver({active:ga,over:ya}))},onDragEnd(qn){let{active:ga,over:ya}=qn;Yr(ve.onDragEnd({active:ga,over:ya}))},onDragCancel(qn){let{active:ga,over:ya}=qn;Yr(ve.onDragCancel({active:ga,over:ya}))}}),[Yr,ve])),!Mn)return null;const sa=m.createElement(m.Fragment,null,m.createElement(P,{id:pr,value:Xr.draggable}),m.createElement(p,{id:cn,announcement:Pr}));return Ge?(0,R.createPortal)(sa,Ge):sa}var k;(function(Qt){Qt.DragStart="dragStart",Qt.DragMove="dragMove",Qt.DragEnd="dragEnd",Qt.DragCancel="dragCancel",Qt.DragOver="dragOver",Qt.RegisterDroppable="registerDroppable",Qt.SetDroppableDisabled="setDroppableDisabled",Qt.UnregisterDroppable="unregisterDroppable"})(k||(k={}));function y(){}function l(Qt,ve){return(0,m.useMemo)(()=>({sensor:Qt,options:ve!=null?ve:{}}),[Qt,ve])}function U(){for(var Qt=arguments.length,ve=new Array(Qt),Ge=0;Ge<Qt;Ge++)ve[Ge]=arguments[Ge];return(0,m.useMemo)(()=>[...ve].filter(pr=>pr!=null),[...ve])}const X=Object.freeze({x:0,y:0});function F(Qt,ve){return Math.sqrt(Math.pow(Qt.x-ve.x,2)+Math.pow(Qt.y-ve.y,2))}function W(Qt,ve){const Ge=getEventCoordinates(Qt);if(!Ge)return"0 0";const pr={x:(Ge.x-ve.left)/ve.width*100,y:(Ge.y-ve.top)/ve.height*100};return pr.x+"% "+pr.y+"%"}function j(Qt,ve){let{data:{value:Ge}}=Qt,{data:{value:pr}}=ve;return Ge-pr}function V(Qt,ve){let{data:{value:Ge}}=Qt,{data:{value:pr}}=ve;return pr-Ge}function q(Qt){let{left:ve,top:Ge,height:pr,width:Xr}=Qt;return[{x:ve,y:Ge},{x:ve+Xr,y:Ge},{x:ve,y:Ge+pr},{x:ve+Xr,y:Ge+pr}]}function $(Qt,ve){if(!Qt||Qt.length===0)return null;const[Ge]=Qt;return ve?Ge[ve]:Ge}function J(Qt,ve,Ge){return ve===void 0&&(ve=Qt.left),Ge===void 0&&(Ge=Qt.top),{x:ve+Qt.width*.5,y:Ge+Qt.height*.5}}const ut=Qt=>{let{collisionRect:ve,droppableRects:Ge,droppableContainers:pr}=Qt;const Xr=J(ve,ve.left,ve.top),Yr=[];for(const Pr of pr){const{id:cn}=Pr,Mn=Ge.get(cn);if(Mn){const Bn=F(J(Mn),Xr);Yr.push({id:cn,data:{droppableContainer:Pr,value:Bn}})}}return Yr.sort(j)},nt=Qt=>{let{collisionRect:ve,droppableRects:Ge,droppableContainers:pr}=Qt;const Xr=q(ve),Yr=[];for(const Pr of pr){const{id:cn}=Pr,Mn=Ge.get(cn);if(Mn){const Bn=q(Mn),sa=Xr.reduce((ga,ya,vi)=>ga+F(Bn[vi],ya),0),qn=Number((sa/4).toFixed(4));Yr.push({id:cn,data:{droppableContainer:Pr,value:qn}})}}return Yr.sort(j)};function yt(Qt,ve){const Ge=Math.max(ve.top,Qt.top),pr=Math.max(ve.left,Qt.left),Xr=Math.min(ve.left+ve.width,Qt.left+Qt.width),Yr=Math.min(ve.top+ve.height,Qt.top+Qt.height),Pr=Xr-pr,cn=Yr-Ge;if(pr<Xr&&Ge<Yr){const Mn=ve.width*ve.height,Bn=Qt.width*Qt.height,sa=Pr*cn,qn=sa/(Mn+Bn-sa);return Number(qn.toFixed(4))}return 0}const dt=Qt=>{let{collisionRect:ve,droppableRects:Ge,droppableContainers:pr}=Qt;const Xr=[];for(const Yr of pr){const{id:Pr}=Yr,cn=Ge.get(Pr);if(cn){const Mn=yt(cn,ve);Mn>0&&Xr.push({id:Pr,data:{droppableContainer:Yr,value:Mn}})}}return Xr.sort(V)};function Ft(Qt,ve){const{top:Ge,left:pr,bottom:Xr,right:Yr}=ve;return Ge<=Qt.y&&Qt.y<=Xr&&pr<=Qt.x&&Qt.x<=Yr}const wt=Qt=>{let{droppableContainers:ve,droppableRects:Ge,pointerCoordinates:pr}=Qt;if(!pr)return[];const Xr=[];for(const Yr of ve){const{id:Pr}=Yr,cn=Ge.get(Pr);if(cn&&Ft(pr,cn)){const Bn=q(cn).reduce((qn,ga)=>qn+F(pr,ga),0),sa=Number((Bn/4).toFixed(4));Xr.push({id:Pr,data:{droppableContainer:Yr,value:sa}})}}return Xr.sort(j)};function St(Qt,ve,Ge){return xo(Na({},Qt),{scaleX:ve&&Ge?ve.width/Ge.width:1,scaleY:ve&&Ge?ve.height/Ge.height:1})}function et(Qt,ve){return Qt&&ve?{x:Qt.left-ve.left,y:Qt.top-ve.top}:X}function it(Qt){return function(Ge){for(var pr=arguments.length,Xr=new Array(pr>1?pr-1:0),Yr=1;Yr<pr;Yr++)Xr[Yr-1]=arguments[Yr];return Xr.reduce((Pr,cn)=>xo(Na({},Pr),{top:Pr.top+Qt*cn.y,bottom:Pr.bottom+Qt*cn.y,left:Pr.left+Qt*cn.x,right:Pr.right+Qt*cn.x}),Na({},Ge))}}const Tt=it(1);function Nt(Qt){if(Qt.startsWith("matrix3d(")){const ve=Qt.slice(9,-1).split(/, /);return{x:+ve[12],y:+ve[13],scaleX:+ve[0],scaleY:+ve[5]}}else if(Qt.startsWith("matrix(")){const ve=Qt.slice(7,-1).split(/, /);return{x:+ve[4],y:+ve[5],scaleX:+ve[0],scaleY:+ve[3]}}return null}function st(Qt,ve,Ge){const pr=Nt(ve);if(!pr)return Qt;const{scaleX:Xr,scaleY:Yr,x:Pr,y:cn}=pr,Mn=Qt.left-Pr-(1-Xr)*parseFloat(Ge),Bn=Qt.top-cn-(1-Yr)*parseFloat(Ge.slice(Ge.indexOf(" ")+1)),sa=Xr?Qt.width/Xr:Qt.width,qn=Yr?Qt.height/Yr:Qt.height;return{width:sa,height:qn,top:Bn,right:Mn+sa,bottom:Bn+qn,left:Mn}}const xt={ignoreTransform:!1};function zt(Qt,ve){ve===void 0&&(ve=xt);let Ge=Qt.getBoundingClientRect();if(ve.ignoreTransform){const{transform:Bn,transformOrigin:sa}=(0,w.Jj)(Qt).getComputedStyle(Qt);Bn&&(Ge=st(Ge,Bn,sa))}const{top:pr,left:Xr,width:Yr,height:Pr,bottom:cn,right:Mn}=Ge;return{top:pr,left:Xr,width:Yr,height:Pr,bottom:cn,right:Mn}}function Wt(Qt){return zt(Qt,{ignoreTransform:!0})}function _t(Qt){const ve=Qt.innerWidth,Ge=Qt.innerHeight;return{top:0,left:0,right:ve,bottom:Ge,width:ve,height:Ge}}function Xt(Qt,ve){return ve===void 0&&(ve=(0,w.Jj)(Qt).getComputedStyle(Qt)),ve.position==="fixed"}function te(Qt,ve){ve===void 0&&(ve=(0,w.Jj)(Qt).getComputedStyle(Qt));const Ge=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(Xr=>{const Yr=ve[Xr];return typeof Yr=="string"?Ge.test(Yr):!1})}function ue(Qt,ve){const Ge=[];function pr(Xr){if(ve!=null&&Ge.length>=ve||!Xr)return Ge;if((0,w.qk)(Xr)&&Xr.scrollingElement!=null&&!Ge.includes(Xr.scrollingElement))return Ge.push(Xr.scrollingElement),Ge;if(!(0,w.Re)(Xr)||(0,w.vZ)(Xr)||Ge.includes(Xr))return Ge;const Yr=(0,w.Jj)(Qt).getComputedStyle(Xr);return Xr!==Qt&&te(Xr,Yr)&&Ge.push(Xr),Xt(Xr,Yr)?Ge:pr(Xr.parentNode)}return Qt?pr(Qt):Ge}function fe(Qt){const[ve]=ue(Qt,1);return ve!=null?ve:null}function Gt(Qt){return!w.Nq||!Qt?null:(0,w.FJ)(Qt)?Qt:(0,w.UG)(Qt)?(0,w.qk)(Qt)||Qt===(0,w.r3)(Qt).scrollingElement?window:(0,w.Re)(Qt)?Qt:null:null}function ae(Qt){return(0,w.FJ)(Qt)?Qt.scrollX:Qt.scrollLeft}function Ne(Qt){return(0,w.FJ)(Qt)?Qt.scrollY:Qt.scrollTop}function ee(Qt){return{x:ae(Qt),y:Ne(Qt)}}var de;(function(Qt){Qt[Qt.Forward=1]="Forward",Qt[Qt.Backward=-1]="Backward"})(de||(de={}));function ze(Qt){return!w.Nq||!Qt?!1:Qt===document.scrollingElement}function be(Qt){const ve={x:0,y:0},Ge=ze(Qt)?{height:window.innerHeight,width:window.innerWidth}:{height:Qt.clientHeight,width:Qt.clientWidth},pr={x:Qt.scrollWidth-Ge.width,y:Qt.scrollHeight-Ge.height},Xr=Qt.scrollTop<=ve.y,Yr=Qt.scrollLeft<=ve.x,Pr=Qt.scrollTop>=pr.y,cn=Qt.scrollLeft>=pr.x;return{isTop:Xr,isLeft:Yr,isBottom:Pr,isRight:cn,maxScroll:pr,minScroll:ve}}const ke={x:.2,y:.2};function he(Qt,ve,Ge,pr,Xr){let{top:Yr,left:Pr,right:cn,bottom:Mn}=Ge;pr===void 0&&(pr=10),Xr===void 0&&(Xr=ke);const{isTop:Bn,isBottom:sa,isLeft:qn,isRight:ga}=be(Qt),ya={x:0,y:0},vi={x:0,y:0},Sa={height:ve.height*Xr.y,width:ve.width*Xr.x};return!Bn&&Yr<=ve.top+Sa.height?(ya.y=de.Backward,vi.y=pr*Math.abs((ve.top+Sa.height-Yr)/Sa.height)):!sa&&Mn>=ve.bottom-Sa.height&&(ya.y=de.Forward,vi.y=pr*Math.abs((ve.bottom-Sa.height-Mn)/Sa.height)),!ga&&cn>=ve.right-Sa.width?(ya.x=de.Forward,vi.x=pr*Math.abs((ve.right-Sa.width-cn)/Sa.width)):!qn&&Pr<=ve.left+Sa.width&&(ya.x=de.Backward,vi.x=pr*Math.abs((ve.left+Sa.width-Pr)/Sa.width)),{direction:ya,speed:vi}}function vt(Qt){if(Qt===document.scrollingElement){const{innerWidth:Yr,innerHeight:Pr}=window;return{top:0,left:0,right:Yr,bottom:Pr,width:Yr,height:Pr}}const{top:ve,left:Ge,right:pr,bottom:Xr}=Qt.getBoundingClientRect();return{top:ve,left:Ge,right:pr,bottom:Xr,width:Qt.clientWidth,height:Qt.clientHeight}}function ie(Qt){return Qt.reduce((ve,Ge)=>(0,w.IH)(ve,ee(Ge)),X)}function Pe(Qt){return Qt.reduce((ve,Ge)=>ve+ae(Ge),0)}function qe(Qt){return Qt.reduce((ve,Ge)=>ve+Ne(Ge),0)}function Qe(Qt,ve){if(ve===void 0&&(ve=zt),!Qt)return;const{top:Ge,left:pr,bottom:Xr,right:Yr}=ve(Qt);fe(Qt)&&(Xr<=0||Yr<=0||Ge>=window.innerHeight||pr>=window.innerWidth)&&Qt.scrollIntoView({block:"center",inline:"center"})}const lr=[["x",["left","right"],Pe],["y",["top","bottom"],qe]];class fr{constructor(ve,Ge){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const pr=ue(Ge),Xr=ie(pr);this.rect=Na({},ve),this.width=ve.width,this.height=ve.height;for(const[Yr,Pr,cn]of lr)for(const Mn of Pr)Object.defineProperty(this,Mn,{get:()=>{const Bn=cn(pr),sa=Xr[Yr]-Bn;return this.rect[Mn]+sa},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class kr{constructor(ve){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(Ge=>{var pr;return(pr=this.target)==null?void 0:pr.removeEventListener(...Ge)})},this.target=ve}add(ve,Ge,pr){var Xr;(Xr=this.target)==null||Xr.addEventListener(ve,Ge,pr),this.listeners.push([ve,Ge,pr])}}function En(Qt){const{EventTarget:ve}=(0,w.Jj)(Qt);return Qt instanceof ve?Qt:(0,w.r3)(Qt)}function fn(Qt,ve){const Ge=Math.abs(Qt.x),pr=Math.abs(Qt.y);return typeof ve=="number"?Math.sqrt(Pv(Ge,2)+Pv(pr,2))>ve:"x"in ve&&"y"in ve?Ge>ve.x&&pr>ve.y:"x"in ve?Ge>ve.x:"y"in ve?pr>ve.y:!1}var Vr;(function(Qt){Qt.Click="click",Qt.DragStart="dragstart",Qt.Keydown="keydown",Qt.ContextMenu="contextmenu",Qt.Resize="resize",Qt.SelectionChange="selectionchange",Qt.VisibilityChange="visibilitychange"})(Vr||(Vr={}));function Je(Qt){Qt.preventDefault()}function dr(Qt){Qt.stopPropagation()}var nr;(function(Qt){Qt.Space="Space",Qt.Down="ArrowDown",Qt.Right="ArrowRight",Qt.Left="ArrowLeft",Qt.Up="ArrowUp",Qt.Esc="Escape",Qt.Enter="Enter"})(nr||(nr={}));const oe={start:[nr.Space,nr.Enter],cancel:[nr.Esc],end:[nr.Space,nr.Enter]},Te=(Qt,ve)=>{let{currentCoordinates:Ge}=ve;switch(Qt.code){case nr.Right:return xo(Na({},Ge),{x:Ge.x+25});case nr.Left:return xo(Na({},Ge),{x:Ge.x-25});case nr.Down:return xo(Na({},Ge),{y:Ge.y+25});case nr.Up:return xo(Na({},Ge),{y:Ge.y-25})}};class Lr{constructor(ve){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=ve;const{event:{target:Ge}}=ve;this.props=ve,this.listeners=new kr((0,w.r3)(Ge)),this.windowListeners=new kr((0,w.Jj)(Ge)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Vr.Resize,this.handleCancel),this.windowListeners.add(Vr.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Vr.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:ve,onStart:Ge}=this.props,pr=ve.node.current;pr&&Qe(pr),Ge(X)}handleKeyDown(ve){if((0,w.vd)(ve)){const{active:Ge,context:pr,options:Xr}=this.props,{keyboardCodes:Yr=oe,coordinateGetter:Pr=Te,scrollBehavior:cn="smooth"}=Xr,{code:Mn}=ve;if(Yr.end.includes(Mn)){this.handleEnd(ve);return}if(Yr.cancel.includes(Mn)){this.handleCancel(ve);return}const{collisionRect:Bn}=pr.current,sa=Bn?{x:Bn.left,y:Bn.top}:X;this.referenceCoordinates||(this.referenceCoordinates=sa);const qn=Pr(ve,{active:Ge,context:pr.current,currentCoordinates:sa});if(qn){const ga=(0,w.$X)(qn,sa),ya={x:0,y:0},{scrollableAncestors:vi}=pr.current;for(const Sa of vi){const ua=ve.code,{isTop:fi,isRight:ei,isLeft:Ga,isBottom:Ii,maxScroll:yi,minScroll:za}=be(Sa),Va=vt(Sa),Da={x:Math.min(ua===nr.Right?Va.right-Va.width/2:Va.right,Math.max(ua===nr.Right?Va.left:Va.left+Va.width/2,qn.x)),y:Math.min(ua===nr.Down?Va.bottom-Va.height/2:Va.bottom,Math.max(ua===nr.Down?Va.top:Va.top+Va.height/2,qn.y))},Ri=ua===nr.Right&&!ei||ua===nr.Left&&!Ga,_i=ua===nr.Down&&!Ii||ua===nr.Up&&!fi;if(Ri&&Da.x!==qn.x){const ki=Sa.scrollLeft+ga.x,uo=ua===nr.Right&&ki<=yi.x||ua===nr.Left&&ki>=za.x;if(uo&&!ga.y){Sa.scrollTo({left:ki,behavior:cn});return}uo?ya.x=Sa.scrollLeft-ki:ya.x=ua===nr.Right?Sa.scrollLeft-yi.x:Sa.scrollLeft-za.x,ya.x&&Sa.scrollBy({left:-ya.x,behavior:cn});break}else if(_i&&Da.y!==qn.y){const ki=Sa.scrollTop+ga.y,uo=ua===nr.Down&&ki<=yi.y||ua===nr.Up&&ki>=za.y;if(uo&&!ga.x){Sa.scrollTo({top:ki,behavior:cn});return}uo?ya.y=Sa.scrollTop-ki:ya.y=ua===nr.Down?Sa.scrollTop-yi.y:Sa.scrollTop-za.y,ya.y&&Sa.scrollBy({top:-ya.y,behavior:cn});break}}this.handleMove(ve,(0,w.IH)((0,w.$X)(qn,this.referenceCoordinates),ya))}}}handleMove(ve,Ge){const{onMove:pr}=this.props;ve.preventDefault(),pr(Ge)}handleEnd(ve){const{onEnd:Ge}=this.props;ve.preventDefault(),this.detach(),Ge()}handleCancel(ve){const{onCancel:Ge}=this.props;ve.preventDefault(),this.detach(),Ge()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Lr.activators=[{eventName:"onKeyDown",handler:(Qt,ve,Ge)=>{let{keyboardCodes:pr=oe,onActivation:Xr}=ve,{active:Yr}=Ge;const{code:Pr}=Qt.nativeEvent;if(pr.start.includes(Pr)){const cn=Yr.activatorNode.current;return cn&&Qt.target!==cn?!1:(Qt.preventDefault(),Xr==null||Xr({event:Qt.nativeEvent}),!0)}return!1}}];function Nr(Qt){return!!(Qt&&"distance"in Qt)}function ln(Qt){return!!(Qt&&"delay"in Qt)}class en{constructor(ve,Ge,pr){var Xr;pr===void 0&&(pr=En(ve.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=ve,this.events=Ge;const{event:Yr}=ve,{target:Pr}=Yr;this.props=ve,this.events=Ge,this.document=(0,w.r3)(Pr),this.documentListeners=new kr(this.document),this.listeners=new kr(pr),this.windowListeners=new kr((0,w.Jj)(Pr)),this.initialCoordinates=(Xr=(0,w.DC)(Yr))!=null?Xr:X,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:ve,props:{options:{activationConstraint:Ge}}}=this;if(this.listeners.add(ve.move.name,this.handleMove,{passive:!1}),this.listeners.add(ve.end.name,this.handleEnd),this.windowListeners.add(Vr.Resize,this.handleCancel),this.windowListeners.add(Vr.DragStart,Je),this.windowListeners.add(Vr.VisibilityChange,this.handleCancel),this.windowListeners.add(Vr.ContextMenu,Je),this.documentListeners.add(Vr.Keydown,this.handleKeydown),Ge){if(Nr(Ge))return;if(ln(Ge)){this.timeoutId=setTimeout(this.handleStart,Ge.delay);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:ve}=this,{onStart:Ge}=this.props;ve&&(this.activated=!0,this.documentListeners.add(Vr.Click,dr,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Vr.SelectionChange,this.removeTextSelection),Ge(ve))}handleMove(ve){var Ge;const{activated:pr,initialCoordinates:Xr,props:Yr}=this,{onMove:Pr,options:{activationConstraint:cn}}=Yr;if(!Xr)return;const Mn=(Ge=(0,w.DC)(ve))!=null?Ge:X,Bn=(0,w.$X)(Xr,Mn);if(!pr&&cn){if(ln(cn))return fn(Bn,cn.tolerance)?this.handleCancel():void 0;if(Nr(cn))return cn.tolerance!=null&&fn(Bn,cn.tolerance)?this.handleCancel():fn(Bn,cn.distance)?this.handleStart():void 0}ve.cancelable&&ve.preventDefault(),Pr(Mn)}handleEnd(){const{onEnd:ve}=this.props;this.detach(),ve()}handleCancel(){const{onCancel:ve}=this.props;this.detach(),ve()}handleKeydown(ve){ve.code===nr.Esc&&this.handleCancel()}removeTextSelection(){var ve;(ve=this.document.getSelection())==null||ve.removeAllRanges()}}const Dr={move:{name:"pointermove"},end:{name:"pointerup"}};class Fr extends en{constructor(ve){const{event:Ge}=ve,pr=(0,w.r3)(Ge.target);super(ve,Dr,pr)}}Fr.activators=[{eventName:"onPointerDown",handler:(Qt,ve)=>{let{nativeEvent:Ge}=Qt,{onActivation:pr}=ve;return!Ge.isPrimary||Ge.button!==0?!1:(pr==null||pr({event:Ge}),!0)}}];const Kr={move:{name:"mousemove"},end:{name:"mouseup"}};var an;(function(Qt){Qt[Qt.RightClick=2]="RightClick"})(an||(an={}));class yn extends en{constructor(ve){super(ve,Kr,(0,w.r3)(ve.event.target))}}yn.activators=[{eventName:"onMouseDown",handler:(Qt,ve)=>{let{nativeEvent:Ge}=Qt,{onActivation:pr}=ve;return Ge.button===an.RightClick?!1:(pr==null||pr({event:Ge}),!0)}}];const bn={move:{name:"touchmove"},end:{name:"touchend"}};class tt extends en{constructor(ve){super(ve,bn)}static setup(){return window.addEventListener(bn.move.name,ve,{capture:!1,passive:!1}),function(){window.removeEventListener(bn.move.name,ve)};function ve(){}}}tt.activators=[{eventName:"onTouchStart",handler:(Qt,ve)=>{let{nativeEvent:Ge}=Qt,{onActivation:pr}=ve;const{touches:Xr}=Ge;return Xr.length>1?!1:(pr==null||pr({event:Ge}),!0)}}];var tr;(function(Qt){Qt[Qt.Pointer=0]="Pointer",Qt[Qt.DraggableRect=1]="DraggableRect"})(tr||(tr={}));var Kt;(function(Qt){Qt[Qt.TreeOrder=0]="TreeOrder",Qt[Qt.ReversedTreeOrder=1]="ReversedTreeOrder"})(Kt||(Kt={}));function $t(Qt){let{acceleration:ve,activator:Ge=tr.Pointer,canScroll:pr,draggingRect:Xr,enabled:Yr,interval:Pr=5,order:cn=Kt.TreeOrder,pointerCoordinates:Mn,scrollableAncestors:Bn,scrollableAncestorRects:sa,delta:qn,threshold:ga}=Qt;const ya=we({delta:qn,disabled:!Yr}),[vi,Sa]=(0,w.Yz)(),ua=(0,m.useRef)({x:0,y:0}),fi=(0,m.useRef)({x:0,y:0}),ei=(0,m.useMemo)(()=>{switch(Ge){case tr.Pointer:return Mn?{top:Mn.y,bottom:Mn.y,left:Mn.x,right:Mn.x}:null;case tr.DraggableRect:return Xr}},[Ge,Xr,Mn]),Ga=(0,m.useRef)(null),Ii=(0,m.useCallback)(()=>{const za=Ga.current;if(!za)return;const Va=ua.current.x*fi.current.x,Da=ua.current.y*fi.current.y;za.scrollBy(Va,Da)},[]),yi=(0,m.useMemo)(()=>cn===Kt.TreeOrder?[...Bn].reverse():Bn,[cn,Bn]);(0,m.useEffect)(()=>{if(!Yr||!Bn.length||!ei){Sa();return}for(const za of yi){if((pr==null?void 0:pr(za))===!1)continue;const Va=Bn.indexOf(za),Da=sa[Va];if(!Da)continue;const{direction:Ri,speed:_i}=he(za,Da,ei,ve,ga);for(const ki of["x","y"])ya[ki][Ri[ki]]||(_i[ki]=0,Ri[ki]=0);if(_i.x>0||_i.y>0){Sa(),Ga.current=za,vi(Ii,Pr),ua.current=_i,fi.current=Ri;return}}ua.current={x:0,y:0},fi.current={x:0,y:0},Sa()},[ve,Ii,pr,Sa,Yr,Pr,JSON.stringify(ei),JSON.stringify(ya),vi,Bn,yi,sa,JSON.stringify(ga)])}const Et={x:{[de.Backward]:!1,[de.Forward]:!1},y:{[de.Backward]:!1,[de.Forward]:!1}};function we(Qt){let{delta:ve,disabled:Ge}=Qt;const pr=(0,w.D9)(ve);return(0,w.Gj)(Xr=>{if(Ge||!pr||!Xr)return Et;const Yr={x:Math.sign(ve.x-pr.x),y:Math.sign(ve.y-pr.y)};return{x:{[de.Backward]:Xr.x[de.Backward]||Yr.x===-1,[de.Forward]:Xr.x[de.Forward]||Yr.x===1},y:{[de.Backward]:Xr.y[de.Backward]||Yr.y===-1,[de.Forward]:Xr.y[de.Forward]||Yr.y===1}}},[Ge,ve,pr])}function Dt(Qt,ve){const Ge=ve!==null?Qt.get(ve):void 0,pr=Ge?Ge.node.current:null;return(0,w.Gj)(Xr=>{var Yr;return ve===null?null:(Yr=pr!=null?pr:Xr)!=null?Yr:null},[pr,ve])}function Vt(Qt,ve){return(0,m.useMemo)(()=>Qt.reduce((Ge,pr)=>{const{sensor:Xr}=pr,Yr=Xr.activators.map(Pr=>({eventName:Pr.eventName,handler:ve(Pr.handler,pr)}));return[...Ge,...Yr]},[]),[Qt,ve])}var ht;(function(Qt){Qt[Qt.Always=0]="Always",Qt[Qt.BeforeDragging=1]="BeforeDragging",Qt[Qt.WhileDragging=2]="WhileDragging"})(ht||(ht={}));var kt;(function(Qt){Qt.Optimized="optimized"})(kt||(kt={}));const Q=new Map;function at(Qt,ve){let{dragging:Ge,dependencies:pr,config:Xr}=ve;const[Yr,Pr]=(0,m.useState)(null),{frequency:cn,measure:Mn,strategy:Bn}=Xr,sa=(0,m.useRef)(Qt),qn=ua(),ga=(0,w.Ey)(qn),ya=(0,m.useCallback)(function(fi){fi===void 0&&(fi=[]),!ga.current&&Pr(ei=>ei===null?fi:ei.concat(fi.filter(Ga=>!ei.includes(Ga))))},[ga]),vi=(0,m.useRef)(null),Sa=(0,w.Gj)(fi=>{if(qn&&!Ge)return Q;if(!fi||fi===Q||sa.current!==Qt||Yr!=null){const ei=new Map;for(let Ga of Qt){if(!Ga)continue;if(Yr&&Yr.length>0&&!Yr.includes(Ga.id)&&Ga.rect.current){ei.set(Ga.id,Ga.rect.current);continue}const Ii=Ga.node.current,yi=Ii?new fr(Mn(Ii),Ii):null;Ga.rect.current=yi,yi&&ei.set(Ga.id,yi)}return ei}return fi},[Qt,Yr,Ge,qn,Mn]);return(0,m.useEffect)(()=>{sa.current=Qt},[Qt]),(0,m.useEffect)(()=>{qn||ya()},[Ge,qn]),(0,m.useEffect)(()=>{Yr&&Yr.length>0&&Pr(null)},[JSON.stringify(Yr)]),(0,m.useEffect)(()=>{qn||typeof cn!="number"||vi.current!==null||(vi.current=setTimeout(()=>{ya(),vi.current=null},cn))},[cn,qn,ya,...pr]),{droppableRects:Sa,measureDroppableContainers:ya,measuringScheduled:Yr!=null};function ua(){switch(Bn){case ht.Always:return!1;case ht.BeforeDragging:return Ge;default:return!Ge}}}function B(Qt,ve){return(0,w.Gj)(Ge=>Qt?Ge||(typeof ve=="function"?ve(Qt):Qt):null,[ve,Qt])}function C(Qt,ve){return B(Qt,ve)}function I(Qt){let{callback:ve,disabled:Ge}=Qt;const pr=(0,w.zX)(ve),Xr=(0,m.useMemo)(()=>{if(Ge||typeof window=="undefined"||typeof window.MutationObserver=="undefined")return;const{MutationObserver:Yr}=window;return new Yr(pr)},[pr,Ge]);return(0,m.useEffect)(()=>()=>Xr==null?void 0:Xr.disconnect(),[Xr]),Xr}function H(Qt){let{callback:ve,disabled:Ge}=Qt;const pr=(0,w.zX)(ve),Xr=(0,m.useMemo)(()=>{if(Ge||typeof window=="undefined"||typeof window.ResizeObserver=="undefined")return;const{ResizeObserver:Yr}=window;return new Yr(pr)},[Ge]);return(0,m.useEffect)(()=>()=>Xr==null?void 0:Xr.disconnect(),[Xr]),Xr}function mt(Qt){return new fr(zt(Qt),Qt)}function Pt(Qt,ve,Ge){ve===void 0&&(ve=mt);const[pr,Xr]=(0,m.useReducer)(cn,null),Yr=I({callback(Mn){if(Qt)for(const Bn of Mn){const{type:sa,target:qn}=Bn;if(sa==="childList"&&qn instanceof HTMLElement&&qn.contains(Qt)){Xr();break}}}}),Pr=H({callback:Xr});return(0,w.LI)(()=>{Xr(),Qt?(Pr==null||Pr.observe(Qt),Yr==null||Yr.observe(document.body,{childList:!0,subtree:!0})):(Pr==null||Pr.disconnect(),Yr==null||Yr.disconnect())},[Qt]),pr;function cn(Mn){if(!Qt)return null;if(Qt.isConnected===!1){var Bn;return(Bn=Mn!=null?Mn:Ge)!=null?Bn:null}const sa=ve(Qt);return JSON.stringify(Mn)===JSON.stringify(sa)?Mn:sa}}function Lt(Qt){const ve=B(Qt);return et(Qt,ve)}const Jt=[];function Oe(Qt){const ve=(0,m.useRef)(Qt),Ge=(0,w.Gj)(pr=>Qt?pr&&pr!==Jt&&Qt&&ve.current&&Qt.parentNode===ve.current.parentNode?pr:ue(Qt):Jt,[Qt]);return(0,m.useEffect)(()=>{ve.current=Qt},[Qt]),Ge}function ye(Qt){const[ve,Ge]=(0,m.useState)(null),pr=(0,m.useRef)(Qt),Xr=(0,m.useCallback)(Yr=>{const Pr=Gt(Yr.target);Pr&&Ge(cn=>cn?(cn.set(Pr,ee(Pr)),new Map(cn)):null)},[]);return(0,m.useEffect)(()=>{const Yr=pr.current;if(Qt!==Yr){Pr(Yr);const cn=Qt.map(Mn=>{const Bn=Gt(Mn);return Bn?(Bn.addEventListener("scroll",Xr,{passive:!0}),[Bn,ee(Bn)]):null}).filter(Mn=>Mn!=null);Ge(cn.length?new Map(cn):null),pr.current=Qt}return()=>{Pr(Qt),Pr(Yr)};function Pr(cn){cn.forEach(Mn=>{const Bn=Gt(Mn);Bn==null||Bn.removeEventListener("scroll",Xr)})}},[Xr,Qt]),(0,m.useMemo)(()=>Qt.length?ve?Array.from(ve.values()).reduce((Yr,Pr)=>(0,w.IH)(Yr,Pr),X):ie(Qt):X,[Qt,ve])}function Ze(Qt,ve){ve===void 0&&(ve=[]);const Ge=(0,m.useRef)(null);return(0,m.useEffect)(()=>{Ge.current=null},ve),(0,m.useEffect)(()=>{const pr=Qt!==X;pr&&!Ge.current&&(Ge.current=Qt),!pr&&Ge.current&&(Ge.current=null)},[Qt]),Ge.current?(0,w.$X)(Qt,Ge.current):X}function wr(Qt){(0,m.useEffect)(()=>{if(!w.Nq)return;const ve=Qt.map(Ge=>{let{sensor:pr}=Ge;return pr.setup==null?void 0:pr.setup()});return()=>{for(const Ge of ve)Ge==null||Ge()}},Qt.map(ve=>{let{sensor:Ge}=ve;return Ge}))}function er(Qt,ve){return(0,m.useMemo)(()=>Qt.reduce((Ge,pr)=>{let{eventName:Xr,handler:Yr}=pr;return Ge[Xr]=Pr=>{Yr(Pr,ve)},Ge},{}),[Qt,ve])}function Ur(Qt){return(0,m.useMemo)(()=>Qt?_t(Qt):null,[Qt])}const xn=[];function rr(Qt,ve){ve===void 0&&(ve=zt);const[Ge]=Qt,pr=Ur(Ge?(0,w.Jj)(Ge):null),[Xr,Yr]=(0,m.useReducer)(cn,xn),Pr=H({callback:Yr});return Qt.length>0&&Xr===xn&&Yr(),(0,w.LI)(()=>{Qt.length?Qt.forEach(Mn=>Pr==null?void 0:Pr.observe(Mn)):(Pr==null||Pr.disconnect(),Yr())},[Qt]),Xr;function cn(){return Qt.length?Qt.map(Mn=>ze(Mn)?pr:new fr(ve(Mn),Mn)):xn}}function xr(Qt){if(!Qt)return null;if(Qt.children.length>1)return Qt;const ve=Qt.children[0];return(0,w.Re)(ve)?ve:Qt}function Wr(Qt){let{measure:ve}=Qt;const[Ge,pr]=(0,m.useState)(null),Xr=(0,m.useCallback)(Bn=>{for(const{target:sa}of Bn)if((0,w.Re)(sa)){pr(qn=>{const ga=ve(sa);return qn?xo(Na({},qn),{width:ga.width,height:ga.height}):ga});break}},[ve]),Yr=H({callback:Xr}),Pr=(0,m.useCallback)(Bn=>{const sa=xr(Bn);Yr==null||Yr.disconnect(),sa&&(Yr==null||Yr.observe(sa)),pr(sa?ve(sa):null)},[ve,Yr]),[cn,Mn]=(0,w.wm)(Pr);return(0,m.useMemo)(()=>({nodeRef:cn,rect:Ge,setRef:Mn}),[Ge,cn,Mn])}const Gr=[{sensor:Fr,options:{}},{sensor:Lr,options:{}}],ce={current:{}},Yt={draggable:{measure:Wt},droppable:{measure:Wt,strategy:ht.WhileDragging,frequency:kt.Optimized},dragOverlay:{measure:zt}};class ge extends Map{get(ve){var Ge;return ve!=null&&(Ge=super.get(ve))!=null?Ge:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(ve=>{let{disabled:Ge}=ve;return!Ge})}getNodeFor(ve){var Ge,pr;return(Ge=(pr=this.get(ve))==null?void 0:pr.node.current)!=null?Ge:void 0}}const Ie={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new ge,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:y},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Yt,measureDroppableContainers:y,windowRect:null,measuringScheduled:!1},xe={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:y,draggableNodes:new Map,over:null,measureDroppableContainers:y},Ye=(0,m.createContext)(xe),gr=(0,m.createContext)(Ie);function Mr(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new ge}}}function vn(Qt,ve){switch(ve.type){case k.DragStart:return xo(Na({},Qt),{draggable:xo(Na({},Qt.draggable),{initialCoordinates:ve.initialCoordinates,active:ve.active})});case k.DragMove:return Qt.draggable.active?xo(Na({},Qt),{draggable:xo(Na({},Qt.draggable),{translate:{x:ve.coordinates.x-Qt.draggable.initialCoordinates.x,y:ve.coordinates.y-Qt.draggable.initialCoordinates.y}})}):Qt;case k.DragEnd:case k.DragCancel:return xo(Na({},Qt),{draggable:xo(Na({},Qt.draggable),{active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}})});case k.RegisterDroppable:{const{element:Ge}=ve,{id:pr}=Ge,Xr=new ge(Qt.droppable.containers);return Xr.set(pr,Ge),xo(Na({},Qt),{droppable:xo(Na({},Qt.droppable),{containers:Xr})})}case k.SetDroppableDisabled:{const{id:Ge,key:pr,disabled:Xr}=ve,Yr=Qt.droppable.containers.get(Ge);if(!Yr||pr!==Yr.key)return Qt;const Pr=new ge(Qt.droppable.containers);return Pr.set(Ge,xo(Na({},Yr),{disabled:Xr})),xo(Na({},Qt),{droppable:xo(Na({},Qt.droppable),{containers:Pr})})}case k.UnregisterDroppable:{const{id:Ge,key:pr}=ve,Xr=Qt.droppable.containers.get(Ge);if(!Xr||pr!==Xr.key)return Qt;const Yr=new ge(Qt.droppable.containers);return Yr.delete(Ge),xo(Na({},Qt),{droppable:xo(Na({},Qt.droppable),{containers:Yr})})}default:return Qt}}function Wn(Qt){let{disabled:ve}=Qt;const{active:Ge,activatorEvent:pr,draggableNodes:Xr}=(0,m.useContext)(Ye),Yr=(0,w.D9)(pr),Pr=(0,w.D9)(Ge==null?void 0:Ge.id);return(0,m.useEffect)(()=>{if(!ve&&!pr&&Yr&&Pr!=null){if(!(0,w.vd)(Yr)||document.activeElement===Yr.target)return;const cn=Xr.get(Pr);if(!cn)return;const{activatorNode:Mn,node:Bn}=cn;if(!Mn.current&&!Bn.current)return;requestAnimationFrame(()=>{for(const sa of[Mn.current,Bn.current]){if(!sa)continue;const qn=(0,w.so)(sa);if(qn){qn.focus();break}}})}},[pr,ve,Xr,Pr,Yr]),null}function Sn(Qt,ve){let Xr=ve,{transform:Ge}=Xr,pr=Th(Xr,["transform"]);return Qt!=null&&Qt.length?Qt.reduce((Yr,Pr)=>Pr(Na({transform:Yr},pr)),Ge):Ge}function ea(Qt){return(0,m.useMemo)(()=>({draggable:Na(Na({},Yt.draggable),Qt==null?void 0:Qt.draggable),droppable:Na(Na({},Yt.droppable),Qt==null?void 0:Qt.droppable),dragOverlay:Na(Na({},Yt.dragOverlay),Qt==null?void 0:Qt.dragOverlay)}),[Qt==null?void 0:Qt.draggable,Qt==null?void 0:Qt.droppable,Qt==null?void 0:Qt.dragOverlay])}function wn(Qt){let{activeNode:ve,measure:Ge,initialRect:pr,config:Xr=!0}=Qt;const Yr=(0,m.useRef)(!1),{x:Pr,y:cn}=typeof Xr=="boolean"?{x:Xr,y:Xr}:Xr;(0,w.LI)(()=>{if(!Pr&&!cn||!ve){Yr.current=!1;return}if(Yr.current||!pr)return;const Bn=ve==null?void 0:ve.node.current;if(!Bn||Bn.isConnected===!1)return;const sa=Ge(Bn),qn=et(sa,pr);if(Pr||(qn.x=0),cn||(qn.y=0),Yr.current=!0,Math.abs(qn.x)>0||Math.abs(qn.y)>0){const ga=fe(Bn);ga&&ga.scrollBy({top:qn.y,left:qn.x})}},[ve,Pr,cn,pr,Ge])}const Hn=(0,m.createContext)(xo(Na({},X),{scaleX:1,scaleY:1}));var la;(function(Qt){Qt[Qt.Uninitialized=0]="Uninitialized",Qt[Qt.Initializing=1]="Initializing",Qt[Qt.Initialized=2]="Initialized"})(la||(la={}));const ba=(0,m.memo)(function(ve){var Ge,pr,Xr,Yr;let wu=ve,{id:Pr,accessibility:cn,autoScroll:Mn=!0,children:Bn,sensors:sa=Gr,collisionDetection:qn=dt,measuring:ga,modifiers:ya}=wu,vi=Th(wu,["id","accessibility","autoScroll","children","sensors","collisionDetection","measuring","modifiers"]);const Sa=(0,m.useReducer)(vn,void 0,Mr),[ua,fi]=Sa,[ei,Ga]=g(),[Ii,yi]=(0,m.useState)(la.Uninitialized),za=Ii===la.Initialized,{draggable:{active:Va,nodes:Da,translate:Ri},droppable:{containers:_i}}=ua,ki=Va?Da.get(Va):null,uo=(0,m.useRef)({initial:null,translated:null}),qi=(0,m.useMemo)(()=>{var yo;return Va!=null?{id:Va,data:(yo=ki==null?void 0:ki.data)!=null?yo:ce,rect:uo}:null},[Va,ki]),po=(0,m.useRef)(null),[es,rs]=(0,m.useState)(null),[no,ni]=(0,m.useState)(null),zi=(0,w.Ey)(vi,Object.values(vi)),fo=(0,w.Ld)("DndDescribedBy",Pr),Xa=(0,m.useMemo)(()=>_i.getEnabled(),[_i]),go=ea(ga),{droppableRects:No,measureDroppableContainers:Hi,measuringScheduled:as}=at(Xa,{dragging:za,dependencies:[Ri.x,Ri.y],config:go.droppable}),Gi=Dt(Da,Va),Ro=(0,m.useMemo)(()=>no?(0,w.DC)(no):null,[no]),ss=Eu(),Ss=C(Gi,go.draggable.measure);wn({activeNode:Va?Da.get(Va):null,config:ss.layoutShiftCompensation,initialRect:Ss,measure:go.draggable.measure});const mo=Pt(Gi,go.draggable.measure,Ss),us=Pt(Gi?Gi.parentElement:null),fs=(0,m.useRef)({activatorEvent:null,active:null,activeNode:Gi,collisionRect:null,collisions:null,droppableRects:No,draggableNodes:Da,draggingNode:null,draggingNodeRect:null,droppableContainers:_i,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Is=_i.getNodeFor((Ge=fs.current.over)==null?void 0:Ge.id),Aa=Wr({measure:go.dragOverlay.measure}),Ut=(pr=Aa.nodeRef.current)!=null?pr:Gi,Xe=za?(Xr=Aa.rect)!=null?Xr:mo:null,cr=!!(Aa.nodeRef.current&&Aa.rect),_r=Lt(cr?null:mo),on=Ur(Ut?(0,w.Jj)(Ut):null),_n=Oe(za?Is!=null?Is:Gi:null),$n=rr(_n),qa=Sn(ya,{transform:{x:Ri.x-_r.x,y:Ri.y-_r.y,scaleX:1,scaleY:1},activatorEvent:no,active:qi,activeNodeRect:mo,containerNodeRect:us,draggingNodeRect:Xe,over:fs.current.over,overlayNodeRect:Aa.rect,scrollableAncestors:_n,scrollableAncestorRects:$n,windowRect:on}),Bi=Ro?(0,w.IH)(Ro,Ri):null,Oo=ye(_n),jo=Ze(Oo),Rs=Ze(Oo,[mo]),Qi=(0,w.IH)(qa,jo),Io=Xe?Tt(Xe,qa):null,cs=qi&&Io?qn({active:qi,collisionRect:Io,droppableRects:No,droppableContainers:Xa,pointerCoordinates:Bi}):null,ks=$(cs,"id"),[ls,js]=(0,m.useState)(null),Ks=cr?qa:(0,w.IH)(qa,Rs),Vs=St(Ks,(Yr=ls==null?void 0:ls.rect)!=null?Yr:null,mo),hu=(0,m.useCallback)((yo,Vo)=>{let{sensor:os,options:h}=Vo;if(po.current==null)return;const Y=Da.get(po.current);if(!Y)return;const Mt=yo.nativeEvent,Bt=new os({active:po.current,activeNode:Y,event:Mt,options:h,context:fs,onStart(pe){const me=po.current;if(me==null)return;const De=Da.get(me);if(!De)return;const{onDragStart:Ue}=zi.current,$e={active:{id:me,data:De.data,rect:uo}};(0,R.unstable_batchedUpdates)(()=>{Ue==null||Ue($e),yi(la.Initializing),fi({type:k.DragStart,initialCoordinates:pe,active:me}),ei({type:"onDragStart",event:$e})})},onMove(pe){fi({type:k.DragMove,coordinates:pe})},onEnd:qt(k.DragEnd),onCancel:qt(k.DragCancel)});(0,R.unstable_batchedUpdates)(()=>{rs(Bt),ni(yo.nativeEvent)});function qt(pe){return function(){return V0(this,null,function*(){const{active:De,collisions:Ue,over:$e,scrollAdjustedTranslate:mr}=fs.current;let qr=null;if(De&&mr){const{cancelDrop:tn}=zi.current;qr={activatorEvent:Mt,active:De,collisions:Ue,delta:mr,over:$e},pe===k.DragEnd&&typeof tn=="function"&&(yield Promise.resolve(tn(qr)))&&(pe=k.DragCancel)}po.current=null,(0,R.unstable_batchedUpdates)(()=>{fi({type:pe}),yi(la.Uninitialized),js(null),rs(null),ni(null);const tn=pe===k.DragEnd?"onDragEnd":"onDragCancel";if(qr){const Qr=zi.current[tn];Qr==null||Qr(qr),ei({type:tn,event:qr})}})})}}},[Da]),ds=(0,m.useCallback)((yo,Vo)=>(os,h)=>{const Y=os.nativeEvent,Mt=Da.get(h);if(po.current!==null||!Mt||Y.dndKit||Y.defaultPrevented)return;const Bt={active:Mt};yo(os,Vo.options,Bt)===!0&&(Y.dndKit={capturedBy:Vo.sensor},po.current=h,hu(os,Vo))},[Da,hu]),Ds=Vt(sa,ds);wr(sa),(0,w.LI)(()=>{mo&&Ii===la.Initializing&&yi(la.Initialized)},[mo,Ii]),(0,m.useEffect)(()=>{const{onDragMove:yo}=zi.current,{active:Vo,activatorEvent:os,collisions:h,over:Y}=fs.current;if(!Vo||!os)return;const Mt={active:Vo,activatorEvent:os,collisions:h,delta:{x:Qi.x,y:Qi.y},over:Y};(0,R.unstable_batchedUpdates)(()=>{yo==null||yo(Mt),ei({type:"onDragMove",event:Mt})})},[Qi.x,Qi.y]),(0,m.useEffect)(()=>{const{active:yo,activatorEvent:Vo,collisions:os,droppableContainers:h,scrollAdjustedTranslate:Y}=fs.current;if(!yo||po.current==null||!Vo||!Y)return;const{onDragOver:Mt}=zi.current,Bt=h.get(ks),qt=Bt&&Bt.rect.current?{id:Bt.id,rect:Bt.rect.current,data:Bt.data,disabled:Bt.disabled}:null,pe={active:yo,activatorEvent:Vo,collisions:os,delta:{x:Y.x,y:Y.y},over:qt};(0,R.unstable_batchedUpdates)(()=>{js(qt),Mt==null||Mt(pe),ei({type:"onDragOver",event:pe})})},[ks]),(0,w.LI)(()=>{fs.current={activatorEvent:no,active:qi,activeNode:Gi,collisionRect:Io,collisions:cs,droppableRects:No,draggableNodes:Da,draggingNode:Ut,draggingNodeRect:Xe,droppableContainers:_i,over:ls,scrollableAncestors:_n,scrollAdjustedTranslate:Qi},uo.current={initial:Xe,translated:Io}},[qi,Gi,cs,Io,Da,Ut,Xe,No,_i,ls,_n,Qi]),$t(xo(Na({},ss),{delta:Ri,draggingRect:Io,pointerCoordinates:Bi,scrollableAncestors:_n,scrollableAncestorRects:$n}));const Bs=(0,m.useMemo)(()=>({active:qi,activeNode:Gi,activeNodeRect:mo,activatorEvent:no,collisions:cs,containerNodeRect:us,dragOverlay:Aa,draggableNodes:Da,droppableContainers:_i,droppableRects:No,over:ls,measureDroppableContainers:Hi,scrollableAncestors:_n,scrollableAncestorRects:$n,measuringConfiguration:go,measuringScheduled:as,windowRect:on}),[qi,Gi,mo,no,cs,us,Aa,Da,_i,No,ls,Hi,_n,$n,go,as,on]),is=(0,m.useMemo)(()=>({activatorEvent:no,activators:Ds,active:qi,activeNodeRect:mo,ariaDescribedById:{draggable:fo},dispatch:fi,draggableNodes:Da,over:ls,measureDroppableContainers:Hi}),[no,Ds,qi,mo,fi,fo,Da,ls,Hi]);return m.createElement(S.Provider,{value:Ga},m.createElement(Ye.Provider,{value:is},m.createElement(gr.Provider,{value:Bs},m.createElement(Hn.Provider,{value:Vs},Bn)),m.createElement(Wn,{disabled:(cn==null?void 0:cn.restoreFocus)===!1})),m.createElement(O,xo(Na({},cn),{hiddenTextDescribedById:fo})));function Eu(){const yo=(es==null?void 0:es.autoScrollEnabled)===!1,Vo=typeof Mn=="object"?Mn.enabled===!1:Mn===!1,os=za&&!yo&&!Vo;return typeof Mn=="object"?xo(Na({},Mn),{enabled:os}):{enabled:os}}}),xa=(0,m.createContext)(null),Yi="button",ri="Droppable";function ti(Qt){let{id:ve,data:Ge,disabled:pr=!1,attributes:Xr}=Qt;const Yr=(0,w.Ld)(ri),{activators:Pr,activatorEvent:cn,active:Mn,activeNodeRect:Bn,ariaDescribedById:sa,draggableNodes:qn,over:ga}=(0,m.useContext)(Ye),{role:ya=Yi,roleDescription:vi="draggable",tabIndex:Sa=0}=Xr!=null?Xr:{},ua=(Mn==null?void 0:Mn.id)===ve,fi=(0,m.useContext)(ua?Hn:xa),[ei,Ga]=(0,w.wm)(),[Ii,yi]=(0,w.wm)(),za=er(Pr,ve),Va=(0,w.Ey)(Ge);(0,w.LI)(()=>(qn.set(ve,{id:ve,key:Yr,node:ei,activatorNode:Ii,data:Va}),()=>{const Ri=qn.get(ve);Ri&&Ri.key===Yr&&qn.delete(ve)}),[qn,ve]);const Da=(0,m.useMemo)(()=>({role:ya,tabIndex:Sa,"aria-disabled":pr,"aria-pressed":ua&&ya===Yi?!0:void 0,"aria-roledescription":vi,"aria-describedby":sa.draggable}),[pr,ya,Sa,ua,vi,sa.draggable]);return{active:Mn,activatorEvent:cn,activeNodeRect:Bn,attributes:Da,isDragging:ua,listeners:pr?void 0:za,node:ei,over:ga,setNodeRef:Ga,setActivatorNodeRef:yi,transform:fi}}function Mi(){return(0,m.useContext)(gr)}const Vi="Droppable",ao={timeout:25};function io(Qt){let{data:ve,disabled:Ge=!1,id:pr,resizeObserverConfig:Xr}=Qt;const Yr=(0,w.Ld)(Vi),{active:Pr,dispatch:cn,over:Mn,measureDroppableContainers:Bn}=(0,m.useContext)(Ye),sa=(0,m.useRef)({disabled:Ge}),qn=(0,m.useRef)(!1),ga=(0,m.useRef)(null),ya=(0,m.useRef)(null),{disabled:vi,updateMeasurementsFor:Sa,timeout:ua}=Na(Na({},ao),Xr),fi=(0,w.Ey)(Sa!=null?Sa:pr),ei=(0,m.useCallback)(()=>{if(!qn.current){qn.current=!0;return}ya.current!=null&&clearTimeout(ya.current),ya.current=setTimeout(()=>{Bn(Array.isArray(fi.current)?fi.current:[fi.current]),ya.current=null},ua)},[ua]),Ga=H({callback:ei,disabled:vi||!Pr}),Ii=(0,m.useCallback)((Da,Ri)=>{Ga&&(Ri&&(Ga.unobserve(Ri),qn.current=!1),Da&&Ga.observe(Da))},[Ga]),[yi,za]=(0,w.wm)(Ii),Va=(0,w.Ey)(ve);return(0,m.useEffect)(()=>{!Ga||!yi.current||(Ga.disconnect(),qn.current=!1,Ga.observe(yi.current))},[yi,Ga]),(0,w.LI)(()=>(cn({type:k.RegisterDroppable,element:{id:pr,key:Yr,disabled:Ge,node:yi,rect:ga,data:Va}}),()=>cn({type:k.UnregisterDroppable,key:Yr,id:pr})),[pr]),(0,m.useEffect)(()=>{Ge!==sa.current.disabled&&(cn({type:k.SetDroppableDisabled,id:pr,key:Yr,disabled:Ge}),sa.current.disabled=Ge)},[pr,Yr,Ge,cn]),{active:Pr,rect:ga,isOver:(Mn==null?void 0:Mn.id)===pr,node:yi,over:Mn,setNodeRef:za}}function wa(Qt){let{animation:ve,children:Ge}=Qt;const[pr,Xr]=useState(null),[Yr,Pr]=useState(null),cn=usePrevious(Ge);return!Ge&&!pr&&cn&&Xr(cn),useIsomorphicLayoutEffect(()=>{if(!Yr)return;const Mn=pr==null?void 0:pr.key,Bn=pr==null?void 0:pr.props.id;if(Mn==null||Bn==null){Xr(null);return}Promise.resolve(ve(Bn,Yr)).then(()=>{Xr(null)})},[ve,pr,Yr]),React.createElement(React.Fragment,null,Ge,pr?cloneElement(pr,{ref:Pr}):null)}const oo={x:0,y:0,scaleX:1,scaleY:1};function To(Qt){let{children:ve}=Qt;return React.createElement(Ye.Provider,{value:xe},React.createElement(Hn.Provider,{value:oo},ve))}const ii={position:"fixed",touchAction:"none"},Xi=Qt=>isKeyboardEvent(Qt)?"transform 250ms ease":void 0,so=null,vo={duration:250,easing:"ease",keyframes:Qt=>{let{transform:{initial:ve,final:Ge}}=Qt;return[{transform:w.ux.Transform.toString(ve)},{transform:w.ux.Transform.toString(Ge)}]},sideEffects:(Qt=>ve=>{let{active:Ge,dragOverlay:pr}=ve;const Xr={},{styles:Yr,className:Pr}=Qt;if(Yr!=null&&Yr.active)for(const[cn,Mn]of Object.entries(Yr.active))Mn!==void 0&&(Xr[cn]=Ge.node.style.getPropertyValue(cn),Ge.node.style.setProperty(cn,Mn));if(Yr!=null&&Yr.dragOverlay)for(const[cn,Mn]of Object.entries(Yr.dragOverlay))Mn!==void 0&&pr.node.style.setProperty(cn,Mn);return Pr!=null&&Pr.active&&Ge.node.classList.add(Pr.active),Pr!=null&&Pr.dragOverlay&&pr.node.classList.add(Pr.dragOverlay),function(){for(const[Mn,Bn]of Object.entries(Xr))Ge.node.style.setProperty(Mn,Bn);Pr!=null&&Pr.active&&Ge.node.classList.remove(Pr.active)}})({styles:{active:{opacity:"0"}}})};function Ao(Qt){let{config:ve,draggableNodes:Ge,droppableContainers:pr,measuringConfiguration:Xr}=Qt;return useEvent((Yr,Pr)=>{if(ve===null)return;const cn=Ge.get(Yr);if(!cn)return;const Mn=cn.node.current;if(!Mn)return;const Bn=xr(Pr);if(!Bn)return;const{transform:sa}=getWindow(Pr).getComputedStyle(Pr),qn=Nt(sa);if(!qn)return;const ga=typeof ve=="function"?ve:Go(ve);return Qe(Mn,Xr.draggable.measure),ga({active:{id:Yr,data:cn.data,node:Mn,rect:Xr.draggable.measure(Mn)},draggableNodes:Ge,dragOverlay:{node:Pr,rect:Xr.dragOverlay.measure(Bn)},droppableContainers:pr,measuringConfiguration:Xr,transform:qn})})}function Go(Qt){const{duration:ve,easing:Ge,sideEffects:pr,keyframes:Xr}=Na(Na({},vo),Qt);return Yr=>{let ei=Yr,{active:Pr,dragOverlay:cn,transform:Mn}=ei,Bn=Th(ei,["active","dragOverlay","transform"]);if(!ve)return;const sa={x:cn.rect.left-Pr.rect.left,y:cn.rect.top-Pr.rect.top},qn={scaleX:Mn.scaleX!==1?Pr.rect.width*Mn.scaleX/cn.rect.width:1,scaleY:Mn.scaleY!==1?Pr.rect.height*Mn.scaleY/cn.rect.height:1},ga=Na({x:Mn.x-sa.x,y:Mn.y-sa.y},qn),ya=Xr(xo(Na({},Bn),{active:Pr,dragOverlay:cn,transform:{initial:Mn,final:ga}})),[vi]=ya,Sa=ya[ya.length-1];if(JSON.stringify(vi)===JSON.stringify(Sa))return;const ua=pr==null?void 0:pr(Na({active:Pr,dragOverlay:cn},Bn)),fi=cn.node.animate(ya,{duration:ve,easing:Ge,fill:"forwards"});return new Promise(Ga=>{fi.onfinish=()=>{ua==null||ua(),Ga()}})}}let Ai=0;function $i(Qt){return useMemo(()=>{if(Qt!=null)return Ai++,Ai},[Qt])}const oa=null},332339:function(We,G,_){"use strict";_.d(G,{DL:function(){return p}});var m=_(724285);function R(x){return g=>{let{transform:T}=g;return xo(Na({},T),{x:Math.ceil(T.x/x)*x,y:Math.ceil(T.y/x)*x})}}const w=x=>{let{transform:g}=x;return xo(Na({},g),{y:0})};function M(x,g,T){const E=Na({},x);return g.top+x.y<=T.top?E.y=T.top-g.top:g.bottom+x.y>=T.top+T.height&&(E.y=T.top+T.height-g.bottom),g.left+x.x<=T.left?E.x=T.left-g.left:g.right+x.x>=T.left+T.width&&(E.x=T.left+T.width-g.right),E}const P=x=>{let{containerNodeRect:g,draggingNodeRect:T,transform:E}=x;return!T||!g?E:M(E,T,g)},L=x=>{let{draggingNodeRect:g,transform:T,scrollableAncestorRects:E}=x;const O=E[0];return!g||!O?T:M(T,g,O)},p=x=>{let{transform:g}=x;return xo(Na({},g),{x:0})},b=x=>{let{transform:g,draggingNodeRect:T,windowRect:E}=x;return!T||!E?g:M(g,T,E)},S=x=>{let{activatorEvent:g,draggingNodeRect:T,transform:E}=x;if(T&&g){const O=getEventCoordinates(g);if(!O)return E;const k=O.x-T.left,y=O.y-T.top;return xo(Na({},E),{x:E.x+k-T.width/2,y:E.y+y-T.height/2})}return E}},245587:function(We,G,_){"use strict";_.d(G,{Fo:function(){return F},PG:function(){return g},Rp:function(){return M},nB:function(){return nt},qw:function(){return y}});var m=_(667294),R=_(960887),w=_(724285);function M(it,Tt,Nt){const st=it.slice();return st.splice(Nt<0?st.length+Nt:Nt,0,st.splice(Tt,1)[0]),st}function P(it,Tt,Nt){const st=it.slice();return st[Tt]=it[Nt],st[Nt]=it[Tt],st}function L(it,Tt){return it.reduce((Nt,st,xt)=>{const zt=Tt.get(st);return zt&&(Nt[xt]=zt),Nt},Array(it.length))}function p(it){return it!==null&&it>=0}function b(it,Tt){if(it===Tt)return!0;if(it.length!==Tt.length)return!1;for(let Nt=0;Nt<it.length;Nt++)if(it[Nt]!==Tt[Nt])return!1;return!0}function S(it){return typeof it=="boolean"?{draggable:it,droppable:it}:it}const x={scaleX:1,scaleY:1},g=it=>{var Tt;let{rects:Nt,activeNodeRect:st,activeIndex:xt,overIndex:zt,index:Wt}=it;const _t=(Tt=Nt[xt])!=null?Tt:st;if(!_t)return null;const Xt=T(Nt,Wt,xt);if(Wt===xt){const te=Nt[zt];return te?Na({x:xt<zt?te.left+te.width-(_t.left+_t.width):te.left-_t.left,y:0},x):null}return Wt>xt&&Wt<=zt?Na({x:-_t.width-Xt,y:0},x):Wt<xt&&Wt>=zt?Na({x:_t.width+Xt,y:0},x):Na({x:0,y:0},x)};function T(it,Tt,Nt){const st=it[Tt],xt=it[Tt-1],zt=it[Tt+1];return!st||!xt&&!zt?0:Nt<Tt?xt?st.left-(xt.left+xt.width):zt.left-(st.left+st.width):zt?zt.left-(st.left+st.width):st.left-(xt.left+xt.width)}const E=it=>{let{rects:Tt,activeIndex:Nt,overIndex:st,index:xt}=it;const zt=M(Tt,st,Nt),Wt=Tt[xt],_t=zt[xt];return!_t||!Wt?null:{x:_t.left-Wt.left,y:_t.top-Wt.top,scaleX:_t.width/Wt.width,scaleY:_t.height/Wt.height}},O=it=>{let{activeIndex:Tt,index:Nt,rects:st,overIndex:xt}=it,zt,Wt;return Nt===Tt&&(zt=st[Nt],Wt=st[xt]),Nt===xt&&(zt=st[Nt],Wt=st[Tt]),!Wt||!zt?null:{x:Wt.left-zt.left,y:Wt.top-zt.top,scaleX:Wt.width/zt.width,scaleY:Wt.height/zt.height}},k={scaleX:1,scaleY:1},y=it=>{var Tt;let{activeIndex:Nt,activeNodeRect:st,index:xt,rects:zt,overIndex:Wt}=it;const _t=(Tt=zt[Nt])!=null?Tt:st;if(!_t)return null;if(xt===Nt){const te=zt[Wt];return te?Na({x:0,y:Nt<Wt?te.top+te.height-(_t.top+_t.height):te.top-_t.top},k):null}const Xt=l(zt,xt,Nt);return xt>Nt&&xt<=Wt?Na({x:0,y:-_t.height-Xt},k):xt<Nt&&xt>=Wt?Na({x:0,y:_t.height+Xt},k):Na({x:0,y:0},k)};function l(it,Tt,Nt){const st=it[Tt],xt=it[Tt-1],zt=it[Tt+1];return st?Nt<Tt?xt?st.top-(xt.top+xt.height):zt?zt.top-(st.top+st.height):0:zt?zt.top-(st.top+st.height):xt?st.top-(xt.top+xt.height):0:0}const U="Sortable",X=m.createContext({activeIndex:-1,containerId:U,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:E,disabled:{draggable:!1,droppable:!1}});function F(it){let{children:Tt,id:Nt,items:st,strategy:xt=E,disabled:zt=!1}=it;const{active:Wt,dragOverlay:_t,droppableRects:Xt,over:te,measureDroppableContainers:ue}=(0,R.Cj)(),fe=(0,w.Ld)(U,Nt),Gt=_t.rect!==null,ae=(0,m.useMemo)(()=>st.map(ie=>typeof ie=="object"&&"id"in ie?ie.id:ie),[st]),Ne=Wt!=null,ee=Wt?ae.indexOf(Wt.id):-1,de=te?ae.indexOf(te.id):-1,ze=(0,m.useRef)(ae),be=!b(ae,ze.current),ke=de!==-1&&ee===-1||be,he=S(zt);(0,w.LI)(()=>{be&&Ne&&ue(ae)},[be,ae,Ne,ue]),(0,m.useEffect)(()=>{ze.current=ae},[ae]);const vt=(0,m.useMemo)(()=>({activeIndex:ee,containerId:fe,disabled:he,disableTransforms:ke,items:ae,overIndex:de,useDragOverlay:Gt,sortedRects:L(ae,Xt),strategy:xt}),[ee,fe,he.draggable,he.droppable,ke,ae,de,Xt,Gt,xt]);return m.createElement(X.Provider,{value:vt},Tt)}const W=it=>{let{id:Tt,items:Nt,activeIndex:st,overIndex:xt}=it;return M(Nt,st,xt).indexOf(Tt)},j=it=>{let{containerId:Tt,isSorting:Nt,wasDragging:st,index:xt,items:zt,newIndex:Wt,previousItems:_t,previousContainerId:Xt,transition:te}=it;return!te||!st||_t!==zt&&xt===Wt?!1:Nt?!0:Wt!==xt&&Tt===Xt},V={duration:200,easing:"ease"},q="transform",$=w.ux.Transition.toString({property:q,duration:0,easing:"linear"}),J={roleDescription:"sortable"};function ut(it){let{disabled:Tt,index:Nt,node:st,rect:xt}=it;const[zt,Wt]=(0,m.useState)(null),_t=(0,m.useRef)(Nt);return(0,w.LI)(()=>{if(!Tt&&Nt!==_t.current&&st.current){const Xt=xt.current;if(Xt){const te=(0,R.VK)(st.current,{ignoreTransform:!0}),ue={x:Xt.left-te.left,y:Xt.top-te.top,scaleX:Xt.width/te.width,scaleY:Xt.height/te.height};(ue.x||ue.y)&&Wt(ue)}}Nt!==_t.current&&(_t.current=Nt)},[Tt,Nt,st,xt]),(0,m.useEffect)(()=>{zt&&Wt(null)},[zt]),zt}function nt(it){let{animateLayoutChanges:Tt=j,attributes:Nt,disabled:st,data:xt,getNewIndex:zt=W,id:Wt,strategy:_t,resizeObserverConfig:Xt,transition:te=V}=it;const{items:ue,containerId:fe,activeIndex:Gt,disabled:ae,disableTransforms:Ne,sortedRects:ee,overIndex:de,useDragOverlay:ze,strategy:be}=(0,m.useContext)(X),ke=yt(st,ae),he=ue.indexOf(Wt),vt=(0,m.useMemo)(()=>Na({sortable:{containerId:fe,index:he,items:ue}},xt),[fe,xt,he,ue]),ie=(0,m.useMemo)(()=>ue.slice(ue.indexOf(Wt)),[ue,Wt]),{rect:Pe,node:qe,isOver:Qe,setNodeRef:lr}=(0,R.Zj)({id:Wt,data:vt,disabled:ke.droppable,resizeObserverConfig:Na({updateMeasurementsFor:ie},Xt)}),{active:fr,activatorEvent:kr,activeNodeRect:En,attributes:fn,setNodeRef:Vr,listeners:Je,isDragging:dr,over:nr,setActivatorNodeRef:oe,transform:Te}=(0,R.O1)({id:Wt,data:vt,attributes:Na(Na({},J),Nt),disabled:ke.draggable}),Lr=(0,w.HB)(lr,Vr),Nr=!!fr,ln=Nr&&!Ne&&p(Gt)&&p(de),en=!ze&&dr,Dr=en&&ln?Te:null,Fr=_t!=null?_t:be,Kr=ln?Dr!=null?Dr:Fr({rects:ee,activeNodeRect:En,activeIndex:Gt,overIndex:de,index:he}):null,an=p(Gt)&&p(de)?zt({id:Wt,items:ue,activeIndex:Gt,overIndex:de}):he,yn=fr==null?void 0:fr.id,bn=(0,m.useRef)({activeId:yn,items:ue,newIndex:an,containerId:fe}),tt=ue!==bn.current.items,tr=Tt({active:fr,containerId:fe,isDragging:dr,isSorting:Nr,id:Wt,index:he,items:ue,newIndex:bn.current.newIndex,previousItems:bn.current.items,previousContainerId:bn.current.containerId,transition:te,wasDragging:bn.current.activeId!=null}),Kt=ut({disabled:!tr,index:he,node:qe,rect:Pe});return(0,m.useEffect)(()=>{Nr&&bn.current.newIndex!==an&&(bn.current.newIndex=an),fe!==bn.current.containerId&&(bn.current.containerId=fe),ue!==bn.current.items&&(bn.current.items=ue)},[Nr,an,fe,ue]),(0,m.useEffect)(()=>{if(yn===bn.current.activeId)return;if(yn&&!bn.current.activeId){bn.current.activeId=yn;return}const Et=setTimeout(()=>{bn.current.activeId=yn},50);return()=>clearTimeout(Et)},[yn]),{active:fr,activeIndex:Gt,attributes:fn,data:vt,rect:Pe,index:he,newIndex:an,items:ue,isOver:Qe,isSorting:Nr,isDragging:dr,listeners:Je,node:qe,overIndex:de,over:nr,setNodeRef:Lr,setActivatorNodeRef:oe,setDroppableNodeRef:lr,setDraggableNodeRef:Vr,transform:Kt!=null?Kt:Kr,transition:$t()};function $t(){if(Kt||tt&&bn.current.newIndex===he)return $;if(!(en&&!(0,w.vd)(kr)||!te)&&(Nr||tr))return w.ux.Transition.toString(xo(Na({},te),{property:q}))}}function yt(it,Tt){var Nt,st;return typeof it=="boolean"?{draggable:it,droppable:!1}:{draggable:(Nt=it==null?void 0:it.draggable)!=null?Nt:Tt.draggable,droppable:(st=it==null?void 0:it.droppable)!=null?st:Tt.droppable}}function dt(it){if(!it)return!1;const Tt=it.data.current;return!!(Tt&&"sortable"in Tt&&typeof Tt.sortable=="object"&&"containerId"in Tt.sortable&&"items"in Tt.sortable&&"index"in Tt.sortable)}const Ft=[R.g4.Down,R.g4.Right,R.g4.Up,R.g4.Left],wt=(it,Tt)=>{let{context:{active:Nt,collisionRect:st,droppableRects:xt,droppableContainers:zt,over:Wt,scrollableAncestors:_t}}=Tt;if(Ft.includes(it.code)){if(it.preventDefault(),!Nt||!st)return;const Xt=[];zt.getEnabled().forEach(fe=>{if(!fe||fe!=null&&fe.disabled)return;const Gt=xt.get(fe.id);if(Gt)switch(it.code){case KeyboardCode.Down:st.top<Gt.top&&Xt.push(fe);break;case KeyboardCode.Up:st.top>Gt.top&&Xt.push(fe);break;case KeyboardCode.Left:st.left>Gt.left&&Xt.push(fe);break;case KeyboardCode.Right:st.left<Gt.left&&Xt.push(fe);break}});const te=closestCorners({active:Nt,collisionRect:st,droppableRects:xt,droppableContainers:Xt,pointerCoordinates:null});let ue=getFirstCollision(te,"id");if(ue===(Wt==null?void 0:Wt.id)&&te.length>1&&(ue=te[1].id),ue!=null){const fe=zt.get(Nt.id),Gt=zt.get(ue),ae=Gt?xt.get(Gt.id):null,Ne=Gt==null?void 0:Gt.node.current;if(Ne&&ae&&fe&&Gt){const de=getScrollableAncestors(Ne).some((ie,Pe)=>_t[Pe]!==ie),ze=St(fe,Gt),be=et(fe,Gt),ke=de||!ze?{x:0,y:0}:{x:be?st.width-ae.width:0,y:be?st.height-ae.height:0},he={x:ae.left,y:ae.top};return ke.x&&ke.y?he:subtract(he,ke)}}}};function St(it,Tt){return!dt(it)||!dt(Tt)?!1:it.data.current.sortable.containerId===Tt.data.current.sortable.containerId}function et(it,Tt){return!dt(it)||!dt(Tt)||!St(it,Tt)?!1:it.data.current.sortable.index<Tt.data.current.sortable.index}},724285:function(We,G,_){"use strict";_.d(G,{$X:function(){return j},D9:function(){return l},DC:function(){return J},Ey:function(){return O},FJ:function(){return M},Gj:function(){return k},HB:function(){return R},IH:function(){return W},Jj:function(){return L},LI:function(){return g},Ld:function(){return X},Nq:function(){return w},Re:function(){return b},UG:function(){return P},Yz:function(){return E},qk:function(){return p},r3:function(){return x},so:function(){return yt},ux:function(){return ut},vZ:function(){return S},vd:function(){return q},wm:function(){return y},zX:function(){return T}});var m=_(667294);function R(){for(var dt=arguments.length,Ft=new Array(dt),wt=0;wt<dt;wt++)Ft[wt]=arguments[wt];return(0,m.useMemo)(()=>St=>{Ft.forEach(et=>et(St))},Ft)}const w=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";function M(dt){const Ft=Object.prototype.toString.call(dt);return Ft==="[object Window]"||Ft==="[object global]"}function P(dt){return"nodeType"in dt}function L(dt){var Ft,wt;return dt?M(dt)?dt:P(dt)&&(Ft=(wt=dt.ownerDocument)==null?void 0:wt.defaultView)!=null?Ft:window:window}function p(dt){const{Document:Ft}=L(dt);return dt instanceof Ft}function b(dt){return M(dt)?!1:dt instanceof L(dt).HTMLElement}function S(dt){return dt instanceof L(dt).SVGElement}function x(dt){return dt?M(dt)?dt.document:P(dt)?p(dt)?dt:b(dt)?dt.ownerDocument:document:document:document}const g=w?m.useLayoutEffect:m.useEffect;function T(dt){const Ft=(0,m.useRef)(dt);return g(()=>{Ft.current=dt}),(0,m.useCallback)(function(){for(var wt=arguments.length,St=new Array(wt),et=0;et<wt;et++)St[et]=arguments[et];return Ft.current==null?void 0:Ft.current(...St)},[])}function E(){const dt=(0,m.useRef)(null),Ft=(0,m.useCallback)((St,et)=>{dt.current=setInterval(St,et)},[]),wt=(0,m.useCallback)(()=>{dt.current!==null&&(clearInterval(dt.current),dt.current=null)},[]);return[Ft,wt]}function O(dt,Ft){Ft===void 0&&(Ft=[dt]);const wt=(0,m.useRef)(dt);return g(()=>{wt.current!==dt&&(wt.current=dt)},Ft),wt}function k(dt,Ft){const wt=(0,m.useRef)();return(0,m.useMemo)(()=>{const St=dt(wt.current);return wt.current=St,St},[...Ft])}function y(dt){const Ft=T(dt),wt=(0,m.useRef)(null),St=(0,m.useCallback)(et=>{et!==wt.current&&(Ft==null||Ft(et,wt.current)),wt.current=et},[]);return[wt,St]}function l(dt){const Ft=(0,m.useRef)();return(0,m.useEffect)(()=>{Ft.current=dt},[dt]),Ft.current}let U={};function X(dt,Ft){return(0,m.useMemo)(()=>{if(Ft)return Ft;const wt=U[dt]==null?0:U[dt]+1;return U[dt]=wt,dt+"-"+wt},[dt,Ft])}function F(dt){return function(Ft){for(var wt=arguments.length,St=new Array(wt>1?wt-1:0),et=1;et<wt;et++)St[et-1]=arguments[et];return St.reduce((it,Tt)=>{const Nt=Object.entries(Tt);for(const[st,xt]of Nt){const zt=it[st];zt!=null&&(it[st]=zt+dt*xt)}return it},Na({},Ft))}}const W=F(1),j=F(-1);function V(dt){return"clientX"in dt&&"clientY"in dt}function q(dt){if(!dt)return!1;const{KeyboardEvent:Ft}=L(dt.target);return Ft&&dt instanceof Ft}function $(dt){if(!dt)return!1;const{TouchEvent:Ft}=L(dt.target);return Ft&&dt instanceof Ft}function J(dt){if($(dt)){if(dt.touches&&dt.touches.length){const{clientX:Ft,clientY:wt}=dt.touches[0];return{x:Ft,y:wt}}else if(dt.changedTouches&&dt.changedTouches.length){const{clientX:Ft,clientY:wt}=dt.changedTouches[0];return{x:Ft,y:wt}}}return V(dt)?{x:dt.clientX,y:dt.clientY}:null}const ut=Object.freeze({Translate:{toString(dt){if(!dt)return;const{x:Ft,y:wt}=dt;return"translate3d("+(Ft?Math.round(Ft):0)+"px, "+(wt?Math.round(wt):0)+"px, 0)"}},Scale:{toString(dt){if(!dt)return;const{scaleX:Ft,scaleY:wt}=dt;return"scaleX("+Ft+") scaleY("+wt+")"}},Transform:{toString(dt){if(dt)return[ut.Translate.toString(dt),ut.Scale.toString(dt)].join(" ")}},Transition:{toString(dt){let{property:Ft,duration:wt,easing:St}=dt;return Ft+" "+wt+"ms "+St}}}),nt="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function yt(dt){return dt.matches(nt)?dt:dt.querySelector(nt)}},486880:function(We,G,_){"use strict";_.r(G),_.d(G,{forceCenter:function(){return m},forceCollide:function(){return p},forceLink:function(){return T},forceManyBody:function(){return Ne},forceRadial:function(){return ee},forceSimulation:function(){return ae},forceX:function(){return de},forceY:function(){return ze}});function m(be,ke){var he,vt=1;be==null&&(be=0),ke==null&&(ke=0);function ie(){var Pe,qe=he.length,Qe,lr=0,fr=0;for(Pe=0;Pe<qe;++Pe)Qe=he[Pe],lr+=Qe.x,fr+=Qe.y;for(lr=(lr/qe-be)*vt,fr=(fr/qe-ke)*vt,Pe=0;Pe<qe;++Pe)Qe=he[Pe],Qe.x-=lr,Qe.y-=fr}return ie.initialize=function(Pe){he=Pe},ie.x=function(Pe){return arguments.length?(be=+Pe,ie):be},ie.y=function(Pe){return arguments.length?(ke=+Pe,ie):ke},ie.strength=function(Pe){return arguments.length?(vt=+Pe,ie):vt},ie}var R=_(547148);function w(be){return function(){return be}}function M(be){return(be()-.5)*1e-6}function P(be){return be.x+be.vx}function L(be){return be.y+be.vy}function p(be){var ke,he,vt,ie=1,Pe=1;typeof be!="function"&&(be=w(be==null?1:+be));function qe(){for(var fr,kr=ke.length,En,fn,Vr,Je,dr,nr,oe=0;oe<Pe;++oe)for(En=(0,R.Z)(ke,P,L).visitAfter(Qe),fr=0;fr<kr;++fr)fn=ke[fr],dr=he[fn.index],nr=dr*dr,Vr=fn.x+fn.vx,Je=fn.y+fn.vy,En.visit(Te);function Te(Lr,Nr,ln,en,Dr){var Fr=Lr.data,Kr=Lr.r,an=dr+Kr;if(Fr){if(Fr.index>fn.index){var yn=Vr-Fr.x-Fr.vx,bn=Je-Fr.y-Fr.vy,tt=yn*yn+bn*bn;tt<an*an&&(yn===0&&(yn=M(vt),tt+=yn*yn),bn===0&&(bn=M(vt),tt+=bn*bn),tt=(an-(tt=Math.sqrt(tt)))/tt*ie,fn.vx+=(yn*=tt)*(an=(Kr*=Kr)/(nr+Kr)),fn.vy+=(bn*=tt)*an,Fr.vx-=yn*(an=1-an),Fr.vy-=bn*an)}return}return Nr>Vr+an||en<Vr-an||ln>Je+an||Dr<Je-an}}function Qe(fr){if(fr.data)return fr.r=he[fr.data.index];for(var kr=fr.r=0;kr<4;++kr)fr[kr]&&fr[kr].r>fr.r&&(fr.r=fr[kr].r)}function lr(){if(ke){var fr,kr=ke.length,En;for(he=new Array(kr),fr=0;fr<kr;++fr)En=ke[fr],he[En.index]=+be(En,fr,ke)}}return qe.initialize=function(fr,kr){ke=fr,vt=kr,lr()},qe.iterations=function(fr){return arguments.length?(Pe=+fr,qe):Pe},qe.strength=function(fr){return arguments.length?(ie=+fr,qe):ie},qe.radius=function(fr){return arguments.length?(be=typeof fr=="function"?fr:w(+fr),lr(),qe):be},qe}var b=_(952677),S=_.n(b);function x(be){return be.index}function g(be,ke){var he=be.get(ke);if(!he)throw new Error("node not found: "+ke);return he}function T(be){var ke=x,he=En,vt,ie=w(30),Pe,qe,Qe,lr,fr,kr=1;be==null&&(be=[]);function En(nr){return 1/Math.min(Qe[nr.source.index],Qe[nr.target.index])}function fn(nr){for(var oe=0,Te=be.length;oe<kr;++oe)for(var Lr=0,Nr,ln,en,Dr,Fr,Kr,an;Lr<Te;++Lr)Nr=be[Lr],ln=Nr.source,en=Nr.target,Dr=en.x+en.vx-ln.x-ln.vx||M(fr),Fr=en.y+en.vy-ln.y-ln.vy||M(fr),Kr=Math.sqrt(Dr*Dr+Fr*Fr),Kr=(Kr-Pe[Lr])/Kr*nr*vt[Lr],Dr*=Kr,Fr*=Kr,en.vx-=Dr*(an=lr[Lr]),en.vy-=Fr*an,ln.vx+=Dr*(an=1-an),ln.vy+=Fr*an}function Vr(){if(qe){var nr,oe=qe.length,Te=be.length,Lr=new Map(qe.map(function(ln,en){return[ke(ln,en,qe),ln]})),Nr;for(nr=0,Qe=new Array(oe);nr<Te;++nr)Nr=be[nr],Nr.index=nr,S()(Nr.source)!=="object"&&(Nr.source=g(Lr,Nr.source)),S()(Nr.target)!=="object"&&(Nr.target=g(Lr,Nr.target)),Qe[Nr.source.index]=(Qe[Nr.source.index]||0)+1,Qe[Nr.target.index]=(Qe[Nr.target.index]||0)+1;for(nr=0,lr=new Array(Te);nr<Te;++nr)Nr=be[nr],lr[nr]=Qe[Nr.source.index]/(Qe[Nr.source.index]+Qe[Nr.target.index]);vt=new Array(Te),Je(),Pe=new Array(Te),dr()}}function Je(){if(qe)for(var nr=0,oe=be.length;nr<oe;++nr)vt[nr]=+he(be[nr],nr,be)}function dr(){if(qe)for(var nr=0,oe=be.length;nr<oe;++nr)Pe[nr]=+ie(be[nr],nr,be)}return fn.initialize=function(nr,oe){qe=nr,fr=oe,Vr()},fn.links=function(nr){return arguments.length?(be=nr,Vr(),fn):be},fn.id=function(nr){return arguments.length?(ke=nr,fn):ke},fn.iterations=function(nr){return arguments.length?(kr=+nr,fn):kr},fn.strength=function(nr){return arguments.length?(he=typeof nr=="function"?nr:w(+nr),Je(),fn):he},fn.distance=function(nr){return arguments.length?(ie=typeof nr=="function"?nr:w(+nr),dr(),fn):ie},fn}var E={value:function(){}};function O(){for(var be=0,ke=arguments.length,he={},vt;be<ke;++be){if(!(vt=arguments[be]+"")||vt in he||/[\s.]/.test(vt))throw new Error("illegal type: "+vt);he[vt]=[]}return new k(he)}function k(be){this._=be}function y(be,ke){return be.trim().split(/^|\s+/).map(function(he){var vt="",ie=he.indexOf(".");if(ie>=0&&(vt=he.slice(ie+1),he=he.slice(0,ie)),he&&!ke.hasOwnProperty(he))throw new Error("unknown type: "+he);return{type:he,name:vt}})}k.prototype=O.prototype={constructor:k,on:function(ke,he){var vt=this._,ie=y(ke+"",vt),Pe,qe=-1,Qe=ie.length;if(arguments.length<2){for(;++qe<Qe;)if((Pe=(ke=ie[qe]).type)&&(Pe=l(vt[Pe],ke.name)))return Pe;return}if(he!=null&&typeof he!="function")throw new Error("invalid callback: "+he);for(;++qe<Qe;)if(Pe=(ke=ie[qe]).type)vt[Pe]=U(vt[Pe],ke.name,he);else if(he==null)for(Pe in vt)vt[Pe]=U(vt[Pe],ke.name,null);return this},copy:function(){var ke={},he=this._;for(var vt in he)ke[vt]=he[vt].slice();return new k(ke)},call:function(ke,he){if((Pe=arguments.length-2)>0)for(var vt=new Array(Pe),ie=0,Pe,qe;ie<Pe;++ie)vt[ie]=arguments[ie+2];if(!this._.hasOwnProperty(ke))throw new Error("unknown type: "+ke);for(qe=this._[ke],ie=0,Pe=qe.length;ie<Pe;++ie)qe[ie].value.apply(he,vt)},apply:function(ke,he,vt){if(!this._.hasOwnProperty(ke))throw new Error("unknown type: "+ke);for(var ie=this._[ke],Pe=0,qe=ie.length;Pe<qe;++Pe)ie[Pe].value.apply(he,vt)}};function l(be,ke){for(var he=0,vt=be.length,ie;he<vt;++he)if((ie=be[he]).name===ke)return ie.value}function U(be,ke,he){for(var vt=0,ie=be.length;vt<ie;++vt)if(be[vt].name===ke){be[vt]=E,be=be.slice(0,vt).concat(be.slice(vt+1));break}return he!=null&&be.push({name:ke,value:he}),be}var X=O,F=0,W=0,j=0,V=1e3,q,$,J=0,ut=0,nt=0,yt=typeof performance=="object"&&performance.now?performance:Date,dt=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(be){setTimeout(be,17)};function Ft(){return ut||(dt(wt),ut=yt.now()+nt)}function wt(){ut=0}function St(){this._call=this._time=this._next=null}St.prototype=et.prototype={constructor:St,restart:function(be,ke,he){if(typeof be!="function")throw new TypeError("callback is not a function");he=(he==null?Ft():+he)+(ke==null?0:+ke),!this._next&&$!==this&&($?$._next=this:q=this,$=this),this._call=be,this._time=he,xt()},stop:function(){this._call&&(this._call=null,this._time=1/0,xt())}};function et(be,ke,he){var vt=new St;return vt.restart(be,ke,he),vt}function it(){Ft(),++F;for(var be=q,ke;be;)(ke=ut-be._time)>=0&&be._call.call(null,ke),be=be._next;--F}function Tt(){ut=(J=yt.now())+nt,F=W=0;try{it()}finally{F=0,st(),ut=0}}function Nt(){var be=yt.now(),ke=be-J;ke>V&&(nt-=ke,J=be)}function st(){for(var be,ke=q,he,vt=1/0;ke;)ke._call?(vt>ke._time&&(vt=ke._time),be=ke,ke=ke._next):(he=ke._next,ke._next=null,ke=be?be._next=he:q=he);$=be,xt(vt)}function xt(be){if(!F){W&&(W=clearTimeout(W));var ke=be-ut;ke>24?(be<1/0&&(W=setTimeout(Tt,be-yt.now()-nt)),j&&(j=clearInterval(j))):(j||(J=yt.now(),j=setInterval(Nt,V)),F=1,dt(Tt))}}var zt=1664525,Wt=1013904223,_t=4294967296;function Xt(){var be=1;return function(){return(be=(zt*be+Wt)%_t)/_t}}function te(be){return be.x}function ue(be){return be.y}var fe=10,Gt=Math.PI*(3-Math.sqrt(5));function ae(be){var ke,he=1,vt=.001,ie=1-Math.pow(vt,1/300),Pe=0,qe=.6,Qe=new Map,lr=et(En),fr=X("tick","end"),kr=Xt();be==null&&(be=[]);function En(){fn(),fr.call("tick",ke),he<vt&&(lr.stop(),fr.call("end",ke))}function fn(dr){var nr,oe=be.length,Te;dr===void 0&&(dr=1);for(var Lr=0;Lr<dr;++Lr)for(he+=(Pe-he)*ie,Qe.forEach(function(Nr){Nr(he)}),nr=0;nr<oe;++nr)Te=be[nr],Te.fx==null?Te.x+=Te.vx*=qe:(Te.x=Te.fx,Te.vx=0),Te.fy==null?Te.y+=Te.vy*=qe:(Te.y=Te.fy,Te.vy=0);return ke}function Vr(){for(var dr=0,nr=be.length,oe;dr<nr;++dr){if(oe=be[dr],oe.index=dr,oe.fx!=null&&(oe.x=oe.fx),oe.fy!=null&&(oe.y=oe.fy),isNaN(oe.x)||isNaN(oe.y)){var Te=fe*Math.sqrt(.5+dr),Lr=dr*Gt;oe.x=Te*Math.cos(Lr),oe.y=Te*Math.sin(Lr)}(isNaN(oe.vx)||isNaN(oe.vy))&&(oe.vx=oe.vy=0)}}function Je(dr){return dr.initialize&&dr.initialize(be,kr),dr}return Vr(),ke={tick:fn,restart:function(){return lr.restart(En),ke},stop:function(){return lr.stop(),ke},nodes:function(nr){return arguments.length?(be=nr,Vr(),Qe.forEach(Je),ke):be},alpha:function(nr){return arguments.length?(he=+nr,ke):he},alphaMin:function(nr){return arguments.length?(vt=+nr,ke):vt},alphaDecay:function(nr){return arguments.length?(ie=+nr,ke):+ie},alphaTarget:function(nr){return arguments.length?(Pe=+nr,ke):Pe},velocityDecay:function(nr){return arguments.length?(qe=1-nr,ke):1-qe},randomSource:function(nr){return arguments.length?(kr=nr,Qe.forEach(Je),ke):kr},force:function(nr,oe){return arguments.length>1?(oe==null?Qe.delete(nr):Qe.set(nr,Je(oe)),ke):Qe.get(nr)},find:function(nr,oe,Te){var Lr=0,Nr=be.length,ln,en,Dr,Fr,Kr;for(Te==null?Te=1/0:Te*=Te,Lr=0;Lr<Nr;++Lr)Fr=be[Lr],ln=nr-Fr.x,en=oe-Fr.y,Dr=ln*ln+en*en,Dr<Te&&(Kr=Fr,Te=Dr);return Kr},on:function(nr,oe){return arguments.length>1?(fr.on(nr,oe),ke):fr.on(nr)}}}function Ne(){var be,ke,he,vt,ie=w(-30),Pe,qe=1,Qe=1/0,lr=.81;function fr(Vr){var Je,dr=be.length,nr=(0,R.Z)(be,te,ue).visitAfter(En);for(vt=Vr,Je=0;Je<dr;++Je)ke=be[Je],nr.visit(fn)}function kr(){if(be){var Vr,Je=be.length,dr;for(Pe=new Array(Je),Vr=0;Vr<Je;++Vr)dr=be[Vr],Pe[dr.index]=+ie(dr,Vr,be)}}function En(Vr){var Je=0,dr,nr,oe=0,Te,Lr,Nr;if(Vr.length){for(Te=Lr=Nr=0;Nr<4;++Nr)(dr=Vr[Nr])&&(nr=Math.abs(dr.value))&&(Je+=dr.value,oe+=nr,Te+=nr*dr.x,Lr+=nr*dr.y);Vr.x=Te/oe,Vr.y=Lr/oe}else{dr=Vr,dr.x=dr.data.x,dr.y=dr.data.y;do Je+=Pe[dr.data.index];while(dr=dr.next)}Vr.value=Je}function fn(Vr,Je,dr,nr){if(!Vr.value)return!0;var oe=Vr.x-ke.x,Te=Vr.y-ke.y,Lr=nr-Je,Nr=oe*oe+Te*Te;if(Lr*Lr/lr<Nr)return Nr<Qe&&(oe===0&&(oe=M(he),Nr+=oe*oe),Te===0&&(Te=M(he),Nr+=Te*Te),Nr<qe&&(Nr=Math.sqrt(qe*Nr)),ke.vx+=oe*Vr.value*vt/Nr,ke.vy+=Te*Vr.value*vt/Nr),!0;if(Vr.length||Nr>=Qe)return;(Vr.data!==ke||Vr.next)&&(oe===0&&(oe=M(he),Nr+=oe*oe),Te===0&&(Te=M(he),Nr+=Te*Te),Nr<qe&&(Nr=Math.sqrt(qe*Nr)));do Vr.data!==ke&&(Lr=Pe[Vr.data.index]*vt/Nr,ke.vx+=oe*Lr,ke.vy+=Te*Lr);while(Vr=Vr.next)}return fr.initialize=function(Vr,Je){be=Vr,he=Je,kr()},fr.strength=function(Vr){return arguments.length?(ie=typeof Vr=="function"?Vr:w(+Vr),kr(),fr):ie},fr.distanceMin=function(Vr){return arguments.length?(qe=Vr*Vr,fr):Math.sqrt(qe)},fr.distanceMax=function(Vr){return arguments.length?(Qe=Vr*Vr,fr):Math.sqrt(Qe)},fr.theta=function(Vr){return arguments.length?(lr=Vr*Vr,fr):Math.sqrt(lr)},fr}function ee(be,ke,he){var vt,ie=w(.1),Pe,qe;typeof be!="function"&&(be=w(+be)),ke==null&&(ke=0),he==null&&(he=0);function Qe(fr){for(var kr=0,En=vt.length;kr<En;++kr){var fn=vt[kr],Vr=fn.x-ke||1e-6,Je=fn.y-he||1e-6,dr=Math.sqrt(Vr*Vr+Je*Je),nr=(qe[kr]-dr)*Pe[kr]*fr/dr;fn.vx+=Vr*nr,fn.vy+=Je*nr}}function lr(){if(vt){var fr,kr=vt.length;for(Pe=new Array(kr),qe=new Array(kr),fr=0;fr<kr;++fr)qe[fr]=+be(vt[fr],fr,vt),Pe[fr]=isNaN(qe[fr])?0:+ie(vt[fr],fr,vt)}}return Qe.initialize=function(fr){vt=fr,lr()},Qe.strength=function(fr){return arguments.length?(ie=typeof fr=="function"?fr:w(+fr),lr(),Qe):ie},Qe.radius=function(fr){return arguments.length?(be=typeof fr=="function"?fr:w(+fr),lr(),Qe):be},Qe.x=function(fr){return arguments.length?(ke=+fr,Qe):ke},Qe.y=function(fr){return arguments.length?(he=+fr,Qe):he},Qe}function de(be){var ke=w(.1),he,vt,ie;typeof be!="function"&&(be=w(be==null?0:+be));function Pe(Qe){for(var lr=0,fr=he.length,kr;lr<fr;++lr)kr=he[lr],kr.vx+=(ie[lr]-kr.x)*vt[lr]*Qe}function qe(){if(he){var Qe,lr=he.length;for(vt=new Array(lr),ie=new Array(lr),Qe=0;Qe<lr;++Qe)vt[Qe]=isNaN(ie[Qe]=+be(he[Qe],Qe,he))?0:+ke(he[Qe],Qe,he)}}return Pe.initialize=function(Qe){he=Qe,qe()},Pe.strength=function(Qe){return arguments.length?(ke=typeof Qe=="function"?Qe:w(+Qe),qe(),Pe):ke},Pe.x=function(Qe){return arguments.length?(be=typeof Qe=="function"?Qe:w(+Qe),qe(),Pe):be},Pe}function ze(be){var ke=w(.1),he,vt,ie;typeof be!="function"&&(be=w(be==null?0:+be));function Pe(Qe){for(var lr=0,fr=he.length,kr;lr<fr;++lr)kr=he[lr],kr.vy+=(ie[lr]-kr.y)*vt[lr]*Qe}function qe(){if(he){var Qe,lr=he.length;for(vt=new Array(lr),ie=new Array(lr),Qe=0;Qe<lr;++Qe)vt[Qe]=isNaN(ie[Qe]=+be(he[Qe],Qe,he))?0:+ke(he[Qe],Qe,he)}}return Pe.initialize=function(Qe){he=Qe,qe()},Pe.strength=function(Qe){return arguments.length?(ke=typeof Qe=="function"?Qe:w(+Qe),qe(),Pe):ke},Pe.y=function(Qe){return arguments.length?(be=typeof Qe=="function"?Qe:w(+Qe),qe(),Pe):be},Pe}},405237:function(We,G,_){"use strict";_.r(G),_.d(G,{AbstractMatrix:function(){return ke},CHO:function(){return ht},CholeskyDecomposition:function(){return ht},EVD:function(){return Kt},EigenvalueDecomposition:function(){return Kt},LU:function(){return Te},LuDecomposition:function(){return Te},Matrix:function(){return ie},MatrixColumnSelectionView:function(){return Qe},MatrixColumnView:function(){return qe},MatrixFlipColumnView:function(){return lr},MatrixFlipRowView:function(){return fr},MatrixRowSelectionView:function(){return En},MatrixRowView:function(){return kr},MatrixSelectionView:function(){return fn},MatrixSubView:function(){return Vr},MatrixTransposeView:function(){return Je},NIPALS:function(){return kt},Nipals:function(){return kt},QR:function(){return Nr},QrDecomposition:function(){return Nr},SVD:function(){return ln},SingularValueDecomposition:function(){return ln},WrapperMatrix1D:function(){return dr},WrapperMatrix2D:function(){return nr},correlation:function(){return tr},covariance:function(){return tt},default:function(){return ie},determinant:function(){return Fr},inverse:function(){return en},linearDependencies:function(){return yn},pseudoInverse:function(){return bn},solve:function(){return Dr},wrap:function(){return oe}});var m=_(273408),R=_.n(m),w=_(731996),M=_.n(w),P=_(626037),L=_.n(P),p=_(952677),b=_.n(p),S=_(912444),x=_.n(S),g=_(272004),T=_.n(g);const E=Object.prototype.toString;function O(Q){const at=E.call(Q);return at.endsWith("Array]")&&!at.includes("Big")}function k(Q){var at=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!O(Q))throw new TypeError("input must be an array");if(Q.length===0)throw new TypeError("input must not be empty");var B=at.fromIndex,C=B===void 0?0:B,I=at.toIndex,H=I===void 0?Q.length:I;if(C<0||C>=Q.length||!Number.isInteger(C))throw new Error("fromIndex must be a positive integer smaller than length");if(H<=C||H>Q.length||!Number.isInteger(H))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var mt=Q[C],Pt=C+1;Pt<H;Pt++)Q[Pt]>mt&&(mt=Q[Pt]);return mt}function y(Q){var at=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!O(Q))throw new TypeError("input must be an array");if(Q.length===0)throw new TypeError("input must not be empty");var B=at.fromIndex,C=B===void 0?0:B,I=at.toIndex,H=I===void 0?Q.length:I;if(C<0||C>=Q.length||!Number.isInteger(C))throw new Error("fromIndex must be a positive integer smaller than length");if(H<=C||H>Q.length||!Number.isInteger(H))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var mt=Q[C],Pt=C+1;Pt<H;Pt++)Q[Pt]<mt&&(mt=Q[Pt]);return mt}function l(Q){var at=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(O(Q)){if(Q.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var B;if(at.output!==void 0){if(!O(at.output))throw new TypeError("output option must be an array if specified");B=at.output}else B=new Array(Q.length);var C=y(Q),I=k(Q);if(C===I)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var H=at.min,mt=H===void 0?at.autoMinMax?C:0:H,Pt=at.max,Lt=Pt===void 0?at.autoMinMax?I:1:Pt;if(mt>=Lt)throw new RangeError("min option must be smaller than max option");for(var Jt=(Lt-mt)/(I-C),Oe=0;Oe<Q.length;Oe++)B[Oe]=(Q[Oe]-C)*Jt+mt;return B}var U=" ".repeat(2),X=" ".repeat(4);function F(){return W(this)}function W(Q){var at=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},B=at.maxRows,C=B===void 0?15:B,I=at.maxColumns,H=I===void 0?10:I,mt=at.maxNumSize,Pt=mt===void 0?8:mt,Lt=at.padMinus,Jt=Lt===void 0?"auto":Lt;return"".concat(Q.constructor.name,` {
`).concat(U,`[
`).concat(X).concat(j(Q,C,H,Pt,Jt),`
`).concat(U,`]
`).concat(U,"rows: ").concat(Q.rows,`
`).concat(U,"columns: ").concat(Q.columns,`
}`)}function j(Q,at,B,C,I){var H=Q.rows,mt=Q.columns,Pt=Math.min(H,at),Lt=Math.min(mt,B),Jt=[];if(I==="auto"){I=!1;t:for(var Oe=0;Oe<Pt;Oe++)for(var ye=0;ye<Lt;ye++)if(Q.get(Oe,ye)<0){I=!0;break t}}for(var Ze=0;Ze<Pt;Ze++){for(var wr=[],er=0;er<Lt;er++)wr.push(V(Q.get(Ze,er),C,I));Jt.push("".concat(wr.join(" ")))}return Lt!==mt&&(Jt[Jt.length-1]+=" ... ".concat(mt-B," more columns")),Pt!==H&&Jt.push("... ".concat(H-at," more rows")),Jt.join(`
`.concat(X))}function V(Q,at,B){return(Q>=0&&B?" ".concat(q(Q,at-1)):q(Q,at)).padEnd(at)}function q(Q,at){var B=Q.toString();if(B.length<=at)return B;var C=Q.toFixed(at);if(C.length>at&&(C=Q.toFixed(Math.max(0,at-(C.length-at)))),C.length<=at&&!C.startsWith("0.000")&&!C.startsWith("-0.000"))return C;var I=Q.toExponential(at);return I.length>at&&(I=Q.toExponential(Math.max(0,at-(I.length-at)))),I.slice(0)}function $(Q,at){Q.prototype.add=function(C){return typeof C=="number"?this.addS(C):this.addM(C)},Q.prototype.addS=function(C){for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)+C);return this},Q.prototype.addM=function(C){if(C=at.checkMatrix(C),this.rows!==C.rows||this.columns!==C.columns)throw new RangeError("Matrices dimensions must be equal");for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)+C.get(I,H));return this},Q.add=function(C,I){var H=new at(C);return H.add(I)},Q.prototype.sub=function(C){return typeof C=="number"?this.subS(C):this.subM(C)},Q.prototype.subS=function(C){for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)-C);return this},Q.prototype.subM=function(C){if(C=at.checkMatrix(C),this.rows!==C.rows||this.columns!==C.columns)throw new RangeError("Matrices dimensions must be equal");for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)-C.get(I,H));return this},Q.sub=function(C,I){var H=new at(C);return H.sub(I)},Q.prototype.subtract=Q.prototype.sub,Q.prototype.subtractS=Q.prototype.subS,Q.prototype.subtractM=Q.prototype.subM,Q.subtract=Q.sub,Q.prototype.mul=function(C){return typeof C=="number"?this.mulS(C):this.mulM(C)},Q.prototype.mulS=function(C){for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)*C);return this},Q.prototype.mulM=function(C){if(C=at.checkMatrix(C),this.rows!==C.rows||this.columns!==C.columns)throw new RangeError("Matrices dimensions must be equal");for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)*C.get(I,H));return this},Q.mul=function(C,I){var H=new at(C);return H.mul(I)},Q.prototype.multiply=Q.prototype.mul,Q.prototype.multiplyS=Q.prototype.mulS,Q.prototype.multiplyM=Q.prototype.mulM,Q.multiply=Q.mul,Q.prototype.div=function(C){return typeof C=="number"?this.divS(C):this.divM(C)},Q.prototype.divS=function(C){for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)/C);return this},Q.prototype.divM=function(C){if(C=at.checkMatrix(C),this.rows!==C.rows||this.columns!==C.columns)throw new RangeError("Matrices dimensions must be equal");for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)/C.get(I,H));return this},Q.div=function(C,I){var H=new at(C);return H.div(I)},Q.prototype.divide=Q.prototype.div,Q.prototype.divideS=Q.prototype.divS,Q.prototype.divideM=Q.prototype.divM,Q.divide=Q.div,Q.prototype.mod=function(C){return typeof C=="number"?this.modS(C):this.modM(C)},Q.prototype.modS=function(C){for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)%C);return this},Q.prototype.modM=function(C){if(C=at.checkMatrix(C),this.rows!==C.rows||this.columns!==C.columns)throw new RangeError("Matrices dimensions must be equal");for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)%C.get(I,H));return this},Q.mod=function(C,I){var H=new at(C);return H.mod(I)},Q.prototype.modulus=Q.prototype.mod,Q.prototype.modulusS=Q.prototype.modS,Q.prototype.modulusM=Q.prototype.modM,Q.modulus=Q.mod,Q.prototype.and=function(C){return typeof C=="number"?this.andS(C):this.andM(C)},Q.prototype.andS=function(C){for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)&C);return this},Q.prototype.andM=function(C){if(C=at.checkMatrix(C),this.rows!==C.rows||this.columns!==C.columns)throw new RangeError("Matrices dimensions must be equal");for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)&C.get(I,H));return this},Q.and=function(C,I){var H=new at(C);return H.and(I)},Q.prototype.or=function(C){return typeof C=="number"?this.orS(C):this.orM(C)},Q.prototype.orS=function(C){for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)|C);return this},Q.prototype.orM=function(C){if(C=at.checkMatrix(C),this.rows!==C.rows||this.columns!==C.columns)throw new RangeError("Matrices dimensions must be equal");for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)|C.get(I,H));return this},Q.or=function(C,I){var H=new at(C);return H.or(I)},Q.prototype.xor=function(C){return typeof C=="number"?this.xorS(C):this.xorM(C)},Q.prototype.xorS=function(C){for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)^C);return this},Q.prototype.xorM=function(C){if(C=at.checkMatrix(C),this.rows!==C.rows||this.columns!==C.columns)throw new RangeError("Matrices dimensions must be equal");for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)^C.get(I,H));return this},Q.xor=function(C,I){var H=new at(C);return H.xor(I)},Q.prototype.leftShift=function(C){return typeof C=="number"?this.leftShiftS(C):this.leftShiftM(C)},Q.prototype.leftShiftS=function(C){for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)<<C);return this},Q.prototype.leftShiftM=function(C){if(C=at.checkMatrix(C),this.rows!==C.rows||this.columns!==C.columns)throw new RangeError("Matrices dimensions must be equal");for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)<<C.get(I,H));return this},Q.leftShift=function(C,I){var H=new at(C);return H.leftShift(I)},Q.prototype.signPropagatingRightShift=function(C){return typeof C=="number"?this.signPropagatingRightShiftS(C):this.signPropagatingRightShiftM(C)},Q.prototype.signPropagatingRightShiftS=function(C){for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)>>C);return this},Q.prototype.signPropagatingRightShiftM=function(C){if(C=at.checkMatrix(C),this.rows!==C.rows||this.columns!==C.columns)throw new RangeError("Matrices dimensions must be equal");for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)>>C.get(I,H));return this},Q.signPropagatingRightShift=function(C,I){var H=new at(C);return H.signPropagatingRightShift(I)},Q.prototype.rightShift=function(C){return typeof C=="number"?this.rightShiftS(C):this.rightShiftM(C)},Q.prototype.rightShiftS=function(C){for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)>>>C);return this},Q.prototype.rightShiftM=function(C){if(C=at.checkMatrix(C),this.rows!==C.rows||this.columns!==C.columns)throw new RangeError("Matrices dimensions must be equal");for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,this.get(I,H)>>>C.get(I,H));return this},Q.rightShift=function(C,I){var H=new at(C);return H.rightShift(I)},Q.prototype.zeroFillRightShift=Q.prototype.rightShift,Q.prototype.zeroFillRightShiftS=Q.prototype.rightShiftS,Q.prototype.zeroFillRightShiftM=Q.prototype.rightShiftM,Q.zeroFillRightShift=Q.rightShift,Q.prototype.not=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,~this.get(C,I));return this},Q.not=function(C){var I=new at(C);return I.not()},Q.prototype.abs=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.abs(this.get(C,I)));return this},Q.abs=function(C){var I=new at(C);return I.abs()},Q.prototype.acos=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.acos(this.get(C,I)));return this},Q.acos=function(C){var I=new at(C);return I.acos()},Q.prototype.acosh=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.acosh(this.get(C,I)));return this},Q.acosh=function(C){var I=new at(C);return I.acosh()},Q.prototype.asin=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.asin(this.get(C,I)));return this},Q.asin=function(C){var I=new at(C);return I.asin()},Q.prototype.asinh=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.asinh(this.get(C,I)));return this},Q.asinh=function(C){var I=new at(C);return I.asinh()},Q.prototype.atan=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.atan(this.get(C,I)));return this},Q.atan=function(C){var I=new at(C);return I.atan()},Q.prototype.atanh=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.atanh(this.get(C,I)));return this},Q.atanh=function(C){var I=new at(C);return I.atanh()},Q.prototype.cbrt=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.cbrt(this.get(C,I)));return this},Q.cbrt=function(C){var I=new at(C);return I.cbrt()},Q.prototype.ceil=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.ceil(this.get(C,I)));return this},Q.ceil=function(C){var I=new at(C);return I.ceil()},Q.prototype.clz32=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.clz32(this.get(C,I)));return this},Q.clz32=function(C){var I=new at(C);return I.clz32()},Q.prototype.cos=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.cos(this.get(C,I)));return this},Q.cos=function(C){var I=new at(C);return I.cos()},Q.prototype.cosh=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.cosh(this.get(C,I)));return this},Q.cosh=function(C){var I=new at(C);return I.cosh()},Q.prototype.exp=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.exp(this.get(C,I)));return this},Q.exp=function(C){var I=new at(C);return I.exp()},Q.prototype.expm1=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.expm1(this.get(C,I)));return this},Q.expm1=function(C){var I=new at(C);return I.expm1()},Q.prototype.floor=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.floor(this.get(C,I)));return this},Q.floor=function(C){var I=new at(C);return I.floor()},Q.prototype.fround=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.fround(this.get(C,I)));return this},Q.fround=function(C){var I=new at(C);return I.fround()},Q.prototype.log=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.log(this.get(C,I)));return this},Q.log=function(C){var I=new at(C);return I.log()},Q.prototype.log1p=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.log1p(this.get(C,I)));return this},Q.log1p=function(C){var I=new at(C);return I.log1p()},Q.prototype.log10=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.log10(this.get(C,I)));return this},Q.log10=function(C){var I=new at(C);return I.log10()},Q.prototype.log2=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.log2(this.get(C,I)));return this},Q.log2=function(C){var I=new at(C);return I.log2()},Q.prototype.round=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.round(this.get(C,I)));return this},Q.round=function(C){var I=new at(C);return I.round()},Q.prototype.sign=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.sign(this.get(C,I)));return this},Q.sign=function(C){var I=new at(C);return I.sign()},Q.prototype.sin=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.sin(this.get(C,I)));return this},Q.sin=function(C){var I=new at(C);return I.sin()},Q.prototype.sinh=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.sinh(this.get(C,I)));return this},Q.sinh=function(C){var I=new at(C);return I.sinh()},Q.prototype.sqrt=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.sqrt(this.get(C,I)));return this},Q.sqrt=function(C){var I=new at(C);return I.sqrt()},Q.prototype.tan=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.tan(this.get(C,I)));return this},Q.tan=function(C){var I=new at(C);return I.tan()},Q.prototype.tanh=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.tanh(this.get(C,I)));return this},Q.tanh=function(C){var I=new at(C);return I.tanh()},Q.prototype.trunc=function(){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,Math.trunc(this.get(C,I)));return this},Q.trunc=function(C){var I=new at(C);return I.trunc()},Q.pow=function(C,I){var H=new at(C);return H.pow(I)},Q.prototype.pow=function(C){return typeof C=="number"?this.powS(C):this.powM(C)},Q.prototype.powS=function(C){for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,Math.pow(this.get(I,H),C));return this},Q.prototype.powM=function(C){if(C=at.checkMatrix(C),this.rows!==C.rows||this.columns!==C.columns)throw new RangeError("Matrices dimensions must be equal");for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.set(I,H,Math.pow(this.get(I,H),C.get(I,H)));return this}}function J(Q,at,B){var C=B?Q.rows:Q.rows-1;if(at<0||at>C)throw new RangeError("Row index out of range")}function ut(Q,at,B){var C=B?Q.columns:Q.columns-1;if(at<0||at>C)throw new RangeError("Column index out of range")}function nt(Q,at){if(at.to1DArray&&(at=at.to1DArray()),at.length!==Q.columns)throw new RangeError("vector size must be the same as the number of columns");return at}function yt(Q,at){if(at.to1DArray&&(at=at.to1DArray()),at.length!==Q.rows)throw new RangeError("vector size must be the same as the number of rows");return at}function dt(Q,at){if(!O(at))throw new TypeError("row indices must be an array");for(var B=0;B<at.length;B++)if(at[B]<0||at[B]>=Q.rows)throw new RangeError("row indices are out of range")}function Ft(Q,at){if(!O(at))throw new TypeError("column indices must be an array");for(var B=0;B<at.length;B++)if(at[B]<0||at[B]>=Q.columns)throw new RangeError("column indices are out of range")}function wt(Q,at,B,C,I){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(et("startRow",at),et("endRow",B),et("startColumn",C),et("endColumn",I),at>B||C>I||at<0||at>=Q.rows||B<0||B>=Q.rows||C<0||C>=Q.columns||I<0||I>=Q.columns)throw new RangeError("Submatrix indices are out of range")}function St(Q){for(var at=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,B=[],C=0;C<Q;C++)B.push(at);return B}function et(Q,at){if(typeof at!="number")throw new TypeError("".concat(Q," must be a number"))}function it(Q){if(Q.isEmpty())throw new Error("Empty matrix has no elements to index")}function Tt(Q){for(var at=St(Q.rows),B=0;B<Q.rows;++B)for(var C=0;C<Q.columns;++C)at[B]+=Q.get(B,C);return at}function Nt(Q){for(var at=St(Q.columns),B=0;B<Q.rows;++B)for(var C=0;C<Q.columns;++C)at[C]+=Q.get(B,C);return at}function st(Q){for(var at=0,B=0;B<Q.rows;B++)for(var C=0;C<Q.columns;C++)at+=Q.get(B,C);return at}function xt(Q){for(var at=St(Q.rows,1),B=0;B<Q.rows;++B)for(var C=0;C<Q.columns;++C)at[B]*=Q.get(B,C);return at}function zt(Q){for(var at=St(Q.columns,1),B=0;B<Q.rows;++B)for(var C=0;C<Q.columns;++C)at[C]*=Q.get(B,C);return at}function Wt(Q){for(var at=1,B=0;B<Q.rows;B++)for(var C=0;C<Q.columns;C++)at*=Q.get(B,C);return at}function _t(Q,at,B){for(var C=Q.rows,I=Q.columns,H=[],mt=0;mt<C;mt++){for(var Pt=0,Lt=0,Jt=0,Oe=0;Oe<I;Oe++)Jt=Q.get(mt,Oe)-B[mt],Pt+=Jt,Lt+=Jt*Jt;at?H.push((Lt-Pt*Pt/I)/(I-1)):H.push((Lt-Pt*Pt/I)/I)}return H}function Xt(Q,at,B){for(var C=Q.rows,I=Q.columns,H=[],mt=0;mt<I;mt++){for(var Pt=0,Lt=0,Jt=0,Oe=0;Oe<C;Oe++)Jt=Q.get(Oe,mt)-B[mt],Pt+=Jt,Lt+=Jt*Jt;at?H.push((Lt-Pt*Pt/C)/(C-1)):H.push((Lt-Pt*Pt/C)/C)}return H}function te(Q,at,B){for(var C=Q.rows,I=Q.columns,H=C*I,mt=0,Pt=0,Lt=0,Jt=0;Jt<C;Jt++)for(var Oe=0;Oe<I;Oe++)Lt=Q.get(Jt,Oe)-B,mt+=Lt,Pt+=Lt*Lt;return at?(Pt-mt*mt/H)/(H-1):(Pt-mt*mt/H)/H}function ue(Q,at){for(var B=0;B<Q.rows;B++)for(var C=0;C<Q.columns;C++)Q.set(B,C,Q.get(B,C)-at[B])}function fe(Q,at){for(var B=0;B<Q.rows;B++)for(var C=0;C<Q.columns;C++)Q.set(B,C,Q.get(B,C)-at[C])}function Gt(Q,at){for(var B=0;B<Q.rows;B++)for(var C=0;C<Q.columns;C++)Q.set(B,C,Q.get(B,C)-at)}function ae(Q){for(var at=[],B=0;B<Q.rows;B++){for(var C=0,I=0;I<Q.columns;I++)C+=Math.pow(Q.get(B,I),2)/(Q.columns-1);at.push(Math.sqrt(C))}return at}function Ne(Q,at){for(var B=0;B<Q.rows;B++)for(var C=0;C<Q.columns;C++)Q.set(B,C,Q.get(B,C)/at[B])}function ee(Q){for(var at=[],B=0;B<Q.columns;B++){for(var C=0,I=0;I<Q.rows;I++)C+=Math.pow(Q.get(I,B),2)/(Q.rows-1);at.push(Math.sqrt(C))}return at}function de(Q,at){for(var B=0;B<Q.rows;B++)for(var C=0;C<Q.columns;C++)Q.set(B,C,Q.get(B,C)/at[C])}function ze(Q){for(var at=Q.size-1,B=0,C=0;C<Q.columns;C++)for(var I=0;I<Q.rows;I++)B+=Math.pow(Q.get(I,C),2)/at;return Math.sqrt(B)}function be(Q,at){for(var B=0;B<Q.rows;B++)for(var C=0;C<Q.columns;C++)Q.set(B,C,Q.get(B,C)/at)}var ke=function(){function Q(){x()(this,Q)}return T()(Q,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(B){if(typeof B!="function")throw new TypeError("callback must be a function");for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)B.call(this,C,I);return this}},{key:"to1DArray",value:function(){for(var B=[],C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)B.push(this.get(C,I));return B}},{key:"to2DArray",value:function(){for(var B=[],C=0;C<this.rows;C++){B.push([]);for(var I=0;I<this.columns;I++)B[C].push(this.get(C,I))}return B}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return this.rows===0||this.columns===0}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var B=0;B<this.rows;B++)for(var C=0;C<=B;C++)if(this.get(B,C)!==this.get(C,B))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var B=0,C=0,I=-1,H=!0,mt=!1;B<this.rows&&H;){for(C=0,mt=!1;C<this.columns&&mt===!1;)this.get(B,C)===0?C++:this.get(B,C)===1&&C>I?(mt=!0,I=C):(H=!1,mt=!0);B++}return H}},{key:"isReducedEchelonForm",value:function(){for(var B=0,C=0,I=-1,H=!0,mt=!1;B<this.rows&&H;){for(C=0,mt=!1;C<this.columns&&mt===!1;)this.get(B,C)===0?C++:this.get(B,C)===1&&C>I?(mt=!0,I=C):(H=!1,mt=!0);for(var Pt=C+1;Pt<this.rows;Pt++)this.get(B,Pt)!==0&&(H=!1);B++}return H}},{key:"echelonForm",value:function(){for(var B=this.clone(),C=0,I=0;C<B.rows&&I<B.columns;){for(var H=C,mt=C;mt<B.rows;mt++)B.get(mt,I)>B.get(H,I)&&(H=mt);if(B.get(H,I)===0)I++;else{B.swapRows(C,H);for(var Pt=B.get(C,I),Lt=I;Lt<B.columns;Lt++)B.set(C,Lt,B.get(C,Lt)/Pt);for(var Jt=C+1;Jt<B.rows;Jt++){var Oe=B.get(Jt,I)/B.get(C,I);B.set(Jt,I,0);for(var ye=I+1;ye<B.columns;ye++)B.set(Jt,ye,B.get(Jt,ye)-B.get(C,ye)*Oe)}C++,I++}}return B}},{key:"reducedEchelonForm",value:function(){for(var B=this.echelonForm(),C=B.columns,I=B.rows,H=I-1;H>=0;)if(B.maxRow(H)===0)H--;else{for(var mt=0,Pt=!1;mt<I&&Pt===!1;)B.get(H,mt)===1?Pt=!0:mt++;for(var Lt=0;Lt<H;Lt++)for(var Jt=B.get(Lt,mt),Oe=mt;Oe<C;Oe++){var ye=B.get(Lt,Oe)-Jt*B.get(H,Oe);B.set(Lt,Oe,ye)}H--}return B}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(b()(B)!=="object")throw new TypeError("options must be an object");var C=B.rows,I=C===void 0?1:C,H=B.columns,mt=H===void 0?1:H;if(!Number.isInteger(I)||I<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(mt)||mt<=0)throw new TypeError("columns must be a positive integer");for(var Pt=new ie(this.rows*I,this.columns*mt),Lt=0;Lt<I;Lt++)for(var Jt=0;Jt<mt;Jt++)Pt.setSubMatrix(this,this.rows*Lt,this.columns*Jt);return Pt}},{key:"fill",value:function(B){for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,B);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(B){J(this,B);for(var C=[],I=0;I<this.columns;I++)C.push(this.get(B,I));return C}},{key:"getRowVector",value:function(B){return ie.rowVector(this.getRow(B))}},{key:"setRow",value:function(B,C){J(this,B),C=nt(this,C);for(var I=0;I<this.columns;I++)this.set(B,I,C[I]);return this}},{key:"swapRows",value:function(B,C){J(this,B),J(this,C);for(var I=0;I<this.columns;I++){var H=this.get(B,I);this.set(B,I,this.get(C,I)),this.set(C,I,H)}return this}},{key:"getColumn",value:function(B){ut(this,B);for(var C=[],I=0;I<this.rows;I++)C.push(this.get(I,B));return C}},{key:"getColumnVector",value:function(B){return ie.columnVector(this.getColumn(B))}},{key:"setColumn",value:function(B,C){ut(this,B),C=yt(this,C);for(var I=0;I<this.rows;I++)this.set(I,B,C[I]);return this}},{key:"swapColumns",value:function(B,C){ut(this,B),ut(this,C);for(var I=0;I<this.rows;I++){var H=this.get(I,B);this.set(I,B,this.get(I,C)),this.set(I,C,H)}return this}},{key:"addRowVector",value:function(B){B=nt(this,B);for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,this.get(C,I)+B[I]);return this}},{key:"subRowVector",value:function(B){B=nt(this,B);for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,this.get(C,I)-B[I]);return this}},{key:"mulRowVector",value:function(B){B=nt(this,B);for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,this.get(C,I)*B[I]);return this}},{key:"divRowVector",value:function(B){B=nt(this,B);for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,this.get(C,I)/B[I]);return this}},{key:"addColumnVector",value:function(B){B=yt(this,B);for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,this.get(C,I)+B[C]);return this}},{key:"subColumnVector",value:function(B){B=yt(this,B);for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,this.get(C,I)-B[C]);return this}},{key:"mulColumnVector",value:function(B){B=yt(this,B);for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,this.get(C,I)*B[C]);return this}},{key:"divColumnVector",value:function(B){B=yt(this,B);for(var C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)this.set(C,I,this.get(C,I)/B[C]);return this}},{key:"mulRow",value:function(B,C){J(this,B);for(var I=0;I<this.columns;I++)this.set(B,I,this.get(B,I)*C);return this}},{key:"mulColumn",value:function(B,C){ut(this,B);for(var I=0;I<this.rows;I++)this.set(I,B,this.get(I,B)*C);return this}},{key:"max",value:function(B){if(this.isEmpty())return NaN;switch(B){case"row":{for(var C=new Array(this.rows).fill(Number.NEGATIVE_INFINITY),I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.get(I,H)>C[I]&&(C[I]=this.get(I,H));return C}case"column":{for(var mt=new Array(this.columns).fill(Number.NEGATIVE_INFINITY),Pt=0;Pt<this.rows;Pt++)for(var Lt=0;Lt<this.columns;Lt++)this.get(Pt,Lt)>mt[Lt]&&(mt[Lt]=this.get(Pt,Lt));return mt}case void 0:{for(var Jt=this.get(0,0),Oe=0;Oe<this.rows;Oe++)for(var ye=0;ye<this.columns;ye++)this.get(Oe,ye)>Jt&&(Jt=this.get(Oe,ye));return Jt}default:throw new Error("invalid option: ".concat(B))}}},{key:"maxIndex",value:function(){it(this);for(var B=this.get(0,0),C=[0,0],I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.get(I,H)>B&&(B=this.get(I,H),C[0]=I,C[1]=H);return C}},{key:"min",value:function(B){if(this.isEmpty())return NaN;switch(B){case"row":{for(var C=new Array(this.rows).fill(Number.POSITIVE_INFINITY),I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.get(I,H)<C[I]&&(C[I]=this.get(I,H));return C}case"column":{for(var mt=new Array(this.columns).fill(Number.POSITIVE_INFINITY),Pt=0;Pt<this.rows;Pt++)for(var Lt=0;Lt<this.columns;Lt++)this.get(Pt,Lt)<mt[Lt]&&(mt[Lt]=this.get(Pt,Lt));return mt}case void 0:{for(var Jt=this.get(0,0),Oe=0;Oe<this.rows;Oe++)for(var ye=0;ye<this.columns;ye++)this.get(Oe,ye)<Jt&&(Jt=this.get(Oe,ye));return Jt}default:throw new Error("invalid option: ".concat(B))}}},{key:"minIndex",value:function(){it(this);for(var B=this.get(0,0),C=[0,0],I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)this.get(I,H)<B&&(B=this.get(I,H),C[0]=I,C[1]=H);return C}},{key:"maxRow",value:function(B){if(J(this,B),this.isEmpty())return NaN;for(var C=this.get(B,0),I=1;I<this.columns;I++)this.get(B,I)>C&&(C=this.get(B,I));return C}},{key:"maxRowIndex",value:function(B){J(this,B),it(this);for(var C=this.get(B,0),I=[B,0],H=1;H<this.columns;H++)this.get(B,H)>C&&(C=this.get(B,H),I[1]=H);return I}},{key:"minRow",value:function(B){if(J(this,B),this.isEmpty())return NaN;for(var C=this.get(B,0),I=1;I<this.columns;I++)this.get(B,I)<C&&(C=this.get(B,I));return C}},{key:"minRowIndex",value:function(B){J(this,B),it(this);for(var C=this.get(B,0),I=[B,0],H=1;H<this.columns;H++)this.get(B,H)<C&&(C=this.get(B,H),I[1]=H);return I}},{key:"maxColumn",value:function(B){if(ut(this,B),this.isEmpty())return NaN;for(var C=this.get(0,B),I=1;I<this.rows;I++)this.get(I,B)>C&&(C=this.get(I,B));return C}},{key:"maxColumnIndex",value:function(B){ut(this,B),it(this);for(var C=this.get(0,B),I=[0,B],H=1;H<this.rows;H++)this.get(H,B)>C&&(C=this.get(H,B),I[0]=H);return I}},{key:"minColumn",value:function(B){if(ut(this,B),this.isEmpty())return NaN;for(var C=this.get(0,B),I=1;I<this.rows;I++)this.get(I,B)<C&&(C=this.get(I,B));return C}},{key:"minColumnIndex",value:function(B){ut(this,B),it(this);for(var C=this.get(0,B),I=[0,B],H=1;H<this.rows;H++)this.get(H,B)<C&&(C=this.get(H,B),I[0]=H);return I}},{key:"diag",value:function(){for(var B=Math.min(this.rows,this.columns),C=[],I=0;I<B;I++)C.push(this.get(I,I));return C}},{key:"norm",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius",C=0;if(B==="max")return this.max();if(B==="frobenius"){for(var I=0;I<this.rows;I++)for(var H=0;H<this.columns;H++)C=C+this.get(I,H)*this.get(I,H);return Math.sqrt(C)}else throw new RangeError("unknown norm type: ".concat(B))}},{key:"cumulativeSum",value:function(){for(var B=0,C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)B+=this.get(C,I),this.set(C,I,B);return this}},{key:"dot",value:function(B){Q.isMatrix(B)&&(B=B.to1DArray());var C=this.to1DArray();if(C.length!==B.length)throw new RangeError("vectors do not have the same size");for(var I=0,H=0;H<C.length;H++)I+=C[H]*B[H];return I}},{key:"mmul",value:function(B){B=ie.checkMatrix(B);for(var C=this.rows,I=this.columns,H=B.columns,mt=new ie(C,H),Pt=new Float64Array(I),Lt=0;Lt<H;Lt++){for(var Jt=0;Jt<I;Jt++)Pt[Jt]=B.get(Jt,Lt);for(var Oe=0;Oe<C;Oe++){for(var ye=0,Ze=0;Ze<I;Ze++)ye+=this.get(Oe,Ze)*Pt[Ze];mt.set(Oe,Lt,ye)}}return mt}},{key:"strassen2x2",value:function(B){B=ie.checkMatrix(B);var C=new ie(2,2),I=this.get(0,0),H=B.get(0,0),mt=this.get(0,1),Pt=B.get(0,1),Lt=this.get(1,0),Jt=B.get(1,0),Oe=this.get(1,1),ye=B.get(1,1),Ze=(I+Oe)*(H+ye),wr=(Lt+Oe)*H,er=I*(Pt-ye),Ur=Oe*(Jt-H),xn=(I+mt)*ye,rr=(Lt-I)*(H+Pt),xr=(mt-Oe)*(Jt+ye),Wr=Ze+Ur-xn+xr,Gr=er+xn,ce=wr+Ur,Yt=Ze-wr+er+rr;return C.set(0,0,Wr),C.set(0,1,Gr),C.set(1,0,ce),C.set(1,1,Yt),C}},{key:"strassen3x3",value:function(B){B=ie.checkMatrix(B);var C=new ie(3,3),I=this.get(0,0),H=this.get(0,1),mt=this.get(0,2),Pt=this.get(1,0),Lt=this.get(1,1),Jt=this.get(1,2),Oe=this.get(2,0),ye=this.get(2,1),Ze=this.get(2,2),wr=B.get(0,0),er=B.get(0,1),Ur=B.get(0,2),xn=B.get(1,0),rr=B.get(1,1),xr=B.get(1,2),Wr=B.get(2,0),Gr=B.get(2,1),ce=B.get(2,2),Yt=(I+H+mt-Pt-Lt-ye-Ze)*rr,ge=(I-Pt)*(-er+rr),Ie=Lt*(-wr+er+xn-rr-xr-Wr+ce),xe=(-I+Pt+Lt)*(wr-er+rr),Ye=(Pt+Lt)*(-wr+er),gr=I*wr,Mr=(-I+Oe+ye)*(wr-Ur+xr),vn=(-I+Oe)*(Ur-xr),Wn=(Oe+ye)*(-wr+Ur),Sn=(I+H+mt-Lt-Jt-Oe-ye)*xr,ea=ye*(-wr+Ur+xn-rr-xr-Wr+Gr),wn=(-mt+ye+Ze)*(rr+Wr-Gr),Hn=(mt-Ze)*(rr-Gr),la=mt*Wr,ba=(ye+Ze)*(-Wr+Gr),xa=(-mt+Lt+Jt)*(xr+Wr-ce),Yi=(mt-Jt)*(xr-ce),ri=(Lt+Jt)*(-Wr+ce),ti=H*xn,Mi=Jt*Gr,Vi=Pt*Ur,ao=Oe*er,io=Ze*ce,wa=gr+la+ti,oo=Yt+xe+Ye+gr+wn+la+ba,To=gr+Mr+Wn+Sn+la+xa+ri,ii=ge+Ie+xe+gr+la+xa+Yi,Xi=ge+xe+Ye+gr+Mi,so=la+xa+Yi+ri+Vi,zo=gr+Mr+vn+ea+wn+Hn+la,ro=wn+Hn+la+ba+ao,vo=gr+Mr+vn+Wn+io;return C.set(0,0,wa),C.set(0,1,oo),C.set(0,2,To),C.set(1,0,ii),C.set(1,1,Xi),C.set(1,2,so),C.set(2,0,zo),C.set(2,1,ro),C.set(2,2,vo),C}},{key:"mmulStrassen",value:function(B){B=ie.checkMatrix(B);var C=this.clone(),I=C.rows,H=C.columns,mt=B.rows,Pt=B.columns;H!==mt&&console.warn("Multiplying ".concat(I," x ").concat(H," and ").concat(mt," x ").concat(Pt," matrix: dimensions do not match."));function Lt(Ze,wr,er){var Ur=Ze.rows,xn=Ze.columns;if(Ur===wr&&xn===er)return Ze;var rr=Q.zeros(wr,er);return rr=rr.setSubMatrix(Ze,0,0),rr}var Jt=Math.max(I,mt),Oe=Math.max(H,Pt);C=Lt(C,Jt,Oe),B=Lt(B,Jt,Oe);function ye(Ze,wr,er,Ur){if(er<=512||Ur<=512)return Ze.mmul(wr);er%2===1&&Ur%2===1?(Ze=Lt(Ze,er+1,Ur+1),wr=Lt(wr,er+1,Ur+1)):er%2===1?(Ze=Lt(Ze,er+1,Ur),wr=Lt(wr,er+1,Ur)):Ur%2===1&&(Ze=Lt(Ze,er,Ur+1),wr=Lt(wr,er,Ur+1));var xn=parseInt(Ze.rows/2,10),rr=parseInt(Ze.columns/2,10),xr=Ze.subMatrix(0,xn-1,0,rr-1),Wr=wr.subMatrix(0,xn-1,0,rr-1),Gr=Ze.subMatrix(0,xn-1,rr,Ze.columns-1),ce=wr.subMatrix(0,xn-1,rr,wr.columns-1),Yt=Ze.subMatrix(xn,Ze.rows-1,0,rr-1),ge=wr.subMatrix(xn,wr.rows-1,0,rr-1),Ie=Ze.subMatrix(xn,Ze.rows-1,rr,Ze.columns-1),xe=wr.subMatrix(xn,wr.rows-1,rr,wr.columns-1),Ye=ye(Q.add(xr,Ie),Q.add(Wr,xe),xn,rr),gr=ye(Q.add(Yt,Ie),Wr,xn,rr),Mr=ye(xr,Q.sub(ce,xe),xn,rr),vn=ye(Ie,Q.sub(ge,Wr),xn,rr),Wn=ye(Q.add(xr,Gr),xe,xn,rr),Sn=ye(Q.sub(Yt,xr),Q.add(Wr,ce),xn,rr),ea=ye(Q.sub(Gr,Ie),Q.add(ge,xe),xn,rr),wn=Q.add(Ye,vn);wn.sub(Wn),wn.add(ea);var Hn=Q.add(Mr,Wn),la=Q.add(gr,vn),ba=Q.sub(Ye,gr);ba.add(Mr),ba.add(Sn);var xa=Q.zeros(2*wn.rows,2*wn.columns);return xa=xa.setSubMatrix(wn,0,0),xa=xa.setSubMatrix(Hn,wn.rows,0),xa=xa.setSubMatrix(la,0,wn.columns),xa=xa.setSubMatrix(ba,wn.rows,wn.columns),xa.subMatrix(0,er-1,0,Ur-1)}return ye(C,B,Jt,Oe)}},{key:"scaleRows",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(b()(B)!=="object")throw new TypeError("options must be an object");var C=B.min,I=C===void 0?0:C,H=B.max,mt=H===void 0?1:H;if(!Number.isFinite(I))throw new TypeError("min must be a number");if(!Number.isFinite(mt))throw new TypeError("max must be a number");if(I>=mt)throw new RangeError("min must be smaller than max");for(var Pt=new ie(this.rows,this.columns),Lt=0;Lt<this.rows;Lt++){var Jt=this.getRow(Lt);Jt.length>0&&l(Jt,{min:I,max:mt,output:Jt}),Pt.setRow(Lt,Jt)}return Pt}},{key:"scaleColumns",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(b()(B)!=="object")throw new TypeError("options must be an object");var C=B.min,I=C===void 0?0:C,H=B.max,mt=H===void 0?1:H;if(!Number.isFinite(I))throw new TypeError("min must be a number");if(!Number.isFinite(mt))throw new TypeError("max must be a number");if(I>=mt)throw new RangeError("min must be smaller than max");for(var Pt=new ie(this.rows,this.columns),Lt=0;Lt<this.columns;Lt++){var Jt=this.getColumn(Lt);Jt.length&&l(Jt,{min:I,max:mt,output:Jt}),Pt.setColumn(Lt,Jt)}return Pt}},{key:"flipRows",value:function(){for(var B=Math.ceil(this.columns/2),C=0;C<this.rows;C++)for(var I=0;I<B;I++){var H=this.get(C,I),mt=this.get(C,this.columns-1-I);this.set(C,I,mt),this.set(C,this.columns-1-I,H)}return this}},{key:"flipColumns",value:function(){for(var B=Math.ceil(this.rows/2),C=0;C<this.columns;C++)for(var I=0;I<B;I++){var H=this.get(I,C),mt=this.get(this.rows-1-I,C);this.set(I,C,mt),this.set(this.rows-1-I,C,H)}return this}},{key:"kroneckerProduct",value:function(B){B=ie.checkMatrix(B);for(var C=this.rows,I=this.columns,H=B.rows,mt=B.columns,Pt=new ie(C*H,I*mt),Lt=0;Lt<C;Lt++)for(var Jt=0;Jt<I;Jt++)for(var Oe=0;Oe<H;Oe++)for(var ye=0;ye<mt;ye++)Pt.set(H*Lt+Oe,mt*Jt+ye,this.get(Lt,Jt)*B.get(Oe,ye));return Pt}},{key:"kroneckerSum",value:function(B){if(B=ie.checkMatrix(B),!this.isSquare()||!B.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var C=this.rows,I=B.rows,H=this.kroneckerProduct(ie.eye(I,I)),mt=ie.eye(C,C).kroneckerProduct(B);return H.add(mt)}},{key:"transpose",value:function(){for(var B=new ie(this.columns,this.rows),C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)B.set(I,C,this.get(C,I));return B}},{key:"sortRows",value:function(){for(var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:he,C=0;C<this.rows;C++)this.setRow(C,this.getRow(C).sort(B));return this}},{key:"sortColumns",value:function(){for(var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:he,C=0;C<this.columns;C++)this.setColumn(C,this.getColumn(C).sort(B));return this}},{key:"subMatrix",value:function(B,C,I,H){wt(this,B,C,I,H);for(var mt=new ie(C-B+1,H-I+1),Pt=B;Pt<=C;Pt++)for(var Lt=I;Lt<=H;Lt++)mt.set(Pt-B,Lt-I,this.get(Pt,Lt));return mt}},{key:"subMatrixRow",value:function(B,C,I){if(C===void 0&&(C=0),I===void 0&&(I=this.columns-1),C>I||C<0||C>=this.columns||I<0||I>=this.columns)throw new RangeError("Argument out of range");for(var H=new ie(B.length,I-C+1),mt=0;mt<B.length;mt++)for(var Pt=C;Pt<=I;Pt++){if(B[mt]<0||B[mt]>=this.rows)throw new RangeError("Row index out of range: ".concat(B[mt]));H.set(mt,Pt-C,this.get(B[mt],Pt))}return H}},{key:"subMatrixColumn",value:function(B,C,I){if(C===void 0&&(C=0),I===void 0&&(I=this.rows-1),C>I||C<0||C>=this.rows||I<0||I>=this.rows)throw new RangeError("Argument out of range");for(var H=new ie(I-C+1,B.length),mt=0;mt<B.length;mt++)for(var Pt=C;Pt<=I;Pt++){if(B[mt]<0||B[mt]>=this.columns)throw new RangeError("Column index out of range: ".concat(B[mt]));H.set(Pt-C,mt,this.get(Pt,B[mt]))}return H}},{key:"setSubMatrix",value:function(B,C,I){if(B=ie.checkMatrix(B),B.isEmpty())return this;var H=C+B.rows-1,mt=I+B.columns-1;wt(this,C,H,I,mt);for(var Pt=0;Pt<B.rows;Pt++)for(var Lt=0;Lt<B.columns;Lt++)this.set(C+Pt,I+Lt,B.get(Pt,Lt));return this}},{key:"selection",value:function(B,C){dt(this,B),Ft(this,C);for(var I=new ie(B.length,C.length),H=0;H<B.length;H++)for(var mt=B[H],Pt=0;Pt<C.length;Pt++){var Lt=C[Pt];I.set(H,Pt,this.get(mt,Lt))}return I}},{key:"trace",value:function(){for(var B=Math.min(this.rows,this.columns),C=0,I=0;I<B;I++)C+=this.get(I,I);return C}},{key:"clone",value:function(){for(var B=new ie(this.rows,this.columns),C=0;C<this.rows;C++)for(var I=0;I<this.columns;I++)B.set(C,I,this.get(C,I));return B}},{key:"sum",value:function(B){switch(B){case"row":return Tt(this);case"column":return Nt(this);case void 0:return st(this);default:throw new Error("invalid option: ".concat(B))}}},{key:"product",value:function(B){switch(B){case"row":return xt(this);case"column":return zt(this);case void 0:return Wt(this);default:throw new Error("invalid option: ".concat(B))}}},{key:"mean",value:function(B){var C=this.sum(B);switch(B){case"row":{for(var I=0;I<this.rows;I++)C[I]/=this.columns;return C}case"column":{for(var H=0;H<this.columns;H++)C[H]/=this.rows;return C}case void 0:return C/this.size;default:throw new Error("invalid option: ".concat(B))}}},{key:"variance",value:function(B){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(b()(B)==="object"&&(C=B,B=void 0),b()(C)!=="object")throw new TypeError("options must be an object");var I=C,H=I.unbiased,mt=H===void 0?!0:H,Pt=I.mean,Lt=Pt===void 0?this.mean(B):Pt;if(typeof mt!="boolean")throw new TypeError("unbiased must be a boolean");switch(B){case"row":{if(!O(Lt))throw new TypeError("mean must be an array");return _t(this,mt,Lt)}case"column":{if(!O(Lt))throw new TypeError("mean must be an array");return Xt(this,mt,Lt)}case void 0:{if(typeof Lt!="number")throw new TypeError("mean must be a number");return te(this,mt,Lt)}default:throw new Error("invalid option: ".concat(B))}}},{key:"standardDeviation",value:function(B,C){b()(B)==="object"&&(C=B,B=void 0);var I=this.variance(B,C);if(B===void 0)return Math.sqrt(I);for(var H=0;H<I.length;H++)I[H]=Math.sqrt(I[H]);return I}},{key:"center",value:function(B){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(b()(B)==="object"&&(C=B,B=void 0),b()(C)!=="object")throw new TypeError("options must be an object");var I=C,H=I.center,mt=H===void 0?this.mean(B):H;switch(B){case"row":{if(!O(mt))throw new TypeError("center must be an array");return ue(this,mt),this}case"column":{if(!O(mt))throw new TypeError("center must be an array");return fe(this,mt),this}case void 0:{if(typeof mt!="number")throw new TypeError("center must be a number");return Gt(this,mt),this}default:throw new Error("invalid option: ".concat(B))}}},{key:"scale",value:function(B){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(b()(B)==="object"&&(C=B,B=void 0),b()(C)!=="object")throw new TypeError("options must be an object");var I=C.scale;switch(B){case"row":{if(I===void 0)I=ae(this);else if(!O(I))throw new TypeError("scale must be an array");return Ne(this,I),this}case"column":{if(I===void 0)I=ee(this);else if(!O(I))throw new TypeError("scale must be an array");return de(this,I),this}case void 0:{if(I===void 0)I=ze(this);else if(typeof I!="number")throw new TypeError("scale must be a number");return be(this,I),this}default:throw new Error("invalid option: ".concat(B))}}},{key:"toString",value:function(B){return W(this,B)}}],[{key:"from1DArray",value:function(B,C,I){var H=B*C;if(H!==I.length)throw new RangeError("data length does not match given dimensions");for(var mt=new ie(B,C),Pt=0;Pt<B;Pt++)for(var Lt=0;Lt<C;Lt++)mt.set(Pt,Lt,I[Pt*C+Lt]);return mt}},{key:"rowVector",value:function(B){for(var C=new ie(1,B.length),I=0;I<B.length;I++)C.set(0,I,B[I]);return C}},{key:"columnVector",value:function(B){for(var C=new ie(B.length,1),I=0;I<B.length;I++)C.set(I,0,B[I]);return C}},{key:"zeros",value:function(B,C){return new ie(B,C)}},{key:"ones",value:function(B,C){return new ie(B,C).fill(1)}},{key:"rand",value:function(B,C){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(b()(I)!=="object")throw new TypeError("options must be an object");for(var H=I.random,mt=H===void 0?Math.random:H,Pt=new ie(B,C),Lt=0;Lt<B;Lt++)for(var Jt=0;Jt<C;Jt++)Pt.set(Lt,Jt,mt());return Pt}},{key:"randInt",value:function(B,C){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(b()(I)!=="object")throw new TypeError("options must be an object");var H=I.min,mt=H===void 0?0:H,Pt=I.max,Lt=Pt===void 0?1e3:Pt,Jt=I.random,Oe=Jt===void 0?Math.random:Jt;if(!Number.isInteger(mt))throw new TypeError("min must be an integer");if(!Number.isInteger(Lt))throw new TypeError("max must be an integer");if(mt>=Lt)throw new RangeError("min must be smaller than max");for(var ye=Lt-mt,Ze=new ie(B,C),wr=0;wr<B;wr++)for(var er=0;er<C;er++){var Ur=mt+Math.round(Oe()*ye);Ze.set(wr,er,Ur)}return Ze}},{key:"eye",value:function(B,C,I){C===void 0&&(C=B),I===void 0&&(I=1);for(var H=Math.min(B,C),mt=this.zeros(B,C),Pt=0;Pt<H;Pt++)mt.set(Pt,Pt,I);return mt}},{key:"diag",value:function(B,C,I){var H=B.length;C===void 0&&(C=H),I===void 0&&(I=C);for(var mt=Math.min(H,C,I),Pt=this.zeros(C,I),Lt=0;Lt<mt;Lt++)Pt.set(Lt,Lt,B[Lt]);return Pt}},{key:"min",value:function(B,C){B=this.checkMatrix(B),C=this.checkMatrix(C);for(var I=B.rows,H=B.columns,mt=new ie(I,H),Pt=0;Pt<I;Pt++)for(var Lt=0;Lt<H;Lt++)mt.set(Pt,Lt,Math.min(B.get(Pt,Lt),C.get(Pt,Lt)));return mt}},{key:"max",value:function(B,C){B=this.checkMatrix(B),C=this.checkMatrix(C);for(var I=B.rows,H=B.columns,mt=new this(I,H),Pt=0;Pt<I;Pt++)for(var Lt=0;Lt<H;Lt++)mt.set(Pt,Lt,Math.max(B.get(Pt,Lt),C.get(Pt,Lt)));return mt}},{key:"checkMatrix",value:function(B){return Q.isMatrix(B)?B:new ie(B)}},{key:"isMatrix",value:function(B){return B!=null&&B.klass==="Matrix"}}]),Q}();ke.prototype.klass="Matrix",typeof Symbol!="undefined"&&(ke.prototype[Symbol.for("nodejs.util.inspect.custom")]=F);function he(Q,at){return Q-at}function vt(Q){return Q.every(function(at){return typeof at=="number"})}ke.random=ke.rand,ke.randomInt=ke.randInt,ke.diagonal=ke.diag,ke.prototype.diagonal=ke.prototype.diag,ke.identity=ke.eye,ke.prototype.negate=ke.prototype.neg,ke.prototype.tensorProduct=ke.prototype.kroneckerProduct;var ie=function(Q){M()(B,Q);var at=L()(B);function B(C,I){var H;if(x()(this,B),H=at.call(this),B.isMatrix(C))return R()(H,C.clone());if(Number.isInteger(C)&&C>=0)if(H.data=[],Number.isInteger(I)&&I>=0)for(var mt=0;mt<C;mt++)H.data.push(new Float64Array(I));else throw new TypeError("nColumns must be a positive integer");else if(O(C)){var Pt=C;if(C=Pt.length,I=C?Pt[0].length:0,typeof I!="number")throw new TypeError("Data must be a 2D array with at least one element");H.data=[];for(var Lt=0;Lt<C;Lt++){if(Pt[Lt].length!==I)throw new RangeError("Inconsistent array dimensions");if(!vt(Pt[Lt]))throw new TypeError("Input data contains non-numeric values");H.data.push(Float64Array.from(Pt[Lt]))}}else throw new TypeError("First argument must be a positive number or an array");return H.rows=C,H.columns=I,H}return T()(B,[{key:"set",value:function(I,H,mt){return this.data[I][H]=mt,this}},{key:"get",value:function(I,H){return this.data[I][H]}},{key:"removeRow",value:function(I){return J(this,I),this.data.splice(I,1),this.rows-=1,this}},{key:"addRow",value:function(I,H){return H===void 0&&(H=I,I=this.rows),J(this,I,!0),H=Float64Array.from(nt(this,H)),this.data.splice(I,0,H),this.rows+=1,this}},{key:"removeColumn",value:function(I){ut(this,I);for(var H=0;H<this.rows;H++){for(var mt=new Float64Array(this.columns-1),Pt=0;Pt<I;Pt++)mt[Pt]=this.data[H][Pt];for(var Lt=I+1;Lt<this.columns;Lt++)mt[Lt-1]=this.data[H][Lt];this.data[H]=mt}return this.columns-=1,this}},{key:"addColumn",value:function(I,H){typeof H=="undefined"&&(H=I,I=this.columns),ut(this,I,!0),H=yt(this,H);for(var mt=0;mt<this.rows;mt++){for(var Pt=new Float64Array(this.columns+1),Lt=0;Lt<I;Lt++)Pt[Lt]=this.data[mt][Lt];for(Pt[Lt++]=H[mt];Lt<this.columns+1;Lt++)Pt[Lt]=this.data[mt][Lt-1];this.data[mt]=Pt}return this.columns+=1,this}}]),B}(ke);$(ke,ie);var Pe=function(Q){M()(B,Q);var at=L()(B);function B(C,I,H){var mt;return x()(this,B),mt=at.call(this),mt.matrix=C,mt.rows=I,mt.columns=H,mt}return T()(B)}(ke),qe=function(Q){M()(B,Q);var at=L()(B);function B(C,I){var H;return x()(this,B),ut(C,I),H=at.call(this,C,C.rows,1),H.column=I,H}return T()(B,[{key:"set",value:function(I,H,mt){return this.matrix.set(I,this.column,mt),this}},{key:"get",value:function(I){return this.matrix.get(I,this.column)}}]),B}(Pe),Qe=function(Q){M()(B,Q);var at=L()(B);function B(C,I){var H;return x()(this,B),Ft(C,I),H=at.call(this,C,C.rows,I.length),H.columnIndices=I,H}return T()(B,[{key:"set",value:function(I,H,mt){return this.matrix.set(I,this.columnIndices[H],mt),this}},{key:"get",value:function(I,H){return this.matrix.get(I,this.columnIndices[H])}}]),B}(Pe),lr=function(Q){M()(B,Q);var at=L()(B);function B(C){return x()(this,B),at.call(this,C,C.rows,C.columns)}return T()(B,[{key:"set",value:function(I,H,mt){return this.matrix.set(I,this.columns-H-1,mt),this}},{key:"get",value:function(I,H){return this.matrix.get(I,this.columns-H-1)}}]),B}(Pe),fr=function(Q){M()(B,Q);var at=L()(B);function B(C){return x()(this,B),at.call(this,C,C.rows,C.columns)}return T()(B,[{key:"set",value:function(I,H,mt){return this.matrix.set(this.rows-I-1,H,mt),this}},{key:"get",value:function(I,H){return this.matrix.get(this.rows-I-1,H)}}]),B}(Pe),kr=function(Q){M()(B,Q);var at=L()(B);function B(C,I){var H;return x()(this,B),J(C,I),H=at.call(this,C,1,C.columns),H.row=I,H}return T()(B,[{key:"set",value:function(I,H,mt){return this.matrix.set(this.row,H,mt),this}},{key:"get",value:function(I,H){return this.matrix.get(this.row,H)}}]),B}(Pe),En=function(Q){M()(B,Q);var at=L()(B);function B(C,I){var H;return x()(this,B),dt(C,I),H=at.call(this,C,I.length,C.columns),H.rowIndices=I,H}return T()(B,[{key:"set",value:function(I,H,mt){return this.matrix.set(this.rowIndices[I],H,mt),this}},{key:"get",value:function(I,H){return this.matrix.get(this.rowIndices[I],H)}}]),B}(Pe),fn=function(Q){M()(B,Q);var at=L()(B);function B(C,I,H){var mt;return x()(this,B),dt(C,I),Ft(C,H),mt=at.call(this,C,I.length,H.length),mt.rowIndices=I,mt.columnIndices=H,mt}return T()(B,[{key:"set",value:function(I,H,mt){return this.matrix.set(this.rowIndices[I],this.columnIndices[H],mt),this}},{key:"get",value:function(I,H){return this.matrix.get(this.rowIndices[I],this.columnIndices[H])}}]),B}(Pe),Vr=function(Q){M()(B,Q);var at=L()(B);function B(C,I,H,mt,Pt){var Lt;return x()(this,B),wt(C,I,H,mt,Pt),Lt=at.call(this,C,H-I+1,Pt-mt+1),Lt.startRow=I,Lt.startColumn=mt,Lt}return T()(B,[{key:"set",value:function(I,H,mt){return this.matrix.set(this.startRow+I,this.startColumn+H,mt),this}},{key:"get",value:function(I,H){return this.matrix.get(this.startRow+I,this.startColumn+H)}}]),B}(Pe),Je=function(Q){M()(B,Q);var at=L()(B);function B(C){return x()(this,B),at.call(this,C,C.columns,C.rows)}return T()(B,[{key:"set",value:function(I,H,mt){return this.matrix.set(H,I,mt),this}},{key:"get",value:function(I,H){return this.matrix.get(H,I)}}]),B}(Pe),dr=function(Q){M()(B,Q);var at=L()(B);function B(C){var I,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};x()(this,B);var mt=H.rows,Pt=mt===void 0?1:mt;if(C.length%Pt!==0)throw new Error("the data length is not divisible by the number of rows");return I=at.call(this),I.rows=Pt,I.columns=C.length/Pt,I.data=C,I}return T()(B,[{key:"set",value:function(I,H,mt){var Pt=this._calculateIndex(I,H);return this.data[Pt]=mt,this}},{key:"get",value:function(I,H){var mt=this._calculateIndex(I,H);return this.data[mt]}},{key:"_calculateIndex",value:function(I,H){return I*this.columns+H}}]),B}(ke),nr=function(Q){M()(B,Q);var at=L()(B);function B(C){var I;return x()(this,B),I=at.call(this),I.data=C,I.rows=C.length,I.columns=C[0].length,I}return T()(B,[{key:"set",value:function(I,H,mt){return this.data[I][H]=mt,this}},{key:"get",value:function(I,H){return this.data[I][H]}}]),B}(ke);function oe(Q,at){if(O(Q))return Q[0]&&O(Q[0])?new nr(Q):new dr(Q,at);throw new Error("the argument is not an array")}var Te=function(){function Q(at){x()(this,Q),at=nr.checkMatrix(at);var B=at.clone(),C=B.rows,I=B.columns,H=new Float64Array(C),mt=1,Pt,Lt,Jt,Oe,ye,Ze,wr,er,Ur;for(Pt=0;Pt<C;Pt++)H[Pt]=Pt;for(er=new Float64Array(C),Lt=0;Lt<I;Lt++){for(Pt=0;Pt<C;Pt++)er[Pt]=B.get(Pt,Lt);for(Pt=0;Pt<C;Pt++){for(Ur=Math.min(Pt,Lt),ye=0,Jt=0;Jt<Ur;Jt++)ye+=B.get(Pt,Jt)*er[Jt];er[Pt]-=ye,B.set(Pt,Lt,er[Pt])}for(Oe=Lt,Pt=Lt+1;Pt<C;Pt++)Math.abs(er[Pt])>Math.abs(er[Oe])&&(Oe=Pt);if(Oe!==Lt){for(Jt=0;Jt<I;Jt++)Ze=B.get(Oe,Jt),B.set(Oe,Jt,B.get(Lt,Jt)),B.set(Lt,Jt,Ze);wr=H[Oe],H[Oe]=H[Lt],H[Lt]=wr,mt=-mt}if(Lt<C&&B.get(Lt,Lt)!==0)for(Pt=Lt+1;Pt<C;Pt++)B.set(Pt,Lt,B.get(Pt,Lt)/B.get(Lt,Lt))}this.LU=B,this.pivotVector=H,this.pivotSign=mt}return T()(Q,[{key:"isSingular",value:function(){for(var B=this.LU,C=B.columns,I=0;I<C;I++)if(B.get(I,I)===0)return!0;return!1}},{key:"solve",value:function(B){B=ie.checkMatrix(B);var C=this.LU,I=C.rows;if(I!==B.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var H=B.columns,mt=B.subMatrixRow(this.pivotVector,0,H-1),Pt=C.columns,Lt,Jt,Oe;for(Oe=0;Oe<Pt;Oe++)for(Lt=Oe+1;Lt<Pt;Lt++)for(Jt=0;Jt<H;Jt++)mt.set(Lt,Jt,mt.get(Lt,Jt)-mt.get(Oe,Jt)*C.get(Lt,Oe));for(Oe=Pt-1;Oe>=0;Oe--){for(Jt=0;Jt<H;Jt++)mt.set(Oe,Jt,mt.get(Oe,Jt)/C.get(Oe,Oe));for(Lt=0;Lt<Oe;Lt++)for(Jt=0;Jt<H;Jt++)mt.set(Lt,Jt,mt.get(Lt,Jt)-mt.get(Oe,Jt)*C.get(Lt,Oe))}return mt}},{key:"determinant",get:function(){var B=this.LU;if(!B.isSquare())throw new Error("Matrix must be square");for(var C=this.pivotSign,I=B.columns,H=0;H<I;H++)C*=B.get(H,H);return C}},{key:"lowerTriangularMatrix",get:function(){for(var B=this.LU,C=B.rows,I=B.columns,H=new ie(C,I),mt=0;mt<C;mt++)for(var Pt=0;Pt<I;Pt++)mt>Pt?H.set(mt,Pt,B.get(mt,Pt)):mt===Pt?H.set(mt,Pt,1):H.set(mt,Pt,0);return H}},{key:"upperTriangularMatrix",get:function(){for(var B=this.LU,C=B.rows,I=B.columns,H=new ie(C,I),mt=0;mt<C;mt++)for(var Pt=0;Pt<I;Pt++)mt<=Pt?H.set(mt,Pt,B.get(mt,Pt)):H.set(mt,Pt,0);return H}},{key:"pivotPermutationVector",get:function(){return Array.from(this.pivotVector)}}]),Q}();function Lr(Q,at){var B=0;return Math.abs(Q)>Math.abs(at)?(B=at/Q,Math.abs(Q)*Math.sqrt(1+B*B)):at!==0?(B=Q/at,Math.abs(at)*Math.sqrt(1+B*B)):0}var Nr=function(){function Q(at){x()(this,Q),at=nr.checkMatrix(at);var B=at.clone(),C=at.rows,I=at.columns,H=new Float64Array(I),mt,Pt,Lt,Jt;for(Lt=0;Lt<I;Lt++){var Oe=0;for(mt=Lt;mt<C;mt++)Oe=Lr(Oe,B.get(mt,Lt));if(Oe!==0){for(B.get(Lt,Lt)<0&&(Oe=-Oe),mt=Lt;mt<C;mt++)B.set(mt,Lt,B.get(mt,Lt)/Oe);for(B.set(Lt,Lt,B.get(Lt,Lt)+1),Pt=Lt+1;Pt<I;Pt++){for(Jt=0,mt=Lt;mt<C;mt++)Jt+=B.get(mt,Lt)*B.get(mt,Pt);for(Jt=-Jt/B.get(Lt,Lt),mt=Lt;mt<C;mt++)B.set(mt,Pt,B.get(mt,Pt)+Jt*B.get(mt,Lt))}}H[Lt]=-Oe}this.QR=B,this.Rdiag=H}return T()(Q,[{key:"solve",value:function(B){B=ie.checkMatrix(B);var C=this.QR,I=C.rows;if(B.rows!==I)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var H=B.columns,mt=B.clone(),Pt=C.columns,Lt,Jt,Oe,ye;for(Oe=0;Oe<Pt;Oe++)for(Jt=0;Jt<H;Jt++){for(ye=0,Lt=Oe;Lt<I;Lt++)ye+=C.get(Lt,Oe)*mt.get(Lt,Jt);for(ye=-ye/C.get(Oe,Oe),Lt=Oe;Lt<I;Lt++)mt.set(Lt,Jt,mt.get(Lt,Jt)+ye*C.get(Lt,Oe))}for(Oe=Pt-1;Oe>=0;Oe--){for(Jt=0;Jt<H;Jt++)mt.set(Oe,Jt,mt.get(Oe,Jt)/this.Rdiag[Oe]);for(Lt=0;Lt<Oe;Lt++)for(Jt=0;Jt<H;Jt++)mt.set(Lt,Jt,mt.get(Lt,Jt)-mt.get(Oe,Jt)*C.get(Lt,Oe))}return mt.subMatrix(0,Pt-1,0,H-1)}},{key:"isFullRank",value:function(){for(var B=this.QR.columns,C=0;C<B;C++)if(this.Rdiag[C]===0)return!1;return!0}},{key:"upperTriangularMatrix",get:function(){var B=this.QR,C=B.columns,I=new ie(C,C),H,mt;for(H=0;H<C;H++)for(mt=0;mt<C;mt++)H<mt?I.set(H,mt,B.get(H,mt)):H===mt?I.set(H,mt,this.Rdiag[H]):I.set(H,mt,0);return I}},{key:"orthogonalMatrix",get:function(){var B=this.QR,C=B.rows,I=B.columns,H=new ie(C,I),mt,Pt,Lt,Jt;for(Lt=I-1;Lt>=0;Lt--){for(mt=0;mt<C;mt++)H.set(mt,Lt,0);for(H.set(Lt,Lt,1),Pt=Lt;Pt<I;Pt++)if(B.get(Lt,Lt)!==0){for(Jt=0,mt=Lt;mt<C;mt++)Jt+=B.get(mt,Lt)*H.get(mt,Pt);for(Jt=-Jt/B.get(Lt,Lt),mt=Lt;mt<C;mt++)H.set(mt,Pt,H.get(mt,Pt)+Jt*B.get(mt,Lt))}}return H}}]),Q}(),ln=function(){function Q(at){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(x()(this,Q),at=nr.checkMatrix(at),at.isEmpty())throw new Error("Matrix must be non-empty");var C=at.rows,I=at.columns,H=B.computeLeftSingularVectors,mt=H===void 0?!0:H,Pt=B.computeRightSingularVectors,Lt=Pt===void 0?!0:Pt,Jt=B.autoTranspose,Oe=Jt===void 0?!1:Jt,ye=!!mt,Ze=!!Lt,wr=!1,er;if(C<I)if(!Oe)er=at.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{er=at.transpose(),C=er.rows,I=er.columns,wr=!0;var Ur=ye;ye=Ze,Ze=Ur}else er=at.clone();for(var xn=Math.min(C,I),rr=Math.min(C+1,I),xr=new Float64Array(rr),Wr=new ie(C,xn),Gr=new ie(I,I),ce=new Float64Array(I),Yt=new Float64Array(C),ge=new Float64Array(rr),Ie=0;Ie<rr;Ie++)ge[Ie]=Ie;for(var xe=Math.min(C-1,I),Ye=Math.max(0,Math.min(I-2,C)),gr=Math.max(xe,Ye),Mr=0;Mr<gr;Mr++){if(Mr<xe){xr[Mr]=0;for(var vn=Mr;vn<C;vn++)xr[Mr]=Lr(xr[Mr],er.get(vn,Mr));if(xr[Mr]!==0){er.get(Mr,Mr)<0&&(xr[Mr]=-xr[Mr]);for(var Wn=Mr;Wn<C;Wn++)er.set(Wn,Mr,er.get(Wn,Mr)/xr[Mr]);er.set(Mr,Mr,er.get(Mr,Mr)+1)}xr[Mr]=-xr[Mr]}for(var Sn=Mr+1;Sn<I;Sn++){if(Mr<xe&&xr[Mr]!==0){for(var ea=0,wn=Mr;wn<C;wn++)ea+=er.get(wn,Mr)*er.get(wn,Sn);ea=-ea/er.get(Mr,Mr);for(var Hn=Mr;Hn<C;Hn++)er.set(Hn,Sn,er.get(Hn,Sn)+ea*er.get(Hn,Mr))}ce[Sn]=er.get(Mr,Sn)}if(ye&&Mr<xe)for(var la=Mr;la<C;la++)Wr.set(la,Mr,er.get(la,Mr));if(Mr<Ye){ce[Mr]=0;for(var ba=Mr+1;ba<I;ba++)ce[Mr]=Lr(ce[Mr],ce[ba]);if(ce[Mr]!==0){ce[Mr+1]<0&&(ce[Mr]=0-ce[Mr]);for(var xa=Mr+1;xa<I;xa++)ce[xa]/=ce[Mr];ce[Mr+1]+=1}if(ce[Mr]=-ce[Mr],Mr+1<C&&ce[Mr]!==0){for(var Yi=Mr+1;Yi<C;Yi++)Yt[Yi]=0;for(var ri=Mr+1;ri<C;ri++)for(var ti=Mr+1;ti<I;ti++)Yt[ri]+=ce[ti]*er.get(ri,ti);for(var Mi=Mr+1;Mi<I;Mi++)for(var Vi=-ce[Mi]/ce[Mr+1],ao=Mr+1;ao<C;ao++)er.set(ao,Mi,er.get(ao,Mi)+Vi*Yt[ao])}if(Ze)for(var io=Mr+1;io<I;io++)Gr.set(io,Mr,ce[io])}}var wa=Math.min(I,C+1);if(xe<I&&(xr[xe]=er.get(xe,xe)),C<wa&&(xr[wa-1]=0),Ye+1<wa&&(ce[Ye]=er.get(Ye,wa-1)),ce[wa-1]=0,ye){for(var oo=xe;oo<xn;oo++){for(var To=0;To<C;To++)Wr.set(To,oo,0);Wr.set(oo,oo,1)}for(var ii=xe-1;ii>=0;ii--)if(xr[ii]!==0){for(var Xi=ii+1;Xi<xn;Xi++){for(var so=0,zo=ii;zo<C;zo++)so+=Wr.get(zo,ii)*Wr.get(zo,Xi);so=-so/Wr.get(ii,ii);for(var ro=ii;ro<C;ro++)Wr.set(ro,Xi,Wr.get(ro,Xi)+so*Wr.get(ro,ii))}for(var vo=ii;vo<C;vo++)Wr.set(vo,ii,-Wr.get(vo,ii));Wr.set(ii,ii,1+Wr.get(ii,ii));for(var Ao=0;Ao<ii-1;Ao++)Wr.set(Ao,ii,0)}else{for(var Go=0;Go<C;Go++)Wr.set(Go,ii,0);Wr.set(ii,ii,1)}}if(Ze)for(var Ai=I-1;Ai>=0;Ai--){if(Ai<Ye&&ce[Ai]!==0)for(var $i=Ai+1;$i<I;$i++){for(var oa=0,Qt=Ai+1;Qt<I;Qt++)oa+=Gr.get(Qt,Ai)*Gr.get(Qt,$i);oa=-oa/Gr.get(Ai+1,Ai);for(var ve=Ai+1;ve<I;ve++)Gr.set(ve,$i,Gr.get(ve,$i)+oa*Gr.get(ve,Ai))}for(var Ge=0;Ge<I;Ge++)Gr.set(Ge,Ai,0);Gr.set(Ai,Ai,1)}for(var pr=wa-1,Xr=0,Yr=Number.EPSILON;wa>0;){var Pr=void 0,cn=void 0;for(Pr=wa-2;Pr>=-1&&Pr!==-1;Pr--){var Mn=Number.MIN_VALUE+Yr*Math.abs(xr[Pr]+Math.abs(xr[Pr+1]));if(Math.abs(ce[Pr])<=Mn||Number.isNaN(ce[Pr])){ce[Pr]=0;break}}if(Pr===wa-2)cn=4;else{var Bn=void 0;for(Bn=wa-1;Bn>=Pr&&Bn!==Pr;Bn--){var sa=(Bn!==wa?Math.abs(ce[Bn]):0)+(Bn!==Pr+1?Math.abs(ce[Bn-1]):0);if(Math.abs(xr[Bn])<=Yr*sa){xr[Bn]=0;break}}Bn===Pr?cn=3:Bn===wa-1?cn=1:(cn=2,Pr=Bn)}switch(Pr++,cn){case 1:{var qn=ce[wa-2];ce[wa-2]=0;for(var ga=wa-2;ga>=Pr;ga--){var ya=Lr(xr[ga],qn),vi=xr[ga]/ya,Sa=qn/ya;if(xr[ga]=ya,ga!==Pr&&(qn=-Sa*ce[ga-1],ce[ga-1]=vi*ce[ga-1]),Ze)for(var ua=0;ua<I;ua++)ya=vi*Gr.get(ua,ga)+Sa*Gr.get(ua,wa-1),Gr.set(ua,wa-1,-Sa*Gr.get(ua,ga)+vi*Gr.get(ua,wa-1)),Gr.set(ua,ga,ya)}break}case 2:{var fi=ce[Pr-1];ce[Pr-1]=0;for(var ei=Pr;ei<wa;ei++){var Ga=Lr(xr[ei],fi),Ii=xr[ei]/Ga,yi=fi/Ga;if(xr[ei]=Ga,fi=-yi*ce[ei],ce[ei]=Ii*ce[ei],ye)for(var za=0;za<C;za++)Ga=Ii*Wr.get(za,ei)+yi*Wr.get(za,Pr-1),Wr.set(za,Pr-1,-yi*Wr.get(za,ei)+Ii*Wr.get(za,Pr-1)),Wr.set(za,ei,Ga)}break}case 3:{var Va=Math.max(Math.abs(xr[wa-1]),Math.abs(xr[wa-2]),Math.abs(ce[wa-2]),Math.abs(xr[Pr]),Math.abs(ce[Pr])),Da=xr[wa-1]/Va,Ri=xr[wa-2]/Va,_i=ce[wa-2]/Va,ki=xr[Pr]/Va,uo=ce[Pr]/Va,qi=((Ri+Da)*(Ri-Da)+_i*_i)/2,po=Da*_i*(Da*_i),es=0;(qi!==0||po!==0)&&(qi<0?es=0-Math.sqrt(qi*qi+po):es=Math.sqrt(qi*qi+po),es=po/(qi+es));for(var rs=(ki+Da)*(ki-Da)+es,no=ki*uo,ni=Pr;ni<wa-1;ni++){var zi=Lr(rs,no);zi===0&&(zi=Number.MIN_VALUE);var fo=rs/zi,Xa=no/zi;if(ni!==Pr&&(ce[ni-1]=zi),rs=fo*xr[ni]+Xa*ce[ni],ce[ni]=fo*ce[ni]-Xa*xr[ni],no=Xa*xr[ni+1],xr[ni+1]=fo*xr[ni+1],Ze)for(var go=0;go<I;go++)zi=fo*Gr.get(go,ni)+Xa*Gr.get(go,ni+1),Gr.set(go,ni+1,-Xa*Gr.get(go,ni)+fo*Gr.get(go,ni+1)),Gr.set(go,ni,zi);if(zi=Lr(rs,no),zi===0&&(zi=Number.MIN_VALUE),fo=rs/zi,Xa=no/zi,xr[ni]=zi,rs=fo*ce[ni]+Xa*xr[ni+1],xr[ni+1]=-Xa*ce[ni]+fo*xr[ni+1],no=Xa*ce[ni+1],ce[ni+1]=fo*ce[ni+1],ye&&ni<C-1)for(var No=0;No<C;No++)zi=fo*Wr.get(No,ni)+Xa*Wr.get(No,ni+1),Wr.set(No,ni+1,-Xa*Wr.get(No,ni)+fo*Wr.get(No,ni+1)),Wr.set(No,ni,zi)}ce[wa-2]=rs,Xr=Xr+1;break}case 4:{if(xr[Pr]<=0&&(xr[Pr]=xr[Pr]<0?-xr[Pr]:0,Ze))for(var Hi=0;Hi<=pr;Hi++)Gr.set(Hi,Pr,-Gr.get(Hi,Pr));for(;Pr<pr&&!(xr[Pr]>=xr[Pr+1]);){var as=xr[Pr];if(xr[Pr]=xr[Pr+1],xr[Pr+1]=as,Ze&&Pr<I-1)for(var Gi=0;Gi<I;Gi++)as=Gr.get(Gi,Pr+1),Gr.set(Gi,Pr+1,Gr.get(Gi,Pr)),Gr.set(Gi,Pr,as);if(ye&&Pr<C-1)for(var Ro=0;Ro<C;Ro++)as=Wr.get(Ro,Pr+1),Wr.set(Ro,Pr+1,Wr.get(Ro,Pr)),Wr.set(Ro,Pr,as);Pr++}Xr=0,wa--;break}}}if(wr){var ss=Gr;Gr=Wr,Wr=ss}this.m=C,this.n=I,this.s=xr,this.U=Wr,this.V=Gr}return T()(Q,[{key:"solve",value:function(B){for(var C=B,I=this.threshold,H=this.s.length,mt=ie.zeros(H,H),Pt=0;Pt<H;Pt++)Math.abs(this.s[Pt])<=I?mt.set(Pt,Pt,0):mt.set(Pt,Pt,1/this.s[Pt]);for(var Lt=this.U,Jt=this.rightSingularVectors,Oe=Jt.mmul(mt),ye=Jt.rows,Ze=Lt.rows,wr=ie.zeros(ye,Ze),er=0;er<ye;er++)for(var Ur=0;Ur<Ze;Ur++){for(var xn=0,rr=0;rr<H;rr++)xn+=Oe.get(er,rr)*Lt.get(Ur,rr);wr.set(er,Ur,xn)}return wr.mmul(C)}},{key:"solveForDiagonal",value:function(B){return this.solve(ie.diag(B))}},{key:"inverse",value:function(){for(var B=this.V,C=this.threshold,I=B.rows,H=B.columns,mt=new ie(I,this.s.length),Pt=0;Pt<I;Pt++)for(var Lt=0;Lt<H;Lt++)Math.abs(this.s[Lt])>C&&mt.set(Pt,Lt,B.get(Pt,Lt)/this.s[Lt]);for(var Jt=this.U,Oe=Jt.rows,ye=Jt.columns,Ze=new ie(I,Oe),wr=0;wr<I;wr++)for(var er=0;er<Oe;er++){for(var Ur=0,xn=0;xn<ye;xn++)Ur+=mt.get(wr,xn)*Jt.get(er,xn);Ze.set(wr,er,Ur)}return Ze}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var B=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,C=0,I=this.s,H=0,mt=I.length;H<mt;H++)I[H]>B&&C++;return C}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return ie.diag(this.s)}}]),Q}();function en(Q){var at=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Q=nr.checkMatrix(Q),at?new ln(Q).inverse():Dr(Q,ie.eye(Q.rows))}function Dr(Q,at){var B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return Q=nr.checkMatrix(Q),at=nr.checkMatrix(at),B?new ln(Q).solve(at):Q.isSquare()?new Te(Q).solve(at):new Nr(Q).solve(at)}function Fr(Q){if(Q=ie.checkMatrix(Q),Q.isSquare()){if(Q.columns===0)return 1;var at,B,C,I;if(Q.columns===2)return at=Q.get(0,0),B=Q.get(0,1),C=Q.get(1,0),I=Q.get(1,1),at*I-B*C;if(Q.columns===3){var H,mt,Pt;return H=new fn(Q,[1,2],[1,2]),mt=new fn(Q,[1,2],[0,2]),Pt=new fn(Q,[1,2],[0,1]),at=Q.get(0,0),B=Q.get(0,1),C=Q.get(0,2),at*Fr(H)-B*Fr(mt)+C*Fr(Pt)}else return new Te(Q).determinant}else throw Error("determinant can only be calculated for a square matrix")}function Kr(Q,at){for(var B=[],C=0;C<Q;C++)C!==at&&B.push(C);return B}function an(Q,at,B){var C=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e-9,I=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e-9;if(Q>I)return new Array(at.rows+1).fill(0);for(var H=at.addRow(B,[0]),mt=0;mt<H.rows;mt++)Math.abs(H.get(mt,0))<C&&H.set(mt,0,0);return H.to1DArray()}function yn(Q){var at=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},B=at.thresholdValue,C=B===void 0?1e-9:B,I=at.thresholdError,H=I===void 0?1e-9:I;Q=ie.checkMatrix(Q);for(var mt=Q.rows,Pt=new ie(mt,mt),Lt=0;Lt<mt;Lt++){var Jt=ie.columnVector(Q.getRow(Lt)),Oe=Q.subMatrixRow(Kr(mt,Lt)).transpose(),ye=new ln(Oe),Ze=ye.solve(Jt),wr=ie.sub(Jt,Oe.mmul(Ze)).abs().max();Pt.setRow(Lt,an(wr,Ze,Lt,C,H))}return Pt}function bn(Q){var at=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.EPSILON;if(Q=ie.checkMatrix(Q),Q.isEmpty())return Q.transpose();for(var B=new ln(Q,{autoTranspose:!0}),C=B.leftSingularVectors,I=B.rightSingularVectors,H=B.diagonal,mt=0;mt<H.length;mt++)Math.abs(H[mt])>at?H[mt]=1/H[mt]:H[mt]=0;return I.mmul(ie.diag(H).mmul(C.transpose()))}function tt(Q){var at=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Q,B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Q=new ie(Q);var C=!1;if(b()(at)==="object"&&!ie.isMatrix(at)&&!O(at)?(B=at,at=Q,C=!0):at=new ie(at),Q.rows!==at.rows)throw new TypeError("Both matrices must have the same number of rows");var I=B,H=I.center,mt=H===void 0?!0:H;mt&&(Q=Q.center("column"),C||(at=at.center("column")));for(var Pt=Q.transpose().mmul(at),Lt=0;Lt<Pt.rows;Lt++)for(var Jt=0;Jt<Pt.columns;Jt++)Pt.set(Lt,Jt,Pt.get(Lt,Jt)*(1/(Q.rows-1)));return Pt}function tr(Q){var at=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Q,B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Q=new ie(Q);var C=!1;if(b()(at)==="object"&&!ie.isMatrix(at)&&!O(at)?(B=at,at=Q,C=!0):at=new ie(at),Q.rows!==at.rows)throw new TypeError("Both matrices must have the same number of rows");var I=B,H=I.center,mt=H===void 0?!0:H,Pt=I.scale,Lt=Pt===void 0?!0:Pt;mt&&(Q.center("column"),C||at.center("column")),Lt&&(Q.scale("column"),C||at.scale("column"));for(var Jt=Q.standardDeviation("column",{unbiased:!0}),Oe=C?Jt:at.standardDeviation("column",{unbiased:!0}),ye=Q.transpose().mmul(at),Ze=0;Ze<ye.rows;Ze++)for(var wr=0;wr<ye.columns;wr++)ye.set(Ze,wr,ye.get(Ze,wr)*(1/(Jt[Ze]*Oe[wr]))*(1/(Q.rows-1)));return ye}var Kt=function(){function Q(at){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};x()(this,Q);var C=B.assumeSymmetric,I=C===void 0?!1:C;if(at=nr.checkMatrix(at),!at.isSquare())throw new Error("Matrix is not a square matrix");if(at.isEmpty())throw new Error("Matrix must be non-empty");var H=at.columns,mt=new ie(H,H),Pt=new Float64Array(H),Lt=new Float64Array(H),Jt=at,Oe,ye,Ze=!1;if(I?Ze=!0:Ze=at.isSymmetric(),Ze){for(Oe=0;Oe<H;Oe++)for(ye=0;ye<H;ye++)mt.set(Oe,ye,Jt.get(Oe,ye));$t(H,Lt,Pt,mt),Et(H,Lt,Pt,mt)}else{var wr=new ie(H,H),er=new Float64Array(H);for(ye=0;ye<H;ye++)for(Oe=0;Oe<H;Oe++)wr.set(Oe,ye,Jt.get(Oe,ye));we(H,wr,er,mt),Dt(H,Lt,Pt,mt,wr)}this.n=H,this.e=Lt,this.d=Pt,this.V=mt}return T()(Q,[{key:"realEigenvalues",get:function(){return Array.from(this.d)}},{key:"imaginaryEigenvalues",get:function(){return Array.from(this.e)}},{key:"eigenvectorMatrix",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){var B=this.n,C=this.e,I=this.d,H=new ie(B,B),mt,Pt;for(mt=0;mt<B;mt++){for(Pt=0;Pt<B;Pt++)H.set(mt,Pt,0);H.set(mt,mt,I[mt]),C[mt]>0?H.set(mt,mt+1,C[mt]):C[mt]<0&&H.set(mt,mt-1,C[mt])}return H}}]),Q}();function $t(Q,at,B,C){var I,H,mt,Pt,Lt,Jt,Oe,ye;for(Lt=0;Lt<Q;Lt++)B[Lt]=C.get(Q-1,Lt);for(Pt=Q-1;Pt>0;Pt--){for(ye=0,mt=0,Jt=0;Jt<Pt;Jt++)ye=ye+Math.abs(B[Jt]);if(ye===0)for(at[Pt]=B[Pt-1],Lt=0;Lt<Pt;Lt++)B[Lt]=C.get(Pt-1,Lt),C.set(Pt,Lt,0),C.set(Lt,Pt,0);else{for(Jt=0;Jt<Pt;Jt++)B[Jt]/=ye,mt+=B[Jt]*B[Jt];for(I=B[Pt-1],H=Math.sqrt(mt),I>0&&(H=-H),at[Pt]=ye*H,mt=mt-I*H,B[Pt-1]=I-H,Lt=0;Lt<Pt;Lt++)at[Lt]=0;for(Lt=0;Lt<Pt;Lt++){for(I=B[Lt],C.set(Lt,Pt,I),H=at[Lt]+C.get(Lt,Lt)*I,Jt=Lt+1;Jt<=Pt-1;Jt++)H+=C.get(Jt,Lt)*B[Jt],at[Jt]+=C.get(Jt,Lt)*I;at[Lt]=H}for(I=0,Lt=0;Lt<Pt;Lt++)at[Lt]/=mt,I+=at[Lt]*B[Lt];for(Oe=I/(mt+mt),Lt=0;Lt<Pt;Lt++)at[Lt]-=Oe*B[Lt];for(Lt=0;Lt<Pt;Lt++){for(I=B[Lt],H=at[Lt],Jt=Lt;Jt<=Pt-1;Jt++)C.set(Jt,Lt,C.get(Jt,Lt)-(I*at[Jt]+H*B[Jt]));B[Lt]=C.get(Pt-1,Lt),C.set(Pt,Lt,0)}}B[Pt]=mt}for(Pt=0;Pt<Q-1;Pt++){if(C.set(Q-1,Pt,C.get(Pt,Pt)),C.set(Pt,Pt,1),mt=B[Pt+1],mt!==0){for(Jt=0;Jt<=Pt;Jt++)B[Jt]=C.get(Jt,Pt+1)/mt;for(Lt=0;Lt<=Pt;Lt++){for(H=0,Jt=0;Jt<=Pt;Jt++)H+=C.get(Jt,Pt+1)*C.get(Jt,Lt);for(Jt=0;Jt<=Pt;Jt++)C.set(Jt,Lt,C.get(Jt,Lt)-H*B[Jt])}}for(Jt=0;Jt<=Pt;Jt++)C.set(Jt,Pt+1,0)}for(Lt=0;Lt<Q;Lt++)B[Lt]=C.get(Q-1,Lt),C.set(Q-1,Lt,0);C.set(Q-1,Q-1,1),at[0]=0}function Et(Q,at,B,C){var I,H,mt,Pt,Lt,Jt,Oe,ye,Ze,wr,er,Ur,xn,rr,xr,Wr,Gr;for(mt=1;mt<Q;mt++)at[mt-1]=at[mt];at[Q-1]=0;var ce=0,Yt=0,ge=Number.EPSILON;for(Jt=0;Jt<Q;Jt++){for(Yt=Math.max(Yt,Math.abs(B[Jt])+Math.abs(at[Jt])),Oe=Jt;Oe<Q&&!(Math.abs(at[Oe])<=ge*Yt);)Oe++;if(Oe>Jt){Gr=0;do{for(Gr=Gr+1,I=B[Jt],ye=(B[Jt+1]-I)/(2*at[Jt]),Ze=Lr(ye,1),ye<0&&(Ze=-Ze),B[Jt]=at[Jt]/(ye+Ze),B[Jt+1]=at[Jt]*(ye+Ze),wr=B[Jt+1],H=I-B[Jt],mt=Jt+2;mt<Q;mt++)B[mt]-=H;for(ce=ce+H,ye=B[Oe],er=1,Ur=er,xn=er,rr=at[Jt+1],xr=0,Wr=0,mt=Oe-1;mt>=Jt;mt--)for(xn=Ur,Ur=er,Wr=xr,I=er*at[mt],H=er*ye,Ze=Lr(ye,at[mt]),at[mt+1]=xr*Ze,xr=at[mt]/Ze,er=ye/Ze,ye=er*B[mt]-xr*I,B[mt+1]=H+xr*(er*I+xr*B[mt]),Lt=0;Lt<Q;Lt++)H=C.get(Lt,mt+1),C.set(Lt,mt+1,xr*C.get(Lt,mt)+er*H),C.set(Lt,mt,er*C.get(Lt,mt)-xr*H);ye=-xr*Wr*xn*rr*at[Jt]/wr,at[Jt]=xr*ye,B[Jt]=er*ye}while(Math.abs(at[Jt])>ge*Yt)}B[Jt]=B[Jt]+ce,at[Jt]=0}for(mt=0;mt<Q-1;mt++){for(Lt=mt,ye=B[mt],Pt=mt+1;Pt<Q;Pt++)B[Pt]<ye&&(Lt=Pt,ye=B[Pt]);if(Lt!==mt)for(B[Lt]=B[mt],B[mt]=ye,Pt=0;Pt<Q;Pt++)ye=C.get(Pt,mt),C.set(Pt,mt,C.get(Pt,Lt)),C.set(Pt,Lt,ye)}}function we(Q,at,B,C){var I=0,H=Q-1,mt,Pt,Lt,Jt,Oe,ye,Ze;for(ye=I+1;ye<=H-1;ye++){for(Ze=0,Jt=ye;Jt<=H;Jt++)Ze=Ze+Math.abs(at.get(Jt,ye-1));if(Ze!==0){for(Lt=0,Jt=H;Jt>=ye;Jt--)B[Jt]=at.get(Jt,ye-1)/Ze,Lt+=B[Jt]*B[Jt];for(Pt=Math.sqrt(Lt),B[ye]>0&&(Pt=-Pt),Lt=Lt-B[ye]*Pt,B[ye]=B[ye]-Pt,Oe=ye;Oe<Q;Oe++){for(mt=0,Jt=H;Jt>=ye;Jt--)mt+=B[Jt]*at.get(Jt,Oe);for(mt=mt/Lt,Jt=ye;Jt<=H;Jt++)at.set(Jt,Oe,at.get(Jt,Oe)-mt*B[Jt])}for(Jt=0;Jt<=H;Jt++){for(mt=0,Oe=H;Oe>=ye;Oe--)mt+=B[Oe]*at.get(Jt,Oe);for(mt=mt/Lt,Oe=ye;Oe<=H;Oe++)at.set(Jt,Oe,at.get(Jt,Oe)-mt*B[Oe])}B[ye]=Ze*B[ye],at.set(ye,ye-1,Ze*Pt)}}for(Jt=0;Jt<Q;Jt++)for(Oe=0;Oe<Q;Oe++)C.set(Jt,Oe,Jt===Oe?1:0);for(ye=H-1;ye>=I+1;ye--)if(at.get(ye,ye-1)!==0){for(Jt=ye+1;Jt<=H;Jt++)B[Jt]=at.get(Jt,ye-1);for(Oe=ye;Oe<=H;Oe++){for(Pt=0,Jt=ye;Jt<=H;Jt++)Pt+=B[Jt]*C.get(Jt,Oe);for(Pt=Pt/B[ye]/at.get(ye,ye-1),Jt=ye;Jt<=H;Jt++)C.set(Jt,Oe,C.get(Jt,Oe)+Pt*B[Jt])}}}function Dt(Q,at,B,C,I){var H=Q-1,mt=0,Pt=Q-1,Lt=Number.EPSILON,Jt=0,Oe=0,ye=0,Ze=0,wr=0,er=0,Ur=0,xn=0,rr,xr,Wr,Gr,ce,Yt,ge,Ie,xe,Ye,gr,Mr,vn,Wn,Sn;for(rr=0;rr<Q;rr++)for((rr<mt||rr>Pt)&&(B[rr]=I.get(rr,rr),at[rr]=0),xr=Math.max(rr-1,0);xr<Q;xr++)Oe=Oe+Math.abs(I.get(rr,xr));for(;H>=mt;){for(Gr=H;Gr>mt&&(er=Math.abs(I.get(Gr-1,Gr-1))+Math.abs(I.get(Gr,Gr)),er===0&&(er=Oe),!(Math.abs(I.get(Gr,Gr-1))<Lt*er));)Gr--;if(Gr===H)I.set(H,H,I.get(H,H)+Jt),B[H]=I.get(H,H),at[H]=0,H--,xn=0;else if(Gr===H-1){if(ge=I.get(H,H-1)*I.get(H-1,H),ye=(I.get(H-1,H-1)-I.get(H,H))/2,Ze=ye*ye+ge,Ur=Math.sqrt(Math.abs(Ze)),I.set(H,H,I.get(H,H)+Jt),I.set(H-1,H-1,I.get(H-1,H-1)+Jt),Ie=I.get(H,H),Ze>=0){for(Ur=ye>=0?ye+Ur:ye-Ur,B[H-1]=Ie+Ur,B[H]=B[H-1],Ur!==0&&(B[H]=Ie-ge/Ur),at[H-1]=0,at[H]=0,Ie=I.get(H,H-1),er=Math.abs(Ie)+Math.abs(Ur),ye=Ie/er,Ze=Ur/er,wr=Math.sqrt(ye*ye+Ze*Ze),ye=ye/wr,Ze=Ze/wr,xr=H-1;xr<Q;xr++)Ur=I.get(H-1,xr),I.set(H-1,xr,Ze*Ur+ye*I.get(H,xr)),I.set(H,xr,Ze*I.get(H,xr)-ye*Ur);for(rr=0;rr<=H;rr++)Ur=I.get(rr,H-1),I.set(rr,H-1,Ze*Ur+ye*I.get(rr,H)),I.set(rr,H,Ze*I.get(rr,H)-ye*Ur);for(rr=mt;rr<=Pt;rr++)Ur=C.get(rr,H-1),C.set(rr,H-1,Ze*Ur+ye*C.get(rr,H)),C.set(rr,H,Ze*C.get(rr,H)-ye*Ur)}else B[H-1]=Ie+ye,B[H]=Ie+ye,at[H-1]=Ur,at[H]=-Ur;H=H-2,xn=0}else{if(Ie=I.get(H,H),xe=0,ge=0,Gr<H&&(xe=I.get(H-1,H-1),ge=I.get(H,H-1)*I.get(H-1,H)),xn===10){for(Jt+=Ie,rr=mt;rr<=H;rr++)I.set(rr,rr,I.get(rr,rr)-Ie);er=Math.abs(I.get(H,H-1))+Math.abs(I.get(H-1,H-2)),Ie=xe=.75*er,ge=-.4375*er*er}if(xn===30&&(er=(xe-Ie)/2,er=er*er+ge,er>0)){for(er=Math.sqrt(er),xe<Ie&&(er=-er),er=Ie-ge/((xe-Ie)/2+er),rr=mt;rr<=H;rr++)I.set(rr,rr,I.get(rr,rr)-er);Jt+=er,Ie=xe=ge=.964}for(xn=xn+1,ce=H-2;ce>=Gr&&(Ur=I.get(ce,ce),wr=Ie-Ur,er=xe-Ur,ye=(wr*er-ge)/I.get(ce+1,ce)+I.get(ce,ce+1),Ze=I.get(ce+1,ce+1)-Ur-wr-er,wr=I.get(ce+2,ce+1),er=Math.abs(ye)+Math.abs(Ze)+Math.abs(wr),ye=ye/er,Ze=Ze/er,wr=wr/er,!(ce===Gr||Math.abs(I.get(ce,ce-1))*(Math.abs(Ze)+Math.abs(wr))<Lt*(Math.abs(ye)*(Math.abs(I.get(ce-1,ce-1))+Math.abs(Ur)+Math.abs(I.get(ce+1,ce+1))))));)ce--;for(rr=ce+2;rr<=H;rr++)I.set(rr,rr-2,0),rr>ce+2&&I.set(rr,rr-3,0);for(Wr=ce;Wr<=H-1&&(Wn=Wr!==H-1,Wr!==ce&&(ye=I.get(Wr,Wr-1),Ze=I.get(Wr+1,Wr-1),wr=Wn?I.get(Wr+2,Wr-1):0,Ie=Math.abs(ye)+Math.abs(Ze)+Math.abs(wr),Ie!==0&&(ye=ye/Ie,Ze=Ze/Ie,wr=wr/Ie)),Ie!==0);Wr++)if(er=Math.sqrt(ye*ye+Ze*Ze+wr*wr),ye<0&&(er=-er),er!==0){for(Wr!==ce?I.set(Wr,Wr-1,-er*Ie):Gr!==ce&&I.set(Wr,Wr-1,-I.get(Wr,Wr-1)),ye=ye+er,Ie=ye/er,xe=Ze/er,Ur=wr/er,Ze=Ze/ye,wr=wr/ye,xr=Wr;xr<Q;xr++)ye=I.get(Wr,xr)+Ze*I.get(Wr+1,xr),Wn&&(ye=ye+wr*I.get(Wr+2,xr),I.set(Wr+2,xr,I.get(Wr+2,xr)-ye*Ur)),I.set(Wr,xr,I.get(Wr,xr)-ye*Ie),I.set(Wr+1,xr,I.get(Wr+1,xr)-ye*xe);for(rr=0;rr<=Math.min(H,Wr+3);rr++)ye=Ie*I.get(rr,Wr)+xe*I.get(rr,Wr+1),Wn&&(ye=ye+Ur*I.get(rr,Wr+2),I.set(rr,Wr+2,I.get(rr,Wr+2)-ye*wr)),I.set(rr,Wr,I.get(rr,Wr)-ye),I.set(rr,Wr+1,I.get(rr,Wr+1)-ye*Ze);for(rr=mt;rr<=Pt;rr++)ye=Ie*C.get(rr,Wr)+xe*C.get(rr,Wr+1),Wn&&(ye=ye+Ur*C.get(rr,Wr+2),C.set(rr,Wr+2,C.get(rr,Wr+2)-ye*wr)),C.set(rr,Wr,C.get(rr,Wr)-ye),C.set(rr,Wr+1,C.get(rr,Wr+1)-ye*Ze)}}}if(Oe!==0){for(H=Q-1;H>=0;H--)if(ye=B[H],Ze=at[H],Ze===0)for(Gr=H,I.set(H,H,1),rr=H-1;rr>=0;rr--){for(ge=I.get(rr,rr)-ye,wr=0,xr=Gr;xr<=H;xr++)wr=wr+I.get(rr,xr)*I.get(xr,H);if(at[rr]<0)Ur=ge,er=wr;else if(Gr=rr,at[rr]===0?I.set(rr,H,ge!==0?-wr/ge:-wr/(Lt*Oe)):(Ie=I.get(rr,rr+1),xe=I.get(rr+1,rr),Ze=(B[rr]-ye)*(B[rr]-ye)+at[rr]*at[rr],Yt=(Ie*er-Ur*wr)/Ze,I.set(rr,H,Yt),I.set(rr+1,H,Math.abs(Ie)>Math.abs(Ur)?(-wr-ge*Yt)/Ie:(-er-xe*Yt)/Ur)),Yt=Math.abs(I.get(rr,H)),Lt*Yt*Yt>1)for(xr=rr;xr<=H;xr++)I.set(xr,H,I.get(xr,H)/Yt)}else if(Ze<0)for(Gr=H-1,Math.abs(I.get(H,H-1))>Math.abs(I.get(H-1,H))?(I.set(H-1,H-1,Ze/I.get(H,H-1)),I.set(H-1,H,-(I.get(H,H)-ye)/I.get(H,H-1))):(Sn=Vt(0,-I.get(H-1,H),I.get(H-1,H-1)-ye,Ze),I.set(H-1,H-1,Sn[0]),I.set(H-1,H,Sn[1])),I.set(H,H-1,0),I.set(H,H,1),rr=H-2;rr>=0;rr--){for(Ye=0,gr=0,xr=Gr;xr<=H;xr++)Ye=Ye+I.get(rr,xr)*I.get(xr,H-1),gr=gr+I.get(rr,xr)*I.get(xr,H);if(ge=I.get(rr,rr)-ye,at[rr]<0)Ur=ge,wr=Ye,er=gr;else if(Gr=rr,at[rr]===0?(Sn=Vt(-Ye,-gr,ge,Ze),I.set(rr,H-1,Sn[0]),I.set(rr,H,Sn[1])):(Ie=I.get(rr,rr+1),xe=I.get(rr+1,rr),Mr=(B[rr]-ye)*(B[rr]-ye)+at[rr]*at[rr]-Ze*Ze,vn=(B[rr]-ye)*2*Ze,Mr===0&&vn===0&&(Mr=Lt*Oe*(Math.abs(ge)+Math.abs(Ze)+Math.abs(Ie)+Math.abs(xe)+Math.abs(Ur))),Sn=Vt(Ie*wr-Ur*Ye+Ze*gr,Ie*er-Ur*gr-Ze*Ye,Mr,vn),I.set(rr,H-1,Sn[0]),I.set(rr,H,Sn[1]),Math.abs(Ie)>Math.abs(Ur)+Math.abs(Ze)?(I.set(rr+1,H-1,(-Ye-ge*I.get(rr,H-1)+Ze*I.get(rr,H))/Ie),I.set(rr+1,H,(-gr-ge*I.get(rr,H)-Ze*I.get(rr,H-1))/Ie)):(Sn=Vt(-wr-xe*I.get(rr,H-1),-er-xe*I.get(rr,H),Ur,Ze),I.set(rr+1,H-1,Sn[0]),I.set(rr+1,H,Sn[1]))),Yt=Math.max(Math.abs(I.get(rr,H-1)),Math.abs(I.get(rr,H))),Lt*Yt*Yt>1)for(xr=rr;xr<=H;xr++)I.set(xr,H-1,I.get(xr,H-1)/Yt),I.set(xr,H,I.get(xr,H)/Yt)}for(rr=0;rr<Q;rr++)if(rr<mt||rr>Pt)for(xr=rr;xr<Q;xr++)C.set(rr,xr,I.get(rr,xr));for(xr=Q-1;xr>=mt;xr--)for(rr=mt;rr<=Pt;rr++){for(Ur=0,Wr=mt;Wr<=Math.min(xr,Pt);Wr++)Ur=Ur+C.get(rr,Wr)*I.get(Wr,xr);C.set(rr,xr,Ur)}}}function Vt(Q,at,B,C){var I,H;return Math.abs(B)>Math.abs(C)?(I=C/B,H=B+I*C,[(Q+I*at)/H,(at-I*Q)/H]):(I=B/C,H=C+I*B,[(I*Q+at)/H,(I*at-Q)/H])}var ht=function(){function Q(at){if(x()(this,Q),at=nr.checkMatrix(at),!at.isSymmetric())throw new Error("Matrix is not symmetric");var B=at,C=B.rows,I=new ie(C,C),H=!0,mt,Pt,Lt;for(Pt=0;Pt<C;Pt++){var Jt=0;for(Lt=0;Lt<Pt;Lt++){var Oe=0;for(mt=0;mt<Lt;mt++)Oe+=I.get(Lt,mt)*I.get(Pt,mt);Oe=(B.get(Pt,Lt)-Oe)/I.get(Lt,Lt),I.set(Pt,Lt,Oe),Jt=Jt+Oe*Oe}for(Jt=B.get(Pt,Pt)-Jt,H&=Jt>0,I.set(Pt,Pt,Math.sqrt(Math.max(Jt,0))),Lt=Pt+1;Lt<C;Lt++)I.set(Pt,Lt,0)}this.L=I,this.positiveDefinite=!!H}return T()(Q,[{key:"isPositiveDefinite",value:function(){return this.positiveDefinite}},{key:"solve",value:function(B){B=nr.checkMatrix(B);var C=this.L,I=C.rows;if(B.rows!==I)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");var H=B.columns,mt=B.clone(),Pt,Lt,Jt;for(Jt=0;Jt<I;Jt++)for(Lt=0;Lt<H;Lt++){for(Pt=0;Pt<Jt;Pt++)mt.set(Jt,Lt,mt.get(Jt,Lt)-mt.get(Pt,Lt)*C.get(Jt,Pt));mt.set(Jt,Lt,mt.get(Jt,Lt)/C.get(Jt,Jt))}for(Jt=I-1;Jt>=0;Jt--)for(Lt=0;Lt<H;Lt++){for(Pt=Jt+1;Pt<I;Pt++)mt.set(Jt,Lt,mt.get(Jt,Lt)-mt.get(Pt,Lt)*C.get(Pt,Jt));mt.set(Jt,Lt,mt.get(Jt,Lt)/C.get(Jt,Jt))}return mt}},{key:"lowerTriangularMatrix",get:function(){return this.L}}]),Q}(),kt=T()(function Q(at){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};x()(this,Q),at=nr.checkMatrix(at);var C=B.Y,I=B.scaleScores,H=I===void 0?!1:I,mt=B.maxIterations,Pt=mt===void 0?1e3:mt,Lt=B.terminationCriteria,Jt=Lt===void 0?1e-10:Lt,Oe;if(C){if(O(C)&&typeof C[0]=="number"?C=ie.columnVector(C):C=nr.checkMatrix(C),C.rows!==at.rows)throw new Error("Y should have the same number of rows as X");Oe=C.getColumnVector(0)}else Oe=at.getColumnVector(0);for(var ye=1,Ze,wr,er,Ur,xn=0;xn<Pt&&ye>Jt;xn++)er=at.transpose().mmul(Oe).div(Oe.transpose().mmul(Oe).get(0,0)),er=er.div(er.norm()),Ze=at.mmul(er).div(er.transpose().mmul(er).get(0,0)),xn>0&&(ye=Ze.clone().sub(Ur).pow(2).sum()),Ur=Ze.clone(),C?(wr=C.transpose().mmul(Ze).div(Ze.transpose().mmul(Ze).get(0,0)),wr=wr.div(wr.norm()),Oe=C.mmul(wr).div(wr.transpose().mmul(wr).get(0,0))):Oe=Ze;if(C){var rr=at.transpose().mmul(Ze).div(Ze.transpose().mmul(Ze).get(0,0));rr=rr.div(rr.norm());var xr=at.clone().sub(Ze.clone().mmul(rr.transpose())),Wr=Oe.transpose().mmul(Ze).div(Ze.transpose().mmul(Ze).get(0,0)),Gr=C.clone().sub(Ze.clone().mulS(Wr.get(0,0)).mmul(wr.transpose()));this.t=Ze,this.p=rr.transpose(),this.w=er.transpose(),this.q=wr,this.u=Oe,this.s=Ze.transpose().mmul(Ze),this.xResidual=xr,this.yResidual=Gr,this.betas=Wr}else this.w=er.transpose(),this.s=Ze.transpose().mmul(Ze).sqrt(),H?this.t=Ze.clone().div(this.s.get(0,0)):this.t=Ze,this.xResidual=at.sub(Ze.mmul(er.transpose()))})},988824:function(We,G,_){"use strict";_.d(G,{Z:function(){return we}});var m=_(197582),R=_(785893),w=_(667294),M=_(513669),P=_(98651),L=_(82538);const p=(Dt,Vt)=>{const ht=T(Dt),kt=T(Vt),Q=ht.pop(),at=kt.pop(),B=l(ht,kt);return B!==0?B:Q&&at?l(Q.split("."),at.split(".")):Q||at?Q?-1:1:0},b=Dt=>typeof Dt=="string"&&/^[v\d]/.test(Dt)&&g.test(Dt),S=(Dt,Vt,ht)=>{F(ht);const kt=p(Dt,Vt);return U[ht].includes(kt)},x=(Dt,Vt)=>{if(Vt.includes("||"))return Vt.split("||").some(Ze=>x(Dt,Ze));if(Vt.includes(" "))return Vt.trim().replace(/\s{2,}/g," ").split(" ").every(Ze=>x(Dt,Ze));const ht=Vt.match(/^([<>=~^]+)/),kt=ht?ht[1]:"=";if(kt!=="^"&&kt!=="~")return S(Dt,Vt,kt);const[Q,at,B,,C]=T(Dt),[I,H,mt,,Pt]=T(Vt),Lt=[Q,at,B],Jt=[I,H!=null?H:"x",mt!=null?mt:"x"];if(Pt&&(!C||l(Lt,Jt)!==0||l(C.split("."),Pt.split("."))===-1))return!1;const Oe=Jt.findIndex(Ze=>Ze!=="0")+1,ye=kt==="~"?2:Oe>1?Oe:1;return!(l(Lt.slice(0,ye),Jt.slice(0,ye))!==0||l(Lt.slice(ye),Jt.slice(ye))===-1)},g=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,T=Dt=>{if(typeof Dt!="string")throw new TypeError("Invalid argument expected string");const Vt=Dt.match(g);if(!Vt)throw new Error(`Invalid argument not valid semver ('${Dt}' received)`);return Vt.shift(),Vt},E=Dt=>Dt==="*"||Dt==="x"||Dt==="X",O=Dt=>{const Vt=parseInt(Dt,10);return isNaN(Vt)?Dt:Vt},k=(Dt,Vt)=>typeof Dt!=typeof Vt?[String(Dt),String(Vt)]:[Dt,Vt],y=(Dt,Vt)=>{if(E(Dt)||E(Vt))return 0;const[ht,kt]=k(O(Dt),O(Vt));return ht>kt?1:ht<kt?-1:0},l=(Dt,Vt)=>{for(let ht=0;ht<Math.max(Dt.length,Vt.length);ht++){const kt=y(Dt[ht]||"0",Vt[ht]||"0");if(kt!==0)return kt}return 0},U={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]},X=Object.keys(U),F=Dt=>{if(typeof Dt!="string")throw new TypeError(`Invalid operator type, expected string but got ${typeof Dt}`);if(X.indexOf(Dt)===-1)throw new Error(`Invalid operator, expected one of ${X.join("|")}`)};var W=function(Dt,Vt){return W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ht,kt){ht.__proto__=kt}||function(ht,kt){for(var Q in kt)Object.prototype.hasOwnProperty.call(kt,Q)&&(ht[Q]=kt[Q])},W(Dt,Vt)};function j(Dt,Vt){W(Dt,Vt);function ht(){this.constructor=Dt}Dt.prototype=Vt===null?Object.create(Vt):(ht.prototype=Vt.prototype,new ht)}var V=function(){return V=Object.assign||function(Vt){for(var ht,kt=1,Q=arguments.length;kt<Q;kt++){ht=arguments[kt];for(var at in ht)Object.prototype.hasOwnProperty.call(ht,at)&&(Vt[at]=ht[at])}return Vt},V.apply(this,arguments)};function q(Dt,Vt){var ht={};for(var kt in Dt)Object.prototype.hasOwnProperty.call(Dt,kt)&&Vt.indexOf(kt)<0&&(ht[kt]=Dt[kt]);if(Dt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Q=0,kt=Object.getOwnPropertySymbols(Dt);Q<kt.length;Q++)Vt.indexOf(kt[Q])<0&&Object.prototype.propertyIsEnumerable.call(Dt,kt[Q])&&(ht[kt[Q]]=Dt[kt[Q]]);return ht}function $(Dt,Vt,ht,kt){var Q=arguments.length,at=Q<3?Vt:kt===null?kt=Object.getOwnPropertyDescriptor(Vt,ht):kt,B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")at=Reflect.decorate(Dt,Vt,ht,kt);else for(var C=Dt.length-1;C>=0;C--)(B=Dt[C])&&(at=(Q<3?B(at):Q>3?B(Vt,ht,at):B(Vt,ht))||at);return Q>3&&at&&Object.defineProperty(Vt,ht,at),at}function J(Dt,Vt){return function(ht,kt){Vt(ht,kt,Dt)}}function ut(Dt,Vt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(Dt,Vt)}function nt(Dt,Vt,ht,kt){function Q(at){return at instanceof ht?at:new ht(function(B){B(at)})}return new(ht||(ht=Promise))(function(at,B){function C(mt){try{H(kt.next(mt))}catch(Pt){B(Pt)}}function I(mt){try{H(kt.throw(mt))}catch(Pt){B(Pt)}}function H(mt){mt.done?at(mt.value):Q(mt.value).then(C,I)}H((kt=kt.apply(Dt,Vt||[])).next())})}function yt(Dt,Vt){var ht={label:0,sent:function(){if(at[0]&1)throw at[1];return at[1]},trys:[],ops:[]},kt,Q,at,B;return B={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(B[Symbol.iterator]=function(){return this}),B;function C(H){return function(mt){return I([H,mt])}}function I(H){if(kt)throw new TypeError("Generator is already executing.");for(;ht;)try{if(kt=1,Q&&(at=H[0]&2?Q.return:H[0]?Q.throw||((at=Q.return)&&at.call(Q),0):Q.next)&&!(at=at.call(Q,H[1])).done)return at;switch(Q=0,at&&(H=[H[0]&2,at.value]),H[0]){case 0:case 1:at=H;break;case 4:return ht.label++,{value:H[1],done:!1};case 5:ht.label++,Q=H[1],H=[0];continue;case 7:H=ht.ops.pop(),ht.trys.pop();continue;default:if(at=ht.trys,!(at=at.length>0&&at[at.length-1])&&(H[0]===6||H[0]===2)){ht=0;continue}if(H[0]===3&&(!at||H[1]>at[0]&&H[1]<at[3])){ht.label=H[1];break}if(H[0]===6&&ht.label<at[1]){ht.label=at[1],at=H;break}if(at&&ht.label<at[2]){ht.label=at[2],ht.ops.push(H);break}at[2]&&ht.ops.pop(),ht.trys.pop();continue}H=Vt.call(Dt,ht)}catch(mt){H=[6,mt],Q=0}finally{kt=at=0}if(H[0]&5)throw H[1];return{value:H[0]?H[1]:void 0,done:!0}}}var dt=Object.create?function(Dt,Vt,ht,kt){kt===void 0&&(kt=ht),Object.defineProperty(Dt,kt,{enumerable:!0,get:function(){return Vt[ht]}})}:function(Dt,Vt,ht,kt){kt===void 0&&(kt=ht),Dt[kt]=Vt[ht]};function Ft(Dt,Vt){for(var ht in Dt)ht!=="default"&&!Object.prototype.hasOwnProperty.call(Vt,ht)&&dt(Vt,Dt,ht)}function wt(Dt){var Vt=typeof Symbol=="function"&&Symbol.iterator,ht=Vt&&Dt[Vt],kt=0;if(ht)return ht.call(Dt);if(Dt&&typeof Dt.length=="number")return{next:function(){return Dt&&kt>=Dt.length&&(Dt=void 0),{value:Dt&&Dt[kt++],done:!Dt}}};throw new TypeError(Vt?"Object is not iterable.":"Symbol.iterator is not defined.")}function St(Dt,Vt){var ht=typeof Symbol=="function"&&Dt[Symbol.iterator];if(!ht)return Dt;var kt=ht.call(Dt),Q,at=[],B;try{for(;(Vt===void 0||Vt-- >0)&&!(Q=kt.next()).done;)at.push(Q.value)}catch(C){B={error:C}}finally{try{Q&&!Q.done&&(ht=kt.return)&&ht.call(kt)}finally{if(B)throw B.error}}return at}function et(){for(var Dt=[],Vt=0;Vt<arguments.length;Vt++)Dt=Dt.concat(St(arguments[Vt]));return Dt}function it(){for(var Dt=0,Vt=0,ht=arguments.length;Vt<ht;Vt++)Dt+=arguments[Vt].length;for(var kt=Array(Dt),Q=0,Vt=0;Vt<ht;Vt++)for(var at=arguments[Vt],B=0,C=at.length;B<C;B++,Q++)kt[Q]=at[B];return kt}function Tt(Dt){return this instanceof Tt?(this.v=Dt,this):new Tt(Dt)}function Nt(Dt,Vt,ht){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var kt=ht.apply(Dt,Vt||[]),Q,at=[];return Q={},B("next"),B("throw"),B("return"),Q[Symbol.asyncIterator]=function(){return this},Q;function B(Lt){kt[Lt]&&(Q[Lt]=function(Jt){return new Promise(function(Oe,ye){at.push([Lt,Jt,Oe,ye])>1||C(Lt,Jt)})})}function C(Lt,Jt){try{I(kt[Lt](Jt))}catch(Oe){Pt(at[0][3],Oe)}}function I(Lt){Lt.value instanceof Tt?Promise.resolve(Lt.value.v).then(H,mt):Pt(at[0][2],Lt)}function H(Lt){C("next",Lt)}function mt(Lt){C("throw",Lt)}function Pt(Lt,Jt){Lt(Jt),at.shift(),at.length&&C(at[0][0],at[0][1])}}function st(Dt){var Vt,ht;return Vt={},kt("next"),kt("throw",function(Q){throw Q}),kt("return"),Vt[Symbol.iterator]=function(){return this},Vt;function kt(Q,at){Vt[Q]=Dt[Q]?function(B){return(ht=!ht)?{value:Tt(Dt[Q](B)),done:Q==="return"}:at?at(B):B}:at}}function xt(Dt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Vt=Dt[Symbol.asyncIterator],ht;return Vt?Vt.call(Dt):(Dt=typeof wt=="function"?wt(Dt):Dt[Symbol.iterator](),ht={},kt("next"),kt("throw"),kt("return"),ht[Symbol.asyncIterator]=function(){return this},ht);function kt(at){ht[at]=Dt[at]&&function(B){return new Promise(function(C,I){B=Dt[at](B),Q(C,I,B.done,B.value)})}}function Q(at,B,C,I){Promise.resolve(I).then(function(H){at({value:H,done:C})},B)}}function zt(Dt,Vt){return Object.defineProperty?Object.defineProperty(Dt,"raw",{value:Vt}):Dt.raw=Vt,Dt}var Wt=Object.create?function(Dt,Vt){Object.defineProperty(Dt,"default",{enumerable:!0,value:Vt})}:function(Dt,Vt){Dt.default=Vt};function _t(Dt){if(Dt&&Dt.__esModule)return Dt;var Vt={};if(Dt!=null)for(var ht in Dt)ht!=="default"&&Object.prototype.hasOwnProperty.call(Dt,ht)&&dt(Vt,Dt,ht);return Wt(Vt,Dt),Vt}function Xt(Dt){return Dt&&Dt.__esModule?Dt:{default:Dt}}function te(Dt,Vt){if(!Vt.has(Dt))throw new TypeError("attempted to get private field on non-instance");return Vt.get(Dt)}function ue(Dt,Vt,ht){if(!Vt.has(Dt))throw new TypeError("attempted to set private field on non-instance");return Vt.set(Dt,ht),ht}var fe=_(252796),Gt=_.n(fe);function ae(Dt,Vt,ht,kt,Q,at){at===void 0&&(at=0);var B=fr(Dt,Vt,at),C=B.width,I=B.height,H=Math.min(C,ht),mt=Math.min(I,kt);return H>mt*Q?{width:mt*Q,height:mt}:{width:H,height:H/Q}}function Ne(Dt){return Dt.width>Dt.height?Dt.width/Dt.naturalWidth:Dt.height/Dt.naturalHeight}function ee(Dt,Vt,ht,kt,Q){Q===void 0&&(Q=0);var at=fr(Vt.width,Vt.height,Q),B=at.width,C=at.height;return{x:de(Dt.x,B,ht.width,kt),y:de(Dt.y,C,ht.height,kt)}}function de(Dt,Vt,ht,kt){var Q=Vt*kt/2-ht/2;return kr(Dt,-Q,Q)}function ze(Dt,Vt){return Math.sqrt(Math.pow(Dt.y-Vt.y,2)+Math.pow(Dt.x-Vt.x,2))}function be(Dt,Vt){return Math.atan2(Vt.y-Dt.y,Vt.x-Dt.x)*180/Math.PI}function ke(Dt,Vt,ht,kt,Q,at,B){at===void 0&&(at=0),B===void 0&&(B=!0);var C=B?he:vt,I=fr(Vt.width,Vt.height,at),H=fr(Vt.naturalWidth,Vt.naturalHeight,at),mt={x:C(100,((I.width-ht.width/Q)/2-Dt.x/Q)/I.width*100),y:C(100,((I.height-ht.height/Q)/2-Dt.y/Q)/I.height*100),width:C(100,ht.width/I.width*100/Q),height:C(100,ht.height/I.height*100/Q)},Pt=Math.round(C(H.width,mt.width*H.width/100)),Lt=Math.round(C(H.height,mt.height*H.height/100)),Jt=H.width>=H.height*kt,Oe=Jt?{width:Math.round(Lt*kt),height:Lt}:{width:Pt,height:Math.round(Pt/kt)},ye=V(V({},Oe),{x:Math.round(C(H.width-Oe.width,mt.x*H.width/100)),y:Math.round(C(H.height-Oe.height,mt.y*H.height/100))});return{croppedAreaPercentages:mt,croppedAreaPixels:ye}}function he(Dt,Vt){return Math.min(Dt,Math.max(0,Vt))}function vt(Dt,Vt){return Vt}function ie(Dt,Vt,ht,kt,Q,at){var B=fr(Vt.width,Vt.height,ht),C=kr(kt.width/B.width*(100/Dt.width),Q,at),I={x:C*B.width/2-kt.width/2-B.width*C*(Dt.x/100),y:C*B.height/2-kt.height/2-B.height*C*(Dt.y/100)};return{crop:I,zoom:C}}function Pe(Dt,Vt,ht){var kt=Ne(Vt);return ht.height>ht.width?ht.height/(Dt.height*kt):ht.width/(Dt.width*kt)}function qe(Dt,Vt,ht,kt,Q,at){ht===void 0&&(ht=0);var B=fr(Vt.naturalWidth,Vt.naturalHeight,ht),C=kr(Pe(Dt,Vt,kt),Q,at),I=kt.height>kt.width?kt.height/Dt.height:kt.width/Dt.width,H={x:((B.width-Dt.width)/2-Dt.x)*I,y:((B.height-Dt.height)/2-Dt.y)*I};return{crop:H,zoom:C}}function Qe(Dt,Vt){return{x:(Vt.x+Dt.x)/2,y:(Vt.y+Dt.y)/2}}function lr(Dt){return Dt*Math.PI/180}function fr(Dt,Vt,ht){var kt=lr(ht);return{width:Math.abs(Math.cos(kt)*Dt)+Math.abs(Math.sin(kt)*Vt),height:Math.abs(Math.sin(kt)*Dt)+Math.abs(Math.cos(kt)*Vt)}}function kr(Dt,Vt,ht){return Math.min(Math.max(Dt,Vt),ht)}function En(){for(var Dt=[],Vt=0;Vt<arguments.length;Vt++)Dt[Vt]=arguments[Vt];return Dt.filter(function(ht){return typeof ht=="string"&&ht.length>0}).join(" ").trim()}var fn=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,Vr=1,Je=3,dr=function(Dt){j(Vt,Dt);function Vt(){var ht=Dt!==null&&Dt.apply(this,arguments)||this;return ht.imageRef=w.createRef(),ht.videoRef=w.createRef(),ht.containerRef=null,ht.styleRef=null,ht.containerRect=null,ht.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},ht.dragStartPosition={x:0,y:0},ht.dragStartCrop={x:0,y:0},ht.gestureZoomStart=0,ht.gestureRotationStart=0,ht.isTouching=!1,ht.lastPinchDistance=0,ht.lastPinchRotation=0,ht.rafDragTimeout=null,ht.rafPinchTimeout=null,ht.wheelTimer=null,ht.currentDoc=typeof document!="undefined"?document:null,ht.currentWindow=typeof window!="undefined"?window:null,ht.resizeObserver=null,ht.state={cropSize:null,hasWheelJustStarted:!1},ht.initResizeObserver=function(){if(!(typeof window.ResizeObserver=="undefined"||!ht.containerRef)){var kt=!0;ht.resizeObserver=new window.ResizeObserver(function(Q){if(kt){kt=!1;return}ht.computeSizes()}),ht.resizeObserver.observe(ht.containerRef)}},ht.preventZoomSafari=function(kt){return kt.preventDefault()},ht.cleanEvents=function(){ht.currentDoc&&(ht.currentDoc.removeEventListener("mousemove",ht.onMouseMove),ht.currentDoc.removeEventListener("mouseup",ht.onDragStopped),ht.currentDoc.removeEventListener("touchmove",ht.onTouchMove),ht.currentDoc.removeEventListener("touchend",ht.onDragStopped),ht.currentDoc.removeEventListener("gesturemove",ht.onGestureMove),ht.currentDoc.removeEventListener("gestureend",ht.onGestureEnd))},ht.clearScrollEvent=function(){ht.containerRef&&ht.containerRef.removeEventListener("wheel",ht.onWheel),ht.wheelTimer&&clearTimeout(ht.wheelTimer)},ht.onMediaLoad=function(){var kt=ht.computeSizes();kt&&(ht.emitCropData(),ht.setInitialCrop(kt)),ht.props.onMediaLoaded&&ht.props.onMediaLoaded(ht.mediaSize)},ht.setInitialCrop=function(kt){if(ht.props.initialCroppedAreaPercentages){var Q=ie(ht.props.initialCroppedAreaPercentages,ht.mediaSize,ht.props.rotation,kt,ht.props.minZoom,ht.props.maxZoom),at=Q.crop,B=Q.zoom;ht.props.onCropChange(at),ht.props.onZoomChange&&ht.props.onZoomChange(B)}else if(ht.props.initialCroppedAreaPixels){var C=qe(ht.props.initialCroppedAreaPixels,ht.mediaSize,ht.props.rotation,kt,ht.props.minZoom,ht.props.maxZoom),at=C.crop,B=C.zoom;ht.props.onCropChange(at),ht.props.onZoomChange&&ht.props.onZoomChange(B)}},ht.computeSizes=function(){var kt,Q,at,B,C,I,H=ht.imageRef.current||ht.videoRef.current;if(H&&ht.containerRef){ht.containerRect=ht.containerRef.getBoundingClientRect();var mt=ht.containerRect.width/ht.containerRect.height,Pt=((kt=ht.imageRef.current)===null||kt===void 0?void 0:kt.naturalWidth)||((Q=ht.videoRef.current)===null||Q===void 0?void 0:Q.videoWidth)||0,Lt=((at=ht.imageRef.current)===null||at===void 0?void 0:at.naturalHeight)||((B=ht.videoRef.current)===null||B===void 0?void 0:B.videoHeight)||0,Jt=H.offsetWidth<Pt||H.offsetHeight<Lt,Oe=Pt/Lt,ye=void 0;if(Jt)switch(ht.props.objectFit){default:case"contain":ye=mt>Oe?{width:ht.containerRect.height*Oe,height:ht.containerRect.height}:{width:ht.containerRect.width,height:ht.containerRect.width/Oe};break;case"horizontal-cover":ye={width:ht.containerRect.width,height:ht.containerRect.width/Oe};break;case"vertical-cover":ye={width:ht.containerRect.height*Oe,height:ht.containerRect.height};break;case"auto-cover":ye=Pt>Lt?{width:ht.containerRect.width,height:ht.containerRect.width/Oe}:{width:ht.containerRect.height*Oe,height:ht.containerRect.height};break}else ye={width:H.offsetWidth,height:H.offsetHeight};ht.mediaSize=V(V({},ye),{naturalWidth:Pt,naturalHeight:Lt}),ht.props.setMediaSize&&ht.props.setMediaSize(ht.mediaSize);var Ze=ht.props.cropSize?ht.props.cropSize:ae(ht.mediaSize.width,ht.mediaSize.height,ht.containerRect.width,ht.containerRect.height,ht.props.aspect,ht.props.rotation);return(((C=ht.state.cropSize)===null||C===void 0?void 0:C.height)!==Ze.height||((I=ht.state.cropSize)===null||I===void 0?void 0:I.width)!==Ze.width)&&ht.props.onCropSizeChange&&ht.props.onCropSizeChange(Ze),ht.setState({cropSize:Ze},ht.recomputeCropPosition),ht.props.setCropSize&&ht.props.setCropSize(Ze),Ze}},ht.onMouseDown=function(kt){ht.currentDoc&&(kt.preventDefault(),ht.currentDoc.addEventListener("mousemove",ht.onMouseMove),ht.currentDoc.addEventListener("mouseup",ht.onDragStopped),ht.onDragStart(Vt.getMousePoint(kt)))},ht.onMouseMove=function(kt){return ht.onDrag(Vt.getMousePoint(kt))},ht.onTouchStart=function(kt){ht.currentDoc&&(ht.isTouching=!0,!(ht.props.onTouchRequest&&!ht.props.onTouchRequest(kt))&&(ht.currentDoc.addEventListener("touchmove",ht.onTouchMove,{passive:!1}),ht.currentDoc.addEventListener("touchend",ht.onDragStopped),kt.touches.length===2?ht.onPinchStart(kt):kt.touches.length===1&&ht.onDragStart(Vt.getTouchPoint(kt.touches[0]))))},ht.onTouchMove=function(kt){kt.preventDefault(),kt.touches.length===2?ht.onPinchMove(kt):kt.touches.length===1&&ht.onDrag(Vt.getTouchPoint(kt.touches[0]))},ht.onGestureStart=function(kt){ht.currentDoc&&(kt.preventDefault(),ht.currentDoc.addEventListener("gesturechange",ht.onGestureMove),ht.currentDoc.addEventListener("gestureend",ht.onGestureEnd),ht.gestureZoomStart=ht.props.zoom,ht.gestureRotationStart=ht.props.rotation)},ht.onGestureMove=function(kt){if(kt.preventDefault(),!ht.isTouching){var Q=Vt.getMousePoint(kt),at=ht.gestureZoomStart-1+kt.scale;if(ht.setNewZoom(at,Q,{shouldUpdatePosition:!0}),ht.props.onRotationChange){var B=ht.gestureRotationStart+kt.rotation;ht.props.onRotationChange(B)}}},ht.onGestureEnd=function(kt){ht.cleanEvents()},ht.onDragStart=function(kt){var Q,at,B=kt.x,C=kt.y;ht.dragStartPosition={x:B,y:C},ht.dragStartCrop=V({},ht.props.crop),(at=(Q=ht.props).onInteractionStart)===null||at===void 0||at.call(Q)},ht.onDrag=function(kt){var Q=kt.x,at=kt.y;ht.currentWindow&&(ht.rafDragTimeout&&ht.currentWindow.cancelAnimationFrame(ht.rafDragTimeout),ht.rafDragTimeout=ht.currentWindow.requestAnimationFrame(function(){if(ht.state.cropSize&&!(Q===void 0||at===void 0)){var B=Q-ht.dragStartPosition.x,C=at-ht.dragStartPosition.y,I={x:ht.dragStartCrop.x+B,y:ht.dragStartCrop.y+C},H=ht.props.restrictPosition?ee(I,ht.mediaSize,ht.state.cropSize,ht.props.zoom,ht.props.rotation):I;ht.props.onCropChange(H)}}))},ht.onDragStopped=function(){var kt,Q;ht.isTouching=!1,ht.cleanEvents(),ht.emitCropData(),(Q=(kt=ht.props).onInteractionEnd)===null||Q===void 0||Q.call(kt)},ht.onWheel=function(kt){if(ht.currentWindow&&!(ht.props.onWheelRequest&&!ht.props.onWheelRequest(kt))){kt.preventDefault();var Q=Vt.getMousePoint(kt),at=Gt()(kt).pixelY,B=ht.props.zoom-at*ht.props.zoomSpeed/200;ht.setNewZoom(B,Q,{shouldUpdatePosition:!0}),ht.state.hasWheelJustStarted||ht.setState({hasWheelJustStarted:!0},function(){var C,I;return(I=(C=ht.props).onInteractionStart)===null||I===void 0?void 0:I.call(C)}),ht.wheelTimer&&clearTimeout(ht.wheelTimer),ht.wheelTimer=ht.currentWindow.setTimeout(function(){return ht.setState({hasWheelJustStarted:!1},function(){var C,I;return(I=(C=ht.props).onInteractionEnd)===null||I===void 0?void 0:I.call(C)})},250)}},ht.getPointOnContainer=function(kt){var Q=kt.x,at=kt.y;if(!ht.containerRect)throw new Error("The Cropper is not mounted");return{x:ht.containerRect.width/2-(Q-ht.containerRect.left),y:ht.containerRect.height/2-(at-ht.containerRect.top)}},ht.getPointOnMedia=function(kt){var Q=kt.x,at=kt.y,B=ht.props,C=B.crop,I=B.zoom;return{x:(Q+C.x)/I,y:(at+C.y)/I}},ht.setNewZoom=function(kt,Q,at){var B=at===void 0?{}:at,C=B.shouldUpdatePosition,I=C===void 0?!0:C;if(!(!ht.state.cropSize||!ht.props.onZoomChange)){var H=kr(kt,ht.props.minZoom,ht.props.maxZoom);if(I){var mt=ht.getPointOnContainer(Q),Pt=ht.getPointOnMedia(mt),Lt={x:Pt.x*H-mt.x,y:Pt.y*H-mt.y},Jt=ht.props.restrictPosition?ee(Lt,ht.mediaSize,ht.state.cropSize,H,ht.props.rotation):Lt;ht.props.onCropChange(Jt)}ht.props.onZoomChange(H)}},ht.getCropData=function(){if(!ht.state.cropSize)return null;var kt=ht.props.restrictPosition?ee(ht.props.crop,ht.mediaSize,ht.state.cropSize,ht.props.zoom,ht.props.rotation):ht.props.crop;return ke(kt,ht.mediaSize,ht.state.cropSize,ht.getAspect(),ht.props.zoom,ht.props.rotation,ht.props.restrictPosition)},ht.emitCropData=function(){var kt=ht.getCropData();if(kt){var Q=kt.croppedAreaPercentages,at=kt.croppedAreaPixels;ht.props.onCropComplete&&ht.props.onCropComplete(Q,at),ht.props.onCropAreaChange&&ht.props.onCropAreaChange(Q,at)}},ht.emitCropAreaChange=function(){var kt=ht.getCropData();if(kt){var Q=kt.croppedAreaPercentages,at=kt.croppedAreaPixels;ht.props.onCropAreaChange&&ht.props.onCropAreaChange(Q,at)}},ht.recomputeCropPosition=function(){if(ht.state.cropSize){var kt=ht.props.restrictPosition?ee(ht.props.crop,ht.mediaSize,ht.state.cropSize,ht.props.zoom,ht.props.rotation):ht.props.crop;ht.props.onCropChange(kt),ht.emitCropData()}},ht}return Vt.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver=="undefined"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=fn,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef))},Vt.prototype.componentWillUnmount=function(){var ht,kt;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver=="undefined"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(ht=this.resizeObserver)===null||ht===void 0||ht.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((kt=this.styleRef.parentNode)===null||kt===void 0||kt.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},Vt.prototype.componentDidUpdate=function(ht){var kt,Q,at,B,C,I,H,mt,Pt;ht.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):ht.aspect!==this.props.aspect?this.computeSizes():ht.zoom!==this.props.zoom?this.recomputeCropPosition():((kt=ht.cropSize)===null||kt===void 0?void 0:kt.height)!==((Q=this.props.cropSize)===null||Q===void 0?void 0:Q.height)||((at=ht.cropSize)===null||at===void 0?void 0:at.width)!==((B=this.props.cropSize)===null||B===void 0?void 0:B.width)?this.computeSizes():(((C=ht.crop)===null||C===void 0?void 0:C.x)!==((I=this.props.crop)===null||I===void 0?void 0:I.x)||((H=ht.crop)===null||H===void 0?void 0:H.y)!==((mt=this.props.crop)===null||mt===void 0?void 0:mt.y))&&this.emitCropAreaChange(),ht.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),ht.video!==this.props.video&&((Pt=this.videoRef.current)===null||Pt===void 0||Pt.load())},Vt.prototype.getAspect=function(){var ht=this.props,kt=ht.cropSize,Q=ht.aspect;return kt?kt.width/kt.height:Q},Vt.prototype.onPinchStart=function(ht){var kt=Vt.getTouchPoint(ht.touches[0]),Q=Vt.getTouchPoint(ht.touches[1]);this.lastPinchDistance=ze(kt,Q),this.lastPinchRotation=be(kt,Q),this.onDragStart(Qe(kt,Q))},Vt.prototype.onPinchMove=function(ht){var kt=this;if(!(!this.currentDoc||!this.currentWindow)){var Q=Vt.getTouchPoint(ht.touches[0]),at=Vt.getTouchPoint(ht.touches[1]),B=Qe(Q,at);this.onDrag(B),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var C=ze(Q,at),I=kt.props.zoom*(C/kt.lastPinchDistance);kt.setNewZoom(I,B,{shouldUpdatePosition:!1}),kt.lastPinchDistance=C;var H=be(Q,at),mt=kt.props.rotation+(H-kt.lastPinchRotation);kt.props.onRotationChange&&kt.props.onRotationChange(mt),kt.lastPinchRotation=H})}},Vt.prototype.render=function(){var ht=this,kt=this.props,Q=kt.image,at=kt.video,B=kt.mediaProps,C=kt.transform,I=kt.crop,H=I.x,mt=I.y,Pt=kt.rotation,Lt=kt.zoom,Jt=kt.cropShape,Oe=kt.showGrid,ye=kt.style,Ze=ye.containerStyle,wr=ye.cropAreaStyle,er=ye.mediaStyle,Ur=kt.classes,xn=Ur.containerClassName,rr=Ur.cropAreaClassName,xr=Ur.mediaClassName,Wr=kt.objectFit;return w.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(ce){return ht.containerRef=ce},"data-testid":"container",style:Ze,className:En("reactEasyCrop_Container",xn)},Q?w.createElement("img",V({alt:"",className:En("reactEasyCrop_Image",Wr==="contain"&&"reactEasyCrop_Contain",Wr==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",Wr==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",Wr==="auto-cover"&&(this.mediaSize.naturalWidth>this.mediaSize.naturalHeight?"reactEasyCrop_Cover_Horizontal":"reactEasyCrop_Cover_Vertical"),xr)},B,{src:Q,ref:this.imageRef,style:V(V({},er),{transform:C||"translate(".concat(H,"px, ").concat(mt,"px) rotate(").concat(Pt,"deg) scale(").concat(Lt,")")}),onLoad:this.onMediaLoad})):at&&w.createElement("video",V({autoPlay:!0,loop:!0,muted:!0,className:En("reactEasyCrop_Video",Wr==="contain"&&"reactEasyCrop_Contain",Wr==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",Wr==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",Wr==="auto-cover"&&(this.mediaSize.naturalWidth>this.mediaSize.naturalHeight?"reactEasyCrop_Cover_Horizontal":"reactEasyCrop_Cover_Vertical"),xr)},B,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:V(V({},er),{transform:C||"translate(".concat(H,"px, ").concat(mt,"px) rotate(").concat(Pt,"deg) scale(").concat(Lt,")")}),controls:!1}),(Array.isArray(at)?at:[{src:at}]).map(function(Gr){return w.createElement("source",V({key:Gr.src},Gr))})),this.state.cropSize&&w.createElement("div",{style:V(V({},wr),{width:this.state.cropSize.width,height:this.state.cropSize.height}),"data-testid":"cropper",className:En("reactEasyCrop_CropArea",Jt==="round"&&"reactEasyCrop_CropAreaRound",Oe&&"reactEasyCrop_CropAreaGrid",rr)}))},Vt.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:Je,minZoom:Vr,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0},Vt.getMousePoint=function(ht){return{x:Number(ht.clientX),y:Number(ht.clientY)}},Vt.getTouchPoint=function(ht){return{x:Number(ht.clientX),y:Number(ht.clientY)}},Vt}(w.Component),nr=_(905303),oe=_(591607);const Te="img-crop",Lr=1,Nr=.1,ln=0,en=-180,Dr=180,Fr=1,Kr=.5,an=2,yn=.01,bn=(0,w.forwardRef)((Dt,Vt)=>{const{cropperRef:ht,zoomSlider:kt,rotationSlider:Q,aspectSlider:at,showReset:B,resetBtnText:C,modalImage:I,aspect:H,minZoom:mt,maxZoom:Pt,cropShape:Lt,showGrid:Jt,cropperProps:Oe}=Dt,[ye,Ze]=(0,w.useState)(Lr),[wr,er]=(0,w.useState)(ln),[Ur,xn]=(0,w.useState)(H),rr=ye!==Lr||wr!==ln||Ur!==H,xr=()=>{Ze(Lr),er(ln),xn(H)},[Wr,Gr]=(0,w.useState)({x:0,y:0}),ce=(0,w.useRef)({width:0,height:0,x:0,y:0}),Yt=(0,w.useCallback)((Ye,gr)=>{ce.current=gr},[]);(0,w.useImperativeHandle)(Vt,()=>({rotation:wr,cropPixelsRef:ce,onReset:xr}));const ge="[display:flex] [align-items:center] [width:60%] [margin-inline:auto]",Ie="[display:flex] [align-items:center] [justify-content:center] [height:32px] [width:32px] [background:transparent] [border:0] [font-family:inherit] [font-size:18px] [cursor:pointer] disabled:[opacity:20%] disabled:[cursor:default]",xe="[flex:1]";return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(dr,Object.assign({},Oe,{ref:ht,image:I,crop:Wr,zoom:ye,rotation:wr,aspect:Ur,minZoom:mt,maxZoom:Pt,zoomWithScroll:kt,cropShape:Lt,showGrid:Jt,onCropChange:Gr,onZoomChange:Ze,onRotationChange:er,onCropComplete:Yt,classes:{containerClassName:`${Te}-container ![position:relative] [width:100%] [height:40vh] [&~section:first-of-type]:[margin-top:16px] [&~section:last-of-type]:[margin-bottom:16px]`,mediaClassName:`${Te}-media`}})),kt&&(0,R.jsxs)("section",Object.assign({className:`${Te}-control ${Te}-control-zoom ${ge}`},{children:[(0,R.jsx)("button",Object.assign({className:Ie,onClick:()=>Ze(ye-Nr),disabled:ye-Nr<mt},{children:"\uFF0D"})),(0,R.jsx)(oe.Z,{className:xe,min:mt,max:Pt,step:Nr,value:ye,onChange:Ze}),(0,R.jsx)("button",Object.assign({className:Ie,onClick:()=>Ze(ye+Nr),disabled:ye+Nr>Pt},{children:"\uFF0B"}))]})),Q&&(0,R.jsxs)("section",Object.assign({className:`${Te}-control ${Te}-control-rotation ${ge}`},{children:[(0,R.jsx)("button",Object.assign({className:`${Ie} [font-size:16px]`,onClick:()=>er(wr-Fr),disabled:wr===en},{children:"\u21BA"})),(0,R.jsx)(oe.Z,{className:xe,min:en,max:Dr,step:Fr,value:wr,onChange:er}),(0,R.jsx)("button",Object.assign({className:`${Ie} [font-size:16px]`,onClick:()=>er(wr+Fr),disabled:wr===Dr},{children:"\u21BB"}))]})),at&&(0,R.jsxs)("section",Object.assign({className:`${Te}-control ${Te}-control-aspect ${ge}`},{children:[(0,R.jsx)("button",Object.assign({className:Ie,onClick:()=>xn(Ur-yn),disabled:Ur-yn<Kr},{children:"\u2195\uFE0F"})),(0,R.jsx)(oe.Z,{className:xe,min:Kr,max:an,step:yn,value:Ur,onChange:xn}),(0,R.jsx)("button",Object.assign({className:Ie,onClick:()=>xn(Ur+yn),disabled:Ur+yn>an},{children:"\u2194\uFE0F"}))]})),B&&(kt||Q||at)&&(0,R.jsx)(nr.ZP,Object.assign({className:"[bottom:20px] [position:absolute]",style:rr?{}:{opacity:.3,pointerEvents:"none"},onClick:xr},{children:C}))]})});var tt=(0,w.memo)(bn);function tr(Dt,Vt){Vt===void 0&&(Vt={});var ht=Vt.insertAt;if(!(!Dt||typeof document=="undefined")){var kt=document.head||document.getElementsByTagName("head")[0],Q=document.createElement("style");Q.type="text/css",ht==="top"&&kt.firstChild?kt.insertBefore(Q,kt.firstChild):kt.appendChild(Q),Q.styleSheet?Q.styleSheet.cssText=Dt:Q.appendChild(document.createTextNode(Dt))}}var Kt=".container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}@media (min-width:1536px){.container{max-width:1536px}}.visible{visibility:visible}.grid{display:grid}.\\!\\[position\\:relative\\]{position:relative!important}.\\[align-items\\:center\\]{align-items:center}.\\[background\\:transparent\\]{background:transparent}.\\[border\\:0\\]{border:0}.\\[bottom\\:20px\\]{bottom:20px}.\\[cursor\\:pointer\\]{cursor:pointer}.\\[display\\:flex\\]{display:flex}.\\[flex\\:1\\]{flex:1}.\\[font-family\\:inherit\\]{font-family:inherit}.\\[font-size\\:16px\\]{font-size:16px}.\\[font-size\\:18px\\]{font-size:18px}.\\[height\\:32px\\]{height:32px}.\\[height\\:40vh\\]{height:40vh}.\\[justify-content\\:center\\]{justify-content:center}.\\[margin-inline\\:auto\\]{margin-inline:auto}.\\[position\\:absolute\\]{position:absolute}.\\[width\\:100\\%\\]{width:100%}.\\[width\\:32px\\]{width:32px}.\\[width\\:60\\%\\]{width:60%}.disabled\\:\\[cursor\\:default\\]:disabled{cursor:default}.disabled\\:\\[opacity\\:20\\%\\]:disabled{opacity:20%}.\\[\\&\\~section\\:first-of-type\\]\\:\\[margin-top\\:16px\\]~section:first-of-type{margin-top:16px}.\\[\\&\\~section\\:last-of-type\\]\\:\\[margin-bottom\\:16px\\]~section:last-of-type{margin-bottom:16px}";tr(Kt);const $t=p(M.version,"4.23.0")===-1?"visible":"open",Et=(Dt,Vt,ht)=>Vt in Dt?(console.error(`\`${Vt}\` is deprecated, please use \`${ht}\` instead`),Dt[Vt]):Dt[ht],we=(0,w.forwardRef)((Dt,Vt)=>{const{quality:ht=.4,fillColor:kt="white",zoomSlider:Q=!0,rotationSlider:at=!1,aspectSlider:B=!1,showReset:C=!1,resetText:I,aspect:H=1,minZoom:mt=1,maxZoom:Pt=3,cropShape:Lt="rect",showGrid:Jt=!1,cropperProps:Oe,modalClassName:ye,modalTitle:Ze,modalWidth:wr,modalOk:er,modalCancel:Ur,onModalOk:xn,onModalCancel:rr,modalProps:xr,beforeCrop:Wr,children:Gr}=Dt,ce=Et(Dt,"zoom","zoomSlider")||!0,Yt=Et(Dt,"rotate","rotationSlider")||!1,ge=Et(Dt,"shape","cropShape")||"rect",Ie=Et(Dt,"grid","showGrid")||!1;"onUploadFail"in Dt&&console.error("`onUploadFail` is removed, because the only way it is called, is when the file is rejected by beforeUpload"),Et(Dt,"modalMaskTransitionName","modalProps.maskTransitionName"),Et(Dt,"modalTransitionName","modalProps.transitionName");const xe=(0,w.useRef)({});xe.current.onModalOk=xn,xe.current.onModalCancel=rr,xe.current.beforeCrop=Wr;const Ye=(0,w.useRef)(null),gr=(0,w.useCallback)(ri=>{var ti;const Mi=document.createElement("canvas"),Vi=Mi.getContext("2d"),io=(((ti=ri==null?void 0:ri.getRootNode)===null||ti===void 0?void 0:ti.call(ri))||document).querySelector(`.${Te}-media`),{width:wa,height:oo,x:To,y:ii}=Ye.current.cropPixelsRef.current;if(Yt&&Ye.current.rotation!==ln){const{naturalWidth:Xi,naturalHeight:so}=io,zo=Ye.current.rotation*(Math.PI/180),ro=Math.abs(Math.sin(zo)),vo=Math.abs(Math.cos(zo)),Ao=Xi*vo+so*ro,Go=so*vo+Xi*ro;Mi.width=Ao,Mi.height=Go,Vi.fillStyle=kt,Vi.fillRect(0,0,Ao,Go);const Ai=Ao/2,$i=Go/2;Vi.translate(Ai,$i),Vi.rotate(zo),Vi.translate(-Ai,-$i);const oa=(Ao-Xi)/2,Qt=(Go-so)/2;Vi.drawImage(io,0,0,Xi,so,oa,Qt,Xi,so);const ve=Vi.getImageData(0,0,Ao,Go);Mi.width=wa,Mi.height=oo,Vi.putImageData(ve,-To,-ii)}else Mi.width=wa,Mi.height=oo,Vi.fillStyle=kt,Vi.fillRect(0,0,wa,oo),Vi.drawImage(io,To,ii,wa,oo,0,0,wa,oo);return Mi},[kt,Yt]),[Mr,vn]=(0,w.useState)(""),Wn=(0,w.useRef)(),Sn=(0,w.useRef)(),ea=(0,w.useMemo)(()=>{const ri=Array.isArray(Gr)?Gr[0]:Gr,ti=ri.props,{beforeUpload:Mi,accept:Vi}=ti,ao=(0,m.__rest)(ti,["beforeUpload","accept"]),io=(wa,oo)=>new Promise(To=>(0,m.__awaiter)(void 0,void 0,void 0,function*(){if(typeof xe.current.beforeCrop=="function")try{const Xi=yield xe.current.beforeCrop(wa,oo);if(Xi!==!0)return To(Xi)}catch(Xi){return To(Xi)}const ii=new FileReader;ii.addEventListener("load",()=>{typeof ii.result=="string"&&vn(ii.result)}),ii.readAsDataURL(wa),Wn.current=()=>{var Xi,so;vn(""),Ye.current.onReset(),To(L.Z.LIST_IGNORE),(so=(Xi=xe.current).onModalCancel)===null||so===void 0||so.call(Xi)},Sn.current=Xi=>(0,m.__awaiter)(void 0,void 0,void 0,function*(){vn(""),Ye.current.onReset();const so=gr(Xi.target),{type:zo,name:ro,uid:vo}=wa;so.toBlob(Ao=>(0,m.__awaiter)(void 0,void 0,void 0,function*(){var Go,Ai,$i,oa,Qt,ve;const Ge=new File([Ao],ro,{type:zo});if(Object.assign(Ge,{uid:vo}),typeof Mi!="function"){To(Ge),(Ai=(Go=xe.current).onModalOk)===null||Ai===void 0||Ai.call(Go,Ge);return}try{const pr=yield Mi(Ge,[Ge]),Xr=pr===!0?Ge:pr;To(Xr),(oa=($i=xe.current).onModalOk)===null||oa===void 0||oa.call($i,Xr)}catch(pr){To(pr),(ve=(Qt=xe.current).onModalOk)===null||ve===void 0||ve.call(Qt,pr)}}),zo,ht)})}));return Object.assign(Object.assign({},ri),{props:Object.assign(Object.assign({},ao),{accept:Vi||"image/*",beforeUpload:io})})},[Gr,gr,ht]),wn=(0,w.useMemo)(()=>{const ri={};return wr!==void 0&&(ri.width=wr),er!==void 0&&(ri.okText=er),Ur!==void 0&&(ri.cancelText=Ur),ri},[Ur,er,wr]),Hn=`${Te}-modal${ye?` ${ye}`:""}`,ba=(typeof window=="undefined"?"":window.navigator.language)==="zh-CN",xa=Ze||(ba?"\u7F16\u8F91\u56FE\u7247":"Edit image"),Yi=I||(ba?"\u91CD\u7F6E":"Reset");return(0,R.jsxs)(R.Fragment,{children:[ea,Mr&&(0,R.jsx)(P.Z,Object.assign({},xr,wn,{[$t]:!0},{title:xa,onCancel:Wn.current,onOk:Sn.current,wrapClassName:Hn,maskClosable:!1,destroyOnClose:!0},{children:(0,R.jsx)(tt,{ref:Ye,cropperRef:Vt,zoomSlider:ce,rotationSlider:Yt,aspectSlider:B,showReset:C,resetBtnText:Yi,modalImage:Mr,aspect:H,minZoom:mt,maxZoom:Pt,cropShape:ge,showGrid:Ie,cropperProps:Oe})}))]})})},921924:function(We,G,_){"use strict";var m=_(340210),R=_(155559),w=R(m("String.prototype.indexOf"));We.exports=function(P,L){var p=m(P,!!L);return typeof p=="function"&&w(P,".prototype.")>-1?R(p):p}},155559:function(We,G,_){"use strict";var m=_(158612),R=_(340210),w=R("%Function.prototype.apply%"),M=R("%Function.prototype.call%"),P=R("%Reflect.apply%",!0)||m.call(M,w),L=R("%Object.getOwnPropertyDescriptor%",!0),p=R("%Object.defineProperty%",!0),b=R("%Math.max%");if(p)try{p({},"a",{value:1})}catch(x){p=null}We.exports=function(g){var T=P(m,M,arguments);if(L&&p){var E=L(T,"length");E.configurable&&p(T,"length",{value:1+b(0,g.length-(arguments.length-1))})}return T};var S=function(){return P(m,w,arguments)};p?p(We.exports,"apply",{value:S}):We.exports.apply=S},386010:function(We,G,_){"use strict";_.r(G),_.d(G,{clsx:function(){return R}});function m(w){var M,P,L="";if(typeof w=="string"||typeof w=="number")L+=w;else if(typeof w=="object")if(Array.isArray(w))for(M=0;M<w.length;M++)w[M]&&(P=m(w[M]))&&(L&&(L+=" "),L+=P);else for(M in w)w[M]&&(L&&(L+=" "),L+=M);return L}function R(){for(var w,M,P=0,L="";P<arguments.length;)(w=arguments[P++])&&(M=m(w))&&(L&&(L+=" "),L+=M);return L}G.default=R},308273:function(We,G,_){"use strict";_.r(G),_.d(G,{CountUp:function(){return R}});var m=function(){return m=Object.assign||function(w){for(var M,P=1,L=arguments.length;P<L;P++)for(var p in M=arguments[P])Object.prototype.hasOwnProperty.call(M,p)&&(w[p]=M[p]);return w},m.apply(this,arguments)},R=function(){function w(M,P,L){var p=this;this.endVal=P,this.options=L,this.version="2.6.2",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,useIndianSeparators:!1,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200,scrollSpyOnce:!1},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.once=!1,this.count=function(b){p.startTime||(p.startTime=b);var S=b-p.startTime;p.remaining=p.duration-S,p.useEasing?p.countDown?p.frameVal=p.startVal-p.easingFn(S,0,p.startVal-p.endVal,p.duration):p.frameVal=p.easingFn(S,p.startVal,p.endVal-p.startVal,p.duration):p.frameVal=p.startVal+(p.endVal-p.startVal)*(S/p.duration);var x=p.countDown?p.frameVal<p.endVal:p.frameVal>p.endVal;p.frameVal=x?p.endVal:p.frameVal,p.frameVal=Number(p.frameVal.toFixed(p.options.decimalPlaces)),p.printValue(p.frameVal),S<p.duration?p.rAF=requestAnimationFrame(p.count):p.finalEndVal!==null?p.update(p.finalEndVal):p.options.onCompleteCallback&&p.options.onCompleteCallback()},this.formatNumber=function(b){var S,x,g,T,E=b<0?"-":"";S=Math.abs(b).toFixed(p.options.decimalPlaces);var O=(S+="").split(".");if(x=O[0],g=O.length>1?p.options.decimal+O[1]:"",p.options.useGrouping){T="";for(var k=3,y=0,l=0,U=x.length;l<U;++l)p.options.useIndianSeparators&&l===4&&(k=2,y=1),l!==0&&y%k==0&&(T=p.options.separator+T),y++,T=x[U-l-1]+T;x=T}return p.options.numerals&&p.options.numerals.length&&(x=x.replace(/[0-9]/g,function(X){return p.options.numerals[+X]}),g=g.replace(/[0-9]/g,function(X){return p.options.numerals[+X]})),E+p.options.prefix+x+g+p.options.suffix},this.easeOutExpo=function(b,S,x,g){return x*(1-Math.pow(2,-10*b/g))*1024/1023+S},this.options=m(m({},this.defaults),L),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(P),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,this.options.separator===""&&(this.options.useGrouping=!1),this.el=typeof M=="string"?document.getElementById(M):M,this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined",typeof window!="undefined"&&this.options.enableScrollSpy&&(this.error?console.error(this.error,M):(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push(function(){return p.handleScroll(p)}),window.onscroll=function(){window.onScrollFns.forEach(function(b){return b()})},this.handleScroll(this)))}return w.prototype.handleScroll=function(M){if(M&&window&&!M.once){var P=window.innerHeight+window.scrollY,L=M.el.getBoundingClientRect(),p=L.top+window.pageYOffset,b=L.top+L.height+window.pageYOffset;b<P&&b>window.scrollY&&M.paused?(M.paused=!1,setTimeout(function(){return M.start()},M.options.scrollSpyDelay),M.options.scrollSpyOnce&&(M.once=!0)):(window.scrollY>b||p>P)&&!M.paused&&M.reset()}},w.prototype.determineDirectionAndSmartEasing=function(){var M=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>M;var P=M-this.startVal;if(Math.abs(P)>this.options.smartEasingThreshold&&this.options.useEasing){this.finalEndVal=M;var L=this.countDown?1:-1;this.endVal=M+L*this.options.smartEasingAmount,this.duration=this.duration/2}else this.endVal=M,this.finalEndVal=null;this.finalEndVal!==null?this.useEasing=!1:this.useEasing=this.options.useEasing},w.prototype.start=function(M){this.error||(M&&(this.options.onCompleteCallback=M),this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},w.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},w.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},w.prototype.update=function(M){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(M),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,this.finalEndVal==null&&this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},w.prototype.printValue=function(M){var P;if(this.el){var L=this.formattingFn(M);!((P=this.options.plugin)===null||P===void 0)&&P.render?this.options.plugin.render(this.el,L):this.el.tagName==="INPUT"?this.el.value=L:this.el.tagName==="text"||this.el.tagName==="tspan"?this.el.textContent=L:this.el.innerHTML=L}},w.prototype.ensureNumber=function(M){return typeof M=="number"&&!isNaN(M)},w.prototype.validateValue=function(M){var P=Number(M);return this.ensureNumber(P)?P:(this.error="[CountUp] invalid start or end value: ".concat(M),null)},w.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},w}()},971829:function(We,G,_){"use strict";_.r(G),_.d(G,{quadtree:function(){return m.Z}});var m=_(547148)},547148:function(We,G,_){"use strict";_.d(G,{Z:function(){return X}});function m(V){const q=+this._x.call(null,V),$=+this._y.call(null,V);return R(this.cover(q,$),q,$,V)}function R(V,q,$,J){if(isNaN(q)||isNaN($))return V;var ut,nt=V._root,yt={data:J},dt=V._x0,Ft=V._y0,wt=V._x1,St=V._y1,et,it,Tt,Nt,st,xt,zt,Wt;if(!nt)return V._root=yt,V;for(;nt.length;)if((st=q>=(et=(dt+wt)/2))?dt=et:wt=et,(xt=$>=(it=(Ft+St)/2))?Ft=it:St=it,ut=nt,!(nt=nt[zt=xt<<1|st]))return ut[zt]=yt,V;if(Tt=+V._x.call(null,nt.data),Nt=+V._y.call(null,nt.data),q===Tt&&$===Nt)return yt.next=nt,ut?ut[zt]=yt:V._root=yt,V;do ut=ut?ut[zt]=new Array(4):V._root=new Array(4),(st=q>=(et=(dt+wt)/2))?dt=et:wt=et,(xt=$>=(it=(Ft+St)/2))?Ft=it:St=it;while((zt=xt<<1|st)===(Wt=(Nt>=it)<<1|Tt>=et));return ut[Wt]=nt,ut[zt]=yt,V}function w(V){var q,$,J=V.length,ut,nt,yt=new Array(J),dt=new Array(J),Ft=1/0,wt=1/0,St=-1/0,et=-1/0;for($=0;$<J;++$)isNaN(ut=+this._x.call(null,q=V[$]))||isNaN(nt=+this._y.call(null,q))||(yt[$]=ut,dt[$]=nt,ut<Ft&&(Ft=ut),ut>St&&(St=ut),nt<wt&&(wt=nt),nt>et&&(et=nt));if(Ft>St||wt>et)return this;for(this.cover(Ft,wt).cover(St,et),$=0;$<J;++$)R(this,yt[$],dt[$],V[$]);return this}function M(V,q){if(isNaN(V=+V)||isNaN(q=+q))return this;var $=this._x0,J=this._y0,ut=this._x1,nt=this._y1;if(isNaN($))ut=($=Math.floor(V))+1,nt=(J=Math.floor(q))+1;else{for(var yt=ut-$||1,dt=this._root,Ft,wt;$>V||V>=ut||J>q||q>=nt;)switch(wt=(q<J)<<1|V<$,Ft=new Array(4),Ft[wt]=dt,dt=Ft,yt*=2,wt){case 0:ut=$+yt,nt=J+yt;break;case 1:$=ut-yt,nt=J+yt;break;case 2:ut=$+yt,J=nt-yt;break;case 3:$=ut-yt,J=nt-yt;break}this._root&&this._root.length&&(this._root=dt)}return this._x0=$,this._y0=J,this._x1=ut,this._y1=nt,this}function P(){var V=[];return this.visit(function(q){if(!q.length)do V.push(q.data);while(q=q.next)}),V}function L(V){return arguments.length?this.cover(+V[0][0],+V[0][1]).cover(+V[1][0],+V[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function p(V,q,$,J,ut){this.node=V,this.x0=q,this.y0=$,this.x1=J,this.y1=ut}function b(V,q,$){var J,ut=this._x0,nt=this._y0,yt,dt,Ft,wt,St=this._x1,et=this._y1,it=[],Tt=this._root,Nt,st;for(Tt&&it.push(new p(Tt,ut,nt,St,et)),$==null?$=1/0:(ut=V-$,nt=q-$,St=V+$,et=q+$,$*=$);Nt=it.pop();)if(!(!(Tt=Nt.node)||(yt=Nt.x0)>St||(dt=Nt.y0)>et||(Ft=Nt.x1)<ut||(wt=Nt.y1)<nt))if(Tt.length){var xt=(yt+Ft)/2,zt=(dt+wt)/2;it.push(new p(Tt[3],xt,zt,Ft,wt),new p(Tt[2],yt,zt,xt,wt),new p(Tt[1],xt,dt,Ft,zt),new p(Tt[0],yt,dt,xt,zt)),(st=(q>=zt)<<1|V>=xt)&&(Nt=it[it.length-1],it[it.length-1]=it[it.length-1-st],it[it.length-1-st]=Nt)}else{var Wt=V-+this._x.call(null,Tt.data),_t=q-+this._y.call(null,Tt.data),Xt=Wt*Wt+_t*_t;if(Xt<$){var te=Math.sqrt($=Xt);ut=V-te,nt=q-te,St=V+te,et=q+te,J=Tt.data}}return J}function S(V){if(isNaN(St=+this._x.call(null,V))||isNaN(et=+this._y.call(null,V)))return this;var q,$=this._root,J,ut,nt,yt=this._x0,dt=this._y0,Ft=this._x1,wt=this._y1,St,et,it,Tt,Nt,st,xt,zt;if(!$)return this;if($.length)for(;;){if((Nt=St>=(it=(yt+Ft)/2))?yt=it:Ft=it,(st=et>=(Tt=(dt+wt)/2))?dt=Tt:wt=Tt,q=$,!($=$[xt=st<<1|Nt]))return this;if(!$.length)break;(q[xt+1&3]||q[xt+2&3]||q[xt+3&3])&&(J=q,zt=xt)}for(;$.data!==V;)if(ut=$,!($=$.next))return this;return(nt=$.next)&&delete $.next,ut?(nt?ut.next=nt:delete ut.next,this):q?(nt?q[xt]=nt:delete q[xt],($=q[0]||q[1]||q[2]||q[3])&&$===(q[3]||q[2]||q[1]||q[0])&&!$.length&&(J?J[zt]=$:this._root=$),this):(this._root=nt,this)}function x(V){for(var q=0,$=V.length;q<$;++q)this.remove(V[q]);return this}function g(){return this._root}function T(){var V=0;return this.visit(function(q){if(!q.length)do++V;while(q=q.next)}),V}function E(V){var q=[],$,J=this._root,ut,nt,yt,dt,Ft;for(J&&q.push(new p(J,this._x0,this._y0,this._x1,this._y1));$=q.pop();)if(!V(J=$.node,nt=$.x0,yt=$.y0,dt=$.x1,Ft=$.y1)&&J.length){var wt=(nt+dt)/2,St=(yt+Ft)/2;(ut=J[3])&&q.push(new p(ut,wt,St,dt,Ft)),(ut=J[2])&&q.push(new p(ut,nt,St,wt,Ft)),(ut=J[1])&&q.push(new p(ut,wt,yt,dt,St)),(ut=J[0])&&q.push(new p(ut,nt,yt,wt,St))}return this}function O(V){var q=[],$=[],J;for(this._root&&q.push(new p(this._root,this._x0,this._y0,this._x1,this._y1));J=q.pop();){var ut=J.node;if(ut.length){var nt,yt=J.x0,dt=J.y0,Ft=J.x1,wt=J.y1,St=(yt+Ft)/2,et=(dt+wt)/2;(nt=ut[0])&&q.push(new p(nt,yt,dt,St,et)),(nt=ut[1])&&q.push(new p(nt,St,dt,Ft,et)),(nt=ut[2])&&q.push(new p(nt,yt,et,St,wt)),(nt=ut[3])&&q.push(new p(nt,St,et,Ft,wt))}$.push(J)}for(;J=$.pop();)V(J.node,J.x0,J.y0,J.x1,J.y1);return this}function k(V){return V[0]}function y(V){return arguments.length?(this._x=V,this):this._x}function l(V){return V[1]}function U(V){return arguments.length?(this._y=V,this):this._y}function X(V,q,$){var J=new F(q==null?k:q,$==null?l:$,NaN,NaN,NaN,NaN);return V==null?J:J.addAll(V)}function F(V,q,$,J,ut,nt){this._x=V,this._y=q,this._x0=$,this._y0=J,this._x1=ut,this._y1=nt,this._root=void 0}function W(V){for(var q={data:V.data},$=q;V=V.next;)$=$.next={data:V.data};return q}var j=X.prototype=F.prototype;j.copy=function(){var V=new F(this._x,this._y,this._x0,this._y0,this._x1,this._y1),q=this._root,$,J;if(!q)return V;if(!q.length)return V._root=W(q),V;for($=[{source:q,target:V._root=new Array(4)}];q=$.pop();)for(var ut=0;ut<4;++ut)(J=q.source[ut])&&(J.length?$.push({source:J,target:q.target[ut]=new Array(4)}):q.target[ut]=W(J));return V},j.add=m,j.addAll=w,j.cover=M,j.data=P,j.extent=L,j.find=b,j.remove=S,j.removeAll=x,j.root=g,j.size=T,j.visit=E,j.visitAfter=O,j.x=y,j.y=U},631969:function(We,G,_){"use strict";_.r(G),_.d(G,{BRIDGE_GRAPH_NAME:function(){return P},GraphType:function(){return b},HierarchyNodeType:function(){return S},InclusionType:function(){return p},LAYOUT_CONFIG:function(){return m},NodeType:function(){return L},ROOT_NAME:function(){return M},buildGraph:function(){return Jr},flatGraph:function(){return On},getEdges:function(){return Rn},mergeConfig:function(){return R}});const m={graph:{meta:{rankDir:"TB",nodeSep:50,rankSep:50,edgeSep:5,align:void 0}},subScene:{meta:{paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20,labelHeight:20}},nodeSize:{meta:{width:100,maxLabelWidth:0,height:20},node:{width:80,height:20,labelOffset:10,maxLabelWidth:40},bridge:{width:5,height:5,radius:2,labelOffset:0}}};function R(v={},N=m){var K,ot,pt,bt;const At=JSON.parse(JSON.stringify(N)),Rt=((K=v==null?void 0:v.graph)===null||K===void 0?void 0:K.meta)||{},Zt=((ot=v==null?void 0:v.subScene)===null||ot===void 0?void 0:ot.meta)||{},se=((pt=v==null?void 0:v.nodeSize)===null||pt===void 0?void 0:pt.meta)||{},_e=((bt=v==null?void 0:v.nodeSize)===null||bt===void 0?void 0:bt.node)||{},Ee=At.nodeSize.bridge;return{graph:{meta:Object.assign(At.graph.meta,Rt)},subScene:{meta:Object.assign(At.subScene.meta,Zt)},nodeSize:{meta:Object.assign(At.nodeSize.meta,se),node:Object.assign(At.nodeSize.node,_e),bridge:Ee}}}function w(v){return`\u25EC${v}\u25EC`}const M=w("ROOT"),P=w("BRIDGE_GRAPH");var L,p,b,S;(function(v){v[v.META=0]="META",v[v.NODE=1]="NODE",v[v.BRIDGE=2]="BRIDGE"})(L||(L={})),function(v){v[v.INCLUDE=0]="INCLUDE",v[v.EXCLUDE=1]="EXCLUDE",v[v.UNSPECIFIED=2]="UNSPECIFIED"}(p||(p={})),function(v){v[v.META=0]="META",v[v.CORE=1]="CORE",v[v.BRIDGE=2]="BRIDGE"}(b||(b={})),function(v){v[v.META=0]="META",v[v.OP=1]="OP",v[v.SERIES=2]="SERIES"}(S||(S={}));var x=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof _.g!="undefined"?_.g:typeof self!="undefined"?self:{};function g(v,N){return v(N={exports:{}},N.exports),N.exports}var T=function(){this.__data__=[],this.size=0},E=function(v,N){return v===N||v!=v&&N!=N},O=function(v,N){for(var K=v.length;K--;)if(E(v[K][0],N))return K;return-1},k=Array.prototype.splice,y=function(v){var N=this.__data__,K=O(N,v);return!(K<0)&&(K==N.length-1?N.pop():k.call(N,K,1),--this.size,!0)},l=function(v){var N=this.__data__,K=O(N,v);return K<0?void 0:N[K][1]},U=function(v){return O(this.__data__,v)>-1},X=function(v,N){var K=this.__data__,ot=O(K,v);return ot<0?(++this.size,K.push([v,N])):K[ot][1]=N,this};function F(v){var N=-1,K=v==null?0:v.length;for(this.clear();++N<K;){var ot=v[N];this.set(ot[0],ot[1])}}F.prototype.clear=T,F.prototype.delete=y,F.prototype.get=l,F.prototype.has=U,F.prototype.set=X;var W=F,j=function(){this.__data__=new W,this.size=0},V=function(v){var N=this.__data__,K=N.delete(v);return this.size=N.size,K},q=function(v){return this.__data__.get(v)},$=function(v){return this.__data__.has(v)},J=typeof x=="object"&&x&&x.Object===Object&&x,ut=typeof self=="object"&&self&&self.Object===Object&&self,nt=J||ut||Function("return this")(),yt=nt.Symbol,dt=Object.prototype,Ft=dt.hasOwnProperty,wt=dt.toString,St=yt?yt.toStringTag:void 0,et=function(v){var N=Ft.call(v,St),K=v[St];try{v[St]=void 0;var ot=!0}catch(bt){}var pt=wt.call(v);return ot&&(N?v[St]=K:delete v[St]),pt},it=Object.prototype.toString,Tt=function(v){return it.call(v)},Nt=yt?yt.toStringTag:void 0,st=function(v){return v==null?v===void 0?"[object Undefined]":"[object Null]":Nt&&Nt in Object(v)?et(v):Tt(v)},xt=function(v){var N=typeof v;return v!=null&&(N=="object"||N=="function")},zt,Wt=function(v){if(!xt(v))return!1;var N=st(v);return N=="[object Function]"||N=="[object GeneratorFunction]"||N=="[object AsyncFunction]"||N=="[object Proxy]"},_t=nt["__core-js_shared__"],Xt=(zt=/[^.]+$/.exec(_t&&_t.keys&&_t.keys.IE_PROTO||""))?"Symbol(src)_1."+zt:"",te=function(v){return!!Xt&&Xt in v},ue=Function.prototype.toString,fe=function(v){if(v!=null){try{return ue.call(v)}catch(N){}try{return v+""}catch(N){}}return""},Gt=/^\[object .+?Constructor\]$/,ae=Function.prototype,Ne=Object.prototype,ee=ae.toString,de=Ne.hasOwnProperty,ze=RegExp("^"+ee.call(de).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),be=function(v){return!(!xt(v)||te(v))&&(Wt(v)?ze:Gt).test(fe(v))},ke=function(v,N){return v==null?void 0:v[N]},he=function(v,N){var K=ke(v,N);return be(K)?K:void 0},vt=he(nt,"Map"),ie=he(Object,"create"),Pe=function(){this.__data__=ie?ie(null):{},this.size=0},qe=function(v){var N=this.has(v)&&delete this.__data__[v];return this.size-=N?1:0,N},Qe=Object.prototype.hasOwnProperty,lr=function(v){var N=this.__data__;if(ie){var K=N[v];return K==="__lodash_hash_undefined__"?void 0:K}return Qe.call(N,v)?N[v]:void 0},fr=Object.prototype.hasOwnProperty,kr=function(v){var N=this.__data__;return ie?N[v]!==void 0:fr.call(N,v)},En=function(v,N){var K=this.__data__;return this.size+=this.has(v)?0:1,K[v]=ie&&N===void 0?"__lodash_hash_undefined__":N,this};function fn(v){var N=-1,K=v==null?0:v.length;for(this.clear();++N<K;){var ot=v[N];this.set(ot[0],ot[1])}}fn.prototype.clear=Pe,fn.prototype.delete=qe,fn.prototype.get=lr,fn.prototype.has=kr,fn.prototype.set=En;var Vr=fn,Je=function(){this.size=0,this.__data__={hash:new Vr,map:new(vt||W),string:new Vr}},dr=function(v){var N=typeof v;return N=="string"||N=="number"||N=="symbol"||N=="boolean"?v!=="__proto__":v===null},nr=function(v,N){var K=v.__data__;return dr(N)?K[typeof N=="string"?"string":"hash"]:K.map},oe=function(v){var N=nr(this,v).delete(v);return this.size-=N?1:0,N},Te=function(v){return nr(this,v).get(v)},Lr=function(v){return nr(this,v).has(v)},Nr=function(v,N){var K=nr(this,v),ot=K.size;return K.set(v,N),this.size+=K.size==ot?0:1,this};function ln(v){var N=-1,K=v==null?0:v.length;for(this.clear();++N<K;){var ot=v[N];this.set(ot[0],ot[1])}}ln.prototype.clear=Je,ln.prototype.delete=oe,ln.prototype.get=Te,ln.prototype.has=Lr,ln.prototype.set=Nr;var en=ln,Dr=function(v,N){var K=this.__data__;if(K instanceof W){var ot=K.__data__;if(!vt||ot.length<199)return ot.push([v,N]),this.size=++K.size,this;K=this.__data__=new en(ot)}return K.set(v,N),this.size=K.size,this};function Fr(v){var N=this.__data__=new W(v);this.size=N.size}Fr.prototype.clear=j,Fr.prototype.delete=V,Fr.prototype.get=q,Fr.prototype.has=$,Fr.prototype.set=Dr;var Kr=Fr,an=function(v,N){for(var K=-1,ot=v==null?0:v.length;++K<ot&&N(v[K],K,v)!==!1;);return v},yn=function(){try{var v=he(Object,"defineProperty");return v({},"",{}),v}catch(N){}}(),bn=function(v,N,K){N=="__proto__"&&yn?yn(v,N,{configurable:!0,enumerable:!0,value:K,writable:!0}):v[N]=K},tt=Object.prototype.hasOwnProperty,tr=function(v,N,K){var ot=v[N];tt.call(v,N)&&E(ot,K)&&(K!==void 0||N in v)||bn(v,N,K)},Kt=function(v,N,K,ot){var pt=!K;K||(K={});for(var bt=-1,At=N.length;++bt<At;){var Rt=N[bt],Zt=ot?ot(K[Rt],v[Rt],Rt,K,v):void 0;Zt===void 0&&(Zt=v[Rt]),pt?bn(K,Rt,Zt):tr(K,Rt,Zt)}return K},$t=function(v,N){for(var K=-1,ot=Array(v);++K<v;)ot[K]=N(K);return ot},Et=function(v){return v!=null&&typeof v=="object"},we=function(v){return Et(v)&&st(v)=="[object Arguments]"},Dt=Object.prototype,Vt=Dt.hasOwnProperty,ht=Dt.propertyIsEnumerable,kt=we(function(){return arguments}())?we:function(v){return Et(v)&&Vt.call(v,"callee")&&!ht.call(v,"callee")},Q=Array.isArray,at=function(){return!1},B=g(function(v,N){var K=N&&!N.nodeType&&N,ot=K&&v&&!v.nodeType&&v,pt=ot&&ot.exports===K?nt.Buffer:void 0,bt=(pt?pt.isBuffer:void 0)||at;v.exports=bt}),C=/^(?:0|[1-9]\d*)$/,I=function(v,N){var K=typeof v;return!!(N=N==null?9007199254740991:N)&&(K=="number"||K!="symbol"&&C.test(v))&&v>-1&&v%1==0&&v<N},H=function(v){return typeof v=="number"&&v>-1&&v%1==0&&v<=9007199254740991},mt={};mt["[object Float32Array]"]=mt["[object Float64Array]"]=mt["[object Int8Array]"]=mt["[object Int16Array]"]=mt["[object Int32Array]"]=mt["[object Uint8Array]"]=mt["[object Uint8ClampedArray]"]=mt["[object Uint16Array]"]=mt["[object Uint32Array]"]=!0,mt["[object Arguments]"]=mt["[object Array]"]=mt["[object ArrayBuffer]"]=mt["[object Boolean]"]=mt["[object DataView]"]=mt["[object Date]"]=mt["[object Error]"]=mt["[object Function]"]=mt["[object Map]"]=mt["[object Number]"]=mt["[object Object]"]=mt["[object RegExp]"]=mt["[object Set]"]=mt["[object String]"]=mt["[object WeakMap]"]=!1;var Pt=function(v){return Et(v)&&H(v.length)&&!!mt[st(v)]},Lt=function(v){return function(N){return v(N)}},Jt=g(function(v,N){var K=N&&!N.nodeType&&N,ot=K&&v&&!v.nodeType&&v,pt=ot&&ot.exports===K&&J.process,bt=function(){try{var At=ot&&ot.require&&ot.require("util").types;return At||pt&&pt.binding&&pt.binding("util")}catch(Rt){}}();v.exports=bt}),Oe=Jt&&Jt.isTypedArray,ye=Oe?Lt(Oe):Pt,Ze=Object.prototype.hasOwnProperty,wr=function(v,N){var K=Q(v),ot=!K&&kt(v),pt=!K&&!ot&&B(v),bt=!K&&!ot&&!pt&&ye(v),At=K||ot||pt||bt,Rt=At?$t(v.length,String):[],Zt=Rt.length;for(var se in v)!N&&!Ze.call(v,se)||At&&(se=="length"||pt&&(se=="offset"||se=="parent")||bt&&(se=="buffer"||se=="byteLength"||se=="byteOffset")||I(se,Zt))||Rt.push(se);return Rt},er=Object.prototype,Ur=function(v){var N=v&&v.constructor;return v===(typeof N=="function"&&N.prototype||er)},xn=function(v,N){return function(K){return v(N(K))}},rr=xn(Object.keys,Object),xr=Object.prototype.hasOwnProperty,Wr=function(v){if(!Ur(v))return rr(v);var N=[];for(var K in Object(v))xr.call(v,K)&&K!="constructor"&&N.push(K);return N},Gr=function(v){return v!=null&&H(v.length)&&!Wt(v)},ce=function(v){return Gr(v)?wr(v):Wr(v)},Yt=function(v,N){return v&&Kt(N,ce(N),v)},ge=function(v){var N=[];if(v!=null)for(var K in Object(v))N.push(K);return N},Ie=Object.prototype.hasOwnProperty,xe=function(v){if(!xt(v))return ge(v);var N=Ur(v),K=[];for(var ot in v)(ot!="constructor"||!N&&Ie.call(v,ot))&&K.push(ot);return K},Ye=function(v){return Gr(v)?wr(v,!0):xe(v)},gr=function(v,N){return v&&Kt(N,Ye(N),v)},Mr=g(function(v,N){var K=N&&!N.nodeType&&N,ot=K&&v&&!v.nodeType&&v,pt=ot&&ot.exports===K?nt.Buffer:void 0,bt=pt?pt.allocUnsafe:void 0;v.exports=function(At,Rt){if(Rt)return At.slice();var Zt=At.length,se=bt?bt(Zt):new At.constructor(Zt);return At.copy(se),se}}),vn=function(v,N){var K=-1,ot=v.length;for(N||(N=Array(ot));++K<ot;)N[K]=v[K];return N},Wn=function(v,N){for(var K=-1,ot=v==null?0:v.length,pt=0,bt=[];++K<ot;){var At=v[K];N(At,K,v)&&(bt[pt++]=At)}return bt},Sn=function(){return[]},ea=Object.prototype.propertyIsEnumerable,wn=Object.getOwnPropertySymbols,Hn=wn?function(v){return v==null?[]:(v=Object(v),Wn(wn(v),function(N){return ea.call(v,N)}))}:Sn,la=function(v,N){return Kt(v,Hn(v),N)},ba=function(v,N){for(var K=-1,ot=N.length,pt=v.length;++K<ot;)v[pt+K]=N[K];return v},xa=xn(Object.getPrototypeOf,Object),Yi=Object.getOwnPropertySymbols?function(v){for(var N=[];v;)ba(N,Hn(v)),v=xa(v);return N}:Sn,ri=function(v,N){return Kt(v,Yi(v),N)},ti=function(v,N,K){var ot=N(v);return Q(v)?ot:ba(ot,K(v))},Mi=function(v){return ti(v,ce,Hn)},Vi=function(v){return ti(v,Ye,Yi)},ao=he(nt,"DataView"),io=he(nt,"Promise"),wa=he(nt,"Set"),oo=he(nt,"WeakMap"),To=fe(ao),ii=fe(vt),Xi=fe(io),so=fe(wa),zo=fe(oo),ro=st;(ao&&ro(new ao(new ArrayBuffer(1)))!="[object DataView]"||vt&&ro(new vt)!="[object Map]"||io&&ro(io.resolve())!="[object Promise]"||wa&&ro(new wa)!="[object Set]"||oo&&ro(new oo)!="[object WeakMap]")&&(ro=function(v){var N=st(v),K=N=="[object Object]"?v.constructor:void 0,ot=K?fe(K):"";if(ot)switch(ot){case To:return"[object DataView]";case ii:return"[object Map]";case Xi:return"[object Promise]";case so:return"[object Set]";case zo:return"[object WeakMap]"}return N});var vo=ro,Ao=Object.prototype.hasOwnProperty,Go=function(v){var N=v.length,K=new v.constructor(N);return N&&typeof v[0]=="string"&&Ao.call(v,"index")&&(K.index=v.index,K.input=v.input),K},Ai=nt.Uint8Array,$i=function(v){var N=new v.constructor(v.byteLength);return new Ai(N).set(new Ai(v)),N},oa=function(v,N){var K=N?$i(v.buffer):v.buffer;return new v.constructor(K,v.byteOffset,v.byteLength)},Qt=/\w*$/,ve=function(v){var N=new v.constructor(v.source,Qt.exec(v));return N.lastIndex=v.lastIndex,N},Ge=yt?yt.prototype:void 0,pr=Ge?Ge.valueOf:void 0,Xr=function(v){return pr?Object(pr.call(v)):{}},Yr=function(v,N){var K=N?$i(v.buffer):v.buffer;return new v.constructor(K,v.byteOffset,v.length)},Pr=function(v,N,K){var ot=v.constructor;switch(N){case"[object ArrayBuffer]":return $i(v);case"[object Boolean]":case"[object Date]":return new ot(+v);case"[object DataView]":return oa(v,K);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Yr(v,K);case"[object Map]":return new ot;case"[object Number]":case"[object String]":return new ot(v);case"[object RegExp]":return ve(v);case"[object Set]":return new ot;case"[object Symbol]":return Xr(v)}},cn=Object.create,Mn=function(){function v(){}return function(N){if(!xt(N))return{};if(cn)return cn(N);v.prototype=N;var K=new v;return v.prototype=void 0,K}}(),Bn=function(v){return typeof v.constructor!="function"||Ur(v)?{}:Mn(xa(v))},sa=function(v){return Et(v)&&vo(v)=="[object Map]"},qn=Jt&&Jt.isMap,ga=qn?Lt(qn):sa,ya=function(v){return Et(v)&&vo(v)=="[object Set]"},vi=Jt&&Jt.isSet,Sa=vi?Lt(vi):ya,ua={};ua["[object Arguments]"]=ua["[object Array]"]=ua["[object ArrayBuffer]"]=ua["[object DataView]"]=ua["[object Boolean]"]=ua["[object Date]"]=ua["[object Float32Array]"]=ua["[object Float64Array]"]=ua["[object Int8Array]"]=ua["[object Int16Array]"]=ua["[object Int32Array]"]=ua["[object Map]"]=ua["[object Number]"]=ua["[object Object]"]=ua["[object RegExp]"]=ua["[object Set]"]=ua["[object String]"]=ua["[object Symbol]"]=ua["[object Uint8Array]"]=ua["[object Uint8ClampedArray]"]=ua["[object Uint16Array]"]=ua["[object Uint32Array]"]=!0,ua["[object Error]"]=ua["[object Function]"]=ua["[object WeakMap]"]=!1;var fi=function v(N,K,ot,pt,bt,At){var Rt,Zt=1&K,se=2&K,_e=4&K;if(ot&&(Rt=bt?ot(N,pt,bt,At):ot(N)),Rt!==void 0)return Rt;if(!xt(N))return N;var Ee=Q(N);if(Ee){if(Rt=Go(N),!Zt)return vn(N,Rt)}else{var He=vo(N),br=He=="[object Function]"||He=="[object GeneratorFunction]";if(B(N))return Mr(N,Zt);if(He=="[object Object]"||He=="[object Arguments]"||br&&!bt){if(Rt=se||br?{}:Bn(N),!Zt)return se?ri(N,gr(Rt,N)):la(N,Yt(Rt,N))}else{if(!ua[He])return bt?N:{};Rt=Pr(N,He,Zt)}}At||(At=new Kr);var rn=At.get(N);if(rn)return rn;At.set(N,Rt),Sa(N)?N.forEach(function(Ar){Rt.add(v(Ar,K,ot,Ar,N,At))}):ga(N)&&N.forEach(function(Ar,Or){Rt.set(Or,v(Ar,K,ot,Or,N,At))});var Cr=Ee?void 0:(_e?se?Vi:Mi:se?Ye:ce)(N);return an(Cr||N,function(Ar,Or){Cr&&(Ar=N[Or=Ar]),tr(Rt,Or,v(Ar,K,ot,Or,N,At))}),Rt},ei=function(v){return fi(v,4)},Ga=function(v){return function(){return v}},Ii=function(v){return function(N,K,ot){for(var pt=-1,bt=Object(N),At=ot(N),Rt=At.length;Rt--;){var Zt=At[v?Rt:++pt];if(K(bt[Zt],Zt,bt)===!1)break}return N}}(),yi=function(v,N){return v&&Ii(v,N,ce)},za=function(v,N){return function(K,ot){if(K==null)return K;if(!Gr(K))return v(K,ot);for(var pt=K.length,bt=N?pt:-1,At=Object(K);(N?bt--:++bt<pt)&&ot(At[bt],bt,At)!==!1;);return K}}(yi),Va=function(v){return v},Da=function(v){return typeof v=="function"?v:Va},Ri=function(v,N){return(Q(v)?an:za)(v,Da(N))},_i=Ri,ki=function(v,N){var K=[];return za(v,function(ot,pt,bt){N(ot,pt,bt)&&K.push(ot)}),K},uo=function(v){return this.__data__.set(v,"__lodash_hash_undefined__"),this},qi=function(v){return this.__data__.has(v)};function po(v){var N=-1,K=v==null?0:v.length;for(this.__data__=new en;++N<K;)this.add(v[N])}po.prototype.add=po.prototype.push=uo,po.prototype.has=qi;var es=po,rs=function(v,N){for(var K=-1,ot=v==null?0:v.length;++K<ot;)if(N(v[K],K,v))return!0;return!1},no=function(v,N){return v.has(N)},ni=function(v,N,K,ot,pt,bt){var At=1&K,Rt=v.length,Zt=N.length;if(Rt!=Zt&&!(At&&Zt>Rt))return!1;var se=bt.get(v),_e=bt.get(N);if(se&&_e)return se==N&&_e==v;var Ee=-1,He=!0,br=2&K?new es:void 0;for(bt.set(v,N),bt.set(N,v);++Ee<Rt;){var rn=v[Ee],Cr=N[Ee];if(ot)var Ar=At?ot(Cr,rn,Ee,N,v,bt):ot(rn,Cr,Ee,v,N,bt);if(Ar!==void 0){if(Ar)continue;He=!1;break}if(br){if(!rs(N,function(Or,Nn){if(!no(br,Nn)&&(rn===Or||pt(rn,Or,K,ot,bt)))return br.push(Nn)})){He=!1;break}}else if(rn!==Cr&&!pt(rn,Cr,K,ot,bt)){He=!1;break}}return bt.delete(v),bt.delete(N),He},zi=function(v){var N=-1,K=Array(v.size);return v.forEach(function(ot,pt){K[++N]=[pt,ot]}),K},fo=function(v){var N=-1,K=Array(v.size);return v.forEach(function(ot){K[++N]=ot}),K},Xa=yt?yt.prototype:void 0,go=Xa?Xa.valueOf:void 0,No=function(v,N,K,ot,pt,bt,At){switch(K){case"[object DataView]":if(v.byteLength!=N.byteLength||v.byteOffset!=N.byteOffset)return!1;v=v.buffer,N=N.buffer;case"[object ArrayBuffer]":return!(v.byteLength!=N.byteLength||!bt(new Ai(v),new Ai(N)));case"[object Boolean]":case"[object Date]":case"[object Number]":return E(+v,+N);case"[object Error]":return v.name==N.name&&v.message==N.message;case"[object RegExp]":case"[object String]":return v==N+"";case"[object Map]":var Rt=zi;case"[object Set]":var Zt=1&ot;if(Rt||(Rt=fo),v.size!=N.size&&!Zt)return!1;var se=At.get(v);if(se)return se==N;ot|=2,At.set(v,N);var _e=ni(Rt(v),Rt(N),ot,pt,bt,At);return At.delete(v),_e;case"[object Symbol]":if(go)return go.call(v)==go.call(N)}return!1},Hi=Object.prototype.hasOwnProperty,as=function(v,N,K,ot,pt,bt){var At=1&K,Rt=Mi(v),Zt=Rt.length;if(Zt!=Mi(N).length&&!At)return!1;for(var se=Zt;se--;){var _e=Rt[se];if(!(At?_e in N:Hi.call(N,_e)))return!1}var Ee=bt.get(v),He=bt.get(N);if(Ee&&He)return Ee==N&&He==v;var br=!0;bt.set(v,N),bt.set(N,v);for(var rn=At;++se<Zt;){var Cr=v[_e=Rt[se]],Ar=N[_e];if(ot)var Or=At?ot(Ar,Cr,_e,N,v,bt):ot(Cr,Ar,_e,v,N,bt);if(!(Or===void 0?Cr===Ar||pt(Cr,Ar,K,ot,bt):Or)){br=!1;break}rn||(rn=_e=="constructor")}if(br&&!rn){var Nn=v.constructor,jn=N.constructor;Nn==jn||!("constructor"in v)||!("constructor"in N)||typeof Nn=="function"&&Nn instanceof Nn&&typeof jn=="function"&&jn instanceof jn||(br=!1)}return bt.delete(v),bt.delete(N),br},Gi=Object.prototype.hasOwnProperty,Ro=function(v,N,K,ot,pt,bt){var At=Q(v),Rt=Q(N),Zt=At?"[object Array]":vo(v),se=Rt?"[object Array]":vo(N),_e=(Zt=Zt=="[object Arguments]"?"[object Object]":Zt)=="[object Object]",Ee=(se=se=="[object Arguments]"?"[object Object]":se)=="[object Object]",He=Zt==se;if(He&&B(v)){if(!B(N))return!1;At=!0,_e=!1}if(He&&!_e)return bt||(bt=new Kr),At||ye(v)?ni(v,N,K,ot,pt,bt):No(v,N,Zt,K,ot,pt,bt);if(!(1&K)){var br=_e&&Gi.call(v,"__wrapped__"),rn=Ee&&Gi.call(N,"__wrapped__");if(br||rn){var Cr=br?v.value():v,Ar=rn?N.value():N;return bt||(bt=new Kr),pt(Cr,Ar,K,ot,bt)}}return!!He&&(bt||(bt=new Kr),as(v,N,K,ot,pt,bt))},ss=function v(N,K,ot,pt,bt){return N===K||(N==null||K==null||!Et(N)&&!Et(K)?N!=N&&K!=K:Ro(N,K,ot,pt,v,bt))},Ss=function(v,N,K,ot){var pt=K.length,bt=pt,At=!ot;if(v==null)return!bt;for(v=Object(v);pt--;){var Rt=K[pt];if(At&&Rt[2]?Rt[1]!==v[Rt[0]]:!(Rt[0]in v))return!1}for(;++pt<bt;){var Zt=(Rt=K[pt])[0],se=v[Zt],_e=Rt[1];if(At&&Rt[2]){if(se===void 0&&!(Zt in v))return!1}else{var Ee=new Kr;if(ot)var He=ot(se,_e,Zt,v,N,Ee);if(!(He===void 0?ss(_e,se,3,ot,Ee):He))return!1}}return!0},mo=function(v){return v==v&&!xt(v)},us=function(v){for(var N=ce(v),K=N.length;K--;){var ot=N[K],pt=v[ot];N[K]=[ot,pt,mo(pt)]}return N},fs=function(v,N){return function(K){return K!=null&&K[v]===N&&(N!==void 0||v in Object(K))}},Is=function(v){var N=us(v);return N.length==1&&N[0][2]?fs(N[0][0],N[0][1]):function(K){return K===v||Ss(K,v,N)}},Aa=function(v){return typeof v=="symbol"||Et(v)&&st(v)=="[object Symbol]"},Ut=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Xe=/^\w*$/,cr=function(v,N){if(Q(v))return!1;var K=typeof v;return!(K!="number"&&K!="symbol"&&K!="boolean"&&v!=null&&!Aa(v))||Xe.test(v)||!Ut.test(v)||N!=null&&v in Object(N)};function _r(v,N){if(typeof v!="function"||N!=null&&typeof N!="function")throw new TypeError("Expected a function");var K=function(){var ot=arguments,pt=N?N.apply(this,ot):ot[0],bt=K.cache;if(bt.has(pt))return bt.get(pt);var At=v.apply(this,ot);return K.cache=bt.set(pt,At)||bt,At};return K.cache=new(_r.Cache||en),K}_r.Cache=en;var on=_r,_n=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$n=/\\(\\)?/g,qa=function(v){var N=on(v,function(ot){return K.size===500&&K.clear(),ot}),K=N.cache;return N}(function(v){var N=[];return v.charCodeAt(0)===46&&N.push(""),v.replace(_n,function(K,ot,pt,bt){N.push(pt?bt.replace($n,"$1"):ot||K)}),N}),Bi=function(v,N){for(var K=-1,ot=v==null?0:v.length,pt=Array(ot);++K<ot;)pt[K]=N(v[K],K,v);return pt},Oo=yt?yt.prototype:void 0,jo=Oo?Oo.toString:void 0,Rs=function v(N){if(typeof N=="string")return N;if(Q(N))return Bi(N,v)+"";if(Aa(N))return jo?jo.call(N):"";var K=N+"";return K=="0"&&1/N==-1/0?"-0":K},Qi=function(v){return v==null?"":Rs(v)},Io=function(v,N){return Q(v)?v:cr(v,N)?[v]:qa(Qi(v))},cs=function(v){if(typeof v=="string"||Aa(v))return v;var N=v+"";return N=="0"&&1/v==-1/0?"-0":N},ks=function(v,N){for(var K=0,ot=(N=Io(N,v)).length;v!=null&&K<ot;)v=v[cs(N[K++])];return K&&K==ot?v:void 0},ls=function(v,N,K){var ot=v==null?void 0:ks(v,N);return ot===void 0?K:ot},js=function(v,N){return v!=null&&N in Object(v)},Ks=function(v,N,K){for(var ot=-1,pt=(N=Io(N,v)).length,bt=!1;++ot<pt;){var At=cs(N[ot]);if(!(bt=v!=null&&K(v,At)))break;v=v[At]}return bt||++ot!=pt?bt:!!(pt=v==null?0:v.length)&&H(pt)&&I(At,pt)&&(Q(v)||kt(v))},Vs=function(v,N){return v!=null&&Ks(v,N,js)},hu=function(v,N){return cr(v)&&mo(N)?fs(cs(v),N):function(K){var ot=ls(K,v);return ot===void 0&&ot===N?Vs(K,v):ss(N,ot,3)}},ds=function(v){return function(N){return N==null?void 0:N[v]}},Ds=function(v){return function(N){return ks(N,v)}},Bs=function(v){return cr(v)?ds(cs(v)):Ds(v)},is=function(v){return typeof v=="function"?v:v==null?Va:typeof v=="object"?Q(v)?hu(v[0],v[1]):Is(v):Bs(v)},Eu=function(v,N){return(Q(v)?Wn:ki)(v,is(N))},wu=Object.prototype.hasOwnProperty,yo=function(v,N){return v!=null&&wu.call(v,N)},Vo=function(v,N){return v!=null&&Ks(v,N,yo)},os=Object.prototype.hasOwnProperty,h=function(v){if(v==null)return!0;if(Gr(v)&&(Q(v)||typeof v=="string"||typeof v.splice=="function"||B(v)||ye(v)||kt(v)))return!v.length;var N=vo(v);if(N=="[object Map]"||N=="[object Set]")return!v.size;if(Ur(v))return!Wr(v).length;for(var K in v)if(os.call(v,K))return!1;return!0},Y=function(v){return v===void 0},Mt=function(v,N){var K=-1,ot=Gr(v)?Array(v.length):[];return za(v,function(pt,bt,At){ot[++K]=N(pt,bt,At)}),ot},Bt=function(v,N){return(Q(v)?Bi:Mt)(v,is(N))},qt=function(v,N,K,ot){var pt=-1,bt=v==null?0:v.length;for(ot&&bt&&(K=v[++pt]);++pt<bt;)K=N(K,v[pt],pt,v);return K},pe=function(v,N,K,ot,pt){return pt(v,function(bt,At,Rt){K=ot?(ot=!1,bt):N(K,bt,At,Rt)}),K},me=function(v,N,K){var ot=Q(v)?qt:pe,pt=arguments.length<3;return ot(v,is(N),K,pt,za)},De=function(v){return typeof v=="string"||!Q(v)&&Et(v)&&st(v)=="[object String]"},Ue=ds("length"),$e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),mr=function(v){return $e.test(v)},qr="[\\ud800-\\udfff]",tn="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Qr="\\ud83c[\\udffb-\\udfff]",Tn="[^\\ud800-\\udfff]",Un="(?:\\ud83c[\\udde6-\\uddff]){2}",dn="[\\ud800-\\udbff][\\udc00-\\udfff]",ra="(?:"+tn+"|"+Qr+")?",Ha="[\\ufe0e\\ufe0f]?"+ra+("(?:\\u200d(?:"+[Tn,Un,dn].join("|")+")[\\ufe0e\\ufe0f]?"+ra+")*"),Za="(?:"+[Tn+tn+"?",tn,Un,dn,qr].join("|")+")",Ua=RegExp(Qr+"(?="+Qr+")|"+Za+Ha,"g"),Ma=function(v){for(var N=Ua.lastIndex=0;Ua.test(v);)++N;return N},Ra=function(v){return mr(v)?Ma(v):Ue(v)},Do=function(v){if(v==null)return 0;if(Gr(v))return De(v)?Ra(v):v.length;var N=vo(v);return N=="[object Map]"||N=="[object Set]"?v.size:Wr(v).length},Eo=function(v,N,K){var ot=Q(v),pt=ot||B(v)||ye(v);if(N=is(N),K==null){var bt=v&&v.constructor;K=pt?ot?new bt:[]:xt(v)&&Wt(bt)?Mn(xa(v)):{}}return(pt?an:yi)(v,function(At,Rt,Zt){return N(K,At,Rt,Zt)}),K},bo=yt?yt.isConcatSpreadable:void 0,wo=function(v){return Q(v)||kt(v)||!!(bo&&v&&v[bo])},So=function v(N,K,ot,pt,bt){var At=-1,Rt=N.length;for(ot||(ot=wo),bt||(bt=[]);++At<Rt;){var Zt=N[At];K>0&&ot(Zt)?K>1?v(Zt,K-1,ot,pt,bt):ba(bt,Zt):pt||(bt[bt.length]=Zt)}return bt},ko=function(v,N,K){switch(K.length){case 0:return v.call(N);case 1:return v.call(N,K[0]);case 2:return v.call(N,K[0],K[1]);case 3:return v.call(N,K[0],K[1],K[2])}return v.apply(N,K)},Bo=Math.max,ci=function(v,N,K){return N=Bo(N===void 0?v.length-1:N,0),function(){for(var ot=arguments,pt=-1,bt=Bo(ot.length-N,0),At=Array(bt);++pt<bt;)At[pt]=ot[N+pt];pt=-1;for(var Rt=Array(N+1);++pt<N;)Rt[pt]=ot[pt];return Rt[N]=K(At),ko(v,this,Rt)}},Fi=yn?function(v,N){return yn(v,"toString",{configurable:!0,enumerable:!1,value:Ga(N),writable:!0})}:Va,$s=Date.now,Fs=function(v){var N=0,K=0;return function(){var ot=$s(),pt=16-(ot-K);if(K=ot,pt>0){if(++N>=800)return arguments[0]}else N=0;return v.apply(void 0,arguments)}}(Fi),Ms=function(v,N){return Fs(ci(v,N,Va),v+"")},vu=function(v,N,K,ot){for(var pt=v.length,bt=K+(ot?1:-1);ot?bt--:++bt<pt;)if(N(v[bt],bt,v))return bt;return-1},Rf=function(v){return v!=v},bc=function(v,N,K){for(var ot=K-1,pt=v.length;++ot<pt;)if(v[ot]===N)return ot;return-1},xc=function(v,N,K){return N==N?bc(v,N,K):vu(v,Rf,K)},kf=function(v,N){return!!(v!=null&&v.length)&&xc(v,N,0)>-1},Zc=function(v,N,K){for(var ot=-1,pt=v==null?0:v.length;++ot<pt;)if(K(N,v[ot]))return!0;return!1},Bf=function(){},ju=wa&&1/fo(new wa([,-0]))[1]==1/0?function(v){return new wa(v)}:Bf,Vu=function(v,N,K){var ot=-1,pt=kf,bt=v.length,At=!0,Rt=[],Zt=Rt;if(K)At=!1,pt=Zc;else if(bt>=200){var se=N?null:ju(v);if(se)return fo(se);At=!1,pt=no,Zt=new es}else Zt=N?[]:Rt;t:for(;++ot<bt;){var _e=v[ot],Ee=N?N(_e):_e;if(_e=K||_e!==0?_e:0,At&&Ee==Ee){for(var He=Zt.length;He--;)if(Zt[He]===Ee)continue t;N&&Zt.push(Ee),Rt.push(_e)}else pt(Zt,Ee,K)||(Zt!==Rt&&Zt.push(Ee),Rt.push(_e))}return Rt},Ff=function(v){return Et(v)&&Gr(v)},Ec=Ms(function(v){return Vu(So(v,1,Ff,!0))}),Kc=function(v,N){return Bi(N,function(K){return v[K]})},pu,wc=function(v){return v==null?[]:Kc(v,ce(v))};try{pu={clone:ei,constant:Ga,each:_i,filter:Eu,has:Vo,isArray:Q,isEmpty:h,isFunction:Wt,isUndefined:Y,keys:ce,map:Bt,reduce:me,size:Do,transform:Eo,union:Ec,values:wc}}catch(v){}pu||(pu=window._);var ta=pu,Su=si;function si(v){this._isDirected=!ta.has(v,"directed")||v.directed,this._isMultigraph=!!ta.has(v,"multigraph")&&v.multigraph,this._isCompound=!!ta.has(v,"compound")&&v.compound,this._label=void 0,this._defaultNodeLabelFn=ta.constant(void 0),this._defaultEdgeLabelFn=ta.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function zf(v,N){v[N]?v[N]++:v[N]=1}function Mu(v,N){--v[N]||delete v[N]}function nu(v,N,K,ot){var pt=""+N,bt=""+K;if(!v&&pt>bt){var At=pt;pt=bt,bt=At}return pt+""+bt+""+(ta.isUndefined(ot)?"\0":ot)}function Gf(v,N,K,ot){var pt=""+N,bt=""+K;if(!v&&pt>bt){var At=pt;pt=bt,bt=At}var Rt={v:pt,w:bt};return ot&&(Rt.name=ot),Rt}function sf(v,N){return nu(v,N.v,N.w,N.name)}si.prototype._nodeCount=0,si.prototype._edgeCount=0,si.prototype.isDirected=function(){return this._isDirected},si.prototype.isMultigraph=function(){return this._isMultigraph},si.prototype.isCompound=function(){return this._isCompound},si.prototype.setGraph=function(v){return this._label=v,this},si.prototype.graph=function(){return this._label},si.prototype.setDefaultNodeLabel=function(v){return ta.isFunction(v)||(v=ta.constant(v)),this._defaultNodeLabelFn=v,this},si.prototype.nodeCount=function(){return this._nodeCount},si.prototype.nodes=function(){return ta.keys(this._nodes)},si.prototype.sources=function(){var v=this;return ta.filter(this.nodes(),function(N){return ta.isEmpty(v._in[N])})},si.prototype.sinks=function(){var v=this;return ta.filter(this.nodes(),function(N){return ta.isEmpty(v._out[N])})},si.prototype.setNodes=function(v,N){var K=arguments,ot=this;return ta.each(v,function(pt){K.length>1?ot.setNode(pt,N):ot.setNode(pt)}),this},si.prototype.setNode=function(v,N){return ta.has(this._nodes,v)?(arguments.length>1&&(this._nodes[v]=N),this):(this._nodes[v]=arguments.length>1?N:this._defaultNodeLabelFn(v),this._isCompound&&(this._parent[v]="\0",this._children[v]={},this._children["\0"][v]=!0),this._in[v]={},this._preds[v]={},this._out[v]={},this._sucs[v]={},++this._nodeCount,this)},si.prototype.node=function(v){return this._nodes[v]},si.prototype.hasNode=function(v){return ta.has(this._nodes,v)},si.prototype.removeNode=function(v){var N=this;if(ta.has(this._nodes,v)){var K=function(ot){N.removeEdge(N._edgeObjs[ot])};delete this._nodes[v],this._isCompound&&(this._removeFromParentsChildList(v),delete this._parent[v],ta.each(this.children(v),function(ot){N.setParent(ot)}),delete this._children[v]),ta.each(ta.keys(this._in[v]),K),delete this._in[v],delete this._preds[v],ta.each(ta.keys(this._out[v]),K),delete this._out[v],delete this._sucs[v],--this._nodeCount}return this},si.prototype.setParent=function(v,N){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(ta.isUndefined(N))N="\0";else{for(var K=N+="";!ta.isUndefined(K);K=this.parent(K))if(K===v)throw new Error("Setting "+N+" as parent of "+v+" would create a cycle");this.setNode(N)}return this.setNode(v),this._removeFromParentsChildList(v),this._parent[v]=N,this._children[N][v]=!0,this},si.prototype._removeFromParentsChildList=function(v){delete this._children[this._parent[v]][v]},si.prototype.parent=function(v){if(this._isCompound){var N=this._parent[v];if(N!=="\0")return N}},si.prototype.children=function(v){if(ta.isUndefined(v)&&(v="\0"),this._isCompound){var N=this._children[v];if(N)return ta.keys(N)}else{if(v==="\0")return this.nodes();if(this.hasNode(v))return[]}},si.prototype.predecessors=function(v){var N=this._preds[v];if(N)return ta.keys(N)},si.prototype.successors=function(v){var N=this._sucs[v];if(N)return ta.keys(N)},si.prototype.neighbors=function(v){var N=this.predecessors(v);if(N)return ta.union(N,this.successors(v))},si.prototype.isLeaf=function(v){return(this.isDirected()?this.successors(v):this.neighbors(v)).length===0},si.prototype.filterNodes=function(v){var N=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});N.setGraph(this.graph());var K=this;ta.each(this._nodes,function(bt,At){v(At)&&N.setNode(At,bt)}),ta.each(this._edgeObjs,function(bt){N.hasNode(bt.v)&&N.hasNode(bt.w)&&N.setEdge(bt,K.edge(bt))});var ot={};function pt(bt){var At=K.parent(bt);return At===void 0||N.hasNode(At)?(ot[bt]=At,At):At in ot?ot[At]:pt(At)}return this._isCompound&&ta.each(N.nodes(),function(bt){N.setParent(bt,pt(bt))}),N},si.prototype.setDefaultEdgeLabel=function(v){return ta.isFunction(v)||(v=ta.constant(v)),this._defaultEdgeLabelFn=v,this},si.prototype.edgeCount=function(){return this._edgeCount},si.prototype.edges=function(){return ta.values(this._edgeObjs)},si.prototype.setPath=function(v,N){var K=this,ot=arguments;return ta.reduce(v,function(pt,bt){return ot.length>1?K.setEdge(pt,bt,N):K.setEdge(pt,bt),bt}),this},si.prototype.setEdge=function(){var v,N,K,ot,pt=!1,bt=arguments[0];typeof bt=="object"&&bt!==null&&"v"in bt?(v=bt.v,N=bt.w,K=bt.name,arguments.length===2&&(ot=arguments[1],pt=!0)):(v=bt,N=arguments[1],K=arguments[3],arguments.length>2&&(ot=arguments[2],pt=!0)),v=""+v,N=""+N,ta.isUndefined(K)||(K=""+K);var At=nu(this._isDirected,v,N,K);if(ta.has(this._edgeLabels,At))return pt&&(this._edgeLabels[At]=ot),this;if(!ta.isUndefined(K)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(v),this.setNode(N),this._edgeLabels[At]=pt?ot:this._defaultEdgeLabelFn(v,N,K);var Rt=Gf(this._isDirected,v,N,K);return v=Rt.v,N=Rt.w,Object.freeze(Rt),this._edgeObjs[At]=Rt,zf(this._preds[N],v),zf(this._sucs[v],N),this._in[N][At]=Rt,this._out[v][At]=Rt,this._edgeCount++,this},si.prototype.edge=function(v,N,K){var ot=arguments.length===1?sf(this._isDirected,arguments[0]):nu(this._isDirected,v,N,K);return this._edgeLabels[ot]},si.prototype.hasEdge=function(v,N,K){var ot=arguments.length===1?sf(this._isDirected,arguments[0]):nu(this._isDirected,v,N,K);return ta.has(this._edgeLabels,ot)},si.prototype.removeEdge=function(v,N,K){var ot=arguments.length===1?sf(this._isDirected,arguments[0]):nu(this._isDirected,v,N,K),pt=this._edgeObjs[ot];return pt&&(v=pt.v,N=pt.w,delete this._edgeLabels[ot],delete this._edgeObjs[ot],Mu(this._preds[N],v),Mu(this._sucs[v],N),delete this._in[N][ot],delete this._out[v][ot],this._edgeCount--),this},si.prototype.inEdges=function(v,N){var K=this._in[v];if(K){var ot=ta.values(K);return N?ta.filter(ot,function(pt){return pt.v===N}):ot}},si.prototype.outEdges=function(v,N){var K=this._out[v];if(K){var ot=ta.values(K);return N?ta.filter(ot,function(pt){return pt.w===N}):ot}},si.prototype.nodeEdges=function(v,N){var K=this.inEdges(v,N);if(K)return K.concat(this.outEdges(v,N))};var uf={Graph:Su,version:"2.1.8"},Uf={write:function(v){var N={options:{directed:v.isDirected(),multigraph:v.isMultigraph(),compound:v.isCompound()},nodes:Sc(v),edges:zs(v)};return ta.isUndefined(v.graph())||(N.value=ta.clone(v.graph())),N},read:function(v){var N=new Su(v.options).setGraph(v.value);return ta.each(v.nodes,function(K){N.setNode(K.v,K.value),K.parent&&N.setParent(K.v,K.parent)}),ta.each(v.edges,function(K){N.setEdge({v:K.v,w:K.w,name:K.name},K.value)}),N}};function Sc(v){return ta.map(v.nodes(),function(N){var K=v.node(N),ot=v.parent(N),pt={v:N};return ta.isUndefined(K)||(pt.value=K),ta.isUndefined(ot)||(pt.parent=ot),pt})}function zs(v){return ta.map(v.edges(),function(N){var K=v.edge(N),ot={v:N.v,w:N.w};return ta.isUndefined(N.name)||(ot.name=N.name),ta.isUndefined(K)||(ot.value=K),ot})}var lt=function(v){var N,K={},ot=[];function pt(bt){ta.has(K,bt)||(K[bt]=!0,N.push(bt),ta.each(v.successors(bt),pt),ta.each(v.predecessors(bt),pt))}return ta.each(v.nodes(),function(bt){N=[],pt(bt),N.length&&ot.push(N)}),ot},It=jt;function jt(){this._arr=[],this._keyIndices={}}jt.prototype.size=function(){return this._arr.length},jt.prototype.keys=function(){return this._arr.map(function(v){return v.key})},jt.prototype.has=function(v){return ta.has(this._keyIndices,v)},jt.prototype.priority=function(v){var N=this._keyIndices[v];if(N!==void 0)return this._arr[N].priority},jt.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},jt.prototype.add=function(v,N){var K=this._keyIndices;if(v=String(v),!ta.has(K,v)){var ot=this._arr,pt=ot.length;return K[v]=pt,ot.push({key:v,priority:N}),this._decrease(pt),!0}return!1},jt.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var v=this._arr.pop();return delete this._keyIndices[v.key],this._heapify(0),v.key},jt.prototype.decrease=function(v,N){var K=this._keyIndices[v];if(N>this._arr[K].priority)throw new Error("New priority is greater than current priority. Key: "+v+" Old: "+this._arr[K].priority+" New: "+N);this._arr[K].priority=N,this._decrease(K)},jt.prototype._heapify=function(v){var N=this._arr,K=2*v,ot=K+1,pt=v;K<N.length&&(pt=N[K].priority<N[pt].priority?K:pt,ot<N.length&&(pt=N[ot].priority<N[pt].priority?ot:pt),pt!==v&&(this._swap(v,pt),this._heapify(pt)))},jt.prototype._decrease=function(v){for(var N,K=this._arr,ot=K[v].priority;v!==0&&!(K[N=v>>1].priority<ot);)this._swap(v,N),v=N},jt.prototype._swap=function(v,N){var K=this._arr,ot=this._keyIndices,pt=K[v],bt=K[N];K[v]=bt,K[N]=pt,ot[bt.key]=v,ot[pt.key]=N};var le=function(v,N,K,ot){return function(pt,bt,At,Rt){var Zt,se,_e={},Ee=new It,He=function(br){var rn=br.v!==Zt?br.v:br.w,Cr=_e[rn],Ar=At(br),Or=se.distance+Ar;if(Ar<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+br+" Weight: "+Ar);Or<Cr.distance&&(Cr.distance=Or,Cr.predecessor=Zt,Ee.decrease(rn,Or))};for(pt.nodes().forEach(function(br){var rn=br===bt?0:Number.POSITIVE_INFINITY;_e[br]={distance:rn},Ee.add(br,rn)});Ee.size()>0&&(Zt=Ee.removeMin(),(se=_e[Zt]).distance!==Number.POSITIVE_INFINITY);)Rt(Zt).forEach(He);return _e}(v,String(N),K||Ae,ot||function(pt){return v.outEdges(pt)})},Ae=ta.constant(1),vr=function(v,N,K){return ta.transform(v.nodes(),function(ot,pt){ot[pt]=le(v,pt,N,K)},{})},yr=function(v){var N=0,K=[],ot={},pt=[];function bt(At){var Rt=ot[At]={onStack:!0,lowlink:N,index:N++};if(K.push(At),v.successors(At).forEach(function(_e){ta.has(ot,_e)?ot[_e].onStack&&(Rt.lowlink=Math.min(Rt.lowlink,ot[_e].index)):(bt(_e),Rt.lowlink=Math.min(Rt.lowlink,ot[_e].lowlink))}),Rt.lowlink===Rt.index){var Zt,se=[];do Zt=K.pop(),ot[Zt].onStack=!1,se.push(Zt);while(At!==Zt);pt.push(se)}}return v.nodes().forEach(function(At){ta.has(ot,At)||bt(At)}),pt},Zr=function(v){return ta.filter(yr(v),function(N){return N.length>1||N.length===1&&v.hasEdge(N[0],N[0])})},Cn=function(v,N,K){return function(ot,pt,bt){var At={},Rt=ot.nodes();return Rt.forEach(function(Zt){At[Zt]={},At[Zt][Zt]={distance:0},Rt.forEach(function(se){Zt!==se&&(At[Zt][se]={distance:Number.POSITIVE_INFINITY})}),bt(Zt).forEach(function(se){var _e=se.v===Zt?se.w:se.v,Ee=pt(se);At[Zt][_e]={distance:Ee,predecessor:Zt}})}),Rt.forEach(function(Zt){var se=At[Zt];Rt.forEach(function(_e){var Ee=At[_e];Rt.forEach(function(He){var br=Ee[Zt],rn=se[He],Cr=Ee[He],Ar=br.distance+rn.distance;Ar<Cr.distance&&(Cr.distance=Ar,Cr.predecessor=rn.predecessor)})})}),At}(v,N||An,K||function(ot){return v.outEdges(ot)})},An=ta.constant(1),Vn=aa;function aa(v){var N={},K={},ot=[];if(ta.each(v.sinks(),function pt(bt){if(ta.has(K,bt))throw new Zn;ta.has(N,bt)||(K[bt]=!0,N[bt]=!0,ta.each(v.predecessors(bt),pt),delete K[bt],ot.push(bt))}),ta.size(N)!==v.nodeCount())throw new Zn;return ot}function Zn(){}aa.CycleException=Zn,Zn.prototype=new Error;var La=function(v,N,K){ta.isArray(N)||(N=[N]);var ot=(v.isDirected()?v.successors:v.neighbors).bind(v),pt=[],bt={};return ta.each(N,function(At){if(!v.hasNode(At))throw new Error("Graph does not have node: "+At);Qa(v,At,K==="post",bt,ot,pt)}),pt};function Qa(v,N,K,ot,pt,bt){ta.has(ot,N)||(ot[N]=!0,K||bt.push(N),ta.each(pt(N),function(At){Qa(v,At,K,ot,pt,bt)}),K&&bt.push(N))}var ka,Ca={Graph:uf.Graph,json:Uf,alg:{components:lt,dijkstra:le,dijkstraAll:vr,findCycles:Zr,floydWarshall:Cn,isAcyclic:function(v){try{Vn(v)}catch(N){if(N instanceof Vn.CycleException)return!1;throw N}return!0},postorder:function(v,N){return La(v,N,"post")},preorder:function(v,N){return La(v,N,"pre")},prim:function(v,N){var K,ot=new Su,pt={},bt=new It;function At(Zt){var se=Zt.v===K?Zt.w:Zt.v,_e=bt.priority(se);if(_e!==void 0){var Ee=N(Zt);Ee<_e&&(pt[se]=K,bt.decrease(se,Ee))}}if(v.nodeCount()===0)return ot;ta.each(v.nodes(),function(Zt){bt.add(Zt,Number.POSITIVE_INFINITY),ot.setNode(Zt)}),bt.decrease(v.nodes()[0],0);for(var Rt=!1;bt.size()>0;){if(K=bt.removeMin(),ta.has(pt,K))ot.setEdge(K,pt[K]);else{if(Rt)throw new Error("Input graph is not connected: "+v);Rt=!0}v.nodeEdges(K).forEach(At)}return ot},tarjan:yr,topsort:Vn},version:uf.version};try{ka=Ca}catch(v){}ka||(ka=window.graphlib);var Wa=ka,va=function(v){return fi(v,5)},Ka=function(v,N,K){if(!xt(K))return!1;var ot=typeof N;return!!(ot=="number"?Gr(K)&&I(N,K.length):ot=="string"&&N in K)&&E(K[N],v)},Ya=Object.prototype,ma=Ya.hasOwnProperty,ai=Ms(function(v,N){v=Object(v);var K=-1,ot=N.length,pt=ot>2?N[2]:void 0;for(pt&&Ka(N[0],N[1],pt)&&(ot=1);++K<ot;)for(var bt=N[K],At=Ye(bt),Rt=-1,Zt=At.length;++Rt<Zt;){var se=At[Rt],_e=v[se];(_e===void 0||E(_e,Ya[se])&&!ma.call(v,se))&&(v[se]=bt[se])}return v}),bi=function(v){return function(N,K,ot){var pt=Object(N);if(!Gr(N)){var bt=is(K);N=ce(N),K=function(Rt){return bt(pt[Rt],Rt,pt)}}var At=v(N,K,ot);return At>-1?pt[bt?N[At]:At]:void 0}},Di=/^\s+|\s+$/g,xi=/^[-+]0x[0-9a-f]+$/i,li=/^0b[01]+$/i,co=/^0o[0-7]+$/i,Mo=parseInt,lo=function(v){if(typeof v=="number")return v;if(Aa(v))return NaN;if(xt(v)){var N=typeof v.valueOf=="function"?v.valueOf():v;v=xt(N)?N+"":N}if(typeof v!="string")return v===0?v:+v;v=v.replace(Di,"");var K=li.test(v);return K||co.test(v)?Mo(v.slice(2),K?2:8):xi.test(v)?NaN:+v},Gs=function(v){return v?(v=lo(v))===1/0||v===-1/0?17976931348623157e292*(v<0?-1:1):v==v?v:0:v===0?v:0},qs=function(v){var N=Gs(v),K=N%1;return N==N?K?N-K:N:0},Us=Math.max,au=bi(function(v,N,K){var ot=v==null?0:v.length;if(!ot)return-1;var pt=K==null?0:qs(K);return pt<0&&(pt=Us(ot+pt,0)),vu(v,is(N),pt)}),_u=function(v){return v!=null&&v.length?So(v,1):[]},Hs=function(v,N){return v==null?v:Ii(v,Da(N),Ye)},Wf=function(v){var N=v==null?0:v.length;return N?v[N-1]:void 0},Yf=function(v,N){var K={};return N=is(N),yi(v,function(ot,pt,bt){bn(K,pt,N(ot,pt,bt))}),K},Cu=function(v,N,K){for(var ot=-1,pt=v.length;++ot<pt;){var bt=v[ot],At=N(bt);if(At!=null&&(Rt===void 0?At==At&&!Aa(At):K(At,Rt)))var Rt=At,Zt=bt}return Zt},ff=function(v,N){return v>N},Xf=function(v){return v&&v.length?Cu(v,Va,ff):void 0},Hu=function(v,N,K){(K!==void 0&&!E(v[N],K)||K===void 0&&!(N in v))&&bn(v,N,K)},Tu=Function.prototype,cf=Object.prototype,Zu=Tu.toString,lf=cf.hasOwnProperty,Qs=Zu.call(Object),Js=function(v){if(!Et(v)||st(v)!="[object Object]")return!1;var N=xa(v);if(N===null)return!0;var K=lf.call(N,"constructor")&&N.constructor;return typeof K=="function"&&K instanceof K&&Zu.call(K)==Qs},Ku=function(v,N){if((N!=="constructor"||typeof v[N]!="function")&&N!="__proto__")return v[N]},$u=function(v){return Kt(v,Ye(v))},df=function(v,N,K,ot,pt,bt,At){var Rt=Ku(v,K),Zt=Ku(N,K),se=At.get(Zt);if(se)Hu(v,K,se);else{var _e=bt?bt(Rt,Zt,K+"",v,N,At):void 0,Ee=_e===void 0;if(Ee){var He=Q(Zt),br=!He&&B(Zt),rn=!He&&!br&&ye(Zt);_e=Zt,He||br||rn?Q(Rt)?_e=Rt:Ff(Rt)?_e=vn(Rt):br?(Ee=!1,_e=Mr(Zt,!0)):rn?(Ee=!1,_e=Yr(Zt,!0)):_e=[]:Js(Zt)||kt(Zt)?(_e=Rt,kt(Rt)?_e=$u(Rt):xt(Rt)&&!Wt(Rt)||(_e=Bn(Zt))):Ee=!1}Ee&&(At.set(Zt,_e),pt(_e,Zt,ot,bt,At),At.delete(Zt)),Hu(v,K,_e)}},iu=function v(N,K,ot,pt,bt){N!==K&&Ii(K,function(At,Rt){if(bt||(bt=new Kr),xt(At))df(N,K,Rt,ot,v,pt,bt);else{var Zt=pt?pt(Ku(N,Rt),At,Rt+"",N,K,bt):void 0;Zt===void 0&&(Zt=At),Hu(N,Rt,Zt)}},Ye)},_s=function(v){return Ms(function(N,K){var ot=-1,pt=K.length,bt=pt>1?K[pt-1]:void 0,At=pt>2?K[2]:void 0;for(bt=v.length>3&&typeof bt=="function"?(pt--,bt):void 0,At&&Ka(K[0],K[1],At)&&(bt=pt<3?void 0:bt,pt=1),N=Object(N);++ot<pt;){var Rt=K[ot];Rt&&v(N,Rt,ot,bt)}return N})}(function(v,N,K){iu(v,N,K)}),kl=function(v,N){return v<N},hf=function(v){return v&&v.length?Cu(v,Va,kl):void 0},Bl=function(v,N){return v&&v.length?Cu(v,is(N),kl):void 0},vf=function(){return nt.Date.now()},$c=function(v,N,K,ot){if(!xt(v))return v;for(var pt=-1,bt=(N=Io(N,v)).length,At=bt-1,Rt=v;Rt!=null&&++pt<bt;){var Zt=cs(N[pt]),se=K;if(Zt==="__proto__"||Zt==="constructor"||Zt==="prototype")return v;if(pt!=At){var _e=Rt[Zt];(se=ot?ot(_e,Zt,Rt):void 0)===void 0&&(se=xt(_e)?_e:I(N[pt+1])?[]:{})}tr(Rt,Zt,se),Rt=Rt[Zt]}return v},qc=function(v,N,K){for(var ot=-1,pt=N.length,bt={};++ot<pt;){var At=N[ot],Rt=ks(v,At);K(Rt,At)&&$c(bt,Io(At,v),Rt)}return bt},Qc=function(v,N){return qc(v,N,function(K,ot){return Vs(v,ot)})},Mc=function(v){return Fs(ci(v,void 0,_u),v+"")}(function(v,N){return v==null?{}:Qc(v,N)}),_c=Math.ceil,Cc=Math.max,Fl=function(v,N,K,ot){for(var pt=-1,bt=Cc(_c((N-v)/(K||1)),0),At=Array(bt);bt--;)At[ot?bt:++pt]=v,v+=K;return At},Jc=function(v){return function(N,K,ot){return ot&&typeof ot!="number"&&Ka(N,K,ot)&&(K=ot=void 0),N=Gs(N),K===void 0?(K=N,N=0):K=Gs(K),ot=ot===void 0?N<K?1:-1:Gs(ot),Fl(N,K,ot,v)}}(),pf=function(v,N){var K=v.length;for(v.sort(N);K--;)v[K]=v[K].value;return v},tl=function(v,N){if(v!==N){var K=v!==void 0,ot=v===null,pt=v==v,bt=Aa(v),At=N!==void 0,Rt=N===null,Zt=N==N,se=Aa(N);if(!Rt&&!se&&!bt&&v>N||bt&&At&&Zt&&!Rt&&!se||ot&&At&&Zt||!K&&Zt||!pt)return 1;if(!ot&&!bt&&!se&&v<N||se&&K&&pt&&!ot&&!bt||Rt&&K&&pt||!At&&pt||!Zt)return-1}return 0},jf=function(v,N,K){for(var ot=-1,pt=v.criteria,bt=N.criteria,At=pt.length,Rt=K.length;++ot<At;){var Zt=tl(pt[ot],bt[ot]);if(Zt)return ot>=Rt?Zt:Zt*(K[ot]=="desc"?-1:1)}return v.index-N.index},el=function(v,N,K){N=N.length?Bi(N,function(bt){return Q(bt)?function(At){return ks(At,bt.length===1?bt[0]:bt)}:bt}):[Va];var ot=-1;N=Bi(N,Lt(is));var pt=Mt(v,function(bt,At,Rt){return{criteria:Bi(N,function(Zt){return Zt(bt)}),index:++ot,value:bt}});return pf(pt,function(bt,At){return jf(bt,At,K)})},gf=Ms(function(v,N){if(v==null)return[];var K=N.length;return K>1&&Ka(v,N[0],N[1])?N=[]:K>2&&Ka(N[0],N[1],N[2])&&(N=[N[0]]),el(v,So(N,1),[])}),Cs=0,rl=function(v){var N=++Cs;return Qi(v)+N},zl=function(v,N,K){for(var ot=-1,pt=v.length,bt=N.length,At={};++ot<pt;){var Rt=ot<bt?N[ot]:void 0;K(At,v[ot],Rt)}return At},mf,yf=function(v,N){return zl(v||[],N||[],tr)};try{mf={cloneDeep:va,constant:Ga,defaults:ai,each:_i,filter:Eu,find:au,flatten:_u,forEach:Ri,forIn:Hs,has:Vo,isUndefined:Y,last:Wf,map:Bt,mapValues:Yf,max:Xf,merge:_s,min:hf,minBy:Bl,now:vf,pick:Mc,range:Jc,reduce:me,sortBy:gf,uniqueId:rl,values:wc,zipObject:yf}}catch(v){}mf||(mf=window._);var ar=mf,Au=qu;function qu(){var v={};v._next=v._prev=v,this._sentinel=v}function Vf(v){v._prev._next=v._next,v._next._prev=v._prev,delete v._next,delete v._prev}function Gl(v,N){if(v!=="_next"&&v!=="_prev")return N}qu.prototype.dequeue=function(){var v=this._sentinel,N=v._prev;if(N!==v)return Vf(N),N},qu.prototype.enqueue=function(v){var N=this._sentinel;v._prev&&v._next&&Vf(v),v._next=N._next,N._next._prev=v,N._next=v,v._prev=N},qu.prototype.toString=function(){for(var v=[],N=this._sentinel,K=N._prev;K!==N;)v.push(JSON.stringify(K,Gl)),K=K._prev;return"["+v.join(", ")+"]"};var Ws=Wa.Graph,nl=function(v,N){if(v.nodeCount()<=1)return[];var K=function(pt,bt){var At=new Ws,Rt=0,Zt=0;ar.forEach(pt.nodes(),function(Ee){At.setNode(Ee,{v:Ee,in:0,out:0})}),ar.forEach(pt.edges(),function(Ee){var He=At.edge(Ee.v,Ee.w)||0,br=bt(Ee),rn=He+br;At.setEdge(Ee.v,Ee.w,rn),Zt=Math.max(Zt,At.node(Ee.v).out+=br),Rt=Math.max(Rt,At.node(Ee.w).in+=br)});var se=ar.range(Zt+Rt+3).map(function(){return new Au}),_e=Rt+1;return ar.forEach(At.nodes(),function(Ee){Zf(se,_e,At.node(Ee))}),{graph:At,buckets:se,zeroIdx:_e}}(v,N||Hf),ot=function(pt,bt,At){for(var Rt,Zt=[],se=bt[bt.length-1],_e=bt[0];pt.nodeCount();){for(;Rt=_e.dequeue();)Qu(pt,bt,At,Rt);for(;Rt=se.dequeue();)Qu(pt,bt,At,Rt);if(pt.nodeCount()){for(var Ee=bt.length-2;Ee>0;--Ee)if(Rt=bt[Ee].dequeue()){Zt=Zt.concat(Qu(pt,bt,At,Rt,!0));break}}}return Zt}(K.graph,K.buckets,K.zeroIdx);return ar.flatten(ar.map(ot,function(pt){return v.outEdges(pt.v,pt.w)}),!0)},Hf=ar.constant(1);function Qu(v,N,K,ot,pt){var bt=pt?[]:void 0;return ar.forEach(v.inEdges(ot.v),function(At){var Rt=v.edge(At),Zt=v.node(At.v);pt&&bt.push({v:At.v,w:At.w}),Zt.out-=Rt,Zf(N,K,Zt)}),ar.forEach(v.outEdges(ot.v),function(At){var Rt=v.edge(At),Zt=At.w,se=v.node(Zt);se.in-=Rt,Zf(N,K,se)}),v.removeNode(ot.v),bt}function Zf(v,N,K){K.out?K.in?v[K.out-K.in+N].enqueue(K):v[v.length-1].enqueue(K):v[0].enqueue(K)}var al={run:function(v){var N=v.graph().acyclicer==="greedy"?nl(v,function(K){return function(ot){return K.edge(ot).weight}}(v)):function(K){var ot=[],pt={},bt={};function At(Rt){ar.has(bt,Rt)||(bt[Rt]=!0,pt[Rt]=!0,ar.forEach(K.outEdges(Rt),function(Zt){ar.has(pt,Zt.w)?ot.push(Zt):At(Zt.w)}),delete pt[Rt])}return ar.forEach(K.nodes(),At),ot}(v);ar.forEach(N,function(K){var ot=v.edge(K);v.removeEdge(K),ot.forwardName=K.name,ot.reversed=!0,v.setEdge(K.w,K.v,ot,ar.uniqueId("rev"))})},undo:function(v){ar.forEach(v.edges(),function(N){var K=v.edge(N);if(K.reversed){v.removeEdge(N);var ot=K.forwardName;delete K.reversed,delete K.forwardName,v.setEdge(N.w,N.v,K,ot)}})}},Tc=Wa.Graph,Ho={addDummyNode:Ju,simplify:function(v){var N=new Tc().setGraph(v.graph());return ar.forEach(v.nodes(),function(K){N.setNode(K,v.node(K))}),ar.forEach(v.edges(),function(K){var ot=N.edge(K.v,K.w)||{weight:0,minlen:1},pt=v.edge(K);N.setEdge(K.v,K.w,{weight:ot.weight+pt.weight,minlen:Math.max(ot.minlen,pt.minlen)})}),N},asNonCompoundGraph:function(v){var N=new Tc({multigraph:v.isMultigraph()}).setGraph(v.graph());return ar.forEach(v.nodes(),function(K){v.children(K).length||N.setNode(K,v.node(K))}),ar.forEach(v.edges(),function(K){N.setEdge(K,v.edge(K))}),N},successorWeights:function(v){var N=ar.map(v.nodes(),function(K){var ot={};return ar.forEach(v.outEdges(K),function(pt){ot[pt.w]=(ot[pt.w]||0)+v.edge(pt).weight}),ot});return ar.zipObject(v.nodes(),N)},predecessorWeights:function(v){var N=ar.map(v.nodes(),function(K){var ot={};return ar.forEach(v.inEdges(K),function(pt){ot[pt.v]=(ot[pt.v]||0)+v.edge(pt).weight}),ot});return ar.zipObject(v.nodes(),N)},intersectRect:function(v,N){var K,ot,pt=v.x,bt=v.y,At=N.x-pt,Rt=N.y-bt,Zt=v.width/2,se=v.height/2;if(!At&&!Rt)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(Rt)*Zt>Math.abs(At)*se?(Rt<0&&(se=-se),K=se*At/Rt,ot=se):(At<0&&(Zt=-Zt),K=Zt,ot=Zt*Rt/At),{x:pt+K,y:bt+ot}},buildLayerMatrix:function(v){var N=ar.map(ar.range(il(v)+1),function(){return[]});return ar.forEach(v.nodes(),function(K){var ot=v.node(K),pt=ot.rank;ar.isUndefined(pt)||(N[pt][ot.order]=K)}),N},normalizeRanks:function(v){var N=ar.min(ar.map(v.nodes(),function(K){return v.node(K).rank}));ar.forEach(v.nodes(),function(K){var ot=v.node(K);ar.has(ot,"rank")&&(ot.rank-=N)})},removeEmptyRanks:function(v){var N=ar.min(ar.map(v.nodes(),function(bt){return v.node(bt).rank})),K=[];ar.forEach(v.nodes(),function(bt){var At=v.node(bt).rank-N;K[At]||(K[At]=[]),K[At].push(bt)});var ot=0,pt=v.graph().nodeRankFactor;ar.forEach(K,function(bt,At){ar.isUndefined(bt)&&At%pt!=0?--ot:ot&&ar.forEach(bt,function(Rt){v.node(Rt).rank+=ot})})},addBorderNode:function(v,N,K,ot){var pt={width:0,height:0};return arguments.length>=4&&(pt.rank=K,pt.order=ot),Ju(v,"border",pt,N)},maxRank:il,partition:function(v,N){var K={lhs:[],rhs:[]};return ar.forEach(v,function(ot){N(ot)?K.lhs.push(ot):K.rhs.push(ot)}),K},time:function(v,N){var K=ar.now();try{return N()}finally{console.log(v+" time: "+(ar.now()-K)+"ms")}},notime:function(v,N){return N()}};function Ju(v,N,K,ot){var pt;do pt=ar.uniqueId(ot);while(v.hasNode(pt));return K.dummy=N,v.setNode(pt,K),pt}function il(v){return ar.max(ar.map(v.nodes(),function(N){var K=v.node(N).rank;if(!ar.isUndefined(K))return K}))}var Ac={run:function(v){v.graph().dummyChains=[],ar.forEach(v.edges(),function(N){(function(K,ot){var pt,bt,At,Rt=ot.v,Zt=K.node(Rt).rank,se=ot.w,_e=K.node(se).rank,Ee=ot.name,He=K.edge(ot),br=He.labelRank;if(_e!==Zt+1){for(K.removeEdge(ot),At=0,++Zt;Zt<_e;++At,++Zt)He.points=[],bt={width:0,height:0,edgeLabel:He,edgeObj:ot,rank:Zt},pt=Ho.addDummyNode(K,"edge",bt,"_d"),Zt===br&&(bt.width=He.width,bt.height=He.height,bt.dummy="edge-label",bt.labelpos=He.labelpos),K.setEdge(Rt,pt,{weight:He.weight},Ee),At===0&&K.graph().dummyChains.push(pt),Rt=pt;K.setEdge(Rt,se,{weight:He.weight},Ee)}})(v,N)})},undo:function(v){ar.forEach(v.graph().dummyChains,function(N){var K,ot=v.node(N),pt=ot.edgeLabel;for(v.setEdge(ot.edgeObj,pt);ot.dummy;)K=v.successors(N)[0],v.removeNode(N),pt.points.push({x:ot.x,y:ot.y}),ot.dummy==="edge-label"&&(pt.x=ot.x,pt.y=ot.y,pt.width=ot.width,pt.height=ot.height),N=K,ot=v.node(N)})}},ou=function(v){var N={};ar.forEach(v.sources(),function K(ot){var pt=v.node(ot);if(ar.has(N,ot))return pt.rank;N[ot]=!0;var bt=ar.min(ar.map(v.outEdges(ot),function(At){return K(At.w)-v.edge(At).minlen}));return bt!==Number.POSITIVE_INFINITY&&bt!=null||(bt=0),pt.rank=bt})},tf=function(v,N){return v.node(N.w).rank-v.node(N.v).rank-v.edge(N).minlen},Ou=Wa.Graph,gu=tf,Kf=function(v){var N,K,ot=new Ou({directed:!1}),pt=v.nodes()[0],bt=v.nodeCount();for(ot.setNode(pt,{});bf(ot,v)<bt;)N=Iu(ot,v),K=ot.hasNode(N.v)?gu(v,N):-gu(v,N),Du(ot,v,K);return ot};function bf(v,N){return ar.forEach(v.nodes(),function K(ot){ar.forEach(N.nodeEdges(ot),function(pt){var bt=pt.v,At=ot===bt?pt.w:bt;v.hasNode(At)||gu(N,pt)||(v.setNode(At,{}),v.setEdge(ot,At,{}),K(At))})}),v.nodeCount()}function Iu(v,N){return ar.minBy(N.edges(),function(K){if(v.hasNode(K.v)!==v.hasNode(K.w))return gu(N,K)})}function Du(v,N,K){ar.forEach(v.nodes(),function(ot){N.node(ot).rank+=K})}var Oc=tf,$f=ou,qf=Wa.alg.preorder,Qf=Wa.alg.postorder,ol=Ho.simplify,Pu=Ps;function Ps(v){v=ol(v),$f(v);var N,K=Kf(v);for(Ic(K),sl(K,v);N=ul(K);)ef(K,v,N,Wl(K,v,N))}function sl(v,N){var K=Qf(v,v.nodes());K=K.slice(0,K.length-1),ar.forEach(K,function(ot){(function(pt,bt,At){var Rt=pt.node(At).parent;pt.edge(At,Rt).cutvalue=Ul(pt,bt,At)})(v,N,ot)})}function Ul(v,N,K){var ot=v.node(K).parent,pt=!0,bt=N.edge(K,ot),At=0;return bt||(pt=!1,bt=N.edge(ot,K)),At=bt.weight,ar.forEach(N.nodeEdges(K),function(Rt){var Zt,se,_e=Rt.v===K,Ee=_e?Rt.w:Rt.v;if(Ee!==ot){var He=_e===pt,br=N.edge(Rt).weight;if(At+=He?br:-br,Zt=K,se=Ee,v.hasEdge(Zt,se)){var rn=v.edge(K,Ee).cutvalue;At+=He?-rn:rn}}}),At}function Ic(v,N){arguments.length<2&&(N=v.nodes()[0]),xf(v,{},1,N)}function xf(v,N,K,ot,pt){var bt=K,At=v.node(ot);return N[ot]=!0,ar.forEach(v.neighbors(ot),function(Rt){ar.has(N,Rt)||(K=xf(v,N,K,Rt,ot))}),At.low=bt,At.lim=K++,pt?At.parent=pt:delete At.parent,K}function ul(v){return ar.find(v.edges(),function(N){return v.edge(N).cutvalue<0})}function Wl(v,N,K){var ot=K.v,pt=K.w;N.hasEdge(ot,pt)||(ot=K.w,pt=K.v);var bt=v.node(ot),At=v.node(pt),Rt=bt,Zt=!1;bt.lim>At.lim&&(Rt=At,Zt=!0);var se=ar.filter(N.edges(),function(_e){return Zt===fl(v,v.node(_e.v),Rt)&&Zt!==fl(v,v.node(_e.w),Rt)});return ar.minBy(se,function(_e){return Oc(N,_e)})}function ef(v,N,K,ot){var pt=K.v,bt=K.w;v.removeEdge(pt,bt),v.setEdge(ot.v,ot.w,{}),Ic(v),sl(v,N),function(At,Rt){var Zt=ar.find(At.nodes(),function(_e){return!Rt.node(_e).parent}),se=qf(At,Zt);se=se.slice(1),ar.forEach(se,function(_e){var Ee=At.node(_e).parent,He=Rt.edge(_e,Ee),br=!1;He||(He=Rt.edge(Ee,_e),br=!0),Rt.node(_e).rank=Rt.node(Ee).rank+(br?He.minlen:-He.minlen)})}(v,N)}function fl(v,N,K){return K.low<=N.lim&&N.lim<=K.lim}Ps.initLowLimValues=Ic,Ps.initCutValues=sl,Ps.calcCutValue=Ul,Ps.leaveEdge=ul,Ps.enterEdge=Wl,Ps.exchangeEdges=ef;var Yl=ou,hd=function(v){switch(v.graph().ranker){case"network-simplex":Dc(v);break;case"tight-tree":(function(N){Yl(N),Kf(N)})(v);break;case"longest-path":cl(v);break;default:Dc(v)}},cl=Yl;function Dc(v){Pu(v)}var vd=function(v){var N=function(K){var ot={},pt=0;function bt(At){var Rt=pt;ar.forEach(K.children(At),bt),ot[At]={low:Rt,lim:pt++}}return ar.forEach(K.children(),bt),ot}(v);ar.forEach(v.graph().dummyChains,function(K){for(var ot=v.node(K),pt=ot.edgeObj,bt=function(Ee,He,br,rn){var Cr,Ar,Or=[],Nn=[],jn=Math.min(He[br].low,He[rn].low),zn=Math.max(He[br].lim,He[rn].lim);Cr=br;do Cr=Ee.parent(Cr),Or.push(Cr);while(Cr&&(He[Cr].low>jn||zn>He[Cr].lim));for(Ar=Cr,Cr=rn;(Cr=Ee.parent(Cr))!==Ar;)Nn.push(Cr);return{path:Or.concat(Nn.reverse()),lca:Ar}}(v,N,pt.v,pt.w),At=bt.path,Rt=bt.lca,Zt=0,se=At[Zt],_e=!0;K!==pt.w;){if(ot=v.node(K),_e){for(;(se=At[Zt])!==Rt&&v.node(se).maxRank<ot.rank;)Zt++;se===Rt&&(_e=!1)}if(!_e){for(;Zt<At.length-1&&v.node(se=At[Zt+1]).minRank<=ot.rank;)Zt++;se=At[Zt]}v.setParent(K,se),K=v.successors(K)[0]}})},Xl={run:function(v){var N=Ho.addDummyNode(v,"root",{},"_root"),K=function(At){var Rt={};function Zt(se,_e){var Ee=At.children(se);Ee&&Ee.length&&ar.forEach(Ee,function(He){Zt(He,_e+1)}),Rt[se]=_e}return ar.forEach(At.children(),function(se){Zt(se,1)}),Rt}(v),ot=ar.max(ar.values(K))-1,pt=2*ot+1;v.graph().nestingRoot=N,ar.forEach(v.edges(),function(At){v.edge(At).minlen*=pt});var bt=function(At){return ar.reduce(At.edges(),function(Rt,Zt){return Rt+At.edge(Zt).weight},0)}(v)+1;ar.forEach(v.children(),function(At){ll(v,N,pt,bt,ot,K,At)}),v.graph().nodeRankFactor=pt},cleanup:function(v){var N=v.graph();v.removeNode(N.nestingRoot),delete N.nestingRoot,ar.forEach(v.edges(),function(K){v.edge(K).nestingEdge&&v.removeEdge(K)})}};function ll(v,N,K,ot,pt,bt,At){var Rt=v.children(At);if(Rt.length){var Zt=Ho.addBorderNode(v,"_bt"),se=Ho.addBorderNode(v,"_bb"),_e=v.node(At);v.setParent(Zt,At),_e.borderTop=Zt,v.setParent(se,At),_e.borderBottom=se,ar.forEach(Rt,function(Ee){ll(v,N,K,ot,pt,bt,Ee);var He=v.node(Ee),br=He.borderTop?He.borderTop:Ee,rn=He.borderBottom?He.borderBottom:Ee,Cr=He.borderTop?ot:2*ot,Ar=br!==rn?1:pt-bt[At]+1;v.setEdge(Zt,br,{weight:Cr,minlen:Ar,nestingEdge:!0}),v.setEdge(rn,se,{weight:Cr,minlen:Ar,nestingEdge:!0})}),v.parent(At)||v.setEdge(N,Zt,{weight:0,minlen:pt+bt[At]})}else At!==N&&v.setEdge(N,At,{weight:0,minlen:K})}var jl=function(v){ar.forEach(v.children(),function N(K){var ot=v.children(K),pt=v.node(K);if(ot.length&&ar.forEach(ot,N),ar.has(pt,"minRank")){pt.borderLeft=[],pt.borderRight=[];for(var bt=pt.minRank,At=pt.maxRank+1;bt<At;++bt)dl(v,"borderLeft","_bl",K,pt,bt),dl(v,"borderRight","_br",K,pt,bt)}})};function dl(v,N,K,ot,pt,bt){var At={width:0,height:0,rank:bt,borderType:N},Rt=pt[N][bt-1],Zt=Ho.addDummyNode(v,"border",At,K);pt[N][bt]=Zt,v.setParent(Zt,ot),Rt&&v.setEdge(Rt,Zt,{weight:1})}var Vl={adjust:function(v){var N=v.graph().rankdir.toLowerCase();N!=="lr"&&N!=="rl"||Hl(v)},undo:function(v){var N=v.graph().rankdir.toLowerCase();N!=="bt"&&N!=="rl"||function(K){ar.forEach(K.nodes(),function(ot){su(K.node(ot))}),ar.forEach(K.edges(),function(ot){var pt=K.edge(ot);ar.forEach(pt.points,su),ar.has(pt,"y")&&su(pt)})}(v),N!=="lr"&&N!=="rl"||(function(K){ar.forEach(K.nodes(),function(ot){Jf(K.node(ot))}),ar.forEach(K.edges(),function(ot){var pt=K.edge(ot);ar.forEach(pt.points,Jf),ar.has(pt,"x")&&Jf(pt)})}(v),Hl(v))}};function Hl(v){ar.forEach(v.nodes(),function(N){hl(v.node(N))}),ar.forEach(v.edges(),function(N){hl(v.edge(N))})}function hl(v){var N=v.width;v.width=v.height,v.height=N}function su(v){v.y=-v.y}function Jf(v){var N=v.x;v.x=v.y,v.y=N}var Pc=function(v){var N={},K=ar.filter(v.nodes(),function(Rt){return!v.children(Rt).length}),ot=ar.max(ar.map(K,function(Rt){return v.node(Rt).rank})),pt=ar.map(ar.range(ot+1),function(){return[]});function bt(Rt){if(!ar.has(N,Rt)){N[Rt]=!0;var Zt=v.node(Rt);pt[Zt.rank].push(Rt),ar.forEach(v.successors(Rt),bt)}}var At=ar.sortBy(K,function(Rt){return v.node(Rt).rank});return ar.forEach(At,bt),pt},tc=function(v,N){for(var K=0,ot=1;ot<N.length;++ot)K+=Lc(v,N[ot-1],N[ot]);return K};function Lc(v,N,K){for(var ot=ar.zipObject(K,ar.map(K,function(se,_e){return _e})),pt=ar.flatten(ar.map(N,function(se){return ar.sortBy(ar.map(v.outEdges(se),function(_e){return{pos:ot[_e.w],weight:v.edge(_e).weight}}),"pos")}),!0),bt=1;bt<K.length;)bt<<=1;var At=2*bt-1;bt-=1;var Rt=ar.map(new Array(At),function(){return 0}),Zt=0;return ar.forEach(pt.forEach(function(se){var _e=se.pos+bt;Rt[_e]+=se.weight;for(var Ee=0;_e>0;)_e%2&&(Ee+=Rt[_e+1]),Rt[_e=_e-1>>1]+=se.weight;Zt+=se.weight*Ee})),Zt}var vl=function(v,N){return ar.map(N,function(K){var ot=v.inEdges(K);if(ot.length){var pt=ar.reduce(ot,function(bt,At){var Rt=v.edge(At),Zt=v.node(At.v);return{sum:bt.sum+Rt.weight*Zt.order,weight:bt.weight+Rt.weight}},{sum:0,weight:0});return{v:K,barycenter:pt.sum/pt.weight,weight:pt.weight}}return{v:K}})},ec=function(v,N){var K={};return ar.forEach(v,function(ot,pt){var bt=K[ot.v]={indegree:0,in:[],out:[],vs:[ot.v],i:pt};ar.isUndefined(ot.barycenter)||(bt.barycenter=ot.barycenter,bt.weight=ot.weight)}),ar.forEach(N.edges(),function(ot){var pt=K[ot.v],bt=K[ot.w];ar.isUndefined(pt)||ar.isUndefined(bt)||(bt.indegree++,pt.out.push(K[ot.w]))}),function(ot){var pt=[];function bt(Zt){return function(se){se.merged||(ar.isUndefined(se.barycenter)||ar.isUndefined(Zt.barycenter)||se.barycenter>=Zt.barycenter)&&function(_e,Ee){var He=0,br=0;_e.weight&&(He+=_e.barycenter*_e.weight,br+=_e.weight),Ee.weight&&(He+=Ee.barycenter*Ee.weight,br+=Ee.weight),_e.vs=Ee.vs.concat(_e.vs),_e.barycenter=He/br,_e.weight=br,_e.i=Math.min(Ee.i,_e.i),Ee.merged=!0}(Zt,se)}}function At(Zt){return function(se){se.in.push(Zt),--se.indegree==0&&ot.push(se)}}for(;ot.length;){var Rt=ot.pop();pt.push(Rt),ar.forEach(Rt.in.reverse(),bt(Rt)),ar.forEach(Rt.out,At(Rt))}return ar.map(ar.filter(pt,function(Zt){return!Zt.merged}),function(Zt){return ar.pick(Zt,["vs","i","barycenter","weight"])})}(ar.filter(K,function(ot){return!ot.indegree}))},Ef=function(v,N){var K=Ho.partition(v,function(Ee){return ar.has(Ee,"barycenter")}),ot=K.lhs,pt=ar.sortBy(K.rhs,function(Ee){return-Ee.i}),bt=[],At=0,Rt=0,Zt=0;ot.sort((se=!!N,function(Ee,He){return Ee.barycenter<He.barycenter?-1:Ee.barycenter>He.barycenter?1:se?He.i-Ee.i:Ee.i-He.i})),Zt=rc(bt,pt,Zt),ar.forEach(ot,function(Ee){Zt+=Ee.vs.length,bt.push(Ee.vs),At+=Ee.barycenter*Ee.weight,Rt+=Ee.weight,Zt=rc(bt,pt,Zt)});var se,_e={vs:ar.flatten(bt,!0)};return Rt&&(_e.barycenter=At/Rt,_e.weight=Rt),_e};function rc(v,N,K){for(var ot;N.length&&(ot=ar.last(N)).i<=K;)N.pop(),v.push(ot.vs),K++;return K}var pl=function v(N,K,ot,pt){var bt=N.children(K),At=N.node(K),Rt=At?At.borderLeft:void 0,Zt=At?At.borderRight:void 0,se={};Rt&&(bt=ar.filter(bt,function(Cr){return Cr!==Rt&&Cr!==Zt}));var _e=vl(N,bt);ar.forEach(_e,function(Cr){if(N.children(Cr.v).length){var Ar=v(N,Cr.v,ot,pt);se[Cr.v]=Ar,ar.has(Ar,"barycenter")&&(Or=Cr,Nn=Ar,ar.isUndefined(Or.barycenter)?(Or.barycenter=Nn.barycenter,Or.weight=Nn.weight):(Or.barycenter=(Or.barycenter*Or.weight+Nn.barycenter*Nn.weight)/(Or.weight+Nn.weight),Or.weight+=Nn.weight))}var Or,Nn});var Ee=ec(_e,ot);(function(Cr,Ar){ar.forEach(Cr,function(Or){Or.vs=ar.flatten(Or.vs.map(function(Nn){return Ar[Nn]?Ar[Nn].vs:Nn}),!0)})})(Ee,se);var He=Ef(Ee,pt);if(Rt&&(He.vs=ar.flatten([Rt,He.vs,Zt],!0),N.predecessors(Rt).length)){var br=N.node(N.predecessors(Rt)[0]),rn=N.node(N.predecessors(Zt)[0]);ar.has(He,"barycenter")||(He.barycenter=0,He.weight=0),He.barycenter=(He.barycenter*He.weight+br.order+rn.order)/(He.weight+2),He.weight+=2}return He},Nc=Wa.Graph,Rc=function(v,N,K){var ot=function(bt){for(var At;bt.hasNode(At=ar.uniqueId("_root")););return At}(v),pt=new Nc({compound:!0}).setGraph({root:ot}).setDefaultNodeLabel(function(bt){return v.node(bt)});return ar.forEach(v.nodes(),function(bt){var At=v.node(bt),Rt=v.parent(bt);(At.rank===N||At.minRank<=N&&N<=At.maxRank)&&(pt.setNode(bt),pt.setParent(bt,Rt||ot),ar.forEach(v[K](bt),function(Zt){var se=Zt.v===bt?Zt.w:Zt.v,_e=pt.edge(se,bt),Ee=ar.isUndefined(_e)?0:_e.weight;pt.setEdge(se,bt,{weight:v.edge(Zt).weight+Ee})}),ar.has(At,"minRank")&&pt.setNode(bt,{borderLeft:At.borderLeft[N],borderRight:At.borderRight[N]}))}),pt},kc=function(v,N,K){var ot,pt={};ar.forEach(K,function(bt){for(var At,Rt,Zt=v.parent(bt);Zt;){if((At=v.parent(Zt))?(Rt=pt[At],pt[At]=Zt):(Rt=ot,ot=Zt),Rt&&Rt!==Zt)return void N.setEdge(Rt,Zt);Zt=At}})},nc=Wa.Graph,ac=function(v){var N=Ho.maxRank(v),K=wf(v,ar.range(1,N+1),"inEdges"),ot=wf(v,ar.range(N-1,-1,-1),"outEdges"),pt=Pc(v);Sf(v,pt);for(var bt,At=Number.POSITIVE_INFINITY,Rt=0,Zt=0;Zt<4;++Rt,++Zt){Lu(Rt%2?K:ot,Rt%4>=2),pt=Ho.buildLayerMatrix(v);var se=tc(v,pt);se<At&&(Zt=0,bt=ar.cloneDeep(pt),At=se)}Sf(v,bt)};function wf(v,N,K){return ar.map(N,function(ot){return Rc(v,ot,K)})}function Lu(v,N){var K=new nc;ar.forEach(v,function(ot){var pt=ot.graph().root,bt=pl(ot,pt,K,N);ar.forEach(bt.vs,function(At,Rt){ot.node(At).order=Rt}),kc(ot,K,bt.vs)})}function Sf(v,N){ar.forEach(N,function(K){ar.forEach(K,function(ot,pt){v.node(ot).order=pt})})}var Mf=Wa.Graph,ic=function(v){var N,K=Ho.buildLayerMatrix(v),ot=ar.merge(mu(v,K),Zl(v,K)),pt={};ar.forEach(["u","d"],function(At){N=At==="u"?K:ar.values(K).reverse(),ar.forEach(["l","r"],function(Rt){Rt==="r"&&(N=ar.map(N,function(Ee){return ar.values(Ee).reverse()}));var Zt=(At==="u"?v.predecessors:v.successors).bind(v),se=_f(v,N,ot,Zt),_e=gl(v,N,se.root,se.align,Rt==="r");Rt==="r"&&(_e=ar.mapValues(_e,function(Ee){return-Ee})),pt[At+Rt]=_e})});var bt=uu(v,pt);return $l(pt,bt),ml(pt,v.graph().align)};function mu(v,N){var K={};return ar.reduce(N,function(ot,pt){var bt=0,At=0,Rt=ot.length,Zt=ar.last(pt);return ar.forEach(pt,function(se,_e){var Ee=function(br,rn){if(br.node(rn).dummy)return ar.find(br.predecessors(rn),function(Cr){return br.node(Cr).dummy})}(v,se),He=Ee?v.node(Ee).order:Rt;(Ee||se===Zt)&&(ar.forEach(pt.slice(At,_e+1),function(br){ar.forEach(v.predecessors(br),function(rn){var Cr=v.node(rn),Ar=Cr.order;!(Ar<bt||He<Ar)||Cr.dummy&&v.node(br).dummy||Bc(K,rn,br)})}),At=_e+1,bt=He)}),pt}),K}function Zl(v,N){var K={};function ot(pt,bt,At,Rt,Zt){var se;ar.forEach(ar.range(bt,At),function(_e){se=pt[_e],v.node(se).dummy&&ar.forEach(v.predecessors(se),function(Ee){var He=v.node(Ee);He.dummy&&(He.order<Rt||He.order>Zt)&&Bc(K,Ee,se)})})}return ar.reduce(N,function(pt,bt){var At,Rt=-1,Zt=0;return ar.forEach(bt,function(se,_e){if(v.node(se).dummy==="border"){var Ee=v.predecessors(se);Ee.length&&(At=v.node(Ee[0]).order,ot(bt,Zt,_e,Rt,At),Zt=_e,Rt=At)}ot(bt,Zt,bt.length,At,pt.length)}),bt}),K}function Bc(v,N,K){if(N>K){var ot=N;N=K,K=ot}var pt=v[N];pt||(v[N]=pt={}),pt[K]=!0}function Kl(v,N,K){if(N>K){var ot=N;N=K,K=ot}return ar.has(v[N],K)}function _f(v,N,K,ot){var pt={},bt={},At={};return ar.forEach(N,function(Rt){ar.forEach(Rt,function(Zt,se){pt[Zt]=Zt,bt[Zt]=Zt,At[Zt]=se})}),ar.forEach(N,function(Rt){var Zt=-1;ar.forEach(Rt,function(se){var _e=ot(se);if(_e.length)for(var Ee=((_e=ar.sortBy(_e,function(Cr){return At[Cr]})).length-1)/2,He=Math.floor(Ee),br=Math.ceil(Ee);He<=br;++He){var rn=_e[He];bt[se]===se&&Zt<At[rn]&&!Kl(K,se,rn)&&(bt[rn]=se,bt[se]=pt[se]=pt[rn],Zt=At[rn])}})}),{root:pt,align:bt}}function gl(v,N,K,ot,pt){var bt={},At=function(se,_e,Ee,He){var br=new Mf,rn=se.graph(),Cr=function(Ar,Or,Nn){return function(jn,zn,da){var fa,Ea=jn.node(zn),Ba=jn.node(da),Oa=0;if(Oa+=Ea.width/2,ar.has(Ea,"labelpos"))switch(Ea.labelpos.toLowerCase()){case"l":fa=-Ea.width/2;break;case"r":fa=Ea.width/2}if(fa&&(Oa+=Nn?fa:-fa),fa=0,Oa+=(Ea.dummy?Or:Ar)/2,Oa+=(Ba.dummy?Or:Ar)/2,Oa+=Ba.width/2,ar.has(Ba,"labelpos"))switch(Ba.labelpos.toLowerCase()){case"l":fa=Ba.width/2;break;case"r":fa=-Ba.width/2}return fa&&(Oa+=Nn?fa:-fa),fa=0,Oa}}(rn.nodesep,rn.edgesep,He);return ar.forEach(_e,function(Ar){var Or;ar.forEach(Ar,function(Nn){var jn=Ee[Nn];if(br.setNode(jn),Or){var zn=Ee[Or],da=br.edge(zn,jn);br.setEdge(zn,jn,Math.max(Cr(se,Nn,Or),da||0))}Or=Nn})}),br}(v,N,K,pt),Rt=pt?"borderLeft":"borderRight";function Zt(se,_e){for(var Ee=At.nodes(),He=Ee.pop(),br={};He;)br[He]?se(He):(br[He]=!0,Ee.push(He),Ee=Ee.concat(_e(He))),He=Ee.pop()}return Zt(function(se){bt[se]=At.inEdges(se).reduce(function(_e,Ee){return Math.max(_e,bt[Ee.v]+At.edge(Ee))},0)},At.predecessors.bind(At)),Zt(function(se){var _e=At.outEdges(se).reduce(function(He,br){return Math.min(He,bt[br.w]-At.edge(br))},Number.POSITIVE_INFINITY),Ee=v.node(se);_e!==Number.POSITIVE_INFINITY&&Ee.borderType!==Rt&&(bt[se]=Math.max(bt[se],_e))},At.successors.bind(At)),ar.forEach(ot,function(se){bt[se]=bt[K[se]]}),bt}function uu(v,N){return ar.minBy(ar.values(N),function(K){var ot=Number.NEGATIVE_INFINITY,pt=Number.POSITIVE_INFINITY;return ar.forIn(K,function(bt,At){var Rt=function(Zt,se){return Zt.node(se).width}(v,At)/2;ot=Math.max(bt+Rt,ot),pt=Math.min(bt-Rt,pt)}),ot-pt})}function $l(v,N){var K=ar.values(N),ot=ar.min(K),pt=ar.max(K);ar.forEach(["u","d"],function(bt){ar.forEach(["l","r"],function(At){var Rt,Zt=bt+At,se=v[Zt];if(se!==N){var _e=ar.values(se);(Rt=At==="l"?ot-ar.min(_e):pt-ar.max(_e))&&(v[Zt]=ar.mapValues(se,function(Ee){return Ee+Rt}))}})})}function ml(v,N){return ar.mapValues(v.ul,function(K,ot){if(N)return v[N.toLowerCase()][ot];var pt=ar.sortBy(ar.map(v,ot));return(pt[1]+pt[2])/2})}var ql=ic,Ql=function(v){(function(N){var K=Ho.buildLayerMatrix(N),ot=N.graph().ranksep,pt=0;ar.forEach(K,function(bt){var At=ar.max(ar.map(bt,function(Rt){return N.node(Rt).height}));ar.forEach(bt,function(Rt){N.node(Rt).y=pt+At/2}),pt+=At+ot})})(v=Ho.asNonCompoundGraph(v)),ar.forEach(ql(v),function(N,K){v.node(K).x=N})},Jl=Ho.normalizeRanks,Ud=Ho.removeEmptyRanks,hs=Ho,td=Wa.Graph,rf=function(v,N){var K=N&&N.debugTiming?hs.time:hs.notime;K("layout",function(){var ot=K("  buildLayoutGraph",function(){return function(pt){var bt=new td({multigraph:!0,compound:!0}),At=oc(pt.graph());return bt.setGraph(ar.merge({},ed,Ts(At,Nu),ar.pick(At,yl))),ar.forEach(pt.nodes(),function(Rt){var Zt=oc(pt.node(Rt));bt.setNode(Rt,ar.defaults(Ts(Zt,Fc),rd)),bt.setParent(Rt,pt.parent(Rt))}),ar.forEach(pt.edges(),function(Rt){var Zt=oc(pt.edge(Rt));bt.setEdge(Rt,ar.merge({},Ru,Ts(Zt,ms),ar.pick(Zt,Uo)))}),bt}(v)});K("  runLayout",function(){(function(pt,bt){bt("    makeSpaceForEdgeLabels",function(){(function(At){var Rt=At.graph();Rt.ranksep/=2,ar.forEach(At.edges(),function(Zt){var se=At.edge(Zt);se.minlen*=2,se.labelpos.toLowerCase()!=="c"&&(Rt.rankdir==="TB"||Rt.rankdir==="BT"?se.width+=se.labeloffset:se.height+=se.labeloffset)})})(pt)}),bt("    removeSelfEdges",function(){(function(At){ar.forEach(At.edges(),function(Rt){if(Rt.v===Rt.w){var Zt=At.node(Rt.v);Zt.selfEdges||(Zt.selfEdges=[]),Zt.selfEdges.push({e:Rt,label:At.edge(Rt)}),At.removeEdge(Rt)}})})(pt)}),bt("    acyclic",function(){al.run(pt)}),bt("    nestingGraph.run",function(){Xl.run(pt)}),bt("    rank",function(){hd(hs.asNonCompoundGraph(pt))}),bt("    injectEdgeLabelProxies",function(){(function(At){ar.forEach(At.edges(),function(Rt){var Zt=At.edge(Rt);if(Zt.width&&Zt.height){var se=At.node(Rt.v),_e={rank:(At.node(Rt.w).rank-se.rank)/2+se.rank,e:Rt};hs.addDummyNode(At,"edge-proxy",_e,"_ep")}})})(pt)}),bt("    removeEmptyRanks",function(){Ud(pt)}),bt("    nestingGraph.cleanup",function(){Xl.cleanup(pt)}),bt("    normalizeRanks",function(){Jl(pt)}),bt("    assignRankMinMax",function(){(function(At){var Rt=0;ar.forEach(At.nodes(),function(Zt){var se=At.node(Zt);se.borderTop&&(se.minRank=At.node(se.borderTop).rank,se.maxRank=At.node(se.borderBottom).rank,Rt=ar.max(Rt,se.maxRank))}),At.graph().maxRank=Rt})(pt)}),bt("    removeEdgeLabelProxies",function(){(function(At){ar.forEach(At.nodes(),function(Rt){var Zt=At.node(Rt);Zt.dummy==="edge-proxy"&&(At.edge(Zt.e).labelRank=Zt.rank,At.removeNode(Rt))})})(pt)}),bt("    normalize.run",function(){Ac.run(pt)}),bt("    parentDummyChains",function(){vd(pt)}),bt("    addBorderSegments",function(){jl(pt)}),bt("    order",function(){ac(pt)}),bt("    insertSelfEdges",function(){(function(At){var Rt=hs.buildLayerMatrix(At);ar.forEach(Rt,function(Zt){var se=0;ar.forEach(Zt,function(_e,Ee){var He=At.node(_e);He.order=Ee+se,ar.forEach(He.selfEdges,function(br){hs.addDummyNode(At,"selfedge",{width:br.label.width,height:br.label.height,rank:He.rank,order:Ee+ ++se,e:br.e,label:br.label},"_se")}),delete He.selfEdges})})})(pt)}),bt("    adjustCoordinateSystem",function(){Vl.adjust(pt)}),bt("    position",function(){Ql(pt)}),bt("    positionSelfEdges",function(){(function(At){ar.forEach(At.nodes(),function(Rt){var Zt=At.node(Rt);if(Zt.dummy==="selfedge"){var se=At.node(Zt.e.v),_e=se.x+se.width/2,Ee=se.y,He=Zt.x-_e,br=se.height/2;At.setEdge(Zt.e,Zt.label),At.removeNode(Rt),Zt.label.points=[{x:_e+2*He/3,y:Ee-br},{x:_e+5*He/6,y:Ee-br},{x:_e+He,y:Ee},{x:_e+5*He/6,y:Ee+br},{x:_e+2*He/3,y:Ee+br}],Zt.label.x=Zt.x,Zt.label.y=Zt.y}})})(pt)}),bt("    removeBorderNodes",function(){(function(At){ar.forEach(At.nodes(),function(Rt){if(At.children(Rt).length){var Zt=At.node(Rt),se=At.node(Zt.borderTop),_e=At.node(Zt.borderBottom),Ee=At.node(ar.last(Zt.borderLeft)),He=At.node(ar.last(Zt.borderRight));Zt.width=Math.abs(He.x-Ee.x),Zt.height=Math.abs(_e.y-se.y),Zt.x=Ee.x+Zt.width/2,Zt.y=se.y+Zt.height/2}}),ar.forEach(At.nodes(),function(Rt){At.node(Rt).dummy==="border"&&At.removeNode(Rt)})})(pt)}),bt("    normalize.undo",function(){Ac.undo(pt)}),bt("    fixupEdgeLabelCoords",function(){(function(At){ar.forEach(At.edges(),function(Rt){var Zt=At.edge(Rt);if(ar.has(Zt,"x"))switch(Zt.labelpos!=="l"&&Zt.labelpos!=="r"||(Zt.width-=Zt.labeloffset),Zt.labelpos){case"l":Zt.x-=Zt.width/2+Zt.labeloffset;break;case"r":Zt.x+=Zt.width/2+Zt.labeloffset}})})(pt)}),bt("    undoCoordinateSystem",function(){Vl.undo(pt)}),bt("    translateGraph",function(){(function(At){var Rt=Number.POSITIVE_INFINITY,Zt=0,se=Number.POSITIVE_INFINITY,_e=0,Ee=At.graph(),He=Ee.marginx||0,br=Ee.marginy||0;function rn(Cr){var Ar=Cr.x,Or=Cr.y,Nn=Cr.width,jn=Cr.height;Rt=Math.min(Rt,Ar-Nn/2),Zt=Math.max(Zt,Ar+Nn/2),se=Math.min(se,Or-jn/2),_e=Math.max(_e,Or+jn/2)}ar.forEach(At.nodes(),function(Cr){rn(At.node(Cr))}),ar.forEach(At.edges(),function(Cr){var Ar=At.edge(Cr);ar.has(Ar,"x")&&rn(Ar)}),Rt-=He,se-=br,ar.forEach(At.nodes(),function(Cr){var Ar=At.node(Cr);Ar.x-=Rt,Ar.y-=se}),ar.forEach(At.edges(),function(Cr){var Ar=At.edge(Cr);ar.forEach(Ar.points,function(Or){Or.x-=Rt,Or.y-=se}),ar.has(Ar,"x")&&(Ar.x-=Rt),ar.has(Ar,"y")&&(Ar.y-=se)}),Ee.width=Zt-Rt+He,Ee.height=_e-se+br})(pt)}),bt("    assignNodeIntersects",function(){(function(At){ar.forEach(At.edges(),function(Rt){var Zt,se,_e=At.edge(Rt),Ee=At.node(Rt.v),He=At.node(Rt.w);_e.points?(Zt=_e.points[0],se=_e.points[_e.points.length-1]):(_e.points=[],Zt=He,se=Ee),_e.points.unshift(hs.intersectRect(Ee,Zt)),_e.points.push(hs.intersectRect(He,se))})})(pt)}),bt("    reversePoints",function(){(function(At){ar.forEach(At.edges(),function(Rt){var Zt=At.edge(Rt);Zt.reversed&&Zt.points.reverse()})})(pt)}),bt("    acyclic.undo",function(){al.undo(pt)})})(ot,K)}),K("  updateInputGraph",function(){(function(pt,bt){ar.forEach(pt.nodes(),function(At){var Rt=pt.node(At),Zt=bt.node(At);Rt&&(Rt.x=Zt.x,Rt.y=Zt.y,bt.children(At).length&&(Rt.width=Zt.width,Rt.height=Zt.height))}),ar.forEach(pt.edges(),function(At){var Rt=pt.edge(At),Zt=bt.edge(At);Rt.points=Zt.points,ar.has(Zt,"x")&&(Rt.x=Zt.x,Rt.y=Zt.y)}),pt.graph().width=bt.graph().width,pt.graph().height=bt.graph().height})(v,ot)})})},Nu=["nodesep","edgesep","ranksep","marginx","marginy"],ed={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},yl=["acyclicer","ranker","rankdir","align"],Fc=["width","height"],rd={width:0,height:0},ms=["minlen","weight","width","height","labeloffset"],Ru={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Uo=["labelpos"];function Ts(v,N){return ar.mapValues(ar.pick(v,N),Number)}function oc(v){var N={};return ar.forEach(v,function(K,ot){N[ot.toLowerCase()]=K}),N}var pd=Wa.Graph,nd={graphlib:Wa,layout:rf,debug:{debugOrdering:function(v){var N=Ho.buildLayerMatrix(v),K=new pd({compound:!0,multigraph:!0}).setGraph({});return ar.forEach(v.nodes(),function(ot){K.setNode(ot,{label:ot}),K.setParent(ot,"layer"+v.node(ot).rank)}),ar.forEach(v.edges(),function(ot){K.setEdge(ot.v,ot.w,{},ot.name)}),ar.forEach(N,function(ot,pt){var bt="layer"+pt;K.setNode(bt,{rank:"same"}),ar.reduce(ot,function(At,Rt){return K.setEdge(At,Rt,{style:"invis"}),Rt})}),K}},util:{time:Ho.time,notime:Ho.notime},version:"0.8.5"},gd=nd.graphlib,ad=nd.layout;class bl{constructor(N){this.cardinality=1,this.include=p.UNSPECIFIED,this.isGroupNode=!1,this.parentNode=null,this.type=L.NODE,this.name=N.name,this.attr=N.attr||{},this.inputs=N.inputs,this.path=N.path||[],this.width=N.width,this.height=N.height}}class md{constructor(){this.nodes={},this.edges=[],this.nodes={},this.edges=[]}}function yd(v){const N=new md;return v.nodes.map(K=>new bl(K)).forEach(K=>{N.nodes[K.name]=K,K.inputs.forEach(ot=>{(function(pt,bt,At){At.name!==bt.name&&pt.edges.push(Object.assign(Object.assign({},At.attr),{v:At.name,w:bt.name}))})(N,K,ot)})}),N}class id{constructor(N,K={}){this.attr=null,this.bridgeGraph=null,this.cardinality=0,this.depth=1,this.include=p.UNSPECIFIED,this.isGroupNode=!0,this.parentNode=null,this.type=L.META,this.path=[],this.name=N,this.metaGraph=sc(N,b.META,K)}getFirstChild(){return this.metaGraph.node(this.metaGraph.nodes()[0])}getChildren(){return this.metaGraph.nodes().map(N=>this.metaGraph.node(N))}leaves(){let N,K=[],ot=[this];for(;ot.length;){let pt=ot.shift();pt.isGroupNode?(N=pt.metaGraph,N.nodes().forEach(bt=>ot.push(N.node(bt)))):K.push(pt.name)}return K}}class bd{constructor(N,K){this.v=N,this.w=K,this.baseEdgeList=[],this.inbound=null,this.name=null}addBaseEdge(N,K){this.baseEdgeList.push(N)}}function xl(v,N={}){return new id(v,N)}function El(v,N){return new bd(v,N)}function sc(v,N,K){const ot=K||{},pt=new gd.Graph(ot);return pt.setGraph({name:v,rankdir:ot.rankdir,type:N,align:ot.align}),pt}class wl{constructor(N={}){this.graphOptions=N,this.index={},this.graphOptions.compound=!0,this.root=xl(M,this.graphOptions),this.index[M]=this.root}getNodeMap(){return this.index}node(N){return this.index[N]}setNode(N,K){this.index[N]=K}getBridgeGraph(N){const K=this.index[N];if(!K)throw Error("Could not find node in hierarchy: "+N);if(!("metaGraph"in K))return null;const ot=K;if(ot.bridgeGraph)return ot.bridgeGraph;const pt=sc(P,b.BRIDGE,this.graphOptions);if(ot.bridgeGraph=pt,!K.parentNode||!("metaGraph"in K.parentNode))return pt;const bt=K.parentNode;return[bt.metaGraph,this.getBridgeGraph(bt.name)].forEach(At=>{At.edges().filter(Rt=>Rt.v===N||Rt.w===N).forEach(Rt=>{const Zt=Rt.w===N;At.edge(Rt).baseEdgeList.forEach(se=>{const[_e,Ee]=Zt?[se.w,Rt.v]:[se.v,Rt.w],He=this.getChildName(N,_e),br={v:Zt?Ee:He,w:Zt?He:Ee};let rn=pt.edge(br);rn||(rn=El(br.v,br.w),rn.inbound=Zt,pt.setEdge(br.v,br.w,rn)),rn.addBaseEdge(se,this)})})}),pt}getChildName(N,K){let ot=this.index[K];for(;ot;){if(ot.parentNode&&ot.parentNode.name===N)return ot.name;ot=ot.parentNode}throw Error("Could not find immediate child for descendant: "+K)}getPredecessors(N){const K=this.index[N];if(!K)throw Error("Could not find node with name: "+N);return this.getOneWayEdges(K,!0)}getSuccessors(N){const K=this.index[N];if(!K)throw Error("Could not find node with name: "+N);return this.getOneWayEdges(K,!1)}getOneWayEdges(N,K){const ot=[];if(!N.parentNode||!N.parentNode.isGroupNode)return ot;const pt=N.parentNode,bt=pt.metaGraph,At=this.getBridgeGraph(pt.name);return Sl(bt,N,K,ot),Sl(At,N,K,ot),ot}}function fu(v,N){const{rankDirection:K,align:ot}=N,pt=new wl({rankdir:K,align:ot});return function(bt,At){Object.keys(At.nodes).forEach(Rt=>{const Zt=At.nodes[Rt],se=Zt.path;let _e=bt.root;_e.depth=Math.max(se.length,_e.depth);for(let Ee=0;Ee<se.length&&(_e.depth=Math.max(_e.depth,se.length-Ee),_e.cardinality+=Zt.cardinality,Ee!==se.length-1);Ee++){const He=se[Ee];let br=bt.node(He);br||(br=xl(He,bt.graphOptions),br.path=Zt.path.slice(0,Ee+1),br.parentNode=_e,bt.setNode(He,br),_e.metaGraph.setNode(He,br)),_e=br}bt.setNode(Zt.name,Zt),Zt.parentNode=_e,_e.metaGraph.setNode(Zt.name,Zt)})}(pt,v),function(bt,At){const Rt=bt.getNodeMap();let Zt=[],se=[];const _e=(Ee,He)=>{let br=0;for(;Ee;)He[br++]=Ee.name,Ee=Ee.parentNode;return br-1};At.edges.forEach(Ee=>{Zt=[],se=[];let He=_e(At.nodes[Ee.v],Zt),br=_e(At.nodes[Ee.w],se);for(;Zt[He]===se[br];)if(He--,br--,He<0||br<0)throw Error("No difference found between ancestor paths.");const rn=Rt[Zt[He+1]],Cr=Zt[He],Ar=se[br];let Or=rn.metaGraph.edge(Cr,Ar);Or||(Or=El(Cr,Ar),rn.metaGraph.setEdge(Cr,Ar,Or)),Or.addBaseEdge(Ee,bt)})}(pt,v),pt}function Sl(v,N,K,ot){(K?v.inEdges(N.name):v.outEdges(N.name)).forEach(pt=>{const bt=v.edge(pt);ot.push(bt)})}class Ml{constructor(N){this.hierarchy=N,this.index={},this.hasSubHierarchy={},this.root=new Ce(this.hierarchy.root,this.hierarchy.graphOptions),this.index[N.root.name]=this.root,this.buildSubHierarchy(N.root.name),this.root.expanded=!0}getRenderInfoNodes(){return Object.values(this.index)}getSubHierarchy(){return this.hasSubHierarchy}buildSubHierarchy(N){if(N in this.hasSubHierarchy)return;this.hasSubHierarchy[N]=!0;const K=this.index[N];if(K.node.type!==L.META)return;const ot=K,pt=ot.node.metaGraph,bt=ot.coreGraph;pt.nodes().forEach(_e=>{const Ee=this.getOrCreateRenderNodeByName(_e);bt.setNode(_e,Ee)}),pt.edges().forEach(_e=>{const Ee=pt.edge(_e),He=new Ot(Ee);bt.setEdge(_e.v,_e.w,He)});const At=ot.node.parentNode;if(!At)return;const Rt=this.getRenderNodeByName(At.name),Zt=(_e,...Ee)=>Ee.concat([_e?"IN":"OUT"]).join("~~"),se=this.hierarchy.getBridgeGraph(N);se.edges().forEach(_e=>{const Ee=se.edge(_e),He=!!pt.node(_e.w),[br,rn]=He?[_e.w,_e.v]:[_e.v,_e.w],Cr=da=>{const fa=He?{v:da,w:N}:{v:N,w:da};return Rt.coreGraph.edge(fa)};let Ar=Cr(rn);Ar||(Ar=Cr(Zt(He,rn,At.name)));const Or=Zt(He,N),Nn=Zt(He,rn,N);let jn=bt.node(Nn);if(!jn){let da=bt.node(Or);if(!da){const Ea={name:Or,type:L.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,include:p.UNSPECIFIED,inbound:He,attr:{}};da=new uc(Ea),this.index[Or]=da,bt.setNode(Or,da)}const fa={name:Nn,type:L.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,include:p.UNSPECIFIED,inbound:He,attr:{}};jn=new uc(fa),this.index[Nn]=jn,bt.setNode(Nn,jn),bt.setParent(Nn,Or),da.node.cardinality++}const zn=new Ot(Ee);zn.adjoiningMetaEdge=Ar,He?bt.setEdge(Nn,br,zn):bt.setEdge(br,Nn,zn)})}getOrCreateRenderNodeByName(N){if(!N)return null;if(N in this.index)return this.index[N];const K=this.getNodeByName(N);return K?(this.index[N]=K.isGroupNode?new Ce(K,this.hierarchy.graphOptions):new uc(K),this.index[N]):null}getRenderNodeByName(N){return this.index[N]}getNodeByName(N){return this.hierarchy.node(N)}}class uc{constructor(N){this.node=N,this.expanded=!1,this.x=0,this.y=0,this.coreBox={width:0,height:0},this.outboxWidth=0,this.labelOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.width=N.width||0,this.height=N.height||0,this.displayName=N.name,this.attr=N.attr}}class Ot{constructor(N){this.metaEdge=N,this.adjoiningMetaEdge=null,this.weight=1,this.points=[]}}class Ce extends uc{constructor(N,K){super(N);const ot=N.metaGraph.graph();K.compound=!0,this.coreGraph=sc(ot.name,b.CORE,K)}}function Ke(v,N){v.node.isGroupNode&&function(K,ot){const pt=R(ot);K.coreGraph.nodes().map(bt=>K.coreGraph.node(bt)).forEach(bt=>{var At,Rt,Zt,se,_e,Ee;const{height:He,width:br}=bt;switch(bt.node.type){case L.NODE:Object.assign(bt,pt.nodeSize.node),bt.height=He||pt.nodeSize.node.height,bt.width=br||pt.nodeSize.node.width;break;case L.BRIDGE:Object.assign(bt,pt.nodeSize.bridge);break;case L.META:bt.expanded?Ke(bt,ot):(Object.assign(bt,pt.nodeSize.meta),bt.height=pt.nodeSize.meta.height,bt.width=pt.nodeSize.meta.width);break;default:throw Error("Unrecognized node type: "+bt.node.type)}if(!bt.expanded){const rn=bt.attr;(function(Cr,Ar=!1){if(Cr.coreBox.width=Cr.width,Cr.coreBox.height=Cr.height,!Ar){const Or=`${Cr.displayName}`.length,Nn=3;Cr.width=Math.max(Cr.coreBox.width,Or*Nn)}})(bt,ot&&(bt.node.type===0&&!!(!((Rt=(At=ot==null?void 0:ot.nodeSize)===null||At===void 0?void 0:At.meta)===null||Rt===void 0)&&Rt.width)||bt.node.type===1&&(!!(!((se=(Zt=ot==null?void 0:ot.nodeSize)===null||Zt===void 0?void 0:Zt.node)===null||se===void 0)&&se.width)||!!rn.width)||bt.node.type===2&&!!(!((Ee=(_e=ot==null?void 0:ot.nodeSize)===null||_e===void 0?void 0:_e.bridge)===null||Ee===void 0)&&Ee.width)))}})}(v,N),v.node.type===L.META&&function(K,ot){const pt=R(ot),bt=pt.subScene.meta;Object.assign(K,bt);const{nodeSep:At,rankSep:Rt,edgeSep:Zt,align:se}=pt.graph.meta,_e={nodesep:At,ranksep:Rt,edgesep:Zt,align:se};Object.assign(K.coreBox,function(br,rn){const{ranksep:Cr,nodesep:Ar,edgesep:Or,align:Nn}=rn;Object.assign(br.graph(),{ranksep:Cr,nodesep:Ar,edgesep:Or,align:Nn});const jn=[];if(br.nodes().forEach(Ba=>{br.node(Ba).node.type!==L.BRIDGE&&jn.push(Ba)}),!jn.length)return{width:0,height:0};ad(br);let zn=1/0,da=1/0,fa=-1/0,Ea=-1/0;return jn.forEach(Ba=>{const Oa=br.node(Ba),Ji=.5*Oa.width,Fa=Oa.x-Ji,Wo=Oa.x+Ji;zn=Fa<zn?Fa:zn,fa=Wo>fa?Wo:fa;const ji=.5*Oa.height,ui=Oa.y-ji,Po=Oa.y+ji;da=ui<da?ui:da,Ea=Po>Ea?Po:Ea}),br.edges().forEach(Ba=>{const Oa=br.edge(Ba),Ji=br.node(Oa.metaEdge.v),Fa=br.node(Oa.metaEdge.w);if(Oa.points.length===3&&function(ui){let Po=Hr(ui[0],ui[1]);for(let Fo=1;Fo<ui.length-1;Fo++){const Zo=Hr(ui[Fo],ui[Fo+1]);if(Math.abs(Zo-Po)>1)return!1;Po=Zo}return!0}(Oa.points)){if(Ji!=null){const ui=Ji.expanded?Ji.x:hn(Ji);Oa.points[0].x=ui}if(Fa!=null){const ui=Fa.expanded?Fa.x:hn(Fa);Oa.points[2].x=ui}Oa.points=[Oa.points[0],Oa.points[1]]}const Wo=Oa.points[Oa.points.length-2];Fa!=null&&(Oa.points[Oa.points.length-1]=Br(Wo,Fa));const ji=Oa.points[1];Ji!=null&&(Oa.points[0]=Br(ji,Ji)),Oa.points.forEach(ui=>{zn=ui.x<zn?ui.x:zn,fa=ui.x>fa?ui.x:fa,da=ui.y<da?ui.y:da,Ea=ui.y>Ea?ui.y:Ea})}),br.nodes().forEach(Ba=>{const Oa=br.node(Ba);Oa.x-=zn,Oa.y-=da}),br.edges().forEach(Ba=>{br.edge(Ba).points.forEach(Oa=>{Oa.x-=zn,Oa.y-=da})}),{width:fa-zn,height:Ea-da}}(K.coreGraph,_e));let Ee=0;K.coreGraph.nodeCount()>0&&Ee++;const He=Ee<=1?0:Ee;K.coreBox.width+=He+He,K.coreBox.height=bt.labelHeight+K.coreBox.height,K.width=K.coreBox.width+bt.paddingLeft+bt.paddingRight,K.height=K.paddingTop+K.coreBox.height+K.paddingBottom}(v,N)}function Hr(v,N){const K=N.x-v.x,ot=N.y-v.y;return 180*Math.atan(ot/K)/Math.PI}function hn(v){return v.expanded?v.x:v.x-v.width/2+0+v.coreBox.width/2}function Br(v,N){const K=N.expanded?N.x:hn(N),ot=N.y,pt=v.x-K,bt=v.y-ot;let At,Rt,Zt=N.expanded?N.width:N.coreBox.width,se=N.expanded?N.height:N.coreBox.height;return Math.abs(bt)*Zt/2>Math.abs(pt)*se/2?(bt<0&&(se=-se),At=bt===0?0:se/2*pt/bt,Rt=se/2):(pt<0&&(Zt=-Zt),At=Zt/2,Rt=pt===0?0:Zt/2*bt/pt),{x:K+At,y:ot+Rt}}function Jr(v,N,K){var ot,pt,bt,At;const Rt=v.nodes.filter((Ee,He,br)=>br.findIndex(rn=>rn.id===Ee.id)!==He).map(Ee=>Ee.id);if(Rt.length)throw new Error(`Duplicated ids found: ${Rt.join(", ")}`);const Zt=function(Ee){const He={nodes:[]},br=Ee.compound,rn=Object.keys(br||{}),Cr=new Map,Ar=(Nn,jn=[])=>{if(Cr.has(Nn))return Cr.get(Nn);for(let zn=0;zn<rn.length;zn++){let da=rn[zn];if(br&&br[da].indexOf(Nn)!==-1)return jn.unshift(da),Ar(da,jn)}return jn.length===0&&Cr.set(Nn,jn),jn},Or=Nn=>Ee.edges.filter(jn=>jn.w===Nn).map(jn=>({name:jn.v}));return Ee.nodes.forEach(Nn=>{const jn=Nn.id,zn=[...Ar(jn),jn];let da=Or(jn);He.nodes.push({name:jn,path:zn,inputs:da,width:Nn.width,height:Nn.height,attr:Object.assign({},Nn)})}),He}(v),se=function(Ee,He){const br=(Cr,Ar)=>{for(let Or of Ar.values())if(Or.includes(Cr))return!0;return!1},rn=(Cr,Ar=[])=>{if(Object.keys(Cr).length===0)return[...new Set(Ar)];const Or=new Map(Object.keys(Cr).map(jn=>[jn,Cr[jn]])),Nn={};for(let[jn,zn]of Or)br(jn,Or)?Nn[jn]=zn:Ar=Ar.concat(jn,zn);return rn(Nn,Ar)};return rn(Ee).filter(Cr=>He.includes(Cr))}(v.compound||{},(N==null?void 0:N.expanded)||[]),_e=function(Ee,He){return function(br){return new Ml(br)}(fu(yd(Ee),He))}(Zt,{rankDirection:((pt=(ot=K==null?void 0:K.graph)===null||ot===void 0?void 0:ot.meta)===null||pt===void 0?void 0:pt.rankDir)||(N==null?void 0:N.rankDirection)||m.graph.meta.rankDir,align:((At=(bt=K==null?void 0:K.graph)===null||bt===void 0?void 0:bt.meta)===null||At===void 0?void 0:At.align)||m.graph.meta.align});return function(Ee,He){He.forEach(br=>{const rn=Ee.getRenderInfoNodes().find(Or=>Or.displayName===br);let Cr=rn&&rn.node&&rn.node.name||"";const Ar=Ee.getRenderNodeByName(Cr);if(!Ar)throw new Error(`No nodes found: ${Cr}`);Ar.expanded=!0,Ee.buildSubHierarchy(Cr)})}(_e,se),Ke(_e.root,K),In(_e.root)}function On(v,N=!1){const K=JSON.parse(JSON.stringify(v)),ot={nodes:[K],edges:[...K.edges]};return K.nodes.forEach(function pt(bt){(bt.type===0||bt.type===1)&&ot.nodes.push(bt),bt.type===0&&(ot.edges=ot.edges.concat(bt.edges)),Array.isArray(bt.nodes)&&bt.nodes.forEach(pt)}),N&&ot.nodes.forEach(pt=>{const bt=ot.nodes.find(At=>At.id===pt.parentNodeName);if(bt){const At=bt.x-bt.width/2+bt.paddingLeft,Rt=bt.y-bt.height/2+bt.labelHeight+bt.paddingTop;bt.id!==M&&(pt.x+=At,pt.y+=Rt),pt.type===0&&pt.edges.forEach(Zt=>{Zt.points.forEach(se=>{se.x+=pt.x-pt.width/2+pt.paddingLeft,se.y+=pt.y-pt.height/2+pt.labelHeight+pt.paddingTop})})}}),ot}function Rn(v,N,K,ot){var pt,bt;let At=[];const Rt=((pt=K.find(Ee=>Ee.id===v))===null||pt===void 0?void 0:pt.path)||[],Zt=((bt=K.find(Ee=>Ee.id===N))===null||bt===void 0?void 0:bt.path)||[],se=[M,...Rt].slice(0,Rt.length).reverse(),_e=[M,...Zt].slice(0,Zt.length);return se.forEach(Ee=>{const He=K.find(br=>br.id===Ee);At=At.concat(He.edges.filter(br=>br.baseEdgeList.some(rn=>rn.v===((ot==null?void 0:ot.v)||v)&&rn.w===((ot==null?void 0:ot.w)||N))))}),_e.filter(Ee=>!se.includes(Ee)).forEach(Ee=>{const He=K.find(br=>br.id===Ee);At=At.concat(He.edges.filter(br=>br.baseEdgeList.some(rn=>rn.v===((ot==null?void 0:ot.v)||v)&&rn.w===((ot==null?void 0:ot.w)||N))))}),At}function In(v){const N=v.coreGraph.nodes().map(ot=>v.coreGraph.node(ot));return Object.assign(Object.assign({},Ln(v)),{expanded:v.expanded,nodes:v.expanded?(K=N,K.map(ot=>ot.node.type===L.META?In(ot):Ln(ot))):[],edges:v.expanded?Fn(v):[]});var K}function Ln(v){return{id:v.node.name,name:v.node.name,type:v.node.type,cardinality:v.node.cardinality,attr:v.attr,parentNodeName:v.node.parentNode?v.node.parentNode.name:null,coreBox:Object.assign({},v.coreBox),x:v.x,y:v.y,width:v.width,height:v.height,radius:v.radius,labelHeight:v.labelHeight,labelOffset:v.labelOffset,outboxWidth:v.outboxWidth,paddingLeft:v.paddingLeft,paddingTop:v.paddingTop,paddingRight:v.paddingRight,paddingBottom:v.paddingBottom,path:v.node.path}}function Fn(v){return v.coreGraph.edges().map(N=>({renderInfoEdge:v.coreGraph.edge(N),edge:N})).filter(({renderInfoEdge:N})=>N.metaEdge).map(({edge:N,renderInfoEdge:K})=>{const ot=function(pt,bt){const At=bt.points.map(Rt=>Object.assign({},Rt));if(bt.adjoiningMetaEdge){const Rt=bt.adjoiningMetaEdge.points,Zt=bt.metaEdge.inbound,se=Zt?Rt[Rt.length-1]:Rt[0],_e=At[Zt?0:At.length-1],Ee=pt.x-pt.width/2,He=pt.y-pt.height/2,br=se.x-Ee,rn=se.y-He,Cr=-pt.paddingLeft,Ar=-(pt.paddingTop+pt.labelHeight);_e.x=br+Cr,_e.y=rn+Ar}return At}(v,K);return{adjoiningEdge:K.adjoiningMetaEdge?{w:K.adjoiningMetaEdge.metaEdge.w,v:K.adjoiningMetaEdge.metaEdge.v}:null,inbound:K.metaEdge.inbound,w:N.w,v:N.v,points:ot,weight:K.weight,baseEdgeList:K.metaEdge.baseEdgeList,parentNodeName:v.node.name}})}},533852:function(We,G,_){(function(m,R){We.exports=R(_(727484))})(this,function(m){"use strict";function R(P){return P&&typeof P=="object"&&"default"in P?P:{default:P}}var w=R(m),M={name:"zh-cn",weekdays:"\u661F\u671F\u65E5_\u661F\u671F\u4E00_\u661F\u671F\u4E8C_\u661F\u671F\u4E09_\u661F\u671F\u56DB_\u661F\u671F\u4E94_\u661F\u671F\u516D".split("_"),weekdaysShort:"\u5468\u65E5_\u5468\u4E00_\u5468\u4E8C_\u5468\u4E09_\u5468\u56DB_\u5468\u4E94_\u5468\u516D".split("_"),weekdaysMin:"\u65E5_\u4E00_\u4E8C_\u4E09_\u56DB_\u4E94_\u516D".split("_"),months:"\u4E00\u6708_\u4E8C\u6708_\u4E09\u6708_\u56DB\u6708_\u4E94\u6708_\u516D\u6708_\u4E03\u6708_\u516B\u6708_\u4E5D\u6708_\u5341\u6708_\u5341\u4E00\u6708_\u5341\u4E8C\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),ordinal:function(P,L){return L==="W"?P+"\u5468":P+"\u65E5"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY\u5E74M\u6708D\u65E5",LLL:"YYYY\u5E74M\u6708D\u65E5Ah\u70B9mm\u5206",LLLL:"YYYY\u5E74M\u6708D\u65E5ddddAh\u70B9mm\u5206",l:"YYYY/M/D",ll:"YYYY\u5E74M\u6708D\u65E5",lll:"YYYY\u5E74M\u6708D\u65E5 HH:mm",llll:"YYYY\u5E74M\u6708D\u65E5dddd HH:mm"},relativeTime:{future:"%s\u5185",past:"%s\u524D",s:"\u51E0\u79D2",m:"1 \u5206\u949F",mm:"%d \u5206\u949F",h:"1 \u5C0F\u65F6",hh:"%d \u5C0F\u65F6",d:"1 \u5929",dd:"%d \u5929",M:"1 \u4E2A\u6708",MM:"%d \u4E2A\u6708",y:"1 \u5E74",yy:"%d \u5E74"},meridiem:function(P,L){var p=100*P+L;return p<600?"\u51CC\u6668":p<900?"\u65E9\u4E0A":p<1100?"\u4E0A\u5348":p<1300?"\u4E2D\u5348":p<1800?"\u4E0B\u5348":"\u665A\u4E0A"}};return w.default.locale(M,null,!0),M})},414144:function(We,G){var _,m,R;(function(w,M){if(!0)m=[G,We],_=M,R=typeof _=="function"?_.apply(G,m):_,R!==void 0&&(We.exports=R);else var P})(this,function(w,M){"use strict";var P={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function L(){return"jsonp_"+Date.now()+"_"+Math.ceil(Math.random()*1e5)}function p(x){try{delete window[x]}catch(g){window[x]=void 0}}function b(x){var g=document.getElementById(x);g&&document.getElementsByTagName("head")[0].removeChild(g)}function S(x){var g=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],T=x,E=g.timeout||P.timeout,O=g.jsonpCallback||P.jsonpCallback,k=void 0;return new Promise(function(y,l){var U=g.jsonpCallbackFunction||L(),X=O+"_"+U;window[U]=function(W){y({ok:!0,json:function(){return Promise.resolve(W)}}),k&&clearTimeout(k),b(X),p(U)},T+=T.indexOf("?")===-1?"?":"&";var F=document.createElement("script");F.setAttribute("src",""+T+O+"="+U),g.charset&&F.setAttribute("charset",g.charset),g.nonce&&F.setAttribute("nonce",g.nonce),g.referrerPolicy&&F.setAttribute("referrerPolicy",g.referrerPolicy),F.id=X,document.getElementsByTagName("head")[0].appendChild(F),k=setTimeout(function(){l(new Error("JSONP request to "+x+" timed out")),p(U),b(X),window[U]=function(){p(U)}},E),F.onerror=function(){l(new Error("JSONP request to "+x+" failed")),p(U),b(X),k&&clearTimeout(k)}})}M.exports=S})},417648:function(We){"use strict";var G="Function.prototype.bind called on incompatible ",_=Array.prototype.slice,m=Object.prototype.toString,R="[object Function]";We.exports=function(M){var P=this;if(typeof P!="function"||m.call(P)!==R)throw new TypeError(G+P);for(var L=_.call(arguments,1),p,b=function(){if(this instanceof p){var E=P.apply(this,L.concat(_.call(arguments)));return Object(E)===E?E:this}else return P.apply(M,L.concat(_.call(arguments)))},S=Math.max(0,P.length-L.length),x=[],g=0;g<S;g++)x.push("$"+g);if(p=Function("binder","return function ("+x.join(",")+"){ return binder.apply(this,arguments); }")(b),P.prototype){var T=function(){};T.prototype=P.prototype,p.prototype=new T,T.prototype=null}return p}},158612:function(We,G,_){"use strict";var m=_(417648);We.exports=Function.prototype.bind||m},340210:function(We,G,_){"use strict";var m,R=SyntaxError,w=Function,M=TypeError,P=function(yt){try{return w('"use strict"; return ('+yt+").constructor;")()}catch(dt){}},L=Object.getOwnPropertyDescriptor;if(L)try{L({},"")}catch(yt){L=null}var p=function(){throw new M},b=L?function(){try{return arguments.callee,p}catch(yt){try{return L(arguments,"callee").get}catch(dt){return p}}}():p,S=_(241405)(),x=_(728185)(),g=Object.getPrototypeOf||(x?function(yt){return yt.__proto__}:null),T={},E=typeof Uint8Array=="undefined"||!g?m:g(Uint8Array),O={"%AggregateError%":typeof AggregateError=="undefined"?m:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?m:ArrayBuffer,"%ArrayIteratorPrototype%":S&&g?g([][Symbol.iterator]()):m,"%AsyncFromSyncIteratorPrototype%":m,"%AsyncFunction%":T,"%AsyncGenerator%":T,"%AsyncGeneratorFunction%":T,"%AsyncIteratorPrototype%":T,"%Atomics%":typeof Atomics=="undefined"?m:Atomics,"%BigInt%":typeof BigInt=="undefined"?m:BigInt,"%BigInt64Array%":typeof BigInt64Array=="undefined"?m:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array=="undefined"?m:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?m:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?m:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?m:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?m:FinalizationRegistry,"%Function%":w,"%GeneratorFunction%":T,"%Int8Array%":typeof Int8Array=="undefined"?m:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?m:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?m:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":S&&g?g(g([][Symbol.iterator]())):m,"%JSON%":typeof JSON=="object"?JSON:m,"%Map%":typeof Map=="undefined"?m:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!S||!g?m:g(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?m:Promise,"%Proxy%":typeof Proxy=="undefined"?m:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?m:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?m:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!S||!g?m:g(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?m:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":S&&g?g(""[Symbol.iterator]()):m,"%Symbol%":S?Symbol:m,"%SyntaxError%":R,"%ThrowTypeError%":b,"%TypedArray%":E,"%TypeError%":M,"%Uint8Array%":typeof Uint8Array=="undefined"?m:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?m:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?m:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?m:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?m:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?m:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?m:WeakSet};if(g)try{null.error}catch(yt){var k=g(g(yt));O["%Error.prototype%"]=k}var y=function yt(dt){var Ft;if(dt==="%AsyncFunction%")Ft=P("async function () {}");else if(dt==="%GeneratorFunction%")Ft=P("function* () {}");else if(dt==="%AsyncGeneratorFunction%")Ft=P("async function* () {}");else if(dt==="%AsyncGenerator%"){var wt=yt("%AsyncGeneratorFunction%");wt&&(Ft=wt.prototype)}else if(dt==="%AsyncIteratorPrototype%"){var St=yt("%AsyncGenerator%");St&&g&&(Ft=g(St.prototype))}return O[dt]=Ft,Ft},l={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},U=_(158612),X=_(117642),F=U.call(Function.call,Array.prototype.concat),W=U.call(Function.apply,Array.prototype.splice),j=U.call(Function.call,String.prototype.replace),V=U.call(Function.call,String.prototype.slice),q=U.call(Function.call,RegExp.prototype.exec),$=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,J=/\\(\\)?/g,ut=function(dt){var Ft=V(dt,0,1),wt=V(dt,-1);if(Ft==="%"&&wt!=="%")throw new R("invalid intrinsic syntax, expected closing `%`");if(wt==="%"&&Ft!=="%")throw new R("invalid intrinsic syntax, expected opening `%`");var St=[];return j(dt,$,function(et,it,Tt,Nt){St[St.length]=Tt?j(Nt,J,"$1"):it||et}),St},nt=function(dt,Ft){var wt=dt,St;if(X(l,wt)&&(St=l[wt],wt="%"+St[0]+"%"),X(O,wt)){var et=O[wt];if(et===T&&(et=y(wt)),typeof et=="undefined"&&!Ft)throw new M("intrinsic "+dt+" exists, but is not available. Please file an issue!");return{alias:St,name:wt,value:et}}throw new R("intrinsic "+dt+" does not exist!")};We.exports=function(dt,Ft){if(typeof dt!="string"||dt.length===0)throw new M("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Ft!="boolean")throw new M('"allowMissing" argument must be a boolean');if(q(/^%?[^%]*%?$/,dt)===null)throw new R("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var wt=ut(dt),St=wt.length>0?wt[0]:"",et=nt("%"+St+"%",Ft),it=et.name,Tt=et.value,Nt=!1,st=et.alias;st&&(St=st[0],W(wt,F([0,1],st)));for(var xt=1,zt=!0;xt<wt.length;xt+=1){var Wt=wt[xt],_t=V(Wt,0,1),Xt=V(Wt,-1);if((_t==='"'||_t==="'"||_t==="`"||Xt==='"'||Xt==="'"||Xt==="`")&&_t!==Xt)throw new R("property names with quotes must have matching quotes");if((Wt==="constructor"||!zt)&&(Nt=!0),St+="."+Wt,it="%"+St+"%",X(O,it))Tt=O[it];else if(Tt!=null){if(!(Wt in Tt)){if(!Ft)throw new M("base intrinsic for "+dt+" exists, but the property is not available.");return}if(L&&xt+1>=wt.length){var te=L(Tt,Wt);zt=!!te,zt&&"get"in te&&!("originalValue"in te.get)?Tt=te.get:Tt=Tt[Wt]}else zt=X(Tt,Wt),Tt=Tt[Wt];zt&&!Nt&&(O[it]=Tt)}}return Tt}},73633:function(We,G,_){"use strict";_.r(G),_.d(G,{ARRAY_TYPE:function(){return R},EPSILON:function(){return m},RANDOM:function(){return w},equals:function(){return p},setMatrixArrayType:function(){return M},toRadian:function(){return L}});var m=1e-6,R=typeof Float32Array!="undefined"?Float32Array:Array,w=Math.random;function M(b){R=b}var P=Math.PI/180;function L(b){return b*P}function p(b,S){return Math.abs(b-S)<=m*Math.max(1,Math.abs(b),Math.abs(S))}Math.hypot||(Math.hypot=function(){for(var b=0,S=arguments.length;S--;)b+=arguments[S]*arguments[S];return Math.sqrt(b)})},858204:function(We,G,_){"use strict";_.r(G),_.d(G,{glMatrix:function(){return p},mat2:function(){return m},mat2d:function(){return R},mat3:function(){return qe},mat4:function(){return w},quat:function(){return P},quat2:function(){return L},vec2:function(){return os},vec3:function(){return Wr},vec4:function(){return M}});var m={};_.r(m),_.d(m,{LDU:function(){return $},add:function(){return J},adjoint:function(){return y},clone:function(){return S},copy:function(){return x},create:function(){return b},determinant:function(){return l},equals:function(){return yt},exactEquals:function(){return nt},frob:function(){return q},fromRotation:function(){return W},fromScaling:function(){return j},fromValues:function(){return T},identity:function(){return g},invert:function(){return k},mul:function(){return wt},multiply:function(){return U},multiplyScalar:function(){return dt},multiplyScalarAndAdd:function(){return Ft},rotate:function(){return X},scale:function(){return F},set:function(){return E},str:function(){return V},sub:function(){return St},subtract:function(){return ut},transpose:function(){return O}});var R={};_.r(R),_.d(R,{add:function(){return de},clone:function(){return it},copy:function(){return Tt},create:function(){return et},determinant:function(){return Wt},equals:function(){return vt},exactEquals:function(){return he},frob:function(){return ee},fromRotation:function(){return fe},fromScaling:function(){return Gt},fromTranslation:function(){return ae},fromValues:function(){return st},identity:function(){return Nt},invert:function(){return zt},mul:function(){return ie},multiply:function(){return _t},multiplyScalar:function(){return be},multiplyScalarAndAdd:function(){return ke},rotate:function(){return Xt},scale:function(){return te},set:function(){return xt},str:function(){return Ne},sub:function(){return Pe},subtract:function(){return ze},translate:function(){return ue}});var w={};_.r(w),_.d(w,{add:function(){return ye},adjoint:function(){return dr},clone:function(){return lr},copy:function(){return fr},create:function(){return Qe},determinant:function(){return nr},equals:function(){return xn},exactEquals:function(){return Ur},frob:function(){return Oe},fromQuat:function(){return ht},fromQuat2:function(){return Kt},fromRotation:function(){return an},fromRotationTranslation:function(){return tr},fromRotationTranslationScale:function(){return Dt},fromRotationTranslationScaleOrigin:function(){return Vt},fromScaling:function(){return Kr},fromTranslation:function(){return Fr},fromValues:function(){return kr},fromXRotation:function(){return yn},fromYRotation:function(){return bn},fromZRotation:function(){return tt},frustum:function(){return kt},getRotation:function(){return we},getScaling:function(){return Et},getTranslation:function(){return $t},identity:function(){return fn},invert:function(){return Je},lookAt:function(){return Pt},mul:function(){return rr},multiply:function(){return oe},multiplyScalar:function(){return wr},multiplyScalarAndAdd:function(){return er},ortho:function(){return H},orthoNO:function(){return I},orthoZO:function(){return mt},perspective:function(){return at},perspectiveFromFieldOfView:function(){return C},perspectiveNO:function(){return Q},perspectiveZO:function(){return B},rotate:function(){return Nr},rotateX:function(){return ln},rotateY:function(){return en},rotateZ:function(){return Dr},scale:function(){return Lr},set:function(){return En},str:function(){return Jt},sub:function(){return xr},subtract:function(){return Ze},targetTo:function(){return Lt},translate:function(){return Te},transpose:function(){return Vr}});var M={};_.r(M),_.d(M,{add:function(){return xe},ceil:function(){return vn},clone:function(){return ce},copy:function(){return ge},create:function(){return Gr},cross:function(){return io},dist:function(){return Ai},distance:function(){return ba},div:function(){return Go},divide:function(){return Mr},dot:function(){return ao},equals:function(){return ro},exactEquals:function(){return zo},floor:function(){return Wn},forEach:function(){return ve},fromValues:function(){return Yt},inverse:function(){return Mi},len:function(){return oa},length:function(){return Yi},lerp:function(){return wa},max:function(){return ea},min:function(){return Sn},mul:function(){return Ao},multiply:function(){return gr},negate:function(){return ti},normalize:function(){return Vi},random:function(){return oo},round:function(){return wn},scale:function(){return Hn},scaleAndAdd:function(){return la},set:function(){return Ie},sqrDist:function(){return $i},sqrLen:function(){return Qt},squaredDistance:function(){return xa},squaredLength:function(){return ri},str:function(){return so},sub:function(){return vo},subtract:function(){return Ye},transformMat4:function(){return To},transformQuat:function(){return ii},zero:function(){return Xi}});var P={};_.r(P),_.d(P,{add:function(){return _i},calculateW:function(){return qn},clone:function(){return za},conjugate:function(){return ei},copy:function(){return Da},create:function(){return Ge},dot:function(){return qi},equals:function(){return Xa},exactEquals:function(){return fo},exp:function(){return ga},fromEuler:function(){return Ii},fromMat3:function(){return Ga},fromValues:function(){return Va},getAngle:function(){return Pr},getAxisAngle:function(){return Yr},identity:function(){return pr},invert:function(){return fi},len:function(){return rs},length:function(){return es},lerp:function(){return po},ln:function(){return ya},mul:function(){return ki},multiply:function(){return cn},normalize:function(){return zi},pow:function(){return vi},random:function(){return ua},rotateX:function(){return Mn},rotateY:function(){return Bn},rotateZ:function(){return sa},rotationTo:function(){return go},scale:function(){return uo},set:function(){return Ri},setAxes:function(){return Hi},setAxisAngle:function(){return Xr},slerp:function(){return Sa},sqlerp:function(){return No},sqrLen:function(){return ni},squaredLength:function(){return no},str:function(){return yi}});var L={};_.r(L),_.d(L,{add:function(){return Io},clone:function(){return Gi},conjugate:function(){return hu},copy:function(){return Is},create:function(){return as},dot:function(){return js},equals:function(){return Vo},exactEquals:function(){return yo},fromMat4:function(){return fs},fromRotation:function(){return us},fromRotationTranslation:function(){return Ss},fromRotationTranslationValues:function(){return ss},fromTranslation:function(){return mo},fromValues:function(){return Ro},getDual:function(){return cr},getReal:function(){return Xe},getTranslation:function(){return _n},identity:function(){return Aa},invert:function(){return Vs},len:function(){return Ds},length:function(){return ds},lerp:function(){return Ks},mul:function(){return ks},multiply:function(){return cs},normalize:function(){return Eu},rotateAroundAxis:function(){return Qi},rotateByQuatAppend:function(){return jo},rotateByQuatPrepend:function(){return Rs},rotateX:function(){return qa},rotateY:function(){return Bi},rotateZ:function(){return Oo},scale:function(){return ls},set:function(){return Ut},setDual:function(){return on},setReal:function(){return _r},sqrLen:function(){return is},squaredLength:function(){return Bs},str:function(){return wu},translate:function(){return $n}});var p=_(73633);function b(){var h=new p.ARRAY_TYPE(4);return p.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0),h[0]=1,h[3]=1,h}function S(h){var Y=new p.ARRAY_TYPE(4);return Y[0]=h[0],Y[1]=h[1],Y[2]=h[2],Y[3]=h[3],Y}function x(h,Y){return h[0]=Y[0],h[1]=Y[1],h[2]=Y[2],h[3]=Y[3],h}function g(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h}function T(h,Y,Mt,Bt){var qt=new p.ARRAY_TYPE(4);return qt[0]=h,qt[1]=Y,qt[2]=Mt,qt[3]=Bt,qt}function E(h,Y,Mt,Bt,qt){return h[0]=Y,h[1]=Mt,h[2]=Bt,h[3]=qt,h}function O(h,Y){if(h===Y){var Mt=Y[1];h[1]=Y[2],h[2]=Mt}else h[0]=Y[0],h[1]=Y[2],h[2]=Y[1],h[3]=Y[3];return h}function k(h,Y){var Mt=Y[0],Bt=Y[1],qt=Y[2],pe=Y[3],me=Mt*pe-qt*Bt;return me?(me=1/me,h[0]=pe*me,h[1]=-Bt*me,h[2]=-qt*me,h[3]=Mt*me,h):null}function y(h,Y){var Mt=Y[0];return h[0]=Y[3],h[1]=-Y[1],h[2]=-Y[2],h[3]=Mt,h}function l(h){return h[0]*h[3]-h[2]*h[1]}function U(h,Y,Mt){var Bt=Y[0],qt=Y[1],pe=Y[2],me=Y[3],De=Mt[0],Ue=Mt[1],$e=Mt[2],mr=Mt[3];return h[0]=Bt*De+pe*Ue,h[1]=qt*De+me*Ue,h[2]=Bt*$e+pe*mr,h[3]=qt*$e+me*mr,h}function X(h,Y,Mt){var Bt=Y[0],qt=Y[1],pe=Y[2],me=Y[3],De=Math.sin(Mt),Ue=Math.cos(Mt);return h[0]=Bt*Ue+pe*De,h[1]=qt*Ue+me*De,h[2]=Bt*-De+pe*Ue,h[3]=qt*-De+me*Ue,h}function F(h,Y,Mt){var Bt=Y[0],qt=Y[1],pe=Y[2],me=Y[3],De=Mt[0],Ue=Mt[1];return h[0]=Bt*De,h[1]=qt*De,h[2]=pe*Ue,h[3]=me*Ue,h}function W(h,Y){var Mt=Math.sin(Y),Bt=Math.cos(Y);return h[0]=Bt,h[1]=Mt,h[2]=-Mt,h[3]=Bt,h}function j(h,Y){return h[0]=Y[0],h[1]=0,h[2]=0,h[3]=Y[1],h}function V(h){return"mat2("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+")"}function q(h){return Math.hypot(h[0],h[1],h[2],h[3])}function $(h,Y,Mt,Bt){return h[2]=Bt[2]/Bt[0],Mt[0]=Bt[0],Mt[1]=Bt[1],Mt[3]=Bt[3]-h[2]*Mt[1],[h,Y,Mt]}function J(h,Y,Mt){return h[0]=Y[0]+Mt[0],h[1]=Y[1]+Mt[1],h[2]=Y[2]+Mt[2],h[3]=Y[3]+Mt[3],h}function ut(h,Y,Mt){return h[0]=Y[0]-Mt[0],h[1]=Y[1]-Mt[1],h[2]=Y[2]-Mt[2],h[3]=Y[3]-Mt[3],h}function nt(h,Y){return h[0]===Y[0]&&h[1]===Y[1]&&h[2]===Y[2]&&h[3]===Y[3]}function yt(h,Y){var Mt=h[0],Bt=h[1],qt=h[2],pe=h[3],me=Y[0],De=Y[1],Ue=Y[2],$e=Y[3];return Math.abs(Mt-me)<=p.EPSILON*Math.max(1,Math.abs(Mt),Math.abs(me))&&Math.abs(Bt-De)<=p.EPSILON*Math.max(1,Math.abs(Bt),Math.abs(De))&&Math.abs(qt-Ue)<=p.EPSILON*Math.max(1,Math.abs(qt),Math.abs(Ue))&&Math.abs(pe-$e)<=p.EPSILON*Math.max(1,Math.abs(pe),Math.abs($e))}function dt(h,Y,Mt){return h[0]=Y[0]*Mt,h[1]=Y[1]*Mt,h[2]=Y[2]*Mt,h[3]=Y[3]*Mt,h}function Ft(h,Y,Mt,Bt){return h[0]=Y[0]+Mt[0]*Bt,h[1]=Y[1]+Mt[1]*Bt,h[2]=Y[2]+Mt[2]*Bt,h[3]=Y[3]+Mt[3]*Bt,h}var wt=U,St=ut;function et(){var h=new p.ARRAY_TYPE(6);return p.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0,h[4]=0,h[5]=0),h[0]=1,h[3]=1,h}function it(h){var Y=new p.ARRAY_TYPE(6);return Y[0]=h[0],Y[1]=h[1],Y[2]=h[2],Y[3]=h[3],Y[4]=h[4],Y[5]=h[5],Y}function Tt(h,Y){return h[0]=Y[0],h[1]=Y[1],h[2]=Y[2],h[3]=Y[3],h[4]=Y[4],h[5]=Y[5],h}function Nt(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h[4]=0,h[5]=0,h}function st(h,Y,Mt,Bt,qt,pe){var me=new p.ARRAY_TYPE(6);return me[0]=h,me[1]=Y,me[2]=Mt,me[3]=Bt,me[4]=qt,me[5]=pe,me}function xt(h,Y,Mt,Bt,qt,pe,me){return h[0]=Y,h[1]=Mt,h[2]=Bt,h[3]=qt,h[4]=pe,h[5]=me,h}function zt(h,Y){var Mt=Y[0],Bt=Y[1],qt=Y[2],pe=Y[3],me=Y[4],De=Y[5],Ue=Mt*pe-Bt*qt;return Ue?(Ue=1/Ue,h[0]=pe*Ue,h[1]=-Bt*Ue,h[2]=-qt*Ue,h[3]=Mt*Ue,h[4]=(qt*De-pe*me)*Ue,h[5]=(Bt*me-Mt*De)*Ue,h):null}function Wt(h){return h[0]*h[3]-h[1]*h[2]}function _t(h,Y,Mt){var Bt=Y[0],qt=Y[1],pe=Y[2],me=Y[3],De=Y[4],Ue=Y[5],$e=Mt[0],mr=Mt[1],qr=Mt[2],tn=Mt[3],Qr=Mt[4],Tn=Mt[5];return h[0]=Bt*$e+pe*mr,h[1]=qt*$e+me*mr,h[2]=Bt*qr+pe*tn,h[3]=qt*qr+me*tn,h[4]=Bt*Qr+pe*Tn+De,h[5]=qt*Qr+me*Tn+Ue,h}function Xt(h,Y,Mt){var Bt=Y[0],qt=Y[1],pe=Y[2],me=Y[3],De=Y[4],Ue=Y[5],$e=Math.sin(Mt),mr=Math.cos(Mt);return h[0]=Bt*mr+pe*$e,h[1]=qt*mr+me*$e,h[2]=Bt*-$e+pe*mr,h[3]=qt*-$e+me*mr,h[4]=De,h[5]=Ue,h}function te(h,Y,Mt){var Bt=Y[0],qt=Y[1],pe=Y[2],me=Y[3],De=Y[4],Ue=Y[5],$e=Mt[0],mr=Mt[1];return h[0]=Bt*$e,h[1]=qt*$e,h[2]=pe*mr,h[3]=me*mr,h[4]=De,h[5]=Ue,h}function ue(h,Y,Mt){var Bt=Y[0],qt=Y[1],pe=Y[2],me=Y[3],De=Y[4],Ue=Y[5],$e=Mt[0],mr=Mt[1];return h[0]=Bt,h[1]=qt,h[2]=pe,h[3]=me,h[4]=Bt*$e+pe*mr+De,h[5]=qt*$e+me*mr+Ue,h}function fe(h,Y){var Mt=Math.sin(Y),Bt=Math.cos(Y);return h[0]=Bt,h[1]=Mt,h[2]=-Mt,h[3]=Bt,h[4]=0,h[5]=0,h}function Gt(h,Y){return h[0]=Y[0],h[1]=0,h[2]=0,h[3]=Y[1],h[4]=0,h[5]=0,h}function ae(h,Y){return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h[4]=Y[0],h[5]=Y[1],h}function Ne(h){return"mat2d("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+")"}function ee(h){return Math.hypot(h[0],h[1],h[2],h[3],h[4],h[5],1)}function de(h,Y,Mt){return h[0]=Y[0]+Mt[0],h[1]=Y[1]+Mt[1],h[2]=Y[2]+Mt[2],h[3]=Y[3]+Mt[3],h[4]=Y[4]+Mt[4],h[5]=Y[5]+Mt[5],h}function ze(h,Y,Mt){return h[0]=Y[0]-Mt[0],h[1]=Y[1]-Mt[1],h[2]=Y[2]-Mt[2],h[3]=Y[3]-Mt[3],h[4]=Y[4]-Mt[4],h[5]=Y[5]-Mt[5],h}function be(h,Y,Mt){return h[0]=Y[0]*Mt,h[1]=Y[1]*Mt,h[2]=Y[2]*Mt,h[3]=Y[3]*Mt,h[4]=Y[4]*Mt,h[5]=Y[5]*Mt,h}function ke(h,Y,Mt,Bt){return h[0]=Y[0]+Mt[0]*Bt,h[1]=Y[1]+Mt[1]*Bt,h[2]=Y[2]+Mt[2]*Bt,h[3]=Y[3]+Mt[3]*Bt,h[4]=Y[4]+Mt[4]*Bt,h[5]=Y[5]+Mt[5]*Bt,h}function he(h,Y){return h[0]===Y[0]&&h[1]===Y[1]&&h[2]===Y[2]&&h[3]===Y[3]&&h[4]===Y[4]&&h[5]===Y[5]}function vt(h,Y){var Mt=h[0],Bt=h[1],qt=h[2],pe=h[3],me=h[4],De=h[5],Ue=Y[0],$e=Y[1],mr=Y[2],qr=Y[3],tn=Y[4],Qr=Y[5];return Math.abs(Mt-Ue)<=p.EPSILON*Math.max(1,Math.abs(Mt),Math.abs(Ue))&&Math.abs(Bt-$e)<=p.EPSILON*Math.max(1,Math.abs(Bt),Math.abs($e))&&Math.abs(qt-mr)<=p.EPSILON*Math.max(1,Math.abs(qt),Math.abs(mr))&&Math.abs(pe-qr)<=p.EPSILON*Math.max(1,Math.abs(pe),Math.abs(qr))&&Math.abs(me-tn)<=p.EPSILON*Math.max(1,Math.abs(me),Math.abs(tn))&&Math.abs(De-Qr)<=p.EPSILON*Math.max(1,Math.abs(De),Math.abs(Qr))}var ie=_t,Pe=ze,qe=_(935600);function Qe(){var h=new p.ARRAY_TYPE(16);return p.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0),h[0]=1,h[5]=1,h[10]=1,h[15]=1,h}function lr(h){var Y=new p.ARRAY_TYPE(16);return Y[0]=h[0],Y[1]=h[1],Y[2]=h[2],Y[3]=h[3],Y[4]=h[4],Y[5]=h[5],Y[6]=h[6],Y[7]=h[7],Y[8]=h[8],Y[9]=h[9],Y[10]=h[10],Y[11]=h[11],Y[12]=h[12],Y[13]=h[13],Y[14]=h[14],Y[15]=h[15],Y}function fr(h,Y){return h[0]=Y[0],h[1]=Y[1],h[2]=Y[2],h[3]=Y[3],h[4]=Y[4],h[5]=Y[5],h[6]=Y[6],h[7]=Y[7],h[8]=Y[8],h[9]=Y[9],h[10]=Y[10],h[11]=Y[11],h[12]=Y[12],h[13]=Y[13],h[14]=Y[14],h[15]=Y[15],h}function kr(h,Y,Mt,Bt,qt,pe,me,De,Ue,$e,mr,qr,tn,Qr,Tn,Un){var dn=new p.ARRAY_TYPE(16);return dn[0]=h,dn[1]=Y,dn[2]=Mt,dn[3]=Bt,dn[4]=qt,dn[5]=pe,dn[6]=me,dn[7]=De,dn[8]=Ue,dn[9]=$e,dn[10]=mr,dn[11]=qr,dn[12]=tn,dn[13]=Qr,dn[14]=Tn,dn[15]=Un,dn}function En(h,Y,Mt,Bt,qt,pe,me,De,Ue,$e,mr,qr,tn,Qr,Tn,Un,dn){return h[0]=Y,h[1]=Mt,h[2]=Bt,h[3]=qt,h[4]=pe,h[5]=me,h[6]=De,h[7]=Ue,h[8]=$e,h[9]=mr,h[10]=qr,h[11]=tn,h[12]=Qr,h[13]=Tn,h[14]=Un,h[15]=dn,h}function fn(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function Vr(h,Y){if(h===Y){var Mt=Y[1],Bt=Y[2],qt=Y[3],pe=Y[6],me=Y[7],De=Y[11];h[1]=Y[4],h[2]=Y[8],h[3]=Y[12],h[4]=Mt,h[6]=Y[9],h[7]=Y[13],h[8]=Bt,h[9]=pe,h[11]=Y[14],h[12]=qt,h[13]=me,h[14]=De}else h[0]=Y[0],h[1]=Y[4],h[2]=Y[8],h[3]=Y[12],h[4]=Y[1],h[5]=Y[5],h[6]=Y[9],h[7]=Y[13],h[8]=Y[2],h[9]=Y[6],h[10]=Y[10],h[11]=Y[14],h[12]=Y[3],h[13]=Y[7],h[14]=Y[11],h[15]=Y[15];return h}function Je(h,Y){var Mt=Y[0],Bt=Y[1],qt=Y[2],pe=Y[3],me=Y[4],De=Y[5],Ue=Y[6],$e=Y[7],mr=Y[8],qr=Y[9],tn=Y[10],Qr=Y[11],Tn=Y[12],Un=Y[13],dn=Y[14],ra=Y[15],Ha=Mt*De-Bt*me,Za=Mt*Ue-qt*me,Ua=Mt*$e-pe*me,Ma=Bt*Ue-qt*De,Ra=Bt*$e-pe*De,Do=qt*$e-pe*Ue,Eo=mr*Un-qr*Tn,bo=mr*dn-tn*Tn,wo=mr*ra-Qr*Tn,So=qr*dn-tn*Un,ko=qr*ra-Qr*Un,Bo=tn*ra-Qr*dn,ci=Ha*Bo-Za*ko+Ua*So+Ma*wo-Ra*bo+Do*Eo;return ci?(ci=1/ci,h[0]=(De*Bo-Ue*ko+$e*So)*ci,h[1]=(qt*ko-Bt*Bo-pe*So)*ci,h[2]=(Un*Do-dn*Ra+ra*Ma)*ci,h[3]=(tn*Ra-qr*Do-Qr*Ma)*ci,h[4]=(Ue*wo-me*Bo-$e*bo)*ci,h[5]=(Mt*Bo-qt*wo+pe*bo)*ci,h[6]=(dn*Ua-Tn*Do-ra*Za)*ci,h[7]=(mr*Do-tn*Ua+Qr*Za)*ci,h[8]=(me*ko-De*wo+$e*Eo)*ci,h[9]=(Bt*wo-Mt*ko-pe*Eo)*ci,h[10]=(Tn*Ra-Un*Ua+ra*Ha)*ci,h[11]=(qr*Ua-mr*Ra-Qr*Ha)*ci,h[12]=(De*bo-me*So-Ue*Eo)*ci,h[13]=(Mt*So-Bt*bo+qt*Eo)*ci,h[14]=(Un*Za-Tn*Ma-dn*Ha)*ci,h[15]=(mr*Ma-qr*Za+tn*Ha)*ci,h):null}function dr(h,Y){var Mt=Y[0],Bt=Y[1],qt=Y[2],pe=Y[3],me=Y[4],De=Y[5],Ue=Y[6],$e=Y[7],mr=Y[8],qr=Y[9],tn=Y[10],Qr=Y[11],Tn=Y[12],Un=Y[13],dn=Y[14],ra=Y[15];return h[0]=De*(tn*ra-Qr*dn)-qr*(Ue*ra-$e*dn)+Un*(Ue*Qr-$e*tn),h[1]=-(Bt*(tn*ra-Qr*dn)-qr*(qt*ra-pe*dn)+Un*(qt*Qr-pe*tn)),h[2]=Bt*(Ue*ra-$e*dn)-De*(qt*ra-pe*dn)+Un*(qt*$e-pe*Ue),h[3]=-(Bt*(Ue*Qr-$e*tn)-De*(qt*Qr-pe*tn)+qr*(qt*$e-pe*Ue)),h[4]=-(me*(tn*ra-Qr*dn)-mr*(Ue*ra-$e*dn)+Tn*(Ue*Qr-$e*tn)),h[5]=Mt*(tn*ra-Qr*dn)-mr*(qt*ra-pe*dn)+Tn*(qt*Qr-pe*tn),h[6]=-(Mt*(Ue*ra-$e*dn)-me*(qt*ra-pe*dn)+Tn*(qt*$e-pe*Ue)),h[7]=Mt*(Ue*Qr-$e*tn)-me*(qt*Qr-pe*tn)+mr*(qt*$e-pe*Ue),h[8]=me*(qr*ra-Qr*Un)-mr*(De*ra-$e*Un)+Tn*(De*Qr-$e*qr),h[9]=-(Mt*(qr*ra-Qr*Un)-mr*(Bt*ra-pe*Un)+Tn*(Bt*Qr-pe*qr)),h[10]=Mt*(De*ra-$e*Un)-me*(Bt*ra-pe*Un)+Tn*(Bt*$e-pe*De),h[11]=-(Mt*(De*Qr-$e*qr)-me*(Bt*Qr-pe*qr)+mr*(Bt*$e-pe*De)),h[12]=-(me*(qr*dn-tn*Un)-mr*(De*dn-Ue*Un)+Tn*(De*tn-Ue*qr)),h[13]=Mt*(qr*dn-tn*Un)-mr*(Bt*dn-qt*Un)+Tn*(Bt*tn-qt*qr),h[14]=-(Mt*(De*dn-Ue*Un)-me*(Bt*dn-qt*Un)+Tn*(Bt*Ue-qt*De)),h[15]=Mt*(De*tn-Ue*qr)-me*(Bt*tn-qt*qr)+mr*(Bt*Ue-qt*De),h}function nr(h){var Y=h[0],Mt=h[1],Bt=h[2],qt=h[3],pe=h[4],me=h[5],De=h[6],Ue=h[7],$e=h[8],mr=h[9],qr=h[10],tn=h[11],Qr=h[12],Tn=h[13],Un=h[14],dn=h[15],ra=Y*me-Mt*pe,Ha=Y*De-Bt*pe,Za=Y*Ue-qt*pe,Ua=Mt*De-Bt*me,Ma=Mt*Ue-qt*me,Ra=Bt*Ue-qt*De,Do=$e*Tn-mr*Qr,Eo=$e*Un-qr*Qr,bo=$e*dn-tn*Qr,wo=mr*Un-qr*Tn,So=mr*dn-tn*Tn,ko=qr*dn-tn*Un;return ra*ko-Ha*So+Za*wo+Ua*bo-Ma*Eo+Ra*Do}function oe(h,Y,Mt){var Bt=Y[0],qt=Y[1],pe=Y[2],me=Y[3],De=Y[4],Ue=Y[5],$e=Y[6],mr=Y[7],qr=Y[8],tn=Y[9],Qr=Y[10],Tn=Y[11],Un=Y[12],dn=Y[13],ra=Y[14],Ha=Y[15],Za=Mt[0],Ua=Mt[1],Ma=Mt[2],Ra=Mt[3];return h[0]=Za*Bt+Ua*De+Ma*qr+Ra*Un,h[1]=Za*qt+Ua*Ue+Ma*tn+Ra*dn,h[2]=Za*pe+Ua*$e+Ma*Qr+Ra*ra,h[3]=Za*me+Ua*mr+Ma*Tn+Ra*Ha,Za=Mt[4],Ua=Mt[5],Ma=Mt[6],Ra=Mt[7],h[4]=Za*Bt+Ua*De+Ma*qr+Ra*Un,h[5]=Za*qt+Ua*Ue+Ma*tn+Ra*dn,h[6]=Za*pe+Ua*$e+Ma*Qr+Ra*ra,h[7]=Za*me+Ua*mr+Ma*Tn+Ra*Ha,Za=Mt[8],Ua=Mt[9],Ma=Mt[10],Ra=Mt[11],h[8]=Za*Bt+Ua*De+Ma*qr+Ra*Un,h[9]=Za*qt+Ua*Ue+Ma*tn+Ra*dn,h[10]=Za*pe+Ua*$e+Ma*Qr+Ra*ra,h[11]=Za*me+Ua*mr+Ma*Tn+Ra*Ha,Za=Mt[12],Ua=Mt[13],Ma=Mt[14],Ra=Mt[15],h[12]=Za*Bt+Ua*De+Ma*qr+Ra*Un,h[13]=Za*qt+Ua*Ue+Ma*tn+Ra*dn,h[14]=Za*pe+Ua*$e+Ma*Qr+Ra*ra,h[15]=Za*me+Ua*mr+Ma*Tn+Ra*Ha,h}function Te(h,Y,Mt){var Bt=Mt[0],qt=Mt[1],pe=Mt[2],me,De,Ue,$e,mr,qr,tn,Qr,Tn,Un,dn,ra;return Y===h?(h[12]=Y[0]*Bt+Y[4]*qt+Y[8]*pe+Y[12],h[13]=Y[1]*Bt+Y[5]*qt+Y[9]*pe+Y[13],h[14]=Y[2]*Bt+Y[6]*qt+Y[10]*pe+Y[14],h[15]=Y[3]*Bt+Y[7]*qt+Y[11]*pe+Y[15]):(me=Y[0],De=Y[1],Ue=Y[2],$e=Y[3],mr=Y[4],qr=Y[5],tn=Y[6],Qr=Y[7],Tn=Y[8],Un=Y[9],dn=Y[10],ra=Y[11],h[0]=me,h[1]=De,h[2]=Ue,h[3]=$e,h[4]=mr,h[5]=qr,h[6]=tn,h[7]=Qr,h[8]=Tn,h[9]=Un,h[10]=dn,h[11]=ra,h[12]=me*Bt+mr*qt+Tn*pe+Y[12],h[13]=De*Bt+qr*qt+Un*pe+Y[13],h[14]=Ue*Bt+tn*qt+dn*pe+Y[14],h[15]=$e*Bt+Qr*qt+ra*pe+Y[15]),h}function Lr(h,Y,Mt){var Bt=Mt[0],qt=Mt[1],pe=Mt[2];return h[0]=Y[0]*Bt,h[1]=Y[1]*Bt,h[2]=Y[2]*Bt,h[3]=Y[3]*Bt,h[4]=Y[4]*qt,h[5]=Y[5]*qt,h[6]=Y[6]*qt,h[7]=Y[7]*qt,h[8]=Y[8]*pe,h[9]=Y[9]*pe,h[10]=Y[10]*pe,h[11]=Y[11]*pe,h[12]=Y[12],h[13]=Y[13],h[14]=Y[14],h[15]=Y[15],h}function Nr(h,Y,Mt,Bt){var qt=Bt[0],pe=Bt[1],me=Bt[2],De=Math.hypot(qt,pe,me),Ue,$e,mr,qr,tn,Qr,Tn,Un,dn,ra,Ha,Za,Ua,Ma,Ra,Do,Eo,bo,wo,So,ko,Bo,ci,Fi;return De<p.EPSILON?null:(De=1/De,qt*=De,pe*=De,me*=De,Ue=Math.sin(Mt),$e=Math.cos(Mt),mr=1-$e,qr=Y[0],tn=Y[1],Qr=Y[2],Tn=Y[3],Un=Y[4],dn=Y[5],ra=Y[6],Ha=Y[7],Za=Y[8],Ua=Y[9],Ma=Y[10],Ra=Y[11],Do=qt*qt*mr+$e,Eo=pe*qt*mr+me*Ue,bo=me*qt*mr-pe*Ue,wo=qt*pe*mr-me*Ue,So=pe*pe*mr+$e,ko=me*pe*mr+qt*Ue,Bo=qt*me*mr+pe*Ue,ci=pe*me*mr-qt*Ue,Fi=me*me*mr+$e,h[0]=qr*Do+Un*Eo+Za*bo,h[1]=tn*Do+dn*Eo+Ua*bo,h[2]=Qr*Do+ra*Eo+Ma*bo,h[3]=Tn*Do+Ha*Eo+Ra*bo,h[4]=qr*wo+Un*So+Za*ko,h[5]=tn*wo+dn*So+Ua*ko,h[6]=Qr*wo+ra*So+Ma*ko,h[7]=Tn*wo+Ha*So+Ra*ko,h[8]=qr*Bo+Un*ci+Za*Fi,h[9]=tn*Bo+dn*ci+Ua*Fi,h[10]=Qr*Bo+ra*ci+Ma*Fi,h[11]=Tn*Bo+Ha*ci+Ra*Fi,Y!==h&&(h[12]=Y[12],h[13]=Y[13],h[14]=Y[14],h[15]=Y[15]),h)}function ln(h,Y,Mt){var Bt=Math.sin(Mt),qt=Math.cos(Mt),pe=Y[4],me=Y[5],De=Y[6],Ue=Y[7],$e=Y[8],mr=Y[9],qr=Y[10],tn=Y[11];return Y!==h&&(h[0]=Y[0],h[1]=Y[1],h[2]=Y[2],h[3]=Y[3],h[12]=Y[12],h[13]=Y[13],h[14]=Y[14],h[15]=Y[15]),h[4]=pe*qt+$e*Bt,h[5]=me*qt+mr*Bt,h[6]=De*qt+qr*Bt,h[7]=Ue*qt+tn*Bt,h[8]=$e*qt-pe*Bt,h[9]=mr*qt-me*Bt,h[10]=qr*qt-De*Bt,h[11]=tn*qt-Ue*Bt,h}function en(h,Y,Mt){var Bt=Math.sin(Mt),qt=Math.cos(Mt),pe=Y[0],me=Y[1],De=Y[2],Ue=Y[3],$e=Y[8],mr=Y[9],qr=Y[10],tn=Y[11];return Y!==h&&(h[4]=Y[4],h[5]=Y[5],h[6]=Y[6],h[7]=Y[7],h[12]=Y[12],h[13]=Y[13],h[14]=Y[14],h[15]=Y[15]),h[0]=pe*qt-$e*Bt,h[1]=me*qt-mr*Bt,h[2]=De*qt-qr*Bt,h[3]=Ue*qt-tn*Bt,h[8]=pe*Bt+$e*qt,h[9]=me*Bt+mr*qt,h[10]=De*Bt+qr*qt,h[11]=Ue*Bt+tn*qt,h}function Dr(h,Y,Mt){var Bt=Math.sin(Mt),qt=Math.cos(Mt),pe=Y[0],me=Y[1],De=Y[2],Ue=Y[3],$e=Y[4],mr=Y[5],qr=Y[6],tn=Y[7];return Y!==h&&(h[8]=Y[8],h[9]=Y[9],h[10]=Y[10],h[11]=Y[11],h[12]=Y[12],h[13]=Y[13],h[14]=Y[14],h[15]=Y[15]),h[0]=pe*qt+$e*Bt,h[1]=me*qt+mr*Bt,h[2]=De*qt+qr*Bt,h[3]=Ue*qt+tn*Bt,h[4]=$e*qt-pe*Bt,h[5]=mr*qt-me*Bt,h[6]=qr*qt-De*Bt,h[7]=tn*qt-Ue*Bt,h}function Fr(h,Y){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=Y[0],h[13]=Y[1],h[14]=Y[2],h[15]=1,h}function Kr(h,Y){return h[0]=Y[0],h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=Y[1],h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=Y[2],h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function an(h,Y,Mt){var Bt=Mt[0],qt=Mt[1],pe=Mt[2],me=Math.hypot(Bt,qt,pe),De,Ue,$e;return me<p.EPSILON?null:(me=1/me,Bt*=me,qt*=me,pe*=me,De=Math.sin(Y),Ue=Math.cos(Y),$e=1-Ue,h[0]=Bt*Bt*$e+Ue,h[1]=qt*Bt*$e+pe*De,h[2]=pe*Bt*$e-qt*De,h[3]=0,h[4]=Bt*qt*$e-pe*De,h[5]=qt*qt*$e+Ue,h[6]=pe*qt*$e+Bt*De,h[7]=0,h[8]=Bt*pe*$e+qt*De,h[9]=qt*pe*$e-Bt*De,h[10]=pe*pe*$e+Ue,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h)}function yn(h,Y){var Mt=Math.sin(Y),Bt=Math.cos(Y);return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=Bt,h[6]=Mt,h[7]=0,h[8]=0,h[9]=-Mt,h[10]=Bt,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function bn(h,Y){var Mt=Math.sin(Y),Bt=Math.cos(Y);return h[0]=Bt,h[1]=0,h[2]=-Mt,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=Mt,h[9]=0,h[10]=Bt,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function tt(h,Y){var Mt=Math.sin(Y),Bt=Math.cos(Y);return h[0]=Bt,h[1]=Mt,h[2]=0,h[3]=0,h[4]=-Mt,h[5]=Bt,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function tr(h,Y,Mt){var Bt=Y[0],qt=Y[1],pe=Y[2],me=Y[3],De=Bt+Bt,Ue=qt+qt,$e=pe+pe,mr=Bt*De,qr=Bt*Ue,tn=Bt*$e,Qr=qt*Ue,Tn=qt*$e,Un=pe*$e,dn=me*De,ra=me*Ue,Ha=me*$e;return h[0]=1-(Qr+Un),h[1]=qr+Ha,h[2]=tn-ra,h[3]=0,h[4]=qr-Ha,h[5]=1-(mr+Un),h[6]=Tn+dn,h[7]=0,h[8]=tn+ra,h[9]=Tn-dn,h[10]=1-(mr+Qr),h[11]=0,h[12]=Mt[0],h[13]=Mt[1],h[14]=Mt[2],h[15]=1,h}function Kt(h,Y){var Mt=new p.ARRAY_TYPE(3),Bt=-Y[0],qt=-Y[1],pe=-Y[2],me=Y[3],De=Y[4],Ue=Y[5],$e=Y[6],mr=Y[7],qr=Bt*Bt+qt*qt+pe*pe+me*me;return qr>0?(Mt[0]=(De*me+mr*Bt+Ue*pe-$e*qt)*2/qr,Mt[1]=(Ue*me+mr*qt+$e*Bt-De*pe)*2/qr,Mt[2]=($e*me+mr*pe+De*qt-Ue*Bt)*2/qr):(Mt[0]=(De*me+mr*Bt+Ue*pe-$e*qt)*2,Mt[1]=(Ue*me+mr*qt+$e*Bt-De*pe)*2,Mt[2]=($e*me+mr*pe+De*qt-Ue*Bt)*2),tr(h,Y,Mt),h}function $t(h,Y){return h[0]=Y[12],h[1]=Y[13],h[2]=Y[14],h}function Et(h,Y){var Mt=Y[0],Bt=Y[1],qt=Y[2],pe=Y[4],me=Y[5],De=Y[6],Ue=Y[8],$e=Y[9],mr=Y[10];return h[0]=Math.hypot(Mt,Bt,qt),h[1]=Math.hypot(pe,me,De),h[2]=Math.hypot(Ue,$e,mr),h}function we(h,Y){var Mt=new p.ARRAY_TYPE(3);Et(Mt,Y);var Bt=1/Mt[0],qt=1/Mt[1],pe=1/Mt[2],me=Y[0]*Bt,De=Y[1]*qt,Ue=Y[2]*pe,$e=Y[4]*Bt,mr=Y[5]*qt,qr=Y[6]*pe,tn=Y[8]*Bt,Qr=Y[9]*qt,Tn=Y[10]*pe,Un=me+mr+Tn,dn=0;return Un>0?(dn=Math.sqrt(Un+1)*2,h[3]=.25*dn,h[0]=(qr-Qr)/dn,h[1]=(tn-Ue)/dn,h[2]=(De-$e)/dn):me>mr&&me>Tn?(dn=Math.sqrt(1+me-mr-Tn)*2,h[3]=(qr-Qr)/dn,h[0]=.25*dn,h[1]=(De+$e)/dn,h[2]=(tn+Ue)/dn):mr>Tn?(dn=Math.sqrt(1+mr-me-Tn)*2,h[3]=(tn-Ue)/dn,h[0]=(De+$e)/dn,h[1]=.25*dn,h[2]=(qr+Qr)/dn):(dn=Math.sqrt(1+Tn-me-mr)*2,h[3]=(De-$e)/dn,h[0]=(tn+Ue)/dn,h[1]=(qr+Qr)/dn,h[2]=.25*dn),h}function Dt(h,Y,Mt,Bt){var qt=Y[0],pe=Y[1],me=Y[2],De=Y[3],Ue=qt+qt,$e=pe+pe,mr=me+me,qr=qt*Ue,tn=qt*$e,Qr=qt*mr,Tn=pe*$e,Un=pe*mr,dn=me*mr,ra=De*Ue,Ha=De*$e,Za=De*mr,Ua=Bt[0],Ma=Bt[1],Ra=Bt[2];return h[0]=(1-(Tn+dn))*Ua,h[1]=(tn+Za)*Ua,h[2]=(Qr-Ha)*Ua,h[3]=0,h[4]=(tn-Za)*Ma,h[5]=(1-(qr+dn))*Ma,h[6]=(Un+ra)*Ma,h[7]=0,h[8]=(Qr+Ha)*Ra,h[9]=(Un-ra)*Ra,h[10]=(1-(qr+Tn))*Ra,h[11]=0,h[12]=Mt[0],h[13]=Mt[1],h[14]=Mt[2],h[15]=1,h}function Vt(h,Y,Mt,Bt,qt){var pe=Y[0],me=Y[1],De=Y[2],Ue=Y[3],$e=pe+pe,mr=me+me,qr=De+De,tn=pe*$e,Qr=pe*mr,Tn=pe*qr,Un=me*mr,dn=me*qr,ra=De*qr,Ha=Ue*$e,Za=Ue*mr,Ua=Ue*qr,Ma=Bt[0],Ra=Bt[1],Do=Bt[2],Eo=qt[0],bo=qt[1],wo=qt[2],So=(1-(Un+ra))*Ma,ko=(Qr+Ua)*Ma,Bo=(Tn-Za)*Ma,ci=(Qr-Ua)*Ra,Fi=(1-(tn+ra))*Ra,$s=(dn+Ha)*Ra,Fs=(Tn+Za)*Do,Ms=(dn-Ha)*Do,vu=(1-(tn+Un))*Do;return h[0]=So,h[1]=ko,h[2]=Bo,h[3]=0,h[4]=ci,h[5]=Fi,h[6]=$s,h[7]=0,h[8]=Fs,h[9]=Ms,h[10]=vu,h[11]=0,h[12]=Mt[0]+Eo-(So*Eo+ci*bo+Fs*wo),h[13]=Mt[1]+bo-(ko*Eo+Fi*bo+Ms*wo),h[14]=Mt[2]+wo-(Bo*Eo+$s*bo+vu*wo),h[15]=1,h}function ht(h,Y){var Mt=Y[0],Bt=Y[1],qt=Y[2],pe=Y[3],me=Mt+Mt,De=Bt+Bt,Ue=qt+qt,$e=Mt*me,mr=Bt*me,qr=Bt*De,tn=qt*me,Qr=qt*De,Tn=qt*Ue,Un=pe*me,dn=pe*De,ra=pe*Ue;return h[0]=1-qr-Tn,h[1]=mr+ra,h[2]=tn-dn,h[3]=0,h[4]=mr-ra,h[5]=1-$e-Tn,h[6]=Qr+Un,h[7]=0,h[8]=tn+dn,h[9]=Qr-Un,h[10]=1-$e-qr,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function kt(h,Y,Mt,Bt,qt,pe,me){var De=1/(Mt-Y),Ue=1/(qt-Bt),$e=1/(pe-me);return h[0]=pe*2*De,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=pe*2*Ue,h[6]=0,h[7]=0,h[8]=(Mt+Y)*De,h[9]=(qt+Bt)*Ue,h[10]=(me+pe)*$e,h[11]=-1,h[12]=0,h[13]=0,h[14]=me*pe*2*$e,h[15]=0,h}function Q(h,Y,Mt,Bt,qt){var pe=1/Math.tan(Y/2),me;return h[0]=pe/Mt,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=pe,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,qt!=null&&qt!==1/0?(me=1/(Bt-qt),h[10]=(qt+Bt)*me,h[14]=2*qt*Bt*me):(h[10]=-1,h[14]=-2*Bt),h}var at=Q;function B(h,Y,Mt,Bt,qt){var pe=1/Math.tan(Y/2),me;return h[0]=pe/Mt,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=pe,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,qt!=null&&qt!==1/0?(me=1/(Bt-qt),h[10]=qt*me,h[14]=qt*Bt*me):(h[10]=-1,h[14]=-Bt),h}function C(h,Y,Mt,Bt){var qt=Math.tan(Y.upDegrees*Math.PI/180),pe=Math.tan(Y.downDegrees*Math.PI/180),me=Math.tan(Y.leftDegrees*Math.PI/180),De=Math.tan(Y.rightDegrees*Math.PI/180),Ue=2/(me+De),$e=2/(qt+pe);return h[0]=Ue,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=$e,h[6]=0,h[7]=0,h[8]=-((me-De)*Ue*.5),h[9]=(qt-pe)*$e*.5,h[10]=Bt/(Mt-Bt),h[11]=-1,h[12]=0,h[13]=0,h[14]=Bt*Mt/(Mt-Bt),h[15]=0,h}function I(h,Y,Mt,Bt,qt,pe,me){var De=1/(Y-Mt),Ue=1/(Bt-qt),$e=1/(pe-me);return h[0]=-2*De,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*Ue,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*$e,h[11]=0,h[12]=(Y+Mt)*De,h[13]=(qt+Bt)*Ue,h[14]=(me+pe)*$e,h[15]=1,h}var H=I;function mt(h,Y,Mt,Bt,qt,pe,me){var De=1/(Y-Mt),Ue=1/(Bt-qt),$e=1/(pe-me);return h[0]=-2*De,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*Ue,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=$e,h[11]=0,h[12]=(Y+Mt)*De,h[13]=(qt+Bt)*Ue,h[14]=pe*$e,h[15]=1,h}function Pt(h,Y,Mt,Bt){var qt,pe,me,De,Ue,$e,mr,qr,tn,Qr,Tn=Y[0],Un=Y[1],dn=Y[2],ra=Bt[0],Ha=Bt[1],Za=Bt[2],Ua=Mt[0],Ma=Mt[1],Ra=Mt[2];return Math.abs(Tn-Ua)<p.EPSILON&&Math.abs(Un-Ma)<p.EPSILON&&Math.abs(dn-Ra)<p.EPSILON?fn(h):(mr=Tn-Ua,qr=Un-Ma,tn=dn-Ra,Qr=1/Math.hypot(mr,qr,tn),mr*=Qr,qr*=Qr,tn*=Qr,qt=Ha*tn-Za*qr,pe=Za*mr-ra*tn,me=ra*qr-Ha*mr,Qr=Math.hypot(qt,pe,me),Qr?(Qr=1/Qr,qt*=Qr,pe*=Qr,me*=Qr):(qt=0,pe=0,me=0),De=qr*me-tn*pe,Ue=tn*qt-mr*me,$e=mr*pe-qr*qt,Qr=Math.hypot(De,Ue,$e),Qr?(Qr=1/Qr,De*=Qr,Ue*=Qr,$e*=Qr):(De=0,Ue=0,$e=0),h[0]=qt,h[1]=De,h[2]=mr,h[3]=0,h[4]=pe,h[5]=Ue,h[6]=qr,h[7]=0,h[8]=me,h[9]=$e,h[10]=tn,h[11]=0,h[12]=-(qt*Tn+pe*Un+me*dn),h[13]=-(De*Tn+Ue*Un+$e*dn),h[14]=-(mr*Tn+qr*Un+tn*dn),h[15]=1,h)}function Lt(h,Y,Mt,Bt){var qt=Y[0],pe=Y[1],me=Y[2],De=Bt[0],Ue=Bt[1],$e=Bt[2],mr=qt-Mt[0],qr=pe-Mt[1],tn=me-Mt[2],Qr=mr*mr+qr*qr+tn*tn;Qr>0&&(Qr=1/Math.sqrt(Qr),mr*=Qr,qr*=Qr,tn*=Qr);var Tn=Ue*tn-$e*qr,Un=$e*mr-De*tn,dn=De*qr-Ue*mr;return Qr=Tn*Tn+Un*Un+dn*dn,Qr>0&&(Qr=1/Math.sqrt(Qr),Tn*=Qr,Un*=Qr,dn*=Qr),h[0]=Tn,h[1]=Un,h[2]=dn,h[3]=0,h[4]=qr*dn-tn*Un,h[5]=tn*Tn-mr*dn,h[6]=mr*Un-qr*Tn,h[7]=0,h[8]=mr,h[9]=qr,h[10]=tn,h[11]=0,h[12]=qt,h[13]=pe,h[14]=me,h[15]=1,h}function Jt(h){return"mat4("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+", "+h[6]+", "+h[7]+", "+h[8]+", "+h[9]+", "+h[10]+", "+h[11]+", "+h[12]+", "+h[13]+", "+h[14]+", "+h[15]+")"}function Oe(h){return Math.hypot(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],h[9],h[10],h[11],h[12],h[13],h[14],h[15])}function ye(h,Y,Mt){return h[0]=Y[0]+Mt[0],h[1]=Y[1]+Mt[1],h[2]=Y[2]+Mt[2],h[3]=Y[3]+Mt[3],h[4]=Y[4]+Mt[4],h[5]=Y[5]+Mt[5],h[6]=Y[6]+Mt[6],h[7]=Y[7]+Mt[7],h[8]=Y[8]+Mt[8],h[9]=Y[9]+Mt[9],h[10]=Y[10]+Mt[10],h[11]=Y[11]+Mt[11],h[12]=Y[12]+Mt[12],h[13]=Y[13]+Mt[13],h[14]=Y[14]+Mt[14],h[15]=Y[15]+Mt[15],h}function Ze(h,Y,Mt){return h[0]=Y[0]-Mt[0],h[1]=Y[1]-Mt[1],h[2]=Y[2]-Mt[2],h[3]=Y[3]-Mt[3],h[4]=Y[4]-Mt[4],h[5]=Y[5]-Mt[5],h[6]=Y[6]-Mt[6],h[7]=Y[7]-Mt[7],h[8]=Y[8]-Mt[8],h[9]=Y[9]-Mt[9],h[10]=Y[10]-Mt[10],h[11]=Y[11]-Mt[11],h[12]=Y[12]-Mt[12],h[13]=Y[13]-Mt[13],h[14]=Y[14]-Mt[14],h[15]=Y[15]-Mt[15],h}function wr(h,Y,Mt){return h[0]=Y[0]*Mt,h[1]=Y[1]*Mt,h[2]=Y[2]*Mt,h[3]=Y[3]*Mt,h[4]=Y[4]*Mt,h[5]=Y[5]*Mt,h[6]=Y[6]*Mt,h[7]=Y[7]*Mt,h[8]=Y[8]*Mt,h[9]=Y[9]*Mt,h[10]=Y[10]*Mt,h[11]=Y[11]*Mt,h[12]=Y[12]*Mt,h[13]=Y[13]*Mt,h[14]=Y[14]*Mt,h[15]=Y[15]*Mt,h}function er(h,Y,Mt,Bt){return h[0]=Y[0]+Mt[0]*Bt,h[1]=Y[1]+Mt[1]*Bt,h[2]=Y[2]+Mt[2]*Bt,h[3]=Y[3]+Mt[3]*Bt,h[4]=Y[4]+Mt[4]*Bt,h[5]=Y[5]+Mt[5]*Bt,h[6]=Y[6]+Mt[6]*Bt,h[7]=Y[7]+Mt[7]*Bt,h[8]=Y[8]+Mt[8]*Bt,h[9]=Y[9]+Mt[9]*Bt,h[10]=Y[10]+Mt[10]*Bt,h[11]=Y[11]+Mt[11]*Bt,h[12]=Y[12]+Mt[12]*Bt,h[13]=Y[13]+Mt[13]*Bt,h[14]=Y[14]+Mt[14]*Bt,h[15]=Y[15]+Mt[15]*Bt,h}function Ur(h,Y){return h[0]===Y[0]&&h[1]===Y[1]&&h[2]===Y[2]&&h[3]===Y[3]&&h[4]===Y[4]&&h[5]===Y[5]&&h[6]===Y[6]&&h[7]===Y[7]&&h[8]===Y[8]&&h[9]===Y[9]&&h[10]===Y[10]&&h[11]===Y[11]&&h[12]===Y[12]&&h[13]===Y[13]&&h[14]===Y[14]&&h[15]===Y[15]}function xn(h,Y){var Mt=h[0],Bt=h[1],qt=h[2],pe=h[3],me=h[4],De=h[5],Ue=h[6],$e=h[7],mr=h[8],qr=h[9],tn=h[10],Qr=h[11],Tn=h[12],Un=h[13],dn=h[14],ra=h[15],Ha=Y[0],Za=Y[1],Ua=Y[2],Ma=Y[3],Ra=Y[4],Do=Y[5],Eo=Y[6],bo=Y[7],wo=Y[8],So=Y[9],ko=Y[10],Bo=Y[11],ci=Y[12],Fi=Y[13],$s=Y[14],Fs=Y[15];return Math.abs(Mt-Ha)<=p.EPSILON*Math.max(1,Math.abs(Mt),Math.abs(Ha))&&Math.abs(Bt-Za)<=p.EPSILON*Math.max(1,Math.abs(Bt),Math.abs(Za))&&Math.abs(qt-Ua)<=p.EPSILON*Math.max(1,Math.abs(qt),Math.abs(Ua))&&Math.abs(pe-Ma)<=p.EPSILON*Math.max(1,Math.abs(pe),Math.abs(Ma))&&Math.abs(me-Ra)<=p.EPSILON*Math.max(1,Math.abs(me),Math.abs(Ra))&&Math.abs(De-Do)<=p.EPSILON*Math.max(1,Math.abs(De),Math.abs(Do))&&Math.abs(Ue-Eo)<=p.EPSILON*Math.max(1,Math.abs(Ue),Math.abs(Eo))&&Math.abs($e-bo)<=p.EPSILON*Math.max(1,Math.abs($e),Math.abs(bo))&&Math.abs(mr-wo)<=p.EPSILON*Math.max(1,Math.abs(mr),Math.abs(wo))&&Math.abs(qr-So)<=p.EPSILON*Math.max(1,Math.abs(qr),Math.abs(So))&&Math.abs(tn-ko)<=p.EPSILON*Math.max(1,Math.abs(tn),Math.abs(ko))&&Math.abs(Qr-Bo)<=p.EPSILON*Math.max(1,Math.abs(Qr),Math.abs(Bo))&&Math.abs(Tn-ci)<=p.EPSILON*Math.max(1,Math.abs(Tn),Math.abs(ci))&&Math.abs(Un-Fi)<=p.EPSILON*Math.max(1,Math.abs(Un),Math.abs(Fi))&&Math.abs(dn-$s)<=p.EPSILON*Math.max(1,Math.abs(dn),Math.abs($s))&&Math.abs(ra-Fs)<=p.EPSILON*Math.max(1,Math.abs(ra),Math.abs(Fs))}var rr=oe,xr=Ze,Wr=_(277160);function Gr(){var h=new p.ARRAY_TYPE(4);return p.ARRAY_TYPE!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0,h[3]=0),h}function ce(h){var Y=new p.ARRAY_TYPE(4);return Y[0]=h[0],Y[1]=h[1],Y[2]=h[2],Y[3]=h[3],Y}function Yt(h,Y,Mt,Bt){var qt=new p.ARRAY_TYPE(4);return qt[0]=h,qt[1]=Y,qt[2]=Mt,qt[3]=Bt,qt}function ge(h,Y){return h[0]=Y[0],h[1]=Y[1],h[2]=Y[2],h[3]=Y[3],h}function Ie(h,Y,Mt,Bt,qt){return h[0]=Y,h[1]=Mt,h[2]=Bt,h[3]=qt,h}function xe(h,Y,Mt){return h[0]=Y[0]+Mt[0],h[1]=Y[1]+Mt[1],h[2]=Y[2]+Mt[2],h[3]=Y[3]+Mt[3],h}function Ye(h,Y,Mt){return h[0]=Y[0]-Mt[0],h[1]=Y[1]-Mt[1],h[2]=Y[2]-Mt[2],h[3]=Y[3]-Mt[3],h}function gr(h,Y,Mt){return h[0]=Y[0]*Mt[0],h[1]=Y[1]*Mt[1],h[2]=Y[2]*Mt[2],h[3]=Y[3]*Mt[3],h}function Mr(h,Y,Mt){return h[0]=Y[0]/Mt[0],h[1]=Y[1]/Mt[1],h[2]=Y[2]/Mt[2],h[3]=Y[3]/Mt[3],h}function vn(h,Y){return h[0]=Math.ceil(Y[0]),h[1]=Math.ceil(Y[1]),h[2]=Math.ceil(Y[2]),h[3]=Math.ceil(Y[3]),h}function Wn(h,Y){return h[0]=Math.floor(Y[0]),h[1]=Math.floor(Y[1]),h[2]=Math.floor(Y[2]),h[3]=Math.floor(Y[3]),h}function Sn(h,Y,Mt){return h[0]=Math.min(Y[0],Mt[0]),h[1]=Math.min(Y[1],Mt[1]),h[2]=Math.min(Y[2],Mt[2]),h[3]=Math.min(Y[3],Mt[3]),h}function ea(h,Y,Mt){return h[0]=Math.max(Y[0],Mt[0]),h[1]=Math.max(Y[1],Mt[1]),h[2]=Math.max(Y[2],Mt[2]),h[3]=Math.max(Y[3],Mt[3]),h}function wn(h,Y){return h[0]=Math.round(Y[0]),h[1]=Math.round(Y[1]),h[2]=Math.round(Y[2]),h[3]=Math.round(Y[3]),h}function Hn(h,Y,Mt){return h[0]=Y[0]*Mt,h[1]=Y[1]*Mt,h[2]=Y[2]*Mt,h[3]=Y[3]*Mt,h}function la(h,Y,Mt,Bt){return h[0]=Y[0]+Mt[0]*Bt,h[1]=Y[1]+Mt[1]*Bt,h[2]=Y[2]+Mt[2]*Bt,h[3]=Y[3]+Mt[3]*Bt,h}function ba(h,Y){var Mt=Y[0]-h[0],Bt=Y[1]-h[1],qt=Y[2]-h[2],pe=Y[3]-h[3];return Math.hypot(Mt,Bt,qt,pe)}function xa(h,Y){var Mt=Y[0]-h[0],Bt=Y[1]-h[1],qt=Y[2]-h[2],pe=Y[3]-h[3];return Mt*Mt+Bt*Bt+qt*qt+pe*pe}function Yi(h){var Y=h[0],Mt=h[1],Bt=h[2],qt=h[3];return Math.hypot(Y,Mt,Bt,qt)}function ri(h){var Y=h[0],Mt=h[1],Bt=h[2],qt=h[3];return Y*Y+Mt*Mt+Bt*Bt+qt*qt}function ti(h,Y){return h[0]=-Y[0],h[1]=-Y[1],h[2]=-Y[2],h[3]=-Y[3],h}function Mi(h,Y){return h[0]=1/Y[0],h[1]=1/Y[1],h[2]=1/Y[2],h[3]=1/Y[3],h}function Vi(h,Y){var Mt=Y[0],Bt=Y[1],qt=Y[2],pe=Y[3],me=Mt*Mt+Bt*Bt+qt*qt+pe*pe;return me>0&&(me=1/Math.sqrt(me)),h[0]=Mt*me,h[1]=Bt*me,h[2]=qt*me,h[3]=pe*me,h}function ao(h,Y){return h[0]*Y[0]+h[1]*Y[1]+h[2]*Y[2]+h[3]*Y[3]}function io(h,Y,Mt,Bt){var qt=Mt[0]*Bt[1]-Mt[1]*Bt[0],pe=Mt[0]*Bt[2]-Mt[2]*Bt[0],me=Mt[0]*Bt[3]-Mt[3]*Bt[0],De=Mt[1]*Bt[2]-Mt[2]*Bt[1],Ue=Mt[1]*Bt[3]-Mt[3]*Bt[1],$e=Mt[2]*Bt[3]-Mt[3]*Bt[2],mr=Y[0],qr=Y[1],tn=Y[2],Qr=Y[3];return h[0]=qr*$e-tn*Ue+Qr*De,h[1]=-(mr*$e)+tn*me-Qr*pe,h[2]=mr*Ue-qr*me+Qr*qt,h[3]=-(mr*De)+qr*pe-tn*qt,h}function wa(h,Y,Mt,Bt){var qt=Y[0],pe=Y[1],me=Y[2],De=Y[3];return h[0]=qt+Bt*(Mt[0]-qt),h[1]=pe+Bt*(Mt[1]-pe),h[2]=me+Bt*(Mt[2]-me),h[3]=De+Bt*(Mt[3]-De),h}function oo(h,Y){Y=Y||1;var Mt,Bt,qt,pe,me,De;do Mt=p.RANDOM()*2-1,Bt=p.RANDOM()*2-1,me=Mt*Mt+Bt*Bt;while(me>=1);do qt=p.RANDOM()*2-1,pe=p.RANDOM()*2-1,De=qt*qt+pe*pe;while(De>=1);var Ue=Math.sqrt((1-me)/De);return h[0]=Y*Mt,h[1]=Y*Bt,h[2]=Y*qt*Ue,h[3]=Y*pe*Ue,h}function To(h,Y,Mt){var Bt=Y[0],qt=Y[1],pe=Y[2],me=Y[3];return h[0]=Mt[0]*Bt+Mt[4]*qt+Mt[8]*pe+Mt[12]*me,h[1]=Mt[1]*Bt+Mt[5]*qt+Mt[9]*pe+Mt[13]*me,h[2]=Mt[2]*Bt+Mt[6]*qt+Mt[10]*pe+Mt[14]*me,h[3]=Mt[3]*Bt+Mt[7]*qt+Mt[11]*pe+Mt[15]*me,h}function ii(h,Y,Mt){var Bt=Y[0],qt=Y[1],pe=Y[2],me=Mt[0],De=Mt[1],Ue=Mt[2],$e=Mt[3],mr=$e*Bt+De*pe-Ue*qt,qr=$e*qt+Ue*Bt-me*pe,tn=$e*pe+me*qt-De*Bt,Qr=-me*Bt-De*qt-Ue*pe;return h[0]=mr*$e+Qr*-me+qr*-Ue-tn*-De,h[1]=qr*$e+Qr*-De+tn*-me-mr*-Ue,h[2]=tn*$e+Qr*-Ue+mr*-De-qr*-me,h[3]=Y[3],h}function Xi(h){return h[0]=0,h[1]=0,h[2]=0,h[3]=0,h}function so(h){return"vec4("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+")"}function zo(h,Y){return h[0]===Y[0]&&h[1]===Y[1]&&h[2]===Y[2]&&h[3]===Y[3]}function ro(h,Y){var Mt=h[0],Bt=h[1],qt=h[2],pe=h[3],me=Y[0],De=Y[1],Ue=Y[2],$e=Y[3];return Math.abs(Mt-me)<=p.EPSILON*Math.max(1,Math.abs(Mt),Math.abs(me))&&Math.abs(Bt-De)<=p.EPSILON*Math.max(1,Math.abs(Bt),Math.abs(De))&&Math.abs(qt-Ue)<=p.EPSILON*Math.max(1,Math.abs(qt),Math.abs(Ue))&&Math.abs(pe-$e)<=p.EPSILON*Math.max(1,Math.abs(pe),Math.abs($e))}var vo=Ye,Ao=gr,Go=Mr,Ai=ba,$i=xa,oa=Yi,Qt=ri,ve=function(){var h=Gr();return function(Y,Mt,Bt,qt,pe,me){var De,Ue;for(Mt||(Mt=4),Bt||(Bt=0),qt?Ue=Math.min(qt*Mt+Bt,Y.length):Ue=Y.length,De=Bt;De<Ue;De+=Mt)h[0]=Y[De],h[1]=Y[De+1],h[2]=Y[De+2],h[3]=Y[De+3],pe(h,h,me),Y[De]=h[0],Y[De+1]=h[1],Y[De+2]=h[2],Y[De+3]=h[3];return Y}}();function Ge(){var h=new p.ARRAY_TYPE(4);return p.ARRAY_TYPE!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0),h[3]=1,h}function pr(h){return h[0]=0,h[1]=0,h[2]=0,h[3]=1,h}function Xr(h,Y,Mt){Mt=Mt*.5;var Bt=Math.sin(Mt);return h[0]=Bt*Y[0],h[1]=Bt*Y[1],h[2]=Bt*Y[2],h[3]=Math.cos(Mt),h}function Yr(h,Y){var Mt=Math.acos(Y[3])*2,Bt=Math.sin(Mt/2);return Bt>p.EPSILON?(h[0]=Y[0]/Bt,h[1]=Y[1]/Bt,h[2]=Y[2]/Bt):(h[0]=1,h[1]=0,h[2]=0),Mt}function Pr(h,Y){var Mt=qi(h,Y);return Math.acos(2*Mt*Mt-1)}function cn(h,Y,Mt){var Bt=Y[0],qt=Y[1],pe=Y[2],me=Y[3],De=Mt[0],Ue=Mt[1],$e=Mt[2],mr=Mt[3];return h[0]=Bt*mr+me*De+qt*$e-pe*Ue,h[1]=qt*mr+me*Ue+pe*De-Bt*$e,h[2]=pe*mr+me*$e+Bt*Ue-qt*De,h[3]=me*mr-Bt*De-qt*Ue-pe*$e,h}function Mn(h,Y,Mt){Mt*=.5;var Bt=Y[0],qt=Y[1],pe=Y[2],me=Y[3],De=Math.sin(Mt),Ue=Math.cos(Mt);return h[0]=Bt*Ue+me*De,h[1]=qt*Ue+pe*De,h[2]=pe*Ue-qt*De,h[3]=me*Ue-Bt*De,h}function Bn(h,Y,Mt){Mt*=.5;var Bt=Y[0],qt=Y[1],pe=Y[2],me=Y[3],De=Math.sin(Mt),Ue=Math.cos(Mt);return h[0]=Bt*Ue-pe*De,h[1]=qt*Ue+me*De,h[2]=pe*Ue+Bt*De,h[3]=me*Ue-qt*De,h}function sa(h,Y,Mt){Mt*=.5;var Bt=Y[0],qt=Y[1],pe=Y[2],me=Y[3],De=Math.sin(Mt),Ue=Math.cos(Mt);return h[0]=Bt*Ue+qt*De,h[1]=qt*Ue-Bt*De,h[2]=pe*Ue+me*De,h[3]=me*Ue-pe*De,h}function qn(h,Y){var Mt=Y[0],Bt=Y[1],qt=Y[2];return h[0]=Mt,h[1]=Bt,h[2]=qt,h[3]=Math.sqrt(Math.abs(1-Mt*Mt-Bt*Bt-qt*qt)),h}function ga(h,Y){var Mt=Y[0],Bt=Y[1],qt=Y[2],pe=Y[3],me=Math.sqrt(Mt*Mt+Bt*Bt+qt*qt),De=Math.exp(pe),Ue=me>0?De*Math.sin(me)/me:0;return h[0]=Mt*Ue,h[1]=Bt*Ue,h[2]=qt*Ue,h[3]=De*Math.cos(me),h}function ya(h,Y){var Mt=Y[0],Bt=Y[1],qt=Y[2],pe=Y[3],me=Math.sqrt(Mt*Mt+Bt*Bt+qt*qt),De=me>0?Math.atan2(me,pe)/me:0;return h[0]=Mt*De,h[1]=Bt*De,h[2]=qt*De,h[3]=.5*Math.log(Mt*Mt+Bt*Bt+qt*qt+pe*pe),h}function vi(h,Y,Mt){return ya(h,Y),uo(h,h,Mt),ga(h,h),h}function Sa(h,Y,Mt,Bt){var qt=Y[0],pe=Y[1],me=Y[2],De=Y[3],Ue=Mt[0],$e=Mt[1],mr=Mt[2],qr=Mt[3],tn,Qr,Tn,Un,dn;return Qr=qt*Ue+pe*$e+me*mr+De*qr,Qr<0&&(Qr=-Qr,Ue=-Ue,$e=-$e,mr=-mr,qr=-qr),1-Qr>p.EPSILON?(tn=Math.acos(Qr),Tn=Math.sin(tn),Un=Math.sin((1-Bt)*tn)/Tn,dn=Math.sin(Bt*tn)/Tn):(Un=1-Bt,dn=Bt),h[0]=Un*qt+dn*Ue,h[1]=Un*pe+dn*$e,h[2]=Un*me+dn*mr,h[3]=Un*De+dn*qr,h}function ua(h){var Y=p.RANDOM(),Mt=p.RANDOM(),Bt=p.RANDOM(),qt=Math.sqrt(1-Y),pe=Math.sqrt(Y);return h[0]=qt*Math.sin(2*Math.PI*Mt),h[1]=qt*Math.cos(2*Math.PI*Mt),h[2]=pe*Math.sin(2*Math.PI*Bt),h[3]=pe*Math.cos(2*Math.PI*Bt),h}function fi(h,Y){var Mt=Y[0],Bt=Y[1],qt=Y[2],pe=Y[3],me=Mt*Mt+Bt*Bt+qt*qt+pe*pe,De=me?1/me:0;return h[0]=-Mt*De,h[1]=-Bt*De,h[2]=-qt*De,h[3]=pe*De,h}function ei(h,Y){return h[0]=-Y[0],h[1]=-Y[1],h[2]=-Y[2],h[3]=Y[3],h}function Ga(h,Y){var Mt=Y[0]+Y[4]+Y[8],Bt;if(Mt>0)Bt=Math.sqrt(Mt+1),h[3]=.5*Bt,Bt=.5/Bt,h[0]=(Y[5]-Y[7])*Bt,h[1]=(Y[6]-Y[2])*Bt,h[2]=(Y[1]-Y[3])*Bt;else{var qt=0;Y[4]>Y[0]&&(qt=1),Y[8]>Y[qt*3+qt]&&(qt=2);var pe=(qt+1)%3,me=(qt+2)%3;Bt=Math.sqrt(Y[qt*3+qt]-Y[pe*3+pe]-Y[me*3+me]+1),h[qt]=.5*Bt,Bt=.5/Bt,h[3]=(Y[pe*3+me]-Y[me*3+pe])*Bt,h[pe]=(Y[pe*3+qt]+Y[qt*3+pe])*Bt,h[me]=(Y[me*3+qt]+Y[qt*3+me])*Bt}return h}function Ii(h,Y,Mt,Bt){var qt=.5*Math.PI/180;Y*=qt,Mt*=qt,Bt*=qt;var pe=Math.sin(Y),me=Math.cos(Y),De=Math.sin(Mt),Ue=Math.cos(Mt),$e=Math.sin(Bt),mr=Math.cos(Bt);return h[0]=pe*Ue*mr-me*De*$e,h[1]=me*De*mr+pe*Ue*$e,h[2]=me*Ue*$e-pe*De*mr,h[3]=me*Ue*mr+pe*De*$e,h}function yi(h){return"quat("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+")"}var za=ce,Va=Yt,Da=ge,Ri=Ie,_i=xe,ki=cn,uo=Hn,qi=ao,po=wa,es=Yi,rs=es,no=ri,ni=no,zi=Vi,fo=zo,Xa=ro,go=function(){var h=Wr.create(),Y=Wr.fromValues(1,0,0),Mt=Wr.fromValues(0,1,0);return function(Bt,qt,pe){var me=Wr.dot(qt,pe);return me<-.999999?(Wr.cross(h,Y,qt),Wr.len(h)<1e-6&&Wr.cross(h,Mt,qt),Wr.normalize(h,h),Xr(Bt,h,Math.PI),Bt):me>.999999?(Bt[0]=0,Bt[1]=0,Bt[2]=0,Bt[3]=1,Bt):(Wr.cross(h,qt,pe),Bt[0]=h[0],Bt[1]=h[1],Bt[2]=h[2],Bt[3]=1+me,zi(Bt,Bt))}}(),No=function(){var h=Ge(),Y=Ge();return function(Mt,Bt,qt,pe,me,De){return Sa(h,Bt,me,De),Sa(Y,qt,pe,De),Sa(Mt,h,Y,2*De*(1-De)),Mt}}(),Hi=function(){var h=qe.create();return function(Y,Mt,Bt,qt){return h[0]=Bt[0],h[3]=Bt[1],h[6]=Bt[2],h[1]=qt[0],h[4]=qt[1],h[7]=qt[2],h[2]=-Mt[0],h[5]=-Mt[1],h[8]=-Mt[2],zi(Y,Ga(Y,h))}}();function as(){var h=new p.ARRAY_TYPE(8);return p.ARRAY_TYPE!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0,h[4]=0,h[5]=0,h[6]=0,h[7]=0),h[3]=1,h}function Gi(h){var Y=new p.ARRAY_TYPE(8);return Y[0]=h[0],Y[1]=h[1],Y[2]=h[2],Y[3]=h[3],Y[4]=h[4],Y[5]=h[5],Y[6]=h[6],Y[7]=h[7],Y}function Ro(h,Y,Mt,Bt,qt,pe,me,De){var Ue=new p.ARRAY_TYPE(8);return Ue[0]=h,Ue[1]=Y,Ue[2]=Mt,Ue[3]=Bt,Ue[4]=qt,Ue[5]=pe,Ue[6]=me,Ue[7]=De,Ue}function ss(h,Y,Mt,Bt,qt,pe,me){var De=new p.ARRAY_TYPE(8);De[0]=h,De[1]=Y,De[2]=Mt,De[3]=Bt;var Ue=qt*.5,$e=pe*.5,mr=me*.5;return De[4]=Ue*Bt+$e*Mt-mr*Y,De[5]=$e*Bt+mr*h-Ue*Mt,De[6]=mr*Bt+Ue*Y-$e*h,De[7]=-Ue*h-$e*Y-mr*Mt,De}function Ss(h,Y,Mt){var Bt=Mt[0]*.5,qt=Mt[1]*.5,pe=Mt[2]*.5,me=Y[0],De=Y[1],Ue=Y[2],$e=Y[3];return h[0]=me,h[1]=De,h[2]=Ue,h[3]=$e,h[4]=Bt*$e+qt*Ue-pe*De,h[5]=qt*$e+pe*me-Bt*Ue,h[6]=pe*$e+Bt*De-qt*me,h[7]=-Bt*me-qt*De-pe*Ue,h}function mo(h,Y){return h[0]=0,h[1]=0,h[2]=0,h[3]=1,h[4]=Y[0]*.5,h[5]=Y[1]*.5,h[6]=Y[2]*.5,h[7]=0,h}function us(h,Y){return h[0]=Y[0],h[1]=Y[1],h[2]=Y[2],h[3]=Y[3],h[4]=0,h[5]=0,h[6]=0,h[7]=0,h}function fs(h,Y){var Mt=Ge();we(Mt,Y);var Bt=new p.ARRAY_TYPE(3);return $t(Bt,Y),Ss(h,Mt,Bt),h}function Is(h,Y){return h[0]=Y[0],h[1]=Y[1],h[2]=Y[2],h[3]=Y[3],h[4]=Y[4],h[5]=Y[5],h[6]=Y[6],h[7]=Y[7],h}function Aa(h){return h[0]=0,h[1]=0,h[2]=0,h[3]=1,h[4]=0,h[5]=0,h[6]=0,h[7]=0,h}function Ut(h,Y,Mt,Bt,qt,pe,me,De,Ue){return h[0]=Y,h[1]=Mt,h[2]=Bt,h[3]=qt,h[4]=pe,h[5]=me,h[6]=De,h[7]=Ue,h}var Xe=Da;function cr(h,Y){return h[0]=Y[4],h[1]=Y[5],h[2]=Y[6],h[3]=Y[7],h}var _r=Da;function on(h,Y){return h[4]=Y[0],h[5]=Y[1],h[6]=Y[2],h[7]=Y[3],h}function _n(h,Y){var Mt=Y[4],Bt=Y[5],qt=Y[6],pe=Y[7],me=-Y[0],De=-Y[1],Ue=-Y[2],$e=Y[3];return h[0]=(Mt*$e+pe*me+Bt*Ue-qt*De)*2,h[1]=(Bt*$e+pe*De+qt*me-Mt*Ue)*2,h[2]=(qt*$e+pe*Ue+Mt*De-Bt*me)*2,h}function $n(h,Y,Mt){var Bt=Y[0],qt=Y[1],pe=Y[2],me=Y[3],De=Mt[0]*.5,Ue=Mt[1]*.5,$e=Mt[2]*.5,mr=Y[4],qr=Y[5],tn=Y[6],Qr=Y[7];return h[0]=Bt,h[1]=qt,h[2]=pe,h[3]=me,h[4]=me*De+qt*$e-pe*Ue+mr,h[5]=me*Ue+pe*De-Bt*$e+qr,h[6]=me*$e+Bt*Ue-qt*De+tn,h[7]=-Bt*De-qt*Ue-pe*$e+Qr,h}function qa(h,Y,Mt){var Bt=-Y[0],qt=-Y[1],pe=-Y[2],me=Y[3],De=Y[4],Ue=Y[5],$e=Y[6],mr=Y[7],qr=De*me+mr*Bt+Ue*pe-$e*qt,tn=Ue*me+mr*qt+$e*Bt-De*pe,Qr=$e*me+mr*pe+De*qt-Ue*Bt,Tn=mr*me-De*Bt-Ue*qt-$e*pe;return Mn(h,Y,Mt),Bt=h[0],qt=h[1],pe=h[2],me=h[3],h[4]=qr*me+Tn*Bt+tn*pe-Qr*qt,h[5]=tn*me+Tn*qt+Qr*Bt-qr*pe,h[6]=Qr*me+Tn*pe+qr*qt-tn*Bt,h[7]=Tn*me-qr*Bt-tn*qt-Qr*pe,h}function Bi(h,Y,Mt){var Bt=-Y[0],qt=-Y[1],pe=-Y[2],me=Y[3],De=Y[4],Ue=Y[5],$e=Y[6],mr=Y[7],qr=De*me+mr*Bt+Ue*pe-$e*qt,tn=Ue*me+mr*qt+$e*Bt-De*pe,Qr=$e*me+mr*pe+De*qt-Ue*Bt,Tn=mr*me-De*Bt-Ue*qt-$e*pe;return Bn(h,Y,Mt),Bt=h[0],qt=h[1],pe=h[2],me=h[3],h[4]=qr*me+Tn*Bt+tn*pe-Qr*qt,h[5]=tn*me+Tn*qt+Qr*Bt-qr*pe,h[6]=Qr*me+Tn*pe+qr*qt-tn*Bt,h[7]=Tn*me-qr*Bt-tn*qt-Qr*pe,h}function Oo(h,Y,Mt){var Bt=-Y[0],qt=-Y[1],pe=-Y[2],me=Y[3],De=Y[4],Ue=Y[5],$e=Y[6],mr=Y[7],qr=De*me+mr*Bt+Ue*pe-$e*qt,tn=Ue*me+mr*qt+$e*Bt-De*pe,Qr=$e*me+mr*pe+De*qt-Ue*Bt,Tn=mr*me-De*Bt-Ue*qt-$e*pe;return sa(h,Y,Mt),Bt=h[0],qt=h[1],pe=h[2],me=h[3],h[4]=qr*me+Tn*Bt+tn*pe-Qr*qt,h[5]=tn*me+Tn*qt+Qr*Bt-qr*pe,h[6]=Qr*me+Tn*pe+qr*qt-tn*Bt,h[7]=Tn*me-qr*Bt-tn*qt-Qr*pe,h}function jo(h,Y,Mt){var Bt=Mt[0],qt=Mt[1],pe=Mt[2],me=Mt[3],De=Y[0],Ue=Y[1],$e=Y[2],mr=Y[3];return h[0]=De*me+mr*Bt+Ue*pe-$e*qt,h[1]=Ue*me+mr*qt+$e*Bt-De*pe,h[2]=$e*me+mr*pe+De*qt-Ue*Bt,h[3]=mr*me-De*Bt-Ue*qt-$e*pe,De=Y[4],Ue=Y[5],$e=Y[6],mr=Y[7],h[4]=De*me+mr*Bt+Ue*pe-$e*qt,h[5]=Ue*me+mr*qt+$e*Bt-De*pe,h[6]=$e*me+mr*pe+De*qt-Ue*Bt,h[7]=mr*me-De*Bt-Ue*qt-$e*pe,h}function Rs(h,Y,Mt){var Bt=Y[0],qt=Y[1],pe=Y[2],me=Y[3],De=Mt[0],Ue=Mt[1],$e=Mt[2],mr=Mt[3];return h[0]=Bt*mr+me*De+qt*$e-pe*Ue,h[1]=qt*mr+me*Ue+pe*De-Bt*$e,h[2]=pe*mr+me*$e+Bt*Ue-qt*De,h[3]=me*mr-Bt*De-qt*Ue-pe*$e,De=Mt[4],Ue=Mt[5],$e=Mt[6],mr=Mt[7],h[4]=Bt*mr+me*De+qt*$e-pe*Ue,h[5]=qt*mr+me*Ue+pe*De-Bt*$e,h[6]=pe*mr+me*$e+Bt*Ue-qt*De,h[7]=me*mr-Bt*De-qt*Ue-pe*$e,h}function Qi(h,Y,Mt,Bt){if(Math.abs(Bt)<p.EPSILON)return Is(h,Y);var qt=Math.hypot(Mt[0],Mt[1],Mt[2]);Bt=Bt*.5;var pe=Math.sin(Bt),me=pe*Mt[0]/qt,De=pe*Mt[1]/qt,Ue=pe*Mt[2]/qt,$e=Math.cos(Bt),mr=Y[0],qr=Y[1],tn=Y[2],Qr=Y[3];h[0]=mr*$e+Qr*me+qr*Ue-tn*De,h[1]=qr*$e+Qr*De+tn*me-mr*Ue,h[2]=tn*$e+Qr*Ue+mr*De-qr*me,h[3]=Qr*$e-mr*me-qr*De-tn*Ue;var Tn=Y[4],Un=Y[5],dn=Y[6],ra=Y[7];return h[4]=Tn*$e+ra*me+Un*Ue-dn*De,h[5]=Un*$e+ra*De+dn*me-Tn*Ue,h[6]=dn*$e+ra*Ue+Tn*De-Un*me,h[7]=ra*$e-Tn*me-Un*De-dn*Ue,h}function Io(h,Y,Mt){return h[0]=Y[0]+Mt[0],h[1]=Y[1]+Mt[1],h[2]=Y[2]+Mt[2],h[3]=Y[3]+Mt[3],h[4]=Y[4]+Mt[4],h[5]=Y[5]+Mt[5],h[6]=Y[6]+Mt[6],h[7]=Y[7]+Mt[7],h}function cs(h,Y,Mt){var Bt=Y[0],qt=Y[1],pe=Y[2],me=Y[3],De=Mt[4],Ue=Mt[5],$e=Mt[6],mr=Mt[7],qr=Y[4],tn=Y[5],Qr=Y[6],Tn=Y[7],Un=Mt[0],dn=Mt[1],ra=Mt[2],Ha=Mt[3];return h[0]=Bt*Ha+me*Un+qt*ra-pe*dn,h[1]=qt*Ha+me*dn+pe*Un-Bt*ra,h[2]=pe*Ha+me*ra+Bt*dn-qt*Un,h[3]=me*Ha-Bt*Un-qt*dn-pe*ra,h[4]=Bt*mr+me*De+qt*$e-pe*Ue+qr*Ha+Tn*Un+tn*ra-Qr*dn,h[5]=qt*mr+me*Ue+pe*De-Bt*$e+tn*Ha+Tn*dn+Qr*Un-qr*ra,h[6]=pe*mr+me*$e+Bt*Ue-qt*De+Qr*Ha+Tn*ra+qr*dn-tn*Un,h[7]=me*mr-Bt*De-qt*Ue-pe*$e+Tn*Ha-qr*Un-tn*dn-Qr*ra,h}var ks=cs;function ls(h,Y,Mt){return h[0]=Y[0]*Mt,h[1]=Y[1]*Mt,h[2]=Y[2]*Mt,h[3]=Y[3]*Mt,h[4]=Y[4]*Mt,h[5]=Y[5]*Mt,h[6]=Y[6]*Mt,h[7]=Y[7]*Mt,h}var js=qi;function Ks(h,Y,Mt,Bt){var qt=1-Bt;return js(Y,Mt)<0&&(Bt=-Bt),h[0]=Y[0]*qt+Mt[0]*Bt,h[1]=Y[1]*qt+Mt[1]*Bt,h[2]=Y[2]*qt+Mt[2]*Bt,h[3]=Y[3]*qt+Mt[3]*Bt,h[4]=Y[4]*qt+Mt[4]*Bt,h[5]=Y[5]*qt+Mt[5]*Bt,h[6]=Y[6]*qt+Mt[6]*Bt,h[7]=Y[7]*qt+Mt[7]*Bt,h}function Vs(h,Y){var Mt=Bs(Y);return h[0]=-Y[0]/Mt,h[1]=-Y[1]/Mt,h[2]=-Y[2]/Mt,h[3]=Y[3]/Mt,h[4]=-Y[4]/Mt,h[5]=-Y[5]/Mt,h[6]=-Y[6]/Mt,h[7]=Y[7]/Mt,h}function hu(h,Y){return h[0]=-Y[0],h[1]=-Y[1],h[2]=-Y[2],h[3]=Y[3],h[4]=-Y[4],h[5]=-Y[5],h[6]=-Y[6],h[7]=Y[7],h}var ds=es,Ds=ds,Bs=no,is=Bs;function Eu(h,Y){var Mt=Bs(Y);if(Mt>0){Mt=Math.sqrt(Mt);var Bt=Y[0]/Mt,qt=Y[1]/Mt,pe=Y[2]/Mt,me=Y[3]/Mt,De=Y[4],Ue=Y[5],$e=Y[6],mr=Y[7],qr=Bt*De+qt*Ue+pe*$e+me*mr;h[0]=Bt,h[1]=qt,h[2]=pe,h[3]=me,h[4]=(De-Bt*qr)/Mt,h[5]=(Ue-qt*qr)/Mt,h[6]=($e-pe*qr)/Mt,h[7]=(mr-me*qr)/Mt}return h}function wu(h){return"quat2("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+", "+h[6]+", "+h[7]+")"}function yo(h,Y){return h[0]===Y[0]&&h[1]===Y[1]&&h[2]===Y[2]&&h[3]===Y[3]&&h[4]===Y[4]&&h[5]===Y[5]&&h[6]===Y[6]&&h[7]===Y[7]}function Vo(h,Y){var Mt=h[0],Bt=h[1],qt=h[2],pe=h[3],me=h[4],De=h[5],Ue=h[6],$e=h[7],mr=Y[0],qr=Y[1],tn=Y[2],Qr=Y[3],Tn=Y[4],Un=Y[5],dn=Y[6],ra=Y[7];return Math.abs(Mt-mr)<=p.EPSILON*Math.max(1,Math.abs(Mt),Math.abs(mr))&&Math.abs(Bt-qr)<=p.EPSILON*Math.max(1,Math.abs(Bt),Math.abs(qr))&&Math.abs(qt-tn)<=p.EPSILON*Math.max(1,Math.abs(qt),Math.abs(tn))&&Math.abs(pe-Qr)<=p.EPSILON*Math.max(1,Math.abs(pe),Math.abs(Qr))&&Math.abs(me-Tn)<=p.EPSILON*Math.max(1,Math.abs(me),Math.abs(Tn))&&Math.abs(De-Un)<=p.EPSILON*Math.max(1,Math.abs(De),Math.abs(Un))&&Math.abs(Ue-dn)<=p.EPSILON*Math.max(1,Math.abs(Ue),Math.abs(dn))&&Math.abs($e-ra)<=p.EPSILON*Math.max(1,Math.abs($e),Math.abs(ra))}var os=_(631437)},935600:function(We,G,_){"use strict";_.r(G),_.d(G,{add:function(){return J},adjoint:function(){return g},clone:function(){return M},copy:function(){return P},create:function(){return R},determinant:function(){return T},equals:function(){return Ft},exactEquals:function(){return dt},frob:function(){return $},fromMat2d:function(){return F},fromMat4:function(){return w},fromQuat:function(){return W},fromRotation:function(){return U},fromScaling:function(){return X},fromTranslation:function(){return l},fromValues:function(){return L},identity:function(){return b},invert:function(){return x},mul:function(){return wt},multiply:function(){return E},multiplyScalar:function(){return nt},multiplyScalarAndAdd:function(){return yt},normalFromMat4:function(){return j},projection:function(){return V},rotate:function(){return k},scale:function(){return y},set:function(){return p},str:function(){return q},sub:function(){return St},subtract:function(){return ut},translate:function(){return O},transpose:function(){return S}});var m=_(73633);function R(){var et=new m.ARRAY_TYPE(9);return m.ARRAY_TYPE!=Float32Array&&(et[1]=0,et[2]=0,et[3]=0,et[5]=0,et[6]=0,et[7]=0),et[0]=1,et[4]=1,et[8]=1,et}function w(et,it){return et[0]=it[0],et[1]=it[1],et[2]=it[2],et[3]=it[4],et[4]=it[5],et[5]=it[6],et[6]=it[8],et[7]=it[9],et[8]=it[10],et}function M(et){var it=new m.ARRAY_TYPE(9);return it[0]=et[0],it[1]=et[1],it[2]=et[2],it[3]=et[3],it[4]=et[4],it[5]=et[5],it[6]=et[6],it[7]=et[7],it[8]=et[8],it}function P(et,it){return et[0]=it[0],et[1]=it[1],et[2]=it[2],et[3]=it[3],et[4]=it[4],et[5]=it[5],et[6]=it[6],et[7]=it[7],et[8]=it[8],et}function L(et,it,Tt,Nt,st,xt,zt,Wt,_t){var Xt=new m.ARRAY_TYPE(9);return Xt[0]=et,Xt[1]=it,Xt[2]=Tt,Xt[3]=Nt,Xt[4]=st,Xt[5]=xt,Xt[6]=zt,Xt[7]=Wt,Xt[8]=_t,Xt}function p(et,it,Tt,Nt,st,xt,zt,Wt,_t,Xt){return et[0]=it,et[1]=Tt,et[2]=Nt,et[3]=st,et[4]=xt,et[5]=zt,et[6]=Wt,et[7]=_t,et[8]=Xt,et}function b(et){return et[0]=1,et[1]=0,et[2]=0,et[3]=0,et[4]=1,et[5]=0,et[6]=0,et[7]=0,et[8]=1,et}function S(et,it){if(et===it){var Tt=it[1],Nt=it[2],st=it[5];et[1]=it[3],et[2]=it[6],et[3]=Tt,et[5]=it[7],et[6]=Nt,et[7]=st}else et[0]=it[0],et[1]=it[3],et[2]=it[6],et[3]=it[1],et[4]=it[4],et[5]=it[7],et[6]=it[2],et[7]=it[5],et[8]=it[8];return et}function x(et,it){var Tt=it[0],Nt=it[1],st=it[2],xt=it[3],zt=it[4],Wt=it[5],_t=it[6],Xt=it[7],te=it[8],ue=te*zt-Wt*Xt,fe=-te*xt+Wt*_t,Gt=Xt*xt-zt*_t,ae=Tt*ue+Nt*fe+st*Gt;return ae?(ae=1/ae,et[0]=ue*ae,et[1]=(-te*Nt+st*Xt)*ae,et[2]=(Wt*Nt-st*zt)*ae,et[3]=fe*ae,et[4]=(te*Tt-st*_t)*ae,et[5]=(-Wt*Tt+st*xt)*ae,et[6]=Gt*ae,et[7]=(-Xt*Tt+Nt*_t)*ae,et[8]=(zt*Tt-Nt*xt)*ae,et):null}function g(et,it){var Tt=it[0],Nt=it[1],st=it[2],xt=it[3],zt=it[4],Wt=it[5],_t=it[6],Xt=it[7],te=it[8];return et[0]=zt*te-Wt*Xt,et[1]=st*Xt-Nt*te,et[2]=Nt*Wt-st*zt,et[3]=Wt*_t-xt*te,et[4]=Tt*te-st*_t,et[5]=st*xt-Tt*Wt,et[6]=xt*Xt-zt*_t,et[7]=Nt*_t-Tt*Xt,et[8]=Tt*zt-Nt*xt,et}function T(et){var it=et[0],Tt=et[1],Nt=et[2],st=et[3],xt=et[4],zt=et[5],Wt=et[6],_t=et[7],Xt=et[8];return it*(Xt*xt-zt*_t)+Tt*(-Xt*st+zt*Wt)+Nt*(_t*st-xt*Wt)}function E(et,it,Tt){var Nt=it[0],st=it[1],xt=it[2],zt=it[3],Wt=it[4],_t=it[5],Xt=it[6],te=it[7],ue=it[8],fe=Tt[0],Gt=Tt[1],ae=Tt[2],Ne=Tt[3],ee=Tt[4],de=Tt[5],ze=Tt[6],be=Tt[7],ke=Tt[8];return et[0]=fe*Nt+Gt*zt+ae*Xt,et[1]=fe*st+Gt*Wt+ae*te,et[2]=fe*xt+Gt*_t+ae*ue,et[3]=Ne*Nt+ee*zt+de*Xt,et[4]=Ne*st+ee*Wt+de*te,et[5]=Ne*xt+ee*_t+de*ue,et[6]=ze*Nt+be*zt+ke*Xt,et[7]=ze*st+be*Wt+ke*te,et[8]=ze*xt+be*_t+ke*ue,et}function O(et,it,Tt){var Nt=it[0],st=it[1],xt=it[2],zt=it[3],Wt=it[4],_t=it[5],Xt=it[6],te=it[7],ue=it[8],fe=Tt[0],Gt=Tt[1];return et[0]=Nt,et[1]=st,et[2]=xt,et[3]=zt,et[4]=Wt,et[5]=_t,et[6]=fe*Nt+Gt*zt+Xt,et[7]=fe*st+Gt*Wt+te,et[8]=fe*xt+Gt*_t+ue,et}function k(et,it,Tt){var Nt=it[0],st=it[1],xt=it[2],zt=it[3],Wt=it[4],_t=it[5],Xt=it[6],te=it[7],ue=it[8],fe=Math.sin(Tt),Gt=Math.cos(Tt);return et[0]=Gt*Nt+fe*zt,et[1]=Gt*st+fe*Wt,et[2]=Gt*xt+fe*_t,et[3]=Gt*zt-fe*Nt,et[4]=Gt*Wt-fe*st,et[5]=Gt*_t-fe*xt,et[6]=Xt,et[7]=te,et[8]=ue,et}function y(et,it,Tt){var Nt=Tt[0],st=Tt[1];return et[0]=Nt*it[0],et[1]=Nt*it[1],et[2]=Nt*it[2],et[3]=st*it[3],et[4]=st*it[4],et[5]=st*it[5],et[6]=it[6],et[7]=it[7],et[8]=it[8],et}function l(et,it){return et[0]=1,et[1]=0,et[2]=0,et[3]=0,et[4]=1,et[5]=0,et[6]=it[0],et[7]=it[1],et[8]=1,et}function U(et,it){var Tt=Math.sin(it),Nt=Math.cos(it);return et[0]=Nt,et[1]=Tt,et[2]=0,et[3]=-Tt,et[4]=Nt,et[5]=0,et[6]=0,et[7]=0,et[8]=1,et}function X(et,it){return et[0]=it[0],et[1]=0,et[2]=0,et[3]=0,et[4]=it[1],et[5]=0,et[6]=0,et[7]=0,et[8]=1,et}function F(et,it){return et[0]=it[0],et[1]=it[1],et[2]=0,et[3]=it[2],et[4]=it[3],et[5]=0,et[6]=it[4],et[7]=it[5],et[8]=1,et}function W(et,it){var Tt=it[0],Nt=it[1],st=it[2],xt=it[3],zt=Tt+Tt,Wt=Nt+Nt,_t=st+st,Xt=Tt*zt,te=Nt*zt,ue=Nt*Wt,fe=st*zt,Gt=st*Wt,ae=st*_t,Ne=xt*zt,ee=xt*Wt,de=xt*_t;return et[0]=1-ue-ae,et[3]=te-de,et[6]=fe+ee,et[1]=te+de,et[4]=1-Xt-ae,et[7]=Gt-Ne,et[2]=fe-ee,et[5]=Gt+Ne,et[8]=1-Xt-ue,et}function j(et,it){var Tt=it[0],Nt=it[1],st=it[2],xt=it[3],zt=it[4],Wt=it[5],_t=it[6],Xt=it[7],te=it[8],ue=it[9],fe=it[10],Gt=it[11],ae=it[12],Ne=it[13],ee=it[14],de=it[15],ze=Tt*Wt-Nt*zt,be=Tt*_t-st*zt,ke=Tt*Xt-xt*zt,he=Nt*_t-st*Wt,vt=Nt*Xt-xt*Wt,ie=st*Xt-xt*_t,Pe=te*Ne-ue*ae,qe=te*ee-fe*ae,Qe=te*de-Gt*ae,lr=ue*ee-fe*Ne,fr=ue*de-Gt*Ne,kr=fe*de-Gt*ee,En=ze*kr-be*fr+ke*lr+he*Qe-vt*qe+ie*Pe;return En?(En=1/En,et[0]=(Wt*kr-_t*fr+Xt*lr)*En,et[1]=(_t*Qe-zt*kr-Xt*qe)*En,et[2]=(zt*fr-Wt*Qe+Xt*Pe)*En,et[3]=(st*fr-Nt*kr-xt*lr)*En,et[4]=(Tt*kr-st*Qe+xt*qe)*En,et[5]=(Nt*Qe-Tt*fr-xt*Pe)*En,et[6]=(Ne*ie-ee*vt+de*he)*En,et[7]=(ee*ke-ae*ie-de*be)*En,et[8]=(ae*vt-Ne*ke+de*ze)*En,et):null}function V(et,it,Tt){return et[0]=2/it,et[1]=0,et[2]=0,et[3]=0,et[4]=-2/Tt,et[5]=0,et[6]=-1,et[7]=1,et[8]=1,et}function q(et){return"mat3("+et[0]+", "+et[1]+", "+et[2]+", "+et[3]+", "+et[4]+", "+et[5]+", "+et[6]+", "+et[7]+", "+et[8]+")"}function $(et){return Math.hypot(et[0],et[1],et[2],et[3],et[4],et[5],et[6],et[7],et[8])}function J(et,it,Tt){return et[0]=it[0]+Tt[0],et[1]=it[1]+Tt[1],et[2]=it[2]+Tt[2],et[3]=it[3]+Tt[3],et[4]=it[4]+Tt[4],et[5]=it[5]+Tt[5],et[6]=it[6]+Tt[6],et[7]=it[7]+Tt[7],et[8]=it[8]+Tt[8],et}function ut(et,it,Tt){return et[0]=it[0]-Tt[0],et[1]=it[1]-Tt[1],et[2]=it[2]-Tt[2],et[3]=it[3]-Tt[3],et[4]=it[4]-Tt[4],et[5]=it[5]-Tt[5],et[6]=it[6]-Tt[6],et[7]=it[7]-Tt[7],et[8]=it[8]-Tt[8],et}function nt(et,it,Tt){return et[0]=it[0]*Tt,et[1]=it[1]*Tt,et[2]=it[2]*Tt,et[3]=it[3]*Tt,et[4]=it[4]*Tt,et[5]=it[5]*Tt,et[6]=it[6]*Tt,et[7]=it[7]*Tt,et[8]=it[8]*Tt,et}function yt(et,it,Tt,Nt){return et[0]=it[0]+Tt[0]*Nt,et[1]=it[1]+Tt[1]*Nt,et[2]=it[2]+Tt[2]*Nt,et[3]=it[3]+Tt[3]*Nt,et[4]=it[4]+Tt[4]*Nt,et[5]=it[5]+Tt[5]*Nt,et[6]=it[6]+Tt[6]*Nt,et[7]=it[7]+Tt[7]*Nt,et[8]=it[8]+Tt[8]*Nt,et}function dt(et,it){return et[0]===it[0]&&et[1]===it[1]&&et[2]===it[2]&&et[3]===it[3]&&et[4]===it[4]&&et[5]===it[5]&&et[6]===it[6]&&et[7]===it[7]&&et[8]===it[8]}function Ft(et,it){var Tt=et[0],Nt=et[1],st=et[2],xt=et[3],zt=et[4],Wt=et[5],_t=et[6],Xt=et[7],te=et[8],ue=it[0],fe=it[1],Gt=it[2],ae=it[3],Ne=it[4],ee=it[5],de=it[6],ze=it[7],be=it[8];return Math.abs(Tt-ue)<=m.EPSILON*Math.max(1,Math.abs(Tt),Math.abs(ue))&&Math.abs(Nt-fe)<=m.EPSILON*Math.max(1,Math.abs(Nt),Math.abs(fe))&&Math.abs(st-Gt)<=m.EPSILON*Math.max(1,Math.abs(st),Math.abs(Gt))&&Math.abs(xt-ae)<=m.EPSILON*Math.max(1,Math.abs(xt),Math.abs(ae))&&Math.abs(zt-Ne)<=m.EPSILON*Math.max(1,Math.abs(zt),Math.abs(Ne))&&Math.abs(Wt-ee)<=m.EPSILON*Math.max(1,Math.abs(Wt),Math.abs(ee))&&Math.abs(_t-de)<=m.EPSILON*Math.max(1,Math.abs(_t),Math.abs(de))&&Math.abs(Xt-ze)<=m.EPSILON*Math.max(1,Math.abs(Xt),Math.abs(ze))&&Math.abs(te-be)<=m.EPSILON*Math.max(1,Math.abs(te),Math.abs(be))}var wt=E,St=ut},631437:function(We,G,_){"use strict";_.r(G),_.d(G,{add:function(){return p},angle:function(){return et},ceil:function(){return g},clone:function(){return w},copy:function(){return P},create:function(){return R},cross:function(){return J},dist:function(){return Xt},distance:function(){return U},div:function(){return _t},divide:function(){return x},dot:function(){return $},equals:function(){return st},exactEquals:function(){return Nt},floor:function(){return T},forEach:function(){return fe},fromValues:function(){return M},inverse:function(){return V},len:function(){return xt},length:function(){return F},lerp:function(){return ut},max:function(){return O},min:function(){return E},mul:function(){return Wt},multiply:function(){return S},negate:function(){return j},normalize:function(){return q},random:function(){return nt},rotate:function(){return St},round:function(){return k},scale:function(){return y},scaleAndAdd:function(){return l},set:function(){return L},sqrDist:function(){return te},sqrLen:function(){return ue},squaredDistance:function(){return X},squaredLength:function(){return W},str:function(){return Tt},sub:function(){return zt},subtract:function(){return b},transformMat2:function(){return yt},transformMat2d:function(){return dt},transformMat3:function(){return Ft},transformMat4:function(){return wt},zero:function(){return it}});var m=_(73633);function R(){var Gt=new m.ARRAY_TYPE(2);return m.ARRAY_TYPE!=Float32Array&&(Gt[0]=0,Gt[1]=0),Gt}function w(Gt){var ae=new m.ARRAY_TYPE(2);return ae[0]=Gt[0],ae[1]=Gt[1],ae}function M(Gt,ae){var Ne=new m.ARRAY_TYPE(2);return Ne[0]=Gt,Ne[1]=ae,Ne}function P(Gt,ae){return Gt[0]=ae[0],Gt[1]=ae[1],Gt}function L(Gt,ae,Ne){return Gt[0]=ae,Gt[1]=Ne,Gt}function p(Gt,ae,Ne){return Gt[0]=ae[0]+Ne[0],Gt[1]=ae[1]+Ne[1],Gt}function b(Gt,ae,Ne){return Gt[0]=ae[0]-Ne[0],Gt[1]=ae[1]-Ne[1],Gt}function S(Gt,ae,Ne){return Gt[0]=ae[0]*Ne[0],Gt[1]=ae[1]*Ne[1],Gt}function x(Gt,ae,Ne){return Gt[0]=ae[0]/Ne[0],Gt[1]=ae[1]/Ne[1],Gt}function g(Gt,ae){return Gt[0]=Math.ceil(ae[0]),Gt[1]=Math.ceil(ae[1]),Gt}function T(Gt,ae){return Gt[0]=Math.floor(ae[0]),Gt[1]=Math.floor(ae[1]),Gt}function E(Gt,ae,Ne){return Gt[0]=Math.min(ae[0],Ne[0]),Gt[1]=Math.min(ae[1],Ne[1]),Gt}function O(Gt,ae,Ne){return Gt[0]=Math.max(ae[0],Ne[0]),Gt[1]=Math.max(ae[1],Ne[1]),Gt}function k(Gt,ae){return Gt[0]=Math.round(ae[0]),Gt[1]=Math.round(ae[1]),Gt}function y(Gt,ae,Ne){return Gt[0]=ae[0]*Ne,Gt[1]=ae[1]*Ne,Gt}function l(Gt,ae,Ne,ee){return Gt[0]=ae[0]+Ne[0]*ee,Gt[1]=ae[1]+Ne[1]*ee,Gt}function U(Gt,ae){var Ne=ae[0]-Gt[0],ee=ae[1]-Gt[1];return Math.hypot(Ne,ee)}function X(Gt,ae){var Ne=ae[0]-Gt[0],ee=ae[1]-Gt[1];return Ne*Ne+ee*ee}function F(Gt){var ae=Gt[0],Ne=Gt[1];return Math.hypot(ae,Ne)}function W(Gt){var ae=Gt[0],Ne=Gt[1];return ae*ae+Ne*Ne}function j(Gt,ae){return Gt[0]=-ae[0],Gt[1]=-ae[1],Gt}function V(Gt,ae){return Gt[0]=1/ae[0],Gt[1]=1/ae[1],Gt}function q(Gt,ae){var Ne=ae[0],ee=ae[1],de=Ne*Ne+ee*ee;return de>0&&(de=1/Math.sqrt(de)),Gt[0]=ae[0]*de,Gt[1]=ae[1]*de,Gt}function $(Gt,ae){return Gt[0]*ae[0]+Gt[1]*ae[1]}function J(Gt,ae,Ne){var ee=ae[0]*Ne[1]-ae[1]*Ne[0];return Gt[0]=Gt[1]=0,Gt[2]=ee,Gt}function ut(Gt,ae,Ne,ee){var de=ae[0],ze=ae[1];return Gt[0]=de+ee*(Ne[0]-de),Gt[1]=ze+ee*(Ne[1]-ze),Gt}function nt(Gt,ae){ae=ae||1;var Ne=m.RANDOM()*2*Math.PI;return Gt[0]=Math.cos(Ne)*ae,Gt[1]=Math.sin(Ne)*ae,Gt}function yt(Gt,ae,Ne){var ee=ae[0],de=ae[1];return Gt[0]=Ne[0]*ee+Ne[2]*de,Gt[1]=Ne[1]*ee+Ne[3]*de,Gt}function dt(Gt,ae,Ne){var ee=ae[0],de=ae[1];return Gt[0]=Ne[0]*ee+Ne[2]*de+Ne[4],Gt[1]=Ne[1]*ee+Ne[3]*de+Ne[5],Gt}function Ft(Gt,ae,Ne){var ee=ae[0],de=ae[1];return Gt[0]=Ne[0]*ee+Ne[3]*de+Ne[6],Gt[1]=Ne[1]*ee+Ne[4]*de+Ne[7],Gt}function wt(Gt,ae,Ne){var ee=ae[0],de=ae[1];return Gt[0]=Ne[0]*ee+Ne[4]*de+Ne[12],Gt[1]=Ne[1]*ee+Ne[5]*de+Ne[13],Gt}function St(Gt,ae,Ne,ee){var de=ae[0]-Ne[0],ze=ae[1]-Ne[1],be=Math.sin(ee),ke=Math.cos(ee);return Gt[0]=de*ke-ze*be+Ne[0],Gt[1]=de*be+ze*ke+Ne[1],Gt}function et(Gt,ae){var Ne=Gt[0],ee=Gt[1],de=ae[0],ze=ae[1],be=Math.sqrt(Ne*Ne+ee*ee)*Math.sqrt(de*de+ze*ze),ke=be&&(Ne*de+ee*ze)/be;return Math.acos(Math.min(Math.max(ke,-1),1))}function it(Gt){return Gt[0]=0,Gt[1]=0,Gt}function Tt(Gt){return"vec2("+Gt[0]+", "+Gt[1]+")"}function Nt(Gt,ae){return Gt[0]===ae[0]&&Gt[1]===ae[1]}function st(Gt,ae){var Ne=Gt[0],ee=Gt[1],de=ae[0],ze=ae[1];return Math.abs(Ne-de)<=m.EPSILON*Math.max(1,Math.abs(Ne),Math.abs(de))&&Math.abs(ee-ze)<=m.EPSILON*Math.max(1,Math.abs(ee),Math.abs(ze))}var xt=F,zt=b,Wt=S,_t=x,Xt=U,te=X,ue=W,fe=function(){var Gt=R();return function(ae,Ne,ee,de,ze,be){var ke,he;for(Ne||(Ne=2),ee||(ee=0),de?he=Math.min(de*Ne+ee,ae.length):he=ae.length,ke=ee;ke<he;ke+=Ne)Gt[0]=ae[ke],Gt[1]=ae[ke+1],ze(Gt,Gt,be),ae[ke]=Gt[0],ae[ke+1]=Gt[1];return ae}}()},277160:function(We,G,_){"use strict";_.r(G),_.d(G,{add:function(){return b},angle:function(){return Nt},bezier:function(){return yt},ceil:function(){return T},clone:function(){return w},copy:function(){return L},create:function(){return R},cross:function(){return J},dist:function(){return ue},distance:function(){return X},div:function(){return te},divide:function(){return g},dot:function(){return $},equals:function(){return Wt},exactEquals:function(){return zt},floor:function(){return E},forEach:function(){return Ne},fromValues:function(){return P},hermite:function(){return nt},inverse:function(){return V},len:function(){return Gt},length:function(){return M},lerp:function(){return ut},max:function(){return k},min:function(){return O},mul:function(){return Xt},multiply:function(){return x},negate:function(){return j},normalize:function(){return q},random:function(){return dt},rotateX:function(){return et},rotateY:function(){return it},rotateZ:function(){return Tt},round:function(){return y},scale:function(){return l},scaleAndAdd:function(){return U},set:function(){return p},sqrDist:function(){return fe},sqrLen:function(){return ae},squaredDistance:function(){return F},squaredLength:function(){return W},str:function(){return xt},sub:function(){return _t},subtract:function(){return S},transformMat3:function(){return wt},transformMat4:function(){return Ft},transformQuat:function(){return St},zero:function(){return st}});var m=_(73633);function R(){var ee=new m.ARRAY_TYPE(3);return m.ARRAY_TYPE!=Float32Array&&(ee[0]=0,ee[1]=0,ee[2]=0),ee}function w(ee){var de=new m.ARRAY_TYPE(3);return de[0]=ee[0],de[1]=ee[1],de[2]=ee[2],de}function M(ee){var de=ee[0],ze=ee[1],be=ee[2];return Math.hypot(de,ze,be)}function P(ee,de,ze){var be=new m.ARRAY_TYPE(3);return be[0]=ee,be[1]=de,be[2]=ze,be}function L(ee,de){return ee[0]=de[0],ee[1]=de[1],ee[2]=de[2],ee}function p(ee,de,ze,be){return ee[0]=de,ee[1]=ze,ee[2]=be,ee}function b(ee,de,ze){return ee[0]=de[0]+ze[0],ee[1]=de[1]+ze[1],ee[2]=de[2]+ze[2],ee}function S(ee,de,ze){return ee[0]=de[0]-ze[0],ee[1]=de[1]-ze[1],ee[2]=de[2]-ze[2],ee}function x(ee,de,ze){return ee[0]=de[0]*ze[0],ee[1]=de[1]*ze[1],ee[2]=de[2]*ze[2],ee}function g(ee,de,ze){return ee[0]=de[0]/ze[0],ee[1]=de[1]/ze[1],ee[2]=de[2]/ze[2],ee}function T(ee,de){return ee[0]=Math.ceil(de[0]),ee[1]=Math.ceil(de[1]),ee[2]=Math.ceil(de[2]),ee}function E(ee,de){return ee[0]=Math.floor(de[0]),ee[1]=Math.floor(de[1]),ee[2]=Math.floor(de[2]),ee}function O(ee,de,ze){return ee[0]=Math.min(de[0],ze[0]),ee[1]=Math.min(de[1],ze[1]),ee[2]=Math.min(de[2],ze[2]),ee}function k(ee,de,ze){return ee[0]=Math.max(de[0],ze[0]),ee[1]=Math.max(de[1],ze[1]),ee[2]=Math.max(de[2],ze[2]),ee}function y(ee,de){return ee[0]=Math.round(de[0]),ee[1]=Math.round(de[1]),ee[2]=Math.round(de[2]),ee}function l(ee,de,ze){return ee[0]=de[0]*ze,ee[1]=de[1]*ze,ee[2]=de[2]*ze,ee}function U(ee,de,ze,be){return ee[0]=de[0]+ze[0]*be,ee[1]=de[1]+ze[1]*be,ee[2]=de[2]+ze[2]*be,ee}function X(ee,de){var ze=de[0]-ee[0],be=de[1]-ee[1],ke=de[2]-ee[2];return Math.hypot(ze,be,ke)}function F(ee,de){var ze=de[0]-ee[0],be=de[1]-ee[1],ke=de[2]-ee[2];return ze*ze+be*be+ke*ke}function W(ee){var de=ee[0],ze=ee[1],be=ee[2];return de*de+ze*ze+be*be}function j(ee,de){return ee[0]=-de[0],ee[1]=-de[1],ee[2]=-de[2],ee}function V(ee,de){return ee[0]=1/de[0],ee[1]=1/de[1],ee[2]=1/de[2],ee}function q(ee,de){var ze=de[0],be=de[1],ke=de[2],he=ze*ze+be*be+ke*ke;return he>0&&(he=1/Math.sqrt(he)),ee[0]=de[0]*he,ee[1]=de[1]*he,ee[2]=de[2]*he,ee}function $(ee,de){return ee[0]*de[0]+ee[1]*de[1]+ee[2]*de[2]}function J(ee,de,ze){var be=de[0],ke=de[1],he=de[2],vt=ze[0],ie=ze[1],Pe=ze[2];return ee[0]=ke*Pe-he*ie,ee[1]=he*vt-be*Pe,ee[2]=be*ie-ke*vt,ee}function ut(ee,de,ze,be){var ke=de[0],he=de[1],vt=de[2];return ee[0]=ke+be*(ze[0]-ke),ee[1]=he+be*(ze[1]-he),ee[2]=vt+be*(ze[2]-vt),ee}function nt(ee,de,ze,be,ke,he){var vt=he*he,ie=vt*(2*he-3)+1,Pe=vt*(he-2)+he,qe=vt*(he-1),Qe=vt*(3-2*he);return ee[0]=de[0]*ie+ze[0]*Pe+be[0]*qe+ke[0]*Qe,ee[1]=de[1]*ie+ze[1]*Pe+be[1]*qe+ke[1]*Qe,ee[2]=de[2]*ie+ze[2]*Pe+be[2]*qe+ke[2]*Qe,ee}function yt(ee,de,ze,be,ke,he){var vt=1-he,ie=vt*vt,Pe=he*he,qe=ie*vt,Qe=3*he*ie,lr=3*Pe*vt,fr=Pe*he;return ee[0]=de[0]*qe+ze[0]*Qe+be[0]*lr+ke[0]*fr,ee[1]=de[1]*qe+ze[1]*Qe+be[1]*lr+ke[1]*fr,ee[2]=de[2]*qe+ze[2]*Qe+be[2]*lr+ke[2]*fr,ee}function dt(ee,de){de=de||1;var ze=m.RANDOM()*2*Math.PI,be=m.RANDOM()*2-1,ke=Math.sqrt(1-be*be)*de;return ee[0]=Math.cos(ze)*ke,ee[1]=Math.sin(ze)*ke,ee[2]=be*de,ee}function Ft(ee,de,ze){var be=de[0],ke=de[1],he=de[2],vt=ze[3]*be+ze[7]*ke+ze[11]*he+ze[15];return vt=vt||1,ee[0]=(ze[0]*be+ze[4]*ke+ze[8]*he+ze[12])/vt,ee[1]=(ze[1]*be+ze[5]*ke+ze[9]*he+ze[13])/vt,ee[2]=(ze[2]*be+ze[6]*ke+ze[10]*he+ze[14])/vt,ee}function wt(ee,de,ze){var be=de[0],ke=de[1],he=de[2];return ee[0]=be*ze[0]+ke*ze[3]+he*ze[6],ee[1]=be*ze[1]+ke*ze[4]+he*ze[7],ee[2]=be*ze[2]+ke*ze[5]+he*ze[8],ee}function St(ee,de,ze){var be=ze[0],ke=ze[1],he=ze[2],vt=ze[3],ie=de[0],Pe=de[1],qe=de[2],Qe=ke*qe-he*Pe,lr=he*ie-be*qe,fr=be*Pe-ke*ie,kr=ke*fr-he*lr,En=he*Qe-be*fr,fn=be*lr-ke*Qe,Vr=vt*2;return Qe*=Vr,lr*=Vr,fr*=Vr,kr*=2,En*=2,fn*=2,ee[0]=ie+Qe+kr,ee[1]=Pe+lr+En,ee[2]=qe+fr+fn,ee}function et(ee,de,ze,be){var ke=[],he=[];return ke[0]=de[0]-ze[0],ke[1]=de[1]-ze[1],ke[2]=de[2]-ze[2],he[0]=ke[0],he[1]=ke[1]*Math.cos(be)-ke[2]*Math.sin(be),he[2]=ke[1]*Math.sin(be)+ke[2]*Math.cos(be),ee[0]=he[0]+ze[0],ee[1]=he[1]+ze[1],ee[2]=he[2]+ze[2],ee}function it(ee,de,ze,be){var ke=[],he=[];return ke[0]=de[0]-ze[0],ke[1]=de[1]-ze[1],ke[2]=de[2]-ze[2],he[0]=ke[2]*Math.sin(be)+ke[0]*Math.cos(be),he[1]=ke[1],he[2]=ke[2]*Math.cos(be)-ke[0]*Math.sin(be),ee[0]=he[0]+ze[0],ee[1]=he[1]+ze[1],ee[2]=he[2]+ze[2],ee}function Tt(ee,de,ze,be){var ke=[],he=[];return ke[0]=de[0]-ze[0],ke[1]=de[1]-ze[1],ke[2]=de[2]-ze[2],he[0]=ke[0]*Math.cos(be)-ke[1]*Math.sin(be),he[1]=ke[0]*Math.sin(be)+ke[1]*Math.cos(be),he[2]=ke[2],ee[0]=he[0]+ze[0],ee[1]=he[1]+ze[1],ee[2]=he[2]+ze[2],ee}function Nt(ee,de){var ze=ee[0],be=ee[1],ke=ee[2],he=de[0],vt=de[1],ie=de[2],Pe=Math.sqrt(ze*ze+be*be+ke*ke),qe=Math.sqrt(he*he+vt*vt+ie*ie),Qe=Pe*qe,lr=Qe&&$(ee,de)/Qe;return Math.acos(Math.min(Math.max(lr,-1),1))}function st(ee){return ee[0]=0,ee[1]=0,ee[2]=0,ee}function xt(ee){return"vec3("+ee[0]+", "+ee[1]+", "+ee[2]+")"}function zt(ee,de){return ee[0]===de[0]&&ee[1]===de[1]&&ee[2]===de[2]}function Wt(ee,de){var ze=ee[0],be=ee[1],ke=ee[2],he=de[0],vt=de[1],ie=de[2];return Math.abs(ze-he)<=m.EPSILON*Math.max(1,Math.abs(ze),Math.abs(he))&&Math.abs(be-vt)<=m.EPSILON*Math.max(1,Math.abs(be),Math.abs(vt))&&Math.abs(ke-ie)<=m.EPSILON*Math.max(1,Math.abs(ke),Math.abs(ie))}var _t=S,Xt=x,te=g,ue=X,fe=F,Gt=M,ae=W,Ne=function(){var ee=R();return function(de,ze,be,ke,he,vt){var ie,Pe;for(ze||(ze=3),be||(be=0),ke?Pe=Math.min(ke*ze+be,de.length):Pe=de.length,ie=be;ie<Pe;ie+=ze)ee[0]=de[ie],ee[1]=de[ie+1],ee[2]=de[ie+2],he(ee,ee,vt),de[ie]=ee[0],de[ie+1]=ee[1],de[ie+2]=ee[2];return de}}()},728185:function(We){"use strict";var G={foo:{}},_=Object;We.exports=function(){return{__proto__:G}.foo===G.foo&&!({__proto__:null}instanceof _)}},241405:function(We,G,_){"use strict";var m=typeof Symbol!="undefined"&&Symbol,R=_(455419);We.exports=function(){return typeof m!="function"||typeof Symbol!="function"||typeof m("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:R()}},455419:function(We){"use strict";We.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var _={},m=Symbol("test"),R=Object(m);if(typeof m=="string"||Object.prototype.toString.call(m)!=="[object Symbol]"||Object.prototype.toString.call(R)!=="[object Symbol]")return!1;var w=42;_[m]=w;for(m in _)return!1;if(typeof Object.keys=="function"&&Object.keys(_).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(_).length!==0)return!1;var M=Object.getOwnPropertySymbols(_);if(M.length!==1||M[0]!==m||!Object.prototype.propertyIsEnumerable.call(_,m))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var P=Object.getOwnPropertyDescriptor(_,m);if(P.value!==w||P.enumerable!==!0)return!1}return!0}},117642:function(We,G,_){"use strict";var m=_(158612);We.exports=m.call(Function.call,Object.prototype.hasOwnProperty)},738186:function(We){var G=[],_=[],m="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function R(M,P){if(P=P||{},M===void 0)throw new Error(m);var L=P.prepend===!0?"prepend":"append",p=P.container!==void 0?P.container:document.querySelector("head"),b=G.indexOf(p);b===-1&&(b=G.push(p)-1,_[b]={});var S;return _[b]!==void 0&&_[b][L]!==void 0?S=_[b][L]:(S=_[b][L]=w(),L==="prepend"?p.insertBefore(S,p.childNodes[0]):p.appendChild(S)),M.charCodeAt(0)===65279&&(M=M.substr(1,M.length)),S.styleSheet?S.styleSheet.cssText+=M:S.textContent+=M,S}function w(){var M=document.createElement("style");return M.setAttribute("type","text/css"),M}We.exports=R,We.exports.insertCss=R},896874:function(We){function G(_,m,R){switch(R.length){case 0:return _.call(m);case 1:return _.call(m,R[0]);case 2:return _.call(m,R[0],R[1]);case 3:return _.call(m,R[0],R[1],R[2])}return _.apply(m,R)}We.exports=G},829932:function(We){function G(_,m){for(var R=-1,w=_==null?0:_.length,M=Array(w);++R<w;)M[R]=m(_[R],R,_);return M}We.exports=G},920731:function(We,G,_){var m=_(288668),R=_(447443),w=_(301196),M=_(829932),P=_(307518),L=_(274757),p=200;function b(S,x,g,T){var E=-1,O=R,k=!0,y=S.length,l=[],U=x.length;if(!y)return l;g&&(x=M(x,P(g))),T?(O=w,k=!1):x.length>=p&&(O=L,k=!1,x=new m(x));t:for(;++E<y;){var X=S[E],F=g==null?X:g(X);if(X=T||X!==0?X:0,k&&F===F){for(var W=U;W--;)if(x[W]===F)continue t;l.push(X)}else O(x,F,T)||l.push(X)}return l}We.exports=b},238749:function(We,G,_){var m=_(644239),R=_(541780),w=_(637005),M="[object Arguments]",P="[object Array]",L="[object Boolean]",p="[object Date]",b="[object Error]",S="[object Function]",x="[object Map]",g="[object Number]",T="[object Object]",E="[object RegExp]",O="[object Set]",k="[object String]",y="[object WeakMap]",l="[object ArrayBuffer]",U="[object DataView]",X="[object Float32Array]",F="[object Float64Array]",W="[object Int8Array]",j="[object Int16Array]",V="[object Int32Array]",q="[object Uint8Array]",$="[object Uint8ClampedArray]",J="[object Uint16Array]",ut="[object Uint32Array]",nt={};nt[X]=nt[F]=nt[W]=nt[j]=nt[V]=nt[q]=nt[$]=nt[J]=nt[ut]=!0,nt[M]=nt[P]=nt[l]=nt[L]=nt[U]=nt[p]=nt[b]=nt[S]=nt[x]=nt[g]=nt[T]=nt[E]=nt[O]=nt[k]=nt[y]=!1;function yt(dt){return w(dt)&&R(dt.length)&&!!nt[m(dt)]}We.exports=yt},105976:function(We,G,_){var m=_(406557),R=_(545357),w=_(430061);function M(P,L){return w(R(P,L,m),P+"")}We.exports=M},356560:function(We,G,_){var m=_(575703),R=_(538777),w=_(406557),M=R?function(P,L){return R(P,"toString",{configurable:!0,enumerable:!1,value:m(L),writable:!0})}:w;We.exports=M},307518:function(We){function G(_){return function(m){return _(m)}}We.exports=G},538777:function(We,G,_){var m=_(610852),R=function(){try{var w=m(Object,"defineProperty");return w({},"",{}),w}catch(M){}}();We.exports=R},385924:function(We,G,_){var m=_(205569),R=m(Object.getPrototypeOf,Object);We.exports=R},531167:function(We,G,_){We=_.nmd(We);var m=_(431957),R=G&&!G.nodeType&&G,w=R&&!0&&We&&!We.nodeType&&We,M=w&&w.exports===R,P=M&&m.process,L=function(){try{var p=w&&w.require&&w.require("util").types;return p||P&&P.binding&&P.binding("util")}catch(b){}}();We.exports=L},205569:function(We){function G(_,m){return function(R){return _(m(R))}}We.exports=G},545357:function(We,G,_){var m=_(896874),R=Math.max;function w(M,P,L){return P=R(P===void 0?M.length-1:P,0),function(){for(var p=arguments,b=-1,S=R(p.length-P,0),x=Array(S);++b<S;)x[b]=p[P+b];b=-1;for(var g=Array(P+1);++b<P;)g[b]=p[b];return g[P]=L(x),m(M,this,g)}}We.exports=w},430061:function(We,G,_){var m=_(356560),R=_(521275),w=R(m);We.exports=w},521275:function(We){var G=800,_=16,m=Date.now;function R(w){var M=0,P=0;return function(){var L=m(),p=_-(L-P);if(P=L,p>0){if(++M>=G)return arguments[0]}else M=0;return w.apply(void 0,arguments)}}We.exports=R},575703:function(We){function G(_){return function(){return _}}We.exports=G},291966:function(We,G,_){var m=_(920731),R=_(121078),w=_(105976),M=_(229246),P=w(function(L,p){return M(L)?m(L,R(p,1,M,!0)):[]});We.exports=P},406557:function(We){function G(_){return _}We.exports=G},498612:function(We,G,_){var m=_(623560),R=_(541780);function w(M){return M!=null&&R(M.length)&&!m(M)}We.exports=w},229246:function(We,G,_){var m=_(498612),R=_(637005);function w(M){return R(M)&&m(M)}We.exports=w},541780:function(We){var G=9007199254740991;function _(m){return typeof m=="number"&&m>-1&&m%1==0&&m<=G}We.exports=_},281763:function(We,G,_){var m=_(644239),R=_(637005),w="[object Number]";function M(P){return typeof P=="number"||R(P)&&m(P)==w}We.exports=M},968630:function(We,G,_){var m=_(644239),R=_(385924),w=_(637005),M="[object Object]",P=Function.prototype,L=Object.prototype,p=P.toString,b=L.hasOwnProperty,S=p.call(Object);function x(g){if(!w(g)||m(g)!=M)return!1;var T=R(g);if(T===null)return!0;var E=b.call(T,"constructor")&&T.constructor;return typeof E=="function"&&E instanceof E&&p.call(E)==S}We.exports=x},936719:function(We,G,_){var m=_(238749),R=_(307518),w=_(531167),M=w&&w.isTypedArray,P=M?R(M):m;We.exports=P},252796:function(We,G,_){We.exports=_(410643)},913264:function(We){"use strict";var G=!!(typeof window!="undefined"&&window.document&&window.document.createElement),_={canUseDOM:G,canUseWorkers:typeof Worker!="undefined",canUseEventListeners:G&&!!(window.addEventListener||window.attachEvent),canUseViewport:G&&!!window.screen,isInWorker:!G};We.exports=_},784518:function(We){var G=!1,_,m,R,w,M,P,L,p,b,S,x,g,T,E,O;function k(){if(!G){G=!0;var l=navigator.userAgent,U=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(l),X=/(Mac OS X)|(Windows)|(Linux)/.exec(l);if(g=/\b(iPhone|iP[ao]d)/.exec(l),T=/\b(iP[ao]d)/.exec(l),S=/Android/i.exec(l),E=/FBAN\/\w+;/i.exec(l),O=/Mobile/i.exec(l),x=!!/Win64/.exec(l),U){_=U[1]?parseFloat(U[1]):U[5]?parseFloat(U[5]):NaN,_&&document&&document.documentMode&&(_=document.documentMode);var F=/(?:Trident\/(\d+.\d+))/.exec(l);P=F?parseFloat(F[1])+4:_,m=U[2]?parseFloat(U[2]):NaN,R=U[3]?parseFloat(U[3]):NaN,w=U[4]?parseFloat(U[4]):NaN,w?(U=/(?:Chrome\/(\d+\.\d+))/.exec(l),M=U&&U[1]?parseFloat(U[1]):NaN):M=NaN}else _=m=R=M=w=NaN;if(X){if(X[1]){var W=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(l);L=W?parseFloat(W[1].replace("_",".")):!0}else L=!1;p=!!X[2],b=!!X[3]}else L=p=b=!1}}var y={ie:function(){return k()||_},ieCompatibilityMode:function(){return k()||P>_},ie64:function(){return y.ie()&&x},firefox:function(){return k()||m},opera:function(){return k()||R},webkit:function(){return k()||w},safari:function(){return y.webkit()},chrome:function(){return k()||M},windows:function(){return k()||p},osx:function(){return k()||L},linux:function(){return k()||b},iphone:function(){return k()||g},mobile:function(){return k()||g||T||S||O},nativeApp:function(){return k()||E},android:function(){return k()||S},ipad:function(){return k()||T}};We.exports=y},396534:function(We,G,_){"use strict";var m=_(913264),R;m.canUseDOM&&(R=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function w(M,P){if(!m.canUseDOM||P&&!("addEventListener"in document))return!1;var L="on"+M,p=L in document;if(!p){var b=document.createElement("div");b.setAttribute(L,"return;"),p=typeof b[L]=="function"}return!p&&R&&M==="wheel"&&(p=document.implementation.hasFeature("Events.wheel","3.0")),p}We.exports=w},410643:function(We,G,_){"use strict";var m=_(784518),R=_(396534),w=10,M=40,P=800;function L(p){var b=0,S=0,x=0,g=0;return"detail"in p&&(S=p.detail),"wheelDelta"in p&&(S=-p.wheelDelta/120),"wheelDeltaY"in p&&(S=-p.wheelDeltaY/120),"wheelDeltaX"in p&&(b=-p.wheelDeltaX/120),"axis"in p&&p.axis===p.HORIZONTAL_AXIS&&(b=S,S=0),x=b*w,g=S*w,"deltaY"in p&&(g=p.deltaY),"deltaX"in p&&(x=p.deltaX),(x||g)&&p.deltaMode&&(p.deltaMode==1?(x*=M,g*=M):(x*=P,g*=P)),x&&!b&&(b=x<1?-1:1),g&&!S&&(S=g<1?-1:1),{spinX:b,spinY:S,pixelX:x,pixelY:g}}L.getEventType=function(){return m.firefox()?"DOMMouseScroll":R("wheel")?"wheel":"mousewheel"},We.exports=L},470631:function(We,G,_){var m=typeof Map=="function"&&Map.prototype,R=Object.getOwnPropertyDescriptor&&m?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,w=m&&R&&typeof R.get=="function"?R.get:null,M=m&&Map.prototype.forEach,P=typeof Set=="function"&&Set.prototype,L=Object.getOwnPropertyDescriptor&&P?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,p=P&&L&&typeof L.get=="function"?L.get:null,b=P&&Set.prototype.forEach,S=typeof WeakMap=="function"&&WeakMap.prototype,x=S?WeakMap.prototype.has:null,g=typeof WeakSet=="function"&&WeakSet.prototype,T=g?WeakSet.prototype.has:null,E=typeof WeakRef=="function"&&WeakRef.prototype,O=E?WeakRef.prototype.deref:null,k=Boolean.prototype.valueOf,y=Object.prototype.toString,l=Function.prototype.toString,U=String.prototype.match,X=String.prototype.slice,F=String.prototype.replace,W=String.prototype.toUpperCase,j=String.prototype.toLowerCase,V=RegExp.prototype.test,q=Array.prototype.concat,$=Array.prototype.join,J=Array.prototype.slice,ut=Math.floor,nt=typeof BigInt=="function"?BigInt.prototype.valueOf:null,yt=Object.getOwnPropertySymbols,dt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Ft=typeof Symbol=="function"&&typeof Symbol.iterator=="object",wt=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Ft||"symbol")?Symbol.toStringTag:null,St=Object.prototype.propertyIsEnumerable,et=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(oe){return oe.__proto__}:null);function it(oe,Te){if(oe===1/0||oe===-1/0||oe!==oe||oe&&oe>-1e3&&oe<1e3||V.call(/e/,Te))return Te;var Lr=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof oe=="number"){var Nr=oe<0?-ut(-oe):ut(oe);if(Nr!==oe){var ln=String(Nr),en=X.call(Te,ln.length+1);return F.call(ln,Lr,"$&_")+"."+F.call(F.call(en,/([0-9]{3})/g,"$&_"),/_$/,"")}}return F.call(Te,Lr,"$&_")}var Tt=_(824654),Nt=Tt.custom,st=ae(Nt)?Nt:null;We.exports=function oe(Te,Lr,Nr,ln){var en=Lr||{};if(de(en,"quoteStyle")&&en.quoteStyle!=="single"&&en.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(de(en,"maxStringLength")&&(typeof en.maxStringLength=="number"?en.maxStringLength<0&&en.maxStringLength!==1/0:en.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var Dr=de(en,"customInspect")?en.customInspect:!0;if(typeof Dr!="boolean"&&Dr!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(de(en,"indent")&&en.indent!==null&&en.indent!=="	"&&!(parseInt(en.indent,10)===en.indent&&en.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(de(en,"numericSeparator")&&typeof en.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var Fr=en.numericSeparator;if(typeof Te=="undefined")return"undefined";if(Te===null)return"null";if(typeof Te=="boolean")return Te?"true":"false";if(typeof Te=="string")return lr(Te,en);if(typeof Te=="number"){if(Te===0)return 1/0/Te>0?"0":"-0";var Kr=String(Te);return Fr?it(Te,Kr):Kr}if(typeof Te=="bigint"){var an=String(Te)+"n";return Fr?it(Te,an):an}var yn=typeof en.depth=="undefined"?5:en.depth;if(typeof Nr=="undefined"&&(Nr=0),Nr>=yn&&yn>0&&typeof Te=="object")return Wt(Te)?"[Array]":"[Object]";var bn=Je(en,Nr);if(typeof ln=="undefined")ln=[];else if(ke(ln,Te)>=0)return"[Circular]";function tt(Pt,Lt,Jt){if(Lt&&(ln=J.call(ln),ln.push(Lt)),Jt){var Oe={depth:en.depth};return de(en,"quoteStyle")&&(Oe.quoteStyle=en.quoteStyle),oe(Pt,Oe,Nr+1,ln)}return oe(Pt,en,Nr+1,ln)}if(typeof Te=="function"&&!Xt(Te)){var tr=be(Te),Kt=nr(Te,tt);return"[Function"+(tr?": "+tr:" (anonymous)")+"]"+(Kt.length>0?" { "+$.call(Kt,", ")+" }":"")}if(ae(Te)){var $t=Ft?F.call(String(Te),/^(Symbol\(.*\))_[^)]*$/,"$1"):dt.call(Te);return typeof Te=="object"&&!Ft?kr($t):$t}if(Qe(Te)){for(var Et="<"+j.call(String(Te.nodeName)),we=Te.attributes||[],Dt=0;Dt<we.length;Dt++)Et+=" "+we[Dt].name+"="+xt(zt(we[Dt].value),"double",en);return Et+=">",Te.childNodes&&Te.childNodes.length&&(Et+="..."),Et+="</"+j.call(String(Te.nodeName))+">",Et}if(Wt(Te)){if(Te.length===0)return"[]";var Vt=nr(Te,tt);return bn&&!Vr(Vt)?"["+dr(Vt,bn)+"]":"[ "+$.call(Vt,", ")+" ]"}if(te(Te)){var ht=nr(Te,tt);return!("cause"in Error.prototype)&&"cause"in Te&&!St.call(Te,"cause")?"{ ["+String(Te)+"] "+$.call(q.call("[cause]: "+tt(Te.cause),ht),", ")+" }":ht.length===0?"["+String(Te)+"]":"{ ["+String(Te)+"] "+$.call(ht,", ")+" }"}if(typeof Te=="object"&&Dr){if(st&&typeof Te[st]=="function"&&Tt)return Tt(Te,{depth:yn-Nr});if(Dr!=="symbol"&&typeof Te.inspect=="function")return Te.inspect()}if(he(Te)){var kt=[];return M&&M.call(Te,function(Pt,Lt){kt.push(tt(Lt,Te,!0)+" => "+tt(Pt,Te))}),fn("Map",w.call(Te),kt,bn)}if(Pe(Te)){var Q=[];return b&&b.call(Te,function(Pt){Q.push(tt(Pt,Te))}),fn("Set",p.call(Te),Q,bn)}if(vt(Te))return En("WeakMap");if(qe(Te))return En("WeakSet");if(ie(Te))return En("WeakRef");if(fe(Te))return kr(tt(Number(Te)));if(Ne(Te))return kr(tt(nt.call(Te)));if(Gt(Te))return kr(k.call(Te));if(ue(Te))return kr(tt(String(Te)));if(!_t(Te)&&!Xt(Te)){var at=nr(Te,tt),B=et?et(Te)===Object.prototype:Te instanceof Object||Te.constructor===Object,C=Te instanceof Object?"":"null prototype",I=!B&&wt&&Object(Te)===Te&&wt in Te?X.call(ze(Te),8,-1):C?"Object":"",H=B||typeof Te.constructor!="function"?"":Te.constructor.name?Te.constructor.name+" ":"",mt=H+(I||C?"["+$.call(q.call([],I||[],C||[]),": ")+"] ":"");return at.length===0?mt+"{}":bn?mt+"{"+dr(at,bn)+"}":mt+"{ "+$.call(at,", ")+" }"}return String(Te)};function xt(oe,Te,Lr){var Nr=(Lr.quoteStyle||Te)==="double"?'"':"'";return Nr+oe+Nr}function zt(oe){return F.call(String(oe),/"/g,"&quot;")}function Wt(oe){return ze(oe)==="[object Array]"&&(!wt||!(typeof oe=="object"&&wt in oe))}function _t(oe){return ze(oe)==="[object Date]"&&(!wt||!(typeof oe=="object"&&wt in oe))}function Xt(oe){return ze(oe)==="[object RegExp]"&&(!wt||!(typeof oe=="object"&&wt in oe))}function te(oe){return ze(oe)==="[object Error]"&&(!wt||!(typeof oe=="object"&&wt in oe))}function ue(oe){return ze(oe)==="[object String]"&&(!wt||!(typeof oe=="object"&&wt in oe))}function fe(oe){return ze(oe)==="[object Number]"&&(!wt||!(typeof oe=="object"&&wt in oe))}function Gt(oe){return ze(oe)==="[object Boolean]"&&(!wt||!(typeof oe=="object"&&wt in oe))}function ae(oe){if(Ft)return oe&&typeof oe=="object"&&oe instanceof Symbol;if(typeof oe=="symbol")return!0;if(!oe||typeof oe!="object"||!dt)return!1;try{return dt.call(oe),!0}catch(Te){}return!1}function Ne(oe){if(!oe||typeof oe!="object"||!nt)return!1;try{return nt.call(oe),!0}catch(Te){}return!1}var ee=Object.prototype.hasOwnProperty||function(oe){return oe in this};function de(oe,Te){return ee.call(oe,Te)}function ze(oe){return y.call(oe)}function be(oe){if(oe.name)return oe.name;var Te=U.call(l.call(oe),/^function\s*([\w$]+)/);return Te?Te[1]:null}function ke(oe,Te){if(oe.indexOf)return oe.indexOf(Te);for(var Lr=0,Nr=oe.length;Lr<Nr;Lr++)if(oe[Lr]===Te)return Lr;return-1}function he(oe){if(!w||!oe||typeof oe!="object")return!1;try{w.call(oe);try{p.call(oe)}catch(Te){return!0}return oe instanceof Map}catch(Te){}return!1}function vt(oe){if(!x||!oe||typeof oe!="object")return!1;try{x.call(oe,x);try{T.call(oe,T)}catch(Te){return!0}return oe instanceof WeakMap}catch(Te){}return!1}function ie(oe){if(!O||!oe||typeof oe!="object")return!1;try{return O.call(oe),!0}catch(Te){}return!1}function Pe(oe){if(!p||!oe||typeof oe!="object")return!1;try{p.call(oe);try{w.call(oe)}catch(Te){return!0}return oe instanceof Set}catch(Te){}return!1}function qe(oe){if(!T||!oe||typeof oe!="object")return!1;try{T.call(oe,T);try{x.call(oe,x)}catch(Te){return!0}return oe instanceof WeakSet}catch(Te){}return!1}function Qe(oe){return!oe||typeof oe!="object"?!1:typeof HTMLElement!="undefined"&&oe instanceof HTMLElement?!0:typeof oe.nodeName=="string"&&typeof oe.getAttribute=="function"}function lr(oe,Te){if(oe.length>Te.maxStringLength){var Lr=oe.length-Te.maxStringLength,Nr="... "+Lr+" more character"+(Lr>1?"s":"");return lr(X.call(oe,0,Te.maxStringLength),Te)+Nr}var ln=F.call(F.call(oe,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,fr);return xt(ln,"single",Te)}function fr(oe){var Te=oe.charCodeAt(0),Lr={8:"b",9:"t",10:"n",12:"f",13:"r"}[Te];return Lr?"\\"+Lr:"\\x"+(Te<16?"0":"")+W.call(Te.toString(16))}function kr(oe){return"Object("+oe+")"}function En(oe){return oe+" { ? }"}function fn(oe,Te,Lr,Nr){var ln=Nr?dr(Lr,Nr):$.call(Lr,", ");return oe+" ("+Te+") {"+ln+"}"}function Vr(oe){for(var Te=0;Te<oe.length;Te++)if(ke(oe[Te],`
`)>=0)return!1;return!0}function Je(oe,Te){var Lr;if(oe.indent==="	")Lr="	";else if(typeof oe.indent=="number"&&oe.indent>0)Lr=$.call(Array(oe.indent+1)," ");else return null;return{base:Lr,prev:$.call(Array(Te+1),Lr)}}function dr(oe,Te){if(oe.length===0)return"";var Lr=`
`+Te.prev+Te.base;return Lr+$.call(oe,","+Lr)+`
`+Te.prev}function nr(oe,Te){var Lr=Wt(oe),Nr=[];if(Lr){Nr.length=oe.length;for(var ln=0;ln<oe.length;ln++)Nr[ln]=de(oe,ln)?Te(oe[ln],oe):""}var en=typeof yt=="function"?yt(oe):[],Dr;if(Ft){Dr={};for(var Fr=0;Fr<en.length;Fr++)Dr["$"+en[Fr]]=en[Fr]}for(var Kr in oe)de(oe,Kr)&&(Lr&&String(Number(Kr))===Kr&&Kr<oe.length||Ft&&Dr["$"+Kr]instanceof Symbol||(V.call(/[^\w$]/,Kr)?Nr.push(Te(Kr,oe)+": "+Te(oe[Kr],oe)):Nr.push(Kr+": "+Te(oe[Kr],oe))));if(typeof yt=="function")for(var an=0;an<en.length;an++)St.call(oe,en[an])&&Nr.push("["+Te(en[an])+"]: "+Te(oe[en[an]],oe));return Nr}},75:function(We,G,_){var m=_(734155);(function(){var R,w,M,P,L,p;typeof performance!="undefined"&&performance!==null&&performance.now?We.exports=function(){return performance.now()}:typeof m!="undefined"&&m!==null&&m.hrtime?(We.exports=function(){return(R()-L)/1e6},w=m.hrtime,R=function(){var b;return b=w(),b[0]*1e9+b[1]},P=R(),p=m.uptime()*1e9,L=P-p):Date.now?(We.exports=function(){return Date.now()-M},M=Date.now()):(We.exports=function(){return new Date().getTime()-M},M=new Date().getTime())}).call(this)},134569:function(We){"use strict";var G=String.prototype.replace,_=/%20/g,m={RFC1738:"RFC1738",RFC3986:"RFC3986"};We.exports={default:m.RFC3986,formatters:{RFC1738:function(R){return G.call(R,_,"+")},RFC3986:function(R){return String(R)}},RFC1738:m.RFC1738,RFC3986:m.RFC3986}},280129:function(We,G,_){"use strict";var m=_(458261),R=_(355235),w=_(134569);We.exports={formats:w,parse:R,stringify:m}},355235:function(We,G,_){"use strict";var m=_(412769),R=Object.prototype.hasOwnProperty,w=Array.isArray,M={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:m.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},P=function(E){return E.replace(/&#(\d+);/g,function(O,k){return String.fromCharCode(parseInt(k,10))})},L=function(E,O){return E&&typeof E=="string"&&O.comma&&E.indexOf(",")>-1?E.split(","):E},p="utf8=%26%2310003%3B",b="utf8=%E2%9C%93",S=function(O,k){var y={__proto__:null},l=k.ignoreQueryPrefix?O.replace(/^\?/,""):O,U=k.parameterLimit===1/0?void 0:k.parameterLimit,X=l.split(k.delimiter,U),F=-1,W,j=k.charset;if(k.charsetSentinel)for(W=0;W<X.length;++W)X[W].indexOf("utf8=")===0&&(X[W]===b?j="utf-8":X[W]===p&&(j="iso-8859-1"),F=W,W=X.length);for(W=0;W<X.length;++W)if(W!==F){var V=X[W],q=V.indexOf("]="),$=q===-1?V.indexOf("="):q+1,J,ut;$===-1?(J=k.decoder(V,M.decoder,j,"key"),ut=k.strictNullHandling?null:""):(J=k.decoder(V.slice(0,$),M.decoder,j,"key"),ut=m.maybeMap(L(V.slice($+1),k),function(nt){return k.decoder(nt,M.decoder,j,"value")})),ut&&k.interpretNumericEntities&&j==="iso-8859-1"&&(ut=P(ut)),V.indexOf("[]=")>-1&&(ut=w(ut)?[ut]:ut),R.call(y,J)?y[J]=m.combine(y[J],ut):y[J]=ut}return y},x=function(E,O,k,y){for(var l=y?O:L(O,k),U=E.length-1;U>=0;--U){var X,F=E[U];if(F==="[]"&&k.parseArrays)X=[].concat(l);else{X=k.plainObjects?Object.create(null):{};var W=F.charAt(0)==="["&&F.charAt(F.length-1)==="]"?F.slice(1,-1):F,j=parseInt(W,10);!k.parseArrays&&W===""?X={0:l}:!isNaN(j)&&F!==W&&String(j)===W&&j>=0&&k.parseArrays&&j<=k.arrayLimit?(X=[],X[j]=l):W!=="__proto__"&&(X[W]=l)}l=X}return l},g=function(O,k,y,l){if(O){var U=y.allowDots?O.replace(/\.([^.[]+)/g,"[$1]"):O,X=/(\[[^[\]]*])/,F=/(\[[^[\]]*])/g,W=y.depth>0&&X.exec(U),j=W?U.slice(0,W.index):U,V=[];if(j){if(!y.plainObjects&&R.call(Object.prototype,j)&&!y.allowPrototypes)return;V.push(j)}for(var q=0;y.depth>0&&(W=F.exec(U))!==null&&q<y.depth;){if(q+=1,!y.plainObjects&&R.call(Object.prototype,W[1].slice(1,-1))&&!y.allowPrototypes)return;V.push(W[1])}return W&&V.push("["+U.slice(W.index)+"]"),x(V,k,y,l)}},T=function(O){if(!O)return M;if(O.decoder!==null&&O.decoder!==void 0&&typeof O.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof O.charset!="undefined"&&O.charset!=="utf-8"&&O.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var k=typeof O.charset=="undefined"?M.charset:O.charset;return{allowDots:typeof O.allowDots=="undefined"?M.allowDots:!!O.allowDots,allowPrototypes:typeof O.allowPrototypes=="boolean"?O.allowPrototypes:M.allowPrototypes,allowSparse:typeof O.allowSparse=="boolean"?O.allowSparse:M.allowSparse,arrayLimit:typeof O.arrayLimit=="number"?O.arrayLimit:M.arrayLimit,charset:k,charsetSentinel:typeof O.charsetSentinel=="boolean"?O.charsetSentinel:M.charsetSentinel,comma:typeof O.comma=="boolean"?O.comma:M.comma,decoder:typeof O.decoder=="function"?O.decoder:M.decoder,delimiter:typeof O.delimiter=="string"||m.isRegExp(O.delimiter)?O.delimiter:M.delimiter,depth:typeof O.depth=="number"||O.depth===!1?+O.depth:M.depth,ignoreQueryPrefix:O.ignoreQueryPrefix===!0,interpretNumericEntities:typeof O.interpretNumericEntities=="boolean"?O.interpretNumericEntities:M.interpretNumericEntities,parameterLimit:typeof O.parameterLimit=="number"?O.parameterLimit:M.parameterLimit,parseArrays:O.parseArrays!==!1,plainObjects:typeof O.plainObjects=="boolean"?O.plainObjects:M.plainObjects,strictNullHandling:typeof O.strictNullHandling=="boolean"?O.strictNullHandling:M.strictNullHandling}};We.exports=function(E,O){var k=T(O);if(E===""||E===null||typeof E=="undefined")return k.plainObjects?Object.create(null):{};for(var y=typeof E=="string"?S(E,k):E,l=k.plainObjects?Object.create(null):{},U=Object.keys(y),X=0;X<U.length;++X){var F=U[X],W=g(F,y[F],k,typeof E=="string");l=m.merge(l,W,k)}return k.allowSparse===!0?l:m.compact(l)}},458261:function(We,G,_){"use strict";var m=_(937478),R=_(412769),w=_(134569),M=Object.prototype.hasOwnProperty,P={brackets:function(l){return l+"[]"},comma:"comma",indices:function(l,U){return l+"["+U+"]"},repeat:function(l){return l}},L=Array.isArray,p=Array.prototype.push,b=function(y,l){p.apply(y,L(l)?l:[l])},S=Date.prototype.toISOString,x=w.default,g={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:R.encode,encodeValuesOnly:!1,format:x,formatter:w.formatters[x],indices:!1,serializeDate:function(l){return S.call(l)},skipNulls:!1,strictNullHandling:!1},T=function(l){return typeof l=="string"||typeof l=="number"||typeof l=="boolean"||typeof l=="symbol"||typeof l=="bigint"},E={},O=function y(l,U,X,F,W,j,V,q,$,J,ut,nt,yt,dt,Ft,wt){for(var St=l,et=wt,it=0,Tt=!1;(et=et.get(E))!==void 0&&!Tt;){var Nt=et.get(l);if(it+=1,typeof Nt!="undefined"){if(Nt===it)throw new RangeError("Cyclic object value");Tt=!0}typeof et.get(E)=="undefined"&&(it=0)}if(typeof q=="function"?St=q(U,St):St instanceof Date?St=ut(St):X==="comma"&&L(St)&&(St=R.maybeMap(St,function(ae){return ae instanceof Date?ut(ae):ae})),St===null){if(W)return V&&!dt?V(U,g.encoder,Ft,"key",nt):U;St=""}if(T(St)||R.isBuffer(St)){if(V){var st=dt?U:V(U,g.encoder,Ft,"key",nt);return[yt(st)+"="+yt(V(St,g.encoder,Ft,"value",nt))]}return[yt(U)+"="+yt(String(St))]}var xt=[];if(typeof St=="undefined")return xt;var zt;if(X==="comma"&&L(St))dt&&V&&(St=R.maybeMap(St,V)),zt=[{value:St.length>0?St.join(",")||null:void 0}];else if(L(q))zt=q;else{var Wt=Object.keys(St);zt=$?Wt.sort($):Wt}for(var _t=F&&L(St)&&St.length===1?U+"[]":U,Xt=0;Xt<zt.length;++Xt){var te=zt[Xt],ue=typeof te=="object"&&typeof te.value!="undefined"?te.value:St[te];if(!(j&&ue===null)){var fe=L(St)?typeof X=="function"?X(_t,te):_t:_t+(J?"."+te:"["+te+"]");wt.set(l,it);var Gt=m();Gt.set(E,wt),b(xt,y(ue,fe,X,F,W,j,X==="comma"&&dt&&L(St)?null:V,q,$,J,ut,nt,yt,dt,Ft,Gt))}}return xt},k=function(l){if(!l)return g;if(l.encoder!==null&&typeof l.encoder!="undefined"&&typeof l.encoder!="function")throw new TypeError("Encoder has to be a function.");var U=l.charset||g.charset;if(typeof l.charset!="undefined"&&l.charset!=="utf-8"&&l.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var X=w.default;if(typeof l.format!="undefined"){if(!M.call(w.formatters,l.format))throw new TypeError("Unknown format option provided.");X=l.format}var F=w.formatters[X],W=g.filter;return(typeof l.filter=="function"||L(l.filter))&&(W=l.filter),{addQueryPrefix:typeof l.addQueryPrefix=="boolean"?l.addQueryPrefix:g.addQueryPrefix,allowDots:typeof l.allowDots=="undefined"?g.allowDots:!!l.allowDots,charset:U,charsetSentinel:typeof l.charsetSentinel=="boolean"?l.charsetSentinel:g.charsetSentinel,delimiter:typeof l.delimiter=="undefined"?g.delimiter:l.delimiter,encode:typeof l.encode=="boolean"?l.encode:g.encode,encoder:typeof l.encoder=="function"?l.encoder:g.encoder,encodeValuesOnly:typeof l.encodeValuesOnly=="boolean"?l.encodeValuesOnly:g.encodeValuesOnly,filter:W,format:X,formatter:F,serializeDate:typeof l.serializeDate=="function"?l.serializeDate:g.serializeDate,skipNulls:typeof l.skipNulls=="boolean"?l.skipNulls:g.skipNulls,sort:typeof l.sort=="function"?l.sort:null,strictNullHandling:typeof l.strictNullHandling=="boolean"?l.strictNullHandling:g.strictNullHandling}};We.exports=function(y,l){var U=y,X=k(l),F,W;typeof X.filter=="function"?(W=X.filter,U=W("",U)):L(X.filter)&&(W=X.filter,F=W);var j=[];if(typeof U!="object"||U===null)return"";var V;l&&l.arrayFormat in P?V=l.arrayFormat:l&&"indices"in l?V=l.indices?"indices":"repeat":V="indices";var q=P[V];if(l&&"commaRoundTrip"in l&&typeof l.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var $=q==="comma"&&l&&l.commaRoundTrip;F||(F=Object.keys(U)),X.sort&&F.sort(X.sort);for(var J=m(),ut=0;ut<F.length;++ut){var nt=F[ut];X.skipNulls&&U[nt]===null||b(j,O(U[nt],nt,q,$,X.strictNullHandling,X.skipNulls,X.encode?X.encoder:null,X.filter,X.sort,X.allowDots,X.serializeDate,X.format,X.formatter,X.encodeValuesOnly,X.charset,J))}var yt=j.join(X.delimiter),dt=X.addQueryPrefix===!0?"?":"";return X.charsetSentinel&&(X.charset==="iso-8859-1"?dt+="utf8=%26%2310003%3B&":dt+="utf8=%E2%9C%93&"),yt.length>0?dt+yt:""}},412769:function(We,G,_){"use strict";var m=_(134569),R=Object.prototype.hasOwnProperty,w=Array.isArray,M=function(){for(var y=[],l=0;l<256;++l)y.push("%"+((l<16?"0":"")+l.toString(16)).toUpperCase());return y}(),P=function(l){for(;l.length>1;){var U=l.pop(),X=U.obj[U.prop];if(w(X)){for(var F=[],W=0;W<X.length;++W)typeof X[W]!="undefined"&&F.push(X[W]);U.obj[U.prop]=F}}},L=function(l,U){for(var X=U&&U.plainObjects?Object.create(null):{},F=0;F<l.length;++F)typeof l[F]!="undefined"&&(X[F]=l[F]);return X},p=function y(l,U,X){if(!U)return l;if(typeof U!="object"){if(w(l))l.push(U);else if(l&&typeof l=="object")(X&&(X.plainObjects||X.allowPrototypes)||!R.call(Object.prototype,U))&&(l[U]=!0);else return[l,U];return l}if(!l||typeof l!="object")return[l].concat(U);var F=l;return w(l)&&!w(U)&&(F=L(l,X)),w(l)&&w(U)?(U.forEach(function(W,j){if(R.call(l,j)){var V=l[j];V&&typeof V=="object"&&W&&typeof W=="object"?l[j]=y(V,W,X):l.push(W)}else l[j]=W}),l):Object.keys(U).reduce(function(W,j){var V=U[j];return R.call(W,j)?W[j]=y(W[j],V,X):W[j]=V,W},F)},b=function(l,U){return Object.keys(U).reduce(function(X,F){return X[F]=U[F],X},l)},S=function(y,l,U){var X=y.replace(/\+/g," ");if(U==="iso-8859-1")return X.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(X)}catch(F){return X}},x=function(l,U,X,F,W){if(l.length===0)return l;var j=l;if(typeof l=="symbol"?j=Symbol.prototype.toString.call(l):typeof l!="string"&&(j=String(l)),X==="iso-8859-1")return escape(j).replace(/%u[0-9a-f]{4}/gi,function(J){return"%26%23"+parseInt(J.slice(2),16)+"%3B"});for(var V="",q=0;q<j.length;++q){var $=j.charCodeAt(q);if($===45||$===46||$===95||$===126||$>=48&&$<=57||$>=65&&$<=90||$>=97&&$<=122||W===m.RFC1738&&($===40||$===41)){V+=j.charAt(q);continue}if($<128){V=V+M[$];continue}if($<2048){V=V+(M[192|$>>6]+M[128|$&63]);continue}if($<55296||$>=57344){V=V+(M[224|$>>12]+M[128|$>>6&63]+M[128|$&63]);continue}q+=1,$=65536+(($&1023)<<10|j.charCodeAt(q)&1023),V+=M[240|$>>18]+M[128|$>>12&63]+M[128|$>>6&63]+M[128|$&63]}return V},g=function(l){for(var U=[{obj:{o:l},prop:"o"}],X=[],F=0;F<U.length;++F)for(var W=U[F],j=W.obj[W.prop],V=Object.keys(j),q=0;q<V.length;++q){var $=V[q],J=j[$];typeof J=="object"&&J!==null&&X.indexOf(J)===-1&&(U.push({obj:j,prop:$}),X.push(J))}return P(U),l},T=function(l){return Object.prototype.toString.call(l)==="[object RegExp]"},E=function(l){return!l||typeof l!="object"?!1:!!(l.constructor&&l.constructor.isBuffer&&l.constructor.isBuffer(l))},O=function(l,U){return[].concat(l,U)},k=function(l,U){if(w(l)){for(var X=[],F=0;F<l.length;F+=1)X.push(U(l[F]));return X}return U(l)};We.exports={arrayToObject:L,assign:b,combine:O,compact:g,decode:S,encode:x,isBuffer:E,isRegExp:T,maybeMap:k,merge:p}},654087:function(We,G,_){for(var m=_(75),R=typeof window=="undefined"?_.g:window,w=["moz","webkit"],M="AnimationFrame",P=R["request"+M],L=R["cancel"+M]||R["cancelRequest"+M],p=0;!P&&p<w.length;p++)P=R[w[p]+"Request"+M],L=R[w[p]+"Cancel"+M]||R[w[p]+"CancelRequest"+M];if(!P||!L){var b=0,S=0,x=[],g=1e3/60;P=function(T){if(x.length===0){var E=m(),O=Math.max(0,g-(E-b));b=O+E,setTimeout(function(){var k=x.slice(0);x.length=0;for(var y=0;y<k.length;y++)if(!k[y].cancelled)try{k[y].callback(b)}catch(l){setTimeout(function(){throw l},0)}},Math.round(O))}return x.push({handle:++S,callback:T,cancelled:!1}),S},L=function(T){for(var E=0;E<x.length;E++)x[E].handle===T&&(x[E].cancelled=!0)}}We.exports=function(T){return P.call(R,T)},We.exports.cancel=function(){L.apply(R,arguments)},We.exports.polyfill=function(T){T||(T=R),T.requestAnimationFrame=P,T.cancelAnimationFrame=L}},174219:function(We,G){"use strict";var _;_={value:!0},G.Z=void 0;var m={items_per_page:"\u6761/\u9875",jump_to:"\u8DF3\u81F3",jump_to_confirm:"\u786E\u5B9A",page:"\u9875",prev_page:"\u4E0A\u4E00\u9875",next_page:"\u4E0B\u4E00\u9875",prev_5:"\u5411\u524D 5 \u9875",next_5:"\u5411\u540E 5 \u9875",prev_3:"\u5411\u524D 3 \u9875",next_3:"\u5411\u540E 3 \u9875",page_size:"\u9875\u7801"};G.Z=m},585369:function(We,G){"use strict";var _;_={value:!0},G.Z=void 0;var m={locale:"zh_CN",today:"\u4ECA\u5929",now:"\u6B64\u523B",backToToday:"\u8FD4\u56DE\u4ECA\u5929",ok:"\u786E\u5B9A",timeSelect:"\u9009\u62E9\u65F6\u95F4",dateSelect:"\u9009\u62E9\u65E5\u671F",weekSelect:"\u9009\u62E9\u5468",clear:"\u6E05\u9664",month:"\u6708",year:"\u5E74",previousMonth:"\u4E0A\u4E2A\u6708 (\u7FFB\u9875\u4E0A\u952E)",nextMonth:"\u4E0B\u4E2A\u6708 (\u7FFB\u9875\u4E0B\u952E)",monthSelect:"\u9009\u62E9\u6708\u4EFD",yearSelect:"\u9009\u62E9\u5E74\u4EFD",decadeSelect:"\u9009\u62E9\u5E74\u4EE3",yearFormat:"YYYY\u5E74",dayFormat:"D\u65E5",dateFormat:"YYYY\u5E74M\u6708D\u65E5",dateTimeFormat:"YYYY\u5E74M\u6708D\u65E5 HH\u65F6mm\u5206ss\u79D2",previousYear:"\u4E0A\u4E00\u5E74 (Control\u952E\u52A0\u5DE6\u65B9\u5411\u952E)",nextYear:"\u4E0B\u4E00\u5E74 (Control\u952E\u52A0\u53F3\u65B9\u5411\u952E)",previousDecade:"\u4E0A\u4E00\u5E74\u4EE3",nextDecade:"\u4E0B\u4E00\u5E74\u4EE3",previousCentury:"\u4E0A\u4E00\u4E16\u7EAA",nextCentury:"\u4E0B\u4E00\u4E16\u7EAA"},R=m;G.Z=R},752376:function(We,G,_){"use strict";_.d(G,{Z:function(){return tr}});var m=_(671002),R=_(601413),w=_(297685),M=_(700091),P=_(667294);function L(Kt){var $t=[];return P.Children.forEach(Kt,function(Et){$t.push(Et)}),$t}function p(Kt,$t){var Et=null;return Kt&&Kt.forEach(function(we){Et||!we||we.key===$t&&(Et=we)}),Et}function b(Kt,$t){var Et=[],we={},Dt=[],Vt=null;return Kt.forEach(function(ht){ht&&(ht.key&&p($t,ht.key)?(Dt.length&&(we[ht.key]=Dt,Dt=[]),Vt=ht.key):ht.key&&Dt.push(ht))}),Vt||(Et=Et.concat(Dt)),$t.forEach(function(ht){ht&&(ht.key&&we.hasOwnProperty(ht.key)&&(Et=Et.concat(we[ht.key])),Et.push(ht),ht.key===Vt&&(Et=Et.concat(Dt)))}),Et}function S(Kt,$t,Et){var we;return typeof Kt=="function"?we=Kt({key:$t,index:Et}):we=Kt,we}function x(Kt){return Kt&&Kt.children}var g=!(typeof window!="undefined"&&window.document&&window.document.createElement),T=g?P.useEffect:P.useLayoutEffect,E=_(974902),O=_(973935),k=_(364687),y=_.n(k),l=_(115861),U=_(215671),X=_(143144),F=_(952191);function W(){}var j=F.rV,V=/.*shadow$/gi,q=!(typeof window!="undefined"&&window.document&&window.document.createElement),$=Date.now;function J(Kt){if(typeof Kt=="string"){if(Kt.charAt(0).match(/m/i)){var $t=document.createElementNS("http://www.w3.org/2000/svg","path");return $t.setAttributeNS(null,"d",Kt),$t}return document.querySelector(Kt)}else if(Kt.style)return Kt;throw new Error("Error while parsing the path")}var ut={type:"to",duration:450,delay:0,repeat:0,repeatDelay:0,appearTo:0,yoyo:!1,ease:"easeInOutQuad",onStart:W,onUpdate:W,onComplete:W,onRepeat:W,startAt:{}},nt={animation:{},paused:!1,reverse:!1,delay:0,repeat:0,repeatDelay:0,yoyo:!1,moment:null,resetStyle:!1,regionStartTime:0,regionEndTime:void 0,onChange:W,onChangeTimeline:W},yt=function($t){var Et={};return Object.keys(nt).forEach(function(we){Et[we]=typeof $t[we]=="undefined"?nt[we]:$t[we]}),Et.delay&&(Et.delay=Math.round(Et.delay)),$t.repeatDelay&&(Et.repeatDelay=Math.round(Et.repeatDelay)),Et},dt=function($t){if(Array.isArray($t)||!$t)return $t;if($t.length){var Et=Array.prototype.slice.call($t);return Et.length?[$t]:Et}return[$t]},Ft=function($t){return $t.length===1?$t[0]:$t},wt=function($t,Et){var we=Et.appearTo,Dt=we===void 0?0:we,Vt=Et.delay,ht=Vt===void 0?0:Vt,kt=Et.duration,Q=kt===void 0?450:kt,at=Et.repeat,B=Et.repeatDelay;if(typeof Dt=="string")return 0;var C,I=0;return typeof $t.appearTo=="number"?$t.appearTo:(typeof $t.appearTo=="string"&&$t.appearTo.charAt(1)==="="&&(I=parseFloat($t.appearTo.replace("=",""))),C=Dt+ht+Q+I,at===-1?C=Number.MAX_VALUE:at&&(C=Dt+ht+Q*(at+1)+(B||0)*at+I),C)},St=function($t){switch($t){case"opacity":case"scaleX":case"scaleY":case"scale":return 1;default:return 0}},et=function($t,Et){var we=typeof $t=="string"?parseFloat($t):$t;return it(we,Et.vars,1,Et.count,Et.unit)},it=function($t,Et,we){var Dt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"",Vt=arguments.length>4?arguments[4]:void 0;return Dt==="+="||Dt==="-="?$t+Et*we+(Vt||0):(Et-$t)*we+$t+(Vt||0)},Tt=function($t){if(!$t)return{};var Et=typeof window!="undefined"&&document.defaultView?document.defaultView.getComputedStyle($t):{};return Et},Nt={margin:1,padding:1,borderWidth:1,borderRadius:1};function st(Kt){var $t=Kt.target,Et=Kt.computedStyle,we=Kt.style,Dt=Kt.value,Vt=Kt.startUnit,ht=Kt.endUnit,kt=Kt.fixed,Q=Kt.isOriginWidth,at=Kt.useCurrentTarget;if(q)return Dt;var B=/(?:Left|Right|Width|X)/i.test(we)||Q;B=we==="padding"||we==="marign"?!0:B;var C=we.indexOf("border")!==-1||we.indexOf("translate")!==-1||we==="transformOrigin"||at?$t:$t.parentNode||document.body;C=kt?document.body:C;var I,H,mt;switch(Vt){case"%":I=parseFloat(Dt)/100*(B?C.clientWidth:C.clientHeight);break;case"vw":I=parseFloat(Dt)*document.body.clientWidth/100;break;case"vh":I=parseFloat(Dt)*document.body.clientHeight/100;break;case"em":Et?I=parseFloat(Dt)*parseFloat(Et.fontSize):(mt="em",I=parseFloat(Dt));break;case"rem":{Et?(H=window.getComputedStyle(document.getElementsByTagName("html")[0]),I=parseFloat(Dt)*parseFloat(H.fontSize)):(mt="rem",I=parseFloat(Dt));break}default:I=parseFloat(Dt);break}switch(ht){case"%":I=I?I*100/(B?C.clientWidth:C.clientHeight):0;break;case"vw":I=parseFloat(Dt)/document.body.clientWidth*100;break;case"vh":I=parseFloat(Dt)/document.body.clientHeight*100;break;case"em":Et?I=parseFloat(Dt)/parseFloat(Et.fontSize):(mt="em",I=parseFloat(Dt));break;case"rem":{Et?(H=H||window.getComputedStyle(document.getElementsByTagName("html")[0]),I=parseFloat(Dt)/parseFloat(H.fontSize)):(mt="rem",I=parseFloat(Dt));break}default:break}return mt&&console.warn("Warning: Element is not 'DOM, can not use '".concat(mt,"', automatically convert to animation units.")),I}function xt(Kt){if(typeof Kt=="string")return Kt;var $t=Kt.perspective,Et=Kt.rotate,we=Kt.rotateX,Dt=Kt.rotateY,Vt=Kt.scaleX,ht=Kt.scaleY,kt=Kt.scaleZ,Q=Kt.skewX,at=Kt.skewY,B=typeof Kt.translateX=="string"?Kt.translateX:"".concat(Kt.translateX,"px"),C=typeof Kt.translateY=="string"?Kt.translateY:"".concat(Kt.translateY,"px"),I=typeof Kt.translateZ=="string"?Kt.translateZ:"".concat(Kt.translateZ,"px"),H=Q||at?"skew(".concat(Q,"deg,").concat(at,"deg)"):"",mt=Et?"rotate(".concat(Et,"deg)"):"",Pt=Vt!==1||ht!==1||kt!==1?"scale3d(".concat(Vt,",").concat(ht,",").concat(kt,")"):"",Lt=we?"rotateX(".concat(we,"deg)"):"",Jt=Dt?"rotateY(".concat(Dt,"deg)"):"",Oe=$t?"perspective(".concat($t,"px)"):"",ye=Pt||mt||Lt||Jt||H?"":"translate(0px, 0px)",Ze=Kt.translateZ?"translate3d(".concat(B,",").concat(C,",").concat(I,")"):(Kt.translateX||Kt.translateY)&&"translate(".concat(B,",").concat(C,")")||ye;return"".concat(Oe," ").concat(Ze," ").concat(Pt," ").concat(mt," ").concat(Lt," ").concat(Jt," ").concat(H).trim()}var zt={brightness:1,saturate:1,contrast:1,grayScale:0,hueRotate:"0deg",sepia:0,invert:0},Wt=(0,X.Z)(function Kt(){var $t=this;(0,U.Z)(this,Kt),this.push=function(Et){dt(Et).forEach(function(we){$t[we.className]=we})},this.register=this.push}),_t=new Wt,Xt=/%|vw|vh|em|rem/i,te=(0,X.Z)(function Kt($t){var Et=this;(0,U.Z)(this,Kt),this.props=void 0,this.computedStyle=void 0,this.root=void 0,this.index=void 0,this.targetIndex=void 0,this.tweenVars={},this.transformName=void 0,this.filterName=void 0,this.target=void 0,this.start={},this.startAt={},this.propsData={data:{},type:{},unit:{},count:{},splitStr:{},isTransform:{}},this.setDefaultData=function(){var we=Et.props;for(var Dt in we){var Vt=we[Dt],ht=Vt.split&&Vt.split(/\s+|,/).length>1||Dt.match(/color|fill|stroke/i)||Dt.match(/shadow/i),kt=(Dt==="background"||Dt==="backgroundImage")&&Vt.match(/[a-z|-]+\(([\s\S]*?)\)/gi);if(kt){Et.propsData.data[Dt]={value:Vt,plugin:_t.GradientsPlugin};continue}if(ht){Et.propsData.data[Dt]={value:Vt,plugin:_t.ArrayPlugin};continue}var Q=(0,F.Lo)(Dt),at=Et.getTweenData(Q,we[Dt]);Et.propsData.data[Q]=at.data[Q],Et.propsData.type[Q]=at.type[Q],Et.propsData.unit[Q]=at.unit[Q],Et.propsData.count[Q]=at.count[Q],Et.propsData.isTransform[Q]=(0,F.dt)(Q)==="transform",at.splitStr[Q]&&(Et.propsData.splitStr[Q]=at.splitStr[Q])}},this.getTweenData=function(we,Dt){var Vt={data:{},isTransform:{},type:{},unit:{},count:{},splitStr:{}},ht=Dt;Vt.data[we]=ht;var kt=typeof Vt.data[we]=="string";Vt.unit[we]=kt?Vt.data[we].replace(/[^a-z|%]/g,""):"",Vt.count[we]=kt?Vt.data[we].replace(/[^+|=|-]/g,""):"";var Q=kt?parseFloat(Vt.data[we].replace(/[a-z|%|=]/g,"")):Vt.data[we];return Vt.data[we]=!Q&&Q!==0?Vt.data[we]:Q,Vt},this.setStartAtValue=function(we,Dt){return(0,m.Z)(Dt)==="object"?et(we,Dt):we},this.getAnimStart=function(){var we=Et.target,Dt=Et.root,Vt=Et.targetIndex,ht=Et.propsData,kt=Et.startAt,Q=Et.start,at=Et.tweenVars,B={};for(var C in kt)B[(0,F.Lo)(C)]=kt[C];Et.computedStyle=Et.computedStyle||Tt(we),at.style=at.style||{};var I,H;for(var mt in ht.data){var Pt,Lt=ht.data[mt];if(Lt.plugin){var Jt=new Lt.plugin(Lt.value,mt);Jt.target=we,Jt.root=Dt,Jt.parent=parent,Jt.index=Et.index,Jt.targetIndex=Vt,Jt.tweenVars=at,Jt.startAt=Et.startAt,Jt.computedStyle=Et.computedStyle,Lt.plugin=Jt,Q[mt]=Jt.getAnimStart();continue}var Oe=(0,F.dt)(mt),ye=Oe==="transform"?Et.transformName:Oe;ye=Oe==="filter"?Et.filterName:ye;var Ze=at.style[ye],wr=Ze!=null?Ze:Et.computedStyle[Oe],er=(Pt=B[mt])!==null&&Pt!==void 0?Pt:wr,Ur=ht.unit[mt],xn="";if(Oe==="transform"){I=I||(er===Ze?(0,R.Z)({},Ze):(0,F.Ck)(Et.computedStyle[Et.transformName]));var rr=I[mt];if(B&&mt in B){var xr,Wr;rr=Et.setStartAtValue((xr=(Wr=B[mt].vars)!==null&&Wr!==void 0?Wr:Ze==null?void 0:Ze[mt])!==null&&xr!==void 0?xr:rr,B[mt]),xn=B[mt].unit,mt==="scale"?(I.scaleX=rr,I.scaleY=rr):I[mt]=rr}xn!==Ur&&(rr=st({target:we,computedStyle:Et.computedStyle,style:Oe,value:rr,startUnit:xn,endUnit:Ur}),mt==="scale"?(I.scaleX=rr,I.scaleY=rr):I[mt]=rr),Q[Et.transformName]=I}else if(Oe==="filter"){var Gr=F._T.filterConvert[mt]||mt;H=H||(er===Ze?(0,R.Z)({},Ze):(0,F.GX)(wr)||{}),H[Gr]=H[Gr]||zt[Gr];var ce=H[Gr];if(B&&mt in B){var Yt;ce=Et.setStartAtValue((Yt=B[mt].vars)!==null&&Yt!==void 0?Yt:ce,B[mt]),xn=B[mt].unit,H[Gr]=ce}if(Ur!==xn){var ge;H[Gr]=st({target:we,computedStyle:Et.computedStyle,style:Oe,value:ce,startUnit:xn,endUnit:Ur,fixed:((ge=Et.computedStyle)===null||ge===void 0?void 0:ge.position)==="fixed"})}Q[Et.filterName]=H}else{var Ie;if(er=(Ie=B[mt])!==null&&Ie!==void 0?Ie:wr,(!er||er==="none"||er==="auto")&&(er=""),Ur=ht.unit[Oe],xn=(0,m.Z)(er)==="object"?er.unit:"".concat(er).replace(/[^a-z|%]/g,""),er=Et.setStartAtValue(wr,B[mt]),Ur!==xn){var xe;er=st({target:we,computedStyle:Et.computedStyle,style:Oe,value:parseFloat(er),startUnit:xn,endUnit:Ur,fixed:((xe=Et.computedStyle)===null||xe===void 0?void 0:xe.position)==="fixed"})}var Ye=parseFloat(er);Q[Oe]=isNaN(Ye)?St(Oe):Ye}}return Q},this.render=function(we){var Dt=Et.propsData,Vt=Et.start,ht=Et.tweenVars,kt=ht.style||{};Vt[Et.transformName]&&!kt[Et.transformName]&&(kt[Et.transformName]=(0,R.Z)({},Vt[Et.transformName])),Vt[Et.filterName]&&!kt[Et.filterName]&&(kt[Et.filterName]=(0,R.Z)({},Vt[Et.filterName]));var Q=kt[Et.transformName],at=kt[Et.filterName],B=Dt.data,C=Dt.unit,I=Dt.count,H=Dt.isTransform;for(var mt in B){var Pt=B[mt];if(Pt.plugin){kt[mt]=Pt.plugin.render(we);continue}var Lt=H[mt],Jt=Lt?Vt[Et.transformName][mt]:Vt[mt],Oe=C[mt],ye=I[mt];if(Lt){if(mt==="scale"){var Ze=Vt[Et.transformName].scaleX,wr=Vt[Et.transformName].scaleY;ye.charAt(1)==="="?(Q.scaleX=Ze+Pt*we,Q.scaleY=wr+Pt*we):(Q.scaleX=(Pt-Ze)*we+Ze,Q.scaleY=(Pt-wr)*we+wr)}else Q[mt]=it(parseFloat(Jt),Pt,we,ye,Oe);Q.text=xt(kt[Et.transformName])}else if(F._T.filter.indexOf(mt)>=0){var er=F._T.filterConvert[mt]||mt;Jt=parseFloat(Vt[Et.filterName][er])||0,at[er]=it(Jt,Pt,we,ye,Oe),at.text="";for(var Ur in at)Ur!=="text"&&(at.text="".concat(at.text," ").concat(Ur,"(").concat(at[Ur],")").trim())}else{var xn=(0,F.YJ)(mt,0);xn=typeof xn=="number"?0:xn.replace(/[^a-z|%]/g,""),Oe=Oe||xn,typeof Pt=="string"?kt[mt]=Pt:kt[mt]=it(Jt,Pt,we,ye,Oe)}}return kt},this.props=$t,this.transformName=(0,F.Yf)("transform"),this.filterName=(0,F.Yf)("filter")||"filter",this.setDefaultData()});te.key="style",te.className="style";var ue=te,fe=_(497326),Gt=_(360136),ae=_(973568),Ne=(0,X.Z)(function Kt($t,Et){(0,U.Z)(this,Kt),this.value=void 0,this.key=void 0,this.root=void 0,this.index=void 0,this.style={},this.start={},this.startAt={},this.target=void 0,this.value=$t,this.key=Et});Ne.className=void 0,Ne.key=void 0;var ee=function(Kt){(0,Gt.Z)(Et,Kt);var $t=(0,ae.Z)(Et);function Et(we,Dt){var Vt;(0,U.Z)(this,Et),Vt=$t.call(this,we,Dt),Vt.value=void 0,Vt.key=void 0,Vt.start=[],Vt.tweenVars={},Vt.vars={},Vt.computedStyle=void 0,Vt.propsData={data:[],unit:[],count:[]},Vt.setDefaultData=function(Q,at){var B=(0,fe.Z)(Vt),C=B.propsData,I=B.value,H=(0,E.Z)(I);if(Q==="color"){var mt;H[3]=(mt=H[3])!==null&&mt!==void 0?mt:1}C.type=Q,C.data=H.map(function(Pt){return!parseFloat(Pt)&&parseFloat(Pt)!==0?Pt:parseFloat(Pt)}),C.unit=H.map(function(Pt){return Pt.toString().replace(/[^a-z|%]/g,"")}),C.count=H.map(function(Pt){return Pt.toString().replace(/[^+|=|-]/g,"")}),at&&(C.splitStr=at)},Vt.convertToMarksArray=function(Q,at,B,C){var I=(B||"").toString().replace(/[^a-z|%]/g,""),H=typeof C=="number"?Q[C]:void 0;return I===H?parseFloat(B):!parseFloat(B)&&parseFloat(B)!==0?B:st({target:Vt.target,computedStyle:Vt.computedStyle,style:at,value:B,startUnit:I,endUnit:H,isOriginWidth:at==="transformOrigin"&&!C})},Vt.getAnimStart=function(){var Q,at,B,C,I=(0,fe.Z)(Vt),H=I.startAt,mt=I.target,Pt=I.key,Lt=I.propsData,Jt=I.computedStyle,Oe=I.tweenVars,ye=(Q=(at=(B=H==null?void 0:H[Pt])!==null&&B!==void 0?B:Jt?(C=Oe.style)===null||C===void 0?void 0:C[Pt]:Oe[Pt])!==null&&at!==void 0?at:(Jt||mt)[Pt])!==null&&Q!==void 0?Q:"",Ze=Lt.data.indexOf("inset"),wr;if(Ze!==-1&&!ye.match("inset")&&Lt.type==="shadow"&&(wr=ye,ye=""),(!ye||ye==="none"||ye==="auto")&&(ye=""),ye=Lt.type==="shadow"?(0,F.hy)(ye,Pt):ye,ye=Lt.type==="color"?(0,F.lu)(ye):ye,ye=Lt.type==="string"?ye.split(/[\s|,]/):ye,Nt[Pt]){var er,Ur,xn,rr;ye[1]=(er=ye[1])!==null&&er!==void 0?er:ye[0],ye[2]=(Ur=ye[2])!==null&&Ur!==void 0?Ur:ye[0],ye[3]=(xn=(rr=ye[3])!==null&&rr!==void 0?rr:ye[1])!==null&&xn!==void 0?xn:ye[0]}var xr=Lt.unit,Wr=ye.map(function(Gr,ce){return parseFloat(Gr).toString()==="NaN"?Gr:Vt.convertToMarksArray(xr,Pt,Gr,ce)});return Vt.start=Wr.concat(Ze>=0?"inset":[]),Vt.start.oldShadow=wr,Vt.start},Vt.render=function(Q){var at=(0,fe.Z)(Vt),B=at.start,C=at.propsData,I=C.type,H=C.splitStr,mt=C.data,Pt=C.count,Lt=C.unit,Jt=mt.map(function(er,Ur){return typeof er=="string"?er:it(B[Ur],er,Q,Pt[Ur],Lt[Ur])});switch(I){case"string":Jt=Jt.join(H);break;case"color":Jt=(0,F.Lq)(Jt);break;case"shadow":{var Oe=Jt.indexOf("inset")>=0,ye=Oe?Jt.filter(function(er){return er!=="inset"}):Jt,Ze=ye.slice(0,ye.length-4).map(function(er){return typeof er=="number"?"".concat(er,"px"):er}),wr=(0,F.Lq)(ye.slice(ye.length-4,ye.length));Jt="".concat(B.oldShadow?"".concat(B.oldShadow,","):"").concat(Ze.join(" ")," ").concat(wr," ").concat(Oe?"inset":"").trim();break}default:break}return Jt},Vt.value=we,Vt.key=Dt;var ht="",kt="";return typeof we=="string"&&(Dt.match(V)?(Vt.value=(0,F.hy)(we,Dt),ht="shadow"):Dt.match(/color|fill|stroke/i)||we.match(j)?(Vt.value=(0,F.lu)(we),ht="color"):(kt=we.replace(/[^\s|,]/g,"").replace(/\s+/g," "),Vt.value=we.split(/[\s|,]/),ht="string")),Vt.setDefaultData(ht,kt),Vt}return(0,X.Z)(Et)}(Ne);ee.className="ArrayPlugin";var de=ee,ze={linear:{"to top":"0deg","to top right":"45deg","to right top":"45deg","to right":"90deg","to right bottom":"135deg","to bottom right":"135deg","to bottom":"180deg","to bottom left":"225deg","to left bottom":"225deg","to left":"270deg","to left top":"315deg","to top left":"315deg"},radial:{center:"50% 50%",top:"50% 0%","top right":"100% 0%","right top":"100% 0%",right:"100% 50%","right bottom":"100% 100%","bottom right":"100% 100%",bottom:"50% 100%","bottom left":"0% 100%","left bottom":"0% 100%",left:"0% 50%","left top":"0% 0%","top left":"0% 0%"}},be=["closest-side","closest-corner","farthest-side","farthest-corner"],ke=function($t,Et,we){console.warn("Warning: The gradient ".concat($t,"(").concat(Et," => ").concat(we,") is different, which has been automatically converted to animation gradient ").concat($t,"(").concat(we,")."))},he=function($t){return $t==="url"||$t.indexOf("image")>=0||$t==="paint"||$t==="cross-fade"||$t==="element"},vt=function(Kt){(0,Gt.Z)(Et,Kt);var $t=(0,ae.Z)(Et);function Et(we){var Dt;return(0,U.Z)(this,Et),Dt=$t.call(this,we,"backgroundImage"),Dt.value=void 0,Dt.tweenVars={},Dt.vars=[],Dt.computedStyle=void 0,Dt.defaultStartVars=[],Dt.getPosition=function(Vt){return Vt.map(function(ht){return{data:parseFloat(ht),unit:ht.replace(/[^a-z|%]/g,"")}})},Dt.getAngle=function(Vt,ht){var kt=Vt.replace(/-|gradient|repeating]/g,""),Q,at,B,C;switch(kt){case"linear":{B=Dt.getPosition((ze.linear[ht]||ht||ze.linear["to bottom"]).split(" "));break}case"radial":{var I=ht.split(" ");Q=I.find(function(Jt){return be.indexOf(Jt)>=0})||be[3],at=I.find(function(Jt){return Jt==="circle"||Jt==="ellipse"})||"ellipse";var H=new RegExp("".concat(Q,"|").concat(at,"|at"),"g"),mt=ht.replace(H,"").trim();C=Dt.getPosition((ze.radial[mt]||mt||ze.radial.center).split(" "));break}case"conic":{var Pt=ht.split("at").map(function(Jt){return Jt.trim()}),Lt=(Pt[0]||"").split(" ");at=Lt[0]||"from",B=Dt.getPosition([Lt[1]||"0deg"]),C=Dt.getPosition((ze.radial[Pt[1]]||Pt[1]||ze.radial.center).split(" "));break}default:break}return{extent:Q,shape:at,angle:B,position:C}},Dt.valueToIValue=function(Vt){if(!Vt)return[];var ht=Vt.replace(/\),\s+?(url|radial|conic|linear|repeating|image|element|cross|paint)/,")#,#$1").split("#,#");return ht.map(function(kt){var Q=kt.replace(/([a-z|-]+)\((.*)\)/,"$1").trim();if(Q==="url")return{type:Q,values:kt};var at=kt.replace(/([a-z|-]+)\((.*)\)/,"$2").replace(/#([0-9a-f]{6}|[0-9a-f]{3})|(rgb[a]?|hsl)+\(\d+\,[\s+]?\d+[\%]?\,[\s+]?\d+[\%]?(\,\d+)?\)/gi,function(H){return H.replace(/\s+/g,"")}).replace(/\,([a-z|#|\s+])/g,"#,#$1").split("#,#").map(function(H){return H.trim()}),B=at[0].match(j)?"":at[0];B&&at.splice(0,1);var C=Dt.getAngle(Q,B),I=at.map(function(H){var mt=H.trim().split(/\s+/),Pt,Lt=(mt[0].match(j),mt[0]);return Lt&&(mt.splice(0,1),Pt=(0,F.lu)(Lt)),{color:Pt,positions:mt.map(function(Jt){return{data:parseFloat(Jt),unit:Jt.toString().replace(/[^a-z|%]/g,"")}})}});return{type:Q,angle:C,values:I}})},Dt.getAnimStart=function(){var Vt,ht=(0,fe.Z)(Dt),kt=ht.startAt,Q=ht.key,at=ht.computedStyle,B=ht.target,C=ht.vars,I=ht.tweenVars,H=(0,R.Z)({},kt),mt=(Vt=I[Q])!==null&&Vt!==void 0?Vt:(at||B)[Q];(!mt||mt==="none"||mt==="auto")&&(mt=""),H[Q]=H[Q]||mt,H[Q]=H[Q]?Dt.valueToIValue(H[Q]):Dt.defaultStartVars;var Pt=Math.max(C.length,H[Q].length),Lt=(Pt===H[Q].length?H[Q]:C).map(function(Jt,Oe){var ye,Ze,wr=H[Q][Oe]||Dt.defaultStartVars[Oe],er=C[Oe]||wr;if((!wr||wr.type!==er.type)&&(wr.type!==er.type&&ke("type",wr.type,er.type),wr=Dt.defaultStartVars[Oe]),he(er.type)||typeof er.values=="string"||typeof wr.values=="string")return(0,R.Z)({},er);if(((ye=er.angle)===null||ye===void 0?void 0:ye.extent)!==((Ze=wr.angle)===null||Ze===void 0?void 0:Ze.extent)){var Ur,xn;ke("extent keyword",(Ur=wr.angle)===null||Ur===void 0?void 0:Ur.extent,(xn=er.angle)===null||xn===void 0?void 0:xn.extent)}var rr=Math.max(wr.values.length,er.values.length),xr=rr===wr.values.length?wr.values:er.values;return wr.values=xr.map(function(Wr,Gr){var ce=wr.values[Gr],Yt=er.values[Gr]||ce;return(0,R.Z)((0,R.Z)({},ce),{},{positions:(Yt||ce).positions.map(function(ge,Ie){var xe=ce?ce.positions[Ie]||ce.positions[ce.positions.length-1]:Yt.positions[Yt.positions.length-1],Ye=ge||xe;return!xe&&ce&&wr.values.length&&(xe={data:100/(wr.values.length-1)*Gr,unit:"%"}),Ye.unit!==xe.unit&&ke("units",xe.unit,Ye.unit),{data:xe.data,unit:Ye.unit}})})}),wr});return Dt.start=Lt,Dt.start},Dt.render=function(Vt){var ht="",kt=Math.max(Dt.vars.length,Dt.start.length);return(kt===Dt.vars.length?Dt.vars:Dt.start).forEach(function(Q,at){var B=Dt.start[at],C=Dt.vars[at]||B;if(he(C.type)||typeof C.values=="string"||!C.angle){ht+="".concat(ht?",":""," ").concat(C.values).trim();return}var I=Math.max(B.values.length,C.values.length),H=(I===B.values.length?B.values:C.values).map(function(Oe,ye){var Ze=B.values[ye],wr=C.values[ye];wr||(wr=Ze);var er=Ze.color,Ur=Ze.positions;!er&&wr.color&&(er=(0,E.Z)(wr.color)),Ur||(Ur=wr.positions.map(function(xr){return(0,R.Z)({},xr)}));var xn=wr.color?wr.color.map(function(xr,Wr){return it(er[Wr],xr,Vt)}):wr.color,rr=wr.positions.map(function(xr,Wr){return"".concat(it(Ur[Wr].data,xr.data,Vt)).concat(xr.unit)}).join(" ");return"".concat(xn?(0,F.Lq)(xn):xn||""," ").concat(rr).trim()}),mt=C.angle,Pt=mt.angle&&mt.angle.map(function(Oe,ye){return"".concat(it(B.angle.angle[ye].data,Oe.data,Vt)).concat(Oe.unit)}).join(" "),Lt=mt.position&&mt.position.map(function(Oe,ye){return"".concat(it(B.angle.position[ye].data,Oe.data,Vt)).concat(Oe.unit)}).join(" "),Jt="".concat(mt.extent||""," ").concat(mt.shape||""," ").concat(Pt||""," ").concat(Lt?"at ".concat(Lt):"").trim();ht+="".concat(ht?",":""," ").concat(C.type,"(").concat(Jt?"".concat(Jt,","):"").concat(H.join(","),")").trim()}),ht},Dt.value=we,Dt.vars=Dt.valueToIValue(we),Dt.defaultStartVars=Dt.vars.map(function(Vt){return he(Vt.type)||typeof Vt.values=="string"?(0,R.Z)({},Vt):(0,R.Z)((0,R.Z)({},Vt),{},{values:Vt.values.map(function(ht){var kt;return ht.color&&typeof ht.color!="string"?(kt=(0,E.Z)(ht.color),kt[3]=0):kt=ht.color,{color:kt,positions:(0,E.Z)(ht.positions)}})})}),Dt}return(0,X.Z)(Et)}(Ne);vt.className="GradientsPlugin";var ie=_(654087),Pe=_.n(ie),qe=function(){function Kt(){var $t=this;(0,U.Z)(this,Kt),this.lagThreshold=150,this.adjustedLag=33,this.emptyTime=0,this.elapsed=0,this.frameFPS=1e3/240,this.startTime=0,this.prevTime=0,this.useTimeout=!1,this.lastUpdate=this.startTime,this.nextTime=this.frameFPS,this.req=void 0,this.id=-1,this.tweenId=0,this.tickFn=[],this.state="sleep",this.time=0,this.frame=0,this.removeReq=function(Et){return $t.useTimeout?clearTimeout(Et):(0,ie.cancel)(Et)},this.tick=function(){var Et=$t.tickFn;$t.startTime||($t.startTime=$()-$t.frameFPS,$t.lastUpdate=$t.startTime),$t.elapsed=$()-$t.lastUpdate,$t.elapsed>$t.lagThreshold&&($t.startTime+=$t.elapsed-$t.adjustedLag),$t.lastUpdate+=$t.elapsed,$t.time=$t.lastUpdate-$t.startTime;var we=$t.time-$t.nextTime;if(we>0){$t.frame++,$t.nextTime+=we+(we>=$t.frameFPS?4:$t.frameFPS-we);for(var Dt=$t.time-$t.prevTime,Vt=0;Vt<Et.length;Vt++)Et[Vt].fn({time:$t.time,elapsed:Dt<$t.frameFPS?$t.frameFPS:Dt});$t.prevTime=$t.time}if(!$t.tickFn.length&&($t.emptyTime||($t.emptyTime=$t.time+500),$t.time>=$t.emptyTime)){$t.emptyTime=0,$t.sleep();return}$t.req&&($t.id=$t.req($t.tick))},this.wake=function(){$t.id&&$t.sleep(),$t.req=$t.useTimeout?function(Et){return setTimeout(Et,$t.frameFPS)}:Pe(),$t.tick(),$t.state="wake"},this.sleep=function(){$t.removeReq($t.id),$t.id=-1,$t.req=void 0,$t.state="sleep"},this.add=function(Et){var we="TweenOneTicker_".concat($t.tweenId);return $t.tweenId+=1,$t.tickFn.findIndex(function(Dt){return Dt.key===we})===-1&&$t.tickFn.push({key:we,fn:Et}),$t.emptyTime=0,$t.req||$t.wake(),we},this.clear=function(Et){$t.tickFn=$t.tickFn.filter(function(we){return we.key!==Et&&we.fn!==Et})},this.timeout=function(Et,we){if(typeof Et!="function")return console.warn("not function");var Dt=$t.time,Vt=$t.add(function(){var ht=$t.time-Dt;ht>=(we||0)&&($t.clear(Vt),Et())});return Vt},this.interval=function(Et,we){if(typeof Et!="function")return console.warn("not function"),null;var Dt=$t.time;return $t.add(function(){var Vt=$t.time-Dt;Vt>=(we||0)&&(Dt=$t.time,Et())})}}return(0,X.Z)(Kt,[{key:"fps",value:function(Et,we){this.frameFPS=1e3/(Et||240),this.nextTime=this.time+this.frameFPS,this.useTimeout=typeof we=="undefined"?this.useTimeout:we,this.useTimeout&&(this.req=function(Dt){return setTimeout(Dt,Et)})}}]),Kt}(),Qe=new qe,lr=Qe,fr=function(){function Kt(){var $t=this;(0,U.Z)(this,Kt),this.children=[],this.autoSleep=200,this.tickerKey=void 0,this.startTime=void 0,this.addChild=function(Et){$t.children.indexOf(Et)===-1?($t.children.push(Et),$t.updateTickerState()):$t.start()},this.removeChild=function(Et){$t.children=$t.children.filter(function(we){return we!==Et}),$t.updateTickerState()},this.kill=function(Et){$t.children=$t.children.filter(function(we){var Dt=we.root.targets,Vt=Dt.map(function(kt,Q){if(Et.indexOf(kt)===-1)return kt;delete kt._tweenOneVars});we.root.targets=Vt;var ht=!!Vt.filter(function(kt){return kt}).length;return ht||we.kill(),ht}),$t.updateTickerState()},this.killAll=function(Et){Et&&($t.children.forEach(function(we){we==null||we.root.targets.forEach(function(Dt){Dt&&delete Dt._tweenOneVars})}),$t.children=[]),lr.clear($t.tickerKey),$t.tickerKey=void 0},this.getTotalTime=function(){for(var Et=0,we=0;we<$t.children.length;we++){var Dt=$t.children[we],Vt=Dt.pausedState?0:Dt.startTime+Dt.totalTime;Et?Et=Math.max(Vt,Et):Et=Vt}return Et},this.updateTickerState=function(){!$t.children.length||!$t.children.some(function(Et){return!(Et!=null&&Et.pausedState)&&(!(Et!=null&&Et.reverseState)&&Et.progressTime<Et.totalTime||(Et==null?void 0:Et.reverseState)&&Et.progressTime>0)})?$t.killAll(!$t.children.length):$t.start()},this.start=function(){$t.tickerKey||($t.tickerKey=lr.add($t.render))},this.render=function(Et){for(var we=Et.time,Dt=Et.elapsed,Vt=Dt===void 0?0:Dt,ht=$t.children,kt=ht.length,Q=0;Q<kt;Q++){var at=ht[Q];if(at){var B=at.startTime-Vt,C=at.startTime+at.totalTime+Vt;we>B&&we<C&&!at.pausedState&&at.render({time:we,elapsed:Vt})}}}}return(0,X.Z)(Kt,[{key:"totalTime",get:function(){return this.getTotalTime()}}]),Kt}(),kr=fr,En=_(141e3),fn=_.n(En);fn().path=function(Kt,$t){var Et=$t||{};if(q)return"linear";for(var we=J(Kt),Dt=we.getTotalLength(),Vt=Et.rect||100,ht=Et.lengthPixel||200,kt=[],Q=0;Q<ht-1;Q++)kt.push(we.getPointAtLength(Dt/(ht-1)*Q));return kt.push(we.getPointAtLength(ht)),function(B,C,I,H){var mt=fn().linear(B,C,I,H),Pt=Vt*mt,Lt=kt.filter(function(Jt){return Jt.x>=Pt})[0]||we.getPointAtLength(mt*Dt);return 1-Lt.y/Vt}};var Vr=fn(),Je=function(){function Kt($t){var Et=this;(0,U.Z)(this,Kt),this.item=void 0,this.vars={},this.start=void 0,this.parent=void 0,this.root=void 0,this.startAt={},this.mode=void 0,this.appearTo=0,this.props={},this.index=void 0,this.register=void 0,this.reverseStart=void 0,this.repeatNum=0,this.prevMoment=void 0,this.easing=void 0,this.changeValueToVars=function(ht,kt,Q){var at=(Array.isArray(kt)||ht.match(/color|fill|stroke/i)||ht.match(V)&&typeof kt=="string"||typeof kt=="string"&&kt.split(/[\s|,]/).length>1)&&!(ht in _t);if(ht in _t||at)return Q?kt:{value:kt,plugins:[],array:at};var B=parseFloat(kt.toString().replace(/=/g,"")),C=kt.toString().replace(/[^a-z|%]/g,""),I=kt.toString().charAt(1)==="="?kt.toString().replace(/[^\+\=|\-\=]/gi,""):"";return{vars:B,unit:C,count:I}},this.setEase=function(ht){if(typeof ht=="function"){Et.easing=ht;return}else if(ht.match(/,/g)){Et.easing=Vr.path(ht);return}Et.easing=Vr[ht]},this.getTotalTime=function(){var ht=Et.props,kt=ht.duration,Q=kt===void 0?450:kt,at=ht.delay,B=at===void 0?0:at,C=ht.repeat,I=C===void 0?0:C,H=ht.repeatDelay,mt=H===void 0?0:H;return I===-1?Number.MAX_VALUE:B+Q*(I+1)+mt*I},this.getEaseToRatio=function(ht,kt){var Q=Et.props.ease,at=Q===void 0?"":Q;return(ht===0||ht===1)&&!(typeof at=="function"||at.match(/,/g))?ht:Et.easing(kt?1-ht:ht,kt?1:0,kt?0:1,1)},this.setRatioToVars=function(ht){for(var kt=Et.vars,Q=Et.root,at=0;at<Q.targets.length;at++)if(Q.targets[at])for(var B in kt){var C=kt[B];if(C.plugins){B==="PathMotion"?Q.vars[at].style=C.plugins[at].render(ht):Q.vars[at][B]=C.plugins[at].render(ht);continue}var I=C.vars,H=C.count,mt=C.unit,Pt=Et.start[at][B];Q.vars[at][B]=it(Pt,I,ht,H,mt)}},this.onRegisterAnimate=function(){Et.register=!0;for(var ht=Et.root,kt=Et.parent,Q=Et.startAt,at=[],B=0;B<ht.targets.length;B++){var C=ht.targets[B],I=ht.vars[B],H={};for(var mt in Et.vars){var Pt=Et.vars[mt];if(Pt.plugins){var Lt=new _t[Pt.array?"ArrayPlugin":mt](Pt.value,mt);Lt.target=C,Lt.root=ht,Lt.parent=kt,Lt.targetIndex=B,Lt.tweenVars=I,Lt.index=Et.index,Lt.startAt=Q,H[mt]=Lt.getAnimStart(),Pt.plugins.push(Lt)}else{var Jt,Oe,ye=(Jt=ht.attr?C.getAttribute(mt):I[mt]||C[mt])!==null&&Jt!==void 0?Jt:St(mt),Ze=(Oe=Q[mt])!==null&&Oe!==void 0?Oe:ye,wr=(0,m.Z)(Ze)==="object"&&"vars"in Ze&&"count"in Ze,er=wr?Ze.unit:"".concat(Ze).replace(/[^a-z|%]/g,""),Ur=Pt.unit;er&&er!==Ur&&console.warn("Different units, start unit ".concat(er,", to value unit ").concat(Ur,", remove start unit.")),H[mt]=wr?et(ye,Ze):parseFloat(Ze)}}at.push(H)}Et.start=at},this.overflowRatio=function(ht){var kt=ht<0?0:ht,Q=Et.props.duration;return kt=kt>Q?Q:kt,kt},this.render=function(ht){var kt=ht.moment,Q=ht.fps,at=Q===void 0?0:Q,B=ht.silence,C=ht.render,I=Et.parent,H=Et.root,mt=Et.props,Pt=Ft(H.targets),Lt=I.onChange,Jt=mt.repeat,Oe=Jt===void 0?0:Jt,ye=mt.type,Ze=ye===void 0?"to":ye,wr=mt.duration,er=wr===void 0?450:wr,Ur=mt.delay,xn=Ur===void 0?0:Ur,rr=mt.repeatDelay,xr=rr===void 0?0:rr,Wr=mt.yoyo;Oe=Oe===-1?Number.MAX_VALUE:Oe;var Gr=kt-xn,ce=Math.floor(Gr/(er+xr))||0;ce=ce>Oe?Oe:ce,ce=ce<0?0:ce,Gr=Gr-(er+xr)*ce;var Yt=!!(Wr&&ce%2),ge=Ze==="from",Ie=Yt&&ge?!1:Yt||ge;Gr=Ie?er-Gr:Gr;var xe=ge?0:xn,Ye=Ie?1:0;if(!Et.register&&kt>=xe&&(Et.onRegisterAnimate(),(Ie&&Gr<=0||!Ie&&Gr>=er&&er)&&(Et.prevMoment=kt,Ye=Ie?0:1),Et.setRatioToVars(Ye),Lt({index:Et.index,vars:H.vars})),Et.register&&kt>xn-at&&kt<Et.totalTime+at){Gr=Et.overflowRatio(Gr),Ye=Ie?1:0,kt>=Et.totalTime&&Et.mode!=="onComplete"&&Et.prevMoment!==void 0||Et.prevMoment===void 0&&kt>=Et.totalTime&&er?(Ye=Ie?0:1,Et.mode="onComplete",Et.props.onComplete&&Et.props.onComplete({mode:Et.mode,index:Et.index,moment:Gr,ratio:Ye,targets:Pt,vars:Ft(H.vars)})):Et.prevMoment===void 0||kt<=0&&kt>-at&&Et.mode!=="onStart"&&Et.prevMoment>kt?(Et.mode="onStart",Et.props.onStart&&Et.props.onStart({mode:Et.mode,index:Et.index,moment:Gr,ratio:Ye,targets:Pt,vars:Ft(H.vars)})):(Ye=Gr&&er?Gr/er:0,Et.mode="onUpdate",Et.props.onUpdate&&Et.props.onUpdate({mode:Et.mode,index:Et.index,moment:Gr,ratio:Ye,targets:Pt,vars:Ft(H.vars)})),Oe&&ce!==Et.repeatNum&&kt&&Et.mode==="onUpdate"&&(Et.mode="onRepeat",Et.props.onRepeat&&Et.props.onRepeat({mode:Et.mode,index:Et.index,moment:Gr,ratio:Ye,targets:Pt,vars:Ft(Et.root.vars)})),Et.setRatioToVars(Et.getEaseToRatio(Ye,ge)),Oe&&(Et.repeatNum=ce);var gr={mode:Et.mode,moment:Gr,repeat:ce,ratio:Ye,targets:H.targets,vars:H.vars,index:Et.index};B&&(gr.silence=B),C&&(gr.render=C),Lt(gr),Et.prevMoment=kt}},this.item=$t,this.startAt=(0,R.Z)({},$t.startAt),Object.keys(this.startAt).forEach(function(ht){Et.startAt[ht]=Et.changeValueToVars(ht,Et.startAt[ht],!0)});var we={};for(var Dt in $t){var Vt=$t[Dt];Dt in ut?we[Dt]=Vt:this.vars[Dt]=this.changeValueToVars(Dt,Vt)}this.props=(0,R.Z)((0,R.Z)({},ut),we),this.setEase(this.props.ease)}return(0,X.Z)(Kt,[{key:"totalTime",get:function(){return this.getTotalTime()}}]),Kt}(),dr=(0,X.Z)(function Kt($t){var Et=this;(0,U.Z)(this,Kt),this.props=void 0,this.id=void 0,this.children=[],this.totalTime=0,this.totalTimeRegion=0,this.childTotalTime=0,this.childRegionTotalTime=0,this.prevMoment=void 0,this.progressTime=0,this.progressMoment=-1,this.startMoment=0,this.startTime=0,this.repeatNum=0,this.mode="onTimelineStart",this.pausedState=void 0,this.reverseState=void 0,this.root=void 0,this.parent=void 0,this.regionStartTime=0,this.regionEndTime=void 0,this.onChangeChild=void 0,this.onChangeTimeline=void 0,this.init=function(){for(var ht=Et.props,kt=ht.reverse,Q=ht.animation,at=ht.moment,B=dt(Q),C=0;C<B.length;C++){var I=B[C];I.type==="set"&&(I.duration=0);var H=new Je(I);H.index=C;var mt=C?wt(I,B[C-1]):0;I.appearTo=mt,H.appearTo=mt,Et.addChild(H)}Et.render({time:(kt?Et.totalTime:0)+Et.startTime,elapsed:16.67}),Et.totalTime||Et.render({time:(kt?Et.totalTime:0)+Et.startTime,elapsed:16.67}),at?Et.goto(at):Et.play()},this.addChild=function(ht){ht.parent=Et,ht.root=Et.root,Et.children.indexOf(ht)===-1&&(Et.children.push(ht),Et.setTotalTime())},this.setTotalTime=function(){Et.childTotalTime=0,Et.childRegionTotalTime=0;for(var ht=0;ht<Et.children.length;ht++){var kt=Et.children[ht];if(kt.appearTo!==Et.childTotalTime){var Q=kt.appearTo+kt.totalTime;Q>Et.childTotalTime&&(Et.childTotalTime=Q,Et.childRegionTotalTime=Q)}else Et.childTotalTime+=kt.totalTime,Et.childRegionTotalTime+=kt.totalTime}Et.regionStartTime&&(Et.childRegionTotalTime-=Et.regionStartTime),Et.regionEndTime&&(Et.childRegionTotalTime=Et.regionEndTime-Et.regionStartTime);var at=Et.props,B=at.repeat,C=B===void 0?0:B,I=at.repeatDelay,H=I===void 0?0:I,mt=at.delay;Et.totalTime=C===-1?Number.MAX_VALUE:mt+Et.childTotalTime*(C+1)+H*C,Et.totalTimeRegion=C===-1?Number.MAX_VALUE:mt+Et.childRegionTotalTime*(C+1)+H*C},this.setStartTimeOrMoment=function(ht){Et.startTime=lr.time,Et.startMoment=ht||Et.progressMoment},this.reRenderCall=function(){Et.render({time:Et.startTime,elapsed:lr.elapsed||lr.frameFPS})},this.play=function(ht){if(ht){var Q;(Q=Et.parent)===null||Q===void 0||Q.updateTickerState()}else{var kt;(kt=Et.parent)===null||kt===void 0||kt.addChild(Et)}},this.paused=function(){var ht=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;Et.pausedState=ht,Et.setStartTimeOrMoment(),Et.play(ht)},this.reverse=function(ht){Et.reverseState=ht,Et.setStartTimeOrMoment(),Et.play(Et.pausedState)},this.goto=function(ht,kt){var Q=ht-Et.regionStartTime;Et.startTime=lr.time,Et.startMoment=Q>Et.totalTime?Et.totalTime:Q,Et.progressMoment=Et.startMoment,Et.progressTime=Q,Et.play(Et.pausedState),Et.reRenderCall(),!!kt!==Et.pausedState&&Et.paused(kt)},this.kill=function(ht){if(typeof ht=="number")Et.paused(),delete Et.children[ht],Et.setTotalTime(),Et.paused(!1);else{var kt;Et.children=[],(kt=Et.parent)===null||kt===void 0||kt.removeChild(Et)}},this.onChange=function(ht){ht.timelineMoment=Et.progressMoment,Et.onChangeChild(ht)},this.render=function(ht){var kt=ht.time,Q=ht.elapsed,at=Q||lr.frameFPS||0,B=Et.totalTime,C=Et.totalTimeRegion,I=Et.childTotalTime,H=Et.childRegionTotalTime,mt=Et.children,Pt=Et.props,Lt=Et.startTime,Jt=Et.reverseState,Oe=Et.pausedState,ye=Et.startMoment,Ze=Et.onChangeTimeline,wr=Et.parent,er=Et.root,Ur=Et.prevMoment,xn=Et.regionStartTime,rr=Pt.repeatDelay,xr=rr===void 0?0:rr,Wr=Pt.yoyo,Gr=Pt.delay,ce=Pt.repeat,Yt=ce===void 0?0:ce;Yt=Yt===-1?Number.MAX_VALUE:Yt;var ge=kt-Lt-Gr,Ie=Jt?ye-ge:ge+ye;if(!(Ie<-at)){var xe=Ie<0?0:Ie;xe=xe>B?B:xe,xe=ye<xn?Ie:xe,xe=ye>C?ye:xe;var Ye=Yt?Math.floor(xe/(H+xr)):0;Ye=Yt&&Ye>Yt?Yt:Ye;var gr=xe-(H+xr)*Ye,Mr=!!(Wr&&Ye%2);gr=Mr?H-gr:gr,gr=xn+gr;var vn=Jt?!Mr:Mr;if(Et.mode="onTimelineUpdate",typeof Ur!="number"&&(Et.mode="onTimelineStart"),xe>=C-Gr&&typeof Ur=="number"&&(Et.mode="onTimelineComplete"),Ye!==Et.repeatNum&&(Et.mode="onTimelineRepeat",xe>I*Ye&&xe<I*Ye+at)){for(var Wn=vn?0:mt.length-1;vn?Wn<=mt.length-1:Wn>=0;vn?Wn++:Wn--){var Sn=mt[Wn];vn||(Sn.prevMoment=void 0),Sn.render({moment:vn?Sn.totalTime:0,fps:at})}Ze({moment:xe,totalTime:B,repeat:Ye,mode:Et.mode,targets:er.targets}),Et.mode="onTimelineUpdate"}Yt&&(Et.repeatNum=Ye),Et.progressMoment=xe,Et.prevMoment=xe,Et.progressTime=ge;for(var ea=0;ea<mt.length;ea++){var wn=mt[ea],Hn=wn.totalTime+wn.appearTo,la=gr>=wn.appearTo-at&&gr<Hn+at;if((wn.mode!=="onComplete"&&gr>Hn+at&&!Mr&&wn.totalTime||typeof wn.mode=="undefined"&&!wn.totalTime)&&(wn.render({moment:wn.totalTime,fps:at}),wn.prevMoment=void 0),gr<wn.appearTo-at&&wn.mode&&wn.mode!=="onStart"&&(wn.render({moment:wn.appearTo,fps:at,silence:!0}),wn.prevMoment=void 0,wn.mode=void 0),la){var ba=gr<0?0:gr;if(gr>Hn&&wn.mode==="onComplete"&&!Mr)return;ba=gr>Hn?Hn:gr,wn.render({moment:ba-wn.appearTo,fps:at}),Hn||(wn.render({moment:wn.totalTime,fps:at,render:!0}),wn.prevMoment=void 0)}}Ze({moment:xe,totalTime:B,repeat:Ye,mode:Et.mode,targets:er.targets}),(Oe||C&&Ie+Gr>=C&&!Jt||Jt&&Ie+Gr<=0||!mt.length)&&(wr==null||wr.removeChild(Et))}},this.props=$t;var we=this.props,Dt=we.paused,Vt=we.reverse;this.reverseState=Vt,this.pausedState=Dt,this.regionStartTime=$t.regionStartTime||0,this.regionEndTime=$t.regionEndTime});_t.push(de),_t.push(vt),_t.push(ue);var nr=0,oe=new kr,Te=function(){function Kt($t,Et){var we=this;(0,U.Z)(this,Kt),this.targets=void 0,this.props=void 0,this.timeline=void 0,this.animate=void 0,this.$reverse=!1,this.vars=[],this.initTime=void 0,this.attr=void 0,this.init=function(){var Dt=(0,l.Z)(y().mark(function Vt(ht){var kt;return y().wrap(function(at){for(;;)switch(at.prev=at.next){case 0:kt=yt(ht),we.targets[0].tagName&&!we.attr&&(kt.animation=dt(kt.animation).map(function(B){var C={style:{}};for(var I in B)I in _t||I in ut?C[I]=B[I]:C.style[I]=B[I];return Object.keys(C.style).length||delete C.style,B.duration&&(B.duration=Math.round(B.duration)),B.delay&&(B.delay=Math.round(B.delay)),B.appearTo&&(B.appearTo=Math.round(B.appearTo)),B.repeatDelay&&(B.repeatDelay=Math.round(B.repeatDelay)),C})),we.animate=new dr(kt),we.animate.id="TweenOne_".concat(nr),nr++,we.animate.startTime=we.initTime,we.animate.onChangeChild=we.onChange,we.animate.onChangeTimeline=we.onChangeTimeline,we.animate.root=we,we.animate.parent=we.timeline,we.animate.init();case 11:case"end":return at.stop()}},Vt)}));return function(Vt){return Dt.apply(this,arguments)}}(),this.renderToDom=function(){for(var Dt=0;Dt<we.vars.length;Dt++){var Vt=we.vars[Dt];for(var ht in Vt){var kt=Vt[ht],Q=we.targets[Dt];if(Q)if(we.props.attr&&Q.tagName&&Q.setAttribute){if(ht==="style")for(var at in kt)Q.style[at]=kt[ht];Q.setAttribute(ht,kt)}else if(ht in _t){var B=_t[ht].key;if(typeof Q[B]=="function")Q[B](kt.attr,kt.path);else if((0,m.Z)(kt)==="object"&&(0,m.Z)(Q[B])==="object"&&B)for(var C in kt){var I=kt[C];B==="__self"?Q[C]=I:Q[B][C]=(0,m.Z)(I)==="object"&&I.text||I}else Q[B||ht]=kt}else Q[ht]=kt}}},this.onChange=function(Dt){Dt.mode==="onComplete"&&Dt.render&&we.renderToDom(),Dt.mode&&we.props.onChange&&!Dt.silence&&(Dt.targets=Ft(Dt.targets),Dt.vars=Ft(Dt.vars),we.props.onChange(Dt))},this.onChangeTimeline=function(Dt){if(we.renderToDom(),Dt.mode==="onTimelineComplete"){var Vt;(Vt=Dt.targets)===null||Vt===void 0||Vt.forEach(function(ht){delete ht._tweenOneVars})}Dt.mode&&we.props.onChangeTimeline&&(Dt.targets=Ft(Dt.targets),Dt.vars=Ft(we.vars),we.props.onChangeTimeline(Dt))},this.goto=function(Dt,Vt){we.targets.forEach(function(ht){ht&&Object.keys(ht._tweenOneVars||{}).forEach(function(kt){delete ht._tweenOneVars[kt]})}),we.animate.goto(Dt,Vt)},this.kill=function(Dt){we.animate.kill(Dt)},this.targets=$t,this.props=Et,this.timeline=oe,this.initTime=lr.time,this.attr=Et.attr,$t.forEach(function(Dt){we.vars.push(Dt._tweenOneVars)}),this.init(Et)}return(0,X.Z)(Kt,[{key:"paused",get:function(){return this.animate.pausedState},set:function(Et){this.animate.paused(Et)}},{key:"reverse",get:function(){return this.$reverse},set:function(Et){this.$reverse=Et,this.animate.reverse(Et)}},{key:"regionStartTime",get:function(){return this.animate.regionStartTime},set:function(Et){this.animate.regionStartTime=Et,this.animate.setTotalTime()}},{key:"regionEndTime",get:function(){return this.animate.regionEndTime||this.animate.totalTime},set:function(Et){this.animate.regionEndTime=Et,this.animate.setTotalTime()}}]),Kt}(),Lr=function($t,Et){if(!$t){console.error("Error: targets is undefined.");return}lr.state!=="wake"&&lr.wake();var we=dt($t).map(function(kt){return kt._tweenOneVars=kt._tweenOneVars||{},kt}),Dt=we.filter(function(kt){return kt.tagName}),Vt=we.filter(function(kt){return!kt.tagName}),ht=[];return Dt.length&&ht.push(new Te(Dt,Et)),Vt.length&&ht.push(new Te(Vt,Et)),Ft(ht)};Lr.kill=function(Kt){typeof Kt=="undefined"?oe.killAll(!0):oe.kill(dt(Kt))},Lr.plugins=_t;var Nr=Lr,ln=Nr;function en(Kt){return!Kt&&Kt!==0?[]:Array.isArray(Kt)?Kt:[Kt]}function Dr(Kt,$t){if(!Kt||!$t)return!1;var Et=Object.keys(Kt),we=Object.keys($t);return Et.length&&we.length&&Et.length===we.length?!Et.some(function(Dt){var Vt=Kt[Dt],ht=$t[Dt];if(Array.isArray(Vt)&&Array.isArray(ht)){var kt=Vt.join(),Q=ht.join();kt===Q&&!kt.match(/\[object object\]/gi)&&(Vt=kt,ht=Q)}return Vt!==ht}):!1}function Fr(Kt,$t){if(Kt===$t||Dr(Kt,$t))return!0;if(!Kt||!$t||Object.keys(Kt).length!==Object.keys($t).length)return!1;var Et=!0,we=function(Vt,ht){var kt=Object.keys(Vt).length>Object.keys(ht).length?Vt:ht,Q=Object.keys(Vt).length>Object.keys(ht).length?ht:Vt;Object.keys(kt).forEach(function(at){Et&&(at in Q||(Et=!1),(0,m.Z)(kt[at])==="object"&&(0,m.Z)(Q[at])==="object"?Et=Fr(kt[at],Q[at]):typeof kt[at]=="function"&&typeof Q[at]=="function"?kt[at].toString().replace(/\s+/g,"")!==Q[at].toString().replace(/\s+/g,"")&&(Et=!1):kt[at]!==Q[at]&&(Et=!1))})};return Array.isArray(Kt)&&Array.isArray($t)?Kt.forEach(function(Dt,Vt){we(Dt,$t[Vt])}):we(Kt,$t),Et}var Kr=["component","componentProps","animation","attr","paused","reverse","repeat","repeatDelay","yoyo","moment","onChange","onChangeTimeline","resetStyle","killPrevAnim"],an=P.forwardRef(function(Kt,$t){var Et=Kt.component,we=Et===void 0?"div":Et,Dt=Kt.componentProps,Vt=Kt.animation,ht=Kt.attr,kt=Kt.paused,Q=Kt.reverse,at=Kt.repeat,B=Kt.repeatDelay,C=Kt.yoyo,I=Kt.moment,H=Kt.onChange,mt=Kt.onChangeTimeline,Pt=Kt.resetStyle,Lt=Kt.killPrevAnim,Jt=Lt===void 0?!0:Lt,Oe=(0,M.Z)(Kt,Kr),ye=Oe||{},Ze=ye.children,wr=ye.className,er=ye.style,Ur=er===void 0?{}:er,xn=(0,P.useRef)(),rr=(0,P.useRef)(),xr=(0,P.useRef)(),Wr=function(vn,Wn){var Sn=xr.current;if(Sn){if(vn==="moment"){typeof Wn=="number"&&Sn.goto(Wn,kt);return}Sn[vn]=!!Wn}};T(function(){Wr("paused",kt)},[kt]),T(function(){Wr("moment",I)},[I]),T(function(){Wr("reverse",Q)},[Q]),T(function(){if(!xn.current)return console.warn("Warning: TweenOne domRef is error.");if(!Fr(Vt,rr.current)){var Mr=en(xn.current).map(function(Sn){return Sn instanceof Element||!(Sn instanceof P.Component)?Sn:(0,O.findDOMNode)(Sn)}).filter(function(Sn,ea){return Sn instanceof Element?Sn:(console.warn("Warning: TweenOne tag[".concat(ea,"] is not dom.")),!1)});if(xr.current&&Jt&&xr.current.kill(),Pt&&xr.current){var vn=we?Ur:(0,R.Z)((0,R.Z)({},Ur),Ze.props.style),Wn=Object.keys(vn).map(function(Sn){return"".concat((0,F.Rs)(Sn),":").concat((0,F.YJ)(Sn,vn[Sn]))}).join(";");Mr.forEach(function(Sn){Sn.setAttribute("style",Wn),delete Sn._tweenOneVars})}xr.current=Vt&&ln(Mr,{animation:Vt,attr:ht,yoyo:C,moment:I,repeat:at,reverse:Q,paused:kt,repeatDelay:B,onChange:H,onChangeTimeline:mt}),rr.current=Vt}},[Vt]),(0,P.useEffect)(function(){return function(){xr.current&&xr.current.kill&&xr.current.kill()}},[]);var Gr=function(vn){xn.current=vn,$t&&"current"in $t?$t.current=vn:typeof $t=="function"&&$t(vn)};if(!we&&Ze&&typeof Ze!="string"&&typeof Ze!="boolean"&&typeof Ze!="number"){var ce=Ze.props,Yt=ce||{},ge=Yt.style,Ie=Yt.className,xe=Ie===void 0?"":Ie,Ye=(0,R.Z)((0,R.Z)({},ge),Ur),gr=wr?"".concat(wr," ").concat(xe).trim():xe;return P.cloneElement(Ze,{style:Ye,ref:Gr,className:(0,E.Z)(new Set(gr.split(/\s+/))).join(" ").trim()||void 0})}return we?(0,P.createElement)(we,(0,R.Z)((0,R.Z)({ref:Gr},Oe),Dt)):(console.warn("Warning: component is null, children must be ReactElement."),Ze)});an.isTweenOne=!0,an.displayName="TweenOne";var yn=an,bn=["component","componentProps","leave","enter","appear","resetStyle","animatingClassName","onEnd","exclusive"],tt=P.forwardRef(function(Kt,$t){var Et=Kt.component,we=Et===void 0?"div":Et,Dt=Kt.componentProps,Vt=Dt===void 0?{}:Dt,ht=Kt.leave,kt=ht===void 0?{x:-50,opacity:0}:ht,Q=Kt.enter,at=Q===void 0?{x:50,opacity:0,type:"from"}:Q,B=Kt.appear,C=B===void 0?!0:B,I=Kt.resetStyle,H=I===void 0?!0:I,mt=Kt.animatingClassName,Pt=mt===void 0?["tween-one-entering","tween-one-leaving"]:mt,Lt=Kt.onEnd,Jt=Lt===void 0?function(){}:Lt,Oe=Kt.exclusive,ye=Oe===void 0?!1:Oe,Ze=(0,M.Z)(Kt,bn),wr=(0,P.useRef)([]),er=(0,P.useRef)([]),Ur=(0,P.useRef)({}),xn=(0,P.useRef)(!1),rr=(0,P.useRef)([]),xr=(0,P.useRef)({}),Wr=L(x(Kt)),Gr=(0,P.useRef)(Wr),ce=(0,P.useState)(Wr),Yt=(0,w.Z)(ce,2),ge=Yt[0],Ie=Yt[1],xe=function(wn){var Hn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},la=wn.key;return Ur.current[la]=P.createElement(yn,(0,R.Z)((0,R.Z)({},Hn),{},{key:la,component:null}),wn),Ur.current[la]},Ye=function(wn,Hn){var la=wn.replace(Pt[Hn?1:0],"").trim();return la.indexOf(Pt[Hn?0:1])===-1&&(la="".concat(la," ").concat(Pt[Hn?0:1]).trim()),la},gr=function(wn,Hn){var la=b(Hn,wn);return wr.current=[],er.current=[],wn.forEach(function(ba){if(ba){var xa=ba.key,Yi=p(Hn,xa);xa&&Ur.current[xa]&&(Ur.current[xa]=P.cloneElement(Ur.current[xa],{},ba)),!Yi&&xa&&wr.current.push(xa)}}),Hn.forEach(function(ba){if(ba){var xa=ba.key,Yi=p(wn,xa);!Yi&&xa&&(er.current.push(xa),delete Ur.current[xa])}}),la},Mr=function(){if(!Object.keys(xr.current).length&&rr.current.length){var wn=gr(rr.current[rr.current.length-1],Gr.current);Ie(wn),rr.current=[]}},vn=function(wn,Hn,la){var ba=la.targets,xa=(0,m.Z)(ba.className)==="object"&&"baseVal"in ba.className,Yi=Hn==="enter"||Hn==="appear";if(wn&&la.mode==="onTimelineComplete"){if(delete xr.current[wn],xa?ba.className.baseVal=ba.className.baseVal.replace(Pt[Yi?0:1],"").trim():ba.className=ba.className.replace(Pt[Yi?0:1],"").trim(),Yi)wr.current.splice(wr.current.indexOf(wn),1),wr.current.length||Mr();else if(Hn==="leave"&&(er.current.splice(er.current.indexOf(wn),1),Gr.current=Gr.current.filter(function(ti){return wn!==ti.key}),!er.current.length)){var ri=Gr.current.map(function(ti){return ti.key});Object.keys(Ur.current).forEach(function(ti){ri.indexOf(ti)===-1&&delete Ur.current[ti]}),Ie(Gr.current)}Jt({key:wn,type:Hn,target:la.targets})}},Wn=function(wn,Hn,la){var ba=la==="leave"?kt:at;if(la==="appear"){var xa=S(C,wn.key,Hn);ba=xa&&at||null}var Yi=S(ba,wn.key,Hn),ri=function(ao){vn(wn.key,la,ao)},ti=la==="appear"&&!C?wn.props.className:Ye(wn.props.className||"",la==="enter"||la==="appear")||void 0,Mi={key:wn.key,animation:Yi,onChangeTimeline:ri,resetStyle:H,className:ti};return(wn.key&&wr.current.concat(er.current).indexOf(wn.key)>=0||!xn.current&&ba)&&wn.key&&!Ur.current[wn.key]&&(xr.current[wn.key]=la),xe(wn,Mi)};T(function(){if(xn.current){var ea=L(Kt.children).filter(function(Hn){return Hn}),wn=L(Gr.current);Object.keys(xr.current).length&&!ye?rr.current.push(ea):Ie(gr(ea,wn))}},[Kt.children]),T(function(){Mr()}),(0,P.useEffect)(function(){xn.current=!0},[]),Gr.current=ge;var Sn=ge.map(function(ea,wn){if(!ea||!ea.key)return ea;var Hn=ea.key;return er.current.indexOf(Hn)>=0?Wn(ea,er.current.indexOf(Hn),"leave"):(wr.current.indexOf(Hn)>=0||xr.current[Hn]&&er.current.indexOf(Hn)===-1)&&!(xr.current[Hn]==="enter"&&Ur.current[Hn])?Wn(ea,wr.current.indexOf(Hn),"enter"):xn.current?Ur.current[Hn]:Wn(ea,wn,"appear")});return g?we?(0,P.createElement)(we,(0,R.Z)((0,R.Z)((0,R.Z)({},Ze),Vt),{},{ref:$t}),Kt.children):P.createElement(P.Fragment,null,Kt.children):we?(0,P.createElement)(we,(0,R.Z)((0,R.Z)((0,R.Z)({},Ze),Vt),{},{ref:$t}),Sn):Sn[0]?(0,P.cloneElement)(Sn[0],{ref:$t}):null});tt.displayName="TweenOneGroup",tt.isTweenOneGroup=!0;var tr=tt},217857:function(We,G,_){"use strict";var m;m={value:!0};var R=_(667294),w=_(308273);function M(J,ut){var nt=J==null?null:typeof Symbol!="undefined"&&J[Symbol.iterator]||J["@@iterator"];if(nt!=null){var yt,dt,Ft,wt,St=[],et=!0,it=!1;try{if(Ft=(nt=nt.call(J)).next,ut===0){if(Object(nt)!==nt)return;et=!1}else for(;!(et=(yt=Ft.call(nt)).done)&&(St.push(yt.value),St.length!==ut);et=!0);}catch(Tt){it=!0,dt=Tt}finally{try{if(!et&&nt.return!=null&&(wt=nt.return(),Object(wt)!==wt))return}finally{if(it)throw dt}}return St}}function P(J,ut){var nt=Object.keys(J);if(Object.getOwnPropertySymbols){var yt=Object.getOwnPropertySymbols(J);ut&&(yt=yt.filter(function(dt){return Object.getOwnPropertyDescriptor(J,dt).enumerable})),nt.push.apply(nt,yt)}return nt}function L(J){for(var ut=1;ut<arguments.length;ut++){var nt=arguments[ut]!=null?arguments[ut]:{};ut%2?P(Object(nt),!0).forEach(function(yt){p(J,yt,nt[yt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(nt)):P(Object(nt)).forEach(function(yt){Object.defineProperty(J,yt,Object.getOwnPropertyDescriptor(nt,yt))})}return J}function p(J,ut,nt){return ut=l(ut),ut in J?Object.defineProperty(J,ut,{value:nt,enumerable:!0,configurable:!0,writable:!0}):J[ut]=nt,J}function b(){return b=Object.assign?Object.assign.bind():function(J){for(var ut=1;ut<arguments.length;ut++){var nt=arguments[ut];for(var yt in nt)Object.prototype.hasOwnProperty.call(nt,yt)&&(J[yt]=nt[yt])}return J},b.apply(this,arguments)}function S(J,ut){if(J==null)return{};var nt={},yt=Object.keys(J),dt,Ft;for(Ft=0;Ft<yt.length;Ft++)dt=yt[Ft],!(ut.indexOf(dt)>=0)&&(nt[dt]=J[dt]);return nt}function x(J,ut){if(J==null)return{};var nt=S(J,ut),yt,dt;if(Object.getOwnPropertySymbols){var Ft=Object.getOwnPropertySymbols(J);for(dt=0;dt<Ft.length;dt++)yt=Ft[dt],!(ut.indexOf(yt)>=0)&&Object.prototype.propertyIsEnumerable.call(J,yt)&&(nt[yt]=J[yt])}return nt}function g(J,ut){return T(J)||M(J,ut)||E(J,ut)||k()}function T(J){if(Array.isArray(J))return J}function E(J,ut){if(J){if(typeof J=="string")return O(J,ut);var nt=Object.prototype.toString.call(J).slice(8,-1);if(nt==="Object"&&J.constructor&&(nt=J.constructor.name),nt==="Map"||nt==="Set")return Array.from(J);if(nt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nt))return O(J,ut)}}function O(J,ut){(ut==null||ut>J.length)&&(ut=J.length);for(var nt=0,yt=new Array(ut);nt<ut;nt++)yt[nt]=J[nt];return yt}function k(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y(J,ut){if(typeof J!="object"||J===null)return J;var nt=J[Symbol.toPrimitive];if(nt!==void 0){var yt=nt.call(J,ut||"default");if(typeof yt!="object")return yt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(ut==="string"?String:Number)(J)}function l(J){var ut=y(J,"string");return typeof ut=="symbol"?ut:String(ut)}var U=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined"?R.useLayoutEffect:R.useEffect;function X(J){var ut=R.useRef(J);return U(function(){ut.current=J}),R.useCallback(function(){for(var nt=arguments.length,yt=new Array(nt),dt=0;dt<nt;dt++)yt[dt]=arguments[dt];return ut.current.apply(void 0,yt)},[])}var F=function(ut,nt){var yt=nt.decimal,dt=nt.decimals,Ft=nt.duration,wt=nt.easingFn,St=nt.end,et=nt.formattingFn,it=nt.numerals,Tt=nt.prefix,Nt=nt.separator,st=nt.start,xt=nt.suffix,zt=nt.useEasing,Wt=nt.useGrouping,_t=nt.useIndianSeparators,Xt=nt.enableScrollSpy,te=nt.scrollSpyDelay,ue=nt.scrollSpyOnce;return new w.CountUp(ut,St,{startVal:st,duration:Ft,decimal:yt,decimalPlaces:dt,easingFn:wt,formattingFn:et,numerals:it,separator:Nt,prefix:Tt,suffix:xt,useEasing:zt,useIndianSeparators:_t,useGrouping:Wt,enableScrollSpy:Xt,scrollSpyDelay:te,scrollSpyOnce:ue})},W=["ref","startOnMount","enableReinitialize","delay","onEnd","onStart","onPauseResume","onReset","onUpdate"],j={decimal:".",separator:",",delay:null,prefix:"",suffix:"",duration:2,start:0,decimals:0,startOnMount:!0,enableReinitialize:!0,useEasing:!0,useGrouping:!0,useIndianSeparators:!1},V=function(ut){var nt=Object.fromEntries(Object.entries(ut).filter(function(de){var ze=g(de,2),be=ze[1];return be!==void 0})),yt=R.useMemo(function(){return L(L({},j),nt)},[ut]),dt=yt.ref,Ft=yt.startOnMount,wt=yt.enableReinitialize,St=yt.delay,et=yt.onEnd,it=yt.onStart,Tt=yt.onPauseResume,Nt=yt.onReset,st=yt.onUpdate,xt=x(yt,W),zt=R.useRef(),Wt=R.useRef(),_t=R.useRef(!1),Xt=X(function(){return F(typeof dt=="string"?dt:dt.current,xt)}),te=X(function(de){var ze=zt.current;if(ze&&!de)return ze;var be=Xt();return zt.current=be,be}),ue=X(function(){var de=function(){return te(!0).start(function(){et==null||et({pauseResume:fe,reset:Gt,start:Ne,update:ae})})};St&&St>0?Wt.current=setTimeout(de,St*1e3):de(),it==null||it({pauseResume:fe,reset:Gt,update:ae})}),fe=X(function(){te().pauseResume(),Tt==null||Tt({reset:Gt,start:Ne,update:ae})}),Gt=X(function(){te().el&&(Wt.current&&clearTimeout(Wt.current),te().reset(),Nt==null||Nt({pauseResume:fe,start:Ne,update:ae}))}),ae=X(function(de){te().update(de),st==null||st({pauseResume:fe,reset:Gt,start:Ne})}),Ne=X(function(){Gt(),ue()}),ee=X(function(de){Ft&&(de&&Gt(),ue())});return R.useEffect(function(){_t.current?wt&&ee(!0):(_t.current=!0,ee())},[wt,_t,ee,St,ut.start,ut.suffix,ut.prefix,ut.duration,ut.separator,ut.decimals,ut.decimal,ut.formattingFn]),R.useEffect(function(){return function(){Gt()}},[Gt]),{start:Ne,pauseResume:fe,reset:Gt,update:ae,getCountUp:te}},q=["className","redraw","containerProps","children","style"],$=function(ut){var nt=ut.className,yt=ut.redraw,dt=ut.containerProps,Ft=ut.children,wt=ut.style,St=x(ut,q),et=R.useRef(null),it=R.useRef(!1),Tt=V(L(L({},St),{},{ref:et,startOnMount:typeof Ft!="function"||ut.delay===0,enableReinitialize:!1})),Nt=Tt.start,st=Tt.reset,xt=Tt.update,zt=Tt.pauseResume,Wt=Tt.getCountUp,_t=X(function(){Nt()}),Xt=X(function(fe){ut.preserveValue||st(),xt(fe)}),te=X(function(){if(typeof ut.children=="function"&&!(et.current instanceof Element)){console.error(`Couldn't find attached element to hook the CountUp instance into! Try to attach "containerRef" from the render prop to a an Element, eg. <span ref={containerRef} />.`);return}Wt()});R.useEffect(function(){te()},[te]),R.useEffect(function(){it.current&&Xt(ut.end)},[ut.end,Xt]);var ue=yt&&ut;return R.useEffect(function(){yt&&it.current&&_t()},[_t,yt,ue]),R.useEffect(function(){!yt&&it.current&&_t()},[_t,yt,ut.start,ut.suffix,ut.prefix,ut.duration,ut.separator,ut.decimals,ut.decimal,ut.className,ut.formattingFn]),R.useEffect(function(){it.current=!0},[]),typeof Ft=="function"?Ft({countUpRef:et,start:Nt,reset:st,update:xt,pauseResume:zt,getCountUp:Wt}):R.createElement("span",b({className:nt,ref:et,style:wt},dt),typeof ut.start!="undefined"?Wt().formattingFn(ut.start):"")};G.ZP=$,m=V},175668:function(We,G,_){"use strict";function m(st){"@babel/helpers - typeof";return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(xt){return typeof xt}:function(xt){return xt&&typeof Symbol=="function"&&xt.constructor===Symbol&&xt!==Symbol.prototype?"symbol":typeof xt},m(st)}Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"DraggableCore",{enumerable:!0,get:function(){return S.default}}),G.default=void 0;var R=O(_(667294)),w=T(_(45697)),M=T(_(973935)),P=T(_(386010)),L=_(381825),p=_(102849),b=_(909280),S=T(_(180783)),x=T(_(955904)),g=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function T(st){return st&&st.__esModule?st:{default:st}}function E(st){if(typeof WeakMap!="function")return null;var xt=new WeakMap,zt=new WeakMap;return(E=function(_t){return _t?zt:xt})(st)}function O(st,xt){if(!xt&&st&&st.__esModule)return st;if(st===null||m(st)!=="object"&&typeof st!="function")return{default:st};var zt=E(xt);if(zt&&zt.has(st))return zt.get(st);var Wt={},_t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Xt in st)if(Xt!=="default"&&Object.prototype.hasOwnProperty.call(st,Xt)){var te=_t?Object.getOwnPropertyDescriptor(st,Xt):null;te&&(te.get||te.set)?Object.defineProperty(Wt,Xt,te):Wt[Xt]=st[Xt]}return Wt.default=st,zt&&zt.set(st,Wt),Wt}function k(){return k=Object.assign||function(st){for(var xt=1;xt<arguments.length;xt++){var zt=arguments[xt];for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&(st[Wt]=zt[Wt])}return st},k.apply(this,arguments)}function y(st,xt){if(st==null)return{};var zt=l(st,xt),Wt,_t;if(Object.getOwnPropertySymbols){var Xt=Object.getOwnPropertySymbols(st);for(_t=0;_t<Xt.length;_t++)Wt=Xt[_t],!(xt.indexOf(Wt)>=0)&&Object.prototype.propertyIsEnumerable.call(st,Wt)&&(zt[Wt]=st[Wt])}return zt}function l(st,xt){if(st==null)return{};var zt={},Wt=Object.keys(st),_t,Xt;for(Xt=0;Xt<Wt.length;Xt++)_t=Wt[Xt],!(xt.indexOf(_t)>=0)&&(zt[_t]=st[_t]);return zt}function U(st,xt){var zt=Object.keys(st);if(Object.getOwnPropertySymbols){var Wt=Object.getOwnPropertySymbols(st);xt&&(Wt=Wt.filter(function(_t){return Object.getOwnPropertyDescriptor(st,_t).enumerable})),zt.push.apply(zt,Wt)}return zt}function X(st){for(var xt=1;xt<arguments.length;xt++){var zt=arguments[xt]!=null?arguments[xt]:{};xt%2?U(Object(zt),!0).forEach(function(Wt){Tt(st,Wt,zt[Wt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(st,Object.getOwnPropertyDescriptors(zt)):U(Object(zt)).forEach(function(Wt){Object.defineProperty(st,Wt,Object.getOwnPropertyDescriptor(zt,Wt))})}return st}function F(st,xt){return $(st)||q(st,xt)||j(st,xt)||W()}function W(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j(st,xt){if(st){if(typeof st=="string")return V(st,xt);var zt=Object.prototype.toString.call(st).slice(8,-1);if(zt==="Object"&&st.constructor&&(zt=st.constructor.name),zt==="Map"||zt==="Set")return Array.from(st);if(zt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(zt))return V(st,xt)}}function V(st,xt){(xt==null||xt>st.length)&&(xt=st.length);for(var zt=0,Wt=new Array(xt);zt<xt;zt++)Wt[zt]=st[zt];return Wt}function q(st,xt){var zt=st==null?null:typeof Symbol!="undefined"&&st[Symbol.iterator]||st["@@iterator"];if(zt!=null){var Wt=[],_t=!0,Xt=!1,te,ue;try{for(zt=zt.call(st);!(_t=(te=zt.next()).done)&&(Wt.push(te.value),!(xt&&Wt.length===xt));_t=!0);}catch(fe){Xt=!0,ue=fe}finally{try{!_t&&zt.return!=null&&zt.return()}finally{if(Xt)throw ue}}return Wt}}function $(st){if(Array.isArray(st))return st}function J(st,xt){if(!(st instanceof xt))throw new TypeError("Cannot call a class as a function")}function ut(st,xt){for(var zt=0;zt<xt.length;zt++){var Wt=xt[zt];Wt.enumerable=Wt.enumerable||!1,Wt.configurable=!0,"value"in Wt&&(Wt.writable=!0),Object.defineProperty(st,Wt.key,Wt)}}function nt(st,xt,zt){return xt&&ut(st.prototype,xt),zt&&ut(st,zt),Object.defineProperty(st,"prototype",{writable:!1}),st}function yt(st,xt){if(typeof xt!="function"&&xt!==null)throw new TypeError("Super expression must either be null or a function");st.prototype=Object.create(xt&&xt.prototype,{constructor:{value:st,writable:!0,configurable:!0}}),Object.defineProperty(st,"prototype",{writable:!1}),xt&&dt(st,xt)}function dt(st,xt){return dt=Object.setPrototypeOf||function(Wt,_t){return Wt.__proto__=_t,Wt},dt(st,xt)}function Ft(st){var xt=et();return function(){var Wt=it(st),_t;if(xt){var Xt=it(this).constructor;_t=Reflect.construct(Wt,arguments,Xt)}else _t=Wt.apply(this,arguments);return wt(this,_t)}}function wt(st,xt){if(xt&&(m(xt)==="object"||typeof xt=="function"))return xt;if(xt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return St(st)}function St(st){if(st===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return st}function et(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(st){return!1}}function it(st){return it=Object.setPrototypeOf?Object.getPrototypeOf:function(zt){return zt.__proto__||Object.getPrototypeOf(zt)},it(st)}function Tt(st,xt,zt){return xt in st?Object.defineProperty(st,xt,{value:zt,enumerable:!0,configurable:!0,writable:!0}):st[xt]=zt,st}var Nt=function(st){yt(zt,st);var xt=Ft(zt);function zt(Wt){var _t;return J(this,zt),_t=xt.call(this,Wt),Tt(St(_t),"onDragStart",function(Xt,te){(0,x.default)("Draggable: onDragStart: %j",te);var ue=_t.props.onStart(Xt,(0,p.createDraggableData)(St(_t),te));if(ue===!1)return!1;_t.setState({dragging:!0,dragged:!0})}),Tt(St(_t),"onDrag",function(Xt,te){if(!_t.state.dragging)return!1;(0,x.default)("Draggable: onDrag: %j",te);var ue=(0,p.createDraggableData)(St(_t),te),fe={x:ue.x,y:ue.y};if(_t.props.bounds){var Gt=fe.x,ae=fe.y;fe.x+=_t.state.slackX,fe.y+=_t.state.slackY;var Ne=(0,p.getBoundPosition)(St(_t),fe.x,fe.y),ee=F(Ne,2),de=ee[0],ze=ee[1];fe.x=de,fe.y=ze,fe.slackX=_t.state.slackX+(Gt-fe.x),fe.slackY=_t.state.slackY+(ae-fe.y),ue.x=fe.x,ue.y=fe.y,ue.deltaX=fe.x-_t.state.x,ue.deltaY=fe.y-_t.state.y}var be=_t.props.onDrag(Xt,ue);if(be===!1)return!1;_t.setState(fe)}),Tt(St(_t),"onDragStop",function(Xt,te){if(!_t.state.dragging)return!1;var ue=_t.props.onStop(Xt,(0,p.createDraggableData)(St(_t),te));if(ue===!1)return!1;(0,x.default)("Draggable: onDragStop: %j",te);var fe={dragging:!1,slackX:0,slackY:0},Gt=!!_t.props.position;if(Gt){var ae=_t.props.position,Ne=ae.x,ee=ae.y;fe.x=Ne,fe.y=ee}_t.setState(fe)}),_t.state={dragging:!1,dragged:!1,x:Wt.position?Wt.position.x:Wt.defaultPosition.x,y:Wt.position?Wt.position.y:Wt.defaultPosition.y,prevPropsPosition:X({},Wt.position),slackX:0,slackY:0,isElementSVG:!1},Wt.position&&!(Wt.onDrag||Wt.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),_t}return nt(zt,[{key:"componentDidMount",value:function(){typeof window.SVGElement!="undefined"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var _t,Xt,te;return(_t=(Xt=this.props)===null||Xt===void 0||(te=Xt.nodeRef)===null||te===void 0?void 0:te.current)!==null&&_t!==void 0?_t:M.default.findDOMNode(this)}},{key:"render",value:function(){var _t,Xt=this.props,te=Xt.axis,ue=Xt.bounds,fe=Xt.children,Gt=Xt.defaultPosition,ae=Xt.defaultClassName,Ne=Xt.defaultClassNameDragging,ee=Xt.defaultClassNameDragged,de=Xt.position,ze=Xt.positionOffset,be=Xt.scale,ke=y(Xt,g),he={},vt=null,ie=!!de,Pe=!ie||this.state.dragging,qe=de||Gt,Qe={x:(0,p.canDragX)(this)&&Pe?this.state.x:qe.x,y:(0,p.canDragY)(this)&&Pe?this.state.y:qe.y};this.state.isElementSVG?vt=(0,L.createSVGTransform)(Qe,ze):he=(0,L.createCSSTransform)(Qe,ze);var lr=(0,P.default)(fe.props.className||"",ae,(_t={},Tt(_t,Ne,this.state.dragging),Tt(_t,ee,this.state.dragged),_t));return R.createElement(S.default,k({},ke,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),R.cloneElement(R.Children.only(fe),{className:lr,style:X(X({},fe.props.style),he),transform:vt}))}}],[{key:"getDerivedStateFromProps",value:function(_t,Xt){var te=_t.position,ue=Xt.prevPropsPosition;return te&&(!ue||te.x!==ue.x||te.y!==ue.y)?((0,x.default)("Draggable: getDerivedStateFromProps %j",{position:te,prevPropsPosition:ue}),{x:te.x,y:te.y,prevPropsPosition:X({},te)}):null}}]),zt}(R.Component);G.default=Nt,Tt(Nt,"displayName","Draggable"),Tt(Nt,"propTypes",X(X({},S.default.propTypes),{},{axis:w.default.oneOf(["both","x","y","none"]),bounds:w.default.oneOfType([w.default.shape({left:w.default.number,right:w.default.number,top:w.default.number,bottom:w.default.number}),w.default.string,w.default.oneOf([!1])]),defaultClassName:w.default.string,defaultClassNameDragging:w.default.string,defaultClassNameDragged:w.default.string,defaultPosition:w.default.shape({x:w.default.number,y:w.default.number}),positionOffset:w.default.shape({x:w.default.oneOfType([w.default.number,w.default.string]),y:w.default.oneOfType([w.default.number,w.default.string])}),position:w.default.shape({x:w.default.number,y:w.default.number}),className:b.dontSetMe,style:b.dontSetMe,transform:b.dontSetMe})),Tt(Nt,"defaultProps",X(X({},S.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))},180783:function(We,G,_){"use strict";function m(wt){"@babel/helpers - typeof";return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(St){return typeof St}:function(St){return St&&typeof Symbol=="function"&&St.constructor===Symbol&&St!==Symbol.prototype?"symbol":typeof St},m(wt)}Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var R=g(_(667294)),w=S(_(45697)),M=S(_(973935)),P=_(381825),L=_(102849),p=_(909280),b=S(_(955904));function S(wt){return wt&&wt.__esModule?wt:{default:wt}}function x(wt){if(typeof WeakMap!="function")return null;var St=new WeakMap,et=new WeakMap;return(x=function(Tt){return Tt?et:St})(wt)}function g(wt,St){if(!St&&wt&&wt.__esModule)return wt;if(wt===null||m(wt)!=="object"&&typeof wt!="function")return{default:wt};var et=x(St);if(et&&et.has(wt))return et.get(wt);var it={},Tt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Nt in wt)if(Nt!=="default"&&Object.prototype.hasOwnProperty.call(wt,Nt)){var st=Tt?Object.getOwnPropertyDescriptor(wt,Nt):null;st&&(st.get||st.set)?Object.defineProperty(it,Nt,st):it[Nt]=wt[Nt]}return it.default=wt,et&&et.set(wt,it),it}function T(wt,St){return l(wt)||y(wt,St)||O(wt,St)||E()}function E(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O(wt,St){if(wt){if(typeof wt=="string")return k(wt,St);var et=Object.prototype.toString.call(wt).slice(8,-1);if(et==="Object"&&wt.constructor&&(et=wt.constructor.name),et==="Map"||et==="Set")return Array.from(wt);if(et==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(et))return k(wt,St)}}function k(wt,St){(St==null||St>wt.length)&&(St=wt.length);for(var et=0,it=new Array(St);et<St;et++)it[et]=wt[et];return it}function y(wt,St){var et=wt==null?null:typeof Symbol!="undefined"&&wt[Symbol.iterator]||wt["@@iterator"];if(et!=null){var it=[],Tt=!0,Nt=!1,st,xt;try{for(et=et.call(wt);!(Tt=(st=et.next()).done)&&(it.push(st.value),!(St&&it.length===St));Tt=!0);}catch(zt){Nt=!0,xt=zt}finally{try{!Tt&&et.return!=null&&et.return()}finally{if(Nt)throw xt}}return it}}function l(wt){if(Array.isArray(wt))return wt}function U(wt,St){if(!(wt instanceof St))throw new TypeError("Cannot call a class as a function")}function X(wt,St){for(var et=0;et<St.length;et++){var it=St[et];it.enumerable=it.enumerable||!1,it.configurable=!0,"value"in it&&(it.writable=!0),Object.defineProperty(wt,it.key,it)}}function F(wt,St,et){return St&&X(wt.prototype,St),et&&X(wt,et),Object.defineProperty(wt,"prototype",{writable:!1}),wt}function W(wt,St){if(typeof St!="function"&&St!==null)throw new TypeError("Super expression must either be null or a function");wt.prototype=Object.create(St&&St.prototype,{constructor:{value:wt,writable:!0,configurable:!0}}),Object.defineProperty(wt,"prototype",{writable:!1}),St&&j(wt,St)}function j(wt,St){return j=Object.setPrototypeOf||function(it,Tt){return it.__proto__=Tt,it},j(wt,St)}function V(wt){var St=J();return function(){var it=ut(wt),Tt;if(St){var Nt=ut(this).constructor;Tt=Reflect.construct(it,arguments,Nt)}else Tt=it.apply(this,arguments);return q(this,Tt)}}function q(wt,St){if(St&&(m(St)==="object"||typeof St=="function"))return St;if(St!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $(wt)}function $(wt){if(wt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return wt}function J(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(wt){return!1}}function ut(wt){return ut=Object.setPrototypeOf?Object.getPrototypeOf:function(et){return et.__proto__||Object.getPrototypeOf(et)},ut(wt)}function nt(wt,St,et){return St in wt?Object.defineProperty(wt,St,{value:et,enumerable:!0,configurable:!0,writable:!0}):wt[St]=et,wt}var yt={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},dt=yt.mouse,Ft=function(wt){W(et,wt);var St=V(et);function et(){var it;U(this,et);for(var Tt=arguments.length,Nt=new Array(Tt),st=0;st<Tt;st++)Nt[st]=arguments[st];return it=St.call.apply(St,[this].concat(Nt)),nt($(it),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),nt($(it),"mounted",!1),nt($(it),"handleDragStart",function(xt){if(it.props.onMouseDown(xt),!it.props.allowAnyClick&&typeof xt.button=="number"&&xt.button!==0)return!1;var zt=it.findDOMNode();if(!zt||!zt.ownerDocument||!zt.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var Wt=zt.ownerDocument;if(!(it.props.disabled||!(xt.target instanceof Wt.defaultView.Node)||it.props.handle&&!(0,P.matchesSelectorAndParentsTo)(xt.target,it.props.handle,zt)||it.props.cancel&&(0,P.matchesSelectorAndParentsTo)(xt.target,it.props.cancel,zt))){xt.type==="touchstart"&&xt.preventDefault();var _t=(0,P.getTouchIdentifier)(xt);it.setState({touchIdentifier:_t});var Xt=(0,L.getControlPosition)(xt,_t,$(it));if(Xt!=null){var te=Xt.x,ue=Xt.y,fe=(0,L.createCoreData)($(it),te,ue);(0,b.default)("DraggableCore: handleDragStart: %j",fe),(0,b.default)("calling",it.props.onStart);var Gt=it.props.onStart(xt,fe);Gt===!1||it.mounted===!1||(it.props.enableUserSelectHack&&(0,P.addUserSelectStyles)(Wt),it.setState({dragging:!0,lastX:te,lastY:ue}),(0,P.addEvent)(Wt,dt.move,it.handleDrag),(0,P.addEvent)(Wt,dt.stop,it.handleDragStop))}}}),nt($(it),"handleDrag",function(xt){var zt=(0,L.getControlPosition)(xt,it.state.touchIdentifier,$(it));if(zt!=null){var Wt=zt.x,_t=zt.y;if(Array.isArray(it.props.grid)){var Xt=Wt-it.state.lastX,te=_t-it.state.lastY,ue=(0,L.snapToGrid)(it.props.grid,Xt,te),fe=T(ue,2);if(Xt=fe[0],te=fe[1],!Xt&&!te)return;Wt=it.state.lastX+Xt,_t=it.state.lastY+te}var Gt=(0,L.createCoreData)($(it),Wt,_t);(0,b.default)("DraggableCore: handleDrag: %j",Gt);var ae=it.props.onDrag(xt,Gt);if(ae===!1||it.mounted===!1){try{it.handleDragStop(new MouseEvent("mouseup"))}catch(ee){var Ne=document.createEvent("MouseEvents");Ne.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),it.handleDragStop(Ne)}return}it.setState({lastX:Wt,lastY:_t})}}),nt($(it),"handleDragStop",function(xt){if(it.state.dragging){var zt=(0,L.getControlPosition)(xt,it.state.touchIdentifier,$(it));if(zt!=null){var Wt=zt.x,_t=zt.y;if(Array.isArray(it.props.grid)){var Xt=Wt-it.state.lastX||0,te=_t-it.state.lastY||0,ue=(0,L.snapToGrid)(it.props.grid,Xt,te),fe=T(ue,2);Xt=fe[0],te=fe[1],Wt=it.state.lastX+Xt,_t=it.state.lastY+te}var Gt=(0,L.createCoreData)($(it),Wt,_t),ae=it.props.onStop(xt,Gt);if(ae===!1||it.mounted===!1)return!1;var Ne=it.findDOMNode();Ne&&it.props.enableUserSelectHack&&(0,P.removeUserSelectStyles)(Ne.ownerDocument),(0,b.default)("DraggableCore: handleDragStop: %j",Gt),it.setState({dragging:!1,lastX:NaN,lastY:NaN}),Ne&&((0,b.default)("DraggableCore: Removing handlers"),(0,P.removeEvent)(Ne.ownerDocument,dt.move,it.handleDrag),(0,P.removeEvent)(Ne.ownerDocument,dt.stop,it.handleDragStop))}}}),nt($(it),"onMouseDown",function(xt){return dt=yt.mouse,it.handleDragStart(xt)}),nt($(it),"onMouseUp",function(xt){return dt=yt.mouse,it.handleDragStop(xt)}),nt($(it),"onTouchStart",function(xt){return dt=yt.touch,it.handleDragStart(xt)}),nt($(it),"onTouchEnd",function(xt){return dt=yt.touch,it.handleDragStop(xt)}),it}return F(et,[{key:"componentDidMount",value:function(){this.mounted=!0;var Tt=this.findDOMNode();Tt&&(0,P.addEvent)(Tt,yt.touch.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var Tt=this.findDOMNode();if(Tt){var Nt=Tt.ownerDocument;(0,P.removeEvent)(Nt,yt.mouse.move,this.handleDrag),(0,P.removeEvent)(Nt,yt.touch.move,this.handleDrag),(0,P.removeEvent)(Nt,yt.mouse.stop,this.handleDragStop),(0,P.removeEvent)(Nt,yt.touch.stop,this.handleDragStop),(0,P.removeEvent)(Tt,yt.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,P.removeUserSelectStyles)(Nt)}}},{key:"findDOMNode",value:function(){var Tt,Nt,st;return(Tt=this.props)!==null&&Tt!==void 0&&Tt.nodeRef?(Nt=this.props)===null||Nt===void 0||(st=Nt.nodeRef)===null||st===void 0?void 0:st.current:M.default.findDOMNode(this)}},{key:"render",value:function(){return R.cloneElement(R.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),et}(R.Component);G.default=Ft,nt(Ft,"displayName","DraggableCore"),nt(Ft,"propTypes",{allowAnyClick:w.default.bool,disabled:w.default.bool,enableUserSelectHack:w.default.bool,offsetParent:function(St,et){if(St[et]&&St[et].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:w.default.arrayOf(w.default.number),handle:w.default.string,cancel:w.default.string,nodeRef:w.default.object,onStart:w.default.func,onDrag:w.default.func,onStop:w.default.func,onMouseDown:w.default.func,scale:w.default.number,className:p.dontSetMe,style:p.dontSetMe,transform:p.dontSetMe}),nt(Ft,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})},861193:function(We,G,_){"use strict";var m=_(175668),R=m.default,w=m.DraggableCore;We.exports=R,We.exports.default=R,We.exports.DraggableCore=w},381825:function(We,G,_){"use strict";function m(nt){"@babel/helpers - typeof";return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(yt){return typeof yt}:function(yt){return yt&&typeof Symbol=="function"&&yt.constructor===Symbol&&yt!==Symbol.prototype?"symbol":typeof yt},m(nt)}Object.defineProperty(G,"__esModule",{value:!0}),G.addClassName=J,G.addEvent=T,G.addUserSelectStyles=q,G.createCSSTransform=X,G.createSVGTransform=F,G.getTouch=j,G.getTouchIdentifier=V,G.getTranslation=W,G.innerHeight=y,G.innerWidth=l,G.matchesSelector=x,G.matchesSelectorAndParentsTo=g,G.offsetXYFromParent=U,G.outerHeight=O,G.outerWidth=k,G.removeClassName=ut,G.removeEvent=E,G.removeUserSelectStyles=$;var R=_(909280),w=P(_(138650));function M(nt){if(typeof WeakMap!="function")return null;var yt=new WeakMap,dt=new WeakMap;return(M=function(wt){return wt?dt:yt})(nt)}function P(nt,yt){if(!yt&&nt&&nt.__esModule)return nt;if(nt===null||m(nt)!=="object"&&typeof nt!="function")return{default:nt};var dt=M(yt);if(dt&&dt.has(nt))return dt.get(nt);var Ft={},wt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var St in nt)if(St!=="default"&&Object.prototype.hasOwnProperty.call(nt,St)){var et=wt?Object.getOwnPropertyDescriptor(nt,St):null;et&&(et.get||et.set)?Object.defineProperty(Ft,St,et):Ft[St]=nt[St]}return Ft.default=nt,dt&&dt.set(nt,Ft),Ft}function L(nt,yt){var dt=Object.keys(nt);if(Object.getOwnPropertySymbols){var Ft=Object.getOwnPropertySymbols(nt);yt&&(Ft=Ft.filter(function(wt){return Object.getOwnPropertyDescriptor(nt,wt).enumerable})),dt.push.apply(dt,Ft)}return dt}function p(nt){for(var yt=1;yt<arguments.length;yt++){var dt=arguments[yt]!=null?arguments[yt]:{};yt%2?L(Object(dt),!0).forEach(function(Ft){b(nt,Ft,dt[Ft])}):Object.getOwnPropertyDescriptors?Object.defineProperties(nt,Object.getOwnPropertyDescriptors(dt)):L(Object(dt)).forEach(function(Ft){Object.defineProperty(nt,Ft,Object.getOwnPropertyDescriptor(dt,Ft))})}return nt}function b(nt,yt,dt){return yt in nt?Object.defineProperty(nt,yt,{value:dt,enumerable:!0,configurable:!0,writable:!0}):nt[yt]=dt,nt}var S="";function x(nt,yt){return S||(S=(0,R.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(dt){return(0,R.isFunction)(nt[dt])})),(0,R.isFunction)(nt[S])?nt[S](yt):!1}function g(nt,yt,dt){var Ft=nt;do{if(x(Ft,yt))return!0;if(Ft===dt)return!1;Ft=Ft.parentNode}while(Ft);return!1}function T(nt,yt,dt,Ft){if(nt){var wt=p({capture:!0},Ft);nt.addEventListener?nt.addEventListener(yt,dt,wt):nt.attachEvent?nt.attachEvent("on"+yt,dt):nt["on"+yt]=dt}}function E(nt,yt,dt,Ft){if(nt){var wt=p({capture:!0},Ft);nt.removeEventListener?nt.removeEventListener(yt,dt,wt):nt.detachEvent?nt.detachEvent("on"+yt,dt):nt["on"+yt]=null}}function O(nt){var yt=nt.clientHeight,dt=nt.ownerDocument.defaultView.getComputedStyle(nt);return yt+=(0,R.int)(dt.borderTopWidth),yt+=(0,R.int)(dt.borderBottomWidth),yt}function k(nt){var yt=nt.clientWidth,dt=nt.ownerDocument.defaultView.getComputedStyle(nt);return yt+=(0,R.int)(dt.borderLeftWidth),yt+=(0,R.int)(dt.borderRightWidth),yt}function y(nt){var yt=nt.clientHeight,dt=nt.ownerDocument.defaultView.getComputedStyle(nt);return yt-=(0,R.int)(dt.paddingTop),yt-=(0,R.int)(dt.paddingBottom),yt}function l(nt){var yt=nt.clientWidth,dt=nt.ownerDocument.defaultView.getComputedStyle(nt);return yt-=(0,R.int)(dt.paddingLeft),yt-=(0,R.int)(dt.paddingRight),yt}function U(nt,yt,dt){var Ft=yt===yt.ownerDocument.body,wt=Ft?{left:0,top:0}:yt.getBoundingClientRect(),St=(nt.clientX+yt.scrollLeft-wt.left)/dt,et=(nt.clientY+yt.scrollTop-wt.top)/dt;return{x:St,y:et}}function X(nt,yt){var dt=W(nt,yt,"px");return b({},(0,w.browserPrefixToKey)("transform",w.default),dt)}function F(nt,yt){var dt=W(nt,yt,"");return dt}function W(nt,yt,dt){var Ft=nt.x,wt=nt.y,St="translate(".concat(Ft).concat(dt,",").concat(wt).concat(dt,")");if(yt){var et="".concat(typeof yt.x=="string"?yt.x:yt.x+dt),it="".concat(typeof yt.y=="string"?yt.y:yt.y+dt);St="translate(".concat(et,", ").concat(it,")")+St}return St}function j(nt,yt){return nt.targetTouches&&(0,R.findInArray)(nt.targetTouches,function(dt){return yt===dt.identifier})||nt.changedTouches&&(0,R.findInArray)(nt.changedTouches,function(dt){return yt===dt.identifier})}function V(nt){if(nt.targetTouches&&nt.targetTouches[0])return nt.targetTouches[0].identifier;if(nt.changedTouches&&nt.changedTouches[0])return nt.changedTouches[0].identifier}function q(nt){if(nt){var yt=nt.getElementById("react-draggable-style-el");yt||(yt=nt.createElement("style"),yt.type="text/css",yt.id="react-draggable-style-el",yt.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,yt.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,nt.getElementsByTagName("head")[0].appendChild(yt)),nt.body&&J(nt.body,"react-draggable-transparent-selection")}}function $(nt){if(nt)try{if(nt.body&&ut(nt.body,"react-draggable-transparent-selection"),nt.selection)nt.selection.empty();else{var yt=(nt.defaultView||window).getSelection();yt&&yt.type!=="Caret"&&yt.removeAllRanges()}}catch(dt){}}function J(nt,yt){nt.classList?nt.classList.add(yt):nt.className.match(new RegExp("(?:^|\\s)".concat(yt,"(?!\\S)")))||(nt.className+=" ".concat(yt))}function ut(nt,yt){nt.classList?nt.classList.remove(yt):nt.className=nt.className.replace(new RegExp("(?:^|\\s)".concat(yt,"(?!\\S)"),"g"),"")}},138650:function(We,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.browserPrefixToKey=R,G.browserPrefixToStyle=w,G.default=void 0,G.getPrefix=m;var _=["Moz","Webkit","O","ms"];function m(){var L,p,b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window=="undefined")return"";var S=(L=window.document)===null||L===void 0||(p=L.documentElement)===null||p===void 0?void 0:p.style;if(!S||b in S)return"";for(var x=0;x<_.length;x++)if(R(b,_[x])in S)return _[x];return""}function R(L,p){return p?"".concat(p).concat(M(L)):L}function w(L,p){return p?"-".concat(p.toLowerCase(),"-").concat(L):L}function M(L){for(var p="",b=!0,S=0;S<L.length;S++)b?(p+=L[S].toUpperCase(),b=!1):L[S]==="-"?b=!0:p+=L[S];return p}var P=m();G.default=P},955904:function(We,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=_;function _(){var m}},102849:function(We,G,_){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.canDragX=P,G.canDragY=L,G.createCoreData=b,G.createDraggableData=S,G.getBoundPosition=w,G.getControlPosition=p,G.snapToGrid=M;var m=_(909280),R=_(381825);function w(T,E,O){if(!T.props.bounds)return[E,O];var k=T.props.bounds;k=typeof k=="string"?k:x(k);var y=g(T);if(typeof k=="string"){var l=y.ownerDocument,U=l.defaultView,X;if(k==="parent"?X=y.parentNode:X=l.querySelector(k),!(X instanceof U.HTMLElement))throw new Error('Bounds selector "'+k+'" could not find an element.');var F=X,W=U.getComputedStyle(y),j=U.getComputedStyle(F);k={left:-y.offsetLeft+(0,m.int)(j.paddingLeft)+(0,m.int)(W.marginLeft),top:-y.offsetTop+(0,m.int)(j.paddingTop)+(0,m.int)(W.marginTop),right:(0,R.innerWidth)(F)-(0,R.outerWidth)(y)-y.offsetLeft+(0,m.int)(j.paddingRight)-(0,m.int)(W.marginRight),bottom:(0,R.innerHeight)(F)-(0,R.outerHeight)(y)-y.offsetTop+(0,m.int)(j.paddingBottom)-(0,m.int)(W.marginBottom)}}return(0,m.isNum)(k.right)&&(E=Math.min(E,k.right)),(0,m.isNum)(k.bottom)&&(O=Math.min(O,k.bottom)),(0,m.isNum)(k.left)&&(E=Math.max(E,k.left)),(0,m.isNum)(k.top)&&(O=Math.max(O,k.top)),[E,O]}function M(T,E,O){var k=Math.round(E/T[0])*T[0],y=Math.round(O/T[1])*T[1];return[k,y]}function P(T){return T.props.axis==="both"||T.props.axis==="x"}function L(T){return T.props.axis==="both"||T.props.axis==="y"}function p(T,E,O){var k=typeof E=="number"?(0,R.getTouch)(T,E):null;if(typeof E=="number"&&!k)return null;var y=g(O),l=O.props.offsetParent||y.offsetParent||y.ownerDocument.body;return(0,R.offsetXYFromParent)(k||T,l,O.props.scale)}function b(T,E,O){var k=T.state,y=!(0,m.isNum)(k.lastX),l=g(T);return y?{node:l,deltaX:0,deltaY:0,lastX:E,lastY:O,x:E,y:O}:{node:l,deltaX:E-k.lastX,deltaY:O-k.lastY,lastX:k.lastX,lastY:k.lastY,x:E,y:O}}function S(T,E){var O=T.props.scale;return{node:E.node,x:T.state.x+E.deltaX/O,y:T.state.y+E.deltaY/O,deltaX:E.deltaX/O,deltaY:E.deltaY/O,lastX:T.state.x,lastY:T.state.y}}function x(T){return{left:T.left,top:T.top,right:T.right,bottom:T.bottom}}function g(T){var E=T.findDOMNode();if(!E)throw new Error("<DraggableCore>: Unmounted during event!");return E}},909280:function(We,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.dontSetMe=M,G.findInArray=_,G.int=w,G.isFunction=m,G.isNum=R;function _(P,L){for(var p=0,b=P.length;p<b;p++)if(L.apply(L,[P[p],p,P]))return P[p]}function m(P){return typeof P=="function"||Object.prototype.toString.call(P)==="[object Function]"}function R(P){return typeof P=="number"&&!isNaN(P)}function w(P){return parseInt(P,10)}function M(P,L,p){if(P[L])return new Error("Invalid prop ".concat(L," passed to ").concat(p," - do not set this, set it on the child."))}},797005:function(We,G,_){var m;function R(p){if(!p||typeof window=="undefined")return;const b=document.createElement("style");return b.setAttribute("type","text/css"),b.innerHTML=p,document.head.appendChild(b),p}m={value:!0};var w=_(667294);function M(p){return p&&typeof p=="object"&&"default"in p?p:{default:p}}var P=M(w);R(`.marquee-container {
  overflow-x: hidden !important;
  display: flex !important;
  flex-direction: row !important;
  position: relative;
  width: var(--width);
  transform: var(--transform);
}
.marquee-container:hover div {
  animation-play-state: var(--pause-on-hover);
}
.marquee-container:active div {
  animation-play-state: var(--pause-on-click);
}

.overlay {
  position: absolute;
  width: 100%;
  height: 100%;
}
.overlay::before, .overlay::after {
  background: linear-gradient(to right, var(--gradient-color));
  content: "";
  height: 100%;
  position: absolute;
  width: var(--gradient-width);
  z-index: 2;
}
.overlay::after {
  right: 0;
  top: 0;
  transform: rotateZ(180deg);
}
.overlay::before {
  left: 0;
  top: 0;
}

.marquee {
  flex: 0 0 auto;
  min-width: var(--min-width);
  z-index: 1;
  display: flex;
  flex-direction: row;
  align-items: center;
  animation: scroll var(--duration) linear var(--delay) var(--iteration-count);
  animation-play-state: var(--play);
  animation-delay: var(--delay);
  animation-direction: var(--direction);
}
@keyframes scroll {
  0% {
    transform: translateX(0%);
  }
  100% {
    transform: translateX(-100%);
  }
}

.initial-child-container {
  flex: 0 0 auto;
  display: flex;
  min-width: auto;
  flex-direction: row;
}

.child {
  transform: var(--transform);
}`);const L=w.forwardRef(function({style:b={},className:S="",autoFill:x=!1,play:g=!0,pauseOnHover:T=!1,pauseOnClick:E=!1,direction:O="left",speed:k=50,delay:y=0,loop:l=0,gradient:U=!1,gradientColor:X=[255,255,255],gradientWidth:F=200,onFinish:W,onCycleComplete:j,onMount:V,children:q},$){const[J,ut]=w.useState(0),[nt,yt]=w.useState(0),[dt,Ft]=w.useState(1),[wt,St]=w.useState(!1),et=w.useRef(null),it=$||et,Tt=w.useRef(null),Nt=w.useCallback(()=>{if(Tt.current&&it.current){const ue=it.current.getBoundingClientRect(),fe=Tt.current.getBoundingClientRect();let Gt=ue.width,ae=fe.width;(O==="up"||O==="down")&&(Gt=ue.height,ae=fe.height),Ft(x&&Gt&&ae&&ae<Gt?Math.ceil(Gt/ae):1),ut(Gt),yt(ae)}},[x,it,O]);w.useEffect(()=>{if(wt&&(Nt(),Tt.current&&it.current)){const ue=new ResizeObserver(()=>Nt());return ue.observe(it.current),ue.observe(Tt.current),()=>{ue&&ue.disconnect()}}},[Nt,it,wt]),w.useEffect(()=>{Nt()},[Nt,q]),w.useEffect(()=>{St(!0)},[]),w.useEffect(()=>{typeof V=="function"&&V()},[]);const st=w.useMemo(()=>x?nt*dt/k:nt<J?J/k:nt/k,[x,J,nt,dt,k]),xt=`rgba(${X[0]}, ${X[1]}, ${X[2]}`,zt=w.useMemo(()=>Object.assign(Object.assign({},b),{["--pause-on-hover"]:!g||T?"paused":"running",["--pause-on-click"]:!g||T&&!E||E?"paused":"running",["--width"]:O==="up"||O==="down"?"100vh":"100%",["--transform"]:O==="up"?"rotate(-90deg)":O==="down"?"rotate(90deg)":"none"}),[b,g,T,E,O]),Wt=w.useMemo(()=>({["--gradient-color"]:`${xt}, 1), ${xt}, 0)`,["--gradient-width"]:typeof F=="number"?`${F}px`:F}),[xt,F]),_t=w.useMemo(()=>({["--play"]:g?"running":"paused",["--direction"]:O==="left"?"normal":"reverse",["--duration"]:`${st}s`,["--delay"]:`${y}s`,["--iteration-count"]:l?`${l}`:"infinite",["--min-width"]:x?"auto":"100%"}),[g,O,st,y,l,x]),Xt=w.useMemo(()=>({["--transform"]:O==="up"?"rotate(90deg)":O==="down"?"rotate(-90deg)":"none"}),[O]),te=w.useCallback(ue=>[...Array(Number.isFinite(ue)&&ue>=0?ue:0)].map((fe,Gt)=>P.default.createElement(w.Fragment,{key:Gt},w.Children.map(q,ae=>P.default.createElement("div",{style:Xt,className:"child"},ae)))),[Xt,q]);return wt?P.default.createElement("div",{ref:it,style:zt,className:"marquee-container "+S},U&&P.default.createElement("div",{style:Wt,className:"overlay"}),P.default.createElement("div",{className:"marquee",style:_t,onAnimationIteration:j,onAnimationEnd:W},P.default.createElement("div",{className:"initial-child-container",ref:Tt},w.Children.map(q,ue=>P.default.createElement("div",{style:Xt,className:"child"},ue))),te(dt-1)),P.default.createElement("div",{className:"marquee",style:_t},te(dt))):null});G.Z=L},537763:function(We,G,_){We.exports=function(m){var R={};function w(M){if(R[M])return R[M].exports;var P=R[M]={exports:{},id:M,loaded:!1};return m[M].call(P.exports,P,P.exports,w),P.loaded=!0,P.exports}return w.m=m,w.c=R,w.p="",w(0)}([function(m,R,w){m.exports=w(1)},function(m,R,w){"use strict";Object.defineProperty(R,"__esModule",{value:!0});function M(p){return p&&p.__esModule?p:{default:p}}var P=w(2),L=M(P);R.default=L.default,m.exports=R.default},function(m,R,w){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var M=Object.assign||function(O){for(var k=1;k<arguments.length;k++){var y=arguments[k];for(var l in y)Object.prototype.hasOwnProperty.call(y,l)&&(O[l]=y[l])}return O};R.default=E;function P(O){return O&&O.__esModule?O:{default:O}}function L(O,k){var y={};for(var l in O)k.indexOf(l)>=0||Object.prototype.hasOwnProperty.call(O,l)&&(y[l]=O[l]);return y}var p=w(3),b=w(4),S=P(b),x=w(14),g=w(15),T=P(g);E.propTypes={activeClassName:S.default.string,activeIndex:S.default.number,activeStyle:S.default.object,autoEscape:S.default.bool,className:S.default.string,findChunks:S.default.func,highlightClassName:S.default.oneOfType([S.default.object,S.default.string]),highlightStyle:S.default.object,highlightTag:S.default.oneOfType([S.default.node,S.default.func,S.default.string]),sanitize:S.default.func,searchWords:S.default.arrayOf(S.default.oneOfType([S.default.string,S.default.instanceOf(RegExp)])).isRequired,textToHighlight:S.default.string.isRequired,unhighlightTag:S.default.oneOfType([S.default.node,S.default.func,S.default.string]),unhighlightClassName:S.default.string,unhighlightStyle:S.default.object};function E(O){var k=O.activeClassName,y=k===void 0?"":k,l=O.activeIndex,U=l===void 0?-1:l,X=O.activeStyle,F=O.autoEscape,W=O.caseSensitive,j=W===void 0?!1:W,V=O.className,q=O.findChunks,$=O.highlightClassName,J=$===void 0?"":$,ut=O.highlightStyle,nt=ut===void 0?{}:ut,yt=O.highlightTag,dt=yt===void 0?"mark":yt,Ft=O.sanitize,wt=O.searchWords,St=O.textToHighlight,et=O.unhighlightTag,it=et===void 0?"span":et,Tt=O.unhighlightClassName,Nt=Tt===void 0?"":Tt,st=O.unhighlightStyle,xt=L(O,["activeClassName","activeIndex","activeStyle","autoEscape","caseSensitive","className","findChunks","highlightClassName","highlightStyle","highlightTag","sanitize","searchWords","textToHighlight","unhighlightTag","unhighlightClassName","unhighlightStyle"]),zt=(0,p.findAll)({autoEscape:F,caseSensitive:j,findChunks:q,sanitize:Ft,searchWords:wt,textToHighlight:St}),Wt=dt,_t=-1,Xt="",te=void 0,ue=function(ae){var Ne={};for(var ee in ae)Ne[ee.toLowerCase()]=ae[ee];return Ne},fe=(0,T.default)(ue);return(0,x.createElement)("span",M({className:V},xt,{children:zt.map(function(Gt,ae){var Ne=St.substr(Gt.start,Gt.end-Gt.start);if(Gt.highlight){_t++;var ee=void 0;typeof J=="object"?j?ee=J[Ne]:(J=fe(J),ee=J[Ne.toLowerCase()]):ee=J;var de=_t===+U;Xt=ee+" "+(de?y:""),te=de===!0&&X!=null?Object.assign({},nt,X):nt;var ze={children:Ne,className:Xt,key:ae,style:te};return typeof Wt!="string"&&(ze.highlightIndex=_t),(0,x.createElement)(Wt,ze)}else return(0,x.createElement)(it,{children:Ne,className:Nt,key:ae,style:st})})}))}m.exports=R.default},function(m,R){m.exports=function(w){var M={};function P(L){if(M[L])return M[L].exports;var p=M[L]={exports:{},id:L,loaded:!1};return w[L].call(p.exports,p,p.exports,P),p.loaded=!0,p.exports}return P.m=w,P.c=M,P.p="",P(0)}([function(w,M,P){w.exports=P(1)},function(w,M,P){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var L=P(2);Object.defineProperty(M,"combineChunks",{enumerable:!0,get:function(){return L.combineChunks}}),Object.defineProperty(M,"fillInChunks",{enumerable:!0,get:function(){return L.fillInChunks}}),Object.defineProperty(M,"findAll",{enumerable:!0,get:function(){return L.findAll}}),Object.defineProperty(M,"findChunks",{enumerable:!0,get:function(){return L.findChunks}})},function(w,M){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var P=M.findAll=function(T){var E=T.autoEscape,O=T.caseSensitive,k=O===void 0?!1:O,y=T.findChunks,l=y===void 0?p:y,U=T.sanitize,X=T.searchWords,F=T.textToHighlight;return b({chunksToHighlight:L({chunks:l({autoEscape:E,caseSensitive:k,sanitize:U,searchWords:X,textToHighlight:F})}),totalLength:F?F.length:0})},L=M.combineChunks=function(T){var E=T.chunks;return E=E.sort(function(O,k){return O.start-k.start}).reduce(function(O,k){if(O.length===0)return[k];var y=O.pop();if(k.start<=y.end){var l=Math.max(y.end,k.end);O.push({start:y.start,end:l})}else O.push(y,k);return O},[]),E},p=function(T){var E=T.autoEscape,O=T.caseSensitive,k=T.sanitize,y=k===void 0?S:k,l=T.searchWords,U=T.textToHighlight;return U=y(U),l.filter(function(X){return X}).reduce(function(X,F){F=y(F),E&&(F=x(F));for(var W=new RegExp(F,O?"g":"gi"),j=void 0;j=W.exec(U);){var V=j.index,q=W.lastIndex;q>V&&X.push({start:V,end:q}),j.index==W.lastIndex&&W.lastIndex++}return X},[])};M.findChunks=p;var b=M.fillInChunks=function(T){var E=T.chunksToHighlight,O=T.totalLength,k=[],y=function(X,F,W){F-X>0&&k.push({start:X,end:F,highlight:W})};if(E.length===0)y(0,O,!1);else{var l=0;E.forEach(function(U){y(l,U.start,!1),y(U.start,U.end,!0),l=U.end}),y(l,O,!1)}return k};function S(g){return g}function x(g){return g.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}}])},function(m,R,w){(function(M){if(M.env.NODE_ENV!=="production"){var P=typeof Symbol=="function"&&Symbol.for&&Symbol.for("react.element")||60103,L=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===P},p=!0;m.exports=w(6)(L,p)}else m.exports=w(13)()}).call(R,w(5))},function(m,R){var w=m.exports={},M,P;function L(){throw new Error("setTimeout has not been defined")}function p(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?M=setTimeout:M=L}catch(U){M=L}try{typeof clearTimeout=="function"?P=clearTimeout:P=p}catch(U){P=p}})();function b(U){if(M===setTimeout)return setTimeout(U,0);if((M===L||!M)&&setTimeout)return M=setTimeout,setTimeout(U,0);try{return M(U,0)}catch(X){try{return M.call(null,U,0)}catch(F){return M.call(this,U,0)}}}function S(U){if(P===clearTimeout)return clearTimeout(U);if((P===p||!P)&&clearTimeout)return P=clearTimeout,clearTimeout(U);try{return P(U)}catch(X){try{return P.call(null,U)}catch(F){return P.call(this,U)}}}var x=[],g=!1,T,E=-1;function O(){!g||!T||(g=!1,T.length?x=T.concat(x):E=-1,x.length&&k())}function k(){if(!g){var U=b(O);g=!0;for(var X=x.length;X;){for(T=x,x=[];++E<X;)T&&T[E].run();E=-1,X=x.length}T=null,g=!1,S(U)}}w.nextTick=function(U){var X=new Array(arguments.length-1);if(arguments.length>1)for(var F=1;F<arguments.length;F++)X[F-1]=arguments[F];x.push(new y(U,X)),x.length===1&&!g&&b(k)};function y(U,X){this.fun=U,this.array=X}y.prototype.run=function(){this.fun.apply(null,this.array)},w.title="browser",w.browser=!0,w.env={},w.argv=[],w.version="",w.versions={};function l(){}w.on=l,w.addListener=l,w.once=l,w.off=l,w.removeListener=l,w.removeAllListeners=l,w.emit=l,w.prependListener=l,w.prependOnceListener=l,w.listeners=function(U){return[]},w.binding=function(U){throw new Error("process.binding is not supported")},w.cwd=function(){return"/"},w.chdir=function(U){throw new Error("process.chdir is not supported")},w.umask=function(){return 0}},function(m,R,w){(function(M){"use strict";var P=w(7),L=w(8),p=w(9),b=w(10),S=w(11),x=w(12);m.exports=function(g,T){var E=typeof Symbol=="function"&&Symbol.iterator,O="@@iterator";function k(st){var xt=st&&(E&&st[E]||st[O]);if(typeof xt=="function")return xt}var y="<<anonymous>>",l={array:W("array"),bool:W("boolean"),func:W("function"),number:W("number"),object:W("object"),string:W("string"),symbol:W("symbol"),any:j(),arrayOf:V,element:q(),instanceOf:$,node:yt(),objectOf:ut,oneOf:J,oneOfType:nt,shape:dt,exact:Ft};function U(st,xt){return st===xt?st!==0||1/st===1/xt:st!==st&&xt!==xt}function X(st){this.message=st,this.stack=""}X.prototype=Error.prototype;function F(st){if(M.env.NODE_ENV!=="production")var xt={},zt=0;function Wt(Xt,te,ue,fe,Gt,ae,Ne){if(fe=fe||y,ae=ae||ue,Ne!==S){if(T)L(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else if(M.env.NODE_ENV!=="production"&&typeof console!="undefined"){var ee=fe+":"+ue;!xt[ee]&&zt<3&&(p(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",ae,fe),xt[ee]=!0,zt++)}}return te[ue]==null?Xt?te[ue]===null?new X("The "+Gt+" `"+ae+"` is marked as required "+("in `"+fe+"`, but its value is `null`.")):new X("The "+Gt+" `"+ae+"` is marked as required in "+("`"+fe+"`, but its value is `undefined`.")):null:st(te,ue,fe,Gt,ae)}var _t=Wt.bind(null,!1);return _t.isRequired=Wt.bind(null,!0),_t}function W(st){function xt(zt,Wt,_t,Xt,te,ue){var fe=zt[Wt],Gt=et(fe);if(Gt!==st){var ae=it(fe);return new X("Invalid "+Xt+" `"+te+"` of type "+("`"+ae+"` supplied to `"+_t+"`, expected ")+("`"+st+"`."))}return null}return F(xt)}function j(){return F(P.thatReturnsNull)}function V(st){function xt(zt,Wt,_t,Xt,te){if(typeof st!="function")return new X("Property `"+te+"` of component `"+_t+"` has invalid PropType notation inside arrayOf.");var ue=zt[Wt];if(!Array.isArray(ue)){var fe=et(ue);return new X("Invalid "+Xt+" `"+te+"` of type "+("`"+fe+"` supplied to `"+_t+"`, expected an array."))}for(var Gt=0;Gt<ue.length;Gt++){var ae=st(ue,Gt,_t,Xt,te+"["+Gt+"]",S);if(ae instanceof Error)return ae}return null}return F(xt)}function q(){function st(xt,zt,Wt,_t,Xt){var te=xt[zt];if(!g(te)){var ue=et(te);return new X("Invalid "+_t+" `"+Xt+"` of type "+("`"+ue+"` supplied to `"+Wt+"`, expected a single ReactElement."))}return null}return F(st)}function $(st){function xt(zt,Wt,_t,Xt,te){if(!(zt[Wt]instanceof st)){var ue=st.name||y,fe=Nt(zt[Wt]);return new X("Invalid "+Xt+" `"+te+"` of type "+("`"+fe+"` supplied to `"+_t+"`, expected ")+("instance of `"+ue+"`."))}return null}return F(xt)}function J(st){if(!Array.isArray(st))return M.env.NODE_ENV!=="production"&&p(!1,"Invalid argument supplied to oneOf, expected an instance of array."),P.thatReturnsNull;function xt(zt,Wt,_t,Xt,te){for(var ue=zt[Wt],fe=0;fe<st.length;fe++)if(U(ue,st[fe]))return null;var Gt=JSON.stringify(st);return new X("Invalid "+Xt+" `"+te+"` of value `"+ue+"` "+("supplied to `"+_t+"`, expected one of "+Gt+"."))}return F(xt)}function ut(st){function xt(zt,Wt,_t,Xt,te){if(typeof st!="function")return new X("Property `"+te+"` of component `"+_t+"` has invalid PropType notation inside objectOf.");var ue=zt[Wt],fe=et(ue);if(fe!=="object")return new X("Invalid "+Xt+" `"+te+"` of type "+("`"+fe+"` supplied to `"+_t+"`, expected an object."));for(var Gt in ue)if(ue.hasOwnProperty(Gt)){var ae=st(ue,Gt,_t,Xt,te+"."+Gt,S);if(ae instanceof Error)return ae}return null}return F(xt)}function nt(st){if(!Array.isArray(st))return M.env.NODE_ENV!=="production"&&p(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),P.thatReturnsNull;for(var xt=0;xt<st.length;xt++){var zt=st[xt];if(typeof zt!="function")return p(!1,"Invalid argument supplied to oneOfType. Expected an array of check functions, but received %s at index %s.",Tt(zt),xt),P.thatReturnsNull}function Wt(_t,Xt,te,ue,fe){for(var Gt=0;Gt<st.length;Gt++){var ae=st[Gt];if(ae(_t,Xt,te,ue,fe,S)==null)return null}return new X("Invalid "+ue+" `"+fe+"` supplied to "+("`"+te+"`."))}return F(Wt)}function yt(){function st(xt,zt,Wt,_t,Xt){return wt(xt[zt])?null:new X("Invalid "+_t+" `"+Xt+"` supplied to "+("`"+Wt+"`, expected a ReactNode."))}return F(st)}function dt(st){function xt(zt,Wt,_t,Xt,te){var ue=zt[Wt],fe=et(ue);if(fe!=="object")return new X("Invalid "+Xt+" `"+te+"` of type `"+fe+"` "+("supplied to `"+_t+"`, expected `object`."));for(var Gt in st){var ae=st[Gt];if(ae){var Ne=ae(ue,Gt,_t,Xt,te+"."+Gt,S);if(Ne)return Ne}}return null}return F(xt)}function Ft(st){function xt(zt,Wt,_t,Xt,te){var ue=zt[Wt],fe=et(ue);if(fe!=="object")return new X("Invalid "+Xt+" `"+te+"` of type `"+fe+"` "+("supplied to `"+_t+"`, expected `object`."));var Gt=b({},zt[Wt],st);for(var ae in Gt){var Ne=st[ae];if(!Ne)return new X("Invalid "+Xt+" `"+te+"` key `"+ae+"` supplied to `"+_t+"`.\nBad object: "+JSON.stringify(zt[Wt],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(st),null,"  "));var ee=Ne(ue,ae,_t,Xt,te+"."+ae,S);if(ee)return ee}return null}return F(xt)}function wt(st){switch(typeof st){case"number":case"string":case"undefined":return!0;case"boolean":return!st;case"object":if(Array.isArray(st))return st.every(wt);if(st===null||g(st))return!0;var xt=k(st);if(xt){var zt=xt.call(st),Wt;if(xt!==st.entries){for(;!(Wt=zt.next()).done;)if(!wt(Wt.value))return!1}else for(;!(Wt=zt.next()).done;){var _t=Wt.value;if(_t&&!wt(_t[1]))return!1}}else return!1;return!0;default:return!1}}function St(st,xt){return st==="symbol"||xt["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&xt instanceof Symbol}function et(st){var xt=typeof st;return Array.isArray(st)?"array":st instanceof RegExp?"object":St(xt,st)?"symbol":xt}function it(st){if(typeof st=="undefined"||st===null)return""+st;var xt=et(st);if(xt==="object"){if(st instanceof Date)return"date";if(st instanceof RegExp)return"regexp"}return xt}function Tt(st){var xt=it(st);switch(xt){case"array":case"object":return"an "+xt;case"boolean":case"date":case"regexp":return"a "+xt;default:return xt}}function Nt(st){return!st.constructor||!st.constructor.name?y:st.constructor.name}return l.checkPropTypes=x,l.PropTypes=l,l}}).call(R,w(5))},function(m,R){"use strict";function w(P){return function(){return P}}var M=function(){};M.thatReturns=w,M.thatReturnsFalse=w(!1),M.thatReturnsTrue=w(!0),M.thatReturnsNull=w(null),M.thatReturnsThis=function(){return this},M.thatReturnsArgument=function(P){return P},m.exports=M},function(m,R,w){(function(M){"use strict";var P=function(b){};M.env.NODE_ENV!=="production"&&(P=function(b){if(b===void 0)throw new Error("invariant requires an error message argument")});function L(p,b,S,x,g,T,E,O){if(P(b),!p){var k;if(b===void 0)k=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var y=[S,x,g,T,E,O],l=0;k=new Error(b.replace(/%s/g,function(){return y[l++]})),k.name="Invariant Violation"}throw k.framesToPop=1,k}}m.exports=L}).call(R,w(5))},function(m,R,w){(function(M){"use strict";var P=w(7),L=P;if(M.env.NODE_ENV!=="production"){var p=function(S){for(var x=arguments.length,g=Array(x>1?x-1:0),T=1;T<x;T++)g[T-1]=arguments[T];var E=0,O="Warning: "+S.replace(/%s/g,function(){return g[E++]});typeof console!="undefined"&&console.error(O);try{throw new Error(O)}catch(k){}};L=function(S,x){if(x===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(x.indexOf("Failed Composite propType: ")!==0&&!S){for(var g=arguments.length,T=Array(g>2?g-2:0),E=2;E<g;E++)T[E-2]=arguments[E];p.apply(void 0,[x].concat(T))}}}m.exports=L}).call(R,w(5))},function(m,R){"use strict";var w=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;function L(b){if(b==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(b)}function p(){try{if(!Object.assign)return!1;var b=new String("abc");if(b[5]="de",Object.getOwnPropertyNames(b)[0]==="5")return!1;for(var S={},x=0;x<10;x++)S["_"+String.fromCharCode(x)]=x;var g=Object.getOwnPropertyNames(S).map(function(E){return S[E]});if(g.join("")!=="0123456789")return!1;var T={};return"abcdefghijklmnopqrst".split("").forEach(function(E){T[E]=E}),Object.keys(Object.assign({},T)).join("")==="abcdefghijklmnopqrst"}catch(E){return!1}}m.exports=p()?Object.assign:function(b,S){for(var x,g=L(b),T,E=1;E<arguments.length;E++){x=Object(arguments[E]);for(var O in x)M.call(x,O)&&(g[O]=x[O]);if(w){T=w(x);for(var k=0;k<T.length;k++)P.call(x,T[k])&&(g[T[k]]=x[T[k]])}}return g}},function(m,R){"use strict";var w="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";m.exports=w},function(m,R,w){(function(M){"use strict";if(M.env.NODE_ENV!=="production")var P=w(8),L=w(9),p=w(11),b={};function S(x,g,T,E,O){if(M.env.NODE_ENV!=="production"){for(var k in x)if(x.hasOwnProperty(k)){var y;try{P(typeof x[k]=="function","%s: %s type `%s` is invalid; it must be a function, usually from the `prop-types` package, but received `%s`.",E||"React class",T,k,typeof x[k]),y=x[k](g,k,E,T,null,p)}catch(U){y=U}if(L(!y||y instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",E||"React class",T,k,typeof y),y instanceof Error&&!(y.message in b)){b[y.message]=!0;var l=O?O():"";L(!1,"Failed %s type: %s%s",T,y.message,l!=null?l:"")}}}}m.exports=S}).call(R,w(5))},function(m,R,w){"use strict";var M=w(7),P=w(8),L=w(11);m.exports=function(){function p(x,g,T,E,O,k){k!==L&&P(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}p.isRequired=p;function b(){return p}var S={array:p,bool:p,func:p,number:p,object:p,string:p,symbol:p,any:p,arrayOf:b,element:p,instanceOf:b,node:p,objectOf:b,oneOf:b,oneOfType:b,shape:b,exact:b};return S.checkPropTypes=M,S.PropTypes=S,S}},function(m,R){m.exports=_(667294)},function(m,R){"use strict";var w=function(L,p){return L===p};function M(P){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:w,p=void 0,b=[],S=void 0,x=!1,g=function(O,k){return L(O,b[k])},T=function(){for(var O=arguments.length,k=Array(O),y=0;y<O;y++)k[y]=arguments[y];return x&&p===this&&k.length===b.length&&k.every(g)||(x=!0,p=this,b=k,S=P.apply(this,k)),S};return T}m.exports=M}])},58533:function(We,G,_){"use strict";var m=_(667294);var R=function(x,g){return R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,E){T.__proto__=E}||function(T,E){for(var O in E)E.hasOwnProperty(O)&&(T[O]=E[O])},R(x,g)};function w(x,g){R(x,g);function T(){this.constructor=x}x.prototype=g===null?Object.create(g):(T.prototype=g.prototype,new T)}var M=function(){return M=Object.assign||function(g){for(var T,E=1,O=arguments.length;E<O;E++){T=arguments[E];for(var k in T)Object.prototype.hasOwnProperty.call(T,k)&&(g[k]=T[k])}return g},M.apply(this,arguments)};function P(x,g,T,E){var O,k=!1,y=0;function l(){O&&clearTimeout(O)}function U(){l(),k=!0}typeof g!="boolean"&&(E=T,T=g,g=void 0);function X(){var F=this,W=Date.now()-y,j=arguments;if(k)return;function V(){y=Date.now(),T.apply(F,j)}function q(){O=void 0}E&&!O&&V(),l(),E===void 0&&W>x?V():g!==!0&&(O=setTimeout(E?q:V,E===void 0?x-W:x))}return X.cancel=U,X}var L={Pixel:"Pixel",Percent:"Percent"},p={unit:L.Percent,value:.8};function b(x){return typeof x=="number"?{unit:L.Percent,value:x*100}:typeof x=="string"?x.match(/^(\d*(\.\d+)?)px$/)?{unit:L.Pixel,value:parseFloat(x)}:x.match(/^(\d*(\.\d+)?)%$/)?{unit:L.Percent,value:parseFloat(x)}:(console.warn('scrollThreshold format is invalid. Valid formats: "120px", "50%"...'),p):(console.warn("scrollThreshold should be string or number"),p)}var S=function(x){w(g,x);function g(T){var E=x.call(this,T)||this;return E.lastScrollTop=0,E.actionTriggered=!1,E.startY=0,E.currentY=0,E.dragging=!1,E.maxPullDownDistance=0,E.getScrollableTarget=function(){return E.props.scrollableTarget instanceof HTMLElement?E.props.scrollableTarget:typeof E.props.scrollableTarget=="string"?document.getElementById(E.props.scrollableTarget):(E.props.scrollableTarget===null&&console.warn(`You are trying to pass scrollableTarget but it is null. This might
        happen because the element may not have been added to DOM yet.
        See https://github.com/ankeetmaini/react-infinite-scroll-component/issues/59 for more info.
      `),null)},E.onStart=function(O){E.lastScrollTop||(E.dragging=!0,O instanceof MouseEvent?E.startY=O.pageY:O instanceof TouchEvent&&(E.startY=O.touches[0].pageY),E.currentY=E.startY,E._infScroll&&(E._infScroll.style.willChange="transform",E._infScroll.style.transition="transform 0.2s cubic-bezier(0,0,0.31,1)"))},E.onMove=function(O){E.dragging&&(O instanceof MouseEvent?E.currentY=O.pageY:O instanceof TouchEvent&&(E.currentY=O.touches[0].pageY),!(E.currentY<E.startY)&&(E.currentY-E.startY>=Number(E.props.pullDownToRefreshThreshold)&&E.setState({pullToRefreshThresholdBreached:!0}),!(E.currentY-E.startY>E.maxPullDownDistance*1.5)&&E._infScroll&&(E._infScroll.style.overflow="visible",E._infScroll.style.transform="translate3d(0px, "+(E.currentY-E.startY)+"px, 0px)")))},E.onEnd=function(){E.startY=0,E.currentY=0,E.dragging=!1,E.state.pullToRefreshThresholdBreached&&(E.props.refreshFunction&&E.props.refreshFunction(),E.setState({pullToRefreshThresholdBreached:!1})),requestAnimationFrame(function(){E._infScroll&&(E._infScroll.style.overflow="auto",E._infScroll.style.transform="none",E._infScroll.style.willChange="unset")})},E.onScrollListener=function(O){typeof E.props.onScroll=="function"&&setTimeout(function(){return E.props.onScroll&&E.props.onScroll(O)},0);var k=E.props.height||E._scrollableNode?O.target:document.documentElement.scrollTop?document.documentElement:document.body;if(!E.actionTriggered){var y=E.props.inverse?E.isElementAtTop(k,E.props.scrollThreshold):E.isElementAtBottom(k,E.props.scrollThreshold);y&&E.props.hasMore&&(E.actionTriggered=!0,E.setState({showLoader:!0}),E.props.next&&E.props.next()),E.lastScrollTop=k.scrollTop}},E.state={showLoader:!1,pullToRefreshThresholdBreached:!1,prevDataLength:T.dataLength},E.throttledOnScrollListener=P(150,E.onScrollListener).bind(E),E.onStart=E.onStart.bind(E),E.onMove=E.onMove.bind(E),E.onEnd=E.onEnd.bind(E),E}return g.prototype.componentDidMount=function(){if(typeof this.props.dataLength=="undefined")throw new Error('mandatory prop "dataLength" is missing. The prop is needed when loading more content. Check README.md for usage');if(this._scrollableNode=this.getScrollableTarget(),this.el=this.props.height?this._infScroll:this._scrollableNode||window,this.el&&this.el.addEventListener("scroll",this.throttledOnScrollListener),typeof this.props.initialScrollY=="number"&&this.el&&this.el instanceof HTMLElement&&this.el.scrollHeight>this.props.initialScrollY&&this.el.scrollTo(0,this.props.initialScrollY),this.props.pullDownToRefresh&&this.el&&(this.el.addEventListener("touchstart",this.onStart),this.el.addEventListener("touchmove",this.onMove),this.el.addEventListener("touchend",this.onEnd),this.el.addEventListener("mousedown",this.onStart),this.el.addEventListener("mousemove",this.onMove),this.el.addEventListener("mouseup",this.onEnd),this.maxPullDownDistance=this._pullDown&&this._pullDown.firstChild&&this._pullDown.firstChild.getBoundingClientRect().height||0,this.forceUpdate(),typeof this.props.refreshFunction!="function"))throw new Error(`Mandatory prop "refreshFunction" missing.
          Pull Down To Refresh functionality will not work
          as expected. Check README.md for usage'`)},g.prototype.componentWillUnmount=function(){this.el&&(this.el.removeEventListener("scroll",this.throttledOnScrollListener),this.props.pullDownToRefresh&&(this.el.removeEventListener("touchstart",this.onStart),this.el.removeEventListener("touchmove",this.onMove),this.el.removeEventListener("touchend",this.onEnd),this.el.removeEventListener("mousedown",this.onStart),this.el.removeEventListener("mousemove",this.onMove),this.el.removeEventListener("mouseup",this.onEnd)))},g.prototype.componentDidUpdate=function(T){this.props.dataLength!==T.dataLength&&(this.actionTriggered=!1,this.setState({showLoader:!1}))},g.getDerivedStateFromProps=function(T,E){var O=T.dataLength!==E.prevDataLength;return O?M(M({},E),{prevDataLength:T.dataLength}):null},g.prototype.isElementAtTop=function(T,E){E===void 0&&(E=.8);var O=T===document.body||T===document.documentElement?window.screen.availHeight:T.clientHeight,k=b(E);return k.unit===L.Pixel?T.scrollTop<=k.value+O-T.scrollHeight+1:T.scrollTop<=k.value/100+O-T.scrollHeight+1},g.prototype.isElementAtBottom=function(T,E){E===void 0&&(E=.8);var O=T===document.body||T===document.documentElement?window.screen.availHeight:T.clientHeight,k=b(E);return k.unit===L.Pixel?T.scrollTop+O>=T.scrollHeight-k.value:T.scrollTop+O>=k.value/100*T.scrollHeight},g.prototype.render=function(){var T=this,E=M({height:this.props.height||"auto",overflow:"auto",WebkitOverflowScrolling:"touch"},this.props.style),O=this.props.hasChildren||!!(this.props.children&&this.props.children instanceof Array&&this.props.children.length),k=this.props.pullDownToRefresh&&this.props.height?{overflow:"auto"}:{};return m.createElement("div",{style:k,className:"infinite-scroll-component__outerdiv"},m.createElement("div",{className:"infinite-scroll-component "+(this.props.className||""),ref:function(y){return T._infScroll=y},style:E},this.props.pullDownToRefresh&&m.createElement("div",{style:{position:"relative"},ref:function(y){return T._pullDown=y}},m.createElement("div",{style:{position:"absolute",left:0,right:0,top:-1*this.maxPullDownDistance}},this.state.pullToRefreshThresholdBreached?this.props.releaseToRefreshContent:this.props.pullDownToRefreshContent)),this.props.children,!this.state.showLoader&&!O&&this.props.hasMore&&this.props.loader,this.state.showLoader&&this.props.hasMore&&this.props.loader,!this.props.hasMore&&this.props.endMessage))},g}(m.Component);G.Z=S},122827:function(We,G,_){"use strict";G.__esModule=!0,G.default=void 0;var m=p(_(667294)),R=_(861193),w=_(459069),M=_(100448),P=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function L(U){if(typeof WeakMap!="function")return null;var X=new WeakMap,F=new WeakMap;return(L=function(j){return j?F:X})(U)}function p(U,X){if(!X&&U&&U.__esModule)return U;if(U===null||typeof U!="object"&&typeof U!="function")return{default:U};var F=L(X);if(F&&F.has(U))return F.get(U);var W={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var V in U)if(V!=="default"&&Object.prototype.hasOwnProperty.call(U,V)){var q=j?Object.getOwnPropertyDescriptor(U,V):null;q&&(q.get||q.set)?Object.defineProperty(W,V,q):W[V]=U[V]}return W.default=U,F&&F.set(U,W),W}function b(){return b=Object.assign?Object.assign.bind():function(U){for(var X=1;X<arguments.length;X++){var F=arguments[X];for(var W in F)Object.prototype.hasOwnProperty.call(F,W)&&(U[W]=F[W])}return U},b.apply(this,arguments)}function S(U,X){if(U==null)return{};var F={},W=Object.keys(U),j,V;for(V=0;V<W.length;V++)j=W[V],!(X.indexOf(j)>=0)&&(F[j]=U[j]);return F}function x(U,X){var F=Object.keys(U);if(Object.getOwnPropertySymbols){var W=Object.getOwnPropertySymbols(U);X&&(W=W.filter(function(j){return Object.getOwnPropertyDescriptor(U,j).enumerable})),F.push.apply(F,W)}return F}function g(U){for(var X=1;X<arguments.length;X++){var F=arguments[X]!=null?arguments[X]:{};X%2?x(Object(F),!0).forEach(function(W){T(U,W,F[W])}):Object.getOwnPropertyDescriptors?Object.defineProperties(U,Object.getOwnPropertyDescriptors(F)):x(Object(F)).forEach(function(W){Object.defineProperty(U,W,Object.getOwnPropertyDescriptor(F,W))})}return U}function T(U,X,F){return X=E(X),X in U?Object.defineProperty(U,X,{value:F,enumerable:!0,configurable:!0,writable:!0}):U[X]=F,U}function E(U){var X=O(U,"string");return typeof X=="symbol"?X:String(X)}function O(U,X){if(typeof U!="object"||U===null)return U;var F=U[Symbol.toPrimitive];if(F!==void 0){var W=F.call(U,X||"default");if(typeof W!="object")return W;throw new TypeError("@@toPrimitive must return a primitive value.")}return(X==="string"?String:Number)(U)}function k(U,X){U.prototype=Object.create(X.prototype),U.prototype.constructor=U,y(U,X)}function y(U,X){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(W,j){return W.__proto__=j,W},y(U,X)}var l=function(U){k(X,U);function X(){for(var W,j=arguments.length,V=new Array(j),q=0;q<j;q++)V[q]=arguments[q];return W=U.call.apply(U,[this].concat(V))||this,W.handleRefs={},W.lastHandleRect=null,W.slack=null,W}var F=X.prototype;return F.componentWillUnmount=function(){this.resetData()},F.resetData=function(){this.lastHandleRect=this.slack=null},F.runConstraints=function(j,V){var q=this.props,$=q.minConstraints,J=q.maxConstraints,ut=q.lockAspectRatio;if(!$&&!J&&!ut)return[j,V];if(ut){var nt=this.props.width/this.props.height,yt=j-this.props.width,dt=V-this.props.height;Math.abs(yt)>Math.abs(dt*nt)?V=j/nt:j=V*nt}var Ft=j,wt=V,St=this.slack||[0,0],et=St[0],it=St[1];return j+=et,V+=it,$&&(j=Math.max($[0],j),V=Math.max($[1],V)),J&&(j=Math.min(J[0],j),V=Math.min(J[1],V)),this.slack=[et+(Ft-j),it+(wt-V)],[j,V]},F.resizeHandler=function(j,V){var q=this;return function($,J){var ut=J.node,nt=J.deltaX,yt=J.deltaY;j==="onResizeStart"&&q.resetData();var dt=(q.props.axis==="both"||q.props.axis==="x")&&V!=="n"&&V!=="s",Ft=(q.props.axis==="both"||q.props.axis==="y")&&V!=="e"&&V!=="w";if(!(!dt&&!Ft)){var wt=V[0],St=V[V.length-1],et=ut.getBoundingClientRect();if(q.lastHandleRect!=null){if(St==="w"){var it=et.left-q.lastHandleRect.left;nt+=it}if(wt==="n"){var Tt=et.top-q.lastHandleRect.top;yt+=Tt}}q.lastHandleRect=et,St==="w"&&(nt=-nt),wt==="n"&&(yt=-yt);var Nt=q.props.width+(dt?nt/q.props.transformScale:0),st=q.props.height+(Ft?yt/q.props.transformScale:0),xt=q.runConstraints(Nt,st);Nt=xt[0],st=xt[1];var zt=Nt!==q.props.width||st!==q.props.height,Wt=typeof q.props[j]=="function"?q.props[j]:null,_t=j==="onResize"&&!zt;Wt&&!_t&&($.persist==null||$.persist(),Wt($,{node:ut,size:{width:Nt,height:st},handle:V})),j==="onResizeStop"&&q.resetData()}}},F.renderResizeHandle=function(j,V){var q=this.props.handle;if(!q)return m.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+j,ref:V});if(typeof q=="function")return q(j,V);var $=typeof q.type=="string",J=g({ref:V},$?{}:{handleAxis:j});return m.cloneElement(q,J)},F.render=function(){var j=this,V=this.props,q=V.children,$=V.className,J=V.draggableOpts,ut=V.width,nt=V.height,yt=V.handle,dt=V.handleSize,Ft=V.lockAspectRatio,wt=V.axis,St=V.minConstraints,et=V.maxConstraints,it=V.onResize,Tt=V.onResizeStop,Nt=V.onResizeStart,st=V.resizeHandles,xt=V.transformScale,zt=S(V,P);return(0,w.cloneElement)(q,g(g({},zt),{},{className:($?$+" ":"")+"react-resizable",children:[].concat(q.props.children,st.map(function(Wt){var _t,Xt=(_t=j.handleRefs[Wt])!=null?_t:j.handleRefs[Wt]=m.createRef();return m.createElement(R.DraggableCore,b({},J,{nodeRef:Xt,key:"resizableHandle-"+Wt,onStop:j.resizeHandler("onResizeStop",Wt),onStart:j.resizeHandler("onResizeStart",Wt),onDrag:j.resizeHandler("onResize",Wt)}),j.renderResizeHandle(Wt,Xt))}))}))},X}(m.Component);G.default=l,l.propTypes=M.resizableProps,l.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1}},808735:function(We,G,_){"use strict";var m;m=!0,G.default=void 0;var R=S(_(667294)),w=p(_(45697)),M=p(_(122827)),P=_(100448),L=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function p(F){return F&&F.__esModule?F:{default:F}}function b(F){if(typeof WeakMap!="function")return null;var W=new WeakMap,j=new WeakMap;return(b=function(q){return q?j:W})(F)}function S(F,W){if(!W&&F&&F.__esModule)return F;if(F===null||typeof F!="object"&&typeof F!="function")return{default:F};var j=b(W);if(j&&j.has(F))return j.get(F);var V={},q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var $ in F)if($!=="default"&&Object.prototype.hasOwnProperty.call(F,$)){var J=q?Object.getOwnPropertyDescriptor(F,$):null;J&&(J.get||J.set)?Object.defineProperty(V,$,J):V[$]=F[$]}return V.default=F,j&&j.set(F,V),V}function x(){return x=Object.assign?Object.assign.bind():function(F){for(var W=1;W<arguments.length;W++){var j=arguments[W];for(var V in j)Object.prototype.hasOwnProperty.call(j,V)&&(F[V]=j[V])}return F},x.apply(this,arguments)}function g(F,W){var j=Object.keys(F);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(F);W&&(V=V.filter(function(q){return Object.getOwnPropertyDescriptor(F,q).enumerable})),j.push.apply(j,V)}return j}function T(F){for(var W=1;W<arguments.length;W++){var j=arguments[W]!=null?arguments[W]:{};W%2?g(Object(j),!0).forEach(function(V){E(F,V,j[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(j)):g(Object(j)).forEach(function(V){Object.defineProperty(F,V,Object.getOwnPropertyDescriptor(j,V))})}return F}function E(F,W,j){return W=O(W),W in F?Object.defineProperty(F,W,{value:j,enumerable:!0,configurable:!0,writable:!0}):F[W]=j,F}function O(F){var W=k(F,"string");return typeof W=="symbol"?W:String(W)}function k(F,W){if(typeof F!="object"||F===null)return F;var j=F[Symbol.toPrimitive];if(j!==void 0){var V=j.call(F,W||"default");if(typeof V!="object")return V;throw new TypeError("@@toPrimitive must return a primitive value.")}return(W==="string"?String:Number)(F)}function y(F,W){if(F==null)return{};var j={},V=Object.keys(F),q,$;for($=0;$<V.length;$++)q=V[$],!(W.indexOf(q)>=0)&&(j[q]=F[q]);return j}function l(F,W){F.prototype=Object.create(W.prototype),F.prototype.constructor=F,U(F,W)}function U(F,W){return U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(V,q){return V.__proto__=q,V},U(F,W)}var X=function(F){l(W,F);function W(){for(var V,q=arguments.length,$=new Array(q),J=0;J<q;J++)$[J]=arguments[J];return V=F.call.apply(F,[this].concat($))||this,V.state={width:V.props.width,height:V.props.height,propsWidth:V.props.width,propsHeight:V.props.height},V.onResize=function(ut,nt){var yt=nt.size;V.props.onResize?(ut.persist==null||ut.persist(),V.setState(yt,function(){return V.props.onResize&&V.props.onResize(ut,nt)})):V.setState(yt)},V}W.getDerivedStateFromProps=function(q,$){return $.propsWidth!==q.width||$.propsHeight!==q.height?{width:q.width,height:q.height,propsWidth:q.width,propsHeight:q.height}:null};var j=W.prototype;return j.render=function(){var q=this.props,$=q.handle,J=q.handleSize,ut=q.onResize,nt=q.onResizeStart,yt=q.onResizeStop,dt=q.draggableOpts,Ft=q.minConstraints,wt=q.maxConstraints,St=q.lockAspectRatio,et=q.axis,it=q.width,Tt=q.height,Nt=q.resizeHandles,st=q.style,xt=q.transformScale,zt=y(q,L);return R.createElement(M.default,{axis:et,draggableOpts:dt,handle:$,handleSize:J,height:this.state.height,lockAspectRatio:St,maxConstraints:wt,minConstraints:Ft,onResizeStart:nt,onResize:this.onResize,onResizeStop:yt,resizeHandles:Nt,transformScale:xt,width:this.state.width},R.createElement("div",x({},zt,{style:T(T({},st),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},W}(R.Component);G.default=X,X.propTypes=T(T({},P.resizableProps),{},{children:w.default.element})},100448:function(We,G,_){"use strict";G.__esModule=!0,G.resizableProps=void 0;var m=w(_(45697)),R=_(861193);function w(P){return P&&P.__esModule?P:{default:P}}var M={axis:m.default.oneOf(["both","x","y","none"]),className:m.default.string,children:m.default.element.isRequired,draggableOpts:m.default.shape({allowAnyClick:m.default.bool,cancel:m.default.string,children:m.default.node,disabled:m.default.bool,enableUserSelectHack:m.default.bool,offsetParent:m.default.node,grid:m.default.arrayOf(m.default.number),handle:m.default.string,nodeRef:m.default.object,onStart:m.default.func,onDrag:m.default.func,onStop:m.default.func,onMouseDown:m.default.func,scale:m.default.number}),height:function(){for(var L=arguments.length,p=new Array(L),b=0;b<L;b++)p[b]=arguments[b];var S=p[0];if(S.axis==="both"||S.axis==="y"){var x;return(x=m.default.number).isRequired.apply(x,p)}return m.default.number.apply(m.default,p)},handle:m.default.oneOfType([m.default.node,m.default.func]),handleSize:m.default.arrayOf(m.default.number),lockAspectRatio:m.default.bool,maxConstraints:m.default.arrayOf(m.default.number),minConstraints:m.default.arrayOf(m.default.number),onResizeStop:m.default.func,onResizeStart:m.default.func,onResize:m.default.func,resizeHandles:m.default.arrayOf(m.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:m.default.number,width:function(){for(var L=arguments.length,p=new Array(L),b=0;b<L;b++)p[b]=arguments[b];var S=p[0];if(S.axis==="both"||S.axis==="x"){var x;return(x=m.default.number).isRequired.apply(x,p)}return m.default.number.apply(m.default,p)}};G.resizableProps=M},459069:function(We,G,_){"use strict";G.__esModule=!0,G.cloneElement=b;var m=R(_(667294));function R(S){return S&&S.__esModule?S:{default:S}}function w(S,x){var g=Object.keys(S);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(S);x&&(T=T.filter(function(E){return Object.getOwnPropertyDescriptor(S,E).enumerable})),g.push.apply(g,T)}return g}function M(S){for(var x=1;x<arguments.length;x++){var g=arguments[x]!=null?arguments[x]:{};x%2?w(Object(g),!0).forEach(function(T){P(S,T,g[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(g)):w(Object(g)).forEach(function(T){Object.defineProperty(S,T,Object.getOwnPropertyDescriptor(g,T))})}return S}function P(S,x,g){return x=L(x),x in S?Object.defineProperty(S,x,{value:g,enumerable:!0,configurable:!0,writable:!0}):S[x]=g,S}function L(S){var x=p(S,"string");return typeof x=="symbol"?x:String(x)}function p(S,x){if(typeof S!="object"||S===null)return S;var g=S[Symbol.toPrimitive];if(g!==void 0){var T=g.call(S,x||"default");if(typeof T!="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(x==="string"?String:Number)(S)}function b(S,x){return x.style&&S.props.style&&(x.style=M(M({},S.props.style),x.style)),x.className&&S.props.className&&(x.className=S.props.className+" "+x.className),m.default.cloneElement(S,x)}},101706:function(We,G,_){"use strict";We.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")},We.exports.Resizable=_(122827).default,We.exports.ResizableBox=_(808735).default},491907:function(We,G,_){"use strict";_.d(G,{cd:function(){return et}});var m=_(487462),R=_(497326),w=_(589611);function M(he,vt){he.prototype=Object.create(vt.prototype),he.prototype.constructor=he,(0,w.Z)(he,vt)}var P=Number.isNaN||function(vt){return typeof vt=="number"&&vt!==vt};function L(he,vt){return!!(he===vt||P(he)&&P(vt))}function p(he,vt){if(he.length!==vt.length)return!1;for(var ie=0;ie<he.length;ie++)if(!L(he[ie],vt[ie]))return!1;return!0}function b(he,vt){vt===void 0&&(vt=p);var ie,Pe=[],qe,Qe=!1;function lr(){for(var fr=[],kr=0;kr<arguments.length;kr++)fr[kr]=arguments[kr];return Qe&&ie===this&&vt(fr,Pe)||(qe=he.apply(this,fr),Qe=!0,ie=this,Pe=fr),qe}return lr}var S=b,x=_(667294),g=typeof performance=="object"&&typeof performance.now=="function",T=g?function(){return performance.now()}:function(){return Date.now()};function E(he){cancelAnimationFrame(he.id)}function O(he,vt){var ie=T();function Pe(){T()-ie>=vt?he.call(null):qe.id=requestAnimationFrame(Pe)}var qe={id:requestAnimationFrame(Pe)};return qe}var k=-1;function y(he){if(he===void 0&&(he=!1),k===-1||he){var vt=document.createElement("div"),ie=vt.style;ie.width="50px",ie.height="50px",ie.overflow="scroll",document.body.appendChild(vt),k=vt.offsetWidth-vt.clientWidth,document.body.removeChild(vt)}return k}var l=null;function U(he){if(he===void 0&&(he=!1),l===null||he){var vt=document.createElement("div"),ie=vt.style;ie.width="50px",ie.height="50px",ie.overflow="scroll",ie.direction="rtl";var Pe=document.createElement("div"),qe=Pe.style;return qe.width="100px",qe.height="100px",vt.appendChild(Pe),document.body.appendChild(vt),vt.scrollLeft>0?l="positive-descending":(vt.scrollLeft=1,vt.scrollLeft===0?l="negative":l="positive-ascending"),document.body.removeChild(vt),l}return l}var X=150,F=function(vt){var ie=vt.columnIndex,Pe=vt.data,qe=vt.rowIndex;return qe+":"+ie},W=null,j=null,V=null;function q(he){var vt,ie=he.getColumnOffset,Pe=he.getColumnStartIndexForOffset,qe=he.getColumnStopIndexForStartIndex,Qe=he.getColumnWidth,lr=he.getEstimatedTotalHeight,fr=he.getEstimatedTotalWidth,kr=he.getOffsetForColumnAndAlignment,En=he.getOffsetForRowAndAlignment,fn=he.getRowHeight,Vr=he.getRowOffset,Je=he.getRowStartIndexForOffset,dr=he.getRowStopIndexForStartIndex,nr=he.initInstanceProps,oe=he.shouldResetStyleCacheOnItemSizeChange,Te=he.validateProps;return vt=function(Lr){M(Nr,Lr);function Nr(en){var Dr;return Dr=Lr.call(this,en)||this,Dr._instanceProps=nr(Dr.props,(0,R.Z)(Dr)),Dr._resetIsScrollingTimeoutId=null,Dr._outerRef=void 0,Dr.state={instance:(0,R.Z)(Dr),isScrolling:!1,horizontalScrollDirection:"forward",scrollLeft:typeof Dr.props.initialScrollLeft=="number"?Dr.props.initialScrollLeft:0,scrollTop:typeof Dr.props.initialScrollTop=="number"?Dr.props.initialScrollTop:0,scrollUpdateWasRequested:!1,verticalScrollDirection:"forward"},Dr._callOnItemsRendered=void 0,Dr._callOnItemsRendered=S(function(Fr,Kr,an,yn,bn,tt,tr,Kt){return Dr.props.onItemsRendered({overscanColumnStartIndex:Fr,overscanColumnStopIndex:Kr,overscanRowStartIndex:an,overscanRowStopIndex:yn,visibleColumnStartIndex:bn,visibleColumnStopIndex:tt,visibleRowStartIndex:tr,visibleRowStopIndex:Kt})}),Dr._callOnScroll=void 0,Dr._callOnScroll=S(function(Fr,Kr,an,yn,bn){return Dr.props.onScroll({horizontalScrollDirection:an,scrollLeft:Fr,scrollTop:Kr,verticalScrollDirection:yn,scrollUpdateWasRequested:bn})}),Dr._getItemStyle=void 0,Dr._getItemStyle=function(Fr,Kr){var an=Dr.props,yn=an.columnWidth,bn=an.direction,tt=an.rowHeight,tr=Dr._getItemStyleCache(oe&&yn,oe&&bn,oe&&tt),Kt=Fr+":"+Kr,$t;if(tr.hasOwnProperty(Kt))$t=tr[Kt];else{var Et=ie(Dr.props,Kr,Dr._instanceProps),we=bn==="rtl";tr[Kt]=$t={position:"absolute",left:we?void 0:Et,right:we?Et:void 0,top:Vr(Dr.props,Fr,Dr._instanceProps),height:fn(Dr.props,Fr,Dr._instanceProps),width:Qe(Dr.props,Kr,Dr._instanceProps)}}return $t},Dr._getItemStyleCache=void 0,Dr._getItemStyleCache=S(function(Fr,Kr,an){return{}}),Dr._onScroll=function(Fr){var Kr=Fr.currentTarget,an=Kr.clientHeight,yn=Kr.clientWidth,bn=Kr.scrollLeft,tt=Kr.scrollTop,tr=Kr.scrollHeight,Kt=Kr.scrollWidth;Dr.setState(function($t){if($t.scrollLeft===bn&&$t.scrollTop===tt)return null;var Et=Dr.props.direction,we=bn;if(Et==="rtl")switch(U()){case"negative":we=-bn;break;case"positive-descending":we=Kt-yn-bn;break}we=Math.max(0,Math.min(we,Kt-yn));var Dt=Math.max(0,Math.min(tt,tr-an));return{isScrolling:!0,horizontalScrollDirection:$t.scrollLeft<bn?"forward":"backward",scrollLeft:we,scrollTop:Dt,verticalScrollDirection:$t.scrollTop<tt?"forward":"backward",scrollUpdateWasRequested:!1}},Dr._resetIsScrollingDebounced)},Dr._outerRefSetter=function(Fr){var Kr=Dr.props.outerRef;Dr._outerRef=Fr,typeof Kr=="function"?Kr(Fr):Kr!=null&&typeof Kr=="object"&&Kr.hasOwnProperty("current")&&(Kr.current=Fr)},Dr._resetIsScrollingDebounced=function(){Dr._resetIsScrollingTimeoutId!==null&&E(Dr._resetIsScrollingTimeoutId),Dr._resetIsScrollingTimeoutId=O(Dr._resetIsScrolling,X)},Dr._resetIsScrolling=function(){Dr._resetIsScrollingTimeoutId=null,Dr.setState({isScrolling:!1},function(){Dr._getItemStyleCache(-1)})},Dr}Nr.getDerivedStateFromProps=function(Dr,Fr){return $(Dr,Fr),Te(Dr),null};var ln=Nr.prototype;return ln.scrollTo=function(Dr){var Fr=Dr.scrollLeft,Kr=Dr.scrollTop;Fr!==void 0&&(Fr=Math.max(0,Fr)),Kr!==void 0&&(Kr=Math.max(0,Kr)),this.setState(function(an){return Fr===void 0&&(Fr=an.scrollLeft),Kr===void 0&&(Kr=an.scrollTop),an.scrollLeft===Fr&&an.scrollTop===Kr?null:{horizontalScrollDirection:an.scrollLeft<Fr?"forward":"backward",scrollLeft:Fr,scrollTop:Kr,scrollUpdateWasRequested:!0,verticalScrollDirection:an.scrollTop<Kr?"forward":"backward"}},this._resetIsScrollingDebounced)},ln.scrollToItem=function(Dr){var Fr=Dr.align,Kr=Fr===void 0?"auto":Fr,an=Dr.columnIndex,yn=Dr.rowIndex,bn=this.props,tt=bn.columnCount,tr=bn.height,Kt=bn.rowCount,$t=bn.width,Et=this.state,we=Et.scrollLeft,Dt=Et.scrollTop,Vt=y();an!==void 0&&(an=Math.max(0,Math.min(an,tt-1))),yn!==void 0&&(yn=Math.max(0,Math.min(yn,Kt-1)));var ht=lr(this.props,this._instanceProps),kt=fr(this.props,this._instanceProps),Q=kt>$t?Vt:0,at=ht>tr?Vt:0;this.scrollTo({scrollLeft:an!==void 0?kr(this.props,an,Kr,we,this._instanceProps,at):we,scrollTop:yn!==void 0?En(this.props,yn,Kr,Dt,this._instanceProps,Q):Dt})},ln.componentDidMount=function(){var Dr=this.props,Fr=Dr.initialScrollLeft,Kr=Dr.initialScrollTop;if(this._outerRef!=null){var an=this._outerRef;typeof Fr=="number"&&(an.scrollLeft=Fr),typeof Kr=="number"&&(an.scrollTop=Kr)}this._callPropsCallbacks()},ln.componentDidUpdate=function(){var Dr=this.props.direction,Fr=this.state,Kr=Fr.scrollLeft,an=Fr.scrollTop,yn=Fr.scrollUpdateWasRequested;if(yn&&this._outerRef!=null){var bn=this._outerRef;if(Dr==="rtl")switch(U()){case"negative":bn.scrollLeft=-Kr;break;case"positive-ascending":bn.scrollLeft=Kr;break;default:var tt=bn.clientWidth,tr=bn.scrollWidth;bn.scrollLeft=tr-tt-Kr;break}else bn.scrollLeft=Math.max(0,Kr);bn.scrollTop=Math.max(0,an)}this._callPropsCallbacks()},ln.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&E(this._resetIsScrollingTimeoutId)},ln.render=function(){var Dr=this.props,Fr=Dr.children,Kr=Dr.className,an=Dr.columnCount,yn=Dr.direction,bn=Dr.height,tt=Dr.innerRef,tr=Dr.innerElementType,Kt=Dr.innerTagName,$t=Dr.itemData,Et=Dr.itemKey,we=Et===void 0?F:Et,Dt=Dr.outerElementType,Vt=Dr.outerTagName,ht=Dr.rowCount,kt=Dr.style,Q=Dr.useIsScrolling,at=Dr.width,B=this.state.isScrolling,C=this._getHorizontalRangeToRender(),I=C[0],H=C[1],mt=this._getVerticalRangeToRender(),Pt=mt[0],Lt=mt[1],Jt=[];if(an>0&&ht)for(var Oe=Pt;Oe<=Lt;Oe++)for(var ye=I;ye<=H;ye++)Jt.push((0,x.createElement)(Fr,{columnIndex:ye,data:$t,isScrolling:Q?B:void 0,key:we({columnIndex:ye,data:$t,rowIndex:Oe}),rowIndex:Oe,style:this._getItemStyle(Oe,ye)}));var Ze=lr(this.props,this._instanceProps),wr=fr(this.props,this._instanceProps);return(0,x.createElement)(Dt||Vt||"div",{className:Kr,onScroll:this._onScroll,ref:this._outerRefSetter,style:(0,m.Z)({position:"relative",height:bn,width:at,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:yn},kt)},(0,x.createElement)(tr||Kt||"div",{children:Jt,ref:tt,style:{height:Ze,pointerEvents:B?"none":void 0,width:wr}}))},ln._callPropsCallbacks=function(){var Dr=this.props,Fr=Dr.columnCount,Kr=Dr.onItemsRendered,an=Dr.onScroll,yn=Dr.rowCount;if(typeof Kr=="function"&&Fr>0&&yn>0){var bn=this._getHorizontalRangeToRender(),tt=bn[0],tr=bn[1],Kt=bn[2],$t=bn[3],Et=this._getVerticalRangeToRender(),we=Et[0],Dt=Et[1],Vt=Et[2],ht=Et[3];this._callOnItemsRendered(tt,tr,we,Dt,Kt,$t,Vt,ht)}if(typeof an=="function"){var kt=this.state,Q=kt.horizontalScrollDirection,at=kt.scrollLeft,B=kt.scrollTop,C=kt.scrollUpdateWasRequested,I=kt.verticalScrollDirection;this._callOnScroll(at,B,Q,I,C)}},ln._getHorizontalRangeToRender=function(){var Dr=this.props,Fr=Dr.columnCount,Kr=Dr.overscanColumnCount,an=Dr.overscanColumnsCount,yn=Dr.overscanCount,bn=Dr.rowCount,tt=this.state,tr=tt.horizontalScrollDirection,Kt=tt.isScrolling,$t=tt.scrollLeft,Et=Kr||an||yn||1;if(Fr===0||bn===0)return[0,0,0,0];var we=Pe(this.props,$t,this._instanceProps),Dt=qe(this.props,we,$t,this._instanceProps),Vt=!Kt||tr==="backward"?Math.max(1,Et):1,ht=!Kt||tr==="forward"?Math.max(1,Et):1;return[Math.max(0,we-Vt),Math.max(0,Math.min(Fr-1,Dt+ht)),we,Dt]},ln._getVerticalRangeToRender=function(){var Dr=this.props,Fr=Dr.columnCount,Kr=Dr.overscanCount,an=Dr.overscanRowCount,yn=Dr.overscanRowsCount,bn=Dr.rowCount,tt=this.state,tr=tt.isScrolling,Kt=tt.verticalScrollDirection,$t=tt.scrollTop,Et=an||yn||Kr||1;if(Fr===0||bn===0)return[0,0,0,0];var we=Je(this.props,$t,this._instanceProps),Dt=dr(this.props,we,$t,this._instanceProps),Vt=!tr||Kt==="backward"?Math.max(1,Et):1,ht=!tr||Kt==="forward"?Math.max(1,Et):1;return[Math.max(0,we-Vt),Math.max(0,Math.min(bn-1,Dt+ht)),we,Dt]},Nr}(x.PureComponent),vt.defaultProps={direction:"ltr",itemData:void 0,useIsScrolling:!1},vt}var $=function(vt,ie){var Pe=vt.children,qe=vt.direction,Qe=vt.height,lr=vt.innerTagName,fr=vt.outerTagName,kr=vt.overscanColumnsCount,En=vt.overscanCount,fn=vt.overscanRowsCount,Vr=vt.width,Je=ie.instance},J=50,ut=function(vt,ie){var Pe=vt.rowCount,qe=ie.rowMetadataMap,Qe=ie.estimatedRowHeight,lr=ie.lastMeasuredRowIndex,fr=0;if(lr>=Pe&&(lr=Pe-1),lr>=0){var kr=qe[lr];fr=kr.offset+kr.size}var En=Pe-lr-1,fn=En*Qe;return fr+fn},nt=function(vt,ie){var Pe=vt.columnCount,qe=ie.columnMetadataMap,Qe=ie.estimatedColumnWidth,lr=ie.lastMeasuredColumnIndex,fr=0;if(lr>=Pe&&(lr=Pe-1),lr>=0){var kr=qe[lr];fr=kr.offset+kr.size}var En=Pe-lr-1,fn=En*Qe;return fr+fn},yt=function(vt,ie,Pe,qe){var Qe,lr,fr;if(vt==="column"?(Qe=qe.columnMetadataMap,lr=ie.columnWidth,fr=qe.lastMeasuredColumnIndex):(Qe=qe.rowMetadataMap,lr=ie.rowHeight,fr=qe.lastMeasuredRowIndex),Pe>fr){var kr=0;if(fr>=0){var En=Qe[fr];kr=En.offset+En.size}for(var fn=fr+1;fn<=Pe;fn++){var Vr=lr(fn);Qe[fn]={offset:kr,size:Vr},kr+=Vr}vt==="column"?qe.lastMeasuredColumnIndex=Pe:qe.lastMeasuredRowIndex=Pe}return Qe[Pe]},dt=function(vt,ie,Pe,qe){var Qe,lr;vt==="column"?(Qe=Pe.columnMetadataMap,lr=Pe.lastMeasuredColumnIndex):(Qe=Pe.rowMetadataMap,lr=Pe.lastMeasuredRowIndex);var fr=lr>0?Qe[lr].offset:0;return fr>=qe?Ft(vt,ie,Pe,lr,0,qe):wt(vt,ie,Pe,Math.max(0,lr),qe)},Ft=function(vt,ie,Pe,qe,Qe,lr){for(;Qe<=qe;){var fr=Qe+Math.floor((qe-Qe)/2),kr=yt(vt,ie,fr,Pe).offset;if(kr===lr)return fr;kr<lr?Qe=fr+1:kr>lr&&(qe=fr-1)}return Qe>0?Qe-1:0},wt=function(vt,ie,Pe,qe,Qe){for(var lr=vt==="column"?ie.columnCount:ie.rowCount,fr=1;qe<lr&&yt(vt,ie,qe,Pe).offset<Qe;)qe+=fr,fr*=2;return Ft(vt,ie,Pe,Math.min(qe,lr-1),Math.floor(qe/2),Qe)},St=function(vt,ie,Pe,qe,Qe,lr,fr){var kr=vt==="column"?ie.width:ie.height,En=yt(vt,ie,Pe,lr),fn=vt==="column"?nt(ie,lr):ut(ie,lr),Vr=Math.max(0,Math.min(fn-kr,En.offset)),Je=Math.max(0,En.offset-kr+fr+En.size);switch(qe==="smart"&&(Qe>=Je-kr&&Qe<=Vr+kr?qe="auto":qe="center"),qe){case"start":return Vr;case"end":return Je;case"center":return Math.round(Je+(Vr-Je)/2);case"auto":default:return Qe>=Je&&Qe<=Vr?Qe:Je>Vr||Qe<Je?Je:Vr}},et=q({getColumnOffset:function(vt,ie,Pe){return yt("column",vt,ie,Pe).offset},getColumnStartIndexForOffset:function(vt,ie,Pe){return dt("column",vt,Pe,ie)},getColumnStopIndexForStartIndex:function(vt,ie,Pe,qe){for(var Qe=vt.columnCount,lr=vt.width,fr=yt("column",vt,ie,qe),kr=Pe+lr,En=fr.offset+fr.size,fn=ie;fn<Qe-1&&En<kr;)fn++,En+=yt("column",vt,fn,qe).size;return fn},getColumnWidth:function(vt,ie,Pe){return Pe.columnMetadataMap[ie].size},getEstimatedTotalHeight:ut,getEstimatedTotalWidth:nt,getOffsetForColumnAndAlignment:function(vt,ie,Pe,qe,Qe,lr){return St("column",vt,ie,Pe,qe,Qe,lr)},getOffsetForRowAndAlignment:function(vt,ie,Pe,qe,Qe,lr){return St("row",vt,ie,Pe,qe,Qe,lr)},getRowOffset:function(vt,ie,Pe){return yt("row",vt,ie,Pe).offset},getRowHeight:function(vt,ie,Pe){return Pe.rowMetadataMap[ie].size},getRowStartIndexForOffset:function(vt,ie,Pe){return dt("row",vt,Pe,ie)},getRowStopIndexForStartIndex:function(vt,ie,Pe,qe){for(var Qe=vt.rowCount,lr=vt.height,fr=yt("row",vt,ie,qe),kr=Pe+lr,En=fr.offset+fr.size,fn=ie;fn<Qe-1&&En<kr;)fn++,En+=yt("row",vt,fn,qe).size;return fn},initInstanceProps:function(vt,ie){var Pe=vt,qe=Pe.estimatedColumnWidth,Qe=Pe.estimatedRowHeight,lr={columnMetadataMap:{},estimatedColumnWidth:qe||J,estimatedRowHeight:Qe||J,lastMeasuredColumnIndex:-1,lastMeasuredRowIndex:-1,rowMetadataMap:{}};return ie.resetAfterColumnIndex=function(fr,kr){kr===void 0&&(kr=!0),ie.resetAfterIndices({columnIndex:fr,shouldForceUpdate:kr})},ie.resetAfterRowIndex=function(fr,kr){kr===void 0&&(kr=!0),ie.resetAfterIndices({rowIndex:fr,shouldForceUpdate:kr})},ie.resetAfterIndices=function(fr){var kr=fr.columnIndex,En=fr.rowIndex,fn=fr.shouldForceUpdate,Vr=fn===void 0?!0:fn;typeof kr=="number"&&(lr.lastMeasuredColumnIndex=Math.min(lr.lastMeasuredColumnIndex,kr-1)),typeof En=="number"&&(lr.lastMeasuredRowIndex=Math.min(lr.lastMeasuredRowIndex,En-1)),ie._getItemStyleCache(-1),Vr&&ie.forceUpdate()},lr},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(vt){var ie=vt.columnWidth,Pe=vt.rowHeight}}),it=150,Tt=function(vt,ie){return vt},Nt=null,st=null;function xt(he){var vt,ie=he.getItemOffset,Pe=he.getEstimatedTotalSize,qe=he.getItemSize,Qe=he.getOffsetForIndexAndAlignment,lr=he.getStartIndexForOffset,fr=he.getStopIndexForStartIndex,kr=he.initInstanceProps,En=he.shouldResetStyleCacheOnItemSizeChange,fn=he.validateProps;return vt=function(Vr){M(Je,Vr);function Je(nr){var oe;return oe=Vr.call(this,nr)||this,oe._instanceProps=kr(oe.props,(0,R.Z)(oe)),oe._outerRef=void 0,oe._resetIsScrollingTimeoutId=null,oe.state={instance:(0,R.Z)(oe),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof oe.props.initialScrollOffset=="number"?oe.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},oe._callOnItemsRendered=void 0,oe._callOnItemsRendered=S(function(Te,Lr,Nr,ln){return oe.props.onItemsRendered({overscanStartIndex:Te,overscanStopIndex:Lr,visibleStartIndex:Nr,visibleStopIndex:ln})}),oe._callOnScroll=void 0,oe._callOnScroll=S(function(Te,Lr,Nr){return oe.props.onScroll({scrollDirection:Te,scrollOffset:Lr,scrollUpdateWasRequested:Nr})}),oe._getItemStyle=void 0,oe._getItemStyle=function(Te){var Lr=oe.props,Nr=Lr.direction,ln=Lr.itemSize,en=Lr.layout,Dr=oe._getItemStyleCache(En&&ln,En&&en,En&&Nr),Fr;if(Dr.hasOwnProperty(Te))Fr=Dr[Te];else{var Kr=ie(oe.props,Te,oe._instanceProps),an=qe(oe.props,Te,oe._instanceProps),yn=Nr==="horizontal"||en==="horizontal",bn=Nr==="rtl",tt=yn?Kr:0;Dr[Te]=Fr={position:"absolute",left:bn?void 0:tt,right:bn?tt:void 0,top:yn?0:Kr,height:yn?"100%":an,width:yn?an:"100%"}}return Fr},oe._getItemStyleCache=void 0,oe._getItemStyleCache=S(function(Te,Lr,Nr){return{}}),oe._onScrollHorizontal=function(Te){var Lr=Te.currentTarget,Nr=Lr.clientWidth,ln=Lr.scrollLeft,en=Lr.scrollWidth;oe.setState(function(Dr){if(Dr.scrollOffset===ln)return null;var Fr=oe.props.direction,Kr=ln;if(Fr==="rtl")switch(U()){case"negative":Kr=-ln;break;case"positive-descending":Kr=en-Nr-ln;break}return Kr=Math.max(0,Math.min(Kr,en-Nr)),{isScrolling:!0,scrollDirection:Dr.scrollOffset<ln?"forward":"backward",scrollOffset:Kr,scrollUpdateWasRequested:!1}},oe._resetIsScrollingDebounced)},oe._onScrollVertical=function(Te){var Lr=Te.currentTarget,Nr=Lr.clientHeight,ln=Lr.scrollHeight,en=Lr.scrollTop;oe.setState(function(Dr){if(Dr.scrollOffset===en)return null;var Fr=Math.max(0,Math.min(en,ln-Nr));return{isScrolling:!0,scrollDirection:Dr.scrollOffset<Fr?"forward":"backward",scrollOffset:Fr,scrollUpdateWasRequested:!1}},oe._resetIsScrollingDebounced)},oe._outerRefSetter=function(Te){var Lr=oe.props.outerRef;oe._outerRef=Te,typeof Lr=="function"?Lr(Te):Lr!=null&&typeof Lr=="object"&&Lr.hasOwnProperty("current")&&(Lr.current=Te)},oe._resetIsScrollingDebounced=function(){oe._resetIsScrollingTimeoutId!==null&&E(oe._resetIsScrollingTimeoutId),oe._resetIsScrollingTimeoutId=O(oe._resetIsScrolling,it)},oe._resetIsScrolling=function(){oe._resetIsScrollingTimeoutId=null,oe.setState({isScrolling:!1},function(){oe._getItemStyleCache(-1,null)})},oe}Je.getDerivedStateFromProps=function(oe,Te){return zt(oe,Te),fn(oe),null};var dr=Je.prototype;return dr.scrollTo=function(oe){oe=Math.max(0,oe),this.setState(function(Te){return Te.scrollOffset===oe?null:{scrollDirection:Te.scrollOffset<oe?"forward":"backward",scrollOffset:oe,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},dr.scrollToItem=function(oe,Te){Te===void 0&&(Te="auto");var Lr=this.props,Nr=Lr.itemCount,ln=Lr.layout,en=this.state.scrollOffset;oe=Math.max(0,Math.min(oe,Nr-1));var Dr=0;if(this._outerRef){var Fr=this._outerRef;ln==="vertical"?Dr=Fr.scrollWidth>Fr.clientWidth?y():0:Dr=Fr.scrollHeight>Fr.clientHeight?y():0}this.scrollTo(Qe(this.props,oe,Te,en,this._instanceProps,Dr))},dr.componentDidMount=function(){var oe=this.props,Te=oe.direction,Lr=oe.initialScrollOffset,Nr=oe.layout;if(typeof Lr=="number"&&this._outerRef!=null){var ln=this._outerRef;Te==="horizontal"||Nr==="horizontal"?ln.scrollLeft=Lr:ln.scrollTop=Lr}this._callPropsCallbacks()},dr.componentDidUpdate=function(){var oe=this.props,Te=oe.direction,Lr=oe.layout,Nr=this.state,ln=Nr.scrollOffset,en=Nr.scrollUpdateWasRequested;if(en&&this._outerRef!=null){var Dr=this._outerRef;if(Te==="horizontal"||Lr==="horizontal")if(Te==="rtl")switch(U()){case"negative":Dr.scrollLeft=-ln;break;case"positive-ascending":Dr.scrollLeft=ln;break;default:var Fr=Dr.clientWidth,Kr=Dr.scrollWidth;Dr.scrollLeft=Kr-Fr-ln;break}else Dr.scrollLeft=ln;else Dr.scrollTop=ln}this._callPropsCallbacks()},dr.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&E(this._resetIsScrollingTimeoutId)},dr.render=function(){var oe=this.props,Te=oe.children,Lr=oe.className,Nr=oe.direction,ln=oe.height,en=oe.innerRef,Dr=oe.innerElementType,Fr=oe.innerTagName,Kr=oe.itemCount,an=oe.itemData,yn=oe.itemKey,bn=yn===void 0?Tt:yn,tt=oe.layout,tr=oe.outerElementType,Kt=oe.outerTagName,$t=oe.style,Et=oe.useIsScrolling,we=oe.width,Dt=this.state.isScrolling,Vt=Nr==="horizontal"||tt==="horizontal",ht=Vt?this._onScrollHorizontal:this._onScrollVertical,kt=this._getRangeToRender(),Q=kt[0],at=kt[1],B=[];if(Kr>0)for(var C=Q;C<=at;C++)B.push((0,x.createElement)(Te,{data:an,key:bn(C,an),index:C,isScrolling:Et?Dt:void 0,style:this._getItemStyle(C)}));var I=Pe(this.props,this._instanceProps);return(0,x.createElement)(tr||Kt||"div",{className:Lr,onScroll:ht,ref:this._outerRefSetter,style:(0,m.Z)({position:"relative",height:ln,width:we,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:Nr},$t)},(0,x.createElement)(Dr||Fr||"div",{children:B,ref:en,style:{height:Vt?"100%":I,pointerEvents:Dt?"none":void 0,width:Vt?I:"100%"}}))},dr._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var oe=this.props.itemCount;if(oe>0){var Te=this._getRangeToRender(),Lr=Te[0],Nr=Te[1],ln=Te[2],en=Te[3];this._callOnItemsRendered(Lr,Nr,ln,en)}}if(typeof this.props.onScroll=="function"){var Dr=this.state,Fr=Dr.scrollDirection,Kr=Dr.scrollOffset,an=Dr.scrollUpdateWasRequested;this._callOnScroll(Fr,Kr,an)}},dr._getRangeToRender=function(){var oe=this.props,Te=oe.itemCount,Lr=oe.overscanCount,Nr=this.state,ln=Nr.isScrolling,en=Nr.scrollDirection,Dr=Nr.scrollOffset;if(Te===0)return[0,0,0,0];var Fr=lr(this.props,Dr,this._instanceProps),Kr=fr(this.props,Fr,Dr,this._instanceProps),an=!ln||en==="backward"?Math.max(1,Lr):1,yn=!ln||en==="forward"?Math.max(1,Lr):1;return[Math.max(0,Fr-an),Math.max(0,Math.min(Te-1,Kr+yn)),Fr,Kr]},Je}(x.PureComponent),vt.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},vt}var zt=function(vt,ie){var Pe=vt.children,qe=vt.direction,Qe=vt.height,lr=vt.layout,fr=vt.innerTagName,kr=vt.outerTagName,En=vt.width,fn=ie.instance;if(!1)var Vr},Wt=50,_t=function(vt,ie,Pe){var qe=vt,Qe=qe.itemSize,lr=Pe.itemMetadataMap,fr=Pe.lastMeasuredIndex;if(ie>fr){var kr=0;if(fr>=0){var En=lr[fr];kr=En.offset+En.size}for(var fn=fr+1;fn<=ie;fn++){var Vr=Qe(fn);lr[fn]={offset:kr,size:Vr},kr+=Vr}Pe.lastMeasuredIndex=ie}return lr[ie]},Xt=function(vt,ie,Pe){var qe=ie.itemMetadataMap,Qe=ie.lastMeasuredIndex,lr=Qe>0?qe[Qe].offset:0;return lr>=Pe?te(vt,ie,Qe,0,Pe):ue(vt,ie,Math.max(0,Qe),Pe)},te=function(vt,ie,Pe,qe,Qe){for(;qe<=Pe;){var lr=qe+Math.floor((Pe-qe)/2),fr=_t(vt,lr,ie).offset;if(fr===Qe)return lr;fr<Qe?qe=lr+1:fr>Qe&&(Pe=lr-1)}return qe>0?qe-1:0},ue=function(vt,ie,Pe,qe){for(var Qe=vt.itemCount,lr=1;Pe<Qe&&_t(vt,Pe,ie).offset<qe;)Pe+=lr,lr*=2;return te(vt,ie,Math.min(Pe,Qe-1),Math.floor(Pe/2),qe)},fe=function(vt,ie){var Pe=vt.itemCount,qe=ie.itemMetadataMap,Qe=ie.estimatedItemSize,lr=ie.lastMeasuredIndex,fr=0;if(lr>=Pe&&(lr=Pe-1),lr>=0){var kr=qe[lr];fr=kr.offset+kr.size}var En=Pe-lr-1,fn=En*Qe;return fr+fn},Gt=xt({getItemOffset:function(vt,ie,Pe){return _t(vt,ie,Pe).offset},getItemSize:function(vt,ie,Pe){return Pe.itemMetadataMap[ie].size},getEstimatedTotalSize:fe,getOffsetForIndexAndAlignment:function(vt,ie,Pe,qe,Qe,lr){var fr=vt.direction,kr=vt.height,En=vt.layout,fn=vt.width,Vr=fr==="horizontal"||En==="horizontal",Je=Vr?fn:kr,dr=_t(vt,ie,Qe),nr=fe(vt,Qe),oe=Math.max(0,Math.min(nr-Je,dr.offset)),Te=Math.max(0,dr.offset-Je+dr.size+lr);switch(Pe==="smart"&&(qe>=Te-Je&&qe<=oe+Je?Pe="auto":Pe="center"),Pe){case"start":return oe;case"end":return Te;case"center":return Math.round(Te+(oe-Te)/2);case"auto":default:return qe>=Te&&qe<=oe?qe:qe<Te?Te:oe}},getStartIndexForOffset:function(vt,ie,Pe){return Xt(vt,Pe,ie)},getStopIndexForStartIndex:function(vt,ie,Pe,qe){for(var Qe=vt.direction,lr=vt.height,fr=vt.itemCount,kr=vt.layout,En=vt.width,fn=Qe==="horizontal"||kr==="horizontal",Vr=fn?En:lr,Je=_t(vt,ie,qe),dr=Pe+Vr,nr=Je.offset+Je.size,oe=ie;oe<fr-1&&nr<dr;)oe++,nr+=_t(vt,oe,qe).size;return oe},initInstanceProps:function(vt,ie){var Pe=vt,qe=Pe.estimatedItemSize,Qe={itemMetadataMap:{},estimatedItemSize:qe||Wt,lastMeasuredIndex:-1};return ie.resetAfterIndex=function(lr,fr){fr===void 0&&(fr=!0),Qe.lastMeasuredIndex=Math.min(Qe.lastMeasuredIndex,lr-1),ie._getItemStyleCache(-1),fr&&ie.forceUpdate()},Qe},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(vt){var ie=vt.itemSize}}),ae=q({getColumnOffset:function(vt,ie){var Pe=vt.columnWidth;return ie*Pe},getColumnWidth:function(vt,ie){var Pe=vt.columnWidth;return Pe},getRowOffset:function(vt,ie){var Pe=vt.rowHeight;return ie*Pe},getRowHeight:function(vt,ie){var Pe=vt.rowHeight;return Pe},getEstimatedTotalHeight:function(vt){var ie=vt.rowCount,Pe=vt.rowHeight;return Pe*ie},getEstimatedTotalWidth:function(vt){var ie=vt.columnCount,Pe=vt.columnWidth;return Pe*ie},getOffsetForColumnAndAlignment:function(vt,ie,Pe,qe,Qe,lr){var fr=vt.columnCount,kr=vt.columnWidth,En=vt.width,fn=Math.max(0,fr*kr-En),Vr=Math.min(fn,ie*kr),Je=Math.max(0,ie*kr-En+lr+kr);switch(Pe==="smart"&&(qe>=Je-En&&qe<=Vr+En?Pe="auto":Pe="center"),Pe){case"start":return Vr;case"end":return Je;case"center":var dr=Math.round(Je+(Vr-Je)/2);return dr<Math.ceil(En/2)?0:dr>fn+Math.floor(En/2)?fn:dr;case"auto":default:return qe>=Je&&qe<=Vr?qe:Je>Vr||qe<Je?Je:Vr}},getOffsetForRowAndAlignment:function(vt,ie,Pe,qe,Qe,lr){var fr=vt.rowHeight,kr=vt.height,En=vt.rowCount,fn=Math.max(0,En*fr-kr),Vr=Math.min(fn,ie*fr),Je=Math.max(0,ie*fr-kr+lr+fr);switch(Pe==="smart"&&(qe>=Je-kr&&qe<=Vr+kr?Pe="auto":Pe="center"),Pe){case"start":return Vr;case"end":return Je;case"center":var dr=Math.round(Je+(Vr-Je)/2);return dr<Math.ceil(kr/2)?0:dr>fn+Math.floor(kr/2)?fn:dr;case"auto":default:return qe>=Je&&qe<=Vr?qe:Je>Vr||qe<Je?Je:Vr}},getColumnStartIndexForOffset:function(vt,ie){var Pe=vt.columnWidth,qe=vt.columnCount;return Math.max(0,Math.min(qe-1,Math.floor(ie/Pe)))},getColumnStopIndexForStartIndex:function(vt,ie,Pe){var qe=vt.columnWidth,Qe=vt.columnCount,lr=vt.width,fr=ie*qe,kr=Math.ceil((lr+Pe-fr)/qe);return Math.max(0,Math.min(Qe-1,ie+kr-1))},getRowStartIndexForOffset:function(vt,ie){var Pe=vt.rowHeight,qe=vt.rowCount;return Math.max(0,Math.min(qe-1,Math.floor(ie/Pe)))},getRowStopIndexForStartIndex:function(vt,ie,Pe){var qe=vt.rowHeight,Qe=vt.rowCount,lr=vt.height,fr=ie*qe,kr=Math.ceil((lr+Pe-fr)/qe);return Math.max(0,Math.min(Qe-1,ie+kr-1))},initInstanceProps:function(vt){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(vt){var ie=vt.columnWidth,Pe=vt.rowHeight}}),Ne=xt({getItemOffset:function(vt,ie){var Pe=vt.itemSize;return ie*Pe},getItemSize:function(vt,ie){var Pe=vt.itemSize;return Pe},getEstimatedTotalSize:function(vt){var ie=vt.itemCount,Pe=vt.itemSize;return Pe*ie},getOffsetForIndexAndAlignment:function(vt,ie,Pe,qe,Qe,lr){var fr=vt.direction,kr=vt.height,En=vt.itemCount,fn=vt.itemSize,Vr=vt.layout,Je=vt.width,dr=fr==="horizontal"||Vr==="horizontal",nr=dr?Je:kr,oe=Math.max(0,En*fn-nr),Te=Math.min(oe,ie*fn),Lr=Math.max(0,ie*fn-nr+fn+lr);switch(Pe==="smart"&&(qe>=Lr-nr&&qe<=Te+nr?Pe="auto":Pe="center"),Pe){case"start":return Te;case"end":return Lr;case"center":{var Nr=Math.round(Lr+(Te-Lr)/2);return Nr<Math.ceil(nr/2)?0:Nr>oe+Math.floor(nr/2)?oe:Nr}case"auto":default:return qe>=Lr&&qe<=Te?qe:qe<Lr?Lr:Te}},getStartIndexForOffset:function(vt,ie){var Pe=vt.itemCount,qe=vt.itemSize;return Math.max(0,Math.min(Pe-1,Math.floor(ie/qe)))},getStopIndexForStartIndex:function(vt,ie,Pe){var qe=vt.direction,Qe=vt.height,lr=vt.itemCount,fr=vt.itemSize,kr=vt.layout,En=vt.width,fn=qe==="horizontal"||kr==="horizontal",Vr=ie*fr,Je=fn?En:Qe,dr=Math.ceil((Je+Pe-Vr)/fr);return Math.max(0,Math.min(lr-1,ie+dr-1))},initInstanceProps:function(vt){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(vt){var ie=vt.itemSize}});function ee(he,vt){for(var ie in he)if(!(ie in vt))return!0;for(var Pe in vt)if(he[Pe]!==vt[Pe])return!0;return!1}var de=null,ze=null;function be(he,vt){var ie=he.style,Pe=_objectWithoutPropertiesLoose(he,de),qe=vt.style,Qe=_objectWithoutPropertiesLoose(vt,ze);return!ee(ie,qe)&&!ee(Pe,Qe)}function ke(he,vt){return!be(this.props,he)||ee(this.state,vt)}},481550:function(We){(function(G,_){We.exports=_()})(this,function(){"use strict";var G=function(Ot){return Ot instanceof Uint8Array||Ot instanceof Uint16Array||Ot instanceof Uint32Array||Ot instanceof Int8Array||Ot instanceof Int16Array||Ot instanceof Int32Array||Ot instanceof Float32Array||Ot instanceof Float64Array||Ot instanceof Uint8ClampedArray},_=function(Ot,Ce){for(var Ke=Object.keys(Ce),Hr=0;Hr<Ke.length;++Hr)Ot[Ke[Hr]]=Ce[Ke[Hr]];return Ot},m=`
`;function R(Ot){return typeof atob!="undefined"?atob(Ot):"base64:"+Ot}function w(Ot){var Ce=new Error("(regl) "+Ot);throw console.error(Ce),Ce}function M(Ot,Ce){Ot||w(Ce)}function P(Ot){return Ot?": "+Ot:""}function L(Ot,Ce,Ke){Ot in Ce||w("unknown parameter ("+Ot+")"+P(Ke)+". possible values: "+Object.keys(Ce).join())}function p(Ot,Ce){G(Ot)||w("invalid parameter type"+P(Ce)+". must be a typed array")}function b(Ot,Ce){switch(Ce){case"number":return typeof Ot=="number";case"object":return typeof Ot=="object";case"string":return typeof Ot=="string";case"boolean":return typeof Ot=="boolean";case"function":return typeof Ot=="function";case"undefined":return typeof Ot=="undefined";case"symbol":return typeof Ot=="symbol"}}function S(Ot,Ce,Ke){b(Ot,Ce)||w("invalid parameter type"+P(Ke)+". expected "+Ce+", got "+typeof Ot)}function x(Ot,Ce){Ot>=0&&(Ot|0)===Ot||w("invalid parameter type, ("+Ot+")"+P(Ce)+". must be a nonnegative integer")}function g(Ot,Ce,Ke){Ce.indexOf(Ot)<0&&w("invalid value"+P(Ke)+". must be one of: "+Ce)}var T=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function E(Ot){Object.keys(Ot).forEach(function(Ce){T.indexOf(Ce)<0&&w('invalid regl constructor argument "'+Ce+'". must be one of '+T)})}function O(Ot,Ce){for(Ot=Ot+"";Ot.length<Ce;)Ot=" "+Ot;return Ot}function k(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function y(Ot,Ce){this.number=Ot,this.line=Ce,this.errors=[]}function l(Ot,Ce,Ke){this.file=Ot,this.line=Ce,this.message=Ke}function U(){var Ot=new Error,Ce=(Ot.stack||Ot).toString(),Ke=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(Ce);if(Ke)return Ke[1];var Hr=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(Ce);return Hr?Hr[1]:"unknown"}function X(){var Ot=new Error,Ce=(Ot.stack||Ot).toString(),Ke=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(Ce);if(Ke)return Ke[1];var Hr=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(Ce);return Hr?Hr[1]:"unknown"}function F(Ot,Ce){var Ke=Ot.split(`
`),Hr=1,hn=0,Br={unknown:new k,0:new k};Br.unknown.name=Br[0].name=Ce||U(),Br.unknown.lines.push(new y(0,""));for(var Jr=0;Jr<Ke.length;++Jr){var On=Ke[Jr],Rn=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(On);if(Rn)switch(Rn[1]){case"line":var In=/(\d+)(\s+\d+)?/.exec(Rn[2]);In&&(Hr=In[1]|0,In[2]&&(hn=In[2]|0,hn in Br||(Br[hn]=new k)));break;case"define":var Ln=/SHADER_NAME(_B64)?\s+(.*)$/.exec(Rn[2]);Ln&&(Br[hn].name=Ln[1]?R(Ln[2]):Ln[2]);break}Br[hn].lines.push(new y(Hr++,On))}return Object.keys(Br).forEach(function(Fn){var v=Br[Fn];v.lines.forEach(function(N){v.index[N.number]=N})}),Br}function W(Ot){var Ce=[];return Ot.split(`
`).forEach(function(Ke){if(!(Ke.length<5)){var Hr=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Ke);Hr?Ce.push(new l(Hr[1]|0,Hr[2]|0,Hr[3].trim())):Ke.length>0&&Ce.push(new l("unknown",0,Ke))}}),Ce}function j(Ot,Ce){Ce.forEach(function(Ke){var Hr=Ot[Ke.file];if(Hr){var hn=Hr.index[Ke.line];if(hn){hn.errors.push(Ke),Hr.hasErrors=!0;return}}Ot.unknown.hasErrors=!0,Ot.unknown.lines[0].errors.push(Ke)})}function V(Ot,Ce,Ke,Hr,hn){if(!Ot.getShaderParameter(Ce,Ot.COMPILE_STATUS)){var Br=Ot.getShaderInfoLog(Ce),Jr=Hr===Ot.FRAGMENT_SHADER?"fragment":"vertex";dt(Ke,"string",Jr+" shader source must be a string",hn);var On=F(Ke,hn),Rn=W(Br);j(On,Rn),Object.keys(On).forEach(function(In){var Ln=On[In];if(!Ln.hasErrors)return;var Fn=[""],v=[""];function N(K,ot){Fn.push(K),v.push(ot||"")}N("file number "+In+": "+Ln.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),Ln.lines.forEach(function(K){if(K.errors.length>0){N(O(K.number,4)+"|  ","background-color:yellow; font-weight:bold"),N(K.line+m,"color:red; background-color:yellow; font-weight:bold");var ot=0;K.errors.forEach(function(pt){var bt=pt.message,At=/^\s*'(.*)'\s*:\s*(.*)$/.exec(bt);if(At){var Rt=At[1];switch(bt=At[2],Rt){case"assign":Rt="=";break}ot=Math.max(K.line.indexOf(Rt,ot),0)}else ot=0;N(O("| ",6)),N(O("^^^",ot+3)+m,"font-weight:bold"),N(O("| ",6)),N(bt+m,"font-weight:bold")}),N(O("| ",6)+m)}else N(O(K.number,4)+"|  "),N(K.line+m,"color:red")}),typeof document!="undefined"&&!window.chrome?(v[0]=Fn.join("%c"),console.log.apply(console,v)):console.log(Fn.join(""))}),M.raise("Error compiling "+Jr+" shader, "+On[0].name)}}function q(Ot,Ce,Ke,Hr,hn){if(!Ot.getProgramParameter(Ce,Ot.LINK_STATUS)){var Br=Ot.getProgramInfoLog(Ce),Jr=F(Ke,hn),On=F(Hr,hn),Rn='Error linking program with vertex shader, "'+On[0].name+'", and fragment shader "'+Jr[0].name+'"';typeof document!="undefined"?console.log("%c"+Rn+m+"%c"+Br,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(Rn+m+Br),M.raise(Rn)}}function $(Ot){Ot._commandRef=U()}function J(Ot,Ce,Ke,Hr){$(Ot);function hn(Rn){return Rn?Hr.id(Rn):0}Ot._fragId=hn(Ot.static.frag),Ot._vertId=hn(Ot.static.vert);function Br(Rn,In){Object.keys(In).forEach(function(Ln){Rn[Hr.id(Ln)]=!0})}var Jr=Ot._uniformSet={};Br(Jr,Ce.static),Br(Jr,Ce.dynamic);var On=Ot._attributeSet={};Br(On,Ke.static),Br(On,Ke.dynamic),Ot._hasCount="count"in Ot.static||"count"in Ot.dynamic||"elements"in Ot.static||"elements"in Ot.dynamic}function ut(Ot,Ce){var Ke=X();w(Ot+" in command "+(Ce||U())+(Ke==="unknown"?"":" called from "+Ke))}function nt(Ot,Ce,Ke){Ot||ut(Ce,Ke||U())}function yt(Ot,Ce,Ke,Hr){Ot in Ce||ut("unknown parameter ("+Ot+")"+P(Ke)+". possible values: "+Object.keys(Ce).join(),Hr||U())}function dt(Ot,Ce,Ke,Hr){b(Ot,Ce)||ut("invalid parameter type"+P(Ke)+". expected "+Ce+", got "+typeof Ot,Hr||U())}function Ft(Ot){Ot()}function wt(Ot,Ce,Ke){Ot.texture?g(Ot.texture._texture.internalformat,Ce,"unsupported texture format for attachment"):g(Ot.renderbuffer._renderbuffer.format,Ke,"unsupported renderbuffer format for attachment")}var St=33071,et=9728,it=9984,Tt=9985,Nt=9986,st=9987,xt=5120,zt=5121,Wt=5122,_t=5123,Xt=5124,te=5125,ue=5126,fe=32819,Gt=32820,ae=33635,Ne=34042,ee=36193,de={};de[xt]=de[zt]=1,de[Wt]=de[_t]=de[ee]=de[ae]=de[fe]=de[Gt]=2,de[Xt]=de[te]=de[ue]=de[Ne]=4;function ze(Ot,Ce){return Ot===Gt||Ot===fe||Ot===ae?2:Ot===Ne?4:de[Ot]*Ce}function be(Ot){return!(Ot&Ot-1)&&!!Ot}function ke(Ot,Ce,Ke){var Hr,hn=Ce.width,Br=Ce.height,Jr=Ce.channels;M(hn>0&&hn<=Ke.maxTextureSize&&Br>0&&Br<=Ke.maxTextureSize,"invalid texture shape"),(Ot.wrapS!==St||Ot.wrapT!==St)&&M(be(hn)&&be(Br),"incompatible wrap mode for texture, both width and height must be power of 2"),Ce.mipmask===1?hn!==1&&Br!==1&&M(Ot.minFilter!==it&&Ot.minFilter!==Nt&&Ot.minFilter!==Tt&&Ot.minFilter!==st,"min filter requires mipmap"):(M(be(hn)&&be(Br),"texture must be a square power of 2 to support mipmapping"),M(Ce.mipmask===(hn<<1)-1,"missing or incomplete mipmap data")),Ce.type===ue&&(Ke.extensions.indexOf("oes_texture_float_linear")<0&&M(Ot.minFilter===et&&Ot.magFilter===et,"filter not supported, must enable oes_texture_float_linear"),M(!Ot.genMipmaps,"mipmap generation not supported with float textures"));var On=Ce.images;for(Hr=0;Hr<16;++Hr)if(On[Hr]){var Rn=hn>>Hr,In=Br>>Hr;M(Ce.mipmask&1<<Hr,"missing mipmap data");var Ln=On[Hr];if(M(Ln.width===Rn&&Ln.height===In,"invalid shape for mip images"),M(Ln.format===Ce.format&&Ln.internalformat===Ce.internalformat&&Ln.type===Ce.type,"incompatible type for mip image"),!Ln.compressed)if(Ln.data){var Fn=Math.ceil(ze(Ln.type,Jr)*Rn/Ln.unpackAlignment)*Ln.unpackAlignment;M(Ln.data.byteLength===Fn*In,"invalid data for image, buffer size is inconsistent with image format")}else Ln.element||Ln.copy}else Ot.genMipmaps||M((Ce.mipmask&1<<Hr)===0,"extra mipmap data");Ce.compressed&&M(!Ot.genMipmaps,"mipmap generation for compressed images not supported")}function he(Ot,Ce,Ke,Hr){var hn=Ot.width,Br=Ot.height,Jr=Ot.channels;M(hn>0&&hn<=Hr.maxTextureSize&&Br>0&&Br<=Hr.maxTextureSize,"invalid texture shape"),M(hn===Br,"cube map must be square"),M(Ce.wrapS===St&&Ce.wrapT===St,"wrap mode not supported by cube map");for(var On=0;On<Ke.length;++On){var Rn=Ke[On];M(Rn.width===hn&&Rn.height===Br,"inconsistent cube map face shape"),Ce.genMipmaps&&(M(!Rn.compressed,"can not generate mipmap for compressed textures"),M(Rn.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var In=Rn.images,Ln=0;Ln<16;++Ln){var Fn=In[Ln];if(Fn){var v=hn>>Ln,N=Br>>Ln;M(Rn.mipmask&1<<Ln,"missing mipmap data"),M(Fn.width===v&&Fn.height===N,"invalid shape for mip images"),M(Fn.format===Ot.format&&Fn.internalformat===Ot.internalformat&&Fn.type===Ot.type,"incompatible type for mip image"),Fn.compressed||(Fn.data?M(Fn.data.byteLength===v*N*Math.max(ze(Fn.type,Jr),Fn.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Fn.element||Fn.copy)}}}}var vt=_(M,{optional:Ft,raise:w,commandRaise:ut,command:nt,parameter:L,commandParameter:yt,constructor:E,type:S,commandType:dt,isTypedArray:p,nni:x,oneOf:g,shaderError:V,linkError:q,callSite:X,saveCommandRef:$,saveDrawInfo:J,framebufferFormat:wt,guessCommand:U,texture2D:ke,textureCube:he}),ie=0,Pe=0,qe=5,Qe=6;function lr(Ot,Ce){this.id=ie++,this.type=Ot,this.data=Ce}function fr(Ot){return Ot.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function kr(Ot){if(Ot.length===0)return[];var Ce=Ot.charAt(0),Ke=Ot.charAt(Ot.length-1);if(Ot.length>1&&Ce===Ke&&(Ce==='"'||Ce==="'"))return['"'+fr(Ot.substr(1,Ot.length-2))+'"'];var Hr=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Ot);if(Hr)return kr(Ot.substr(0,Hr.index)).concat(kr(Hr[1])).concat(kr(Ot.substr(Hr.index+Hr[0].length)));var hn=Ot.split(".");if(hn.length===1)return['"'+fr(Ot)+'"'];for(var Br=[],Jr=0;Jr<hn.length;++Jr)Br=Br.concat(kr(hn[Jr]));return Br}function En(Ot){return"["+kr(Ot).join("][")+"]"}function fn(Ot,Ce){return new lr(Ot,En(Ce+""))}function Vr(Ot){return typeof Ot=="function"&&!Ot._reglType||Ot instanceof lr}function Je(Ot,Ce){if(typeof Ot=="function")return new lr(Pe,Ot);if(typeof Ot=="number"||typeof Ot=="boolean")return new lr(qe,Ot);if(Array.isArray(Ot))return new lr(Qe,Ot.map((Ke,Hr)=>Je(Ke,Ce+"["+Hr+"]")));if(Ot instanceof lr)return Ot;vt(!1,"invalid option type in uniform "+Ce)}var dr={DynamicVariable:lr,define:fn,isDynamic:Vr,unbox:Je,accessor:En},nr={next:typeof requestAnimationFrame=="function"?function(Ot){return requestAnimationFrame(Ot)}:function(Ot){return setTimeout(Ot,16)},cancel:typeof cancelAnimationFrame=="function"?function(Ot){return cancelAnimationFrame(Ot)}:clearTimeout},oe=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Te(){var Ot={"":0},Ce=[""];return{id:function(Ke){var Hr=Ot[Ke];return Hr||(Hr=Ot[Ke]=Ce.length,Ce.push(Ke),Hr)},str:function(Ke){return Ce[Ke]}}}function Lr(Ot,Ce,Ke){var Hr=document.createElement("canvas");_(Hr.style,{border:0,margin:0,padding:0,top:0,left:0}),Ot.appendChild(Hr),Ot===document.body&&(Hr.style.position="absolute",_(Ot.style,{margin:0,padding:0}));function hn(){var On=window.innerWidth,Rn=window.innerHeight;if(Ot!==document.body){var In=Ot.getBoundingClientRect();On=In.right-In.left,Rn=In.bottom-In.top}Hr.width=Ke*On,Hr.height=Ke*Rn,_(Hr.style,{width:On+"px",height:Rn+"px"})}var Br;Ot!==document.body&&typeof ResizeObserver=="function"?(Br=new ResizeObserver(function(){setTimeout(hn)}),Br.observe(Ot)):window.addEventListener("resize",hn,!1);function Jr(){Br?Br.disconnect():window.removeEventListener("resize",hn),Ot.removeChild(Hr)}return hn(),{canvas:Hr,onDestroy:Jr}}function Nr(Ot,Ce){function Ke(Hr){try{return Ot.getContext(Hr,Ce)}catch(hn){return null}}return Ke("webgl")||Ke("experimental-webgl")||Ke("webgl-experimental")}function ln(Ot){return typeof Ot.nodeName=="string"&&typeof Ot.appendChild=="function"&&typeof Ot.getBoundingClientRect=="function"}function en(Ot){return typeof Ot.drawArrays=="function"||typeof Ot.drawElements=="function"}function Dr(Ot){return typeof Ot=="string"?Ot.split():(vt(Array.isArray(Ot),"invalid extension array"),Ot)}function Fr(Ot){return typeof Ot=="string"?(vt(typeof document!="undefined","not supported outside of DOM"),document.querySelector(Ot)):Ot}function Kr(Ot){var Ce=Ot||{},Ke,Hr,hn,Br,Jr={},On=[],Rn=[],In=typeof window=="undefined"?1:window.devicePixelRatio,Ln=!1,Fn=function(K){K&&vt.raise(K)},v=function(){};if(typeof Ce=="string"?(vt(typeof document!="undefined","selector queries only supported in DOM enviroments"),Ke=document.querySelector(Ce),vt(Ke,"invalid query string for element")):typeof Ce=="object"?ln(Ce)?Ke=Ce:en(Ce)?(Br=Ce,hn=Br.canvas):(vt.constructor(Ce),"gl"in Ce?Br=Ce.gl:"canvas"in Ce?hn=Fr(Ce.canvas):"container"in Ce&&(Hr=Fr(Ce.container)),"attributes"in Ce&&(Jr=Ce.attributes,vt.type(Jr,"object","invalid context attributes")),"extensions"in Ce&&(On=Dr(Ce.extensions)),"optionalExtensions"in Ce&&(Rn=Dr(Ce.optionalExtensions)),"onDone"in Ce&&(vt.type(Ce.onDone,"function","invalid or missing onDone callback"),Fn=Ce.onDone),"profile"in Ce&&(Ln=!!Ce.profile),"pixelRatio"in Ce&&(In=+Ce.pixelRatio,vt(In>0,"invalid pixel ratio"))):vt.raise("invalid arguments to regl"),Ke&&(Ke.nodeName.toLowerCase()==="canvas"?hn=Ke:Hr=Ke),!Br){if(!hn){vt(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var N=Lr(Hr||document.body,Fn,In);if(!N)return null;hn=N.canvas,v=N.onDestroy}Jr.premultipliedAlpha===void 0&&(Jr.premultipliedAlpha=!0),Br=Nr(hn,Jr)}return Br?{gl:Br,canvas:hn,container:Hr,extensions:On,optionalExtensions:Rn,pixelRatio:In,profile:Ln,onDone:Fn,onDestroy:v}:(v(),Fn("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function an(Ot,Ce){var Ke={};function Hr(Jr){vt.type(Jr,"string","extension name must be string");var On=Jr.toLowerCase(),Rn;try{Rn=Ke[On]=Ot.getExtension(On)}catch(In){}return!!Rn}for(var hn=0;hn<Ce.extensions.length;++hn){var Br=Ce.extensions[hn];if(!Hr(Br))return Ce.onDestroy(),Ce.onDone('"'+Br+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Ce.optionalExtensions.forEach(Hr),{extensions:Ke,restore:function(){Object.keys(Ke).forEach(function(Jr){if(Ke[Jr]&&!Hr(Jr))throw new Error("(regl): error restoring extension "+Jr)})}}}function yn(Ot,Ce){for(var Ke=Array(Ot),Hr=0;Hr<Ot;++Hr)Ke[Hr]=Ce(Hr);return Ke}var bn=5120,tt=5121,tr=5122,Kt=5123,$t=5124,Et=5125,we=5126;function Dt(Ot){for(var Ce=16;Ce<=1<<28;Ce*=16)if(Ot<=Ce)return Ce;return 0}function Vt(Ot){var Ce,Ke;return Ce=(Ot>65535)<<4,Ot>>>=Ce,Ke=(Ot>255)<<3,Ot>>>=Ke,Ce|=Ke,Ke=(Ot>15)<<2,Ot>>>=Ke,Ce|=Ke,Ke=(Ot>3)<<1,Ot>>>=Ke,Ce|=Ke,Ce|Ot>>1}function ht(){var Ot=yn(8,function(){return[]});function Ce(Br){var Jr=Dt(Br),On=Ot[Vt(Jr)>>2];return On.length>0?On.pop():new ArrayBuffer(Jr)}function Ke(Br){Ot[Vt(Br.byteLength)>>2].push(Br)}function Hr(Br,Jr){var On=null;switch(Br){case bn:On=new Int8Array(Ce(Jr),0,Jr);break;case tt:On=new Uint8Array(Ce(Jr),0,Jr);break;case tr:On=new Int16Array(Ce(2*Jr),0,Jr);break;case Kt:On=new Uint16Array(Ce(2*Jr),0,Jr);break;case $t:On=new Int32Array(Ce(4*Jr),0,Jr);break;case Et:On=new Uint32Array(Ce(4*Jr),0,Jr);break;case we:On=new Float32Array(Ce(4*Jr),0,Jr);break;default:return null}return On.length!==Jr?On.subarray(0,Jr):On}function hn(Br){Ke(Br.buffer)}return{alloc:Ce,free:Ke,allocType:Hr,freeType:hn}}var kt=ht();kt.zero=ht();var Q=3408,at=3410,B=3411,C=3412,I=3413,H=3414,mt=3415,Pt=33901,Lt=33902,Jt=3379,Oe=3386,ye=34921,Ze=36347,wr=36348,er=35661,Ur=35660,xn=34930,rr=36349,xr=34076,Wr=34024,Gr=7936,ce=7937,Yt=7938,ge=35724,Ie=34047,xe=36063,Ye=34852,gr=3553,Mr=34067,vn=34069,Wn=33984,Sn=6408,ea=5126,wn=5121,Hn=36160,la=36053,ba=36064,xa=16384,Yi=function(Ot,Ce){var Ke=1;Ce.ext_texture_filter_anisotropic&&(Ke=Ot.getParameter(Ie));var Hr=1,hn=1;Ce.webgl_draw_buffers&&(Hr=Ot.getParameter(Ye),hn=Ot.getParameter(xe));var Br=!!Ce.oes_texture_float;if(Br){var Jr=Ot.createTexture();Ot.bindTexture(gr,Jr),Ot.texImage2D(gr,0,Sn,1,1,0,Sn,ea,null);var On=Ot.createFramebuffer();if(Ot.bindFramebuffer(Hn,On),Ot.framebufferTexture2D(Hn,ba,gr,Jr,0),Ot.bindTexture(gr,null),Ot.checkFramebufferStatus(Hn)!==la)Br=!1;else{Ot.viewport(0,0,1,1),Ot.clearColor(1,0,0,1),Ot.clear(xa);var Rn=kt.allocType(ea,4);Ot.readPixels(0,0,1,1,Sn,ea,Rn),Ot.getError()?Br=!1:(Ot.deleteFramebuffer(On),Ot.deleteTexture(Jr),Br=Rn[0]===1),kt.freeType(Rn)}}var In=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),Ln=!0;if(!In){var Fn=Ot.createTexture(),v=kt.allocType(wn,36);Ot.activeTexture(Wn),Ot.bindTexture(Mr,Fn),Ot.texImage2D(vn,0,Sn,3,3,0,Sn,wn,v),kt.freeType(v),Ot.bindTexture(Mr,null),Ot.deleteTexture(Fn),Ln=!Ot.getError()}return{colorBits:[Ot.getParameter(at),Ot.getParameter(B),Ot.getParameter(C),Ot.getParameter(I)],depthBits:Ot.getParameter(H),stencilBits:Ot.getParameter(mt),subpixelBits:Ot.getParameter(Q),extensions:Object.keys(Ce).filter(function(N){return!!Ce[N]}),maxAnisotropic:Ke,maxDrawbuffers:Hr,maxColorAttachments:hn,pointSizeDims:Ot.getParameter(Pt),lineWidthDims:Ot.getParameter(Lt),maxViewportDims:Ot.getParameter(Oe),maxCombinedTextureUnits:Ot.getParameter(er),maxCubeMapSize:Ot.getParameter(xr),maxRenderbufferSize:Ot.getParameter(Wr),maxTextureUnits:Ot.getParameter(xn),maxTextureSize:Ot.getParameter(Jt),maxAttributes:Ot.getParameter(ye),maxVertexUniforms:Ot.getParameter(Ze),maxVertexTextureUnits:Ot.getParameter(Ur),maxVaryingVectors:Ot.getParameter(wr),maxFragmentUniforms:Ot.getParameter(rr),glsl:Ot.getParameter(ge),renderer:Ot.getParameter(ce),vendor:Ot.getParameter(Gr),version:Ot.getParameter(Yt),readFloat:Br,npotTextureCube:Ln}};function ri(Ot){return!!Ot&&typeof Ot=="object"&&Array.isArray(Ot.shape)&&Array.isArray(Ot.stride)&&typeof Ot.offset=="number"&&Ot.shape.length===Ot.stride.length&&(Array.isArray(Ot.data)||G(Ot.data))}var ti=function(Ot){return Object.keys(Ot).map(function(Ce){return Ot[Ce]})},Mi={shape:To,flatten:oo};function Vi(Ot,Ce,Ke){for(var Hr=0;Hr<Ce;++Hr)Ke[Hr]=Ot[Hr]}function ao(Ot,Ce,Ke,Hr){for(var hn=0,Br=0;Br<Ce;++Br)for(var Jr=Ot[Br],On=0;On<Ke;++On)Hr[hn++]=Jr[On]}function io(Ot,Ce,Ke,Hr,hn,Br){for(var Jr=Br,On=0;On<Ce;++On)for(var Rn=Ot[On],In=0;In<Ke;++In)for(var Ln=Rn[In],Fn=0;Fn<Hr;++Fn)hn[Jr++]=Ln[Fn]}function wa(Ot,Ce,Ke,Hr,hn){for(var Br=1,Jr=Ke+1;Jr<Ce.length;++Jr)Br*=Ce[Jr];var On=Ce[Ke];if(Ce.length-Ke===4){var Rn=Ce[Ke+1],In=Ce[Ke+2],Ln=Ce[Ke+3];for(Jr=0;Jr<On;++Jr)io(Ot[Jr],Rn,In,Ln,Hr,hn),hn+=Br}else for(Jr=0;Jr<On;++Jr)wa(Ot[Jr],Ce,Ke+1,Hr,hn),hn+=Br}function oo(Ot,Ce,Ke,Hr){var hn=1;if(Ce.length)for(var Br=0;Br<Ce.length;++Br)hn*=Ce[Br];else hn=0;var Jr=Hr||kt.allocType(Ke,hn);switch(Ce.length){case 0:break;case 1:Vi(Ot,Ce[0],Jr);break;case 2:ao(Ot,Ce[0],Ce[1],Jr);break;case 3:io(Ot,Ce[0],Ce[1],Ce[2],Jr,0);break;default:wa(Ot,Ce,0,Jr,0)}return Jr}function To(Ot){for(var Ce=[],Ke=Ot;Ke.length;Ke=Ke[0])Ce.push(Ke.length);return Ce}var ii={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Xi=5120,so=5122,zo=5124,ro=5121,vo=5123,Ao=5125,Go=5126,Ai=5126,$i={int8:Xi,int16:so,int32:zo,uint8:ro,uint16:vo,uint32:Ao,float:Go,float32:Ai},oa=35048,Qt=35040,ve={dynamic:oa,stream:Qt,static:35044},Ge=Mi.flatten,pr=Mi.shape,Xr=35044,Yr=35040,Pr=5121,cn=5126,Mn=[];Mn[5120]=1,Mn[5122]=2,Mn[5124]=4,Mn[5121]=1,Mn[5123]=2,Mn[5125]=4,Mn[5126]=4;function Bn(Ot){return ii[Object.prototype.toString.call(Ot)]|0}function sa(Ot,Ce){for(var Ke=0;Ke<Ce.length;++Ke)Ot[Ke]=Ce[Ke]}function qn(Ot,Ce,Ke,Hr,hn,Br,Jr){for(var On=0,Rn=0;Rn<Ke;++Rn)for(var In=0;In<Hr;++In)Ot[On++]=Ce[hn*Rn+Br*In+Jr]}function ga(Ot,Ce,Ke,Hr){var hn=0,Br={};function Jr(ot){this.id=hn++,this.buffer=Ot.createBuffer(),this.type=ot,this.usage=Xr,this.byteLength=0,this.dimension=1,this.dtype=Pr,this.persistentData=null,Ke.profile&&(this.stats={size:0})}Jr.prototype.bind=function(){Ot.bindBuffer(this.type,this.buffer)},Jr.prototype.destroy=function(){v(this)};var On=[];function Rn(ot,pt){var bt=On.pop();return bt||(bt=new Jr(ot)),bt.bind(),Fn(bt,pt,Yr,0,1,!1),bt}function In(ot){On.push(ot)}function Ln(ot,pt,bt){ot.byteLength=pt.byteLength,Ot.bufferData(ot.type,pt,bt)}function Fn(ot,pt,bt,At,Rt,Zt){var se;if(ot.usage=bt,Array.isArray(pt)){if(ot.dtype=At||cn,pt.length>0){var _e;if(Array.isArray(pt[0])){se=pr(pt);for(var Ee=1,He=1;He<se.length;++He)Ee*=se[He];ot.dimension=Ee,_e=Ge(pt,se,ot.dtype),Ln(ot,_e,bt),Zt?ot.persistentData=_e:kt.freeType(_e)}else if(typeof pt[0]=="number"){ot.dimension=Rt;var br=kt.allocType(ot.dtype,pt.length);sa(br,pt),Ln(ot,br,bt),Zt?ot.persistentData=br:kt.freeType(br)}else G(pt[0])?(ot.dimension=pt[0].length,ot.dtype=At||Bn(pt[0])||cn,_e=Ge(pt,[pt.length,pt[0].length],ot.dtype),Ln(ot,_e,bt),Zt?ot.persistentData=_e:kt.freeType(_e)):vt.raise("invalid buffer data")}}else if(G(pt))ot.dtype=At||Bn(pt),ot.dimension=Rt,Ln(ot,pt,bt),Zt&&(ot.persistentData=new Uint8Array(new Uint8Array(pt.buffer)));else if(ri(pt)){se=pt.shape;var rn=pt.stride,Cr=pt.offset,Ar=0,Or=0,Nn=0,jn=0;se.length===1?(Ar=se[0],Or=1,Nn=rn[0],jn=0):se.length===2?(Ar=se[0],Or=se[1],Nn=rn[0],jn=rn[1]):vt.raise("invalid shape"),ot.dtype=At||Bn(pt.data)||cn,ot.dimension=Or;var zn=kt.allocType(ot.dtype,Ar*Or);qn(zn,pt.data,Ar,Or,Nn,jn,Cr),Ln(ot,zn,bt),Zt?ot.persistentData=zn:kt.freeType(zn)}else pt instanceof ArrayBuffer?(ot.dtype=Pr,ot.dimension=Rt,Ln(ot,pt,bt),Zt&&(ot.persistentData=new Uint8Array(new Uint8Array(pt)))):vt.raise("invalid buffer data")}function v(ot){Ce.bufferCount--,Hr(ot);var pt=ot.buffer;vt(pt,"buffer must not be deleted already"),Ot.deleteBuffer(pt),ot.buffer=null,delete Br[ot.id]}function N(ot,pt,bt,At){Ce.bufferCount++;var Rt=new Jr(pt);Br[Rt.id]=Rt;function Zt(Ee){var He=Xr,br=null,rn=0,Cr=0,Ar=1;return Array.isArray(Ee)||G(Ee)||ri(Ee)||Ee instanceof ArrayBuffer?br=Ee:typeof Ee=="number"?rn=Ee|0:Ee&&(vt.type(Ee,"object","buffer arguments must be an object, a number or an array"),"data"in Ee&&(vt(br===null||Array.isArray(br)||G(br)||ri(br),"invalid data for buffer"),br=Ee.data),"usage"in Ee&&(vt.parameter(Ee.usage,ve,"invalid buffer usage"),He=ve[Ee.usage]),"type"in Ee&&(vt.parameter(Ee.type,$i,"invalid buffer type"),Cr=$i[Ee.type]),"dimension"in Ee&&(vt.type(Ee.dimension,"number","invalid dimension"),Ar=Ee.dimension|0),"length"in Ee&&(vt.nni(rn,"buffer length must be a nonnegative integer"),rn=Ee.length|0)),Rt.bind(),br?Fn(Rt,br,He,Cr,Ar,At):(rn&&Ot.bufferData(Rt.type,rn,He),Rt.dtype=Cr||Pr,Rt.usage=He,Rt.dimension=Ar,Rt.byteLength=rn),Ke.profile&&(Rt.stats.size=Rt.byteLength*Mn[Rt.dtype]),Zt}function se(Ee,He){vt(He+Ee.byteLength<=Rt.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Ee.byteLength+" starting from offset "+He+" to a buffer of size "+Rt.byteLength),Ot.bufferSubData(Rt.type,He,Ee)}function _e(Ee,He){var br=(He||0)|0,rn;if(Rt.bind(),G(Ee)||Ee instanceof ArrayBuffer)se(Ee,br);else if(Array.isArray(Ee)){if(Ee.length>0)if(typeof Ee[0]=="number"){var Cr=kt.allocType(Rt.dtype,Ee.length);sa(Cr,Ee),se(Cr,br),kt.freeType(Cr)}else if(Array.isArray(Ee[0])||G(Ee[0])){rn=pr(Ee);var Ar=Ge(Ee,rn,Rt.dtype);se(Ar,br),kt.freeType(Ar)}else vt.raise("invalid buffer data")}else if(ri(Ee)){rn=Ee.shape;var Or=Ee.stride,Nn=0,jn=0,zn=0,da=0;rn.length===1?(Nn=rn[0],jn=1,zn=Or[0],da=0):rn.length===2?(Nn=rn[0],jn=rn[1],zn=Or[0],da=Or[1]):vt.raise("invalid shape");var fa=Array.isArray(Ee.data)?Rt.dtype:Bn(Ee.data),Ea=kt.allocType(fa,Nn*jn);qn(Ea,Ee.data,Nn,jn,zn,da,Ee.offset),se(Ea,br),kt.freeType(Ea)}else vt.raise("invalid data for buffer subdata");return Zt}return bt||Zt(ot),Zt._reglType="buffer",Zt._buffer=Rt,Zt.subdata=_e,Ke.profile&&(Zt.stats=Rt.stats),Zt.destroy=function(){v(Rt)},Zt}function K(){ti(Br).forEach(function(ot){ot.buffer=Ot.createBuffer(),Ot.bindBuffer(ot.type,ot.buffer),Ot.bufferData(ot.type,ot.persistentData||ot.byteLength,ot.usage)})}return Ke.profile&&(Ce.getTotalBufferSize=function(){var ot=0;return Object.keys(Br).forEach(function(pt){ot+=Br[pt].stats.size}),ot}),{create:N,createStream:Rn,destroyStream:In,clear:function(){ti(Br).forEach(v),On.forEach(v)},getBuffer:function(ot){return ot&&ot._buffer instanceof Jr?ot._buffer:null},restore:K,_initBuffer:Fn}}var ya=0,vi=0,Sa=1,ua=1,fi=4,ei=4,Ga={points:ya,point:vi,lines:Sa,line:ua,triangles:fi,triangle:ei,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Ii=0,yi=1,za=4,Va=5120,Da=5121,Ri=5122,_i=5123,ki=5124,uo=5125,qi=34963,po=35040,es=35044;function rs(Ot,Ce,Ke,Hr){var hn={},Br=0,Jr={uint8:Da,uint16:_i};Ce.oes_element_index_uint&&(Jr.uint32=uo);function On(K){this.id=Br++,hn[this.id]=this,this.buffer=K,this.primType=za,this.vertCount=0,this.type=0}On.prototype.bind=function(){this.buffer.bind()};var Rn=[];function In(K){var ot=Rn.pop();return ot||(ot=new On(Ke.create(null,qi,!0,!1)._buffer)),Fn(ot,K,po,-1,-1,0,0),ot}function Ln(K){Rn.push(K)}function Fn(K,ot,pt,bt,At,Rt,Zt){K.buffer.bind();var se;if(ot){var _e=Zt;!Zt&&(!G(ot)||ri(ot)&&!G(ot.data))&&(_e=Ce.oes_element_index_uint?uo:_i),Ke._initBuffer(K.buffer,ot,pt,_e,3)}else Ot.bufferData(qi,Rt,pt),K.buffer.dtype=se||Da,K.buffer.usage=pt,K.buffer.dimension=3,K.buffer.byteLength=Rt;if(se=Zt,!Zt){switch(K.buffer.dtype){case Da:case Va:se=Da;break;case _i:case Ri:se=_i;break;case uo:case ki:se=uo;break;default:vt.raise("unsupported type for element array")}K.buffer.dtype=se}K.type=se,vt(se!==uo||!!Ce.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Ee=At;Ee<0&&(Ee=K.buffer.byteLength,se===_i?Ee>>=1:se===uo&&(Ee>>=2)),K.vertCount=Ee;var He=bt;if(bt<0){He=za;var br=K.buffer.dimension;br===1&&(He=Ii),br===2&&(He=yi),br===3&&(He=za)}K.primType=He}function v(K){Hr.elementsCount--,vt(K.buffer!==null,"must not double destroy elements"),delete hn[K.id],K.buffer.destroy(),K.buffer=null}function N(K,ot){var pt=Ke.create(null,qi,!0),bt=new On(pt._buffer);Hr.elementsCount++;function At(Rt){if(!Rt)pt(),bt.primType=za,bt.vertCount=0,bt.type=Da;else if(typeof Rt=="number")pt(Rt),bt.primType=za,bt.vertCount=Rt|0,bt.type=Da;else{var Zt=null,se=es,_e=-1,Ee=-1,He=0,br=0;Array.isArray(Rt)||G(Rt)||ri(Rt)?Zt=Rt:(vt.type(Rt,"object","invalid arguments for elements"),"data"in Rt&&(Zt=Rt.data,vt(Array.isArray(Zt)||G(Zt)||ri(Zt),"invalid data for element buffer")),"usage"in Rt&&(vt.parameter(Rt.usage,ve,"invalid element buffer usage"),se=ve[Rt.usage]),"primitive"in Rt&&(vt.parameter(Rt.primitive,Ga,"invalid element buffer primitive"),_e=Ga[Rt.primitive]),"count"in Rt&&(vt(typeof Rt.count=="number"&&Rt.count>=0,"invalid vertex count for elements"),Ee=Rt.count|0),"type"in Rt&&(vt.parameter(Rt.type,Jr,"invalid buffer type"),br=Jr[Rt.type]),"length"in Rt?He=Rt.length|0:(He=Ee,br===_i||br===Ri?He*=2:(br===uo||br===ki)&&(He*=4))),Fn(bt,Zt,se,_e,Ee,He,br)}return At}return At(K),At._reglType="elements",At._elements=bt,At.subdata=function(Rt,Zt){return pt.subdata(Rt,Zt),At},At.destroy=function(){v(bt)},At}return{create:N,createStream:In,destroyStream:Ln,getElements:function(K){return typeof K=="function"&&K._elements instanceof On?K._elements:null},clear:function(){ti(hn).forEach(v)}}}var no=new Float32Array(1),ni=new Uint32Array(no.buffer),zi=5123;function fo(Ot){for(var Ce=kt.allocType(zi,Ot.length),Ke=0;Ke<Ot.length;++Ke)if(isNaN(Ot[Ke]))Ce[Ke]=65535;else if(Ot[Ke]===1/0)Ce[Ke]=31744;else if(Ot[Ke]===-1/0)Ce[Ke]=64512;else{no[0]=Ot[Ke];var Hr=ni[0],hn=Hr>>>31<<15,Br=(Hr<<1>>>24)-127,Jr=Hr>>13&1024-1;if(Br<-24)Ce[Ke]=hn;else if(Br<-14){var On=-14-Br;Ce[Ke]=hn+(Jr+1024>>On)}else Br>15?Ce[Ke]=hn+31744:Ce[Ke]=hn+(Br+15<<10)+Jr}return Ce}function Xa(Ot){return Array.isArray(Ot)||G(Ot)}var go=function(Ot){return!(Ot&Ot-1)&&!!Ot},No=34467,Hi=3553,as=34067,Gi=34069,Ro=6408,ss=6406,Ss=6407,mo=6409,us=6410,fs=32854,Is=32855,Aa=36194,Ut=32819,Xe=32820,cr=33635,_r=34042,on=6402,_n=34041,$n=35904,qa=35906,Bi=36193,Oo=33776,jo=33777,Rs=33778,Qi=33779,Io=35986,cs=35987,ks=34798,ls=35840,js=35841,Ks=35842,Vs=35843,hu=36196,ds=5121,Ds=5123,Bs=5125,is=5126,Eu=10242,wu=10243,yo=10497,Vo=33071,os=33648,h=10240,Y=10241,Mt=9728,Bt=9729,qt=9984,pe=9985,me=9986,De=9987,Ue=33170,$e=4352,mr=4353,qr=4354,tn=34046,Qr=3317,Tn=37440,Un=37441,dn=37443,ra=37444,Ha=33984,Za=[qt,me,pe,De],Ua=[0,mo,us,Ss,Ro],Ma={};Ma[mo]=Ma[ss]=Ma[on]=1,Ma[_n]=Ma[us]=2,Ma[Ss]=Ma[$n]=3,Ma[Ro]=Ma[qa]=4;function Ra(Ot){return"[object "+Ot+"]"}var Do=Ra("HTMLCanvasElement"),Eo=Ra("OffscreenCanvas"),bo=Ra("CanvasRenderingContext2D"),wo=Ra("ImageBitmap"),So=Ra("HTMLImageElement"),ko=Ra("HTMLVideoElement"),Bo=Object.keys(ii).concat([Do,Eo,bo,wo,So,ko]),ci=[];ci[ds]=1,ci[is]=4,ci[Bi]=2,ci[Ds]=2,ci[Bs]=4;var Fi=[];Fi[fs]=2,Fi[Is]=2,Fi[Aa]=2,Fi[_n]=4,Fi[Oo]=.5,Fi[jo]=.5,Fi[Rs]=1,Fi[Qi]=1,Fi[Io]=.5,Fi[cs]=1,Fi[ks]=1,Fi[ls]=.5,Fi[js]=.25,Fi[Ks]=.5,Fi[Vs]=.25,Fi[hu]=.5;function $s(Ot){return Array.isArray(Ot)&&(Ot.length===0||typeof Ot[0]=="number")}function Fs(Ot){if(!Array.isArray(Ot))return!1;var Ce=Ot.length;return!(Ce===0||!Xa(Ot[0]))}function Ms(Ot){return Object.prototype.toString.call(Ot)}function vu(Ot){return Ms(Ot)===Do}function Rf(Ot){return Ms(Ot)===Eo}function bc(Ot){return Ms(Ot)===bo}function xc(Ot){return Ms(Ot)===wo}function kf(Ot){return Ms(Ot)===So}function Zc(Ot){return Ms(Ot)===ko}function Bf(Ot){if(!Ot)return!1;var Ce=Ms(Ot);return Bo.indexOf(Ce)>=0?!0:$s(Ot)||Fs(Ot)||ri(Ot)}function ju(Ot){return ii[Object.prototype.toString.call(Ot)]|0}function Vu(Ot,Ce){var Ke=Ce.length;switch(Ot.type){case ds:case Ds:case Bs:case is:var Hr=kt.allocType(Ot.type,Ke);Hr.set(Ce),Ot.data=Hr;break;case Bi:Ot.data=fo(Ce);break;default:vt.raise("unsupported texture type, must specify a typed array")}}function Ff(Ot,Ce){return kt.allocType(Ot.type===Bi?is:Ot.type,Ce)}function Ec(Ot,Ce){Ot.type===Bi?(Ot.data=fo(Ce),kt.freeType(Ce)):Ot.data=Ce}function Kc(Ot,Ce,Ke,Hr,hn,Br){for(var Jr=Ot.width,On=Ot.height,Rn=Ot.channels,In=Jr*On*Rn,Ln=Ff(Ot,In),Fn=0,v=0;v<On;++v)for(var N=0;N<Jr;++N)for(var K=0;K<Rn;++K)Ln[Fn++]=Ce[Ke*N+Hr*v+hn*K+Br];Ec(Ot,Ln)}function pu(Ot,Ce,Ke,Hr,hn,Br){var Jr;if(typeof Fi[Ot]!="undefined"?Jr=Fi[Ot]:Jr=Ma[Ot]*ci[Ce],Br&&(Jr*=6),hn){for(var On=0,Rn=Ke;Rn>=1;)On+=Jr*Rn*Rn,Rn/=2;return On}else return Jr*Ke*Hr}function wc(Ot,Ce,Ke,Hr,hn,Br,Jr){var On={"don't care":$e,"dont care":$e,nice:qr,fast:mr},Rn={repeat:yo,clamp:Vo,mirror:os},In={nearest:Mt,linear:Bt},Ln=_({mipmap:De,"nearest mipmap nearest":qt,"linear mipmap nearest":pe,"nearest mipmap linear":me,"linear mipmap linear":De},In),Fn={none:0,browser:ra},v={uint8:ds,rgba4:Ut,rgb565:cr,"rgb5 a1":Xe},N={alpha:ss,luminance:mo,"luminance alpha":us,rgb:Ss,rgba:Ro,rgba4:fs,"rgb5 a1":Is,rgb565:Aa},K={};Ce.ext_srgb&&(N.srgb=$n,N.srgba=qa),Ce.oes_texture_float&&(v.float32=v.float=is),Ce.oes_texture_half_float&&(v.float16=v["half float"]=Bi),Ce.webgl_depth_texture&&(_(N,{depth:on,"depth stencil":_n}),_(v,{uint16:Ds,uint32:Bs,"depth stencil":_r})),Ce.webgl_compressed_texture_s3tc&&_(K,{"rgb s3tc dxt1":Oo,"rgba s3tc dxt1":jo,"rgba s3tc dxt3":Rs,"rgba s3tc dxt5":Qi}),Ce.webgl_compressed_texture_atc&&_(K,{"rgb atc":Io,"rgba atc explicit alpha":cs,"rgba atc interpolated alpha":ks}),Ce.webgl_compressed_texture_pvrtc&&_(K,{"rgb pvrtc 4bppv1":ls,"rgb pvrtc 2bppv1":js,"rgba pvrtc 4bppv1":Ks,"rgba pvrtc 2bppv1":Vs}),Ce.webgl_compressed_texture_etc1&&(K["rgb etc1"]=hu);var ot=Array.prototype.slice.call(Ot.getParameter(No));Object.keys(K).forEach(function(Ve){var $r=K[Ve];ot.indexOf($r)>=0&&(N[Ve]=$r)});var pt=Object.keys(N);Ke.textureFormats=pt;var bt=[];Object.keys(N).forEach(function(Ve){var $r=N[Ve];bt[$r]=Ve});var At=[];Object.keys(v).forEach(function(Ve){var $r=v[Ve];At[$r]=Ve});var Rt=[];Object.keys(In).forEach(function(Ve){var $r=In[Ve];Rt[$r]=Ve});var Zt=[];Object.keys(Ln).forEach(function(Ve){var $r=Ln[Ve];Zt[$r]=Ve});var se=[];Object.keys(Rn).forEach(function(Ve){var $r=Rn[Ve];se[$r]=Ve});var _e=pt.reduce(function(Ve,$r){var jr=N[$r];return jr===mo||jr===ss||jr===mo||jr===us||jr===on||jr===_n||Ce.ext_srgb&&(jr===$n||jr===qa)?Ve[jr]=jr:jr===Is||$r.indexOf("rgba")>=0?Ve[jr]=Ro:Ve[jr]=Ss,Ve},{});function Ee(){this.internalformat=Ro,this.format=Ro,this.type=ds,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=ra,this.width=0,this.height=0,this.channels=0}function He(Ve,$r){Ve.internalformat=$r.internalformat,Ve.format=$r.format,Ve.type=$r.type,Ve.compressed=$r.compressed,Ve.premultiplyAlpha=$r.premultiplyAlpha,Ve.flipY=$r.flipY,Ve.unpackAlignment=$r.unpackAlignment,Ve.colorSpace=$r.colorSpace,Ve.width=$r.width,Ve.height=$r.height,Ve.channels=$r.channels}function br(Ve,$r){if(!(typeof $r!="object"||!$r)){if("premultiplyAlpha"in $r&&(vt.type($r.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),Ve.premultiplyAlpha=$r.premultiplyAlpha),"flipY"in $r&&(vt.type($r.flipY,"boolean","invalid texture flip"),Ve.flipY=$r.flipY),"alignment"in $r&&(vt.oneOf($r.alignment,[1,2,4,8],"invalid texture unpack alignment"),Ve.unpackAlignment=$r.alignment),"colorSpace"in $r&&(vt.parameter($r.colorSpace,Fn,"invalid colorSpace"),Ve.colorSpace=Fn[$r.colorSpace]),"type"in $r){var jr=$r.type;vt(Ce.oes_texture_float||!(jr==="float"||jr==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),vt(Ce.oes_texture_half_float||!(jr==="half float"||jr==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),vt(Ce.webgl_depth_texture||!(jr==="uint16"||jr==="uint32"||jr==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),vt.parameter(jr,v,"invalid texture type"),Ve.type=v[jr]}var na=Ve.width,hi=Ve.height,Be=Ve.channels,Se=!1;"shape"in $r?(vt(Array.isArray($r.shape)&&$r.shape.length>=2,"shape must be an array"),na=$r.shape[0],hi=$r.shape[1],$r.shape.length===3&&(Be=$r.shape[2],vt(Be>0&&Be<=4,"invalid number of channels"),Se=!0),vt(na>=0&&na<=Ke.maxTextureSize,"invalid width"),vt(hi>=0&&hi<=Ke.maxTextureSize,"invalid height")):("radius"in $r&&(na=hi=$r.radius,vt(na>=0&&na<=Ke.maxTextureSize,"invalid radius")),"width"in $r&&(na=$r.width,vt(na>=0&&na<=Ke.maxTextureSize,"invalid width")),"height"in $r&&(hi=$r.height,vt(hi>=0&&hi<=Ke.maxTextureSize,"invalid height")),"channels"in $r&&(Be=$r.channels,vt(Be>0&&Be<=4,"invalid number of channels"),Se=!0)),Ve.width=na|0,Ve.height=hi|0,Ve.channels=Be|0;var sr=!1;if("format"in $r){var Ir=$r.format;vt(Ce.webgl_depth_texture||!(Ir==="depth"||Ir==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),vt.parameter(Ir,N,"invalid texture format");var Rr=Ve.internalformat=N[Ir];Ve.format=_e[Rr],Ir in v&&("type"in $r||(Ve.type=v[Ir])),Ir in K&&(Ve.compressed=!0),sr=!0}!Se&&sr?Ve.channels=Ma[Ve.format]:Se&&!sr?Ve.channels!==Ua[Ve.format]&&(Ve.format=Ve.internalformat=Ua[Ve.channels]):sr&&Se&&vt(Ve.channels===Ma[Ve.format],"number of channels inconsistent with specified format")}}function rn(Ve){Ot.pixelStorei(Tn,Ve.flipY),Ot.pixelStorei(Un,Ve.premultiplyAlpha),Ot.pixelStorei(dn,Ve.colorSpace),Ot.pixelStorei(Qr,Ve.unpackAlignment)}function Cr(){Ee.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Ar(Ve,$r){var jr=null;if(Bf($r)?jr=$r:$r&&(vt.type($r,"object","invalid pixel data type"),br(Ve,$r),"x"in $r&&(Ve.xOffset=$r.x|0),"y"in $r&&(Ve.yOffset=$r.y|0),Bf($r.data)&&(jr=$r.data)),vt(!Ve.compressed||jr instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),$r.copy){vt(!jr,"can not specify copy and data field for the same texture");var na=hn.viewportWidth,hi=hn.viewportHeight;Ve.width=Ve.width||na-Ve.xOffset,Ve.height=Ve.height||hi-Ve.yOffset,Ve.needsCopy=!0,vt(Ve.xOffset>=0&&Ve.xOffset<na&&Ve.yOffset>=0&&Ve.yOffset<hi&&Ve.width>0&&Ve.width<=na&&Ve.height>0&&Ve.height<=hi,"copy texture read out of bounds")}else if(!jr)Ve.width=Ve.width||1,Ve.height=Ve.height||1,Ve.channels=Ve.channels||4;else if(G(jr))Ve.channels=Ve.channels||4,Ve.data=jr,!("type"in $r)&&Ve.type===ds&&(Ve.type=ju(jr));else if($s(jr))Ve.channels=Ve.channels||4,Vu(Ve,jr),Ve.alignment=1,Ve.needsFree=!0;else if(ri(jr)){var Be=jr.data;!Array.isArray(Be)&&Ve.type===ds&&(Ve.type=ju(Be));var Se=jr.shape,sr=jr.stride,Ir,Rr,hr,ur,Er,Fe;Se.length===3?(hr=Se[2],Fe=sr[2]):(vt(Se.length===2,"invalid ndarray pixel data, must be 2 or 3D"),hr=1,Fe=1),Ir=Se[0],Rr=Se[1],ur=sr[0],Er=sr[1],Ve.alignment=1,Ve.width=Ir,Ve.height=Rr,Ve.channels=hr,Ve.format=Ve.internalformat=Ua[hr],Ve.needsFree=!0,Kc(Ve,Be,ur,Er,Fe,jr.offset)}else if(vu(jr)||Rf(jr)||bc(jr))vu(jr)||Rf(jr)?Ve.element=jr:Ve.element=jr.canvas,Ve.width=Ve.element.width,Ve.height=Ve.element.height,Ve.channels=4;else if(xc(jr))Ve.element=jr,Ve.width=jr.width,Ve.height=jr.height,Ve.channels=4;else if(kf(jr))Ve.element=jr,Ve.width=jr.naturalWidth,Ve.height=jr.naturalHeight,Ve.channels=4;else if(Zc(jr))Ve.element=jr,Ve.width=jr.videoWidth,Ve.height=jr.videoHeight,Ve.channels=4;else if(Fs(jr)){var or=Ve.width||jr[0].length,Le=Ve.height||jr.length,Tr=Ve.channels;Xa(jr[0][0])?Tr=Tr||jr[0][0].length:Tr=Tr||1;for(var zr=Mi.shape(jr),gn=1,mn=0;mn<zr.length;++mn)gn*=zr[mn];var nn=Ff(Ve,gn);Mi.flatten(jr,zr,"",nn),Ec(Ve,nn),Ve.alignment=1,Ve.width=or,Ve.height=Le,Ve.channels=Tr,Ve.format=Ve.internalformat=Ua[Tr],Ve.needsFree=!0}Ve.type===is?vt(Ke.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):Ve.type===Bi&&vt(Ke.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Or(Ve,$r,jr){var na=Ve.element,hi=Ve.data,Be=Ve.internalformat,Se=Ve.format,sr=Ve.type,Ir=Ve.width,Rr=Ve.height;rn(Ve),na?Ot.texImage2D($r,jr,Se,Se,sr,na):Ve.compressed?Ot.compressedTexImage2D($r,jr,Be,Ir,Rr,0,hi):Ve.needsCopy?(Hr(),Ot.copyTexImage2D($r,jr,Se,Ve.xOffset,Ve.yOffset,Ir,Rr,0)):Ot.texImage2D($r,jr,Se,Ir,Rr,0,Se,sr,hi||null)}function Nn(Ve,$r,jr,na,hi){var Be=Ve.element,Se=Ve.data,sr=Ve.internalformat,Ir=Ve.format,Rr=Ve.type,hr=Ve.width,ur=Ve.height;rn(Ve),Be?Ot.texSubImage2D($r,hi,jr,na,Ir,Rr,Be):Ve.compressed?Ot.compressedTexSubImage2D($r,hi,jr,na,sr,hr,ur,Se):Ve.needsCopy?(Hr(),Ot.copyTexSubImage2D($r,hi,jr,na,Ve.xOffset,Ve.yOffset,hr,ur)):Ot.texSubImage2D($r,hi,jr,na,hr,ur,Ir,Rr,Se)}var jn=[];function zn(){return jn.pop()||new Cr}function da(Ve){Ve.needsFree&&kt.freeType(Ve.data),Cr.call(Ve),jn.push(Ve)}function fa(){Ee.call(this),this.genMipmaps=!1,this.mipmapHint=$e,this.mipmask=0,this.images=Array(16)}function Ea(Ve,$r,jr){var na=Ve.images[0]=zn();Ve.mipmask=1,na.width=Ve.width=$r,na.height=Ve.height=jr,na.channels=Ve.channels=4}function Ba(Ve,$r){var jr=null;if(Bf($r))jr=Ve.images[0]=zn(),He(jr,Ve),Ar(jr,$r),Ve.mipmask=1;else if(br(Ve,$r),Array.isArray($r.mipmap))for(var na=$r.mipmap,hi=0;hi<na.length;++hi)jr=Ve.images[hi]=zn(),He(jr,Ve),jr.width>>=hi,jr.height>>=hi,Ar(jr,na[hi]),Ve.mipmask|=1<<hi;else jr=Ve.images[0]=zn(),He(jr,Ve),Ar(jr,$r),Ve.mipmask=1;He(Ve,Ve.images[0]),Ve.compressed&&(Ve.internalformat===Oo||Ve.internalformat===jo||Ve.internalformat===Rs||Ve.internalformat===Qi)&&vt(Ve.width%4===0&&Ve.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Oa(Ve,$r){for(var jr=Ve.images,na=0;na<jr.length;++na){if(!jr[na])return;Or(jr[na],$r,na)}}var Ji=[];function Fa(){var Ve=Ji.pop()||new fa;Ee.call(Ve),Ve.mipmask=0;for(var $r=0;$r<16;++$r)Ve.images[$r]=null;return Ve}function Wo(Ve){for(var $r=Ve.images,jr=0;jr<$r.length;++jr)$r[jr]&&da($r[jr]),$r[jr]=null;Ji.push(Ve)}function ji(){this.minFilter=Mt,this.magFilter=Mt,this.wrapS=Vo,this.wrapT=Vo,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=$e}function ui(Ve,$r){if("min"in $r){var jr=$r.min;vt.parameter(jr,Ln),Ve.minFilter=Ln[jr],Za.indexOf(Ve.minFilter)>=0&&!("faces"in $r)&&(Ve.genMipmaps=!0)}if("mag"in $r){var na=$r.mag;vt.parameter(na,In),Ve.magFilter=In[na]}var hi=Ve.wrapS,Be=Ve.wrapT;if("wrap"in $r){var Se=$r.wrap;typeof Se=="string"?(vt.parameter(Se,Rn),hi=Be=Rn[Se]):Array.isArray(Se)&&(vt.parameter(Se[0],Rn),vt.parameter(Se[1],Rn),hi=Rn[Se[0]],Be=Rn[Se[1]])}else{if("wrapS"in $r){var sr=$r.wrapS;vt.parameter(sr,Rn),hi=Rn[sr]}if("wrapT"in $r){var Ir=$r.wrapT;vt.parameter(Ir,Rn),Be=Rn[Ir]}}if(Ve.wrapS=hi,Ve.wrapT=Be,"anisotropic"in $r){var Rr=$r.anisotropic;vt(typeof Rr=="number"&&Rr>=1&&Rr<=Ke.maxAnisotropic,"aniso samples must be between 1 and "),Ve.anisotropic=$r.anisotropic}if("mipmap"in $r){var hr=!1;switch(typeof $r.mipmap){case"string":vt.parameter($r.mipmap,On,"invalid mipmap hint"),Ve.mipmapHint=On[$r.mipmap],Ve.genMipmaps=!0,hr=!0;break;case"boolean":hr=Ve.genMipmaps=$r.mipmap;break;case"object":vt(Array.isArray($r.mipmap),"invalid mipmap type"),Ve.genMipmaps=!1,hr=!0;break;default:vt.raise("invalid mipmap type")}hr&&!("min"in $r)&&(Ve.minFilter=qt)}}function Po(Ve,$r){Ot.texParameteri($r,Y,Ve.minFilter),Ot.texParameteri($r,h,Ve.magFilter),Ot.texParameteri($r,Eu,Ve.wrapS),Ot.texParameteri($r,wu,Ve.wrapT),Ce.ext_texture_filter_anisotropic&&Ot.texParameteri($r,tn,Ve.anisotropic),Ve.genMipmaps&&(Ot.hint(Ue,Ve.mipmapHint),Ot.generateMipmap($r))}var Fo=0,Zo={},vs=Ke.maxTextureUnits,Ko=Array(vs).map(function(){return null});function Ja(Ve){Ee.call(this),this.mipmask=0,this.internalformat=Ro,this.id=Fo++,this.refCount=1,this.target=Ve,this.texture=Ot.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new ji,Jr.profile&&(this.stats={size:0})}function ys(Ve){Ot.activeTexture(Ha),Ot.bindTexture(Ve.target,Ve.texture)}function Pi(){var Ve=Ko[0];Ve?Ot.bindTexture(Ve.target,Ve.texture):Ot.bindTexture(Hi,null)}function _a(Ve){var $r=Ve.texture;vt($r,"must not double destroy texture");var jr=Ve.unit,na=Ve.target;jr>=0&&(Ot.activeTexture(Ha+jr),Ot.bindTexture(na,null),Ko[jr]=null),Ot.deleteTexture($r),Ve.texture=null,Ve.params=null,Ve.pixels=null,Ve.refCount=0,delete Zo[Ve.id],Br.textureCount--}_(Ja.prototype,{bind:function(){var Ve=this;Ve.bindCount+=1;var $r=Ve.unit;if($r<0){for(var jr=0;jr<vs;++jr){var na=Ko[jr];if(na){if(na.bindCount>0)continue;na.unit=-1}Ko[jr]=Ve,$r=jr;break}$r>=vs&&vt.raise("insufficient number of texture units"),Jr.profile&&Br.maxTextureUnits<$r+1&&(Br.maxTextureUnits=$r+1),Ve.unit=$r,Ot.activeTexture(Ha+$r),Ot.bindTexture(Ve.target,Ve.texture)}return $r},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&_a(this)}});function di(Ve,$r){var jr=new Ja(Hi);Zo[jr.id]=jr,Br.textureCount++;function na(Se,sr){var Ir=jr.texInfo;ji.call(Ir);var Rr=Fa();return typeof Se=="number"?typeof sr=="number"?Ea(Rr,Se|0,sr|0):Ea(Rr,Se|0,Se|0):Se?(vt.type(Se,"object","invalid arguments to regl.texture"),ui(Ir,Se),Ba(Rr,Se)):Ea(Rr,1,1),Ir.genMipmaps&&(Rr.mipmask=(Rr.width<<1)-1),jr.mipmask=Rr.mipmask,He(jr,Rr),vt.texture2D(Ir,Rr,Ke),jr.internalformat=Rr.internalformat,na.width=Rr.width,na.height=Rr.height,ys(jr),Oa(Rr,Hi),Po(Ir,Hi),Pi(),Wo(Rr),Jr.profile&&(jr.stats.size=pu(jr.internalformat,jr.type,Rr.width,Rr.height,Ir.genMipmaps,!1)),na.format=bt[jr.internalformat],na.type=At[jr.type],na.mag=Rt[Ir.magFilter],na.min=Zt[Ir.minFilter],na.wrapS=se[Ir.wrapS],na.wrapT=se[Ir.wrapT],na}function hi(Se,sr,Ir,Rr){vt(!!Se,"must specify image data");var hr=sr|0,ur=Ir|0,Er=Rr|0,Fe=zn();return He(Fe,jr),Fe.width=0,Fe.height=0,Ar(Fe,Se),Fe.width=Fe.width||(jr.width>>Er)-hr,Fe.height=Fe.height||(jr.height>>Er)-ur,vt(jr.type===Fe.type&&jr.format===Fe.format&&jr.internalformat===Fe.internalformat,"incompatible format for texture.subimage"),vt(hr>=0&&ur>=0&&hr+Fe.width<=jr.width&&ur+Fe.height<=jr.height,"texture.subimage write out of bounds"),vt(jr.mipmask&1<<Er,"missing mipmap data"),vt(Fe.data||Fe.element||Fe.needsCopy,"missing image data"),ys(jr),Nn(Fe,Hi,hr,ur,Er),Pi(),da(Fe),na}function Be(Se,sr){var Ir=Se|0,Rr=sr|0||Ir;if(Ir===jr.width&&Rr===jr.height)return na;na.width=jr.width=Ir,na.height=jr.height=Rr,ys(jr);for(var hr=0;jr.mipmask>>hr;++hr){var ur=Ir>>hr,Er=Rr>>hr;if(!ur||!Er)break;Ot.texImage2D(Hi,hr,jr.format,ur,Er,0,jr.format,jr.type,null)}return Pi(),Jr.profile&&(jr.stats.size=pu(jr.internalformat,jr.type,Ir,Rr,!1,!1)),na}return na(Ve,$r),na.subimage=hi,na.resize=Be,na._reglType="texture2d",na._texture=jr,Jr.profile&&(na.stats=jr.stats),na.destroy=function(){jr.decRef()},na}function Ei(Ve,$r,jr,na,hi,Be){var Se=new Ja(as);Zo[Se.id]=Se,Br.cubeCount++;var sr=new Array(6);function Ir(ur,Er,Fe,or,Le,Tr){var zr,gn=Se.texInfo;for(ji.call(gn),zr=0;zr<6;++zr)sr[zr]=Fa();if(typeof ur=="number"||!ur){var mn=ur|0||1;for(zr=0;zr<6;++zr)Ea(sr[zr],mn,mn)}else if(typeof ur=="object")if(Er)Ba(sr[0],ur),Ba(sr[1],Er),Ba(sr[2],Fe),Ba(sr[3],or),Ba(sr[4],Le),Ba(sr[5],Tr);else if(ui(gn,ur),br(Se,ur),"faces"in ur){var nn=ur.faces;for(vt(Array.isArray(nn)&&nn.length===6,"cube faces must be a length 6 array"),zr=0;zr<6;++zr)vt(typeof nn[zr]=="object"&&!!nn[zr],"invalid input for cube map face"),He(sr[zr],Se),Ba(sr[zr],nn[zr])}else for(zr=0;zr<6;++zr)Ba(sr[zr],ur);else vt.raise("invalid arguments to cube map");for(He(Se,sr[0]),Ke.npotTextureCube||vt(go(Se.width)&&go(Se.height),"your browser does not support non power or two texture dimensions"),gn.genMipmaps?Se.mipmask=(sr[0].width<<1)-1:Se.mipmask=sr[0].mipmask,vt.textureCube(Se,gn,sr,Ke),Se.internalformat=sr[0].internalformat,Ir.width=sr[0].width,Ir.height=sr[0].height,ys(Se),zr=0;zr<6;++zr)Oa(sr[zr],Gi+zr);for(Po(gn,as),Pi(),Jr.profile&&(Se.stats.size=pu(Se.internalformat,Se.type,Ir.width,Ir.height,gn.genMipmaps,!0)),Ir.format=bt[Se.internalformat],Ir.type=At[Se.type],Ir.mag=Rt[gn.magFilter],Ir.min=Zt[gn.minFilter],Ir.wrapS=se[gn.wrapS],Ir.wrapT=se[gn.wrapT],zr=0;zr<6;++zr)Wo(sr[zr]);return Ir}function Rr(ur,Er,Fe,or,Le){vt(!!Er,"must specify image data"),vt(typeof ur=="number"&&ur===(ur|0)&&ur>=0&&ur<6,"invalid face");var Tr=Fe|0,zr=or|0,gn=Le|0,mn=zn();return He(mn,Se),mn.width=0,mn.height=0,Ar(mn,Er),mn.width=mn.width||(Se.width>>gn)-Tr,mn.height=mn.height||(Se.height>>gn)-zr,vt(Se.type===mn.type&&Se.format===mn.format&&Se.internalformat===mn.internalformat,"incompatible format for texture.subimage"),vt(Tr>=0&&zr>=0&&Tr+mn.width<=Se.width&&zr+mn.height<=Se.height,"texture.subimage write out of bounds"),vt(Se.mipmask&1<<gn,"missing mipmap data"),vt(mn.data||mn.element||mn.needsCopy,"missing image data"),ys(Se),Nn(mn,Gi+ur,Tr,zr,gn),Pi(),da(mn),Ir}function hr(ur){var Er=ur|0;if(Er!==Se.width){Ir.width=Se.width=Er,Ir.height=Se.height=Er,ys(Se);for(var Fe=0;Fe<6;++Fe)for(var or=0;Se.mipmask>>or;++or)Ot.texImage2D(Gi+Fe,or,Se.format,Er>>or,Er>>or,0,Se.format,Se.type,null);return Pi(),Jr.profile&&(Se.stats.size=pu(Se.internalformat,Se.type,Ir.width,Ir.height,!1,!0)),Ir}}return Ir(Ve,$r,jr,na,hi,Be),Ir.subimage=Rr,Ir.resize=hr,Ir._reglType="textureCube",Ir._texture=Se,Jr.profile&&(Ir.stats=Se.stats),Ir.destroy=function(){Se.decRef()},Ir}function Jo(){for(var Ve=0;Ve<vs;++Ve)Ot.activeTexture(Ha+Ve),Ot.bindTexture(Hi,null),Ko[Ve]=null;ti(Zo).forEach(_a),Br.cubeCount=0,Br.textureCount=0}Jr.profile&&(Br.getTotalTextureSize=function(){var Ve=0;return Object.keys(Zo).forEach(function($r){Ve+=Zo[$r].stats.size}),Ve});function ku(){for(var Ve=0;Ve<vs;++Ve){var $r=Ko[Ve];$r&&($r.bindCount=0,$r.unit=-1,Ko[Ve]=null)}ti(Zo).forEach(function(jr){jr.texture=Ot.createTexture(),Ot.bindTexture(jr.target,jr.texture);for(var na=0;na<32;++na)if(jr.mipmask&1<<na)if(jr.target===Hi)Ot.texImage2D(Hi,na,jr.internalformat,jr.width>>na,jr.height>>na,0,jr.internalformat,jr.type,null);else for(var hi=0;hi<6;++hi)Ot.texImage2D(Gi+hi,na,jr.internalformat,jr.width>>na,jr.height>>na,0,jr.internalformat,jr.type,null);Po(jr.texInfo,jr.target)})}function fc(){for(var Ve=0;Ve<vs;++Ve){var $r=Ko[Ve];$r&&($r.bindCount=0,$r.unit=-1,Ko[Ve]=null),Ot.activeTexture(Ha+Ve),Ot.bindTexture(Hi,null),Ot.bindTexture(as,null)}}return{create2D:di,createCube:Ei,clear:Jo,getTexture:function(Ve){return null},restore:ku,refresh:fc}}var ta=36161,Su=32854,si=32855,zf=36194,Mu=33189,nu=36168,Gf=34041,sf=35907,uf=34836,Uf=34842,Sc=34843,zs=[];zs[Su]=2,zs[si]=2,zs[zf]=2,zs[Mu]=2,zs[nu]=1,zs[Gf]=4,zs[sf]=4,zs[uf]=16,zs[Uf]=8,zs[Sc]=6;function lt(Ot,Ce,Ke){return zs[Ot]*Ce*Ke}var It=function(Ot,Ce,Ke,Hr,hn){var Br={rgba4:Su,rgb565:zf,"rgb5 a1":si,depth:Mu,stencil:nu,"depth stencil":Gf};Ce.ext_srgb&&(Br.srgba=sf),Ce.ext_color_buffer_half_float&&(Br.rgba16f=Uf,Br.rgb16f=Sc),Ce.webgl_color_buffer_float&&(Br.rgba32f=uf);var Jr=[];Object.keys(Br).forEach(function(N){var K=Br[N];Jr[K]=N});var On=0,Rn={};function In(N){this.id=On++,this.refCount=1,this.renderbuffer=N,this.format=Su,this.width=0,this.height=0,hn.profile&&(this.stats={size:0})}In.prototype.decRef=function(){--this.refCount<=0&&Ln(this)};function Ln(N){var K=N.renderbuffer;vt(K,"must not double destroy renderbuffer"),Ot.bindRenderbuffer(ta,null),Ot.deleteRenderbuffer(K),N.renderbuffer=null,N.refCount=0,delete Rn[N.id],Hr.renderbufferCount--}function Fn(N,K){var ot=new In(Ot.createRenderbuffer());Rn[ot.id]=ot,Hr.renderbufferCount++;function pt(At,Rt){var Zt=0,se=0,_e=Su;if(typeof At=="object"&&At){var Ee=At;if("shape"in Ee){var He=Ee.shape;vt(Array.isArray(He)&&He.length>=2,"invalid renderbuffer shape"),Zt=He[0]|0,se=He[1]|0}else"radius"in Ee&&(Zt=se=Ee.radius|0),"width"in Ee&&(Zt=Ee.width|0),"height"in Ee&&(se=Ee.height|0);"format"in Ee&&(vt.parameter(Ee.format,Br,"invalid renderbuffer format"),_e=Br[Ee.format])}else typeof At=="number"?(Zt=At|0,typeof Rt=="number"?se=Rt|0:se=Zt):At?vt.raise("invalid arguments to renderbuffer constructor"):Zt=se=1;if(vt(Zt>0&&se>0&&Zt<=Ke.maxRenderbufferSize&&se<=Ke.maxRenderbufferSize,"invalid renderbuffer size"),!(Zt===ot.width&&se===ot.height&&_e===ot.format))return pt.width=ot.width=Zt,pt.height=ot.height=se,ot.format=_e,Ot.bindRenderbuffer(ta,ot.renderbuffer),Ot.renderbufferStorage(ta,_e,Zt,se),vt(Ot.getError()===0,"invalid render buffer format"),hn.profile&&(ot.stats.size=lt(ot.format,ot.width,ot.height)),pt.format=Jr[ot.format],pt}function bt(At,Rt){var Zt=At|0,se=Rt|0||Zt;return Zt===ot.width&&se===ot.height||(vt(Zt>0&&se>0&&Zt<=Ke.maxRenderbufferSize&&se<=Ke.maxRenderbufferSize,"invalid renderbuffer size"),pt.width=ot.width=Zt,pt.height=ot.height=se,Ot.bindRenderbuffer(ta,ot.renderbuffer),Ot.renderbufferStorage(ta,ot.format,Zt,se),vt(Ot.getError()===0,"invalid render buffer format"),hn.profile&&(ot.stats.size=lt(ot.format,ot.width,ot.height))),pt}return pt(N,K),pt.resize=bt,pt._reglType="renderbuffer",pt._renderbuffer=ot,hn.profile&&(pt.stats=ot.stats),pt.destroy=function(){ot.decRef()},pt}hn.profile&&(Hr.getTotalRenderbufferSize=function(){var N=0;return Object.keys(Rn).forEach(function(K){N+=Rn[K].stats.size}),N});function v(){ti(Rn).forEach(function(N){N.renderbuffer=Ot.createRenderbuffer(),Ot.bindRenderbuffer(ta,N.renderbuffer),Ot.renderbufferStorage(ta,N.format,N.width,N.height)}),Ot.bindRenderbuffer(ta,null)}return{create:Fn,clear:function(){ti(Rn).forEach(Ln)},restore:v}},jt=36160,le=36161,Ae=3553,vr=34069,yr=36064,Zr=36096,Cn=36128,An=33306,Vn=36053,aa=36054,Zn=36055,La=36057,Qa=36061,ka=36193,Ca=5121,Wa=5126,va=6407,Ka=6408,Ya=6402,ma=[va,Ka],ai=[];ai[Ka]=4,ai[va]=3;var bi=[];bi[Ca]=1,bi[Wa]=4,bi[ka]=2;var Di=32854,xi=32855,li=36194,co=33189,Mo=36168,lo=34041,Gs=35907,qs=34836,Us=34842,au=34843,_u=[Di,xi,li,Gs,Us,au,qs],Hs={};Hs[Vn]="complete",Hs[aa]="incomplete attachment",Hs[La]="incomplete dimensions",Hs[Zn]="incomplete, missing attachment",Hs[Qa]="unsupported";function Wf(Ot,Ce,Ke,Hr,hn,Br){var Jr={cur:null,next:null,dirty:!1,setFBO:null},On=["rgba"],Rn=["rgba4","rgb565","rgb5 a1"];Ce.ext_srgb&&Rn.push("srgba"),Ce.ext_color_buffer_half_float&&Rn.push("rgba16f","rgb16f"),Ce.webgl_color_buffer_float&&Rn.push("rgba32f");var In=["uint8"];Ce.oes_texture_half_float&&In.push("half float","float16"),Ce.oes_texture_float&&In.push("float","float32");function Ln(Cr,Ar,Or){this.target=Cr,this.texture=Ar,this.renderbuffer=Or;var Nn=0,jn=0;Ar?(Nn=Ar.width,jn=Ar.height):Or&&(Nn=Or.width,jn=Or.height),this.width=Nn,this.height=jn}function Fn(Cr){Cr&&(Cr.texture&&Cr.texture._texture.decRef(),Cr.renderbuffer&&Cr.renderbuffer._renderbuffer.decRef())}function v(Cr,Ar,Or){if(Cr)if(Cr.texture){var Nn=Cr.texture._texture,jn=Math.max(1,Nn.width),zn=Math.max(1,Nn.height);vt(jn===Ar&&zn===Or,"inconsistent width/height for supplied texture"),Nn.refCount+=1}else{var da=Cr.renderbuffer._renderbuffer;vt(da.width===Ar&&da.height===Or,"inconsistent width/height for renderbuffer"),da.refCount+=1}}function N(Cr,Ar){Ar&&(Ar.texture?Ot.framebufferTexture2D(jt,Cr,Ar.target,Ar.texture._texture.texture,0):Ot.framebufferRenderbuffer(jt,Cr,le,Ar.renderbuffer._renderbuffer.renderbuffer))}function K(Cr){var Ar=Ae,Or=null,Nn=null,jn=Cr;typeof Cr=="object"&&(jn=Cr.data,"target"in Cr&&(Ar=Cr.target|0)),vt.type(jn,"function","invalid attachment data");var zn=jn._reglType;return zn==="texture2d"?(Or=jn,vt(Ar===Ae)):zn==="textureCube"?(Or=jn,vt(Ar>=vr&&Ar<vr+6,"invalid cube map target")):zn==="renderbuffer"?(Nn=jn,Ar=le):vt.raise("invalid regl object for attachment"),new Ln(Ar,Or,Nn)}function ot(Cr,Ar,Or,Nn,jn){if(Or){var zn=Hr.create2D({width:Cr,height:Ar,format:Nn,type:jn});return zn._texture.refCount=0,new Ln(Ae,zn,null)}else{var da=hn.create({width:Cr,height:Ar,format:Nn});return da._renderbuffer.refCount=0,new Ln(le,null,da)}}function pt(Cr){return Cr&&(Cr.texture||Cr.renderbuffer)}function bt(Cr,Ar,Or){Cr&&(Cr.texture?Cr.texture.resize(Ar,Or):Cr.renderbuffer&&Cr.renderbuffer.resize(Ar,Or),Cr.width=Ar,Cr.height=Or)}var At=0,Rt={};function Zt(){this.id=At++,Rt[this.id]=this,this.framebuffer=Ot.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function se(Cr){Cr.colorAttachments.forEach(Fn),Fn(Cr.depthAttachment),Fn(Cr.stencilAttachment),Fn(Cr.depthStencilAttachment)}function _e(Cr){var Ar=Cr.framebuffer;vt(Ar,"must not double destroy framebuffer"),Ot.deleteFramebuffer(Ar),Cr.framebuffer=null,Br.framebufferCount--,delete Rt[Cr.id]}function Ee(Cr){var Ar;Ot.bindFramebuffer(jt,Cr.framebuffer);var Or=Cr.colorAttachments;for(Ar=0;Ar<Or.length;++Ar)N(yr+Ar,Or[Ar]);for(Ar=Or.length;Ar<Ke.maxColorAttachments;++Ar)Ot.framebufferTexture2D(jt,yr+Ar,Ae,null,0);Ot.framebufferTexture2D(jt,An,Ae,null,0),Ot.framebufferTexture2D(jt,Zr,Ae,null,0),Ot.framebufferTexture2D(jt,Cn,Ae,null,0),N(Zr,Cr.depthAttachment),N(Cn,Cr.stencilAttachment),N(An,Cr.depthStencilAttachment);var Nn=Ot.checkFramebufferStatus(jt);!Ot.isContextLost()&&Nn!==Vn&&vt.raise("framebuffer configuration not supported, status = "+Hs[Nn]),Ot.bindFramebuffer(jt,Jr.next?Jr.next.framebuffer:null),Jr.cur=Jr.next,Ot.getError()}function He(Cr,Ar){var Or=new Zt;Br.framebufferCount++;function Nn(zn,da){var fa;vt(Jr.next!==Or,"can not update framebuffer which is currently in use");var Ea=0,Ba=0,Oa=!0,Ji=!0,Fa=null,Wo=!0,ji="rgba",ui="uint8",Po=1,Fo=null,Zo=null,vs=null,Ko=!1;if(typeof zn=="number")Ea=zn|0,Ba=da|0||Ea;else if(!zn)Ea=Ba=1;else{vt.type(zn,"object","invalid arguments for framebuffer");var Ja=zn;if("shape"in Ja){var ys=Ja.shape;vt(Array.isArray(ys)&&ys.length>=2,"invalid shape for framebuffer"),Ea=ys[0],Ba=ys[1]}else"radius"in Ja&&(Ea=Ba=Ja.radius),"width"in Ja&&(Ea=Ja.width),"height"in Ja&&(Ba=Ja.height);("color"in Ja||"colors"in Ja)&&(Fa=Ja.color||Ja.colors,Array.isArray(Fa)&&vt(Fa.length===1||Ce.webgl_draw_buffers,"multiple render targets not supported")),Fa||("colorCount"in Ja&&(Po=Ja.colorCount|0,vt(Po>0,"invalid color buffer count")),"colorTexture"in Ja&&(Wo=!!Ja.colorTexture,ji="rgba4"),"colorType"in Ja&&(ui=Ja.colorType,Wo?(vt(Ce.oes_texture_float||!(ui==="float"||ui==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),vt(Ce.oes_texture_half_float||!(ui==="half float"||ui==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):ui==="half float"||ui==="float16"?(vt(Ce.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),ji="rgba16f"):(ui==="float"||ui==="float32")&&(vt(Ce.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),ji="rgba32f"),vt.oneOf(ui,In,"invalid color type")),"colorFormat"in Ja&&(ji=Ja.colorFormat,On.indexOf(ji)>=0?Wo=!0:Rn.indexOf(ji)>=0?Wo=!1:Wo?vt.oneOf(Ja.colorFormat,On,"invalid color format for texture"):vt.oneOf(Ja.colorFormat,Rn,"invalid color format for renderbuffer"))),("depthTexture"in Ja||"depthStencilTexture"in Ja)&&(Ko=!!(Ja.depthTexture||Ja.depthStencilTexture),vt(!Ko||Ce.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Ja&&(typeof Ja.depth=="boolean"?Oa=Ja.depth:(Fo=Ja.depth,Ji=!1)),"stencil"in Ja&&(typeof Ja.stencil=="boolean"?Ji=Ja.stencil:(Zo=Ja.stencil,Oa=!1)),"depthStencil"in Ja&&(typeof Ja.depthStencil=="boolean"?Oa=Ji=Ja.depthStencil:(vs=Ja.depthStencil,Oa=!1,Ji=!1))}var Pi=null,_a=null,di=null,Ei=null;if(Array.isArray(Fa))Pi=Fa.map(K);else if(Fa)Pi=[K(Fa)];else for(Pi=new Array(Po),fa=0;fa<Po;++fa)Pi[fa]=ot(Ea,Ba,Wo,ji,ui);vt(Ce.webgl_draw_buffers||Pi.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),vt(Pi.length<=Ke.maxColorAttachments,"too many color attachments, not supported"),Ea=Ea||Pi[0].width,Ba=Ba||Pi[0].height,Fo?_a=K(Fo):Oa&&!Ji&&(_a=ot(Ea,Ba,Ko,"depth","uint32")),Zo?di=K(Zo):Ji&&!Oa&&(di=ot(Ea,Ba,!1,"stencil","uint8")),vs?Ei=K(vs):!Fo&&!Zo&&Ji&&Oa&&(Ei=ot(Ea,Ba,Ko,"depth stencil","depth stencil")),vt(!!Fo+!!Zo+!!vs<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var Jo=null;for(fa=0;fa<Pi.length;++fa)if(v(Pi[fa],Ea,Ba),vt(!Pi[fa]||Pi[fa].texture&&ma.indexOf(Pi[fa].texture._texture.format)>=0||Pi[fa].renderbuffer&&_u.indexOf(Pi[fa].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+fa+" is invalid"),Pi[fa]&&Pi[fa].texture){var ku=ai[Pi[fa].texture._texture.format]*bi[Pi[fa].texture._texture.type];Jo===null?Jo=ku:vt(Jo===ku,"all color attachments much have the same number of bits per pixel.")}return v(_a,Ea,Ba),vt(!_a||_a.texture&&_a.texture._texture.format===Ya||_a.renderbuffer&&_a.renderbuffer._renderbuffer.format===co,"invalid depth attachment for framebuffer object"),v(di,Ea,Ba),vt(!di||di.renderbuffer&&di.renderbuffer._renderbuffer.format===Mo,"invalid stencil attachment for framebuffer object"),v(Ei,Ea,Ba),vt(!Ei||Ei.texture&&Ei.texture._texture.format===lo||Ei.renderbuffer&&Ei.renderbuffer._renderbuffer.format===lo,"invalid depth-stencil attachment for framebuffer object"),se(Or),Or.width=Ea,Or.height=Ba,Or.colorAttachments=Pi,Or.depthAttachment=_a,Or.stencilAttachment=di,Or.depthStencilAttachment=Ei,Nn.color=Pi.map(pt),Nn.depth=pt(_a),Nn.stencil=pt(di),Nn.depthStencil=pt(Ei),Nn.width=Or.width,Nn.height=Or.height,Ee(Or),Nn}function jn(zn,da){vt(Jr.next!==Or,"can not resize a framebuffer which is currently in use");var fa=Math.max(zn|0,1),Ea=Math.max(da|0||fa,1);if(fa===Or.width&&Ea===Or.height)return Nn;for(var Ba=Or.colorAttachments,Oa=0;Oa<Ba.length;++Oa)bt(Ba[Oa],fa,Ea);return bt(Or.depthAttachment,fa,Ea),bt(Or.stencilAttachment,fa,Ea),bt(Or.depthStencilAttachment,fa,Ea),Or.width=Nn.width=fa,Or.height=Nn.height=Ea,Ee(Or),Nn}return Nn(Cr,Ar),_(Nn,{resize:jn,_reglType:"framebuffer",_framebuffer:Or,destroy:function(){_e(Or),se(Or)},use:function(zn){Jr.setFBO({framebuffer:Nn},zn)}})}function br(Cr){var Ar=Array(6);function Or(jn){var zn;vt(Ar.indexOf(Jr.next)<0,"can not update framebuffer which is currently in use");var da={color:null},fa=0,Ea=null,Ba="rgba",Oa="uint8",Ji=1;if(typeof jn=="number")fa=jn|0;else if(!jn)fa=1;else{vt.type(jn,"object","invalid arguments for framebuffer");var Fa=jn;if("shape"in Fa){var Wo=Fa.shape;vt(Array.isArray(Wo)&&Wo.length>=2,"invalid shape for framebuffer"),vt(Wo[0]===Wo[1],"cube framebuffer must be square"),fa=Wo[0]}else"radius"in Fa&&(fa=Fa.radius|0),"width"in Fa?(fa=Fa.width|0,"height"in Fa&&vt(Fa.height===fa,"must be square")):"height"in Fa&&(fa=Fa.height|0);("color"in Fa||"colors"in Fa)&&(Ea=Fa.color||Fa.colors,Array.isArray(Ea)&&vt(Ea.length===1||Ce.webgl_draw_buffers,"multiple render targets not supported")),Ea||("colorCount"in Fa&&(Ji=Fa.colorCount|0,vt(Ji>0,"invalid color buffer count")),"colorType"in Fa&&(vt.oneOf(Fa.colorType,In,"invalid color type"),Oa=Fa.colorType),"colorFormat"in Fa&&(Ba=Fa.colorFormat,vt.oneOf(Fa.colorFormat,On,"invalid color format for texture"))),"depth"in Fa&&(da.depth=Fa.depth),"stencil"in Fa&&(da.stencil=Fa.stencil),"depthStencil"in Fa&&(da.depthStencil=Fa.depthStencil)}var ji;if(Ea)if(Array.isArray(Ea))for(ji=[],zn=0;zn<Ea.length;++zn)ji[zn]=Ea[zn];else ji=[Ea];else{ji=Array(Ji);var ui={radius:fa,format:Ba,type:Oa};for(zn=0;zn<Ji;++zn)ji[zn]=Hr.createCube(ui)}for(da.color=Array(ji.length),zn=0;zn<ji.length;++zn){var Po=ji[zn];vt(typeof Po=="function"&&Po._reglType==="textureCube","invalid cube map"),fa=fa||Po.width,vt(Po.width===fa&&Po.height===fa,"invalid cube map shape"),da.color[zn]={target:vr,data:ji[zn]}}for(zn=0;zn<6;++zn){for(var Fo=0;Fo<ji.length;++Fo)da.color[Fo].target=vr+zn;zn>0&&(da.depth=Ar[0].depth,da.stencil=Ar[0].stencil,da.depthStencil=Ar[0].depthStencil),Ar[zn]?Ar[zn](da):Ar[zn]=He(da)}return _(Or,{width:fa,height:fa,color:ji})}function Nn(jn){var zn,da=jn|0;if(vt(da>0&&da<=Ke.maxCubeMapSize,"invalid radius for cube fbo"),da===Or.width)return Or;var fa=Or.color;for(zn=0;zn<fa.length;++zn)fa[zn].resize(da);for(zn=0;zn<6;++zn)Ar[zn].resize(da);return Or.width=Or.height=da,Or}return Or(Cr),_(Or,{faces:Ar,resize:Nn,_reglType:"framebufferCube",destroy:function(){Ar.forEach(function(jn){jn.destroy()})}})}function rn(){Jr.cur=null,Jr.next=null,Jr.dirty=!0,ti(Rt).forEach(function(Cr){Cr.framebuffer=Ot.createFramebuffer(),Ee(Cr)})}return _(Jr,{getFramebuffer:function(Cr){if(typeof Cr=="function"&&Cr._reglType==="framebuffer"){var Ar=Cr._framebuffer;if(Ar instanceof Zt)return Ar}return null},create:He,createCube:br,clear:function(){ti(Rt).forEach(_e)},restore:rn})}var Yf=5126,Cu=34962;function ff(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Yf,this.offset=0,this.stride=0,this.divisor=0}function Xf(Ot,Ce,Ke,Hr,hn){for(var Br=Ke.maxAttributes,Jr=new Array(Br),On=0;On<Br;++On)Jr[On]=new ff;var Rn=0,In={},Ln={Record:ff,scope:{},state:Jr,currentVAO:null,targetVAO:null,restore:v()?Rt:function(){},createVAO:Zt,getVAO:K,destroyBuffer:Fn,setVAO:v()?ot:pt,clear:v()?bt:function(){}};function Fn(se){for(var _e=0;_e<Jr.length;++_e){var Ee=Jr[_e];Ee.buffer===se&&(Ot.disableVertexAttribArray(_e),Ee.buffer=null)}}function v(){return Ce.oes_vertex_array_object}function N(){return Ce.angle_instanced_arrays}function K(se){return typeof se=="function"&&se._vao?se._vao:null}function ot(se){if(se!==Ln.currentVAO){var _e=v();se?_e.bindVertexArrayOES(se.vao):_e.bindVertexArrayOES(null),Ln.currentVAO=se}}function pt(se){if(se!==Ln.currentVAO){if(se)se.bindAttrs();else for(var _e=N(),Ee=0;Ee<Jr.length;++Ee){var He=Jr[Ee];He.buffer?(Ot.enableVertexAttribArray(Ee),Ot.vertexAttribPointer(Ee,He.size,He.type,He.normalized,He.stride,He.offfset),_e&&He.divisor&&_e.vertexAttribDivisorANGLE(Ee,He.divisor)):(Ot.disableVertexAttribArray(Ee),Ot.vertexAttrib4f(Ee,He.x,He.y,He.z,He.w))}Ln.currentVAO=se}}function bt(){ti(In).forEach(function(se){se.destroy()})}function At(){this.id=++Rn,this.attributes=[];var se=v();se?this.vao=se.createVertexArrayOES():this.vao=null,In[this.id]=this,this.buffers=[]}At.prototype.bindAttrs=function(){for(var se=N(),_e=this.attributes,Ee=0;Ee<_e.length;++Ee){var He=_e[Ee];He.buffer?(Ot.enableVertexAttribArray(Ee),Ot.bindBuffer(Cu,He.buffer.buffer),Ot.vertexAttribPointer(Ee,He.size,He.type,He.normalized,He.stride,He.offset),se&&He.divisor&&se.vertexAttribDivisorANGLE(Ee,He.divisor)):(Ot.disableVertexAttribArray(Ee),Ot.vertexAttrib4f(Ee,He.x,He.y,He.z,He.w))}for(var br=_e.length;br<Br;++br)Ot.disableVertexAttribArray(br)},At.prototype.refresh=function(){var se=v();se&&(se.bindVertexArrayOES(this.vao),this.bindAttrs(),Ln.currentVAO=this)},At.prototype.destroy=function(){if(this.vao){var se=v();this===Ln.currentVAO&&(Ln.currentVAO=null,se.bindVertexArrayOES(null)),se.deleteVertexArrayOES(this.vao),this.vao=null}In[this.id]&&(delete In[this.id],Hr.vaoCount-=1)};function Rt(){var se=v();se&&ti(In).forEach(function(_e){_e.refresh()})}function Zt(se){var _e=new At;Hr.vaoCount+=1;function Ee(He){vt(Array.isArray(He),"arguments to vertex array constructor must be an array"),vt(He.length<Br,"too many attributes"),vt(He.length>0,"must specify at least one attribute");var br={},rn=_e.attributes;rn.length=He.length;for(var Cr=0;Cr<He.length;++Cr){var Ar=He[Cr],Or=rn[Cr]=new ff,Nn=Ar.data||Ar;if(Array.isArray(Nn)||G(Nn)||ri(Nn)){var jn;_e.buffers[Cr]&&(jn=_e.buffers[Cr],G(Nn)&&jn._buffer.byteLength>=Nn.byteLength?jn.subdata(Nn):(jn.destroy(),_e.buffers[Cr]=null)),_e.buffers[Cr]||(jn=_e.buffers[Cr]=hn.create(Ar,Cu,!1,!0)),Or.buffer=hn.getBuffer(jn),Or.size=Or.buffer.dimension|0,Or.normalized=!1,Or.type=Or.buffer.dtype,Or.offset=0,Or.stride=0,Or.divisor=0,Or.state=1,br[Cr]=1}else hn.getBuffer(Ar)?(Or.buffer=hn.getBuffer(Ar),Or.size=Or.buffer.dimension|0,Or.normalized=!1,Or.type=Or.buffer.dtype,Or.offset=0,Or.stride=0,Or.divisor=0,Or.state=1):hn.getBuffer(Ar.buffer)?(Or.buffer=hn.getBuffer(Ar.buffer),Or.size=(+Ar.size||Or.buffer.dimension)|0,Or.normalized=!!Ar.normalized||!1,"type"in Ar?(vt.parameter(Ar.type,$i,"invalid buffer type"),Or.type=$i[Ar.type]):Or.type=Or.buffer.dtype,Or.offset=(Ar.offset||0)|0,Or.stride=(Ar.stride||0)|0,Or.divisor=(Ar.divisor||0)|0,Or.state=1,vt(Or.size>=1&&Or.size<=4,"size must be between 1 and 4"),vt(Or.offset>=0,"invalid offset"),vt(Or.stride>=0&&Or.stride<=255,"stride must be between 0 and 255"),vt(Or.divisor>=0,"divisor must be positive"),vt(!Or.divisor||!!Ce.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Ar?(vt(Cr>0,"first attribute must not be a constant"),Or.x=+Ar.x||0,Or.y=+Ar.y||0,Or.z=+Ar.z||0,Or.w=+Ar.w||0,Or.state=2):vt(!1,"invalid attribute spec for location "+Cr)}for(var zn=0;zn<_e.buffers.length;++zn)!br[zn]&&_e.buffers[zn]&&(_e.buffers[zn].destroy(),_e.buffers[zn]=null);return _e.refresh(),Ee}return Ee.destroy=function(){for(var He=0;He<_e.buffers.length;++He)_e.buffers[He]&&_e.buffers[He].destroy();_e.buffers.length=0,_e.destroy()},Ee._vao=_e,Ee._reglType="vao",Ee(se)}return Ln}var Hu=35632,Tu=35633,cf=35718,Zu=35721;function lf(Ot,Ce,Ke,Hr){var hn={},Br={};function Jr(ot,pt,bt,At){this.name=ot,this.id=pt,this.location=bt,this.info=At}function On(ot,pt){for(var bt=0;bt<ot.length;++bt)if(ot[bt].id===pt.id){ot[bt].location=pt.location;return}ot.push(pt)}function Rn(ot,pt,bt){var At=ot===Hu?hn:Br,Rt=At[pt];if(!Rt){var Zt=Ce.str(pt);Rt=Ot.createShader(ot),Ot.shaderSource(Rt,Zt),Ot.compileShader(Rt),vt.shaderError(Ot,Rt,Zt,ot,bt),At[pt]=Rt}return Rt}var In={},Ln=[],Fn=0;function v(ot,pt){this.id=Fn++,this.fragId=ot,this.vertId=pt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Hr.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function N(ot,pt,bt){var At,Rt,Zt=Rn(Hu,ot.fragId),se=Rn(Tu,ot.vertId),_e=ot.program=Ot.createProgram();if(Ot.attachShader(_e,Zt),Ot.attachShader(_e,se),bt)for(At=0;At<bt.length;++At){var Ee=bt[At];Ot.bindAttribLocation(_e,Ee[0],Ee[1])}Ot.linkProgram(_e),vt.linkError(Ot,_e,Ce.str(ot.fragId),Ce.str(ot.vertId),pt);var He=Ot.getProgramParameter(_e,cf);Hr.profile&&(ot.stats.uniformsCount=He);var br=ot.uniforms;for(At=0;At<He;++At)if(Rt=Ot.getActiveUniform(_e,At),Rt)if(Rt.size>1)for(var rn=0;rn<Rt.size;++rn){var Cr=Rt.name.replace("[0]","["+rn+"]");On(br,new Jr(Cr,Ce.id(Cr),Ot.getUniformLocation(_e,Cr),Rt))}else On(br,new Jr(Rt.name,Ce.id(Rt.name),Ot.getUniformLocation(_e,Rt.name),Rt));var Ar=Ot.getProgramParameter(_e,Zu);Hr.profile&&(ot.stats.attributesCount=Ar);var Or=ot.attributes;for(At=0;At<Ar;++At)Rt=Ot.getActiveAttrib(_e,At),Rt&&On(Or,new Jr(Rt.name,Ce.id(Rt.name),Ot.getAttribLocation(_e,Rt.name),Rt))}Hr.profile&&(Ke.getMaxUniformsCount=function(){var ot=0;return Ln.forEach(function(pt){pt.stats.uniformsCount>ot&&(ot=pt.stats.uniformsCount)}),ot},Ke.getMaxAttributesCount=function(){var ot=0;return Ln.forEach(function(pt){pt.stats.attributesCount>ot&&(ot=pt.stats.attributesCount)}),ot});function K(){hn={},Br={};for(var ot=0;ot<Ln.length;++ot)N(Ln[ot],null,Ln[ot].attributes.map(function(pt){return[pt.location,pt.name]}))}return{clear:function(){var ot=Ot.deleteShader.bind(Ot);ti(hn).forEach(ot),hn={},ti(Br).forEach(ot),Br={},Ln.forEach(function(pt){Ot.deleteProgram(pt.program)}),Ln.length=0,In={},Ke.shaderCount=0},program:function(ot,pt,bt,At){vt.command(ot>=0,"missing vertex shader",bt),vt.command(pt>=0,"missing fragment shader",bt);var Rt=In[pt];Rt||(Rt=In[pt]={});var Zt=Rt[ot];if(Zt&&(Zt.refCount++,!At))return Zt;var se=new v(pt,ot);return Ke.shaderCount++,N(se,bt,At),Zt||(Rt[ot]=se),Ln.push(se),_(se,{destroy:function(){if(se.refCount--,se.refCount<=0){Ot.deleteProgram(se.program);var _e=Ln.indexOf(se);Ln.splice(_e,1),Ke.shaderCount--}Rt[se.vertId].refCount<=0&&(Ot.deleteShader(Br[se.vertId]),delete Br[se.vertId],delete In[se.fragId][se.vertId]),Object.keys(In[se.fragId]).length||(Ot.deleteShader(hn[se.fragId]),delete hn[se.fragId],delete In[se.fragId])}})},restore:K,shader:Rn,frag:-1,vert:-1}}var Qs=6408,Js=5121,Ku=3333,$u=5126;function df(Ot,Ce,Ke,Hr,hn,Br,Jr){function On(Ln){var Fn;Ce.next===null?(vt(hn.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Fn=Js):(vt(Ce.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Fn=Ce.next.colorAttachments[0].texture._texture.type,Br.oes_texture_float?(vt(Fn===Js||Fn===$u,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Fn===$u&&vt(Jr.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):vt(Fn===Js,"Reading from a framebuffer is only allowed for the type 'uint8'"));var v=0,N=0,K=Hr.framebufferWidth,ot=Hr.framebufferHeight,pt=null;G(Ln)?pt=Ln:Ln&&(vt.type(Ln,"object","invalid arguments to regl.read()"),v=Ln.x|0,N=Ln.y|0,vt(v>=0&&v<Hr.framebufferWidth,"invalid x offset for regl.read"),vt(N>=0&&N<Hr.framebufferHeight,"invalid y offset for regl.read"),K=(Ln.width||Hr.framebufferWidth-v)|0,ot=(Ln.height||Hr.framebufferHeight-N)|0,pt=Ln.data||null),pt&&(Fn===Js?vt(pt instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Fn===$u&&vt(pt instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),vt(K>0&&K+v<=Hr.framebufferWidth,"invalid width for read pixels"),vt(ot>0&&ot+N<=Hr.framebufferHeight,"invalid height for read pixels"),Ke();var bt=K*ot*4;return pt||(Fn===Js?pt=new Uint8Array(bt):Fn===$u&&(pt=pt||new Float32Array(bt))),vt.isTypedArray(pt,"data buffer for regl.read() must be a typedarray"),vt(pt.byteLength>=bt,"data buffer for regl.read() too small"),Ot.pixelStorei(Ku,4),Ot.readPixels(v,N,K,ot,Qs,Fn,pt),pt}function Rn(Ln){var Fn;return Ce.setFBO({framebuffer:Ln.framebuffer},function(){Fn=On(Ln)}),Fn}function In(Ln){return!Ln||!("framebuffer"in Ln)?On(Ln):Rn(Ln)}return In}function iu(Ot){return Array.prototype.slice.call(Ot)}function _s(Ot){return iu(Ot).join("")}function kl(){var Ot=0,Ce=[],Ke=[];function Hr(Fn){for(var v=0;v<Ke.length;++v)if(Ke[v]===Fn)return Ce[v];var N="g"+Ot++;return Ce.push(N),Ke.push(Fn),N}function hn(){var Fn=[];function v(){Fn.push.apply(Fn,iu(arguments))}var N=[];function K(){var ot="v"+Ot++;return N.push(ot),arguments.length>0&&(Fn.push(ot,"="),Fn.push.apply(Fn,iu(arguments)),Fn.push(";")),ot}return _(v,{def:K,toString:function(){return _s([N.length>0?"var "+N.join(",")+";":"",_s(Fn)])}})}function Br(){var Fn=hn(),v=hn(),N=Fn.toString,K=v.toString;function ot(pt,bt){v(pt,bt,"=",Fn.def(pt,bt),";")}return _(function(){Fn.apply(Fn,iu(arguments))},{def:Fn.def,entry:Fn,exit:v,save:ot,set:function(pt,bt,At){ot(pt,bt),Fn(pt,bt,"=",At,";")},toString:function(){return N()+K()}})}function Jr(){var Fn=_s(arguments),v=Br(),N=Br(),K=v.toString,ot=N.toString;return _(v,{then:function(){return v.apply(v,iu(arguments)),this},else:function(){return N.apply(N,iu(arguments)),this},toString:function(){var pt=ot();return pt&&(pt="else{"+pt+"}"),_s(["if(",Fn,"){",K(),"}",pt])}})}var On=hn(),Rn={};function In(Fn,v){var N=[];function K(){var Rt="a"+N.length;return N.push(Rt),Rt}v=v||0;for(var ot=0;ot<v;++ot)K();var pt=Br(),bt=pt.toString,At=Rn[Fn]=_(pt,{arg:K,toString:function(){return _s(["function(",N.join(),"){",bt(),"}"])}});return At}function Ln(){var Fn=['"use strict";',On,"return {"];Object.keys(Rn).forEach(function(K){Fn.push('"',K,'":',Rn[K].toString(),",")}),Fn.push("}");var v=_s(Fn).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),N=Function.apply(null,Ce.concat(v));return N.apply(null,Ke)}return{global:On,link:Hr,block:hn,proc:In,scope:Br,cond:Jr,compile:Ln}}var hf="xyzw".split(""),Bl=5121,vf=1,$c=2,qc=0,Qc=1,Mc=2,_c=3,Cc=4,Fl=5,Jc=6,pf="dither",tl="blend.enable",jf="blend.color",el="blend.equation",gf="blend.func",Cs="depth.enable",rl="depth.func",zl="depth.range",mf="depth.mask",yf="colorMask",ar="cull.enable",Au="cull.face",qu="frontFace",Vf="lineWidth",Gl="polygonOffset.enable",Ws="polygonOffset.offset",nl="sample.alpha",Hf="sample.enable",Qu="sample.coverage",Zf="stencil.enable",al="stencil.mask",Tc="stencil.func",Ho="stencil.opFront",Ju="stencil.opBack",il="scissor.enable",Ac="scissor.box",ou="viewport",tf="profile",Ou="framebuffer",gu="vert",Kf="frag",bf="elements",Iu="primitive",Du="count",Oc="offset",$f="instances",qf="vao",Qf="Width",ol="Height",Pu=Ou+Qf,Ps=Ou+ol,sl=ou+Qf,Ul=ou+ol,Ic="drawingBuffer",xf=Ic+Qf,ul=Ic+ol,Wl=[gf,el,Tc,Ho,Ju,Qu,ou,Ac,Ws],ef=34962,fl=34963,Yl=35632,hd=35633,cl=3553,Dc=34067,vd=2884,Xl=3042,ll=3024,jl=2960,dl=2929,Vl=3089,Hl=32823,hl=32926,su=32928,Jf=5126,Pc=35664,tc=35665,Lc=35666,vl=5124,ec=35667,Ef=35668,rc=35669,pl=35670,Nc=35671,Rc=35672,kc=35673,nc=35674,ac=35675,wf=35676,Lu=35678,Sf=35680,Mf=4,ic=1028,mu=1029,Zl=2304,Bc=2305,Kl=32775,_f=32776,gl=519,uu=7680,$l=0,ml=1,ql=32774,Ql=513,Jl=36160,Ud=36064,hs={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},td=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],rf={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Nu={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},ed={frag:Yl,vert:hd},yl={cw:Zl,ccw:Bc};function Fc(Ot){return Array.isArray(Ot)||G(Ot)||ri(Ot)}function rd(Ot){return Ot.sort(function(Ce,Ke){return Ce===ou?-1:Ke===ou?1:Ce<Ke?-1:1})}function ms(Ot,Ce,Ke,Hr){this.thisDep=Ot,this.contextDep=Ce,this.propDep=Ke,this.append=Hr}function Ru(Ot){return Ot&&!(Ot.thisDep||Ot.contextDep||Ot.propDep)}function Uo(Ot){return new ms(!1,!1,!1,Ot)}function Ts(Ot,Ce){var Ke=Ot.type;if(Ke===qc){var Hr=Ot.data.length;return new ms(!0,Hr>=1,Hr>=2,Ce)}else if(Ke===Cc){var hn=Ot.data;return new ms(hn.thisDep,hn.contextDep,hn.propDep,Ce)}else{if(Ke===Fl)return new ms(!1,!1,!1,Ce);if(Ke===Jc){for(var Br=!1,Jr=!1,On=!1,Rn=0;Rn<Ot.data.length;++Rn){var In=Ot.data[Rn];if(In.type===Qc)On=!0;else if(In.type===Mc)Jr=!0;else if(In.type===_c)Br=!0;else if(In.type===qc){Br=!0;var Ln=In.data;Ln>=1&&(Jr=!0),Ln>=2&&(On=!0)}else In.type===Cc&&(Br=Br||In.data.thisDep,Jr=Jr||In.data.contextDep,On=On||In.data.propDep)}return new ms(Br,Jr,On,Ce)}else return new ms(Ke===_c,Ke===Mc,Ke===Qc,Ce)}}var oc=new ms(!1,!1,!1,function(){});function pd(Ot,Ce,Ke,Hr,hn,Br,Jr,On,Rn,In,Ln,Fn,v,N,K){var ot=In.Record,pt={add:32774,subtract:32778,"reverse subtract":32779};Ke.ext_blend_minmax&&(pt.min=Kl,pt.max=_f);var bt=Ke.angle_instanced_arrays,At=Ke.webgl_draw_buffers,Rt={dirty:!0,profile:K.profile},Zt={},se=[],_e={},Ee={};function He(Be){return Be.replace(".","_")}function br(Be,Se,sr){var Ir=He(Be);se.push(Be),Zt[Ir]=Rt[Ir]=!!sr,_e[Ir]=Se}function rn(Be,Se,sr){var Ir=He(Be);se.push(Be),Array.isArray(sr)?(Rt[Ir]=sr.slice(),Zt[Ir]=sr.slice()):Rt[Ir]=Zt[Ir]=sr,Ee[Ir]=Se}br(pf,ll),br(tl,Xl),rn(jf,"blendColor",[0,0,0,0]),rn(el,"blendEquationSeparate",[ql,ql]),rn(gf,"blendFuncSeparate",[ml,$l,ml,$l]),br(Cs,dl,!0),rn(rl,"depthFunc",Ql),rn(zl,"depthRange",[0,1]),rn(mf,"depthMask",!0),rn(yf,yf,[!0,!0,!0,!0]),br(ar,vd),rn(Au,"cullFace",mu),rn(qu,qu,Bc),rn(Vf,Vf,1),br(Gl,Hl),rn(Ws,"polygonOffset",[0,0]),br(nl,hl),br(Hf,su),rn(Qu,"sampleCoverage",[1,!1]),br(Zf,jl),rn(al,"stencilMask",-1),rn(Tc,"stencilFunc",[gl,0,-1]),rn(Ho,"stencilOpSeparate",[ic,uu,uu,uu]),rn(Ju,"stencilOpSeparate",[mu,uu,uu,uu]),br(il,Vl),rn(Ac,"scissor",[0,0,Ot.drawingBufferWidth,Ot.drawingBufferHeight]),rn(ou,ou,[0,0,Ot.drawingBufferWidth,Ot.drawingBufferHeight]);var Cr={gl:Ot,context:v,strings:Ce,next:Zt,current:Rt,draw:Fn,elements:Br,buffer:hn,shader:Ln,attributes:In.state,vao:In,uniforms:Rn,framebuffer:On,extensions:Ke,timer:N,isBufferArgs:Fc},Ar={primTypes:Ga,compareFuncs:rf,blendFuncs:hs,blendEquations:pt,stencilOps:Nu,glTypes:$i,orientationType:yl};vt.optional(function(){Cr.isArrayLike=Xa}),At&&(Ar.backBuffer=[mu],Ar.drawBuffer=yn(Hr.maxDrawbuffers,function(Be){return Be===0?[0]:yn(Be,function(Se){return Ud+Se})}));var Or=0;function Nn(){var Be=kl(),Se=Be.link,sr=Be.global;Be.id=Or++,Be.batchId="0";var Ir=Se(Cr),Rr=Be.shared={props:"a0"};Object.keys(Cr).forEach(function(or){Rr[or]=sr.def(Ir,".",or)}),vt.optional(function(){Be.CHECK=Se(vt),Be.commandStr=vt.guessCommand(),Be.command=Se(Be.commandStr),Be.assert=function(or,Le,Tr){or("if(!(",Le,"))",this.CHECK,".commandRaise(",Se(Tr),",",this.command,");")},Ar.invalidBlendCombinations=td});var hr=Be.next={},ur=Be.current={};Object.keys(Ee).forEach(function(or){Array.isArray(Rt[or])&&(hr[or]=sr.def(Rr.next,".",or),ur[or]=sr.def(Rr.current,".",or))});var Er=Be.constants={};Object.keys(Ar).forEach(function(or){Er[or]=sr.def(JSON.stringify(Ar[or]))}),Be.invoke=function(or,Le){switch(Le.type){case qc:var Tr=["this",Rr.context,Rr.props,Be.batchId];return or.def(Se(Le.data),".call(",Tr.slice(0,Math.max(Le.data.length+1,4)),")");case Qc:return or.def(Rr.props,Le.data);case Mc:return or.def(Rr.context,Le.data);case _c:return or.def("this",Le.data);case Cc:return Le.data.append(Be,or),Le.data.ref;case Fl:return Le.data.toString();case Jc:return Le.data.map(function(zr){return Be.invoke(or,zr)})}},Be.attribCache={};var Fe={};return Be.scopeAttrib=function(or){var Le=Ce.id(or);if(Le in Fe)return Fe[Le];var Tr=In.scope[Le];Tr||(Tr=In.scope[Le]=new ot);var zr=Fe[Le]=Se(Tr);return zr},Be}function jn(Be){var Se=Be.static,sr=Be.dynamic,Ir;if(tf in Se){var Rr=!!Se[tf];Ir=Uo(function(ur,Er){return Rr}),Ir.enable=Rr}else if(tf in sr){var hr=sr[tf];Ir=Ts(hr,function(ur,Er){return ur.invoke(Er,hr)})}return Ir}function zn(Be,Se){var sr=Be.static,Ir=Be.dynamic;if(Ou in sr){var Rr=sr[Ou];return Rr?(Rr=On.getFramebuffer(Rr),vt.command(Rr,"invalid framebuffer object"),Uo(function(ur,Er){var Fe=ur.link(Rr),or=ur.shared;Er.set(or.framebuffer,".next",Fe);var Le=or.context;return Er.set(Le,"."+Pu,Fe+".width"),Er.set(Le,"."+Ps,Fe+".height"),Fe})):Uo(function(ur,Er){var Fe=ur.shared;Er.set(Fe.framebuffer,".next","null");var or=Fe.context;return Er.set(or,"."+Pu,or+"."+xf),Er.set(or,"."+Ps,or+"."+ul),"null"})}else if(Ou in Ir){var hr=Ir[Ou];return Ts(hr,function(ur,Er){var Fe=ur.invoke(Er,hr),or=ur.shared,Le=or.framebuffer,Tr=Er.def(Le,".getFramebuffer(",Fe,")");vt.optional(function(){ur.assert(Er,"!"+Fe+"||"+Tr,"invalid framebuffer object")}),Er.set(Le,".next",Tr);var zr=or.context;return Er.set(zr,"."+Pu,Tr+"?"+Tr+".width:"+zr+"."+xf),Er.set(zr,"."+Ps,Tr+"?"+Tr+".height:"+zr+"."+ul),Tr})}else return null}function da(Be,Se,sr){var Ir=Be.static,Rr=Be.dynamic;function hr(Fe){if(Fe in Ir){var or=Ir[Fe];vt.commandType(or,"object","invalid "+Fe,sr.commandStr);var Le=!0,Tr=or.x|0,zr=or.y|0,gn,mn;return"width"in or?(gn=or.width|0,vt.command(gn>=0,"invalid "+Fe,sr.commandStr)):Le=!1,"height"in or?(mn=or.height|0,vt.command(mn>=0,"invalid "+Fe,sr.commandStr)):Le=!1,new ms(!Le&&Se&&Se.thisDep,!Le&&Se&&Se.contextDep,!Le&&Se&&Se.propDep,function(pa,$a){var ca=pa.shared.context,Ta=gn;"width"in or||(Ta=$a.def(ca,".",Pu,"-",Tr));var Pa=mn;return"height"in or||(Pa=$a.def(ca,".",Ps,"-",zr)),[Tr,zr,Ta,Pa]})}else if(Fe in Rr){var nn=Rr[Fe],kn=Ts(nn,function(pa,$a){var ca=pa.invoke($a,nn);vt.optional(function(){pa.assert($a,ca+"&&typeof "+ca+'==="object"',"invalid "+Fe)});var Ta=pa.shared.context,Pa=$a.def(ca,".x|0"),wi=$a.def(ca,".y|0"),$o=$a.def('"width" in ',ca,"?",ca,".width|0:","(",Ta,".",Pu,"-",Pa,")"),Ls=$a.def('"height" in ',ca,"?",ca,".height|0:","(",Ta,".",Ps,"-",wi,")");return vt.optional(function(){pa.assert($a,$o+">=0&&"+Ls+">=0","invalid "+Fe)}),[Pa,wi,$o,Ls]});return Se&&(kn.thisDep=kn.thisDep||Se.thisDep,kn.contextDep=kn.contextDep||Se.contextDep,kn.propDep=kn.propDep||Se.propDep),kn}else return Se?new ms(Se.thisDep,Se.contextDep,Se.propDep,function(pa,$a){var ca=pa.shared.context;return[0,0,$a.def(ca,".",Pu),$a.def(ca,".",Ps)]}):null}var ur=hr(ou);if(ur){var Er=ur;ur=new ms(ur.thisDep,ur.contextDep,ur.propDep,function(Fe,or){var Le=Er.append(Fe,or),Tr=Fe.shared.context;return or.set(Tr,"."+sl,Le[2]),or.set(Tr,"."+Ul,Le[3]),Le})}return{viewport:ur,scissor_box:hr(Ac)}}function fa(Be,Se){var sr=Be.static,Ir=typeof sr[Kf]=="string"&&typeof sr[gu]=="string";if(Ir){if(Object.keys(Se.dynamic).length>0)return null;var Rr=Se.static,hr=Object.keys(Rr);if(hr.length>0&&typeof Rr[hr[0]]=="number"){for(var ur=[],Er=0;Er<hr.length;++Er)vt(typeof Rr[hr[Er]]=="number","must specify all vertex attribute locations when using vaos"),ur.push([Rr[hr[Er]]|0,hr[Er]]);return ur}}return null}function Ea(Be,Se,sr){var Ir=Be.static,Rr=Be.dynamic;function hr(Le){if(Le in Ir){var Tr=Ce.id(Ir[Le]);vt.optional(function(){Ln.shader(ed[Le],Tr,vt.guessCommand())});var zr=Uo(function(){return Tr});return zr.id=Tr,zr}else if(Le in Rr){var gn=Rr[Le];return Ts(gn,function(mn,nn){var kn=mn.invoke(nn,gn),pa=nn.def(mn.shared.strings,".id(",kn,")");return vt.optional(function(){nn(mn.shared.shader,".shader(",ed[Le],",",pa,",",mn.command,");")}),pa})}return null}var ur=hr(Kf),Er=hr(gu),Fe=null,or;return Ru(ur)&&Ru(Er)?(Fe=Ln.program(Er.id,ur.id,null,sr),or=Uo(function(Le,Tr){return Le.link(Fe)})):or=new ms(ur&&ur.thisDep||Er&&Er.thisDep,ur&&ur.contextDep||Er&&Er.contextDep,ur&&ur.propDep||Er&&Er.propDep,function(Le,Tr){var zr=Le.shared.shader,gn;ur?gn=ur.append(Le,Tr):gn=Tr.def(zr,".",Kf);var mn;Er?mn=Er.append(Le,Tr):mn=Tr.def(zr,".",gu);var nn=zr+".program("+mn+","+gn;return vt.optional(function(){nn+=","+Le.command}),Tr.def(nn+")")}),{frag:ur,vert:Er,progVar:or,program:Fe}}function Ba(Be,Se){var sr=Be.static,Ir=Be.dynamic;function Rr(){if(bf in sr){var Le=sr[bf];Fc(Le)?Le=Br.getElements(Br.create(Le,!0)):Le&&(Le=Br.getElements(Le),vt.command(Le,"invalid elements",Se.commandStr));var Tr=Uo(function(gn,mn){if(Le){var nn=gn.link(Le);return gn.ELEMENTS=nn,nn}return gn.ELEMENTS=null,null});return Tr.value=Le,Tr}else if(bf in Ir){var zr=Ir[bf];return Ts(zr,function(gn,mn){var nn=gn.shared,kn=nn.isBufferArgs,pa=nn.elements,$a=gn.invoke(mn,zr),ca=mn.def("null"),Ta=mn.def(kn,"(",$a,")"),Pa=gn.cond(Ta).then(ca,"=",pa,".createStream(",$a,");").else(ca,"=",pa,".getElements(",$a,");");return vt.optional(function(){gn.assert(Pa.else,"!"+$a+"||"+ca,"invalid elements")}),mn.entry(Pa),mn.exit(gn.cond(Ta).then(pa,".destroyStream(",ca,");")),gn.ELEMENTS=ca,ca})}return null}var hr=Rr();function ur(){if(Iu in sr){var Le=sr[Iu];return vt.commandParameter(Le,Ga,"invalid primitve",Se.commandStr),Uo(function(zr,gn){return Ga[Le]})}else if(Iu in Ir){var Tr=Ir[Iu];return Ts(Tr,function(zr,gn){var mn=zr.constants.primTypes,nn=zr.invoke(gn,Tr);return vt.optional(function(){zr.assert(gn,nn+" in "+mn,"invalid primitive, must be one of "+Object.keys(Ga))}),gn.def(mn,"[",nn,"]")})}else if(hr)return Ru(hr)?hr.value?Uo(function(zr,gn){return gn.def(zr.ELEMENTS,".primType")}):Uo(function(){return Mf}):new ms(hr.thisDep,hr.contextDep,hr.propDep,function(zr,gn){var mn=zr.ELEMENTS;return gn.def(mn,"?",mn,".primType:",Mf)});return null}function Er(Le,Tr){if(Le in sr){var zr=sr[Le]|0;return vt.command(!Tr||zr>=0,"invalid "+Le,Se.commandStr),Uo(function(mn,nn){return Tr&&(mn.OFFSET=zr),zr})}else if(Le in Ir){var gn=Ir[Le];return Ts(gn,function(mn,nn){var kn=mn.invoke(nn,gn);return Tr&&(mn.OFFSET=kn,vt.optional(function(){mn.assert(nn,kn+">=0","invalid "+Le)})),kn})}else if(Tr&&hr)return Uo(function(mn,nn){return mn.OFFSET="0",0});return null}var Fe=Er(Oc,!0);function or(){if(Du in sr){var Le=sr[Du]|0;return vt.command(typeof Le=="number"&&Le>=0,"invalid vertex count",Se.commandStr),Uo(function(){return Le})}else if(Du in Ir){var Tr=Ir[Du];return Ts(Tr,function(mn,nn){var kn=mn.invoke(nn,Tr);return vt.optional(function(){mn.assert(nn,"typeof "+kn+'==="number"&&'+kn+">=0&&"+kn+"===("+kn+"|0)","invalid vertex count")}),kn})}else if(hr)if(Ru(hr)){if(hr)return Fe?new ms(Fe.thisDep,Fe.contextDep,Fe.propDep,function(mn,nn){var kn=nn.def(mn.ELEMENTS,".vertCount-",mn.OFFSET);return vt.optional(function(){mn.assert(nn,kn+">=0","invalid vertex offset/element buffer too small")}),kn}):Uo(function(mn,nn){return nn.def(mn.ELEMENTS,".vertCount")});var zr=Uo(function(){return-1});return vt.optional(function(){zr.MISSING=!0}),zr}else{var gn=new ms(hr.thisDep||Fe.thisDep,hr.contextDep||Fe.contextDep,hr.propDep||Fe.propDep,function(mn,nn){var kn=mn.ELEMENTS;return mn.OFFSET?nn.def(kn,"?",kn,".vertCount-",mn.OFFSET,":-1"):nn.def(kn,"?",kn,".vertCount:-1")});return vt.optional(function(){gn.DYNAMIC=!0}),gn}return null}return{elements:hr,primitive:ur(),count:or(),instances:Er($f,!1),offset:Fe}}function Oa(Be,Se){var sr=Be.static,Ir=Be.dynamic,Rr={};return se.forEach(function(hr){var ur=He(hr);function Er(Fe,or){if(hr in sr){var Le=Fe(sr[hr]);Rr[ur]=Uo(function(){return Le})}else if(hr in Ir){var Tr=Ir[hr];Rr[ur]=Ts(Tr,function(zr,gn){return or(zr,gn,zr.invoke(gn,Tr))})}}switch(hr){case ar:case tl:case pf:case Zf:case Cs:case il:case Gl:case nl:case Hf:case mf:return Er(function(Fe){return vt.commandType(Fe,"boolean",hr,Se.commandStr),Fe},function(Fe,or,Le){return vt.optional(function(){Fe.assert(or,"typeof "+Le+'==="boolean"',"invalid flag "+hr,Fe.commandStr)}),Le});case rl:return Er(function(Fe){return vt.commandParameter(Fe,rf,"invalid "+hr,Se.commandStr),rf[Fe]},function(Fe,or,Le){var Tr=Fe.constants.compareFuncs;return vt.optional(function(){Fe.assert(or,Le+" in "+Tr,"invalid "+hr+", must be one of "+Object.keys(rf))}),or.def(Tr,"[",Le,"]")});case zl:return Er(function(Fe){return vt.command(Xa(Fe)&&Fe.length===2&&typeof Fe[0]=="number"&&typeof Fe[1]=="number"&&Fe[0]<=Fe[1],"depth range is 2d array",Se.commandStr),Fe},function(Fe,or,Le){vt.optional(function(){Fe.assert(or,Fe.shared.isArrayLike+"("+Le+")&&"+Le+".length===2&&typeof "+Le+'[0]==="number"&&typeof '+Le+'[1]==="number"&&'+Le+"[0]<="+Le+"[1]","depth range must be a 2d array")});var Tr=or.def("+",Le,"[0]"),zr=or.def("+",Le,"[1]");return[Tr,zr]});case gf:return Er(function(Fe){vt.commandType(Fe,"object","blend.func",Se.commandStr);var or="srcRGB"in Fe?Fe.srcRGB:Fe.src,Le="srcAlpha"in Fe?Fe.srcAlpha:Fe.src,Tr="dstRGB"in Fe?Fe.dstRGB:Fe.dst,zr="dstAlpha"in Fe?Fe.dstAlpha:Fe.dst;return vt.commandParameter(or,hs,ur+".srcRGB",Se.commandStr),vt.commandParameter(Le,hs,ur+".srcAlpha",Se.commandStr),vt.commandParameter(Tr,hs,ur+".dstRGB",Se.commandStr),vt.commandParameter(zr,hs,ur+".dstAlpha",Se.commandStr),vt.command(td.indexOf(or+", "+Tr)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+or+", "+Tr+")",Se.commandStr),[hs[or],hs[Tr],hs[Le],hs[zr]]},function(Fe,or,Le){var Tr=Fe.constants.blendFuncs;vt.optional(function(){Fe.assert(or,Le+"&&typeof "+Le+'==="object"',"invalid blend func, must be an object")});function zr(ca,Ta){var Pa=or.def('"',ca,Ta,'" in ',Le,"?",Le,".",ca,Ta,":",Le,".",ca);return vt.optional(function(){Fe.assert(or,Pa+" in "+Tr,"invalid "+hr+"."+ca+Ta+", must be one of "+Object.keys(hs))}),Pa}var gn=zr("src","RGB"),mn=zr("dst","RGB");vt.optional(function(){var ca=Fe.constants.invalidBlendCombinations;Fe.assert(or,ca+".indexOf("+gn+'+", "+'+mn+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var nn=or.def(Tr,"[",gn,"]"),kn=or.def(Tr,"[",zr("src","Alpha"),"]"),pa=or.def(Tr,"[",mn,"]"),$a=or.def(Tr,"[",zr("dst","Alpha"),"]");return[nn,pa,kn,$a]});case el:return Er(function(Fe){if(typeof Fe=="string")return vt.commandParameter(Fe,pt,"invalid "+hr,Se.commandStr),[pt[Fe],pt[Fe]];if(typeof Fe=="object")return vt.commandParameter(Fe.rgb,pt,hr+".rgb",Se.commandStr),vt.commandParameter(Fe.alpha,pt,hr+".alpha",Se.commandStr),[pt[Fe.rgb],pt[Fe.alpha]];vt.commandRaise("invalid blend.equation",Se.commandStr)},function(Fe,or,Le){var Tr=Fe.constants.blendEquations,zr=or.def(),gn=or.def(),mn=Fe.cond("typeof ",Le,'==="string"');return vt.optional(function(){function nn(kn,pa,$a){Fe.assert(kn,$a+" in "+Tr,"invalid "+pa+", must be one of "+Object.keys(pt))}nn(mn.then,hr,Le),Fe.assert(mn.else,Le+"&&typeof "+Le+'==="object"',"invalid "+hr),nn(mn.else,hr+".rgb",Le+".rgb"),nn(mn.else,hr+".alpha",Le+".alpha")}),mn.then(zr,"=",gn,"=",Tr,"[",Le,"];"),mn.else(zr,"=",Tr,"[",Le,".rgb];",gn,"=",Tr,"[",Le,".alpha];"),or(mn),[zr,gn]});case jf:return Er(function(Fe){return vt.command(Xa(Fe)&&Fe.length===4,"blend.color must be a 4d array",Se.commandStr),yn(4,function(or){return+Fe[or]})},function(Fe,or,Le){return vt.optional(function(){Fe.assert(or,Fe.shared.isArrayLike+"("+Le+")&&"+Le+".length===4","blend.color must be a 4d array")}),yn(4,function(Tr){return or.def("+",Le,"[",Tr,"]")})});case al:return Er(function(Fe){return vt.commandType(Fe,"number",ur,Se.commandStr),Fe|0},function(Fe,or,Le){return vt.optional(function(){Fe.assert(or,"typeof "+Le+'==="number"',"invalid stencil.mask")}),or.def(Le,"|0")});case Tc:return Er(function(Fe){vt.commandType(Fe,"object",ur,Se.commandStr);var or=Fe.cmp||"keep",Le=Fe.ref||0,Tr="mask"in Fe?Fe.mask:-1;return vt.commandParameter(or,rf,hr+".cmp",Se.commandStr),vt.commandType(Le,"number",hr+".ref",Se.commandStr),vt.commandType(Tr,"number",hr+".mask",Se.commandStr),[rf[or],Le,Tr]},function(Fe,or,Le){var Tr=Fe.constants.compareFuncs;vt.optional(function(){function nn(){Fe.assert(or,Array.prototype.join.call(arguments,""),"invalid stencil.func")}nn(Le+"&&typeof ",Le,'==="object"'),nn('!("cmp" in ',Le,")||(",Le,".cmp in ",Tr,")")});var zr=or.def('"cmp" in ',Le,"?",Tr,"[",Le,".cmp]",":",uu),gn=or.def(Le,".ref|0"),mn=or.def('"mask" in ',Le,"?",Le,".mask|0:-1");return[zr,gn,mn]});case Ho:case Ju:return Er(function(Fe){vt.commandType(Fe,"object",ur,Se.commandStr);var or=Fe.fail||"keep",Le=Fe.zfail||"keep",Tr=Fe.zpass||"keep";return vt.commandParameter(or,Nu,hr+".fail",Se.commandStr),vt.commandParameter(Le,Nu,hr+".zfail",Se.commandStr),vt.commandParameter(Tr,Nu,hr+".zpass",Se.commandStr),[hr===Ju?mu:ic,Nu[or],Nu[Le],Nu[Tr]]},function(Fe,or,Le){var Tr=Fe.constants.stencilOps;vt.optional(function(){Fe.assert(or,Le+"&&typeof "+Le+'==="object"',"invalid "+hr)});function zr(gn){return vt.optional(function(){Fe.assert(or,'!("'+gn+'" in '+Le+")||("+Le+"."+gn+" in "+Tr+")","invalid "+hr+"."+gn+", must be one of "+Object.keys(Nu))}),or.def('"',gn,'" in ',Le,"?",Tr,"[",Le,".",gn,"]:",uu)}return[hr===Ju?mu:ic,zr("fail"),zr("zfail"),zr("zpass")]});case Ws:return Er(function(Fe){vt.commandType(Fe,"object",ur,Se.commandStr);var or=Fe.factor|0,Le=Fe.units|0;return vt.commandType(or,"number",ur+".factor",Se.commandStr),vt.commandType(Le,"number",ur+".units",Se.commandStr),[or,Le]},function(Fe,or,Le){vt.optional(function(){Fe.assert(or,Le+"&&typeof "+Le+'==="object"',"invalid "+hr)});var Tr=or.def(Le,".factor|0"),zr=or.def(Le,".units|0");return[Tr,zr]});case Au:return Er(function(Fe){var or=0;return Fe==="front"?or=ic:Fe==="back"&&(or=mu),vt.command(!!or,ur,Se.commandStr),or},function(Fe,or,Le){return vt.optional(function(){Fe.assert(or,Le+'==="front"||'+Le+'==="back"',"invalid cull.face")}),or.def(Le,'==="front"?',ic,":",mu)});case Vf:return Er(function(Fe){return vt.command(typeof Fe=="number"&&Fe>=Hr.lineWidthDims[0]&&Fe<=Hr.lineWidthDims[1],"invalid line width, must be a positive number between "+Hr.lineWidthDims[0]+" and "+Hr.lineWidthDims[1],Se.commandStr),Fe},function(Fe,or,Le){return vt.optional(function(){Fe.assert(or,"typeof "+Le+'==="number"&&'+Le+">="+Hr.lineWidthDims[0]+"&&"+Le+"<="+Hr.lineWidthDims[1],"invalid line width")}),Le});case qu:return Er(function(Fe){return vt.commandParameter(Fe,yl,ur,Se.commandStr),yl[Fe]},function(Fe,or,Le){return vt.optional(function(){Fe.assert(or,Le+'==="cw"||'+Le+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),or.def(Le+'==="cw"?'+Zl+":"+Bc)});case yf:return Er(function(Fe){return vt.command(Xa(Fe)&&Fe.length===4,"color.mask must be length 4 array",Se.commandStr),Fe.map(function(or){return!!or})},function(Fe,or,Le){return vt.optional(function(){Fe.assert(or,Fe.shared.isArrayLike+"("+Le+")&&"+Le+".length===4","invalid color.mask")}),yn(4,function(Tr){return"!!"+Le+"["+Tr+"]"})});case Qu:return Er(function(Fe){vt.command(typeof Fe=="object"&&Fe,ur,Se.commandStr);var or="value"in Fe?Fe.value:1,Le=!!Fe.invert;return vt.command(typeof or=="number"&&or>=0&&or<=1,"sample.coverage.value must be a number between 0 and 1",Se.commandStr),[or,Le]},function(Fe,or,Le){vt.optional(function(){Fe.assert(or,Le+"&&typeof "+Le+'==="object"',"invalid sample.coverage")});var Tr=or.def('"value" in ',Le,"?+",Le,".value:1"),zr=or.def("!!",Le,".invert");return[Tr,zr]})}}),Rr}function Ji(Be,Se){var sr=Be.static,Ir=Be.dynamic,Rr={};return Object.keys(sr).forEach(function(hr){var ur=sr[hr],Er;if(typeof ur=="number"||typeof ur=="boolean")Er=Uo(function(){return ur});else if(typeof ur=="function"){var Fe=ur._reglType;Fe==="texture2d"||Fe==="textureCube"?Er=Uo(function(or){return or.link(ur)}):Fe==="framebuffer"||Fe==="framebufferCube"?(vt.command(ur.color.length>0,'missing color attachment for framebuffer sent to uniform "'+hr+'"',Se.commandStr),Er=Uo(function(or){return or.link(ur.color[0])})):vt.commandRaise('invalid data for uniform "'+hr+'"',Se.commandStr)}else Xa(ur)?Er=Uo(function(or){var Le=or.global.def("[",yn(ur.length,function(Tr){return vt.command(typeof ur[Tr]=="number"||typeof ur[Tr]=="boolean","invalid uniform "+hr,or.commandStr),ur[Tr]}),"]");return Le}):vt.commandRaise('invalid or missing data for uniform "'+hr+'"',Se.commandStr);Er.value=ur,Rr[hr]=Er}),Object.keys(Ir).forEach(function(hr){var ur=Ir[hr];Rr[hr]=Ts(ur,function(Er,Fe){return Er.invoke(Fe,ur)})}),Rr}function Fa(Be,Se){var sr=Be.static,Ir=Be.dynamic,Rr={};return Object.keys(sr).forEach(function(hr){var ur=sr[hr],Er=Ce.id(hr),Fe=new ot;if(Fc(ur))Fe.state=vf,Fe.buffer=hn.getBuffer(hn.create(ur,ef,!1,!0)),Fe.type=0;else{var or=hn.getBuffer(ur);if(or)Fe.state=vf,Fe.buffer=or,Fe.type=0;else if(vt.command(typeof ur=="object"&&ur,"invalid data for attribute "+hr,Se.commandStr),"constant"in ur){var Le=ur.constant;Fe.buffer="null",Fe.state=$c,typeof Le=="number"?Fe.x=Le:(vt.command(Xa(Le)&&Le.length>0&&Le.length<=4,"invalid constant for attribute "+hr,Se.commandStr),hf.forEach(function(pa,$a){$a<Le.length&&(Fe[pa]=Le[$a])}))}else{Fc(ur.buffer)?or=hn.getBuffer(hn.create(ur.buffer,ef,!1,!0)):or=hn.getBuffer(ur.buffer),vt.command(!!or,'missing buffer for attribute "'+hr+'"',Se.commandStr);var Tr=ur.offset|0;vt.command(Tr>=0,'invalid offset for attribute "'+hr+'"',Se.commandStr);var zr=ur.stride|0;vt.command(zr>=0&&zr<256,'invalid stride for attribute "'+hr+'", must be integer betweeen [0, 255]',Se.commandStr);var gn=ur.size|0;vt.command(!("size"in ur)||gn>0&&gn<=4,'invalid size for attribute "'+hr+'", must be 1,2,3,4',Se.commandStr);var mn=!!ur.normalized,nn=0;"type"in ur&&(vt.commandParameter(ur.type,$i,"invalid type for attribute "+hr,Se.commandStr),nn=$i[ur.type]);var kn=ur.divisor|0;"divisor"in ur&&(vt.command(kn===0||bt,'cannot specify divisor for attribute "'+hr+'", instancing not supported',Se.commandStr),vt.command(kn>=0,'invalid divisor for attribute "'+hr+'"',Se.commandStr)),vt.optional(function(){var pa=Se.commandStr,$a=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(ur).forEach(function(ca){vt.command($a.indexOf(ca)>=0,'unknown parameter "'+ca+'" for attribute pointer "'+hr+'" (valid parameters are '+$a+")",pa)})}),Fe.buffer=or,Fe.state=vf,Fe.size=gn,Fe.normalized=mn,Fe.type=nn||or.dtype,Fe.offset=Tr,Fe.stride=zr,Fe.divisor=kn}}Rr[hr]=Uo(function(pa,$a){var ca=pa.attribCache;if(Er in ca)return ca[Er];var Ta={isStream:!1};return Object.keys(Fe).forEach(function(Pa){Ta[Pa]=Fe[Pa]}),Fe.buffer&&(Ta.buffer=pa.link(Fe.buffer),Ta.type=Ta.type||Ta.buffer+".dtype"),ca[Er]=Ta,Ta})}),Object.keys(Ir).forEach(function(hr){var ur=Ir[hr];function Er(Fe,or){var Le=Fe.invoke(or,ur),Tr=Fe.shared,zr=Fe.constants,gn=Tr.isBufferArgs,mn=Tr.buffer;vt.optional(function(){Fe.assert(or,Le+"&&(typeof "+Le+'==="object"||typeof '+Le+'==="function")&&('+gn+"("+Le+")||"+mn+".getBuffer("+Le+")||"+mn+".getBuffer("+Le+".buffer)||"+gn+"("+Le+'.buffer)||("constant" in '+Le+"&&(typeof "+Le+'.constant==="number"||'+Tr.isArrayLike+"("+Le+".constant))))",'invalid dynamic attribute "'+hr+'"')});var nn={isStream:or.def(!1)},kn=new ot;kn.state=vf,Object.keys(kn).forEach(function(Ta){nn[Ta]=or.def(""+kn[Ta])});var pa=nn.buffer,$a=nn.type;or("if(",gn,"(",Le,")){",nn.isStream,"=true;",pa,"=",mn,".createStream(",ef,",",Le,");",$a,"=",pa,".dtype;","}else{",pa,"=",mn,".getBuffer(",Le,");","if(",pa,"){",$a,"=",pa,".dtype;",'}else if("constant" in ',Le,"){",nn.state,"=",$c,";","if(typeof "+Le+'.constant === "number"){',nn[hf[0]],"=",Le,".constant;",hf.slice(1).map(function(Ta){return nn[Ta]}).join("="),"=0;","}else{",hf.map(function(Ta,Pa){return nn[Ta]+"="+Le+".constant.length>"+Pa+"?"+Le+".constant["+Pa+"]:0;"}).join(""),"}}else{","if(",gn,"(",Le,".buffer)){",pa,"=",mn,".createStream(",ef,",",Le,".buffer);","}else{",pa,"=",mn,".getBuffer(",Le,".buffer);","}",$a,'="type" in ',Le,"?",zr.glTypes,"[",Le,".type]:",pa,".dtype;",nn.normalized,"=!!",Le,".normalized;");function ca(Ta){or(nn[Ta],"=",Le,".",Ta,"|0;")}return ca("size"),ca("offset"),ca("stride"),ca("divisor"),or("}}"),or.exit("if(",nn.isStream,"){",mn,".destroyStream(",pa,");","}"),nn}Rr[hr]=Ts(ur,Er)}),Rr}function Wo(Be,Se){var sr=Be.static,Ir=Be.dynamic;if(qf in sr){var Rr=sr[qf];return Rr!==null&&In.getVAO(Rr)===null&&(Rr=In.createVAO(Rr)),Uo(function(ur){return ur.link(In.getVAO(Rr))})}else if(qf in Ir){var hr=Ir[qf];return Ts(hr,function(ur,Er){var Fe=ur.invoke(Er,hr);return Er.def(ur.shared.vao+".getVAO("+Fe+")")})}return null}function ji(Be){var Se=Be.static,sr=Be.dynamic,Ir={};return Object.keys(Se).forEach(function(Rr){var hr=Se[Rr];Ir[Rr]=Uo(function(ur,Er){return typeof hr=="number"||typeof hr=="boolean"?""+hr:ur.link(hr)})}),Object.keys(sr).forEach(function(Rr){var hr=sr[Rr];Ir[Rr]=Ts(hr,function(ur,Er){return ur.invoke(Er,hr)})}),Ir}function ui(Be,Se,sr,Ir,Rr){var hr=Be.static,ur=Be.dynamic;vt.optional(function(){var ca=[Ou,gu,Kf,bf,Iu,Oc,Du,$f,tf,qf].concat(se);function Ta(Pa){Object.keys(Pa).forEach(function(wi){vt.command(ca.indexOf(wi)>=0,'unknown parameter "'+wi+'"',Rr.commandStr)})}Ta(hr),Ta(ur)});var Er=fa(Be,Se),Fe=zn(Be,Rr),or=da(Be,Fe,Rr),Le=Ba(Be,Rr),Tr=Oa(Be,Rr),zr=Ea(Be,Rr,Er);function gn(ca){var Ta=or[ca];Ta&&(Tr[ca]=Ta)}gn(ou),gn(He(Ac));var mn=Object.keys(Tr).length>0,nn={framebuffer:Fe,draw:Le,shader:zr,state:Tr,dirty:mn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(nn.profile=jn(Be,Rr),nn.uniforms=Ji(sr,Rr),nn.drawVAO=nn.scopeVAO=Wo(Be,Rr),!nn.drawVAO&&zr.program&&!Er&&Ke.angle_instanced_arrays){var kn=!0,pa=zr.program.attributes.map(function(ca){var Ta=Se.static[ca];return kn=kn&&!!Ta,Ta});if(kn&&pa.length>0){var $a=In.getVAO(In.createVAO(pa));nn.drawVAO=new ms(null,null,null,function(ca,Ta){return ca.link($a)}),nn.useVAO=!0}}return Er?nn.useVAO=!0:nn.attributes=Fa(Se,Rr),nn.context=ji(Ir,Rr),nn}function Po(Be,Se,sr){var Ir=Be.shared,Rr=Ir.context,hr=Be.scope();Object.keys(sr).forEach(function(ur){Se.save(Rr,"."+ur);var Er=sr[ur],Fe=Er.append(Be,Se);Array.isArray(Fe)?hr(Rr,".",ur,"=[",Fe.join(),"];"):hr(Rr,".",ur,"=",Fe,";")}),Se(hr)}function Fo(Be,Se,sr,Ir){var Rr=Be.shared,hr=Rr.gl,ur=Rr.framebuffer,Er;At&&(Er=Se.def(Rr.extensions,".webgl_draw_buffers"));var Fe=Be.constants,or=Fe.drawBuffer,Le=Fe.backBuffer,Tr;sr?Tr=sr.append(Be,Se):Tr=Se.def(ur,".next"),Ir||Se("if(",Tr,"!==",ur,".cur){"),Se("if(",Tr,"){",hr,".bindFramebuffer(",Jl,",",Tr,".framebuffer);"),At&&Se(Er,".drawBuffersWEBGL(",or,"[",Tr,".colorAttachments.length]);"),Se("}else{",hr,".bindFramebuffer(",Jl,",null);"),At&&Se(Er,".drawBuffersWEBGL(",Le,");"),Se("}",ur,".cur=",Tr,";"),Ir||Se("}")}function Zo(Be,Se,sr){var Ir=Be.shared,Rr=Ir.gl,hr=Be.current,ur=Be.next,Er=Ir.current,Fe=Ir.next,or=Be.cond(Er,".dirty");se.forEach(function(Le){var Tr=He(Le);if(!(Tr in sr.state)){var zr,gn;if(Tr in ur){zr=ur[Tr],gn=hr[Tr];var mn=yn(Rt[Tr].length,function(kn){return or.def(zr,"[",kn,"]")});or(Be.cond(mn.map(function(kn,pa){return kn+"!=="+gn+"["+pa+"]"}).join("||")).then(Rr,".",Ee[Tr],"(",mn,");",mn.map(function(kn,pa){return gn+"["+pa+"]="+kn}).join(";"),";"))}else{zr=or.def(Fe,".",Tr);var nn=Be.cond(zr,"!==",Er,".",Tr);or(nn),Tr in _e?nn(Be.cond(zr).then(Rr,".enable(",_e[Tr],");").else(Rr,".disable(",_e[Tr],");"),Er,".",Tr,"=",zr,";"):nn(Rr,".",Ee[Tr],"(",zr,");",Er,".",Tr,"=",zr,";")}}}),Object.keys(sr.state).length===0&&or(Er,".dirty=false;"),Se(or)}function vs(Be,Se,sr,Ir){var Rr=Be.shared,hr=Be.current,ur=Rr.current,Er=Rr.gl;rd(Object.keys(sr)).forEach(function(Fe){var or=sr[Fe];if(!(Ir&&!Ir(or))){var Le=or.append(Be,Se);if(_e[Fe]){var Tr=_e[Fe];Ru(or)?Le?Se(Er,".enable(",Tr,");"):Se(Er,".disable(",Tr,");"):Se(Be.cond(Le).then(Er,".enable(",Tr,");").else(Er,".disable(",Tr,");")),Se(ur,".",Fe,"=",Le,";")}else if(Xa(Le)){var zr=hr[Fe];Se(Er,".",Ee[Fe],"(",Le,");",Le.map(function(gn,mn){return zr+"["+mn+"]="+gn}).join(";"),";")}else Se(Er,".",Ee[Fe],"(",Le,");",ur,".",Fe,"=",Le,";")}})}function Ko(Be,Se){bt&&(Be.instancing=Se.def(Be.shared.extensions,".angle_instanced_arrays"))}function Ja(Be,Se,sr,Ir,Rr){var hr=Be.shared,ur=Be.stats,Er=hr.current,Fe=hr.timer,or=sr.profile;function Le(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var Tr,zr;function gn(ca){Tr=Se.def(),ca(Tr,"=",Le(),";"),typeof Rr=="string"?ca(ur,".count+=",Rr,";"):ca(ur,".count++;"),N&&(Ir?(zr=Se.def(),ca(zr,"=",Fe,".getNumPendingQueries();")):ca(Fe,".beginQuery(",ur,");"))}function mn(ca){ca(ur,".cpuTime+=",Le(),"-",Tr,";"),N&&(Ir?ca(Fe,".pushScopeStats(",zr,",",Fe,".getNumPendingQueries(),",ur,");"):ca(Fe,".endQuery();"))}function nn(ca){var Ta=Se.def(Er,".profile");Se(Er,".profile=",ca,";"),Se.exit(Er,".profile=",Ta,";")}var kn;if(or){if(Ru(or)){or.enable?(gn(Se),mn(Se.exit),nn("true")):nn("false");return}kn=or.append(Be,Se),nn(kn)}else kn=Se.def(Er,".profile");var pa=Be.block();gn(pa),Se("if(",kn,"){",pa,"}");var $a=Be.block();mn($a),Se.exit("if(",kn,"){",$a,"}")}function ys(Be,Se,sr,Ir,Rr){var hr=Be.shared;function ur(Fe){switch(Fe){case Pc:case ec:case Nc:return 2;case tc:case Ef:case Rc:return 3;case Lc:case rc:case kc:return 4;default:return 1}}function Er(Fe,or,Le){var Tr=hr.gl,zr=Se.def(Fe,".location"),gn=Se.def(hr.attributes,"[",zr,"]"),mn=Le.state,nn=Le.buffer,kn=[Le.x,Le.y,Le.z,Le.w],pa=["buffer","normalized","offset","stride"];function $a(){Se("if(!",gn,".buffer){",Tr,".enableVertexAttribArray(",zr,");}");var Ta=Le.type,Pa;if(Le.size?Pa=Se.def(Le.size,"||",or):Pa=or,Se("if(",gn,".type!==",Ta,"||",gn,".size!==",Pa,"||",pa.map(function($o){return gn+"."+$o+"!=="+Le[$o]}).join("||"),"){",Tr,".bindBuffer(",ef,",",nn,".buffer);",Tr,".vertexAttribPointer(",[zr,Pa,Ta,Le.normalized,Le.stride,Le.offset],");",gn,".type=",Ta,";",gn,".size=",Pa,";",pa.map(function($o){return gn+"."+$o+"="+Le[$o]+";"}).join(""),"}"),bt){var wi=Le.divisor;Se("if(",gn,".divisor!==",wi,"){",Be.instancing,".vertexAttribDivisorANGLE(",[zr,wi],");",gn,".divisor=",wi,";}")}}function ca(){Se("if(",gn,".buffer){",Tr,".disableVertexAttribArray(",zr,");",gn,".buffer=null;","}if(",hf.map(function(Ta,Pa){return gn+"."+Ta+"!=="+kn[Pa]}).join("||"),"){",Tr,".vertexAttrib4f(",zr,",",kn,");",hf.map(function(Ta,Pa){return gn+"."+Ta+"="+kn[Pa]+";"}).join(""),"}")}mn===vf?$a():mn===$c?ca():(Se("if(",mn,"===",vf,"){"),$a(),Se("}else{"),ca(),Se("}"))}Ir.forEach(function(Fe){var or=Fe.name,Le=sr.attributes[or],Tr;if(Le){if(!Rr(Le))return;Tr=Le.append(Be,Se)}else{if(!Rr(oc))return;var zr=Be.scopeAttrib(or);vt.optional(function(){Be.assert(Se,zr+".state","missing attribute "+or)}),Tr={},Object.keys(new ot).forEach(function(gn){Tr[gn]=Se.def(zr,".",gn)})}Er(Be.link(Fe),ur(Fe.info.type),Tr)})}function Pi(Be,Se,sr,Ir,Rr){for(var hr=Be.shared,ur=hr.gl,Er,Fe=0;Fe<Ir.length;++Fe){var or=Ir[Fe],Le=or.name,Tr=or.info.type,zr=sr.uniforms[Le],gn=Be.link(or),mn=gn+".location",nn;if(zr){if(!Rr(zr))continue;if(Ru(zr)){var kn=zr.value;if(vt.command(kn!==null&&typeof kn!="undefined",'missing uniform "'+Le+'"',Be.commandStr),Tr===Lu||Tr===Sf){vt.command(typeof kn=="function"&&(Tr===Lu&&(kn._reglType==="texture2d"||kn._reglType==="framebuffer")||Tr===Sf&&(kn._reglType==="textureCube"||kn._reglType==="framebufferCube")),"invalid texture for uniform "+Le,Be.commandStr);var pa=Be.link(kn._texture||kn.color[0]._texture);Se(ur,".uniform1i(",mn,",",pa+".bind());"),Se.exit(pa,".unbind();")}else if(Tr===nc||Tr===ac||Tr===wf){vt.optional(function(){vt.command(Xa(kn),"invalid matrix for uniform "+Le,Be.commandStr),vt.command(Tr===nc&&kn.length===4||Tr===ac&&kn.length===9||Tr===wf&&kn.length===16,"invalid length for matrix uniform "+Le,Be.commandStr)});var $a=Be.global.def("new Float32Array(["+Array.prototype.slice.call(kn)+"])"),ca=2;Tr===ac?ca=3:Tr===wf&&(ca=4),Se(ur,".uniformMatrix",ca,"fv(",mn,",false,",$a,");")}else{switch(Tr){case Jf:vt.commandType(kn,"number","uniform "+Le,Be.commandStr),Er="1f";break;case Pc:vt.command(Xa(kn)&&kn.length===2,"uniform "+Le,Be.commandStr),Er="2f";break;case tc:vt.command(Xa(kn)&&kn.length===3,"uniform "+Le,Be.commandStr),Er="3f";break;case Lc:vt.command(Xa(kn)&&kn.length===4,"uniform "+Le,Be.commandStr),Er="4f";break;case pl:vt.commandType(kn,"boolean","uniform "+Le,Be.commandStr),Er="1i";break;case vl:vt.commandType(kn,"number","uniform "+Le,Be.commandStr),Er="1i";break;case Nc:vt.command(Xa(kn)&&kn.length===2,"uniform "+Le,Be.commandStr),Er="2i";break;case ec:vt.command(Xa(kn)&&kn.length===2,"uniform "+Le,Be.commandStr),Er="2i";break;case Rc:vt.command(Xa(kn)&&kn.length===3,"uniform "+Le,Be.commandStr),Er="3i";break;case Ef:vt.command(Xa(kn)&&kn.length===3,"uniform "+Le,Be.commandStr),Er="3i";break;case kc:vt.command(Xa(kn)&&kn.length===4,"uniform "+Le,Be.commandStr),Er="4i";break;case rc:vt.command(Xa(kn)&&kn.length===4,"uniform "+Le,Be.commandStr),Er="4i";break}Se(ur,".uniform",Er,"(",mn,",",Xa(kn)?Array.prototype.slice.call(kn):kn,");")}continue}else nn=zr.append(Be,Se)}else{if(!Rr(oc))continue;nn=Se.def(hr.uniforms,"[",Ce.id(Le),"]")}Tr===Lu?(vt(!Array.isArray(nn),"must specify a scalar prop for textures"),Se("if(",nn,"&&",nn,'._reglType==="framebuffer"){',nn,"=",nn,".color[0];","}")):Tr===Sf&&(vt(!Array.isArray(nn),"must specify a scalar prop for cube maps"),Se("if(",nn,"&&",nn,'._reglType==="framebufferCube"){',nn,"=",nn,".color[0];","}")),vt.optional(function(){function Ls(Bu,_l){Be.assert(Se,Bu,'bad data or missing for uniform "'+Le+'".  '+_l)}function od(Bu){vt(!Array.isArray(nn),"must not specify an array type for uniform"),Ls("typeof "+nn+'==="'+Bu+'"',"invalid type, expected "+Bu)}function cu(Bu,_l){Array.isArray(nn)?vt(nn.length===Bu,"must have length "+Bu):Ls(hr.isArrayLike+"("+nn+")&&"+nn+".length==="+Bu,"invalid vector, should have length "+Bu,Be.commandStr)}function Wd(Bu){vt(!Array.isArray(nn),"must not specify a value type"),Ls("typeof "+nn+'==="function"&&'+nn+'._reglType==="texture'+(Bu===cl?"2d":"Cube")+'"',"invalid texture type",Be.commandStr)}switch(Tr){case vl:od("number");break;case ec:cu(2,"number");break;case Ef:cu(3,"number");break;case rc:cu(4,"number");break;case Jf:od("number");break;case Pc:cu(2,"number");break;case tc:cu(3,"number");break;case Lc:cu(4,"number");break;case pl:od("boolean");break;case Nc:cu(2,"boolean");break;case Rc:cu(3,"boolean");break;case kc:cu(4,"boolean");break;case nc:cu(4,"number");break;case ac:cu(9,"number");break;case wf:cu(16,"number");break;case Lu:Wd(cl);break;case Sf:Wd(Dc);break}});var Ta=1;switch(Tr){case Lu:case Sf:var Pa=Se.def(nn,"._texture");Se(ur,".uniform1i(",mn,",",Pa,".bind());"),Se.exit(Pa,".unbind();");continue;case vl:case pl:Er="1i";break;case ec:case Nc:Er="2i",Ta=2;break;case Ef:case Rc:Er="3i",Ta=3;break;case rc:case kc:Er="4i",Ta=4;break;case Jf:Er="1f";break;case Pc:Er="2f",Ta=2;break;case tc:Er="3f",Ta=3;break;case Lc:Er="4f",Ta=4;break;case nc:Er="Matrix2fv";break;case ac:Er="Matrix3fv";break;case wf:Er="Matrix4fv";break}if(Se(ur,".uniform",Er,"(",mn,","),Er.charAt(0)==="M"){var wi=Math.pow(Tr-nc+2,2),$o=Be.global.def("new Float32Array(",wi,")");Array.isArray(nn)?Se("false,(",yn(wi,function(Ls){return $o+"["+Ls+"]="+nn[Ls]}),",",$o,")"):Se("false,(Array.isArray(",nn,")||",nn," instanceof Float32Array)?",nn,":(",yn(wi,function(Ls){return $o+"["+Ls+"]="+nn+"["+Ls+"]"}),",",$o,")")}else Ta>1?Se(yn(Ta,function(Ls){return Array.isArray(nn)?nn[Ls]:nn+"["+Ls+"]"})):(vt(!Array.isArray(nn),"uniform value must not be an array"),Se(nn));Se(");")}}function _a(Be,Se,sr,Ir){var Rr=Be.shared,hr=Rr.gl,ur=Rr.draw,Er=Ir.draw;function Fe(){var Pa=Er.elements,wi,$o=Se;return Pa?((Pa.contextDep&&Ir.contextDynamic||Pa.propDep)&&($o=sr),wi=Pa.append(Be,$o)):wi=$o.def(ur,".",bf),wi&&$o("if("+wi+")"+hr+".bindBuffer("+fl+","+wi+".buffer.buffer);"),wi}function or(){var Pa=Er.count,wi,$o=Se;return Pa?((Pa.contextDep&&Ir.contextDynamic||Pa.propDep)&&($o=sr),wi=Pa.append(Be,$o),vt.optional(function(){Pa.MISSING&&Be.assert(Se,"false","missing vertex count"),Pa.DYNAMIC&&Be.assert($o,wi+">=0","missing vertex count")})):(wi=$o.def(ur,".",Du),vt.optional(function(){Be.assert($o,wi+">=0","missing vertex count")})),wi}var Le=Fe();function Tr(Pa){var wi=Er[Pa];return wi?wi.contextDep&&Ir.contextDynamic||wi.propDep?wi.append(Be,sr):wi.append(Be,Se):Se.def(ur,".",Pa)}var zr=Tr(Iu),gn=Tr(Oc),mn=or();if(typeof mn=="number"){if(mn===0)return}else sr("if(",mn,"){"),sr.exit("}");var nn,kn;bt&&(nn=Tr($f),kn=Be.instancing);var pa=Le+".type",$a=Er.elements&&Ru(Er.elements);function ca(){function Pa(){sr(kn,".drawElementsInstancedANGLE(",[zr,mn,pa,gn+"<<(("+pa+"-"+Bl+")>>1)",nn],");")}function wi(){sr(kn,".drawArraysInstancedANGLE(",[zr,gn,mn,nn],");")}Le?$a?Pa():(sr("if(",Le,"){"),Pa(),sr("}else{"),wi(),sr("}")):wi()}function Ta(){function Pa(){sr(hr+".drawElements("+[zr,mn,pa,gn+"<<(("+pa+"-"+Bl+")>>1)"]+");")}function wi(){sr(hr+".drawArrays("+[zr,gn,mn]+");")}Le?$a?Pa():(sr("if(",Le,"){"),Pa(),sr("}else{"),wi(),sr("}")):wi()}bt&&(typeof nn!="number"||nn>=0)?typeof nn=="string"?(sr("if(",nn,">0){"),ca(),sr("}else if(",nn,"<0){"),Ta(),sr("}")):ca():Ta()}function di(Be,Se,sr,Ir,Rr){var hr=Nn(),ur=hr.proc("body",Rr);return vt.optional(function(){hr.commandStr=Se.commandStr,hr.command=hr.link(Se.commandStr)}),bt&&(hr.instancing=ur.def(hr.shared.extensions,".angle_instanced_arrays")),Be(hr,ur,sr,Ir),hr.compile().body}function Ei(Be,Se,sr,Ir){Ko(Be,Se),sr.useVAO?sr.drawVAO?Se(Be.shared.vao,".setVAO(",sr.drawVAO.append(Be,Se),");"):Se(Be.shared.vao,".setVAO(",Be.shared.vao,".targetVAO);"):(Se(Be.shared.vao,".setVAO(null);"),ys(Be,Se,sr,Ir.attributes,function(){return!0})),Pi(Be,Se,sr,Ir.uniforms,function(){return!0}),_a(Be,Se,Se,sr)}function Jo(Be,Se){var sr=Be.proc("draw",1);Ko(Be,sr),Po(Be,sr,Se.context),Fo(Be,sr,Se.framebuffer),Zo(Be,sr,Se),vs(Be,sr,Se.state),Ja(Be,sr,Se,!1,!0);var Ir=Se.shader.progVar.append(Be,sr);if(sr(Be.shared.gl,".useProgram(",Ir,".program);"),Se.shader.program)Ei(Be,sr,Se,Se.shader.program);else{sr(Be.shared.vao,".setVAO(null);");var Rr=Be.global.def("{}"),hr=sr.def(Ir,".id"),ur=sr.def(Rr,"[",hr,"]");sr(Be.cond(ur).then(ur,".call(this,a0);").else(ur,"=",Rr,"[",hr,"]=",Be.link(function(Er){return di(Ei,Be,Se,Er,1)}),"(",Ir,");",ur,".call(this,a0);"))}Object.keys(Se.state).length>0&&sr(Be.shared.current,".dirty=true;")}function ku(Be,Se,sr,Ir){Be.batchId="a1",Ko(Be,Se);function Rr(){return!0}ys(Be,Se,sr,Ir.attributes,Rr),Pi(Be,Se,sr,Ir.uniforms,Rr),_a(Be,Se,Se,sr)}function fc(Be,Se,sr,Ir){Ko(Be,Se);var Rr=sr.contextDep,hr=Se.def(),ur="a0",Er="a1",Fe=Se.def();Be.shared.props=Fe,Be.batchId=hr;var or=Be.scope(),Le=Be.scope();Se(or.entry,"for(",hr,"=0;",hr,"<",Er,";++",hr,"){",Fe,"=",ur,"[",hr,"];",Le,"}",or.exit);function Tr(pa){return pa.contextDep&&Rr||pa.propDep}function zr(pa){return!Tr(pa)}if(sr.needsContext&&Po(Be,Le,sr.context),sr.needsFramebuffer&&Fo(Be,Le,sr.framebuffer),vs(Be,Le,sr.state,Tr),sr.profile&&Tr(sr.profile)&&Ja(Be,Le,sr,!1,!0),Ir)sr.useVAO?sr.drawVAO?Tr(sr.drawVAO)?Le(Be.shared.vao,".setVAO(",sr.drawVAO.append(Be,Le),");"):or(Be.shared.vao,".setVAO(",sr.drawVAO.append(Be,or),");"):or(Be.shared.vao,".setVAO(",Be.shared.vao,".targetVAO);"):(or(Be.shared.vao,".setVAO(null);"),ys(Be,or,sr,Ir.attributes,zr),ys(Be,Le,sr,Ir.attributes,Tr)),Pi(Be,or,sr,Ir.uniforms,zr),Pi(Be,Le,sr,Ir.uniforms,Tr),_a(Be,or,Le,sr);else{var gn=Be.global.def("{}"),mn=sr.shader.progVar.append(Be,Le),nn=Le.def(mn,".id"),kn=Le.def(gn,"[",nn,"]");Le(Be.shared.gl,".useProgram(",mn,".program);","if(!",kn,"){",kn,"=",gn,"[",nn,"]=",Be.link(function(pa){return di(ku,Be,sr,pa,2)}),"(",mn,");}",kn,".call(this,a0[",hr,"],",hr,");")}}function Ve(Be,Se){var sr=Be.proc("batch",2);Be.batchId="0",Ko(Be,sr);var Ir=!1,Rr=!0;Object.keys(Se.context).forEach(function(gn){Ir=Ir||Se.context[gn].propDep}),Ir||(Po(Be,sr,Se.context),Rr=!1);var hr=Se.framebuffer,ur=!1;hr?(hr.propDep?Ir=ur=!0:hr.contextDep&&Ir&&(ur=!0),ur||Fo(Be,sr,hr)):Fo(Be,sr,null),Se.state.viewport&&Se.state.viewport.propDep&&(Ir=!0);function Er(gn){return gn.contextDep&&Ir||gn.propDep}Zo(Be,sr,Se),vs(Be,sr,Se.state,function(gn){return!Er(gn)}),(!Se.profile||!Er(Se.profile))&&Ja(Be,sr,Se,!1,"a1"),Se.contextDep=Ir,Se.needsContext=Rr,Se.needsFramebuffer=ur;var Fe=Se.shader.progVar;if(Fe.contextDep&&Ir||Fe.propDep)fc(Be,sr,Se,null);else{var or=Fe.append(Be,sr);if(sr(Be.shared.gl,".useProgram(",or,".program);"),Se.shader.program)fc(Be,sr,Se,Se.shader.program);else{sr(Be.shared.vao,".setVAO(null);");var Le=Be.global.def("{}"),Tr=sr.def(or,".id"),zr=sr.def(Le,"[",Tr,"]");sr(Be.cond(zr).then(zr,".call(this,a0,a1);").else(zr,"=",Le,"[",Tr,"]=",Be.link(function(gn){return di(fc,Be,Se,gn,2)}),"(",or,");",zr,".call(this,a0,a1);"))}}Object.keys(Se.state).length>0&&sr(Be.shared.current,".dirty=true;")}function $r(Be,Se){var sr=Be.proc("scope",3);Be.batchId="a2";var Ir=Be.shared,Rr=Ir.current;Po(Be,sr,Se.context),Se.framebuffer&&Se.framebuffer.append(Be,sr),rd(Object.keys(Se.state)).forEach(function(ur){var Er=Se.state[ur],Fe=Er.append(Be,sr);Xa(Fe)?Fe.forEach(function(or,Le){sr.set(Be.next[ur],"["+Le+"]",or)}):sr.set(Ir.next,"."+ur,Fe)}),Ja(Be,sr,Se,!0,!0),[bf,Oc,Du,$f,Iu].forEach(function(ur){var Er=Se.draw[ur];Er&&sr.set(Ir.draw,"."+ur,""+Er.append(Be,sr))}),Object.keys(Se.uniforms).forEach(function(ur){var Er=Se.uniforms[ur].append(Be,sr);Array.isArray(Er)&&(Er="["+Er.join()+"]"),sr.set(Ir.uniforms,"["+Ce.id(ur)+"]",Er)}),Object.keys(Se.attributes).forEach(function(ur){var Er=Se.attributes[ur].append(Be,sr),Fe=Be.scopeAttrib(ur);Object.keys(new ot).forEach(function(or){sr.set(Fe,"."+or,Er[or])})}),Se.scopeVAO&&sr.set(Ir.vao,".targetVAO",Se.scopeVAO.append(Be,sr));function hr(ur){var Er=Se.shader[ur];Er&&sr.set(Ir.shader,"."+ur,Er.append(Be,sr))}hr(gu),hr(Kf),Object.keys(Se.state).length>0&&(sr(Rr,".dirty=true;"),sr.exit(Rr,".dirty=true;")),sr("a1(",Be.shared.context,",a0,",Be.batchId,");")}function jr(Be){if(!(typeof Be!="object"||Xa(Be))){for(var Se=Object.keys(Be),sr=0;sr<Se.length;++sr)if(dr.isDynamic(Be[Se[sr]]))return!0;return!1}}function na(Be,Se,sr){var Ir=Se.static[sr];if(!Ir||!jr(Ir))return;var Rr=Be.global,hr=Object.keys(Ir),ur=!1,Er=!1,Fe=!1,or=Be.global.def("{}");hr.forEach(function(Tr){var zr=Ir[Tr];if(dr.isDynamic(zr)){typeof zr=="function"&&(zr=Ir[Tr]=dr.unbox(zr));var gn=Ts(zr,null);ur=ur||gn.thisDep,Fe=Fe||gn.propDep,Er=Er||gn.contextDep}else{switch(Rr(or,".",Tr,"="),typeof zr){case"number":Rr(zr);break;case"string":Rr('"',zr,'"');break;case"object":Array.isArray(zr)&&Rr("[",zr.join(),"]");break;default:Rr(Be.link(zr));break}Rr(";")}});function Le(Tr,zr){hr.forEach(function(gn){var mn=Ir[gn];if(dr.isDynamic(mn)){var nn=Tr.invoke(zr,mn);zr(or,".",gn,"=",nn,";")}})}Se.dynamic[sr]=new dr.DynamicVariable(Cc,{thisDep:ur,contextDep:Er,propDep:Fe,ref:or,append:Le}),delete Se.static[sr]}function hi(Be,Se,sr,Ir,Rr){var hr=Nn();hr.stats=hr.link(Rr),Object.keys(Se.static).forEach(function(Er){na(hr,Se,Er)}),Wl.forEach(function(Er){na(hr,Be,Er)});var ur=ui(Be,Se,sr,Ir,hr);return Jo(hr,ur),$r(hr,ur),Ve(hr,ur),_(hr.compile(),{destroy:function(){ur.shader.program.destroy()}})}return{next:Zt,current:Rt,procs:function(){var Be=Nn(),Se=Be.proc("poll"),sr=Be.proc("refresh"),Ir=Be.block();Se(Ir),sr(Ir);var Rr=Be.shared,hr=Rr.gl,ur=Rr.next,Er=Rr.current;Ir(Er,".dirty=false;"),Fo(Be,Se),Fo(Be,sr,null,!0);var Fe;bt&&(Fe=Be.link(bt)),Ke.oes_vertex_array_object&&sr(Be.link(Ke.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var or=0;or<Hr.maxAttributes;++or){var Le=sr.def(Rr.attributes,"[",or,"]"),Tr=Be.cond(Le,".buffer");Tr.then(hr,".enableVertexAttribArray(",or,");",hr,".bindBuffer(",ef,",",Le,".buffer.buffer);",hr,".vertexAttribPointer(",or,",",Le,".size,",Le,".type,",Le,".normalized,",Le,".stride,",Le,".offset);").else(hr,".disableVertexAttribArray(",or,");",hr,".vertexAttrib4f(",or,",",Le,".x,",Le,".y,",Le,".z,",Le,".w);",Le,".buffer=null;"),sr(Tr),bt&&sr(Fe,".vertexAttribDivisorANGLE(",or,",",Le,".divisor);")}return sr(Be.shared.vao,".currentVAO=null;",Be.shared.vao,".setVAO(",Be.shared.vao,".targetVAO);"),Object.keys(_e).forEach(function(zr){var gn=_e[zr],mn=Ir.def(ur,".",zr),nn=Be.block();nn("if(",mn,"){",hr,".enable(",gn,")}else{",hr,".disable(",gn,")}",Er,".",zr,"=",mn,";"),sr(nn),Se("if(",mn,"!==",Er,".",zr,"){",nn,"}")}),Object.keys(Ee).forEach(function(zr){var gn=Ee[zr],mn=Rt[zr],nn,kn,pa=Be.block();if(pa(hr,".",gn,"("),Xa(mn)){var $a=mn.length;nn=Be.global.def(ur,".",zr),kn=Be.global.def(Er,".",zr),pa(yn($a,function(ca){return nn+"["+ca+"]"}),");",yn($a,function(ca){return kn+"["+ca+"]="+nn+"["+ca+"];"}).join("")),Se("if(",yn($a,function(ca){return nn+"["+ca+"]!=="+kn+"["+ca+"]"}).join("||"),"){",pa,"}")}else nn=Ir.def(ur,".",zr),kn=Ir.def(Er,".",zr),pa(nn,");",Er,".",zr,"=",nn,";"),Se("if(",nn,"!==",kn,"){",pa,"}");sr(pa)}),Be.compile()}(),compile:hi}}function nd(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var gd=34918,ad=34919,bl=35007,md=function(Ot,Ce){if(!Ce.ext_disjoint_timer_query)return null;var Ke=[];function Hr(){return Ke.pop()||Ce.ext_disjoint_timer_query.createQueryEXT()}function hn(bt){Ke.push(bt)}var Br=[];function Jr(bt){var At=Hr();Ce.ext_disjoint_timer_query.beginQueryEXT(bl,At),Br.push(At),N(Br.length-1,Br.length,bt)}function On(){Ce.ext_disjoint_timer_query.endQueryEXT(bl)}function Rn(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var In=[];function Ln(){return In.pop()||new Rn}function Fn(bt){In.push(bt)}var v=[];function N(bt,At,Rt){var Zt=Ln();Zt.startQueryIndex=bt,Zt.endQueryIndex=At,Zt.sum=0,Zt.stats=Rt,v.push(Zt)}var K=[],ot=[];function pt(){var bt,At,Rt=Br.length;if(Rt!==0){ot.length=Math.max(ot.length,Rt+1),K.length=Math.max(K.length,Rt+1),K[0]=0,ot[0]=0;var Zt=0;for(bt=0,At=0;At<Br.length;++At){var se=Br[At];Ce.ext_disjoint_timer_query.getQueryObjectEXT(se,ad)?(Zt+=Ce.ext_disjoint_timer_query.getQueryObjectEXT(se,gd),hn(se)):Br[bt++]=se,K[At+1]=Zt,ot[At+1]=bt}for(Br.length=bt,bt=0,At=0;At<v.length;++At){var _e=v[At],Ee=_e.startQueryIndex,He=_e.endQueryIndex;_e.sum+=K[He]-K[Ee];var br=ot[Ee],rn=ot[He];rn===br?(_e.stats.gpuTime+=_e.sum/1e6,Fn(_e)):(_e.startQueryIndex=br,_e.endQueryIndex=rn,v[bt++]=_e)}v.length=bt}}return{beginQuery:Jr,endQuery:On,pushScopeStats:N,update:pt,getNumPendingQueries:function(){return Br.length},clear:function(){Ke.push.apply(Ke,Br);for(var bt=0;bt<Ke.length;bt++)Ce.ext_disjoint_timer_query.deleteQueryEXT(Ke[bt]);Br.length=0,Ke.length=0},restore:function(){Br.length=0,Ke.length=0}}},yd=16384,id=256,bd=1024,xl=34962,El="webglcontextlost",sc="webglcontextrestored",wl=1,fu=2,Sl=3;function Ml(Ot,Ce){for(var Ke=0;Ke<Ot.length;++Ke)if(Ot[Ke]===Ce)return Ke;return-1}function uc(Ot){var Ce=Kr(Ot);if(!Ce)return null;var Ke=Ce.gl,Hr=Ke.getContextAttributes(),hn=Ke.isContextLost(),Br=an(Ke,Ce);if(!Br)return null;var Jr=Te(),On=nd(),Rn=Br.extensions,In=md(Ke,Rn),Ln=oe(),Fn=Ke.drawingBufferWidth,v=Ke.drawingBufferHeight,N={tick:0,time:0,viewportWidth:Fn,viewportHeight:v,framebufferWidth:Fn,framebufferHeight:v,drawingBufferWidth:Fn,drawingBufferHeight:v,pixelRatio:Ce.pixelRatio},K={},ot={elements:null,primitive:4,count:-1,offset:0,instances:-1},pt=Yi(Ke,Rn),bt=ga(Ke,On,Ce,Rt),At=Xf(Ke,Rn,pt,On,bt);function Rt(_a){return At.destroyBuffer(_a)}var Zt=rs(Ke,Rn,bt,On),se=lf(Ke,Jr,On,Ce),_e=wc(Ke,Rn,pt,function(){br.procs.poll()},N,On,Ce),Ee=It(Ke,Rn,pt,On,Ce),He=Wf(Ke,Rn,pt,_e,Ee,On),br=pd(Ke,Jr,Rn,pt,bt,Zt,_e,He,K,At,se,ot,N,In,Ce),rn=df(Ke,He,br.procs.poll,N,Hr,Rn,pt),Cr=br.next,Ar=Ke.canvas,Or=[],Nn=[],jn=[],zn=[Ce.onDestroy],da=null;function fa(){if(Or.length===0){In&&In.update(),da=null;return}da=nr.next(fa),vs();for(var _a=Or.length-1;_a>=0;--_a){var di=Or[_a];di&&di(N,null,0)}Ke.flush(),In&&In.update()}function Ea(){!da&&Or.length>0&&(da=nr.next(fa))}function Ba(){da&&(nr.cancel(fa),da=null)}function Oa(_a){_a.preventDefault(),hn=!0,Ba(),Nn.forEach(function(di){di()})}function Ji(_a){Ke.getError(),hn=!1,Br.restore(),se.restore(),bt.restore(),_e.restore(),Ee.restore(),He.restore(),At.restore(),In&&In.restore(),br.procs.refresh(),Ea(),jn.forEach(function(di){di()})}Ar&&(Ar.addEventListener(El,Oa,!1),Ar.addEventListener(sc,Ji,!1));function Fa(){Or.length=0,Ba(),Ar&&(Ar.removeEventListener(El,Oa),Ar.removeEventListener(sc,Ji)),se.clear(),He.clear(),Ee.clear(),_e.clear(),Zt.clear(),bt.clear(),At.clear(),In&&In.clear(),zn.forEach(function(_a){_a()})}function Wo(_a){vt(!!_a,"invalid args to regl({...})"),vt.type(_a,"object","invalid args to regl({...})");function di(Rr){var hr=_({},Rr);delete hr.uniforms,delete hr.attributes,delete hr.context,delete hr.vao,"stencil"in hr&&hr.stencil.op&&(hr.stencil.opBack=hr.stencil.opFront=hr.stencil.op,delete hr.stencil.op);function ur(Er){if(Er in hr){var Fe=hr[Er];delete hr[Er],Object.keys(Fe).forEach(function(or){hr[Er+"."+or]=Fe[or]})}}return ur("blend"),ur("depth"),ur("cull"),ur("stencil"),ur("polygonOffset"),ur("scissor"),ur("sample"),"vao"in Rr&&(hr.vao=Rr.vao),hr}function Ei(Rr,hr){var ur={},Er={};return Object.keys(Rr).forEach(function(Fe){var or=Rr[Fe];if(dr.isDynamic(or)){Er[Fe]=dr.unbox(or,Fe);return}else if(hr&&Array.isArray(or)){for(var Le=0;Le<or.length;++Le)if(dr.isDynamic(or[Le])){Er[Fe]=dr.unbox(or,Fe);return}}ur[Fe]=or}),{dynamic:Er,static:ur}}var Jo=Ei(_a.context||{},!0),ku=Ei(_a.uniforms||{},!0),fc=Ei(_a.attributes||{},!1),Ve=Ei(di(_a),!1),$r={gpuTime:0,cpuTime:0,count:0},jr=br.compile(Ve,fc,ku,Jo,$r),na=jr.draw,hi=jr.batch,Be=jr.scope,Se=[];function sr(Rr){for(;Se.length<Rr;)Se.push(null);return Se}function Ir(Rr,hr){var ur;if(hn&&vt.raise("context lost"),typeof Rr=="function")return Be.call(this,null,Rr,0);if(typeof hr=="function")if(typeof Rr=="number")for(ur=0;ur<Rr;++ur)Be.call(this,null,hr,ur);else if(Array.isArray(Rr))for(ur=0;ur<Rr.length;++ur)Be.call(this,Rr[ur],hr,ur);else return Be.call(this,Rr,hr,0);else if(typeof Rr=="number"){if(Rr>0)return hi.call(this,sr(Rr|0),Rr|0)}else if(Array.isArray(Rr)){if(Rr.length)return hi.call(this,Rr,Rr.length)}else return na.call(this,Rr)}return _(Ir,{stats:$r,destroy:function(){jr.destroy()}})}var ji=He.setFBO=Wo({framebuffer:dr.define.call(null,wl,"framebuffer")});function ui(_a,di){var Ei=0;br.procs.poll();var Jo=di.color;Jo&&(Ke.clearColor(+Jo[0]||0,+Jo[1]||0,+Jo[2]||0,+Jo[3]||0),Ei|=yd),"depth"in di&&(Ke.clearDepth(+di.depth),Ei|=id),"stencil"in di&&(Ke.clearStencil(di.stencil|0),Ei|=bd),vt(!!Ei,"called regl.clear with no buffer specified"),Ke.clear(Ei)}function Po(_a){if(vt(typeof _a=="object"&&_a,"regl.clear() takes an object as input"),"framebuffer"in _a)if(_a.framebuffer&&_a.framebuffer_reglType==="framebufferCube")for(var di=0;di<6;++di)ji(_({framebuffer:_a.framebuffer.faces[di]},_a),ui);else ji(_a,ui);else ui(null,_a)}function Fo(_a){vt.type(_a,"function","regl.frame() callback must be a function"),Or.push(_a);function di(){var Ei=Ml(Or,_a);vt(Ei>=0,"cannot cancel a frame twice");function Jo(){var ku=Ml(Or,Jo);Or[ku]=Or[Or.length-1],Or.length-=1,Or.length<=0&&Ba()}Or[Ei]=Jo}return Ea(),{cancel:di}}function Zo(){var _a=Cr.viewport,di=Cr.scissor_box;_a[0]=_a[1]=di[0]=di[1]=0,N.viewportWidth=N.framebufferWidth=N.drawingBufferWidth=_a[2]=di[2]=Ke.drawingBufferWidth,N.viewportHeight=N.framebufferHeight=N.drawingBufferHeight=_a[3]=di[3]=Ke.drawingBufferHeight}function vs(){N.tick+=1,N.time=Ja(),Zo(),br.procs.poll()}function Ko(){_e.refresh(),Zo(),br.procs.refresh(),In&&In.update()}function Ja(){return(oe()-Ln)/1e3}Ko();function ys(_a,di){vt.type(di,"function","listener callback must be a function");var Ei;switch(_a){case"frame":return Fo(di);case"lost":Ei=Nn;break;case"restore":Ei=jn;break;case"destroy":Ei=zn;break;default:vt.raise("invalid event, must be one of frame,lost,restore,destroy")}return Ei.push(di),{cancel:function(){for(var Jo=0;Jo<Ei.length;++Jo)if(Ei[Jo]===di){Ei[Jo]=Ei[Ei.length-1],Ei.pop();return}}}}var Pi=_(Wo,{clear:Po,prop:dr.define.bind(null,wl),context:dr.define.bind(null,fu),this:dr.define.bind(null,Sl),draw:Wo({}),buffer:function(_a){return bt.create(_a,xl,!1,!1)},elements:function(_a){return Zt.create(_a,!1)},texture:_e.create2D,cube:_e.createCube,renderbuffer:Ee.create,framebuffer:He.create,framebufferCube:He.createCube,vao:At.createVAO,attributes:Hr,frame:Fo,on:ys,limits:pt,hasExtension:function(_a){return pt.extensions.indexOf(_a.toLowerCase())>=0},read:rn,destroy:Fa,_gl:Ke,_refresh:Ko,poll:function(){vs(),In&&In.update()},now:Ja,stats:On});return Ce.onDone(null,Pi),Pi}return uc})},937478:function(We,G,_){"use strict";var m=_(340210),R=_(921924),w=_(470631),M=m("%TypeError%"),P=m("%WeakMap%",!0),L=m("%Map%",!0),p=R("WeakMap.prototype.get",!0),b=R("WeakMap.prototype.set",!0),S=R("WeakMap.prototype.has",!0),x=R("Map.prototype.get",!0),g=R("Map.prototype.set",!0),T=R("Map.prototype.has",!0),E=function(l,U){for(var X=l,F;(F=X.next)!==null;X=F)if(F.key===U)return X.next=F.next,F.next=l.next,l.next=F,F},O=function(l,U){var X=E(l,U);return X&&X.value},k=function(l,U,X){var F=E(l,U);F?F.value=X:l.next={key:U,next:l.next,value:X}},y=function(l,U){return!!E(l,U)};We.exports=function(){var U,X,F,W={assert:function(j){if(!W.has(j))throw new M("Side channel does not contain "+w(j))},get:function(j){if(P&&j&&(typeof j=="object"||typeof j=="function")){if(U)return p(U,j)}else if(L){if(X)return x(X,j)}else if(F)return O(F,j)},has:function(j){if(P&&j&&(typeof j=="object"||typeof j=="function")){if(U)return S(U,j)}else if(L){if(X)return T(X,j)}else if(F)return y(F,j);return!1},set:function(j,V){P&&j&&(typeof j=="object"||typeof j=="function")?(U||(U=new P),b(U,j,V)):L?(X||(X=new L),g(X,j,V)):(F||(F={key:{},next:null}),k(F,j,V))}};return W}},952191:function(We,G){"use strict";var _;_={value:!0},_=y,G.Rs=l,_=U,_=X,G.Yf=F,G.Lo=W,G.lu=V,G.hy=q,G.Lq=$,_=J,G.dt=ut,G.GX=nt,_=yt,G.Ck=Ft,G.YJ=wt,_=St,_=et,_=it,_=Tt;var m={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},R=["Webkit","ms","Moz","O"];function w(Nt,st){return Nt+st.charAt(0).toUpperCase()+st.substring(1)}Object.keys(m).forEach(function(Nt){R.forEach(function(st){m[w(st,Nt)]=m[Nt]})});var M=/^(normal|none|(\b(url\([^)]*\)|chapter_counter|attr\([^)]*\)|(no-)?(open|close)-quote|inherit)((\b\s*)|$|\s+))+)$/,P=function(){return typeof document=="undefined"?!1:!!(navigator&&(navigator.userAgent.indexOf("MSIE 8.0")>0||navigator.userAgent.indexOf("MSIE 9.0")>0))}(),L=1e5,p={aqua:[0,255,255,1],lime:[0,255,0,1],silver:[192,192,192,1],black:[0,0,0,1],maroon:[128,0,0,1],teal:[0,128,128,1],blue:[0,0,255,1],navy:[0,0,128,1],white:[255,255,255,1],fuchsia:[255,0,255,1],olive:[128,128,0,1],yellow:[255,255,0,1],orange:[255,165,0,1],gray:[128,128,128,1],purple:[128,0,128,1],green:[0,128,0,1],red:[255,0,0,1],pink:[255,192,203,1],cyan:[0,255,255,1],transparent:[255,255,255,0]},b=Math.PI/180,S=180/Math.PI,x={_lists:{transformsBase:["translate","translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ","rotate"],transforms3D:["translate3d","translateZ","scaleZ","rotateX","rotateY","perspective"]},transformGroup:{translate:1,translate3d:1,scale:1,scale3d:1,rotate:1,rotate3d:1,skew:1},filter:["grayScale","sepia","hueRotate","invert","brightness","contrast","blur"],filterConvert:{grayScale:"grayscale",hueRotate:"hue-rotate"}};x._lists.transformsBase=P?x._lists.transformsBase:x._lists.transformsBase.concat(x._lists.transforms3D);var g=_=/#([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{3})/,T=_=/((rgb|hsl)[a]?)+\((?:\d|\.\d)+(?:(deg|\%|)),[\s+]?(?:\d|\.\d)+(?:(deg|\%|)),[\s+]?(?:\d|\.\d)+(?:(deg|%|))(,[\s+]?(?:\d|\.\d)+(?:(deg|\%|)))?\)/,E=G.rV=/#([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{3})|((rgb|hsl)[a]?)+\((?:\d|\.\d)+(?:(deg|\%)?),[\s+]?(?:\d|\.\d)+(?:(deg|\%)?),[\s+]?(?:\d|\.\d)+(?:(deg|%)?)(,[\s+]?(?:\d|\.\d)+(?:(deg|\%)?))?\)/,O=_=/(?:\d|\.\d)+(%?)/g,k=G._T=x;function y(Nt){return Nt.replace(/[A-Z]/,function(st){return"-"+st.toLocaleLowerCase()})}function l(Nt){return Nt.replace(/-(.?)/g,function(st){return st.replace("-","").toLocaleUpperCase()})}function U(Nt,st){var xt=st?Math.pow(10,st):L,zt=Nt|0,Wt=Nt-zt,_t=Nt;if(Wt){var Xt=(Wt*xt+(Nt<0?-.5:.5)|0)/xt,te=Xt|0,ue=Xt.toString(),fe=ue.split(".")[1]||"";_t=(Nt<0&&!(zt+te)?"-":"")+(zt+te)+"."+fe}return parseFloat(_t)}function X(Nt){if(typeof document=="undefined")return null;var st=["WebKitCSS","MozCSS","DOM","MsCSS","MSCSS","OCSS","CSS"].filter(function(xt){return xt+"Matrix"in window});return st.length?new window[st[0]+"Matrix"](Nt):(console.warn("Browsers do not support matrix."),"")}function F(Nt){if(typeof document=="undefined")return null;var st=["O","Moz","ms","Ms","Webkit"];if(Nt!=="filter"&&Nt in document.body.style)return Nt;var xt=Nt.charAt(0).toUpperCase()+Nt.substr(1),zt=st.filter(function(Wt){return""+Wt+xt in document.body.style});return zt[0]?""+zt[0]+xt:null}function W(Nt){var st=Nt;return st=st==="x"?"translateX":st,st=st==="y"?"translateY":st,st=st==="z"?"translateZ":st,st}var j=function(st,xt,zt){return zt<0&&(zt+=6),zt>=6&&(zt-=6),zt<1?(xt-st)*zt+st:zt<3?xt:zt<4?(xt-st)*(4-zt)+st:st};function V(Nt){var st=p.transparent,xt=Nt,zt=void 0,Wt=void 0,_t=void 0;if(!xt)st=p.transparent;else if(p[xt])st=p[xt];else if(typeof xt=="number")st=[xt>>16,xt>>8&255,xt&255];else if(xt.charAt(xt.length-1)===","&&(xt=xt.substr(0,xt.length-1)),xt.match(g))xt=xt.substr(1),xt.length===3&&(zt=xt.charAt(0),Wt=xt.charAt(1),_t=xt.charAt(2),xt=""+zt+zt+Wt+Wt+_t+_t+"ff"),xt.length===6&&(xt+="ff"),xt=parseInt(xt,16),st=[xt>>24&255,xt>>16&255,xt>>8&255,parseFloat(((xt&255)/255).toFixed(2))];else if(xt.match(/^hsl/)){st=xt.match(O);var Xt=st[3];Xt=typeof Xt=="string"&&Xt.match("%")?parseFloat(Xt)/100:parseFloat(""+(Xt||"1"));var te=parseFloat(st[0])/60,ue=parseFloat(st[1])/100,fe=parseFloat(st[2])/100,Gt=fe<=.5?fe*(ue+1):fe+ue-fe*ue,ae=fe*2-Gt;zt=Math.round(j(ae,Gt,te+2)*255),Wt=Math.round(j(ae,Gt,te)*255),_t=Math.round(j(ae,Gt,te-2)*255),st=[zt,Wt,_t,Xt]}else st=xt.match(O)||p.transparent,st=st.map(function(Ne){return parseFloat(Ne)}),st.length===3&&st.push(1);return st}function q(Nt,st){var xt=st&&l(st);if(!Nt)return xt==="boxShadow"?[0,0,0,0,0,0,0,0]:[0,0,0,0,0,0,0];var zt=Nt.replace(/,\s+/gi,",").split(/\s+/).filter(function(ue){return ue}),Wt=zt.indexOf("inset");Wt>=0&&zt.splice(Wt,1);var _t=zt.find(function(ue){return p[ue]||ue.match(/#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})|(rgb|hsl)+(?:a)?\((.*)\)/i)})||"black",Xt=zt.indexOf(_t);zt.splice(Xt,1);var te=V(_t);return te[3]=typeof te[3]=="number"?te[3]:1,xt==="boxShadow"&&zt.length<4&&zt.push(0),zt.concat(te,Wt>=0?["inset"]:[])}function $(Nt){var st=Nt.length===4?"rgba":"rgb",xt=Nt.map(function(zt,Wt){return Wt<3?Math.round(zt):zt});return st+"("+xt.join(",")+")"}function J(Nt){return k._lists.transformsBase.indexOf(Nt)>=0?"transform":Nt}function ut(Nt){var st=J(Nt);return k.filter.indexOf(st)>=0?"filter":st}function nt(Nt){if(Nt==="none"||!Nt||Nt==="")return null;var st=Nt.replace(/\s+/g,"").split(")").filter(function(zt){return zt}),xt={};return st.forEach(function(zt){var Wt=zt.split("(");xt[Wt[0]]=Wt[1]}),xt}function yt(Nt){var st=Nt.match(/(?:\-|\b)[\d\-\.e]+\b/gi),xt={};return st.length===6?(xt.m11=parseFloat(st[0]),xt.m12=parseFloat(st[1]),xt.m13=0,xt.m14=0,xt.m21=parseFloat(st[2]),xt.m22=parseFloat(st[3]),xt.m23=0,xt.m24=0,xt.m31=0,xt.m32=0,xt.m33=1,xt.m34=0,xt.m41=parseFloat(st[4]),xt.m42=parseFloat(st[5]),xt.m43=0,xt.m44=0):st.forEach(function(zt,Wt){var _t=Wt%4+1,Xt=Math.floor(Wt/4)+1;xt["m"+Xt+_t]=parseFloat(zt)}),xt}function dt(Nt){var st={};return st.translateX=0,st.translateY=0,st.translateZ=0,st.rotate=0,st.rotateX=0,st.rotateY=0,st.scaleX=1,st.scaleY=1,st.scaleZ=1,st.skewX=0,st.skewY=0,st.perspective=0,(Nt.trim().match(/(\w+)\([^\)]+\)/ig)||[]).forEach(function(xt){var zt=xt.split("("),Wt=zt[0].trim(),_t=zt[1].replace(")","").trim();_t.match(/%|em|rem/ig)&&console.warn("value("+_t+") must be absolute, not relative, has been converted to absolute."),_t=_t.replace(/px|deg|\)/ig,""),k.transformGroup[Wt]&&Wt!=="rotate"?(_t=_t.split(",").map(function(Xt){return parseFloat(Xt)}),Wt==="scale3d"||Wt==="translate3d"?["X","Y","Z"].forEach(function(Xt,te){var ue=Wt.substring(0,Wt.length-2);st[""+ue+Xt]=_t[te]||st[""+ue+Xt]}):Wt==="rotate3d"?(st.rotateX=_t[0]&&_t[3]||st.rotateX,st.rotateY=_t[1]&&_t[3]||st.rotateY,st.rotate=_t[2]&&_t[3]||st.rotate):["X","Y"].forEach(function(Xt,te){st[""+Wt+Xt]=_t[te]||st[""+Wt+Xt]})):Wt==="rotateZ"?st.rotate=parseFloat(_t)||st.rotate:st[Wt]=parseFloat(_t)||st[Wt]}),st}function Ft(Nt){var st=!Nt||Nt==="none"||Nt===""?"matrix(1, 0, 0, 1, 0, 0)":Nt;if(!st.match("matrix"))return dt(Nt);var xt=yt(st),zt=xt.m11,Wt=xt.m12,_t=xt.m13,Xt=xt.m14,te=xt.m21,ue=xt.m22,fe=xt.m23,Gt=xt.m24,ae=xt.m31,Ne=xt.m32,ee=xt.m33,de=xt.m34,ze=xt.m43,be=void 0,ke=void 0,he=void 0,vt={},ie=Math.atan2(fe,ee),Pe=Math.tan(te),qe=Math.tan(Wt),Qe=void 0,lr=void 0;return vt.rotateX=U(ie*S)||0,ie&&(Qe=Math.cos(-ie),lr=Math.sin(-ie),be=te*Qe+ae*lr,ke=ue*Qe+Ne*lr,he=fe*Qe+ee*lr,ae=te*-lr+ae*Qe,Ne=ue*-lr+Ne*Qe,ee=fe*-lr+ee*Qe,de=Gt*-lr+de*Qe,te=be,ue=ke,fe=he),ie=Math.atan2(-_t,ee),vt.rotateY=U(ie*S)||0,ie&&(Qe=Math.cos(-ie),lr=Math.sin(-ie),be=zt*Qe-ae*lr,ke=Wt*Qe-Ne*lr,he=_t*Qe-ee*lr,Ne=Wt*lr+Ne*Qe,ee=_t*lr+ee*Qe,de=Xt*lr+de*Qe,zt=be,Wt=ke,_t=he),ie=Math.atan2(Wt,zt),vt.rotate=U(ie*S)||0,ie&&(Qe=Math.cos(ie),lr=Math.sin(ie),be=zt*Qe+Wt*lr,ke=te*Qe+ue*lr,he=ae*Qe+Ne*lr,Wt=Wt*Qe-zt*lr,ue=ue*Qe-te*lr,Ne=Ne*Qe-ae*lr,zt=be,te=ke,ae=he),vt.rotateX&&Math.abs(vt.rotateX)+Math.abs(vt.rotate)>359.9&&(vt.rotateX=vt.rotate=0,vt.rotateY=180-vt.rotateY||0),vt.scaleX=U(Math.sqrt(zt*zt+Wt*Wt+_t*_t)),vt.scaleY=U(Math.sqrt(ue*ue+fe*fe)),vt.scaleZ=U(Math.sqrt(ae*ae+Ne*Ne+ee*ee)),vt.skewX=Pe===-qe?0:Pe,vt.skewY=qe===-Pe?0:qe,vt.perspective=de?1/(de<0?-de:de):0,vt.translateX=xt.m41,vt.translateY=xt.m42,vt.translateZ=ze,vt}function wt(Nt,st){var xt=void 0;return!m[Nt]&&typeof st=="number"?xt=" "+st+"px":Nt==="content"&&!M.test(st)&&(xt="'"+st.replace(/'/g,"\\'")+"'"),xt||st}function St(Nt,st){var xt=st&&st.toString().replace(/[^a-z|%]/ig,""),zt="";return Nt.indexOf("translate")>=0||Nt.indexOf("perspective")>=0||Nt.indexOf("blur")>=0?zt="px":(Nt.indexOf("skew")>=0||Nt.indexOf("rotate")>=0)&&(zt="deg"),xt||zt}function et(Nt,st,xt){return Nt+"("+st+(xt||"")+")"}function it(Nt,st){var xt=null;return Nt&&Nt.forEach(function(zt){if(!xt){var Wt=zt.split("(")[0],_t=Wt in k.transformGroup&&st.substring(0,st.length-1).indexOf(Wt)>=0,Xt=st in k.transformGroup&&Wt.substring(0,Wt.length-1).indexOf(st)>=0,te=Wt in k.transformGroup&&st in k.transformGroup&&(Wt.substring(0,Wt.length-2)===st||st.substring(0,st.length-2)===Wt);(Wt===st||_t||Xt||te)&&(xt=zt)}}),xt}function Tt(Nt,st){if(!Nt||Nt==="")return st;if(!st||st==="")return Nt;var xt=Nt.replace(/\s/g,"").split(")").filter(function(Wt){return Wt!==""&&Wt}).map(function(Wt){return Wt+")"}),zt=st.replace(/\s/g,"").split(")").filter(function(Wt){return Wt!==""&&Wt});return zt.forEach(function(Wt){var _t=Wt.split("("),Xt=_t[0],te=it(xt,Xt);if(!te)xt.push(Wt+")");else{var ue=xt.indexOf(te);xt[ue]=Wt+")"}}),xt.forEach(function(Wt,_t){Wt.indexOf("perspective")>=0&&_t&&(xt.splice(_t,1),xt.unshift(Wt))}),xt.join(" ").trim()}},141e3:function(We){"use strict";var G={linear:function(_,m,R,w){var M=R-m;return M*_/w+m},easeInQuad:function(_,m,R,w){var M=R-m;return M*(_/=w)*_+m},easeOutQuad:function(_,m,R,w){var M=R-m;return-M*(_/=w)*(_-2)+m},easeInOutQuad:function(_,m,R,w){var M=R-m;return(_/=w/2)<1?M/2*_*_+m:-M/2*(--_*(_-2)-1)+m},easeInCubic:function(_,m,R,w){var M=R-m;return M*(_/=w)*_*_+m},easeOutCubic:function(_,m,R,w){var M=R-m;return M*((_=_/w-1)*_*_+1)+m},easeInOutCubic:function(_,m,R,w){var M=R-m;return(_/=w/2)<1?M/2*_*_*_+m:M/2*((_-=2)*_*_+2)+m},easeInQuart:function(_,m,R,w){var M=R-m;return M*(_/=w)*_*_*_+m},easeOutQuart:function(_,m,R,w){var M=R-m;return-M*((_=_/w-1)*_*_*_-1)+m},easeInOutQuart:function(_,m,R,w){var M=R-m;return(_/=w/2)<1?M/2*_*_*_*_+m:-M/2*((_-=2)*_*_*_-2)+m},easeInQuint:function(_,m,R,w){var M=R-m;return M*(_/=w)*_*_*_*_+m},easeOutQuint:function(_,m,R,w){var M=R-m;return M*((_=_/w-1)*_*_*_*_+1)+m},easeInOutQuint:function(_,m,R,w){var M=R-m;return(_/=w/2)<1?M/2*_*_*_*_*_+m:M/2*((_-=2)*_*_*_*_+2)+m},easeInSine:function(_,m,R,w){var M=R-m;return-M*Math.cos(_/w*(Math.PI/2))+M+m},easeOutSine:function(_,m,R,w){var M=R-m;return M*Math.sin(_/w*(Math.PI/2))+m},easeInOutSine:function(_,m,R,w){var M=R-m;return-M/2*(Math.cos(Math.PI*_/w)-1)+m},easeInExpo:function(_,m,R,w){var M=R-m;return _==0?m:M*Math.pow(2,10*(_/w-1))+m},easeOutExpo:function(_,m,R,w){var M=R-m;return _==w?m+M:M*(-Math.pow(2,-10*_/w)+1)+m},easeInOutExpo:function(_,m,R,w){var M=R-m;return _===0?m:_===w?m+M:(_/=w/2)<1?M/2*Math.pow(2,10*(_-1))+m:M/2*(-Math.pow(2,-10*--_)+2)+m},easeInCirc:function(_,m,R,w){var M=R-m;return-M*(Math.sqrt(1-(_/=w)*_)-1)+m},easeOutCirc:function(_,m,R,w){var M=R-m;return M*Math.sqrt(1-(_=_/w-1)*_)+m},easeInOutCirc:function(_,m,R,w){var M=R-m;return(_/=w/2)<1?-M/2*(Math.sqrt(1-_*_)-1)+m:M/2*(Math.sqrt(1-(_-=2)*_)+1)+m},easeInElastic:function(_,m,R,w){var M=R-m,P,L,p;return p=1.70158,L=0,P=M,_===0?m:(_/=w)===1?m+M:(L||(L=w*.3),P<Math.abs(M)?(P=M,p=L/4):p=L/(2*Math.PI)*Math.asin(M/P),-(P*Math.pow(2,10*(_-=1))*Math.sin((_*w-p)*(2*Math.PI)/L))+m)},easeOutElastic:function(_,m,R,w){var M=R-m,P,L,p;return p=1.70158,L=0,P=M,_===0?m:(_/=w)===1?m+M:(L||(L=w*.3),P<Math.abs(M)?(P=M,p=L/4):p=L/(2*Math.PI)*Math.asin(M/P),P*Math.pow(2,-10*_)*Math.sin((_*w-p)*(2*Math.PI)/L)+M+m)},easeInOutElastic:function(_,m,R,w){var M=R-m,P,L,p;return p=1.70158,L=0,P=M,_===0?m:(_/=w/2)===2?m+M:(L||(L=w*.44999999999999996),P<Math.abs(M)?(P=M,p=L/4):p=L/(2*Math.PI)*Math.asin(M/P),_<1?-.5*(P*Math.pow(2,10*(_-=1))*Math.sin((_*w-p)*(2*Math.PI)/L))+m:P*Math.pow(2,-10*(_-=1))*Math.sin((_*w-p)*(2*Math.PI)/L)*.5+M+m)},easeInBack:function(_,m,R,w,M){var P=R-m;return M===void 0&&(M=1.70158),P*(_/=w)*_*((M+1)*_-M)+m},easeOutBack:function(_,m,R,w,M){var P=R-m;return M===void 0&&(M=1.70158),P*((_=_/w-1)*_*((M+1)*_+M)+1)+m},easeInOutBack:function(_,m,R,w,M){var P=R-m;return M===void 0&&(M=1.70158),(_/=w/2)<1?P/2*(_*_*(((M*=1.525)+1)*_-M))+m:P/2*((_-=2)*_*(((M*=1.525)+1)*_+M)+2)+m},easeInBounce:function(_,m,R,w){var M=R-m,P;return P=G.easeOutBounce(w-_,0,M,w),M-P+m},easeOutBounce:function(_,m,R,w){var M=R-m;return(_/=w)<.36363636363636365?M*(7.5625*_*_)+m:_<.7272727272727273?M*(7.5625*(_-=.5454545454545454)*_+.75)+m:_<.9090909090909091?M*(7.5625*(_-=.8181818181818182)*_+.9375)+m:M*(7.5625*(_-=.9545454545454546)*_+.984375)+m},easeInOutBounce:function(_,m,R,w){var M=R-m,P;return _<w/2?(P=G.easeInBounce(_*2,0,M,w),P*.5+m):(P=G.easeOutBounce(_*2-w,0,M,w),P*.5+M*.5+m)}};We.exports=G},364687:function(We,G,_){var m=_(817061)();We.exports=m;try{regeneratorRuntime=m}catch(R){typeof globalThis=="object"?globalThis.regeneratorRuntime=m:Function("r","regeneratorRuntime = r")(m)}},577134:function(We,G,_){"use strict";_.d(G,{Z:function(){return O}});var m=_(667294),R=_(785893),w=k=>{let y=k;for(;y=y.parentElement;){const l=getComputedStyle(y,null).getPropertyValue("overflow-y");if(y===document.body)return window;if(l==="auto"||l==="scroll"||l==="overlay")return y}return window},M=k=>k.firstChild?k.firstChild.offsetParent===k:!0,P=(k,y)=>{let l=k,U=0;M(y)||(U+=k.offsetTop-y.offsetTop,y=k.offsetParent,U+=-k.offsetTop);do U+=l.offsetTop,l=l.offsetParent;while(l&&l!==y);return U},L=k=>{let y=k.parentElement;for(;y&&getComputedStyle(y,null).getPropertyValue("display")==="contents";)y=y.parentElement;return y||window},p=null;typeof CSS!="undefined"&&CSS.supports&&(CSS.supports("position","sticky")?p="sticky":CSS.supports("position","-webkit-sticky")&&(p="-webkit-sticky"));var b=!1;try{const k=Object.defineProperty({},"passive",{get(){b={passive:!0}}}),y=()=>{};window.addEventListener("testPassive",y,k),window.removeEventListener("testPassive",y,k)}catch(k){}var S=k=>{const{el:y,onChange:l,unsubs:U,measure:X}=k;if(y===window){const F=()=>({top:0,left:0,height:window.innerHeight,width:window.innerWidth}),W=X(F()),j=()=>{Object.assign(W,X(F())),l()};return window.addEventListener("resize",j,b),U.push(()=>window.removeEventListener("resize",j)),W}else{const F=X(y.getBoundingClientRect()),W=()=>{Object.assign(F,X(y.getBoundingClientRect())),l()},j=new ResizeObserver(W);return j.observe(y),U.push(()=>j.disconnect()),F}},x=k=>{const y=getComputedStyle(k,null),l=parseInt(y.getPropertyValue("padding-top"),10),U=parseInt(y.getPropertyValue("padding-bottom"),10);return{top:l,bottom:U}},g=(k,y,l)=>{const{bottom:U,offsetBottom:X,offsetTop:F}=l,W=w(k);let j=!1;const V=()=>{j||requestAnimationFrame(()=>{const st=J();st!==et&&it(st),j=!1}),j=!0};let q=W===window?window.scrollY:W.scrollTop;const $=st=>{const{offsetTop:xt,height:zt}=nt,{naturalTop:Wt}=Ft,{height:_t}=wt;return st+xt+zt>=Wt+_t+St+X},J=()=>{const{height:st}=nt,{height:xt}=wt;return xt+F+X<=st?3:$(q)?1:2},ut=W!==window&&M(W),nt=S({el:W,onChange:V,unsubs:y,measure:({height:st,top:xt})=>({height:st,offsetTop:ut?xt:0})}),yt=L(k),dt=yt===window?{top:0,bottom:0}:x(yt),Ft=S({el:yt,onChange:V,unsubs:y,measure:({height:st})=>({height:st-dt.top-dt.bottom,naturalTop:yt===window?0:P(yt,W)+dt.top+nt.offsetTop})}),wt=S({el:k,onChange:V,unsubs:y,measure:({height:st})=>({height:st})});let St=0,et=J();const it=st=>{const xt=et;if(et=st,xt===2&&(St=-1),st===3){k.style.position=p,U?k.style.bottom=`${X}px`:k.style.top=`${F}px`;return}const{height:zt,offsetTop:Wt}=nt,{height:_t,naturalTop:Xt}=Ft,{height:te}=wt;if(st===2)if(k.style.position="relative",St=xt===0?Math.max(0,Wt+q-Xt+F):Math.max(0,Wt+q+zt-(Xt+te+X)),U){const ue=Math.max(0,_t-te-St);k.style.bottom=`${ue}px`}else k.style.top=`${St}px`;else k.style.position=p,st===1?U?k.style.bottom=`${X}px`:k.style.top=`${zt-te-X}px`:U?k.style.bottom=`${zt-te-X}px`:k.style.top=`${F}px`};it(et);const Tt=st=>{if(st===q)return;const xt=st-q;if(q=st,et===3)return;const{offsetTop:zt,height:Wt}=nt,{naturalTop:_t,height:Xt}=Ft,{height:te}=wt;if(xt>0)if(et===0){if(st+zt+F>_t){const ue=Math.max(0,zt+q-_t+F);st+zt+Wt<=_t+te+ue+X?it(2):it(1)}}else et===2&&$(st)&&it(1);else if(et===1){if(zt+st+Wt<_t+Xt+X){const ue=Math.max(0,zt+q+Wt-(_t+te+X));zt+st+F>=_t+ue?it(2):it(0)}}else et===2&&zt+st+F<_t+St&&it(0)},Nt=W===window?()=>Tt(window.scrollY):()=>Tt(W.scrollTop);W.addEventListener("scroll",Nt,b),W.addEventListener("mousewheel",Nt,b),y.push(()=>W.removeEventListener("scroll",Nt),()=>W.removeEventListener("mousewheel",Nt))},T=({offsetTop:k=0,offsetBottom:y=0,bottom:l=!1}={})=>{const[U,X]=(0,m.useState)(null);return(0,m.useEffect)(()=>{if(!U||!p)return;const F=[];return g(U,F,{offsetBottom:y,offsetTop:k,bottom:l}),()=>{F.forEach(W=>W())}},[U,y,k,l]),X},E=k=>{const{offsetTop:y,offsetBottom:l,bottom:U,children:X,className:F,style:W}=k,j=T({offsetTop:y,offsetBottom:l,bottom:U});return(0,R.jsx)("div",{className:F,style:W,ref:j,children:X})},O=E}}]);
}());